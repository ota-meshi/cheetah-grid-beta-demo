{"version":3,"sources":["cheetahGrid/webpack/universalModuleDefinition","cheetahGrid/webpack/bootstrap","cheetahGrid/./columns/action/internal/InlineInputElement.css","cheetahGrid/./columns/action/internal/InlineMenuElement.css","cheetahGrid/./columns/action/internal/SmallDialogInputElement.css","cheetahGrid/./columns/message/internal/ErrorMessageElement.css","cheetahGrid/./columns/message/internal/MessageElement.css","cheetahGrid/./columns/message/internal/WarningMessageElement.css","cheetahGrid/./internal/style.css","cheetahGrid/node_modules/css-loader/lib/css-base.js","cheetahGrid/node_modules/style-loader/lib/addStyles.js","cheetahGrid/node_modules/style-loader/lib/urls.js","cheetahGrid/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg","cheetahGrid/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg","cheetahGrid/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg","cheetahGrid/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg","cheetahGrid/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg","cheetahGrid/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg","cheetahGrid/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg","cheetahGrid/./GridCanvasHelper.js","cheetahGrid/./ListGrid.js","cheetahGrid/./columns.js","cheetahGrid/./columns/action.js","cheetahGrid/./columns/action/Action.js","cheetahGrid/./columns/action/BaseAction.js","cheetahGrid/./columns/action/BaseInputEditor.js","cheetahGrid/./columns/action/ButtonAction.js","cheetahGrid/./columns/action/CheckEditor.js","cheetahGrid/./columns/action/Editor.js","cheetahGrid/./columns/action/InlineInputEditor.js","cheetahGrid/./columns/action/InlineMenuEditor.js","cheetahGrid/./columns/action/SmallDialogInputEditor.js","cheetahGrid/./columns/action/actionBind.js","cheetahGrid/./columns/action/internal/InlineInputElement.css*","cheetahGrid/./columns/action/internal/InlineInputElement.js","cheetahGrid/./columns/action/internal/InlineMenuElement.css*","cheetahGrid/./columns/action/internal/InlineMenuElement.js","cheetahGrid/./columns/action/internal/SmallDialogInputElement.css*","cheetahGrid/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid/./columns/message/BaseMessage.js","cheetahGrid/./columns/message/ErrorMessage.js","cheetahGrid/./columns/message/InfoMessage.js","cheetahGrid/./columns/message/MessageHandler.js","cheetahGrid/./columns/message/WarningMessage.js","cheetahGrid/./columns/message/internal/ErrorMessageElement.css*","cheetahGrid/./columns/message/internal/ErrorMessageElement.js","cheetahGrid/./columns/message/internal/MessageElement.css*","cheetahGrid/./columns/message/internal/MessageElement.js","cheetahGrid/./columns/message/internal/WarningMessageElement.css*","cheetahGrid/./columns/message/internal/WarningMessageElement.js","cheetahGrid/./columns/style.js","cheetahGrid/./columns/style/BaseStyle.js","cheetahGrid/./columns/style/BranchGraphStyle.js","cheetahGrid/./columns/style/ButtonStyle.js","cheetahGrid/./columns/style/CheckStyle.js","cheetahGrid/./columns/style/IconStyle.js","cheetahGrid/./columns/style/ImageStyle.js","cheetahGrid/./columns/style/MultilineTextStyle.js","cheetahGrid/./columns/style/NumberStyle.js","cheetahGrid/./columns/style/PercentCompleteBarStyle.js","cheetahGrid/./columns/style/StdBaseStyle.js","cheetahGrid/./columns/style/Style.js","cheetahGrid/./columns/type.js","cheetahGrid/./columns/type/BaseColumn.js","cheetahGrid/./columns/type/BranchGraphColumn.js","cheetahGrid/./columns/type/ButtonColumn.js","cheetahGrid/./columns/type/CheckColumn.js","cheetahGrid/./columns/type/Column.js","cheetahGrid/./columns/type/IconColumn.js","cheetahGrid/./columns/type/ImageColumn.js","cheetahGrid/./columns/type/MenuColumn.js","cheetahGrid/./columns/type/MultilineTextColumn.js","cheetahGrid/./columns/type/NumberColumn.js","cheetahGrid/./columns/type/PercentCompleteBarColumn.js","cheetahGrid/./columns/type/columnUtils.js","cheetahGrid/./core.js","cheetahGrid/./core/DrawGrid.js","cheetahGrid/./core/EventTarget.js","cheetahGrid/./data.js","cheetahGrid/./data/CachedDataSource.js","cheetahGrid/./data/DataSource.js","cheetahGrid/./element/Inline.js","cheetahGrid/./element/InlineDrawer.js","cheetahGrid/./element/InlineIcon.js","cheetahGrid/./element/InlineImage.js","cheetahGrid/./element/InlinePath2D.js","cheetahGrid/./element/InlineSvg.js","cheetahGrid/./element/inlines.js","cheetahGrid/./header/style.js","cheetahGrid/./header/style/BaseStyle.js","cheetahGrid/./header/style/Style.js","cheetahGrid/./header/type.js","cheetahGrid/./header/type/BaseHeader.js","cheetahGrid/./header/type/Header.js","cheetahGrid/./header/type/SortHeader.js","cheetahGrid/./icons.js","cheetahGrid/./internal/EventHandler.js","cheetahGrid/./internal/LRUCache.js","cheetahGrid/./internal/NumberMap.js","cheetahGrid/./internal/Rect.js","cheetahGrid/./internal/Scrollable.js","cheetahGrid/./internal/animate.js","cheetahGrid/./internal/calc.js","cheetahGrid/./internal/canvases.js","cheetahGrid/./internal/color.js","cheetahGrid/./internal/com.js","cheetahGrid/./internal/dom.js","cheetahGrid/./internal/fonts.js","cheetahGrid/./internal/hiDPI.js","cheetahGrid/./internal/icons.js","cheetahGrid/./internal/imgs.js","cheetahGrid/./internal/legacy/canvas/Path2D.js","cheetahGrid/./internal/legacy/canvas/PathCommands.js","cheetahGrid/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid/./internal/menu-items.js","cheetahGrid/./internal/path2DManager.js","cheetahGrid/./internal/sort.js","cheetahGrid/./internal/style.css*","cheetahGrid/./internal/style.js","cheetahGrid/./internal/symbolManager.js","cheetahGrid/./internal/utils.js","cheetahGrid/./list-grid/EVENT_TYPE.js","cheetahGrid/./main.js","cheetahGrid/./plugins/icons.js","cheetahGrid/./plugins/themes.js","cheetahGrid/./register.js","cheetahGrid/./themes.js","cheetahGrid/./themes/BASIC.js","cheetahGrid/./themes/MATERIAL_DESIGN.js","cheetahGrid/./themes/theme.js","cheetahGrid/./tools.js","cheetahGrid/./tools/canvashelper.js"],"names":["calcStartPosition","require","inlines","canvashelper","themes","colorToRGB","Rect","getChainSafe","getOrApply","style","toBoxArray","fonts","calc","invalidateCell","context","grid","col","row","getColor","color","getThemeColor","names","theme","default","testFontLoad","font","value","check","load","drawInlines","ctx","rect","offset","offsetTop","offsetBottom","drawInline","inline","offsetLeft","offsetRight","canDraw","save","fillStyle","draw","restore","onReady","length","inlineWidths","map","width","reduce","a","b","forEach","index","inlineWidth","_inlineRect","textAlign","textBaseline","icons","actInlines","buildInlines","_multiInlineRect","multiInlines","lineHeight","paddingTop","paddingBottom","em","measureText","pad","line","shift","undefined","drawCheckbox","helper","animElapsedTime","uncheckBgColor","checkbox","checkBgColor","borderColor","boxWidth","measureCheckbox","pos","uncheckBgRGB","checkBgRGB","checkRGB","colorName","start","end","diff","Math","ceil","uncheckRGB","x","y","Theme","constructor","_grid","name","underlayBackgroundColor","frozenRowsColor","defaultBgColor","frozenRowsBgColor","selectionBgColor","frozenRowsBorderColor","hiliteBorderColor","_checkbox","button","_button","bgColor","strokeRect","left","top","height","strokeStyle","borderColors","strokeColorsRect","GridCanvasHelper","_theme","createCalculator","calcWidth","toPx","full","getRect","getContext","calcHeight","obj","toBoxPixelArray","calculator","box","drawWithClip","drawRect","getDrawRect","beginPath","clip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","text","padding","isFrozenCell","multilineText","multilines","fillText","fillCell","fillColor","fill","fillCellWithState","option","getFillColorState","fillRect","fillRectWithState","state","getSelectState","selected","selection","border","lineWidth","startOffset","borderWithState","sel","select","moveTo","lineTo","bottom","stroke","right","caption","shadow","drawButton","radius","module","exports","isDef","isPromise","then","isObject","columns","BaseStyle","headerType","HeaderBaseStyle","DrawGrid","DataSource","CachedDataSource","MessageHandler","EVENT_TYPE","PROTECTED_SYMBOL","_","headerId","_getHeaderCellRange","headerMap","getHeaderCellRange","_updateRect","startCol","endCol","startRow","endRow","c","getColWidth","r","getRowHeight","setRect","_getCellValue","rowCount","getCell","field","get","set","_getField","_setCellValue","_getRowRecordIndex","res","dataSource","setField","_getCellMessage","message","_getCellIcon0","icon","i","retIcon","iconPropKeys","k","f","_hasField","_getCellIcon","getField","hasField","_onDrawValue","cellValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","frozenColCount","frozenRowCount","_headerBorderWithState","drawCellBase","info","getRecord","getRowRecord","getIcon","getMessage","messageHandler","id","selId","_refreshHeader","headerEvents","unlisten","HeaderMap","header","headerObjects","cell","ids","bindGridEvent","push","listen","CHANGE_STYLE","invalidate","action","isTarget","columnType","colCount","_refreshRowCount","column","minWidth","maxWidth","setColWidth","setMinColWidth","setMaxColWidth","isArrayHeaderRowHeight","headerRowHeight","setRowHeight","_tryWithUpdateDataSource","fn","dataSourceEventIds","handler","off","on","UPDATED_LENGTH","UPDATED_ORDER","_setRecords","records","ofArray","_setDataSource","EMPTY","_columns","_headerCells","_headerObjects","_addHeaders","_setupHeaderType","getHeaderCellRangeById","result","isCellInRange","roots","rowCells","_newRow","hd","headerStyle","sort","type","of","define","range","create","newRow","prev","adjustListGridOption","options","ListGrid","sortState","order","window","updateSize","updateScroll","dispose","getGridCanvasHelper","getCopyCellValue","onDrawCell","doGetCellValue","valueCallback","doChangeValue","changeValueCallback","before","after","ret","self","fireListeners","CHANGED_VALUE","record","bindEventsInternal","SELECTED_CELL","e","invalidateGridRect","getMoveLeftColByKeyDownInternal","getMoveRightColByKeyDownInternal","getMoveUpRowByKeyDownInternal","getMoveDownRowByKeyDownInternal","getOffsetInvalidateCells","getColumnIndexByField","columnIndex","focusGridCell","newCol","focusCell","makeVisibleGridCell","makeVisibleCell","BaseAction","Action","Editor","CheckEditor","ButtonAction","SmallDialogInputEditor","InlineInputEditor","InlineMenuEditor","ImmutableCheckEditor","disabled","_disabled","readOnly","_readOnly","ImmutableInputEditor","ACTIONS","CHECK","INPUT","console","warn","columnAction","DEFAULT","toUpperCase","bindCellClickAction","bindCellKeyAction","_action","clone","getState","util","mouseOver","mouseActiveCell","mouseOut","onChangeDisabledInternal","INPUT_CELL","EDITABLEINPUT_CELL","DBLCLICK_CELL","DBLTAP_CELL","KEYDOWN","MODIFY_STATUS_EDITABLEINPUT_CELL","SCROLL","KEY_ENTER","KEY_F2","BaseInputEditor","onInputCellInternal","inputValue","Error","onOpenCellInternal","onChangeSelectCellInternal","onSetInputAttrsInternal","input","onGridScrollInternal","open","event","preventDefault","stopPropagation","keyCode","setReadonly","BUTTON_COLUMN_STATE_ID","animate","CHECK_COLUMN_STATE_ID","KEY_SPACE","toggleValue","val","match","replace","key","blockKey","onChange","point","elapsed","selrange","acceptKeys","onChangeReadOnlyInternal","InlineInputElement","INLINE_INPUT_EDITOR_STATE_ID","globalElement","bindGridCount","attachInput","editor","element","addDisposable","attach","detachInput","gridFocus","detach","_classList","classList","_type","setInputAttrs","normalize","CLICK_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","MOUSEMOVE_CELL","InlineMenuElement","INLINE_MENU_EDITOR_STATE_ID","attachMenu","detachMenu","_options","getElement","cursor","SmallDialogInputElement","SMALL_DIALOG_INPUT_EDITOR_STATE_ID","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","_inputDialogManager","cancel","indexOf","getKeyCode","cancelEvent","EventHandler","createElement","CLASSNAME","createInputElement","add","args","_handler","_input","_bindInputEvents","_beforePropEditor","remove","getAttachCellArea","toFixed","appendChild","_activeData","focus","selectionStart","selectionEnd","document","createTextRange","collapse","moveEnd","moveStart","tryWithOffEvents","_isActive","parentElement","removeChild","stopPropagationOnly","contains","appendHtml","empty","disableFocus","isFocusable","findPrevSiblingFocusable","findNextSiblingFocusable","KEY_TAB","KEY_UP","KEY_DOWN","KEY_ESC","ITEM_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","target","el","createMenuElement","attachElement","menu","optionToLi","html","item","tabIndex","dataset","valueindex","span","openMenu","emptyItemEl","valueItemEl","focusEl","children","Array","prototype","slice","call","focusIndex","allHeight","offsetHeight","menuClientRect","getBoundingClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","winMargin","closeMenu","_menu","_bindMenuEvents","_doChangeValue","n","shiftKey","querySelector","items","querySelectorAll","INPUT_CLASSNAME","_focus","createDialogElement","readonly","bindProps","dialog","unbindProps","_dialog","_bindDialogEvents","errorMessage","activeData","_onInputValue","_beforeValue","_validate","onKeyupAndPress","_onInputValueChange","inputOnly","BaseMessage","detachMessageElement","_messageElement","_getMessageElement","createMessageElementInternal","drawCellMessageInternal","attachMessageElement","messageElement","moveMessageElement","move","_detach","drawCellMessage","ErrorMessageElement","RED_A100","ErrorMessage","boxRect","copy","MessageElement","GREY_L2","InfoMessage","WarningMessage","_messageInstances","_bindGridEvent","messageInstances","instance","_getMessageInstanceOfMessage","_attach","_attachInfo","_toMessageText","_move","onSelectMessage","_createMessageInstance","toLowerCase","Message","WarningMessageElement","DEEP_ORANGE_A100","MESSAGE_CLASSNAME","_rootElement","createrootElement","rootElement","_attachCell","textContent","frozenRect","offsetWidth","Style","NumberStyle","CheckStyle","ButtonStyle","ImageStyle","IconStyle","PercentCompleteBarStyle","columnStyle","StyleClass","EventTarget","defaultStyle","_bgColor","doChangeStyle","adj","DEFAULT_BRANCH_COLORS","BranchGraphStyle","_branchColors","branchColors","_margin","margin","_circleSize","circleSize","_branchLineWidth","branchLineWidth","_mergeStyle","mergeStyle","buttonBgColor","_buttonBgColor","StdBaseStyle","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","MultilineTextStyle","_lineHeight","DEFAULT_BAR_COLOR","num","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","_textAlign","_textBaseline","_color","_font","_padding","Column","NumberColumn","CheckColumn","ButtonColumn","ImageColumn","PercentCompleteBarColumn","IconColumn","BranchGraphColumn","MenuColumn","MultilineTextColumn","TYPES","NUMBER","BUTTON","IMAGE","MULTILINETEXT","styleContents","COLUMN_FADEIN_STATE_ID","isFadeinWhenCallbackInPromise","_fadeinWhenCallbackInPromise","configure","getFadinState","_generateFadinPointAction","drawInternal","stateKey","opacity","cellState","globalAlpha","fadinMgr","activeFadeins","margeAnimate","BaseColumn","bind","fadeinWhenCallbackInPromise","drawing","Date","now","currentContext","toCurrentContext","time","actStyle","convertInternal","drawMessageInternal","BRANCH_GRAPH_COLUMN_STATE_ID","getAllColumnData","callback","allData","promise","data","dataIndex","d","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","mergeLines","filter","l","froms","tos","t","splice","concat","merge","joinLine","timeline","branchIndex","reverse","j","tl","branch","branches","from","to","findBranchRootIndex","fromTargetIndex","branchTargetFromIndex","branchPoint","targetLine","commitTag","commitMerge","fromTargetLine","pop","calcCommand","command","timelineData","commands","cmd","calcBranchesInfo","calcBranchXPoints","w","max","p","textWidth","renderMerge","upLineIndex","downLineIndex","branchXPoints","lineCap","upX","upRect","getCellRelativeRect","upY","bezierCurveTo","downX","downRect","downY","_start","_cache","cache","clearCache","upLineIndexKey","downLineIndexKey","pointIndex","arc","PI","closePath","utils","_caption","withCaption","active","loadIcons","blur","offsetY","toBoolean","opt","repeatArray","count","Infinity","_tagName","tagName","_className","className","_content","content","_name","_iconWidth","iconWidth","isNaN","getCacheOrLoad","MAX_LRU_CACHE_SIZE","getImage","url","calcKeepAspectRatioSize","maxHeight","newWidth","newHeight","drawImage","withOptions","_convertInternal","basePadding","textPadding","iconPadding","path","split","defaultFotmat","Intl","NumberFormat","fmt","_format","format","withFormat","str","MARGIN","_min","min","_max","_formatter","formatter","v","svalue","endsWith","substr","rate","barMaxWidth","barTop","barLeft","barSize","loadIcon","iconList","toNormarizeArray","browser","isDescendantElement","array","isTouchEvent","getMouseButtons","Scrollable","NumberMap","hiDPI","createRootElement","KEY_END","KEY_HOME","KEY_LEFT","KEY_RIGHT","KEY_ALPHA_C","MOUSEDOWN_CELL","MOUSEUP_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","RESIZE_COLUMN","_vibrate","navigator","vibrate","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startBottom","_getRowHeight","findAfter","candRow","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_isCellDrawing","drawCells","_putCellDrawing","_removeCellDrawing","Object","keys","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","bounds","dcContext","DrawCellContext","pCol","_delayMode","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","_invalidateRect","_getVisibleRect","_getInitContext","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_getDefaultColPxWidth","defaultColWidth","_adjustColWidth","orgWidth","limit","colWidthsLimit","colWidthsMap","_setColWidth","put","each","getRowHeightInternal","rowHeightsMap","_setRowHeight","getRowsHeightInternal","h","_getScrollWidth","eachAll","_getScrollHeight","getScrollHeightInternal","_onScroll","lastLeft","lastTop","moveX","scrollable","scrollLeft","moveY","scrollTop","abs","redrawRect","_onKeyDownMove","_sel","_moveFocusCell","ctrlKey","extendRange","beforeRange","beforeRect","getCellsRect","_setFocusCell","afterRange","afterRect","intersection","invalidateRect","_getMouseAbstractPoint","changedTouches","clientX","pageX","scrollX","clientY","pageY","scrollY","_bindEvents","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","eventArgsSet","results","findIndex","resizeCol","_getResizeColAt","columnResizer","cellSelector","doubleTapBefore","longTouchId","setTimeout","defaultPrevented","clearTimeout","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","moving","lastMoving","hasListeners","focusControl","onScroll","onKeyDownMove","copyValue","copyCellValue","Promise","strCellValue","onCopy","find","onInput","abstractX","abstractY","inPoint","cellRect","getCellRect","_getScrollableVisibleRect","frozenColsWidth","frozenRowsHeight","_toRelativeRect","absoluteRect","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","mousemove","body","_mouseMove","mouseup","_mouseUp","touchmove","passive","touchend","touchcancel","_moveInternal","_upInternal","CellSelector","_getTargetCell","_cell","makeVisibleCol","makeVisibleRow","ColumnResizer","_targetCol","_x","_preX","_invalidateAbsoluteLeft","pre","afterSize","setSafeInputValue","FocusControl","_scrollable","_isComposition","metaKey","inputClear","IE","clipboardData","setData","setFocusRect","calcTop","getScrollBarSize","editMode","resetInputStatus","composition","atts","attributes","removeNames","att","_inputStatus","hasOwnProperty","nodeName","removeName","removeAttribute","setAttribute","storeInputStatus","setDefaultInputStatus","Selection","_end","inCell","_wrapFireSelectedEvent","_setSelectCell","keepSelect","_isWraped","_layers","addDraw","level","DrawLayer","list","_level","_list","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_toRelativeDrawRect","addLayerDraw","fRect","onTerminate","_onTerminate","initDocument","transform","alpha","cfg","config","floor","setScrollSize","getMaxColWidth","maxwidth","getMinColWidth","minwidth","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","oldEditMode","selCol","selRow","cellsRect","invalidateTarget","disposable","disposables","nextId","listeners","listenerData","listener","addEventListener","removeEventListener","_setFieldCache","_fCache","recCache","_rCache","getOriginal","getOriginalField","setOriginalField","fCache","fieldPromiseCallBackInternal","recordPromiseCallBackInternal","applyChainSafe","emptyFn","UPDATE_LENGTH","getValue","setPromiseBack","ss","_getIndex","_sortedIndexMap","mapIndex","_get","_length","hasOriginalField","sortedIndexMap","orderFn","v1","v2","sortPromise","rel","Inline","fillTextRect","InlineDrawer","_draw","_width","_height","InlineIcon","_icon","InlineImage","src","imageLeft","imageTop","imageWidth","imageHeight","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_onloaded","_loaded","s","_loadImage","img","_inlineImg","drawInlineImageRect","path2DManager","InlinePath2D","_path","Path2D","translate","buildSvgDataUrl","svg","XMLSerializer","serializeToString","encodeURIComponent","getSvgElement","parser","DOMParser","parseFromString","InlineSvg","svgElem","elmWidth","getAttribute","elmHeight","drawRegisteredIcon","drawWidth","drawHeight","iconOf","regedIcons","regedIcon","il","Header","SortHeader","headerCell","BaseHeader","_headerCell","_sort","_range","arrowSize","_executeSort","newState","extend","plugins","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","_listeners","fire","hasListener","clear","LRUCache","cacheSize","_map","_cacheSize","idx","remKey","indexFirst","ary","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","_left","_top","rect1","rect2","_right","_bottom","x0","x1","y0","y1","another","MAX_SCROLL","heightLimit","_update","domHeight","sbSize","vScrollRange","rScrollRange","_p","_endPointElement","relativeTop","scrollWidth","scrollHeight","cubicBezier","x2","y2","x3","y3","step","err","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","duration","easing","startedAt","canceledFlg","createAnim","resolve","reject","anim","parse","calcStr","replacer","unit","script","eval","test","trim","calcBasePosition","paddingLeft","paddingRight","rgbMap","styleColorToRGB","dummy","position","styleColor","defaultView","getComputedStyle","colorToRGB0","hexToNum","hex","parseInt","createRGB","g","tripleHexToRGB","sextupleHexToRGB","r1","r2","g1","g2","b1","b2","testRGB","rateToByte","rgb","isArray","innerHTML","dom","firstChild","isNode","arg","nodeType","toNode","childNodes","toNodeList","jQuery","inner","node","disableBeforeTabIndex","enableFocus","previousSibling","nextSibling","loads","legacy","testStr","all","ready","ratio","setRatio","devicePixelRatio","wh","scale","defineProperty","configurable","enumerable","ICON_PROP_KEYS","quote","quoted","part","join","doms","props","getIconProps","tagProps","beforeStyle","getPropertyValue","clientWidth","isLiga","toPropArray","prop","toSimpleArray","iconProps","workData","normarize","allCache","isDataUrl","search","loadImage","error","Image","onload","onerror","getCacheOrLoad0","cacheName","PathCommandsParser","_ops","op","CanvasRenderingContext2D","originalFill","apply","mag","sqrt","pow","dot","u","clamp","angle","sign","acos","rotClockwise","cost","cos","sint","sin","rotCounterClockwise","midPoint","meanVec","pointMul","sum","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","xPrime2","rx2","ry2","lambda","factor","cPrime","x1UnitVector","x2UnitVector","theta","deltaTheta","rotate","PathCommands","lMx","lMy","lx","ly","reflected","lastCommand","makeReflected","M","px","py","m","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","quadraticCurveTo","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","pathTokens","next","builder","argsProvider","canvasOperations","_commands","ops","tokens","subsequentCommand","fst","log","computeStyle","display","FontRuler","el_","getWidth","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","hasWebKitFallbackBug","callbacks","cb","HAS_WEBKIT_FALLBACK_BUG","exec","userAgent","JSON","getPath2D","ud","upsideDown","offsetX","xrate","yrate","path2d","wait","createArray","createArrayPromise","plist","setArrayField","compare","old","sortArray","dummyPromise","catch","getScrollBarWidth","SCROLLBAR_SIZE","head","Symbol","mem","arrayFind","arrayFindIndex","arr","predicate","ua","Chrome","Firefox","source","root","searchString","subjectString","toString","isFinite","lastIndex","lastIndexOf","buttons","which","getIgnoreCase","core","tools","register","_internal","symbolManager","themePlugins","iconPlugins","registers","values","BASIC","MATERIAL_DESIGN","builtin","defTheme","defaultTheme","choices","DEFAULT_BG_COLOR","cacheLinearGradient","getLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","FROZEN_ROWS_BG_COLOR","FROZEN_ROWS_BORDER_COLOR","BORDER_COLOR","getProp","superObj","defNames","createTheme","superTheme","extends","strokeRectLines","positions","preColor","pos1","pos2","roundRect","fillRoundRect","strokeRoundRect","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftWidth","rightWidth","leftLeftPos","leftTopPos","backgroundColor","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],"mappings":"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;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;;ACtXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;;;;;;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,E;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,E;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,E;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","file":"cheetahGrid.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;user-select:none}.cheetah-grid__message-element--hidden{opacity:0;display:none}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}.cheetah-grid__message-element{border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element.helper-text--right-justified{text-align:right}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons\\content\\svg\\production\\ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons\\image\\svg\\production\\ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {calcStartPosition} = require('./internal/canvases');\r\n\tconst inlines = require('./element/inlines');\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\tconst themes = require('./themes');\r\n\tconst {colorToRGB} = require('./internal/color');\r\n\tconst Rect = require('./internal/Rect');\r\n\tconst {getChainSafe, getOrApply, style: {toBoxArray}} = require('./internal/utils');\r\n\tconst fonts = require('./internal/fonts');\r\n\tconst calc = require('./internal/calc');\r\n\r\n\tfunction invalidateCell(context, grid) {\r\n\t\tconst {col, row} = context;\r\n\t\tgrid.invalidateCell(col, row);\r\n\t}\r\n\tfunction getColor(color, col, row, grid, context) {\r\n\t\treturn getOrApply(color, {\r\n\t\t\tcol,\r\n\t\t\trow,\r\n\t\t\tgrid,\r\n\t\t\tcontext,\r\n\t\t});\r\n\t}\r\n\tfunction getThemeColor(grid, ...names) {\r\n\t\treturn getChainSafe(grid.theme, ...names) || getChainSafe(themes.default, ...names);\r\n\t}\r\n\tfunction testFontLoad(font, value, context, grid) {\r\n\t\tif (font) {\r\n\t\t\tif (!fonts.check(font, value)) {\r\n\t\t\t\tfonts.load(font, value, () => invalidateCell(context, grid));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n\t\tfunction drawInline(inline, offsetLeft, offsetRight) {\r\n\t\t\tif (inline.canDraw()) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n\t\t\t\t\tctx.font = inline.font() || ctx.font;\r\n\t\t\t\t\tinline.draw({\r\n\t\t\t\t\t\tctx,\r\n\t\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\t\trect,\r\n\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\t\toffsetRight,\r\n\t\t\t\t\t\toffsetTop,\r\n\t\t\t\t\t\toffsetBottom,\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tinline.onReady(() => grid.invalidateCell(col, row));\r\n\t\t\t\t//noop\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (inlines.length === 1) {\r\n\t\t\t//1\r\n\t\t\tconst inline = inlines[0];\r\n\t\t\tdrawInline(inline, 0, 0);\r\n\t\t} else {\r\n\t\t\tconst inlineWidths = inlines.map((inline) => (inline.width({ctx}) || 0) - 0);\r\n\t\t\tlet offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n\r\n\t\t\tlet offsetLeft = 0;\r\n\t\t\tinlines.forEach((inline, index) => {\r\n\t\t\t\tconst inlineWidth = inlineWidths[index];\r\n\t\t\t\toffsetRight -= inlineWidth;\r\n\t\t\t\tdrawInline(inline, offsetLeft, offsetRight);\r\n\t\t\t\toffsetLeft += inlineWidth;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _inlineRect(grid, ctx, inline, rect, col, row,\r\n\t\t\t{\r\n\t\t\t\toffset,\r\n\t\t\t\tcolor,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons,\r\n\t\t\t} = {}) {\r\n\r\n\t\t//style\r\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tctx.font = font || ctx.font;\r\n\r\n\t\tconst actInlines = inlines.buildInlines(icons, inline);\r\n\t\tdrawInlines(ctx, actInlines, rect, offset, 0, 0, col, row, grid);\r\n\t}\r\n\r\n\tfunction _multiInlineRect(grid, ctx, multiInlines, rect, col, row,\r\n\t\t\t{\r\n\t\t\t\toffset,\r\n\t\t\t\tcolor,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\tlineHeight,\r\n\t\t\t\ticons,\r\n\t\t\t} = {}) {\r\n\t\t//style\r\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tctx.font = font || ctx.font;\r\n\r\n\t\tmultiInlines = [...multiInlines];\r\n\r\n\r\n\t\tlet paddingTop = 0;\r\n\t\tlet paddingBottom = lineHeight * (multiInlines.length - 1);\r\n\r\n\t\tif (ctx.textBaseline === 'top' || ctx.textBaseline === 'hanging') {\r\n\t\t\tconst em = ctx.measureText('').width;\r\n\t\t\tconst pad = (lineHeight - em) / 2;\r\n\t\t\tpaddingTop += pad;\r\n\t\t\tpaddingBottom -= pad;\r\n\t\t} else if (ctx.textBaseline === 'bottom' || ctx.textBaseline === 'alphabetic' || ctx.textBaseline === 'ideographic') {\r\n\t\t\tconst em = ctx.measureText('').width;\r\n\t\t\tconst pad = (lineHeight - em) / 2;\r\n\t\t\tpaddingTop -= pad;\r\n\t\t\tpaddingBottom += pad;\r\n\t\t}\r\n\t\tconst line = multiInlines.shift() || '';\r\n\t\tconst actInlines = inlines.buildInlines(icons, line);\r\n\t\tdrawInlines(ctx, actInlines, rect, offset, paddingTop, paddingBottom, col, row, grid);\r\n\t\tpaddingTop += lineHeight;\r\n\t\tpaddingBottom -= lineHeight;\r\n\t\twhile (multiInlines.length) {\r\n\t\t\tconst line = multiInlines.shift();\r\n\t\t\tconst actInlines = inlines.buildInlines(undefined, line);\r\n\t\t\tdrawInlines(ctx, actInlines, rect, offset, paddingTop, paddingBottom, col, row, grid);\r\n\t\t\tpaddingTop += lineHeight;\r\n\t\t\tpaddingBottom -= lineHeight;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction drawCheckbox(ctx, rect, check, helper,\r\n\t\t\t{\r\n\t\t\t\tanimElapsedTime = 1,\r\n\t\t\t\tuncheckBgColor = helper.theme.checkbox.uncheckBgColor,\r\n\t\t\t\tcheckBgColor = helper.theme.checkbox.checkBgColor,\r\n\t\t\t\tborderColor = helper.theme.checkbox.borderColor,\r\n\t\t\t\ttextAlign = 'center',\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t} = {}) {\r\n\t\tconst boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tconst pos = calcStartPosition(ctx, rect, boxWidth + 1/*+1*/, boxWidth + 1/*+1*/);\r\n\t\tif (0 < animElapsedTime && animElapsedTime < 1) {\r\n\t\t\tconst uncheckBgRGB = colorToRGB(uncheckBgColor);\r\n\t\t\tconst checkBgRGB = colorToRGB(checkBgColor);\r\n\t\t\tconst checkRGB = (colorName) => {\r\n\t\t\t\tconst start = uncheckBgRGB[colorName];\r\n\t\t\t\tconst end = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = start - end;\r\n\t\t\t\treturn Math.ceil(start - diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tconst uncheckRGB = (colorName) => {\r\n\t\t\t\tconst end = uncheckBgRGB[colorName];\r\n\t\t\t\tconst start = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = end - start;\r\n\t\t\t\treturn Math.ceil(start + diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tuncheckBgColor = check ? uncheckBgColor : `rgb(${uncheckRGB('r')} , ${uncheckRGB('g')}, ${uncheckRGB('b')})`;\r\n\t\t\tcheckBgColor = `rgb(${checkRGB('r')} , ${checkRGB('g')}, ${checkRGB('b')})`;\r\n\t\t}\r\n\r\n\t\tcanvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n\t\t\tuncheckBgColor,\r\n\t\t\tcheckBgColor,\r\n\t\t\tborderColor,\r\n\t\t});\r\n\t}\r\n\r\n\tclass Theme {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t}\r\n\t\tgetThemeColor(...name) {\r\n\t\t\treturn getThemeColor(this._grid, ...name);\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn getThemeColor(this._grid, 'font');\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'underlayBackgroundColor');\r\n\t\t}\r\n\t\t// color\r\n\t\tget color() {\r\n\t\t\treturn getThemeColor(this._grid, 'color');\r\n\t\t}\r\n\t\tget frozenRowsColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsColor');\r\n\t\t}\r\n\t\t// background\r\n\t\tget defaultBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'defaultBgColor');\r\n\t\t}\r\n\t\tget frozenRowsBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBgColor');\r\n\t\t}\r\n\t\tget selectionBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'selectionBgColor');\r\n\t\t}\r\n\t\t// border\r\n\t\tget borderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'borderColor');\r\n\t\t}\r\n\t\tget frozenRowsBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBorderColor');\r\n\t\t}\r\n\t\tget hiliteBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'hiliteBorderColor');\r\n\t\t}\r\n\t\tget checkbox() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'uncheckBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'checkBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget borderColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'borderColor');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tget button() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._button || (this._button = {\r\n\t\t\t\tget color() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'color');\r\n\t\t\t\t},\r\n\t\t\t\tget bgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'bgColor');\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\r\n\tfunction strokeRect(ctx, color, left, top, width, height) {\r\n\t\tif (!Array.isArray(color)) {\r\n\t\t\tif (color) {\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst borderColors = toBoxArray(color);\r\n\t\t\tcanvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\tclass GridCanvasHelper {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._theme = new Theme(grid);\r\n\t\t}\r\n\t\tcreateCalculator(context) {\r\n\t\t\treturn {\r\n\t\t\t\tcalcWidth(width) {\r\n\t\t\t\t\treturn calc.toPx(width, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.width;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcalcHeight(height) {\r\n\t\t\t\t\treturn calc.toPx(height, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.height;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetColor(color, col, row, ctx) {\r\n\t\t\treturn getColor(color, col, row, this._grid, ctx);\r\n\t\t}\r\n\t\ttoBoxArray(obj) {\r\n\t\t\treturn toBoxArray(obj);\r\n\t\t}\r\n\t\ttoBoxPixelArray(value, context) {\r\n\t\t\tif (typeof value === 'string' || Array.isArray(value)) {\r\n\t\t\t\tconst calculator = this.createCalculator(context);\r\n\t\t\t\tconst box = toBoxArray(value);\r\n\t\t\t\treturn [\r\n\t\t\t\t\tcalculator.calcHeight(box[0]),\r\n\t\t\t\t\tcalculator.calcWidth(box[1]),\r\n\t\t\t\t\tcalculator.calcHeight(box[2]),\r\n\t\t\t\t\tcalculator.calcWidth(box[3]),\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn toBoxArray(value);\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this._theme;\r\n\t\t}\r\n\t\tdrawWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawBorderWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tlet clipLeft = drawRect.left;\r\n\t\t\t\tlet clipWidth = drawRect.width;\r\n\t\t\t\tif (drawRect.left === rect.left) {\r\n\t\t\t\t\tclipLeft += -1;\r\n\t\t\t\t\tclipWidth += 1;\r\n\t\t\t\t}\r\n\t\t\t\tlet clipTop = drawRect.top;\r\n\t\t\t\tlet clipHeight = drawRect.height;\r\n\t\t\t\tif (drawRect.top === rect.top) {\r\n\t\t\t\t\tclipTop += -1;\r\n\t\t\t\t\tclipHeight += 1;\r\n\t\t\t\t}\r\n\t\t\t\tctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\ttext(text, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tlet rect = context.getRect();\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tif (padding) {\r\n\t\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\r\n\t\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\t\t\t\t\trect = new Rect(left, top, width, height);\r\n\t\t\t\t}\r\n\t\t\t\t_inlineRect(this._grid, ctx, text, rect, col, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tmultilineText(multilines, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tlineHeight = '1em',\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tlet rect = context.getRect();\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\tif (padding) {\r\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\r\n\t\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\t\t\t\t\trect = new Rect(left, top, width, height);\r\n\t\t\t\t}\r\n\t\t\t\tconst calculator = this.createCalculator(context);\r\n\t\t\t\tlineHeight = calculator.calcHeight(lineHeight);\r\n\t\t\t\t_multiInlineRect(this._grid, ctx, multilines, rect, col, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\tlineHeight,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillText(text, x, y, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'top',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\tctx.fillText(text, x, y);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfillCell(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillCellWithState(context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\t\t\tthis.fillCell(context, option);\r\n\t\t}\r\n\t\tfillRect(rect, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfillRectWithState(rect, context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\r\n\t\t\tthis.fillRect(rect, context, option);\r\n\t\t}\r\n\t\tgetFillColorState(context, option = {}) {\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tif (!state.selected && state.selection) {\r\n\t\t\t\treturn this.theme.selectionBgColor;\r\n\t\t\t} else {\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\treturn this.theme.frozenRowsBgColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn option.fillColor || this.theme.defaultBgColor;\r\n\t\t}\r\n\t\tborder(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tborderColor = this.theme.borderColor,\r\n\t\t\t\t\tlineWidth = 1,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tif (lineWidth === 1) {\r\n\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n\t\t\t\t} else if (lineWidth === 2) {\r\n\t\t\t\t\tctx.lineWidth = 2;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\t\t\tconst startOffset = (lineWidth / 2) - 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors,\r\n\t\t\t\t\t\t\trect.left + startOffset,\r\n\t\t\t\t\t\t\trect.top + startOffset,\r\n\t\t\t\t\t\t\trect.width - lineWidth + 1,\r\n\t\t\t\t\t\t\trect.height - lineWidth + 1\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tborderWithState(context, option = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\t//\r\n\t\t\tif (state.selected) {\r\n\t\t\t\toption.borderColor = this.theme.hiliteBorderColor;\r\n\t\t\t\toption.lineWidth = 2;\r\n\t\t\t\tthis.border(context, option);\r\n\t\t\t} else {\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\toption.borderColor = this.theme.frozenRowsBorderColor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toption.lineWidth = 1;\r\n\t\t\t\tthis.border(context, option);\r\n\r\n\t\t\t\t//\r\n\t\t\t\tconst sel = this._grid.selection.select;\r\n\t\t\t\tif (sel.col + 1 === col && sel.row === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (sel.col === col && sel.row + 1 === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckbox(check, context, option = {}) {\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tdrawCheckbox(ctx, context.getRect(), check, this, option);\r\n\t\t\t});\r\n\t\t}\r\n\t\tbutton(caption, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor = this.theme.button.bgColor,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor = this.theme.button.color,\r\n\t\t\t\t\ttextAlign = 'center',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tpadding = this.toBoxPixelArray(padding || rect.height / 8, context);\r\n\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\r\n\t\t\t\tcanvashelper.drawButton(ctx, left, top, width, height, {\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t\tradius: rect.height / 8,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t});\r\n\t\t\t\t_inlineRect(this._grid, ctx, caption, new Rect(left, top, width, height),\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\ttestFontLoad(font, value, context) {\r\n\t\t\treturn testFontLoad(font, value, context, this._grid);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = GridCanvasHelper;\r\n}","'use strict';\r\n{\r\n\tconst {isDef, isPromise, then, obj: {isObject}} = require('./internal/utils');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\tconst columns = require('./columns');\r\n\tconst {BaseStyle} = columns.style;\r\n\tconst headerType = require('./header/type');\r\n\tconst {BaseStyle: HeaderBaseStyle} = require('./header/style');\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\tconst {DataSource, CachedDataSource} = require('./data');\r\n\tconst themes = require('./themes');\r\n\tconst icons = require('./internal/icons');\r\n\tconst MessageHandler = require('./columns/message/MessageHandler');\r\n\tconst EVENT_TYPE = require('./list-grid/EVENT_TYPE');\r\n\t\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('./internal/symbolManager');\r\n\r\n\tlet headerId = 0;\r\n\t//private methods\r\n\tfunction _getHeaderCellRange(grid, col, row) {\r\n\t\treturn grid[_].headerMap.getHeaderCellRange(col, row);\r\n\t}\r\n\tfunction _updateRect(grid, col, row, context) {\r\n\t\tconst rect = context.getRect();\r\n\t\tconst {\r\n\t\t\tstartCol,\r\n\t\t\tendCol,\r\n\t\t\tstartRow,\r\n\t\t\tendRow,\r\n\t\t} = _getHeaderCellRange(grid, col, row);\r\n\t\tfor (let c = col - 1; c >= startCol; c--) {\r\n\t\t\trect.left -= grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let c = col + 1; c <= endCol; c++) {\r\n\t\t\trect.right += grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let r = row - 1; r >= startRow; r--) {\r\n\t\t\trect.top -= grid.getRowHeight(r);\r\n\t\t}\r\n\t\tfor (let r = row + 1; r <= endRow; r++) {\r\n\t\t\trect.bottom += grid.getRowHeight(r);\r\n\t\t}\r\n\t\tcontext.setRect(rect);\r\n\t}\r\n\tfunction _getCellValue(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn grid[_].headerMap.getCell(col, row).caption;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.get;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, field, row);\r\n\t\t}\r\n\t}\r\n\tfunction _setCellValue(grid, col, row, value) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\t// nop\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.set;\r\n\t\t\t}\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\tconst res = grid[_].dataSource.setField(index, field, value);\r\n\t\t\treturn isPromise(res) ? res : true;\r\n\t\t}\r\n\t}\r\n\tfunction _getCellMessage(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst {message} = grid[_].headerMap.columns[col];\r\n\t\t\tif (!message) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, message, row);\r\n\t\t}\r\n\t}\r\n\tfunction _getCellIcon0(grid, icon, row) {\r\n\t\tif (!isDef(icon)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (Array.isArray(icon)) {\r\n\t\t\treturn icon.map((i) => _getCellIcon0(grid, i, row));\r\n\t\t}\r\n\t\tif (!isObject(icon)) {\r\n\t\t\treturn _getField(grid, icon, row);\r\n\t\t}\r\n\t\tconst retIcon = {};\r\n\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\tif (icon[k]) {\r\n\t\t\t\tconst f = _getField(grid, icon[k], row);\r\n\t\t\t\tif (isDef(f)) {\r\n\t\t\t\t\tretIcon[k] = f;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!_hasField(grid, icon[k], row)) {\r\n\t\t\t\t\t\tretIcon[k] = icon[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn retIcon;\r\n\t}\r\n\tfunction _getCellIcon(grid, col, row) {\r\n\t\tconst {icon} = grid[_].headerMap.columns[col];\r\n\t\treturn _getCellIcon0(grid, icon, row);\r\n\t}\r\n\tfunction _getField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.getField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _hasField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.hasField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _onDrawValue(grid, cellValue, context, {col, row}, style, draw) {\r\n\t\tconst helper = grid[_].gridCanvasHelper;\r\n\r\n\t\tconst drawCellBg = ({bgColor} = {}) => {\r\n\t\t\tconst fillOpt = {\r\n\t\t\t\tfillColor: bgColor,\r\n\t\t\t};\r\n\t\t\t//cell\r\n\t\t\thelper.fillCellWithState(context, fillOpt);\r\n\t\t};\r\n\t\tconst drawCellBorder = () => {\r\n\r\n\t\t\tif (context.col === grid.frozenColCount - 1) {\r\n\t\t\t\t//\r\n\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor\r\n\t\t\t\t\t\t: helper.theme.frozenRowsBorderColor;\r\n\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(borderColor, context.col, context.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.right - 2.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.right - 2.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (context.row < grid[_].headerMap.rowCount) {\r\n\t\t\t\t_headerBorderWithState(grid, helper, context);\r\n\t\t\t} else {\r\n\t\t\t\thelper.borderWithState(context);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tconst drawCellBase = ({bgColor} = {}) => {\r\n\t\t\tdrawCellBg({bgColor});\r\n\t\t\tdrawCellBorder();\r\n\t\t};\r\n\t\tconst info = {\r\n\t\t\tgetRecord: () => grid.getRowRecord(row),\r\n\t\t\tgetIcon: () => _getCellIcon(grid, col, row),\r\n\t\t\tgetMessage: () => _getCellMessage(grid, col, row),\r\n\t\t\tmessageHandler: grid[_].messageHandler,\r\n\t\t\tstyle,\r\n\t\t\tdrawCellBase,\r\n\t\t\tdrawCellBg,\r\n\t\t\tdrawCellBorder,\r\n\t\t};\r\n\r\n\t\treturn draw(cellValue, info, context, grid);\r\n\t}\r\n\tfunction _headerBorderWithState(grid, helper, context) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst sel = grid.selection.select;\r\n\t\tif (sel.row >= grid[_].headerMap.rowCount) {\r\n\t\t\t//\r\n\t\t\thelper.borderWithState(context);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst {id} = grid[_].headerMap.getCell(col, row);\r\n\r\n\t\tconst rect = context.getRect();\r\n\t\tconst option = {};\r\n\r\n\t\tconst {id: selId} = grid[_].headerMap.getCell(sel.col, sel.row);\r\n\t\t//\r\n\t\tif (selId === id) {\r\n\t\t\toption.borderColor = helper.theme.hiliteBorderColor;\r\n\t\t\toption.lineWidth = 2;\r\n\t\t\thelper.border(context, option);\r\n\t\t} else {\r\n\t\t\toption.lineWidth = 1;\r\n\t\t\t// header color\r\n\t\t\tconst isFrozenCell = grid.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\toption.borderColor = helper.theme.frozenRowsBorderColor;\r\n\t\t\t}\r\n\t\t\thelper.border(context, option);\r\n\r\n\t\t\t//\r\n\t\t\tif (col > 0 && grid[_].headerMap.getCell(col - 1, row).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (row > 0 &&\r\n\t\t\t\t\t\tgrid[_].headerMap.getCell(col, row - 1).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[0]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction _refreshHeader(grid) {\r\n\t\tif (grid[_].headerEvents) {\r\n\t\t\tgrid[_].headerEvents.forEach((id) => grid.unlisten(id));\r\n\t\t}\r\n\t\tgrid[_].headerMap = new HeaderMap(grid[_].header);\r\n\t\tgrid[_].headerEvents = [];\r\n\t\tgrid[_].headerMap.headerObjects.forEach((cell) => {\r\n\t\t\tconst ids = cell.headerType.bindGridEvent(grid);\r\n\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\tif (cell.style) {\r\n\t\t\t\tif (cell.style instanceof HeaderBaseStyle) {\r\n\t\t\t\t\tconst id = cell.style.listen(HeaderBaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].headerMap.columns.forEach((col, index) => {\r\n\t\t\tif (col.action) {\r\n\t\t\t\tconst ids = col.action.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.columnType) {\r\n\t\t\t\tconst ids = col.columnType.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.style) {\r\n\t\t\t\tif (col.style instanceof BaseStyle) {\r\n\t\t\t\t\tconst id = col.style.listen(columns.style.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid.colCount = grid[_].headerMap.columns.length;\r\n\t\t_refreshRowCount(grid);\r\n\t\tgrid.frozenRowCount = grid[_].headerMap.rowCount;\r\n\t\tfor (let col = 0; col < grid[_].headerMap.columns.length; col++) {\r\n\t\t\tconst column = grid[_].headerMap.columns[col];\r\n\t\t\tconst {width, minWidth, maxWidth} = column;\r\n\t\t\tif (width && (width > 0 || typeof width === 'string')) {\r\n\t\t\t\tgrid.setColWidth(col, width);\r\n\t\t\t}\r\n\t\t\tif (minWidth && (minWidth > 0 || typeof minWidth === 'string')) {\r\n\t\t\t\tgrid.setMinColWidth(col, minWidth);\r\n\t\t\t}\r\n\t\t\tif (maxWidth && (maxWidth > 0 || typeof maxWidth === 'string')) {\r\n\t\t\t\tgrid.setMaxColWidth(col, maxWidth);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isArrayHeaderRowHeight = Array.isArray(grid[_].headerRowHeight);\r\n\t\tfor (let row = 0; row < grid[_].headerMap.rowCount; row++) {\r\n\t\t\tconst height = isArrayHeaderRowHeight ? grid[_].headerRowHeight[row] : grid[_].headerRowHeight;\r\n\t\t\tif (height && height > 0) {\r\n\t\t\t\tgrid.setRowHeight(row, height);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _refreshRowCount(grid) {\r\n\t\tgrid.rowCount = grid[_].dataSource.length + grid[_].headerMap.rowCount;\r\n\t}\r\n\tfunction _tryWithUpdateDataSource(grid, fn) {\r\n\t\tif (grid[_].dataSourceEventIds) {\r\n\t\t\tgrid[_].dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n\t\t}\r\n\r\n\t\tfn(grid);\r\n\r\n\t\tgrid[_].dataSourceEventIds = [\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n\t\t\t\t_refreshRowCount(grid);\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction _setRecords(grid, records = []) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tgrid[_].records = records;\r\n\t\t\tgrid[_].dataSource = CachedDataSource.ofArray(grid[_].records);\r\n\t\t});\r\n\t}\r\n\tfunction _setDataSource(grid, dataSource) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tif (dataSource) {\r\n\t\t\t\tif (dataSource instanceof DataSource) {\r\n\t\t\t\t\tgrid[_].dataSource = dataSource;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgrid[_].dataSource = new CachedDataSource(dataSource);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tgrid[_].dataSource = DataSource.EMPTY;\r\n\t\t\t}\r\n\t\t\tgrid[_].records = null;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction _getRowRecordIndex(grid, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn undefined;\r\n\t\t} else {\r\n\t\t\treturn row - grid[_].headerMap.rowCount;\r\n\t\t}\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\tclass HeaderMap {\r\n\t\tconstructor(header) {\r\n\t\t\tthis._columns = [];\r\n\t\t\tthis._headerCells = [];\r\n\t\t\tthis._headerObjects = [];\r\n\r\n\t\t\tthis._addHeaders(0, header, []);\r\n\t\t\tthis._setupHeaderType();\r\n\t\t}\r\n\t\tget columns() {\r\n\t\t\treturn this._columns;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this._headerCells.length;\r\n\t\t}\r\n\t\tget headerObjects() {\r\n\t\t\treturn this._headerObjects;\r\n\t\t}\r\n\t\tgetCell(col, row) {\r\n\t\t\treturn this._headerCells[row][col];\r\n\t\t}\r\n\t\tgetHeaderCellRangeById(id) {\r\n\t\t\tfor (let r = 0; r < this.rowCount; r++) {\r\n\t\t\t\tfor (let c = 0; c < this.columns.length; c++) {\r\n\t\t\t\t\tif (id === this.getCell(c, r).id) {\r\n\t\t\t\t\t\treturn this.getHeaderCellRange(c, r);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tgetHeaderCellRange(col, row) {\r\n\t\t\tconst result = {\r\n\t\t\t\tstartCol: col,\r\n\t\t\t\tstartRow: row,\r\n\t\t\t\tendCol: col,\r\n\t\t\t\tendRow: row,\r\n\t\t\t\tisCellInRange(col, row) {\r\n\t\t\t\t\treturn this.startCol <= col && col <= this.endCol &&\r\n\t\t\t\t\t\t\tthis.startRow <= row && row <= this.endRow;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst {id} = this.getCell(col, row);\r\n\t\t\tfor (let c = col - 1; c >= 0; c--) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let c = col + 1; c < this.columns.length; c++) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startRow = r;\r\n\t\t\t}\r\n\t\t\tfor (let r = row + 1; r < this.rowCount; r++) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endRow = r;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\t_addHeaders(row, header, roots) {\r\n\t\t\tconst rowCells = this._headerCells[row] || this._newRow(row);\r\n\t\t\theader.forEach((hd) => {\r\n\t\t\t\tconst col = this._columns.length;\r\n\t\t\t\tconst cell = {\r\n\t\t\t\t\tid: headerId++,\r\n\t\t\t\t\tcaption: hd.caption,\r\n\t\t\t\t\tstyle: hd.headerStyle,\r\n\t\t\t\t\tsort: hd.sort,\r\n\t\t\t\t};\r\n\t\t\t\tthis._headerObjects.push(cell);\r\n\t\t\t\trowCells[col] = cell;\r\n\t\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\t\tthis._headerCells[r][col] = roots[r];\r\n\t\t\t\t}\r\n\t\t\t\tif (hd.columns) {\r\n\t\t\t\t\tthis._addHeaders(row + 1, hd.columns, [...roots, cell]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._columns.push({\r\n\t\t\t\t\t\twidth: hd.width,\r\n\t\t\t\t\t\tminWidth: hd.minWidth,\r\n\t\t\t\t\t\tmaxWidth: hd.maxWidth,\r\n\t\t\t\t\t\tfield: hd.field,\r\n\t\t\t\t\t\ticon: hd.icon,\r\n\t\t\t\t\t\tmessage: hd.message,\r\n\t\t\t\t\t\tcolumnType: columns.type.of(hd.columnType),\r\n\t\t\t\t\t\taction: columns.action.of(hd.action),\r\n\t\t\t\t\t\tstyle: hd.style,\r\n\t\t\t\t\t\tdefine: hd,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (let r = row + 1; r < this._headerCells.length; r++) {\r\n\t\t\t\t\t\tthis._headerCells[r][col] = cell;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setupHeaderType() {\r\n\t\t\tthis._headerObjects.forEach((cell) => {\r\n\t\t\t\tcell.range = this.getHeaderCellRangeById(cell.id);\r\n\t\t\t\tcell.headerType = headerType.create(cell);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_newRow(row) {\r\n\t\t\tconst newRow = this._headerCells[row] = [];\r\n\t\t\tif (!this._columns.length) {\r\n\t\t\t\treturn newRow;\r\n\t\t\t}\r\n\t\t\tconst prev = this._headerCells[row - 1];\r\n\t\t\tfor (let col = 0; col < prev.length; col++) {\r\n\t\t\t\tnewRow[col] = prev[col];\r\n\t\t\t}\r\n\t\t\treturn newRow;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction adjustListGridOption(options) {\r\n\t\tif (options) {\r\n\t\t\tdelete options.frozenRowCount;\r\n\t\t\tdelete options.colCount;\r\n\t\t\tdelete options.rowCount;\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\t\r\n\t/**\r\n\t * ListGrid\r\n\t * @classdesc cheetahGrid.ListGrid\r\n\t * @extends cheetahGrid.core.DrawGrid\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tclass ListGrid extends DrawGrid {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * header: see header property\r\n\t\t * records {array}: records data\r\n\t\t * dataSource {DataSource}: records data source\r\n\t\t * frozenColCount {number}: default 0\r\n\t\t * defaultRowHeight {number}: default grid row height. default 40\r\n\t\t * defaultColWidth {number}: default grid col width. default 80\r\n\t\t * borderColor: border color\r\n\t\t * parentElement {Element}: canvas parentElement\r\n\t\t * theme {object}: theme\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(options = {}) {\r\n\t\t\tsuper(adjustListGridOption(options));\r\n\t\t\tthis[_].header = options.header || [];\r\n\t\t\tthis[_].headerRowHeight = options.headerRowHeight || [];\r\n\t\t\tif (options.dataSource) {\r\n\t\t\t\t_setDataSource(this, options.dataSource);\r\n\t\t\t} else {\r\n\t\t\t\t_setRecords(this, options.records);\r\n\t\t\t}\r\n\t\t\t_refreshHeader(this);\r\n\t\t\tthis[_].sortState = {\r\n\t\t\t\tcol: -1,\r\n\t\t\t\torder: undefined,\r\n\t\t\t};\r\n\t\t\tthis[_].gridCanvasHelper = new GridCanvasHelper(this);\r\n\t\t\tthis[_].theme = themes.of(options.theme);\r\n\t\t\tthis[_].messageHandler = new MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n\t\t\tthis.invalidate();\r\n\t\t\tthis[_].handler.on(window, 'resize', () => {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t\tthis.updateScroll();\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t});\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis[_].messageHandler.dispose();\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tget header() {\r\n\t\t\treturn this[_].header;\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * <pre>\r\n\t\t * column options\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * field: field name\r\n\t\t * width: column width\r\n\t\t * minWidth: column min width\r\n\t\t * maxWidth: column max width\r\n\t\t * icon: icon name\r\n\t\t * message: message key name\r\n\t\t * columnType: ColumnType\r\n\t\t * action: ColumnAction\r\n\t\t * style: ColumnStyle\r\n\t\t * sort: define sort setting\r\n\t\t * -----\r\n\t\t *\r\n\t\t * multiline header\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * columns: columns define\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tset header(header) {\r\n\t\t\tthis[_].header = header;\r\n\t\t\t_refreshHeader(this);\r\n\t\t}\r\n\t\tget records() {\r\n\t\t\treturn this[_].records;\r\n\t\t}\r\n\t\tset records(records) {\r\n\t\t\t_setRecords(this, records);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget dataSource() {\r\n\t\t\treturn this[_].dataSource;\r\n\t\t}\r\n\t\tset dataSource(dataSource) {\r\n\t\t\t_setDataSource(this, dataSource);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this[_].theme;\r\n\t\t}\r\n\t\tset theme(theme) {\r\n\t\t\tthis[_].theme = themes.of(theme);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn super.font || this[_].gridCanvasHelper.theme.font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tsuper.font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tsuper.underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tget sortState() {\r\n\t\t\treturn this[_].sortState;\r\n\t\t}\r\n\t\tset sortState(sortState) {\r\n\t\t\tthis[_].sortState = sortState;\r\n\t\t}\r\n\t\tgetField(col) {\r\n\t\t\treturn this[_].headerMap.columns[col].field;\r\n\t\t}\r\n\t\tgetRowRecord(row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t} else {\r\n\t\t\t\treturn this[_].dataSource.get(_getRowRecordIndex(this, row));\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetGridCanvasHelper() {\r\n\t\t\treturn this[_].gridCanvasHelper;\r\n\t\t}\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol, startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tif (startCol !== col || startRow !== row) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn _getCellValue(this, col, row);\r\n\t\t}\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\tconst column = this[_].headerMap.columns[col];\r\n\r\n\t\t\tlet draw;\r\n\t\t\tlet style;\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst hd = this[_].headerMap.getCell(col, row);\r\n\t\t\t\tdraw = hd.headerType.onDrawCell;\r\n\t\t\t\t({style} = hd);\r\n\t\t\t\t_updateRect(this, col, row, context);\r\n\t\t\t} else {\r\n\t\t\t\tdraw = column.columnType.onDrawCell;\r\n\t\t\t\t({style} = column);\r\n\t\t\t}\r\n\t\t\tconst cellValue = _getCellValue(this, col, row);\r\n\t\t\treturn _onDrawValue(this, cellValue, context, {col, row}, style, draw);\r\n\t\t}\r\n\t\tdoGetCellValue(col, row, valueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst value = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(value)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvalueCallback(value);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tdoChangeValue(col, row, changeValueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst before = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(before)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tconst after = changeValueCallback(before);\r\n\t\t\t\tif (after === undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn then(_setCellValue(this, col, row, after), (ret) => {\r\n\t\t\t\t\tif (ret) {\r\n\t\t\t\t\t\tconst {field} = this[_].headerMap.columns[col];\r\n\t\t\t\t\t\tconst self = this;\r\n\t\t\t\t\t\tthis.fireListeners(EVENT_TYPE.CHANGED_VALUE, {\r\n\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\tget record() {\r\n\t\t\t\t\t\t\t\treturn self.getRowRecord(row);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfield,\r\n\t\t\t\t\t\t\tvalue: after,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\tthis.listen(EVENT_TYPE.SELECTED_CELL, (e) => {\r\n\t\t\t\tif (e.row < this[_].headerMap.rowCount) {\r\n\t\t\t\t\tconst {startCol, endCol, startRow, endRow} = _getHeaderCellRange(this, e.col, e.row);\r\n\t\t\t\t\tif (startCol !== endCol || startRow !== endRow) {\r\n\t\t\t\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = startCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveLeftColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = endCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveRightColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = startRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveUpRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = endRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveDownRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tgetColumnIndexByField(field) {\r\n\t\t\tfor (const columnIndex in this[_].headerMap.columns) {\r\n\t\t\t\tif (this[_].headerMap.columns[columnIndex].field === field) {\r\n\t\t\t\t\treturn columnIndex - 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfocusGridCell(field, index) {\r\n\t\t\tconst {\r\n\t\t\t\tstart: {col: startCol, row: startRow},\r\n\t\t\t\tend: {col: endCol, row: endRow}\r\n\t\t\t} = this.selection.range;\r\n\r\n\t\t\tconst newCol = this.getColumnIndexByField(field);\r\n\t\t\tconst newRow = index + this[_].headerMap.rowCount;\r\n\t\t\tthis.focusCell(newCol, newRow);\r\n\t\t\tthis.selection.select = {\r\n\t\t\t\tcol: newCol,\r\n\t\t\t\trow: newRow\r\n\t\t\t};\r\n\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\tthis.invalidateCell(newCol, newRow);\r\n\t\t}\r\n\t\tmakeVisibleGridCell(field, index) {\r\n\t\t\tthis.makeVisibleCell(this.getColumnIndexByField(field), index + this[_].headerMap.rowCount);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ListGrid;\r\n}","'use strict';\r\n{\r\n\tconst action = require('./columns/action');\r\n\tconst type = require('./columns/type');\r\n\tconst style = require('./columns/style');\r\n\r\n\t/**\r\n\t * columns\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\taction,\r\n\t\ttype,\r\n\t\tstyle,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst BaseAction = require('./action/BaseAction');\r\n\tconst Action = require('./action/Action');\r\n\tconst Editor = require('./action/Editor');\r\n\tconst CheckEditor = require('./action/CheckEditor');\r\n\tconst ButtonAction = require('./action/ButtonAction');\r\n\tconst SmallDialogInputEditor = require('./action/SmallDialogInputEditor');\r\n\tconst InlineInputEditor = require('./action/InlineInputEditor');\r\n\tconst InlineMenuEditor = require('./action/InlineMenuEditor');\r\n\r\n\tclass ImmutableCheckEditor extends CheckEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\tclass ImmutableInputEditor extends SmallDialogInputEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * column actions\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.action\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst action = {\r\n\t\tACTIONS: {\r\n\t\t\tCHECK: new ImmutableCheckEditor(),\r\n\t\t\tINPUT: new ImmutableInputEditor(),\r\n\t\t},\r\n\t\tget BaseAction() {\r\n\t\t\treturn BaseAction;\r\n\t\t},\r\n\t\tget Editor() {\r\n\t\t\treturn Editor;\r\n\t\t},\r\n\t\tget Action() {\r\n\t\t\treturn Action;\r\n\t\t},\r\n\t\tget CheckEditor() {\r\n\t\t\treturn CheckEditor;\r\n\t\t},\r\n\t\tget ButtonAction() {\r\n\t\t\treturn ButtonAction;\r\n\t\t},\r\n\t\tget SmallDialogInputEditor() {\r\n\t\t\treturn SmallDialogInputEditor;\r\n\t\t},\r\n\t\tget InlineInputEditor() {\r\n\t\t\tconsole.warn('InlineInputEditor is an experiment stage');\r\n\t\t\treturn InlineInputEditor;\r\n\t\t},\r\n\t\tget InlineMenuEditor() {\r\n\t\t\treturn InlineMenuEditor;\r\n\t\t},\r\n\t\tof(columnAction) {\r\n\t\t\tif (!columnAction) {\r\n\t\t\t\treturn action.ACTIONS.DEFAULT;\r\n\t\t\t} else if (typeof columnAction === 'string') {\r\n\t\t\t\treturn action.ACTIONS[columnAction.toUpperCase()] || action.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnAction;\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\tmodule.exports = action;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\r\n\tconst BaseAction = require('./BaseAction');\r\n\r\n\tclass Action extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._action = option.action;\r\n\t\t}\r\n\t\tget action() {\r\n\t\t\treturn this._action;\r\n\t\t}\r\n\t\tset action(action) {\r\n\t\t\tthis._action = action;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Action(this);\r\n\t\t}\r\n\t\tgetState(grid) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst state = this.getState(grid);\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst record = grid.getRowRecord(cell.row);\r\n\t\t\t\tthis._action(record);\r\n\t\t\t};\r\n\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = Action;\r\n}","'use strict';\r\n{\r\n\t\r\n\r\n\tclass BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis._disabled = option.disabled;\r\n\t\t}\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tset disabled(disabled) {\r\n\t\t\tthis._disabled = !!disabled;\r\n\t\t\tthis.onChangeDisabledInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseAction(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tonChangeDisabledInternal() {}\r\n\t}\r\n\tmodule.exports = BaseAction;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst Editor = require('./Editor');\r\n\tconst {EVENT_TYPE: {\r\n\t\tINPUT_CELL,\r\n\t\tEDITABLEINPUT_CELL,\r\n\t\tSELECTED_CELL,\r\n\t\tDBLCLICK_CELL,\r\n\t\tDBLTAP_CELL,\r\n\t\tKEYDOWN,\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\tSCROLL\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_F2 = 113;\r\n\r\n\tclass BaseInputEditor extends Editor {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseInputEditor(this);\r\n\t\t}\r\n\t\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonOpenCellInternal(grid, cell) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonGridScrollInternal(grid) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst open = (cell) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onOpenCellInternal(grid, cell);\r\n\t\t\t};\r\n\r\n\t\t\tconst input = (cell, value) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onInputCellInternal(grid, cell, value);\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(INPUT_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinput({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t}, e.value);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLCLICK_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLTAP_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\te.event.preventDefault();\r\n\t\t\t\t\te.event.stopPropagation();\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\t\trow: sel.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\t\tthis.onChangeSelectCellInternal(grid, {col: e.col, row: e.row}, e.selected);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\t\tthis.onGridScrollInternal(grid);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.onSetInputAttrsInternal(grid, {\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t}, cell.input);\r\n\t\t\t\t}),\r\n\t\t\t\t\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = BaseInputEditor;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst Action = require('./Action');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tclass ButtonAction extends Action {\r\n\t\tgetState(grid) {\r\n\t\t\tif (!grid[BUTTON_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, BUTTON_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\treturn grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonAction;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}, isPromise} = require('../../internal/utils');\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\tconst animate = require('../../internal/animate');\r\n\r\n\tconst Editor = require('./Editor');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_SPACE = 32;\r\n\r\n\tfunction toggleValue(val) {\r\n\t\tif (typeof val === 'number') {\r\n\t\t\tif (val === 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t} else if (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn 'true';\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn 'on';\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)0$/, '$11');\r\n\t\t\t} else if (val === 'true') {\r\n\t\t\t\treturn 'false';\r\n\t\t\t} else if (val === 'on') {\r\n\t\t\t\treturn 'off';\r\n\t\t\t} else if (val.match(/^0*1$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)1$/, '$10');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !val;\r\n\t}\r\n\r\n\tclass CheckEditor extends Editor {\r\n\t\tclone() {\r\n\t\t\treturn new CheckEditor(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tif (!grid[CHECK_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, CHECK_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID];\r\n\t\t\t\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tconst key = cell.col + ':' + cell.row;\r\n\t\t\t\tconst blockKey = key + '::block';\r\n\t\t\t\tif (this.readOnly || this.disabled || state[blockKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst ret = grid.doChangeValue(cell.col, cell.row, toggleValue);\r\n\t\t\t\tif (ret) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst onChange = () => {\r\n\t\t\t\t\t\t// checkbox animation\r\n\t\t\t\t\t\tanimate(200, (point) => {\r\n\t\t\t\t\t\t\tif (point === 1) {\r\n\t\t\t\t\t\t\t\tdelete state[key];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstate[key] = {\r\n\t\t\t\t\t\t\t\t\telapsed: point,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgrid.invalidateCell(cell.col, cell.row);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (isPromise(ret)) {\r\n\t\t\t\t\t\tstate[blockKey] = true;\r\n\t\t\t\t\t\tret.then(() => {\r\n\t\t\t\t\t\t\tdelete state[blockKey];\r\n\t\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction: (e) => {\r\n\t\t\t\t\t\tconst selrange = grid.selection.range;\r\n\t\t\t\t\t\tconst col = grid.selection.select.col;\r\n\t\t\t\t\t\tfor (let row = selrange.start.row; row <= selrange.end.row; row++) {\r\n\t\t\t\t\t\t\tif (!util.isTarget(col, row)) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taction({\r\n\t\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tacceptKeys: [KEY_ENTER, KEY_SPACE],\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckEditor;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst BaseAction = require('./BaseAction');\r\n\tclass Editor extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._readOnly = option.readOnly;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t\tset readOnly(readOnly) {\r\n\t\t\tthis._readOnly = !!readOnly;\r\n\t\t\tthis.onChangeReadOnlyInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Editor(this);\r\n\t\t}\r\n\t\tonChangeReadOnlyInternal() {}\r\n\t}\r\n\tmodule.exports = Editor;\r\n}","'use strict';\r\n\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nconst InlineInputElement = require('./internal/InlineInputElement');\r\nconst {INLINE_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nfunction doChangeValue(grid) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.doChangeValue();\r\n\t}\r\n}\r\n\r\n\r\nclass InlineInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tInlineInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputEditor;","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst {normalize} = require('../../internal/menu-items');\r\n\t\r\nconst Editor = require('./Editor');\r\nconst {EVENT_TYPE: {\r\n\tSELECTED_CELL,\r\n\tCLICK_CELL,\r\n\tKEYDOWN,\r\n\tSCROLL,\r\n\tMOUSEOVER_CELL,\r\n\tMOUSEOUT_CELL,\r\n\tMOUSEMOVE_CELL,\r\n}} = require('../../core/DrawGrid');\r\nconst InlineMenuElement = require('./internal/InlineMenuElement');\r\nconst {INLINE_MENU_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineMenuElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\n\r\nclass InlineMenuEditor extends Editor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._options = normalize(option.options);\r\n\t}\r\n\tdispose() {\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget options() {\r\n\t\treturn this._options;\r\n\t}\r\n\tset options(options) {\r\n\t\tthis._options = normalize(options);\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineMenuEditor(this);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tbindGridEvent(grid, col, util) {\r\n\t\tconst open = (cell) => {\r\n\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\t\tattachMenu(grid, cell, this, value);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn [\r\n\t\t\tgrid.listen(CLICK_CELL, (cell) => {\r\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\trow: cell.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\tdetachMenu();\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\tdetachMenu(true);\r\n\t\t\t}),\r\n\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuEditor;","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\t\r\nconst SmallDialogInputElement = require('./internal/SmallDialogInputElement');\r\nconst {SMALL_DIALOG_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new SmallDialogInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nclass SmallDialogInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._helperText = option.helperText;\r\n\t\tthis._inputValidator = option.inputValidator;\r\n\t\tthis._validator = option.validator;\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tdispose() {\r\n\t\tthis._inputDialogManager.dispose();\r\n\t\tthis._inputDialogManager = null;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tget helperText() {\r\n\t\treturn this._helperText;\r\n\t}\r\n\tget inputValidator() {\r\n\t\treturn this._inputValidator;\r\n\t}\r\n\tget validator() {\r\n\t\treturn this._validator;\r\n\t}\r\n\tclone() {\r\n\t\treturn new SmallDialogInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t// cancel input\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tSmallDialogInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputEditor;","'use strict';\r\n{\r\n\t\r\n\tconst {isPromise, event: {cancel}} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tKEYDOWN,\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tfunction bindCellClickAction(grid, col, util, {\r\n\t\taction,\r\n\t\tmouseOver,\r\n\t\tmouseOut\r\n\t}) {\r\n\t\treturn [\r\n\t\t\t// click\r\n\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\trow: e.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOver) {\r\n\t\t\t\t\tif (!mouseOver({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t})) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOut) {\r\n\t\t\t\t\tmouseOut({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction bindCellKeyAction(grid, col, util, {action, acceptKeys = []}) {\r\n\t\tacceptKeys = [...acceptKeys, KEY_ENTER];\r\n\t\treturn [\r\n\t\t\t// enter key down\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (acceptKeys.indexOf(keyCode) === -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(sel.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t\tcancel(e);\r\n\t\t\t}),\r\n\r\n\t\t];\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tbindCellClickAction,\r\n\t\tbindCellKeyAction,\r\n\t};\r\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\nconst KEY_ENTER = 13;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-input';\r\n\r\nfunction createInputElement() {\r\n\trequire('./InlineInputElement.css');\r\n\treturn createElement('input', {classList: CLASSNAME});\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {classList, type} = editor;\r\n\tif (classList) {\r\n\t\tinput.classList.add(...classList);\r\n\t}\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass InlineInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._input = createInputElement();\r\n\t\tthis._bindInputEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst input = this._input;\r\n\t\tconst handler = this._handler;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tinput.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tinput.style.top = rect.top.toFixed() + 'px';\r\n\t\tinput.style.left = rect.left.toFixed() + 'px';\r\n\t\tinput.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(input);\r\n\r\n\t\tsetInputAttrs(editor, grid, input);\r\n\t\tinput.value = value;\r\n\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\r\n\t\tconst focus = () => {\r\n\t\t\tinput.focus();\r\n\r\n\t\t\tconst end = input.value.length;\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t\t}\r\n\t\t\tif (document.selection) {\r\n\t\t\t\tconst range = input.createTextRange();\r\n\t\t\t\trange.collapse();\r\n\t\t\t\trange.moveEnd('character', end);\r\n\t\t\t\trange.moveStart('character', end);\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t};\r\n\t\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\tfocus();\r\n\t\t});\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst input = this._input;\r\n\t\t\tthis._handler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\t\tinput.parentElement.removeChild(input);\r\n\t\t\t});\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\tdoChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\tconst {grid, col, row} = this._activeData;\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst input = this._input;\r\n\t\tif (!input || !input.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindInputEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(input, 'click', stopPropagationOnly);\r\n\t\thandler.on(input, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(input, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(input, 'dblclick', stopPropagationOnly);\r\n\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (getKeyCode(e) === KEY_ENTER) {\r\n\t\t\t\tif (!this._isActive()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {grid} = this._activeData;\r\n\r\n\t\t\t\tthis.doChangeValue();\r\n\t\t\t\tif (grid) {\r\n\t\t\t\t\tgrid.focus();\r\n\t\t\t\t}\r\n\t\t\t\tthis.detach();\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\thandler.on(input, 'blur', (e) => {\r\n\t\t\tthis.doChangeValue();\r\n\t\t\tthis.detach();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tisDef,\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t}\r\n} = require('../../../internal/utils');\r\n\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n\tappendHtml,\r\n\tempty,\r\n\tdisableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n} = require('../../../internal/dom');\r\n\t\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-menu';\r\nconst ITEM_CLASSNAME = CLASSNAME + '__menu-item';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\nconst EMPTY_ITEM_CLASSNAME = ITEM_CLASSNAME + '--empty';\r\n\r\nfunction findItemParents(target) {\r\n\tlet el = target;\r\n\twhile (!el.classList.contains(ITEM_CLASSNAME)) {\r\n\t\tel = el.parentElement;\r\n\t\tif (!el || el.classList.contains(CLASSNAME)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\treturn el;\r\n}\r\n\r\nfunction createMenuElement() {\r\n\trequire('./InlineMenuElement.css');\r\n\treturn createElement('ul', {classList: CLASSNAME});\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n\tmenu.style.top = rect.top.toFixed() + 'px';\r\n\tmenu.style.left = rect.left.toFixed() + 'px';\r\n\tmenu.style.width = rect.width.toFixed() + 'px';\r\n\tmenu.style['line-height'] = rect.height.toFixed() + 'px';\r\n\telement.appendChild(menu);\r\n}\r\n\r\nfunction optionToLi({classList, caption, value, html}, index) {\r\n\tconst item = createElement('li', {classList: ITEM_CLASSNAME});\r\n\titem.tabIndex = 0;\r\n\titem.dataset.valueindex = index;\r\n\tif (classList) {\r\n\t\titem.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n\t}\r\n\r\n\tif (caption) {\r\n\t\tconst span = createElement('span', {text: caption});\r\n\t\titem.appendChild(span);\r\n\t} else if (html) {\r\n\t\tappendHtml(item, html);\r\n\t}\r\n\r\n\tif (value === '' || !isDef(value)) {\r\n\t\titem.classList.add(EMPTY_ITEM_CLASSNAME);\r\n\t}\r\n\r\n\treturn item;\r\n}\r\n\r\nfunction openMenu(grid, editor, col, row, value, menu) {\r\n\tconst {options, classList} = editor;\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tempty(menu);\r\n\tmenu.style.font = grid.font || '16px sans-serif';\r\n\tlet emptyItemEl = null;\r\n\tlet valueItemEl = null;\r\n\t\t\r\n\toptions.forEach((option, i) => {\r\n\t\tconst item = optionToLi(option, i);\r\n\t\tmenu.appendChild(item);\r\n\t\tif (option.value === value) {\r\n\t\t\tvalueItemEl = item;\r\n\t\t\titem.dataset.select = true;\r\n\t\t}\r\n\t\tif (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n\t\t\temptyItemEl = item;\r\n\t\t}\r\n\t});\r\n\tconst focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n\tif (classList) {\r\n\t\tmenu.classList.add(...classList);\r\n\t}\r\n\tconst children = Array.prototype.slice.call(menu.children, 0);\r\n\tconst focusIndex = children.indexOf(focusEl);\r\n\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t// Cover the right line\r\n\trect.width++;\r\n\r\n\t// append for calculation\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Make the selection item at the middle\r\n\tlet offset = 0;\r\n\tlet allHeight = 0;\r\n\tfor (let i = 0; i < children.length; i++) {\r\n\t\tconst offsetHeight = children[i].offsetHeight;\r\n\t\tif (i < focusIndex) {\r\n\t\t\toffset += offsetHeight;\r\n\t\t}\r\n\t\tallHeight += offsetHeight;\r\n\t}\r\n\trect.offsetTop(-offset);\r\n\tmenu.style['transform-origin'] = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Control not to overflow the screen range\r\n\tconst menuClientRect = menu.getBoundingClientRect();\r\n\tconst scaleDiff = ((allHeight - menuClientRect.height) / 2);\r\n\tconst orgMenuTop = menuClientRect.top - scaleDiff;\r\n\tlet menuTop = orgMenuTop;\r\n\tconst menuBottom = menuTop + allHeight;\r\n\tconst winBottom = window.innerHeight;\r\n\tconst winMargin = 20;\r\n\tif (menuBottom > (winBottom - winMargin)) {\r\n\t\tconst diff = menuBottom - winBottom + winMargin;\r\n\t\tmenuTop -= diff;\r\n\t}\r\n\tif (menuTop < 0/*winTop*/ + winMargin) {\r\n\t\tmenuTop = winMargin;\r\n\t}\r\n\tif (menuTop !== orgMenuTop) {\r\n\t\trect.offsetTop(-(orgMenuTop - menuTop));\r\n\t\t// re update\r\n\t\tattachElement(element, rect, menu);\r\n\t}\r\n\t\t\r\n\tif (focusEl) {\r\n\t\tfocusEl.focus();\r\n\t}\r\n\tmenu.classList.remove(HIDDEN_CLASSNAME);\r\n\tmenu.classList.add(SHOWN_CLASSNAME);\r\n}\r\n\r\nfunction closeMenu(grid, col, row, menu) {\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tdisableFocus(menu);\r\n}\r\n\r\nclass InlineMenuElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._menu = createMenuElement();\r\n\t\tthis._bindMenuEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst menu = this._menu;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._menu = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (menu.parentElement) {\r\n\t\t\tmenu.parentElement.removeChild(menu);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tmenu.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\topenMenu(grid, editor, col, row, value, menu);\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst menu = this._menu;\r\n\t\t\tcloseMenu(grid, col, row, menu);\r\n\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\t_doChangeValue(valueindex) {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tconst {value} = editor.options[valueindex];\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst menu = this._menu;\r\n\t\tif (!menu || !menu.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindMenuEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\t\r\n\t\thandler.on(menu, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(menu, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(menu, 'dblclick', stopPropagationOnly);\r\n\r\n\t\thandler.on(menu, 'click', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\tthis._doChangeValue(item.dataset.valueindex);\r\n\t\t\tthis.detach(true);\r\n\t\t});\r\n\t\thandler.on(menu, 'keydown', (e) => {\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\t\tthis._doChangeValue(valueindex);\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\t\tconst n = findPrevSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\t\tconst n = findNextSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_TAB) {\r\n\t\t\t\tif (!e.shiftKey) {\r\n\t\t\t\t\tif (!findNextSiblingFocusable(item)) {\r\n\t\t\t\t\t\tlet n = menu.querySelector('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findNextSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!findPrevSiblingFocusable(item)) {\r\n\t\t\t\t\t\tconst items = menu.querySelectorAll('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tlet n = items[items.length - 1];\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findPrevSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n\tthen,\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__small-dialog-input';\r\nconst INPUT_CLASSNAME = CLASSNAME + '__input';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\n\r\nfunction _focus(input, handler) {\r\n\tconst focus = () => {\r\n\t\tinput.focus();\r\n\r\n\t\tconst end = input.value.length;\r\n\t\ttry {\r\n\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t}\r\n\t\tif (document.selection) {\r\n\t\t\tconst range = input.createTextRange();\r\n\t\t\trange.collapse();\r\n\t\t\trange.moveEnd('character', end);\r\n\t\t\trange.moveStart('character', end);\r\n\t\t\trange.select();\r\n\t\t}\r\n\t};\r\n\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\tfocus();\r\n\t});\r\n}\r\n\r\nfunction createDialogElement() {\r\n\trequire('./SmallDialogInputElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst input = createElement('input', {classList: INPUT_CLASSNAME});\r\n\tinput.readonly = true;\r\n\tinput.tabIndex = -1;\r\n\telement.appendChild(input);\r\n\treturn element;\r\n}\r\n\r\nfunction bindProps(grid, dialog, input, editor) {\r\n\tconst {classList, helperText} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.add(...classList);\r\n\t}\r\n\tif (helperText && typeof helperText !== 'function') {\r\n\t\tdialog.dataset.helperText = helperText;\r\n\t}\r\n\tsetInputAttrs(editor, grid, input);\r\n}\r\n\r\nfunction unbindProps(grid, dialog, input, editor) {\r\n\tconst {classList} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.remove(...classList);\r\n\t}\r\n\tdelete dialog.dataset.helperText;\r\n\tinput.type = '';\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {type} = editor;\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass SmallDialogInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._dialog = createDialogElement();\r\n\t\tthis._input = this._dialog.querySelector('.' + INPUT_CLASSNAME);\r\n\t\tthis._bindDialogEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._dialog = null;\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (dialog.parentElement) {\r\n\t\t\tdialog.parentElement.removeChild(dialog);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tunbindProps(grid, dialog, input, this._beforePropEditor);\r\n\t\t}\r\n\r\n\t\tdelete dialog.dataset.errorMessage;\r\n\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = false;\r\n\t\tinput.tabIndex = 0;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tdialog.style.top = rect.top.toFixed() + 'px';\r\n\t\tdialog.style.left = rect.left.toFixed() + 'px';\r\n\t\tdialog.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(dialog);\r\n\t\t\t\r\n\t\tinput.value = value;\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\t\tconst activeData = {grid, col, row, editor};\r\n\t\tthis._onInputValue(input, activeData);\r\n\t\t_focus(input, handler);\r\n\t\tdialog.classList.add(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.remove(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = true;\r\n\r\n\t\t\r\n\t\tbindProps(grid, dialog, input, editor);\r\n\r\n\t\tthis._activeData = activeData;\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst dialog = this._dialog;\r\n\t\t\tconst input = this._input;\r\n\r\n\t\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\t\tinput.readonly = false;\r\n\t\t\tinput.tabIndex = -1;\r\n\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t\tthis._beforeValue = null;\r\n\t}\r\n\t_doChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\treturn then(this._validate(value), (res) => {\r\n\t\t\tif (res && value === input.value) {\r\n\t\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\tgrid.doChangeValue(col, row, () => value);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\t_isActive() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tif (!dialog || !dialog.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindDialogEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(dialog, 'click', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'dblclick', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'touchstart', stopPropagationOnly);\r\n\t\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t\tthis._onInputValue(input);\r\n\t\t});\r\n\t\tconst onKeyupAndPress = (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._onInputValue(input);\r\n\t\t};\r\n\t\thandler.on(input, 'keyup', onKeyupAndPress);\r\n\t\thandler.on(input, 'keypress', onKeyupAndPress);\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst input = this._input;\r\n\t\t\t\tconst {value} = input;\r\n\t\t\t\tthen(this._doChangeValue(), (r) => {\r\n\t\t\t\t\tif (r && value === input.value) {\r\n\t\t\t\t\t\tthis.detach(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else {\r\n\t\t\t\tthis._onInputValue(input);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t_onInputValue(input, activeData) {\r\n\t\tconst before = this._beforeValue;\r\n\t\tconst {value} = input;\r\n\t\tif (before !== value) {\r\n\t\t\tthis._onInputValueChange(value, before, activeData);\r\n\t\t}\r\n\t\tthis._beforeValue = value;\r\n\t}\r\n\t_onInputValueChange(after, before, activeData) {\r\n\t\tactiveData = activeData || this._activeData;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst {grid, col, row, editor} = activeData;\r\n\t\tif (typeof editor.helperText === 'function') {\r\n\t\t\tconst helperText = editor.helperText(after, {grid, col, row});\r\n\t\t\tif (helperText) {\r\n\t\t\t\tdialog.dataset.helperText = helperText;\r\n\t\t\t} else {\r\n\t\t\t\tdelete dialog.dataset.helperText;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ('errorMessage' in dialog.dataset) {\r\n\t\t\tthis._validate(after, true);\r\n\t\t}\r\n\t}\r\n\t_validate(value, inputOnly) {\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tlet message = null;\r\n\t\tif (editor.inputValidator) {\r\n\t\t\tmessage = editor.inputValidator(value, {grid, col, row});\r\n\t\t}\r\n\t\treturn then(message, (message) => {\r\n\t\t\tif (!message && editor.validator && !inputOnly) {\r\n\t\t\t\tmessage = editor.validator(value, {grid, col, row});\r\n\t\t\t}\r\n\t\t\treturn then(message, (message) => {\r\n\t\t\t\tif (message && value === input.value) {\r\n\t\t\t\t\tdialog.dataset.errorMessage = message;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete dialog.dataset.errorMessage;\r\n\t\t\t\t}\r\n\t\t\t\treturn !message;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputElement;","'use strict';\r\n\r\nclass BaseMessage {\r\n\tconstructor(grid) {\r\n\t\tthis._grid = grid;\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detachMessageElement();\r\n\t\tif (this._messageElement) {\r\n\t\t\tthis._messageElement.dispose();\r\n\t\t}\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\t_getMessageElement() {\r\n\t\treturn this._messageElement || (this._messageElement = this.createMessageElementInternal());\r\n\t}\r\n\tcreateMessageElementInternal() {\r\n\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\r\n\t}\r\n\tattachMessageElement(col, row, message) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.attach(this._grid, col, row, message);\r\n\t}\r\n\tmoveMessageElement(col, row) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.move(this._grid, col, row);\r\n\t}\r\n\tdetachMessageElement() {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement._detach();\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\t\tthis.drawCellMessageInternal(message, context, style, helper, info);\r\n\t}\r\n}\r\n\r\nmodule.exports = BaseMessage;","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst ErrorMessageElement = require('./internal/ErrorMessageElement');\r\n\r\nconst RED_A100 = '#ff8a80';\r\n// const RED_A400 = '#FF1744';\r\n\r\nclass ErrorMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new ErrorMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = RED_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessage;","'use strict';\r\n\r\nconst BaseMessage = require('./BaseMessage');\r\nconst MessageElement = require('./internal/MessageElement');\r\n\r\nconst Rect = require('../../internal/Rect');\r\n\r\nconst GREY_L2 = '#e0e0e0';\r\n// const GREY_L1 = '#bdbdbd';\r\n\t\r\nclass InfoMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new MessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = GREY_L2;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw i mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 2, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InfoMessage;","'use strict';\r\n\r\n\r\nconst {isPromise} = require('../../internal/utils');\r\nconst {\r\n\tSELECTED_CELL,\r\n\tSCROLL,\r\n\tCHANGED_VALUE\r\n} = require('../../list-grid/EVENT_TYPE');\r\nconst ErrorMessage = require('./ErrorMessage');\r\nconst WarningMessage = require('./WarningMessage');\r\nconst InfoMessage = require('./InfoMessage');\r\n\r\n\r\nclass MessageHandler {\r\n\tconstructor(grid, getMessage) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._messageInstances = {};\r\n\t\tthis._bindGridEvent(grid, getMessage);\r\n\t}\r\n\tdispose() {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\tfor (const k in messageInstances) {\r\n\t\t\tmessageInstances[k].dispose();\r\n\t\t}\r\n\t\tthis._messageInstances = null;\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\r\n\t\tif (!message || isPromise(message)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tinstance.drawCellMessage(message, context, style, helper, info);\r\n\t}\r\n\t_attach(col, row, message) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tif (info && info.instance !== instance) {\r\n\t\t\tinfo.instance.detachMessageElement();\r\n\t\t}\r\n\t\tinstance.attachMessageElement(col, row, this._toMessageText(message));\r\n\t\tthis._attachInfo = {col, row, instance};\r\n\t}\r\n\t_move(col, row) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info || info.col !== col || info.row !== row) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.moveMessageElement(col, row);\r\n\t}\r\n\t_detach() {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.detachMessageElement();\r\n\t\tthis._attachInfo = null;\r\n\t}\r\n\t_bindGridEvent(grid, getMessage) {\r\n\t\tconst onSelectMessage = (sel) => {\r\n\t\t\tconst message = getMessage(sel.col, sel.row);\r\n\t\t\tif (!message || isPromise(message)) {\r\n\t\t\t\tthis._detach();\r\n\t\t\t} else {\r\n\t\t\t\tthis._attach(sel.col, sel.row, message);\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\tif (!e.selected) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.before.col === e.col && e.before.row === e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t\tgrid.listen(SCROLL, () => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tthis._move(sel.col, sel.row);\r\n\t\t});\r\n\t\tgrid.listen(CHANGED_VALUE, (e) => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tif (sel.col !== e.col || sel.row !== e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t}\r\n\t_getMessageInstanceOfMessage(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t\t}\r\n\t\tconst type = ('' + message.type).toLowerCase();\r\n\t\tif (type === 'info') {\r\n\t\t\treturn this._createMessageInstance('info', InfoMessage);\r\n\t\t} else if (type === 'warning') {\r\n\t\t\treturn this._createMessageInstance('warning', WarningMessage);\r\n\t\t}\r\n\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t}\r\n\t_toMessageText(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn message;\r\n\t\t}\r\n\t\tif (message.message) {\r\n\t\t\treturn message.message;\r\n\t\t}\r\n\t\treturn '' + message;\r\n\t}\r\n\t_createMessageInstance(name, Message) {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\treturn messageInstances[name] || (messageInstances[name] = new Message(this._grid));\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageHandler;","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst WarningMessageElement = require('./internal/WarningMessageElement');\r\n\r\nconst DEEP_ORANGE_A100 = '#ff9e80';\r\n\r\nclass WarningMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new WarningMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = DEEP_ORANGE_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessage;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__error-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass ErrorMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./ErrorMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nfunction createrootElement() {\r\n\trequire('./MessageElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst message = createElement('span', {classList: [MESSAGE_CLASSNAME]});\r\n\telement.appendChild(message);\r\n\treturn element;\r\n}\r\n\r\n\r\nclass MessageElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tconst rootElement = this._rootElement = createrootElement();\r\n\t\tthis._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._rootElement = null;\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\tattach(grid, col, row, message) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst messageElement = this._messageElement;\r\n\r\n\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\r\n\t\t\tmessageElement.textContent = message;\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tmove(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tdetach() {\r\n\t\tthis._detach();\r\n\t}\r\n\t_detach() {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (rootElement.parentElement) {\r\n\t\t\trootElement.parentElement.removeChild(rootElement);\r\n\t\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\t\t}\r\n\t}\r\n\t_attachCell(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t\tconst {bottom: top, left, width} = rect;\r\n\t\tconst {frozenRowCount, frozenColCount} = grid;\r\n\t\tif (row >= frozenRowCount && frozenRowCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(col, frozenRowCount - 1);\r\n\t\t\tif (top < frozenRect.bottom) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (top < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (col >= frozenColCount && frozenColCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(frozenColCount - 1, row);\r\n\t\t\tif (left < frozenRect.right) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (left < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst {offsetHeight, offsetWidth} = element;\r\n\t\tif (offsetHeight < top) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (offsetWidth < left) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\trootElement.style.top = top.toFixed() + 'px';\r\n\t\trootElement.style.left = left.toFixed() + 'px';\r\n\t\trootElement.style.width = width.toFixed() + 'px';\r\n\t\tif (rootElement.parentElement !== element) {\r\n\t\t\telement.appendChild(rootElement);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__warning-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass WarningMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./WarningMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessageElement;","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\tconst NumberStyle = require('./style/NumberStyle');\r\n\tconst CheckStyle = require('./style/CheckStyle');\r\n\tconst ButtonStyle = require('./style/ButtonStyle');\r\n\tconst ImageStyle = require('./style/ImageStyle');\r\n\tconst IconStyle = require('./style/IconStyle');\r\n\tconst PercentCompleteBarStyle = require('./style/PercentCompleteBarStyle');\r\n\r\n\t/**\r\n\t * column styles\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.style\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst style = {\r\n\t\tget EVENT_TYPE() {\r\n\t\t\treturn BaseStyle.EVENT_TYPE;\r\n\t\t},\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tget NumberStyle() {\r\n\t\t\treturn NumberStyle;\r\n\t\t},\r\n\t\tget CheckStyle() {\r\n\t\t\treturn CheckStyle;\r\n\t\t},\r\n\t\tget ButtonStyle() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t},\r\n\t\tget ImageStyle() {\r\n\t\t\treturn ImageStyle;\r\n\t\t},\r\n\t\tget IconStyle() {\r\n\t\t\treturn IconStyle;\r\n\t\t},\r\n\t\tget PercentCompleteBarStyle() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t},\r\n\t\tof(columnStyle, record, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(record), record, StyleClass);\r\n\t\t\t\t} else if (record && columnStyle in record) {\r\n\t\t\t\t\treturn style.of(record[columnStyle], record, StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\nconst BaseStyle = require('./BaseStyle');\r\nlet defaultStyle;\r\nfunction adj(style) {\r\n\tconst {textAlign = 'center'} = style;\r\n\tstyle.textAlign = textAlign;\r\n\treturn style;\r\n}\r\nconst DEFAULT_BRANCH_COLORS = (name, index) => {\r\n\tswitch (index % 3) {\r\n\tcase 0:\r\n\t\treturn '#979797';\r\n\tcase 1:\r\n\t\treturn '#008fb5';\r\n\tcase 2:\r\n\t\treturn '#f1c109';\r\n\tdefault:\r\n\t}\r\n\treturn '#979797';\r\n};\r\nclass BranchGraphStyle extends BaseStyle {\r\n\tstatic get DEFAULT() {\r\n\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BranchGraphStyle());\r\n\t}\r\n\tconstructor(style = {}) {\r\n\t\tsuper(adj(style));\r\n\t\tthis._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n\t\tthis._margin = style.margin || 4;\r\n\t\tthis._circleSize = style.circleSize || 16;\r\n\t\tthis._branchLineWidth = style.branchLineWidth || 4;\r\n\t\tthis._mergeStyle = style.mergeStyle === 'straight' ? 'straight' : 'bezier';\r\n\t}\r\n\tget branchColors() {\r\n\t\treturn this._branchColors;\r\n\t}\r\n\tset branchColors(branchColors) {\r\n\t\tthis._branchColors = branchColors;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget margin() {\r\n\t\treturn this._margin;\r\n\t}\r\n\tset margin(margin) {\r\n\t\tthis._margin = margin;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget circleSize() {\r\n\t\treturn this._circleSize;\r\n\t}\r\n\tset circleSize(circleSize) {\r\n\t\tthis._circleSize = circleSize;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget branchLineWidth() {\r\n\t\treturn this._branchLineWidth;\r\n\t}\r\n\tset branchLineWidth(branchLineWidth) {\r\n\t\tthis._branchLineWidth = branchLineWidth;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget mergeStyle() {\r\n\t\treturn this._mergeStyle;\r\n\t}\r\n\tset mergeStyle(mergeStyle) {\r\n\t\tthis._mergeStyle = mergeStyle;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphStyle(this);\r\n\t}\r\n}\r\nmodule.exports = BranchGraphStyle;","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass ButtonStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tbuttonBgColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t}\r\n\t\tget buttonBgColor() {\r\n\t\t\treturn this._buttonBgColor;\r\n\t\t}\r\n\t\tset buttonBgColor(buttonBgColor) {\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = ButtonStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass CheckStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tborderColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t}\r\n\t\tget uncheckBgColor() {\r\n\t\t\treturn this._uncheckBgColor;\r\n\t\t}\r\n\t\tset uncheckBgColor(uncheckBgColor) {\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget checkBgColor() {\r\n\t\t\treturn this._checkBgColor;\r\n\t\t}\r\n\t\tset checkBgColor(checkBgColor) {\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget borderColor() {\r\n\t\t\treturn this._borderColor;\r\n\t\t}\r\n\t\tset borderColor(borderColor) {\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = CheckStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass IconStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = IconStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tclass ImageStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tthis._imageSizing = style.imageSizing;\r\n\t\t\tthis._margin = style.margin || 4;\r\n\t\t}\r\n\t\tget imageSizing() {\r\n\t\t\treturn this._imageSizing;\r\n\t\t}\r\n\t\tset imageSizing(imageSizing) {\r\n\t\t\tthis._imageSizing = imageSizing;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget margin() {\r\n\t\t\treturn this._margin;\r\n\t\t}\r\n\t\tset margin(margin) {\r\n\t\t\tthis._margin = margin;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textBaseline = 'top'} = style;\r\n\t\tstyle.textBaseline = textBaseline;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass MultilineTextStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new MultilineTextStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tthis._lineHeight = style.lineHeight || '1em';\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MultilineTextStyle(this);\r\n\t\t}\r\n\t\tget lineHeight() {\r\n\t\t\treturn this._lineHeight;\r\n\t\t}\r\n\t\tset lineHeight(lineHeight) {\r\n\t\t\tthis._lineHeight = lineHeight;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = MultilineTextStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'right'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass NumberStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = NumberStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\tlet defaultStyle;\r\n\tconst DEFAULT_BAR_COLOR = (num) => {\r\n\t\tif (num > 80) {\r\n\t\t\treturn '#20a8d8';\r\n\t\t}\r\n\t\tif (num > 50) {\r\n\t\t\treturn '#4dbd74';\r\n\t\t}\r\n\t\tif (num > 20) {\r\n\t\t\treturn '#ffc107';\r\n\t\t}\r\n\t\treturn '#f86c6b';\r\n\t};\r\n\tclass PercentCompleteBarStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new PercentCompleteBarStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n\t\t\tthis._barBgColor = style.barBgColor || '#f0f3f5';\r\n\t\t\tthis._barHeight = style.barHeight || 3;\r\n\t\t}\r\n\t\tget barColor() {\r\n\t\t\treturn this._barColor;\r\n\t\t}\r\n\t\tset barColor(barColor) {\r\n\t\t\tthis._barColor = barColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barBgColor() {\r\n\t\t\treturn this._barBgColor;\r\n\t\t}\r\n\t\tset barBgColor(barBgColor) {\r\n\t\t\tthis._barBgColor = barBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barHeight() {\r\n\t\t\treturn this._barHeight;\r\n\t\t}\r\n\t\tset barHeight(barHeight) {\r\n\t\t\tthis._barHeight = barHeight;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarStyle;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\r\n\tlet defaultStyle;\r\n\tclass StdBaseStyle extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._textAlign = style.textAlign || 'left';\r\n\t\t\tthis._textBaseline = style.textBaseline || 'middle';\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new StdBaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = StdBaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t\tthis._font = style.font;\r\n\t\t\tthis._padding = style.padding;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this._font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis._font = font;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget padding() {\r\n\t\t\treturn this._padding;\r\n\t\t}\r\n\t\tset padding(padding) {\r\n\t\t\tthis._padding = padding;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./type/Column');\r\n\tconst NumberColumn = require('./type/NumberColumn');\r\n\tconst CheckColumn = require('./type/CheckColumn');\r\n\tconst ButtonColumn = require('./type/ButtonColumn');\r\n\tconst ImageColumn = require('./type/ImageColumn');\r\n\tconst PercentCompleteBarColumn = require('./type/PercentCompleteBarColumn');\r\n\tconst IconColumn = require('./type/IconColumn');\r\n\tconst BranchGraphColumn = require('./type/BranchGraphColumn');\r\n\tconst MenuColumn = require('./type/MenuColumn');\r\n\tconst MultilineTextColumn = require('./type/MultilineTextColumn');\r\n\r\n\t/**\r\n\t * column types\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.type\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst type = {\r\n\t\tTYPES: {\r\n\t\t\tDEFAULT: new Column(),\r\n\t\t\tNUMBER: new NumberColumn(),\r\n\t\t\tCHECK: new CheckColumn(),\r\n\t\t\tBUTTON: new ButtonColumn(),\r\n\t\t\tIMAGE: new ImageColumn(),\r\n\t\t\tMULTILINETEXT: new MultilineTextColumn(),\r\n\t\t},\r\n\t\tget Column() {\r\n\t\t\treturn Column;\r\n\t\t},\r\n\t\tget NumberColumn() {\r\n\t\t\treturn NumberColumn;\r\n\t\t},\r\n\t\tget CheckColumn() {\r\n\t\t\treturn CheckColumn;\r\n\t\t},\r\n\t\tget ButtonColumn() {\r\n\t\t\treturn ButtonColumn;\r\n\t\t},\r\n\t\tget ImageColumn() {\r\n\t\t\treturn ImageColumn;\r\n\t\t},\r\n\t\tget PercentCompleteBarColumn() {\r\n\t\t\treturn PercentCompleteBarColumn;\r\n\t\t},\r\n\t\tget IconColumn() {\r\n\t\t\treturn IconColumn;\r\n\t\t},\r\n\t\tget BranchGraphColumn() {\r\n\t\t\treturn BranchGraphColumn;\r\n\t\t},\r\n\t\tget MenuColumn() {\r\n\t\t\treturn MenuColumn;\r\n\t\t},\r\n\t\tget MultilineTextColumn() {\r\n\t\t\treturn MultilineTextColumn;\r\n\t\t},\r\n\t\tof(columnType) {\r\n\t\t\tif (!columnType) {\r\n\t\t\t\treturn type.TYPES.DEFAULT;\r\n\t\t\t} else if (typeof columnType === 'string') {\r\n\t\t\t\treturn type.TYPES[columnType.toUpperCase()] || type.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnType;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {isPromise, isDef, obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst animate = require('../../internal/animate');\r\n\tconst BaseStyle = require('../style/Style');\r\n\tconst {COLUMN_FADEIN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\r\n\tfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n\t\tif (isDef(column._fadeinWhenCallbackInPromise)) {\r\n\t\t\treturn column._fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\treturn !!grid.configure('fadeinWhenCallbackInPromise');\r\n\t}\r\n\r\n\tfunction getFadinState(grid) {\r\n\t\tif (!grid[COLUMN_FADEIN_STATE_ID]) {\r\n\t\t\tsetReadonly(grid, COLUMN_FADEIN_STATE_ID, {});\r\n\t\t}\r\n\t\treturn grid[COLUMN_FADEIN_STATE_ID];\r\n\t}\r\n\tfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\treturn (point) => {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\tif (point === 1) {\r\n\t\t\t\tdelete state[stateKey];\r\n\t\t\t} else {\r\n\t\t\t\tstate[stateKey] = {\r\n\t\t\t\t\topacity: point,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\tdrawInternal();\r\n\r\n\t\t\tconst cellState = state[stateKey];\r\n\t\t\tif (cellState) {\r\n\t\t\t\t//\r\n\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst fadinMgr = {\r\n\t\tanimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\t// fadein animation\r\n\t\t\tconst state = getFadinState(grid);\r\n\r\n\t\t\tconst activeFadeins = [\r\n\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n\t\t\t];\r\n\t\t\tstate.activeFadeins = activeFadeins;\r\n\t\t\t\r\n\t\t\tanimate(500, (point) => {\r\n\t\t\t\tactiveFadeins.forEach((f) => f(point));\r\n\t\t\t\tif (point === 1) {\r\n\t\t\t\t\tdelete state.activeFadeins;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tmargeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tif (state.activeFadeins) {\r\n\t\t\t\tstate.activeFadeins.push(\r\n\t\t\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdrawInternal();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t};\r\n\r\n\tclass BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\r\n\t\t\t//Promisecallback\r\n\t\t\tthis._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn BaseStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, getRecord, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\t//\r\n\t\t\tif (isPromise(cellValue)) {\r\n\t\t\t\tif (context.drawing) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst start = Date.now();\r\n\t\t\t\treturn cellValue.then((val) => {\r\n\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst time = Date.now() - start;\r\n\r\n\t\t\t\t\tconst drawInternal = () => {\r\n\t\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\t\t\tthis.convertInternal(val),\r\n\t\t\t\t\t\t\t\tcurrentContext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n\t\t\t\t\t\tdrawInternal();//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst {col, row} = context;\r\n\t\t\t\t\t\tif (time < 80) {\r\n\t\t\t\t\t\t\t//80msPromiseCallback\r\n\t\t\t\t\t\t\tfadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\tfadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\tthis.convertInternal(cellValue),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\t//\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\t\tconst cellState = grid[COLUMN_FADEIN_STATE_ID] && grid[COLUMN_FADEIN_STATE_ID][stateKey];\r\n\t\t\t\tif (cellState) {\r\n\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn isDef(value) ? value : '';\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tdrawMessageInternal(message, context, style, helper, grid, info) {\r\n\t\t\tinfo.messageHandler.drawCellMessage(message, context, style, helper, info);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseColumn;\r\n}","'use strict';\r\nconst {isDef, getOrApply, isPromise, obj: {isObject}} = require('../../internal/utils');\r\nconst BranchGraphStyle = require('../style/BranchGraphStyle');\r\nconst BaseColumn = require('./BaseColumn');\r\nconst {BRANCH_GRAPH_COLUMN_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nfunction getAllColumnData(grid, col, callback) {\r\n\tconst dataSource = grid.dataSource;\r\n\tlet field = grid.getField(col);\r\n\tif (isObject(field) && field.get && field.set) {\r\n\t\tfield = field.get;\r\n\t}\r\n\tconst allData = [];\r\n\tlet promise;\r\n\tfor (let index = 0; index < dataSource.length; index++) {\r\n\t\tconst data = dataSource.getField(index, field);\r\n\t\tif (isPromise(data)) {\r\n\t\t\tconst dataIndex = allData.length;\r\n\t\t\tallData.push(data);\r\n\t\t\tif (!promise) {\r\n\t\t\t\tpromise = data.then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tpromise = promise.then(() => data).then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallData.push(data);\r\n\t\t}\r\n\t}\r\n\r\n\tif (promise) {\r\n\t\tpromise.then(() => callback(allData));\r\n\t} else {\r\n\t\tcallback(allData);\r\n\t}\r\n}\r\n\r\nclass BranchLine {\r\n\tconstructor({fromIndex, toIndex, colorIndex, point}) {\r\n\t\tthis.fromIndex = fromIndex;\r\n\t\tthis.toIndex = toIndex;\r\n\t\tthis.colorIndex = colorIndex;\r\n\t\tthis.point = point;\r\n\t}\r\n}\r\nclass BranchPoint {\r\n\tconstructor({index, commit = false, lines = [], tag}) {\r\n\t\tthis.index = index;\r\n\t\tthis.commit = commit;\r\n\t\tthis.lines = lines;\r\n\t\tthis.tag = tag;\r\n\t}\r\n\tstatic mergeLines(lines) {\r\n\t\tconst result = lines.filter(((l) => isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\t\t\r\n\t\tconst froms = lines.filter(((l) => isDef(l.fromIndex) && !isDef(l.toIndex)));\r\n\t\tconst tos = lines.filter(((l) => !isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\r\n\t\tfroms.forEach((f) => {\r\n\t\t\tfor (let i = 0; i < tos.length; i++) {\r\n\t\t\t\tconst t = tos[i];\r\n\t\t\t\tif (t.point) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (f.colorIndex === t.colorIndex) {\r\n\t\t\t\t\tf.toIndex = t.toIndex;\r\n\t\t\t\t\ttos.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult.push(f);\r\n\t\t});\r\n\r\n\t\treturn result.concat(tos);\r\n\t}\r\n\tstatic merge(a, b) {\r\n\t\tif (!a) {\r\n\t\t\treturn b;\r\n\t\t}\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: a.index,\r\n\t\t\tcommit: a.commit || b.commit,\r\n\t\t\tlines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n\t\t\ttag: a.tag || b.tag\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction joinLine(timeline, branchIndex) {\r\n\tconst reverse = [...timeline].reverse();\r\n\tfor (let i = 0; i < reverse.length; i++) {\r\n\t\tconst f = reverse[i][branchIndex];\r\n\t\tif (f) {\r\n\t\t\tf.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\r\n\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\tcolorIndex: branchIndex,\r\n\t\t\t})]));\r\n\r\n\t\t\tfor (let j = 0; j < i; j++) {\r\n\t\t\t\tconst tl = reverse[j];\r\n\t\t\t\ttl[branchIndex] = new BranchPoint({\r\n\t\t\t\t\tindex: branchIndex,\r\n\t\t\t\t\tlines: [new BranchLine({\r\n\t\t\t\t\t\tfromIndex: branchIndex,\r\n\t\t\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\t\t\tcolorIndex: branchIndex\r\n\t\t\t\t\t})]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction branch({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tlet toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0) {\r\n\t\ttoIndex = branches.length;\r\n\t\tbranches.push(to);\r\n\t}\r\n\t\r\n\tfunction findBranchRootIndex() {\r\n\t\tfor (let index = timeline.length - 1; index >= 0; index--) {\r\n\t\t\tconst tl = timeline[index];\r\n\t\t\tconst from = tl[fromIndex];\r\n\t\t\tif (from && from.commit) {\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tif (fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t});\r\n\t} else {\r\n\t\tconst fromTargetIndex = findBranchRootIndex();\r\n\t\tif (fromTargetIndex === -1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst branchTargetFromIndex = fromTargetIndex + 1;\r\n\t\tconst branchPoint = new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})]\r\n\t\t});\r\n\t\tlet point;\r\n\t\tlet result;\r\n\t\tif (branchTargetFromIndex < timeline.length) {\r\n\t\t\tconst targetLine = timeline[branchTargetFromIndex];\r\n\t\t\tpoint = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n\t\t} else {\r\n\t\t\tpoint = branchPoint;\r\n\t\t\tresult = branchPoint;\r\n\t\t}\r\n\t\tconst from = timeline[fromTargetIndex][fromIndex];\r\n\t\tfrom.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\r\n\t\t\ttoIndex,\r\n\t\t\tcolorIndex: toIndex,\r\n\t\t\tpoint,\r\n\t\t})]));\r\n\t\treturn result;\r\n\t}\r\n\t\r\n}\r\n\r\nfunction commit({timeline, branches}, name) {\r\n\tconst index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\treturn null;\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex,\r\n\t\tcommit: true,\r\n\t});\r\n\t\t\r\n\tif (joinLine(timeline, index)) {\r\n\t\tresult.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\r\n\t\t\tfromIndex: index,\r\n\t\t\tcolorIndex: index\r\n\t\t})]));\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction commitTag({timeline, branches}, name, tag) {\r\n\tlet index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\tindex = branches.length;\r\n\t\tbranches.push(name);\r\n\t}\r\n\treturn new BranchPoint({\r\n\t\tindex,\r\n\t\ttag\r\n\t});\r\n}\r\n\r\nfunction commitMerge({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tconst toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0 || fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tcommit: true,\r\n\t\t});\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex: toIndex,\r\n\t\tcommit: true,\r\n\t\tlines: [\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t}),\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex: toIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})],\r\n\t});\r\n\tconst froms = [...timeline];\r\n\tconst fromTargetLine = froms.pop();\r\n\tif (fromTargetLine) {\r\n\t\tfromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\ttoIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t})]\r\n\t\t}));\r\n\t}\r\n\r\n\tjoinLine(froms, fromIndex);\r\n\r\n\tjoinLine(timeline, toIndex);\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction calcCommand(info, command) {\r\n\tconst {timeline} = info;\r\n\tconst timelineData = [];\r\n\t// const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n\tconst commands = Array.isArray(command) ? command : [command];\r\n\tcommands.forEach((cmd) => {\r\n\t\tif (!cmd) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet point;\r\n\t\tif (cmd.command === 'branch') {\r\n\t\t\tconst from = isObject(cmd.branch) ? cmd.branch.from : null;\r\n\t\t\tconst to = isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n\t\t\tpoint = branch(info, from, to);\r\n\t\t} else if (cmd.command === 'commit') {\r\n\t\t\tconst {branch} = cmd;\r\n\t\t\tpoint = commit(info, branch);\r\n\t\t} else if (cmd.command === 'merge') {\r\n\t\t\tconst {from, to} = cmd.branch;\r\n\t\t\tpoint = commitMerge(info, from, to);\r\n\t\t} else if (cmd.command === 'tag') {\r\n\t\t\tconst {branch, tag} = cmd;\r\n\t\t\tpoint = commitTag(info, branch, tag);\r\n\t\t}\r\n\t\tif (point && point.index > -1) {\r\n\t\t\ttimelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n\t\t}\r\n\t});\r\n\ttimeline.push(timelineData);\r\n}\r\n\r\nfunction calcBranchesInfo(start, grid, col) {\r\n\tconst result = {\r\n\t\tbranches: [],\r\n\t\ttimeline: []\r\n\t};\r\n\tgetAllColumnData(grid, col, (data) => {\r\n\t\tif (start !== 'top') {\r\n\t\t\tdata = [...data].reverse();\r\n\t\t}\r\n\t\tdata.forEach((command) => {\r\n\t\t\tcalcCommand(result, command);\r\n\t\t});\r\n\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n\tlet w = Math.max(width / branches.length + 1, 5);\r\n\ttimeline.forEach((tl) => {\r\n\t\ttl.forEach((p, index) => {\r\n\t\t\tif (index <= 0) {\r\n\t\t\t\t// \r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (p.tag) {\r\n\t\t\t\tconst textWidth = ctx.measureText(p.tag).width;\r\n\t\t\t\tif (((w * index) + (radius * 2) + 4 + textWidth) > width) {\r\n\t\t\t\t\tw = Math.max((width - (radius * 2) - 4 - textWidth) / index, 5);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst result = [];\r\n\tlet x = left;\r\n\tbranches.forEach(() => {\r\n\t\tresult.push(Math.ceil(x + radius));\r\n\t\tx += w;\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\r\n\tbranchXPoints, margin, branchColors, branchLineWidth, mergeStyle\r\n}, {\r\n\twidth, col, row, branches\r\n}) {\r\n\tif (isDef(upLineIndex) || isDef(downLineIndex)) {\r\n\t\tctx.strokeStyle = getOrApply(branchColors, branches[colorIndex], colorIndex);\r\n\t\tctx.lineWidth = branchLineWidth;\r\n\t\tctx.lineCap = 'round';\r\n\t\tctx.beginPath();\r\n\r\n\r\n\t\tif (isDef(upLineIndex)) {\r\n\t\t\tconst upX = branchXPoints[upLineIndex];\r\n\t\t\tconst upRect = grid.getCellRelativeRect(col, row - 1);\r\n\t\t\tconst upY = upRect.top + upRect.height / 2;\r\n\t\t\tctx.moveTo(upX, upY);\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tupX, (y + upY) / 2,\r\n\t\t\t\t\t\tx, (y + upY) / 2,\r\n\t\t\t\t\t\tx, y\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t}\r\n\r\n\t\tif (isDef(downLineIndex)) {\r\n\t\t\tconst downX = branchXPoints[downLineIndex];\r\n\t\t\tconst downRect = grid.getCellRelativeRect(col, row + 1);\r\n\t\t\tconst downY = downRect.top + downRect.height / 2;\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tx, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, downY\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(downX, downY);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tctx.stroke();\r\n\t}\r\n}\r\n\r\n/**\r\n * BranchGraphColumn<br>\r\n * <br>\r\n * # Data command<br>\r\n * ## mastar branch or orphan branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * </code></pre>\r\n * ## commit<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * </code></pre>\r\n * ## branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## merge<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## tag<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * </code></pre>\r\n *\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._start = option.start || 'bottom';\r\n\t\tthis._cache = isDef(option.cache) ? option.cache : false;\r\n\t}\r\n\tget StyleClass() {\r\n\t\treturn BranchGraphStyle;\r\n\t}\r\n\tclearCache(grid) {\r\n\t\tdelete grid[_];\r\n\t}\r\n\tonDrawCell(cellValue, info, context, grid) {\r\n\t\tif (this._cache) {\r\n\t\t\tconst state = grid[_] || (grid[_] = {});\r\n\t\t\tconst {col} = context;\r\n\t\t\tif (!state[col]) {\r\n\t\t\t\tstate[col] = calcBranchesInfo(this._start, grid, col);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn super.onDrawCell(cellValue, info, context, grid);\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphColumn(this);\r\n\t}\r\n\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst {timeline, branches} = (this._cache && grid[_]) ? grid[_][col] : calcBranchesInfo(this._start, grid, col);\r\n\t\t\r\n\t\tconst {upLineIndexKey, downLineIndexKey} = this._start !== 'top' ? {upLineIndexKey: 'toIndex', downLineIndexKey: 'fromIndex'} : {upLineIndexKey: 'fromIndex', downLineIndexKey: 'toIndex'};\r\n\t\tconst data = this._start !== 'top' ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\r\n\r\n\t\tconst {\r\n\t\t\tbranchColors,\r\n\t\t\tbranchLineWidth,\r\n\t\t\tcircleSize,\r\n\t\t\tmergeStyle,\r\n\t\t\tmargin,\r\n\t\t\tbgColor,\r\n\t\t} = style;\r\n\t\tif (bgColor) {\r\n\t\t\tdrawCellBase({\r\n\t\t\t\tbgColor,\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tconst rect = context.getRect();\r\n\t\tconst radius = circleSize / 2;\r\n\t\tconst width = rect.width - margin * 2;\r\n\r\n\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'middle';\r\n\t\t\tconst branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n\t\t\t\r\n\t\t\tconst y = rect.top + rect.height / 2;\r\n\r\n\t\t\t// draw join lines\r\n\t\t\tdata.\r\n\t\t\t\tmap((point, index) => point ? point.lines.map((line) => ({\r\n\t\t\t\t\tcolorIndex: line.colorIndex,\r\n\t\t\t\t\tupLineIndex: line[upLineIndexKey],\r\n\t\t\t\t\tdownLineIndex: line[downLineIndexKey],\r\n\t\t\t\t\tpointIndex: index,\r\n\t\t\t\t})) : []).\r\n\t\t\t\treduce((p, c) => p.concat(c), []).// flatMap\r\n\t\t\t\t// order of overlap\r\n\t\t\t\tsort((a, b) => b.colorIndex - a.colorIndex).\r\n\t\t\t\tforEach((line) => {\r\n\t\t\t\t\tconst x = branchXPoints[line.pointIndex];\r\n\t\t\t\t\trenderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n\t\t\t\t\t\tmargin,\r\n\t\t\t\t\t\tbranchXPoints,\r\n\t\t\t\t\t\tbranchLineWidth,\r\n\t\t\t\t\t\tbranchColors,\r\n\t\t\t\t\t\tmergeStyle,\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\twidth, col, row, branches\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t// draw commit points\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.commit) {\r\n\t\t\t\t\tconst x = branchXPoints[index];\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// draw tags\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.tag) {\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\nmodule.exports = BranchGraphColumn;","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst ButtonStyle = require('../style/ButtonStyle');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tconst utils = require('./columnUtils');\r\n\t\r\n\r\n\tclass ButtonColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._caption = option.caption;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t}\r\n\t\tget caption() {\r\n\t\t\treturn this._caption;\r\n\t\t}\r\n\t\twithCaption(caption) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._caption = caption;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn this._caption || value;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tlet active = false;\r\n\t\t\tconst state = grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t\tif (state) {\r\n\t\t\t\tif (state.mouseActiveCell &&\r\n\t\t\t\t\tstate.mouseActiveCell.col === col &&\r\n\t\t\t\t\tstate.mouseActiveCell.row === row) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t} else if (context.getSelectState().selected) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.button(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tbgColor: buttonBgColor,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\tshadow: active ? {\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.48)',\r\n\t\t\t\t\t\tblur: 6,\r\n\t\t\t\t\t\toffsetY: 3,\r\n\t\t\t\t\t} : true,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonColumn;\r\n}","'use strict';\r\n{\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst CheckStyle = require('../style/CheckStyle');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\t\r\n\r\n\tfunction toBoolean(val) {\r\n\t\tif (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\r\n\tclass CheckColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn CheckStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn toBoolean(value);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tconst key = col + ':' + row;\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID] && grid[CHECK_COLUMN_STATE_ID][key];\r\n\t\t\t\r\n\t\t\tconst opt = {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t};\r\n\t\t\tif (state) {\r\n\t\t\t\topt.animElapsedTime = state.elapsed;\r\n\t\t\t}\r\n\t\t\thelper.checkbox(value, context, opt);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckColumn;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('../style/Style');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass Column extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Column(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.text(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Column;\r\n}","'use strict';\r\n{\r\n\tconst IconStyle = require('../style/IconStyle');\r\n\tconst Column = require('./Column');\r\n\tconst icons = require('../../internal/icons');\r\n\r\n\tfunction repeatArray(val, count) {\r\n\t\tif (count === Infinity) {\r\n\t\t\tcount = 0;\r\n\t\t}\r\n\t\tconst a = [];\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\ta.push(val);\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tclass IconColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._tagName = option.tagName || 'i';\r\n\t\t\tthis._className = option.className;\r\n\t\t\tthis._content = option.content;\r\n\t\t\tthis._name = option.name;\r\n\t\t\tthis._iconWidth = option.iconWidth;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn IconStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tconst num = value - 0;\r\n\t\t\tif (!isNaN(num)) {\r\n\t\t\t\tconst icon = {};\r\n\t\t\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\t\t\ticon[k] = style[k];\r\n\t\t\t\t});\r\n\t\t\t\ticon.className = this._className;\r\n\t\t\t\ticon.tagName = this._tagName;\r\n\t\t\t\ticon.content = this._content;\r\n\t\t\t\ticon.name = this._name;\r\n\t\t\t\tif (this._iconWidth) {\r\n\t\t\t\t\ticon.width = this._iconWidth;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tinfo.getIcon = () => repeatArray(icon, num);\r\n\t\t\t} else {\r\n\t\t\t\tinfo.getIcon = () => null;\r\n\t\t\t}\r\n\t\t\tsuper.drawInternal('', context, style, helper, grid, info);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = IconColumn;\r\n}","'use strict';\r\n{\r\n\tconst ImageStyle = require('../style/ImageStyle');\r\n\tconst {getCacheOrLoad} = require('../../internal/imgs');\r\n\tconst {calcStartPosition} = require('../../internal/canvases');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\r\n\tconst MAX_LRU_CACHE_SIZE = 50;\r\n\tfunction getImage(url) {\r\n\t\treturn getCacheOrLoad('ImageColumn', MAX_LRU_CACHE_SIZE, url);\r\n\t}\r\n\r\n\tfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n\t\tlet newWidth = width;\r\n\t\tlet newHeight = height;\r\n\t\tif (newWidth > maxWidth) {\r\n\t\t\tnewWidth = maxWidth;\r\n\t\t\tnewHeight = (newWidth * height) / width;\r\n\t\t}\r\n\t\tif (newHeight > maxHeight) {\r\n\t\t\tnewHeight = maxHeight;\r\n\t\t\tnewWidth = (newHeight * width) / height;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\twidth: newWidth,\r\n\t\t\theight: newHeight,\r\n\t\t};\r\n\t}\r\n\r\n\tclass ImageColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn ImageStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\treturn super.onDrawCell(getImage(cellValue), info, context, grid);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tif (value) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tmargin,\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t} = style;\r\n\t\t\t\tif (bgColor) {\r\n\t\t\t\t\tdrawCellBase({\r\n\t\t\t\t\t\tbgColor,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\tif (style.imageSizing === 'keep-aspect-ratio') {\r\n\t\t\t\t\t\tconst {width, height} = calcKeepAspectRatioSize(\r\n\t\t\t\t\t\t\t\tvalue.width, value.height,\r\n\t\t\t\t\t\t\t\trect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst pos = calcStartPosition(ctx, rect, width, height, {\r\n\t\t\t\t\t\t\toffset: margin,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\tpos.x, pos.y, width, height\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\trect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageColumn;\r\n}","'use strict';\r\n{\r\n\tconst {normalize} = require('../../internal/menu-items');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst Style = require('../style/Style');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass MenuColumn extends BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._options = normalize(option.options);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MenuColumn(this);\r\n\t\t}\r\n\t\tget options() {\r\n\t\t\treturn this._options;\r\n\t\t}\r\n\t\twithOptions(options) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._options = normalize(options);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tlet {\r\n\t\t\t\tcolor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst text = this._convertInternal(value);\r\n\t\t\thelper.testFontLoad(font, text, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\tconst basePadding = helper.toBoxPixelArray(padding || 0, context);\r\n\t\t\t\tconst textPadding = basePadding.slice(0);\r\n\t\t\t\ttextPadding[1] += 26;// icon padding\r\n\t\t\t\tconst iconPadding = basePadding.slice(0);\r\n\t\t\t\ticonPadding[1] += 8;\r\n\t\t\t\tif (!isDef(color) && (!isDef(value) || value === '')) {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, .38)';\r\n\t\t\t\t}\r\n\t\t\t\thelper.text(text, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding: textPadding,\r\n\t\t\t\t});\r\n\t\t\t\t// draw icon\r\n\t\t\t\thelper.text('', context, {\r\n\t\t\t\t\ttextAlign: 'right',\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons: [{\r\n\t\t\t\t\t\tpath: 'M0 2 5 7 10 2z',\r\n\t\t\t\t\t\twidth: 10,\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, .54)',\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tpadding: iconPadding,\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\t_convertInternal(value) {\r\n\t\t\tconst options = this._options;\r\n\t\t\tfor (let i = 0; i < options.length; i++) {\r\n\t\t\t\tconst option = options[i];\r\n\t\t\t\tif (option.value === value) {\r\n\t\t\t\t\tvalue = option.caption;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn super.convertInternal(value);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = MenuColumn;\r\n}","'use strict';\r\n{\r\n\tconst MultilineTextStyle = require('../style/MultilineTextStyle');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst utils = require('./columnUtils');\r\n\tclass MultilineTextColumn extends BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn MultilineTextStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MultilineTextColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t\tlineHeight,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst multilines = value.replace(/\\r?\\n/g, '\\n').replace(/\\r/g, '\\n').split('\\n');\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.multilineText(multilines, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\tlineHeight,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = MultilineTextColumn;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst NumberStyle = require('../style/NumberStyle');\r\n\tlet defaultFotmat;\r\n\tclass NumberColumn extends Column {\r\n\t\tstatic get defaultFotmat() {\r\n\t\t\treturn defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n\t\t}\r\n\t\tstatic set defaultFotmat(fmt) {\r\n\t\t\tdefaultFotmat = fmt;\r\n\t\t}\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._format = option.format;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn NumberStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberColumn(this);\r\n\t\t}\r\n\t\tget format() {\r\n\t\t\treturn this._format;\r\n\t\t}\r\n\t\twithFormat(format) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._format = format;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\tif (isNaN(value - 0)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t\tconst format = this._format || NumberColumn.defaultFotmat;\r\n\t\t\treturn format.format(value - 0);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberColumn;\r\n}","'use strict';\r\n{\r\n\tconst PercentCompleteBarStyle = require('../style/PercentCompleteBarStyle');\r\n\tconst {getOrApply, str} = require('../../internal/utils');\r\n\tconst Column = require('./Column');\r\n\t\r\n\r\n\tconst MARGIN = 2;\r\n\r\n\tclass PercentCompleteBarColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._min = option.min || 0;\r\n\t\t\tthis._max = option.max || (this._min + 100);\r\n\t\t\tthis._formatter = option.formatter || ((v) => v);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tsuper.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n\t\t\tconst {\r\n\t\t\t\tbarColor,\r\n\t\t\t\tbarBgColor,\r\n\t\t\t\tbarHeight,\r\n\t\t\t} = style;\r\n\r\n\t\t\tlet svalue = value + '';\r\n\t\t\tif (str.endsWith(svalue, '%')) {\r\n\t\t\t\tsvalue = svalue.substr(0, svalue.length - 1);\r\n\t\t\t}\r\n\t\t\tconst num = svalue - 0;\r\n\t\t\tconst rate = num < this._min ? 0\r\n\t\t\t\t: num > this._max ? 1\r\n\t\t\t\t: (num - this._min) / (this._max - this._min);\r\n\t\t\t\r\n\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\t\tconst barMaxWidth = rect.width - MARGIN * 2 - 1/**/;\r\n\t\t\t\tconst barTop = rect.bottom - MARGIN - barHeight - 1/**/;\r\n\t\t\t\tconst barLeft = rect.left + MARGIN;\r\n\t\t\t\tctx.fillStyle = getOrApply(barBgColor, rate * 100) || '#f0f3f5';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n\t\t\t\tctx.fill();\r\n\r\n\r\n\t\t\t\tconst barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n\t\t\t\tctx.fillStyle = getOrApply(barColor, rate * 100) || '#20a8d8';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barSize, barHeight);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarColumn;\r\n}","'use strict';\r\n{\r\n\tconst {isPromise} = require('../../internal/utils');\r\n\tconst icons = require('../../internal/icons');\r\n\tmodule.exports = {\r\n\t\tloadIcons(icon, context, helper, callback) {\r\n\t\t\tif (icon) {\r\n\t\t\t\tif (isPromise(icon)) {\r\n\t\t\t\t\ticon.then((i) => {\r\n\t\t\t\t\t\tthis.loadIcon(i, context.toCurrentContext(), callback);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst iconList = icons.toNormarizeArray(icon);\r\n\t\t\t\t\ticonList.forEach((i) => {\r\n\t\t\t\t\t\thelper.testFontLoad(i.font, i.content, context);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = iconList;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcallback(icon, context);\r\n\t\t},\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\r\n\t/**\r\n\t * core modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.core\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDrawGrid\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {\r\n\t\tisDef,\r\n\t\tbrowser,\r\n\t\tisDescendantElement,\r\n\t\tarray,\r\n\t\tisPromise,\r\n\t\tevent: {\r\n\t\t\tisTouchEvent,\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tcancel: cancelEvent,\r\n\t\t}\r\n\t} = require('../internal/utils');\r\n\t\r\n\tconst EventTarget = require('./EventTarget');\r\n\tconst Rect = require('../internal/Rect');\r\n\tconst Scrollable = require('../internal/Scrollable');\r\n\tconst EventHandler = require('../internal/EventHandler');\r\n\tconst NumberMap = require('../internal/NumberMap');\r\n\tconst style = require('../internal/style');\r\n\tconst calc = require('../internal/calc');\r\n\tconst hiDPI = require('../internal/hiDPI');\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('../internal/symbolManager');\r\n\r\n\tfunction createRootElement() {\r\n\t\tconst element = document.createElement('div');\r\n\t\telement.classList.add('cheetah-grid');\r\n\t\treturn element;\r\n\t}\r\n\r\n\tconst KEY_END = 35;\r\n\tconst KEY_HOME = 36;\r\n\tconst KEY_LEFT = 37;\r\n\tconst KEY_UP = 38;\r\n\tconst KEY_RIGHT = 39;\r\n\tconst KEY_DOWN = 40;\r\n\tconst KEY_ALPHA_C = 67;\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCLICK_CELL: 'click_cell',\r\n\t\tDBLCLICK_CELL: 'dblclick_cell',\r\n\t\tDBLTAP_CELL: 'dbltap_cell',\r\n\t\tMOUSEDOWN_CELL: 'mousedown_cell',\r\n\t\tMOUSEUP_CELL: 'mouseup_cell',\r\n\t\tSELECTED_CELL: 'selected_cell',\r\n\t\tKEYDOWN: 'keydown',\r\n\t\tMOUSEMOVE_CELL: 'mousemove_cell',\r\n\t\tMOUSEENTER_CELL: 'mouseenter_cell',\r\n\t\tMOUSELEAVE_CELL: 'mouseleave_cell',\r\n\t\tMOUSEOVER_CELL: 'mouseover_cell',\r\n\t\tMOUSEOUT_CELL: 'mouseout_cell',\r\n\t\tINPUT_CELL: 'input_cell',\r\n\t\tEDITABLEINPUT_CELL: 'editableinput_cell',\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL: 'modify_status_editableinput_cell',\r\n\t\tRESIZE_COLUMN: 'resize_column',\r\n\t\tSCROLL: 'scroll',\r\n\t};\r\n\r\n\t//private methods\r\n\tfunction _vibrate(e) {\r\n\t\tif (navigator.vibrate && isTouchEvent(e)) {\r\n\t\t\tnavigator.vibrate(50);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetRowAt(grid, absoluteY) {\r\n\t\tconst internal = grid.getTargetRowAtInternal(absoluteY);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst findBefore = (startRow, startBottom) => {\r\n\t\t\tlet bottom = startBottom;\r\n\t\t\tfor (let row = startRow; row >= 0; row--) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst top = bottom - height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tbottom = top;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst findAfter = (startRow, startBottom) => {\r\n\t\t\tlet top = startBottom - _getRowHeight(grid, startRow);\r\n\t\t\tconst {rowCount} = grid[_];\r\n\t\t\tfor (let row = startRow; row < rowCount; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst bottom = top + height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\ttop = bottom;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst candRow = Math.min(Math.ceil(absoluteY / grid[_].defaultRowHeight), grid.rowCount - 1);\r\n\t\tconst bottom = _getRowsHeight(grid, 0, candRow);\r\n\t\tif (absoluteY >= bottom) {\r\n\t\t\treturn findAfter(candRow, bottom);\r\n\t\t} else {\r\n\t\t\treturn findBefore(candRow, bottom);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetColAt(grid, absoluteX) {\r\n\t\tlet left = 0;\r\n\t\tconst {colCount} = grid[_];\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {top} = grid[_].scroll;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\tconst bottom = top + height;\r\n\t\t\tif (bottom > absoluteY) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop,\r\n\t\t\t\t\trow,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\ttop = bottom;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {left} = grid[_].scroll;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getFrozenRowsRect(grid) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {top} = grid[_].scroll;\r\n\t\tlet height = 0;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\theight += _getRowHeight(grid, row);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\ttop,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\theight\r\n\t\t);\r\n\t}\r\n\tfunction _getFrozenColsRect(grid) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {left} = grid[_].scroll;\r\n\t\tlet width = 0;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\twidth += _getColWidth(grid, col);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tleft,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\twidth,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _isCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn !!grid[_].drawCells[row][col];\r\n\t}\r\n\tfunction _putCellDrawing(grid, col, row, context) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\tgrid[_].drawCells[row] = {};\r\n\t\t}\r\n\t\tgrid[_].drawCells[row][col] = context;\r\n\t}\r\n\tfunction _removeCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdelete grid[_].drawCells[row][col];\r\n\t\tif (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n\t\t\tdelete grid[_].drawCells[row];\r\n\t\t}\r\n\t}\r\n\tfunction _drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\tskipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n\t\tconst rect = new Rect(\r\n\t\t\t\tabsoluteLeft - visibleRect.left,\r\n\t\t\t\tabsoluteTop - visibleRect.top,\r\n\t\t\t\twidth,\r\n\t\t\t\theight\r\n\t\t);\r\n\r\n\t\tconst drawRect = Rect.bounds(\r\n\t\t\t\tMath.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left,\r\n\t\t\t\tMath.max(absoluteTop, skipAbsoluteTop) - visibleRect.top,\r\n\t\t\t\trect.right,\r\n\t\t\t\trect.bottom\r\n\t\t);\r\n\r\n\t\tif (drawRect.height > 0 && drawRect.width > 0) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst dcContext = new DrawCellContext(\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\tctx, rect, drawRect,\r\n\t\t\t\t\t\t_isCellDrawing(grid, col, row),\r\n\t\t\t\t\t\tgrid[_].selection,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tconst p = grid.onDrawCell(col, row, dcContext);\r\n\t\t\t\tif (isPromise(p)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\t_putCellDrawing(grid, col, row, dcContext);\r\n\r\n\t\t\t\t\tconst pCol = col;\r\n\t\t\t\t\tdcContext._delayMode(grid, () => {\r\n\t\t\t\t\t\t_removeCellDrawing(grid, pCol, row);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tp.then(() => {\r\n\t\t\t\t\t\tdcContext.terminate();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _drawRow(grid, ctx, initFrozenCol, initCol,\r\n\t\t\tdrawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n\t\tconst {colCount} = grid[_];\r\n\t\tconst drawOuter = (col, absoluteLeft) => {\r\n\t\t\t//\r\n\t\t\tif (col >= (colCount - 1) && grid[_].canvas.width > (absoluteLeft - visibleRect.left)) {\r\n\t\t\t\tconst outerLeft = absoluteLeft - visibleRect.left;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteLeft = 0;\r\n\t\tif (initFrozenCol) {\r\n\t\t\tlet absoluteLeft = initFrozenCol.left;\r\n\t\t\tconst count = grid[_].frozenColCount;\r\n\t\t\tfor (let {col} = initFrozenCol; col < count; col++) {\r\n\t\t\t\tconst width = _getColWidth(grid, col);\r\n\r\n\t\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\t\tskipAbsoluteTop, 0,\r\n\t\t\t\t\t\tdrawLayers);\r\n\t\t\t\t\t\r\n\t\t\t\tabsoluteLeft += width;\r\n\t\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteLeft = absoluteLeft;\r\n\t\t}\r\n\r\n\t\tlet absoluteLeft = initCol.left;\r\n\t\tfor (let {col} = initCol; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\tskipAbsoluteTop, skipAbsoluteLeft,\r\n\t\t\t\t\tdrawLayers);\r\n\r\n\t\t\tabsoluteLeft += width;\r\n\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(colCount - 1, absoluteLeft);\r\n\r\n\t}\r\n\tfunction _invalidateRect(grid, drawRect) {\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tconst {rowCount} = grid[_];\r\n\t\tconst ctx = grid._getInitContext();\r\n\r\n\t\tconst initRow = _getTargetRowAt(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n\t\t\ttop: _getRowsHeight(grid, 0, rowCount - 1),\r\n\t\t\trow: rowCount\r\n\t\t};\r\n\t\tconst initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n\t\t\tleft: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n\t\t\tcol: grid[_].colCount\r\n\t\t};\r\n\t\tconst drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n\t\tconst drawRight = Math.min(visibleRect.right, drawRect.right);\r\n\r\n\t\tconst initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n\t\tconst initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n\r\n\t\tconst drawLayers = new DrawLayers();\r\n\r\n\t\tconst drawOuter = (row, absoluteTop) => {\r\n\t\t\t//\r\n\t\t\tif (row >= (rowCount - 1) && grid[_].canvas.height > (absoluteTop - visibleRect.top)) {\r\n\t\t\t\tconst outerTop = absoluteTop - visibleRect.top;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteTop = 0;\r\n\t\tif (initFrozenRow) {\r\n\t\t\tlet absoluteTop = initFrozenRow.top;\r\n\t\t\tconst count = grid[_].frozenRowCount;\r\n\t\t\tfor (let {row} = initFrozenRow; row < count; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t_drawRow(grid,\r\n\t\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\t\trow, absoluteTop, height, visibleRect, 0,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tabsoluteTop += height;\r\n\t\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteTop = absoluteTop;\r\n\t\t}\r\n\r\n\t\tlet absoluteTop = initRow.top;\r\n\t\tfor (let {row} = initRow; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t\r\n\t\t\t//\r\n\t\t\t_drawRow(grid,\r\n\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\trow, absoluteTop, height, visibleRect, skipAbsoluteTop,\r\n\t\t\t\t\tdrawLayers\r\n\t\t\t);\r\n\r\n\t\t\tabsoluteTop += height;\r\n\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(rowCount - 1, absoluteTop);\r\n\r\n\t\tdrawLayers.draw(ctx);\r\n\t}\r\n\r\n\tfunction _toPxWidth(grid, width) {\r\n\t\treturn Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n\t}\r\n\r\n\tfunction _getDefaultColPxWidth(grid) {\r\n\t\treturn _toPxWidth(grid, grid.defaultColWidth);\r\n\t}\r\n\r\n\tfunction _adjustColWidth(grid, col, orgWidth) {\r\n\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\tif (!limit) {\r\n\t\t\treturn orgWidth;\r\n\t\t}\r\n\t\t\r\n\t\tif (limit.min) {\r\n\t\t\tconst min = _toPxWidth(grid, limit.min);\r\n\t\t\tif (min > orgWidth) {\r\n\t\t\t\treturn min;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (limit.max) {\r\n\t\t\tconst max = _toPxWidth(grid, limit.max);\r\n\t\t\tif (max < orgWidth) {\r\n\t\t\t\treturn max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn orgWidth;\r\n\t}\r\n\r\n\tfunction _getColWidth(grid, col) {\r\n\t\tconst width = grid[_].colWidthsMap.get(col);\r\n\t\tif (width) {\r\n\t\t\treturn _adjustColWidth(grid, col, _toPxWidth(grid, width));\r\n\t\t}\r\n\t\treturn _getDefaultColPxWidth(grid);\r\n\t}\r\n\tfunction _setColWidth(grid, col, width) {\r\n\t\tgrid[_].colWidthsMap.put(col, width);\r\n\t}\r\n\tfunction _getColsWidth(grid, startCol, endCol) {\r\n\t\tconst colCount = endCol - startCol + 1;\r\n\t\tlet w = _getDefaultColPxWidth(grid) * colCount;\r\n\t\tgrid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\r\n\tfunction _getRowHeight(grid, row) {\r\n\t\tconst internal = grid.getRowHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst height = grid[_].rowHeightsMap.get(row);\r\n\t\tif (height) {\r\n\t\t\treturn height;\r\n\t\t}\r\n\t\treturn grid[_].defaultRowHeight;\r\n\t}\r\n\tfunction _setRowHeight(grid, row, height) {\r\n\t\tgrid[_].rowHeightsMap.put(row, height);\r\n\t}\r\n\tfunction _getRowsHeight(grid, startRow, endRow) {\r\n\t\tconst internal = grid.getRowsHeightInternal(startRow, endRow);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst rowCount = endRow - startRow + 1;\r\n\t\tlet h = grid[_].defaultRowHeight * rowCount;\r\n\t\tgrid[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\r\n\tfunction _getScrollWidth(grid) {\r\n\t\tlet w = _getDefaultColPxWidth(grid) * grid[_].colCount;\r\n\t\tgrid[_].colWidthsMap.eachAll((width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\tfunction _getScrollHeight(grid, row) {\r\n\t\tconst internal = grid.getScrollHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tlet h = grid[_].defaultRowHeight * grid[_].rowCount;\r\n\t\tgrid[_].rowHeightsMap.eachAll((height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\tfunction _onScroll(grid, e) {\r\n\t\tconst lastLeft = grid[_].scroll.left;\r\n\t\tconst lastTop = grid[_].scroll.top;\r\n\t\tconst moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n\t\tconst moveY = grid[_].scrollable.scrollTop - lastTop;\r\n\r\n\t\t//\r\n\t\tgrid[_].scroll = {\r\n\t\t\tleft: grid[_].scrollable.scrollLeft,\r\n\t\t\ttop: grid[_].scrollable.scrollTop,\r\n\t\t};\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tif ((Math.abs(moveX) >= visibleRect.width) || (Math.abs(moveY) >= visibleRect.height)) {\r\n\t\t\t//\r\n\t\t\t_invalidateRect(grid, visibleRect);\r\n\t\t} else {\r\n\t\t\t//\r\n\t\t\tgrid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n\r\n\t\t\t\t\r\n\t\t\tif (moveX !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveX < 0) {\r\n\t\t\t\t\tredrawRect.width = -moveX;\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\t\t\t\tredrawRect.width += frozenRect.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveX > 0) {\r\n\t\t\t\t\tredrawRect.left = redrawRect.right - moveX;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveX > 0) {\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenColsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (moveY !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveY < 0) {\r\n\t\t\t\t\tredrawRect.height = -moveY;\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\t\t\t\tredrawRect.height += frozenRect.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveY > 0) {\r\n\t\t\t\t\tredrawRect.top = redrawRect.bottom - moveY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveY > 0) {\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenRowsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _onKeyDownMove(grid, e) {\r\n\t\tconst {shiftKey} = e;\r\n\t\tconst keyCode = getKeyCode(e);\r\n\t\tconst focusCell = shiftKey ? grid.selection._focus : grid.selection._sel;\r\n\t\tif (keyCode === KEY_LEFT) {\r\n\t\t\tconst col = grid.getMoveLeftColByKeyDownInternal(focusCell);\r\n\t\t\tif (col < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\tconst row = grid.getMoveUpRowByKeyDownInternal(focusCell);\r\n\t\t\tif (row < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_RIGHT) {\r\n\t\t\tconst col = grid.getMoveRightColByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.colCount <= col) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\tconst row = grid.getMoveDownRowByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.rowCount <= row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_HOME) {\r\n\t\t\tconst row = e.ctrlKey ? 0 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, 0, row, e.shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_END) {\r\n\t\t\tconst row = e.ctrlKey ? grid.rowCount - 1 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, grid.colCount - 1, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t}\r\n\tfunction _moveFocusCell(grid, col, row, shiftKey) {\r\n\t\tconst offset = grid.getOffsetInvalidateCells();\r\n\r\n\t\tfunction extendRange(range) {\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\trange.start.col -= offset;\r\n\t\t\t\trange.start.row -= offset;\r\n\t\t\t\trange.end.col += offset;\r\n\t\t\t\trange.end.row += offset;\r\n\t\t\t}\r\n\t\t\treturn range;\r\n\t\t}\r\n\r\n\t\tconst beforeRange = extendRange(grid.selection.range);\r\n\t\tconst beforeRect = grid.getCellsRect(\r\n\t\t\t\tbeforeRange.start.col, beforeRange.start.row,\r\n\t\t\t\tbeforeRange.end.col, beforeRange.end.row\r\n\t\t);\r\n\r\n\t\tgrid.selection._setFocusCell(col, row, shiftKey);\r\n\t\tgrid.makeVisibleCell(col, row);\r\n\t\tgrid.focusCell(col, row);\r\n\t\t\t\r\n\t\tconst afterRange = extendRange(grid.selection.range);\r\n\t\tconst afterRect = grid.getCellsRect(\r\n\t\t\t\tafterRange.start.col, afterRange.start.row,\r\n\t\t\t\tafterRange.end.col, afterRange.end.row\r\n\t\t);\r\n\r\n\t\tif (afterRect.intersection(beforeRect)) {\r\n\t\t\tconst invalidateRect = Rect.max(afterRect, beforeRect);\r\n\t\t\t_invalidateRect(grid, invalidateRect);\r\n\t\t} else {\r\n\t\t\t_invalidateRect(grid, beforeRect);\r\n\t\t\t_invalidateRect(grid, afterRect);\r\n\t\t}\r\n\t}\r\n\tfunction _getMouseAbstractPoint(grid, e) {\r\n\t\tif (isTouchEvent(e)) {\r\n\t\t\te = e.changedTouches[0];\r\n\t\t}\r\n\t\tconst clientX = e.clientX || (e.pageX + window.scrollX);\r\n\t\tconst clientY = e.clientY || (e.pageY + window.scrollY);\r\n\t\tconst rect = grid[_].canvas.getBoundingClientRect();\r\n\t\tif (rect.right <= clientX) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (rect.bottom <= clientY) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst x = clientX - rect.left + grid[_].scroll.left;\r\n\t\tconst y = clientY - rect.top + grid[_].scroll.top;\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tfunction _bindEvents(grid) {\r\n\t\tconst getCellEventArgsSet = (e) => {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t\tconst cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tabstractPos,\r\n\t\t\t\t\tcell\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst eventArgs = {\r\n\t\t\t\tcol: cell.col,\r\n\t\t\t\trow: cell.row,\r\n\t\t\t\tevent: e,\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tabstractPos,\r\n\t\t\t\tcell,\r\n\t\t\t\teventArgs\r\n\t\t\t};\r\n\t\t};\r\n\t\tconst canResizeColumn = (col) => {\r\n\t\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\t\tif (!limit || !limit.min || !limit.max) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn limit.max !== limit.min;\r\n\t\t};\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousedown', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst results = grid.fireListeners(EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n\t\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t} else {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet doubleTapBefore = null;\r\n\t\tlet longTouchId = null;\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchstart', (e) => {\r\n\t\t\r\n\t\t\tif (!doubleTapBefore) {\r\n\t\t\t\tdoubleTapBefore = getCellEventArgsSet(e).eventArgs;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdoubleTapBefore = null;\r\n\t\t\t\t}, 350);\r\n\t\t\t} else {\r\n\t\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\t\tif (eventArgs &&\r\n\t\t\t\t\teventArgs.col === doubleTapBefore.col &&\r\n\t\t\t\t\teventArgs.row === doubleTapBefore.row) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdoubleTapBefore = null;\r\n\r\n\t\t\t\tif (e.defaultPrevented) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlongTouchId = setTimeout(() => {\r\n\t\t\t\t//\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\t\tif (!abstractPos) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n\t\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t\t}\r\n\t\t\t}, 500);\r\n\t\t});\r\n\r\n\t\tfunction cancel(e) {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchcancel', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchmove', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchend', (e) => {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tgrid[_].cellSelector.select(e);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet isMouseover = false;\r\n\t\tlet mouseEnterCell = null;\r\n\t\tlet mouseOverCell = null;\r\n\t\tfunction onMouseenterCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEENTER_CELL, cell);\r\n\t\t\tmouseEnterCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseleaveCell() {\r\n\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\tmouseEnterCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSELEAVE_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction onMouseoverCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOVER_CELL, cell);\r\n\t\t\tmouseOverCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseoutCell() {\r\n\t\t\tconst beforeMouseCell = mouseOverCell;\r\n\t\t\tmouseOverCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOUT_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst scrollElement = grid[_].scrollable.getElement();\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseover', (e) => {\r\n\t\t\tisMouseover = true;\r\n\t\t});\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseout', (e) => {\r\n\t\t\tisMouseover = false;\r\n\t\t\tonMouseoutCell();\r\n\t\t});\r\n\r\n\t\tgrid[_].handler.on(grid[_].element, 'mouseleave', (e) => {\r\n\t\t\tonMouseleaveCell();\r\n\t\t});\r\n\t\t\t\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousemove', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\t\tif (beforeMouseCell) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t\tif (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\r\n\t\t\t\t\t\tonMouseoutCell();\r\n\t\t\t\t\t\tonMouseleaveCell();\r\n\t\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (isMouseover && !mouseOverCell) {\r\n\t\t\t\t\t\tonMouseoverCell({\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tonMouseoutCell();\r\n\t\t\t\tonMouseleaveCell();\r\n\t\t\t}\r\n\t\t\tif (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {style} = grid[_].element;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\tstyle.cursor = 'col-resize';\r\n\t\t\t} else {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'click', (e) => {\r\n\t\t\tif (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.CLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.CLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'dblclick', (e) => {\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.DBLCLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].focusControl.listen('keydown', (keyCode, e) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.KEYDOWN, keyCode, e);\r\n\t\t});\r\n\t\tgrid[_].selection.listen(EVENT_TYPE.SELECTED_CELL, (data) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n\t\t});\r\n\r\n\t\tgrid[_].scrollable.onScroll((e) => {\r\n\t\t\t_onScroll(grid, e);\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SCROLL, {event: e});\r\n\t\t});\r\n\t\tgrid[_].focusControl.onKeyDownMove((e) => {\r\n\t\t\t_onKeyDownMove(grid, e);\r\n\t\t});\r\n\t\tgrid.listen('copydata', (range) => {\r\n\t\t\tlet copyValue = '';\r\n\t\t\tfor (let {row} = range.start; row <= range.end.row; row++) {\r\n\t\t\t\tfor (let {col} = range.start; col <= range.end.col; col++) {\r\n\t\t\t\t\tconst copyCellValue = grid.getCopyCellValue(col, row);\r\n\t\t\t\t\tif (window.Promise && copyCellValue instanceof window.Promise) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst strCellValue = '' + copyCellValue;\r\n\t\t\t\t\t\tif (strCellValue.match(/^\\[object .*\\]$/)) {\r\n\t\t\t\t\t\t\t//object \r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcopyValue += strCellValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif (col < range.end.col) {\r\n\t\t\t\t\t\tcopyValue += '\\t';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopyValue += '\\n';\r\n\t\t\t}\r\n\t\t\treturn copyValue;\r\n\t\t});\r\n\t\tgrid[_].focusControl.onCopy((e) => array.find(grid.fireListeners('copydata', grid[_].selection.range), isDef));\r\n\t\tgrid[_].focusControl.onInput((value) => {\r\n\t\t\tconst {col, row} = grid[_].selection.select;\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.INPUT_CELL, {col, row, value});\r\n\t\t});\r\n\t\tgrid.bindEventsInternal();\r\n\t}\r\n\r\n\tfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n\t\tif (grid[_].frozenRowCount <= 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\tif (!frozenRect.inPoint(abstractX, abstractY)) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst cell = grid.getCellAt(abstractX, abstractY);\r\n\t\tconst cellRect = grid.getCellRect(cell.col, cell.row);\r\n\t\tif (abstractX < cellRect.left + offset) {\r\n\t\t\treturn cell.col - 1;\r\n\t\t}\r\n\t\tif (cellRect.right - offset < abstractX) {\r\n\t\t\treturn cell.col;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfunction _getVisibleRect(grid) {\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _getScrollableVisibleRect(grid) {\r\n\t\tlet frozenColsWidth = 0;\r\n\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\tfrozenColsWidth = frozenRect.width;\r\n\t\t}\r\n\t\tlet frozenRowsHeight = 0;\r\n\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\tfrozenRowsHeight = frozenRect.height;\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left + frozenColsWidth,\r\n\t\t\t\tgrid[_].scroll.top + frozenRowsHeight,\r\n\t\t\t\tgrid[_].canvas.width - frozenColsWidth,\r\n\t\t\t\tgrid[_].canvas.height - frozenRowsHeight\r\n\t\t);\r\n\t}\r\n\r\n\tfunction _toRelativeRect(grid, absoluteRect) {\r\n\t\tconst rect = absoluteRect.copy();\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\trect.offsetLeft(-visibleRect.left);\r\n\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\treturn rect;\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\t/**\r\n\t * managing mouse down moving\r\n\t * @private\r\n\t */\r\n\tclass BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._events = {};\r\n\t\t\tthis._started = false;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\tmoving(e) {\r\n\t\t\treturn !!this._started;\r\n\t\t}\r\n\t\tlastMoving(e) {\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this.moving(e)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst last = this._mouseEndPoint;\r\n\t\t\tif (!last) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst pt = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\treturn pt.x === last.x && pt.y === last.y;\r\n\t\t}\r\n\t\t_bindMoveAndUp(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tthis._events.mousemove = this._handler.on(document.body, 'mousemove', (e) => this._mouseMove(e));\r\n\t\t\t\tthis._events.mouseup = this._handler.on(document.body, 'mouseup', (e) => this._mouseUp(e));\r\n\t\t\t} else {\r\n\t\t\t\tthis._events.touchmove = this._handler.on(document.body, 'touchmove', (e) => this._mouseMove(e), {passive: false});\r\n\t\t\t\tthis._events.touchend = this._handler.on(document.body, 'touchend', (e) => this._mouseUp(e));\r\n\t\t\t\tthis._events.touchcancel = this._handler.on(document.body, 'touchcancel', (e) => this._mouseUp(e));\r\n\t\t\t}\r\n\t\t\tthis._started = true;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\t_mouseMove(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\t\tthis._mouseUp(e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._moved = this._moveInternal(e) || this._moved/*calculation on after*/;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\t_mouseUp(e) {\r\n\t\t\tthis._handler.off(this._events.mousemove);\r\n\t\t\tthis._handler.off(this._events.touchmove);\r\n\t\t\tthis._handler.off(this._events.mouseup);\r\n\t\t\tthis._handler.off(this._events.touchend);\r\n\t\t\t// this._handler.off(this._events.mouseleave);\r\n\t\t\tthis._handler.off(this._events.touchcancel);\r\n\r\n\t\t\tthis._started = false;\r\n\r\n\t\t\tthis._upInternal(e);\r\n\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this._moved) { //\r\n\t\t\t\tthis._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis._mouseEndPoint = null;\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * managing cell selection operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass CellSelector extends BaseMouseDownMover {\r\n\t\tstart(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._cell = cell;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\tselect(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\t\t\tthis._cell = cell;\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell || (this._cell.col === cell.col && this._cell.row === cell.row)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, true);\r\n\r\n\t\t\t//make visible\r\n\t\t\tconst makeVisibleCol = (() => {\r\n\t\t\t\tif (cell.col < this._cell.col && 0 < cell.col) {\r\n\t\t\t\t\t// move left\r\n\t\t\t\t\treturn cell.col - 1;\r\n\t\t\t\t} else if (this._cell.col < cell.col && cell.col + 1 < this._grid.colCount) {\r\n\t\t\t\t\t// move right\r\n\t\t\t\t\treturn cell.col + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.col;\r\n\t\t\t})();\r\n\t\t\tconst makeVisibleRow = (() => {\r\n\t\t\t\tif (cell.row < this._cell.row && 0 < cell.row) {\r\n\t\t\t\t\t// move up\r\n\t\t\t\t\treturn cell.row - 1;\r\n\t\t\t\t} else if (this._cell.row < cell.row && cell.row + 1 < this._grid.rowCount) {\r\n\t\t\t\t\t// move down\r\n\t\t\t\t\treturn cell.row + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.row;\r\n\t\t\t})();\r\n\t\t\tif (makeVisibleCol !== cell.col || makeVisibleRow !== cell.row) {\r\n\t\t\t\tthis._grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n\t\t\t}\r\n\t\t\tthis._cell = cell;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_getTargetCell(e) {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst cell = this._grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * managing row width changing operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass ColumnResizer extends BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper(grid);\r\n\t\t\tthis._targetCol = -1;\r\n\t\t}\r\n\t\tstart(col, e) {\r\n\t\t\tlet pageX;\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\t({pageX} = e);\r\n\t\t\t} else {\r\n\t\t\t\t({pageX} = e.changedTouches[0]);\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = pageX;\r\n\t\t\tthis._preX = 0;\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._targetCol = col;\r\n\t\t\tthis._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n\r\n\t\t\tconst x = pageX - this._x;\r\n\t\t\tconst moveX = x - this._preX;\r\n\t\t\tthis._preX = x;\r\n\t\t\tconst pre = this._grid.getColWidth(this._targetCol);\r\n\t\t\tlet afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n\t\t\tif (afterSize < 10 && moveX < 0) {\r\n\t\t\t\tafterSize = 10;\r\n\t\t\t}\r\n\t\t\t_setColWidth(this._grid, this._targetCol, afterSize);\r\n\r\n\t\t\tconst rect = _getVisibleRect(this._grid);\r\n\t\t\trect.left = this._invalidateAbsoluteLeft;\r\n\t\t\t_invalidateRect(this._grid, rect);\r\n\r\n\t\t\tthis._grid.fireListeners(EVENT_TYPE.RESIZE_COLUMN, {col: this._targetCol});\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\tthis._grid.updateScroll();\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setSafeInputValue(input, value) {\r\n\t\tconst {type} = input;\r\n\t\tinput.type = '';\r\n\t\tinput.value = value;\r\n\t\tif (type) {\r\n\t\t\tinput.type = type;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Manage focus\r\n\t * @private\r\n\t */\r\n\tclass FocusControl extends EventTarget {\r\n\t\tconstructor(grid, parentElement, scrollable) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._scrollable = scrollable;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._input = document.createElement('input');\r\n\t\t\tthis._input.classList.add('grid-focus-control');\r\n\t\t\tthis._input.readOnly = true;\r\n\t\t\tparentElement.appendChild(this._input);\r\n\r\n\t\t\tthis._handler.on(this._input, 'compositionstart', (e) => {\r\n\t\t\t\tthis._input.classList.add('composition');\r\n\t\t\t\tthis._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t\tthis._isComposition = true;\r\n\t\t\t\tgrid.focus();\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'compositionend', (e) => {\r\n\t\t\t\tthis._isComposition = false;\r\n\t\t\t\tthis._input.classList.remove('composition');\r\n\t\t\t\tthis._input.style.font = '';\r\n\t\t\t\tif (!this._input.readOnly) {\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keypress', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._input.readOnly && e.key && e.key.length === 1) {\r\n\t\t\t\t\tif (e.key === 'c' && (e.ctrlKey || e.metaKey)) {\r\n\t\t\t\t\t\t//copy! for Firefox\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.fireListeners('input', e.key);\r\n\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tthis.fireListeners('keydown', keyCode, e);\r\n\r\n\t\t\t\tif (!this._input.readOnly && this._input.value) {\r\n\t\t\t\t\t// for Safari\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tconst inputClear = (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t};\r\n\r\n\t\t\tthis._handler.on(this._input, 'input', inputClear);\r\n\t\t\tthis._handler.on(this._input, 'keyup', inputClear);\r\n\t\t\tthis._handler.on(document, 'keydown', (e) => {\r\n\t\t\t\tif (!browser.IE) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.target !== this._input) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n\t\t\t\t\tsetSafeInputValue(this._input, 'dummy');\r\n\t\t\t\t\tthis._input.select();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._handler.on(document, 'copy', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!isDescendantElement(parentElement, e.target)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\tconst data = array.find(this.fireListeners('copy'), isDef);\r\n\t\t\t\tif (isDef(data)) {\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\tif (browser.IE) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', data); // IE\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', data); // Chrome, Firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonKeyDownMove(fn) {\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_LEFT ||\r\n\t\t\t\t\tkeyCode === KEY_UP ||\r\n\t\t\t\t\tkeyCode === KEY_RIGHT ||\r\n\t\t\t\t\tkeyCode === KEY_DOWN ||\r\n\t\t\t\t\tkeyCode === KEY_HOME ||\r\n\t\t\t\t\tkeyCode === KEY_END\r\n\t\t\t\t) {\r\n\t\t\t\t\tfn(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonInput(fn) {\r\n\t\t\treturn this.listen('input', fn);\r\n\t\t}\r\n\t\tonCopy(fn) {\r\n\t\t\treturn this.listen('copy', fn);\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\t// this._input.value = '';\r\n\t\t\tthis._input.focus();\r\n\t\t}\r\n\t\tsetFocusRect(rect) {\r\n\t\t\tconst top = this._scrollable.calcTop(rect.top);\r\n\t\t\tthis._input.style.top = (top - style.getScrollBarSize()).toFixed() + 'px';//position:relative IE position:relative\r\n\t\t\tthis._input.style.left = rect.left.toFixed() + 'px';\r\n\t\t\tthis._input.style.width = rect.width.toFixed() + 'px';\r\n\t\t\tthis._input.style.height = rect.height.toFixed() + 'px';\r\n\t\t}\r\n\t\tset editMode(editMode) {\r\n\t\t\tthis._input.readOnly = !editMode;\r\n\t\t}\r\n\t\tresetInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tconst composition = el.classList.contains('composition');\r\n\t\t\t\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tconst removeNames = [];\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tif (!this._inputStatus.hasOwnProperty(att.nodeName)) {\r\n\t\t\t\t\tremoveNames.push(att.name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tremoveNames.forEach((removeName) => {\r\n\t\t\t\tel.removeAttribute(removeName);\r\n\t\t\t});\r\n\t\t\tfor (const name in this._inputStatus) {\r\n\t\t\t\tel.setAttribute(name, this._inputStatus[name]);\r\n\t\t\t}\r\n\t\t\tif (composition) {\r\n\t\t\t\tel.classList.add('composition');\r\n\t\t\t\tel.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t} else {\r\n\t\t\t\tel.classList.remove('composition');\r\n\t\t\t}\r\n\t\t}\r\n\t\tstoreInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tthis._inputStatus = {};\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tthis._inputStatus[att.name] = att.value;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDefaultInputStatus() {\r\n\t\t\t// \r\n\t\t\t// this._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t}\r\n\t\tget editMode() {\r\n\t\t\treturn !this._input.readOnly;\r\n\t\t}\r\n\t\tget input() {\r\n\t\t\treturn this._input;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Selected area management\r\n\t */\r\n\tclass Selection extends EventTarget {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\r\n\t\t\tthis._sel = {col: 0, row: 0};\r\n\t\t\tthis._focus = {col: 0, row: 0};\r\n\t\t\t\r\n\t\t\tthis._start = {col: 0, row: 0};\r\n\t\t\tthis._end = {col: 0, row: 0};\r\n\t\t}\r\n\t\tget range() {\r\n\t\t\tconst startCol = Math.min(this._start.col, this._end.col);\r\n\t\t\tconst startRow = Math.min(this._start.row, this._end.row);\r\n\t\t\tconst endCol = Math.max(this._start.col, this._end.col);\r\n\t\t\tconst endRow = Math.max(this._start.row, this._end.row);\r\n\t\t\treturn {\r\n\t\t\t\tstart: {\r\n\t\t\t\t\tcol: startCol,\r\n\t\t\t\t\trow: startRow,\r\n\t\t\t\t},\r\n\t\t\t\tend: {\r\n\t\t\t\t\tcol: endCol,\r\n\t\t\t\t\trow: endRow,\r\n\t\t\t\t},\r\n\t\t\t\tinCell(col, row) {\r\n\t\t\t\t\treturn startCol <= col && col <= endCol &&\r\n\t\t\t\t\t\tstartRow <= row && row <= endRow;\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\tget select() {\r\n\t\t\treturn {\r\n\t\t\t\tcol: this._sel.col,\r\n\t\t\t\trow: this._sel.row\r\n\t\t\t};\r\n\t\t}\r\n\t\tset select(cell = {}) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcol = 0,\r\n\t\t\t\t\trow = 0\r\n\t\t\t\t} = cell;\r\n\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\tthis._setFocusCell(col, row, true);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setSelectCell(col, row) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tthis._sel = {col, row};\r\n\t\t\t\tthis._start = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setFocusCell(col, row, keepSelect) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tif (!keepSelect) {\r\n\t\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\t}\r\n\t\t\t\tthis._focus = {col, row};\r\n\t\t\t\tthis._end = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_wrapFireSelectedEvent(callback) {\r\n\t\t\tif (this._isWraped) {\r\n\t\t\t\tcallback();\r\n\t\t\t} else {\r\n\t\t\t\tthis._isWraped = true;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst before = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: false,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t\tconst after = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: true,\r\n\t\t\t\t\t\tbefore: {\r\n\t\t\t\t\t\t\tcol: before.col,\r\n\t\t\t\t\t\t\trow: before.row,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbefore.after = {\r\n\t\t\t\t\t\tcol: after.col,\r\n\t\t\t\t\t\trow: after.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, before);\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, after);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis._isWraped = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * This class manages the drawing process for each layer\r\n\t */\r\n\tclass DrawLayers {\r\n\t\tconstructor() {\r\n\t\t\tthis._layers = {};\r\n\t\t}\r\n\t\taddDraw(level, fn) {\r\n\t\t\tconst l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n\t\t\tl.addDraw(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tconst list = [];\r\n\t\t\tfor (const k in this._layers) {\r\n\t\t\t\tlist.push(this._layers[k]);\r\n\t\t\t}\r\n\t\t\tlist.sort((a, b) => a.level - b.level);\r\n\t\t\tlist.forEach((l) => l.draw(ctx));\r\n\t\t}\r\n\t}\r\n\tclass DrawLayer {\r\n\t\tconstructor(level) {\r\n\t\t\tthis._level = level;\r\n\t\t\tthis._list = [];\r\n\t\t}\r\n\t\tget level() {\r\n\t\t\treturn this._level;\r\n\t\t}\r\n\t\taddDraw(fn) {\r\n\t\t\tthis._list.push(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tthis._list.forEach((fn) => {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfn(ctx);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Context of cell drawing\r\n\t */\r\n\tclass DrawCellContext {\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tconstructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n\t\t\tthis._col = col;\r\n\t\t\tthis._row = row;\r\n\t\t\tthis._mode = 0;\r\n\t\t\tthis._ctx = ctx;\r\n\t\t\tthis._rect = rect;\r\n\t\t\tthis._drawRect = drawRect;\r\n\t\t\tthis._drawing = drawing;\r\n\t\t\tthis._selection = selection;\r\n\t\t\tthis._drawLayers = drawLayers;\r\n\t\t}\r\n\t\tget drawing() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawing;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tget row() {\r\n\t\t\treturn this._row;\r\n\t\t}\r\n\t\tget col() {\r\n\t\t\treturn this._col;\r\n\t\t}\r\n\t\t/**\r\n\t\t * select status.\r\n\t\t * @return {object} select status\r\n\t\t */\r\n\t\tgetSelectState() {\r\n\t\t\tconst sel = this._selection.select;\r\n\t\t\treturn {\r\n\t\t\t\tselected: sel.col === this._col && sel.row === this._row,\r\n\t\t\t\tselection: this._selection.range.inCell(this._col, this._row),\r\n\t\t\t};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Canvas context.\r\n\t\t * @return {CanvasRenderingContext2D} Canvas context.\r\n\t\t */\r\n\t\tgetContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._ctx;\r\n\t\t\t} else {\r\n\t\t\t\treturn this._grid._getInitContext();\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of cell.\r\n\t\t * @return {Rect} rect Rectangle of cell.\r\n\t\t */\r\n\t\tgetRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._rect;\r\n\t\t\t} else {\r\n\t\t\t\tif (this._rect) {\r\n\t\t\t\t\treturn this._rect;\r\n\t\t\t\t}\r\n\t\t\t\treturn this._grid.getCellRelativeRect(this._col, this._row);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetRect(rect) {\r\n\t\t\tthis._rect = rect;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of Drawing range.\r\n\t\t * @return {Rect} Rectangle of Drawing range.\r\n\t\t */\r\n\t\tgetDrawRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawRect;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\treturn this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * get Context of current state\r\n\t\t * @return {DrawCellContext} current DrawCellContext.\r\n\t\t */\r\n\t\ttoCurrentContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\tconst rect = _toRelativeRect(this._grid, absoluteRect);\r\n\t\t\t\tconst drawRect = this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t\tconst context = new DrawCellContext(\r\n\t\t\t\t\t\tthis._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection,\r\n\t\t\t\t\t\tthis._drawLayers\r\n\t\t\t\t);\r\n\t\t\t\t// toCurrentContext  toCurrentContext\r\n\t\t\t\tcontext.toCurrentContext = this.toCurrentContext.bind(this);\r\n\t\t\t\treturn context;\r\n\t\t\t}\r\n\t\t}\r\n\t\taddLayerDraw(level, fn) {\r\n\t\t\tthis._drawLayers.addDraw(level, fn);\r\n\t\t}\r\n\t\t_toRelativeDrawRect(absoluteRect) {\r\n\t\t\tconst visibleRect = _getVisibleRect(this._grid);\r\n\t\t\tlet rect = absoluteRect.copy();\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst isFrozenCell = this._grid.isFrozenCell(this._col, this._row);\r\n\t\t\tif (this._grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._grid.frozenColCount - 1, this._row);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\tMath.max(rect.left, fRect.right),\r\n\t\t\t\t\t\trect.top,\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this._grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._col, this._grid.frozenRowCount - 1);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\trect.left,\r\n\t\t\t\t\t\tMath.max(rect.top, fRect.bottom),\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\trect.offsetLeft(-visibleRect.left);\r\n\t\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\t\treturn rect;\r\n\t\t}\r\n\t\t_delayMode(grid, onTerminate) {\r\n\t\t\tthis._mode = 1;\r\n\t\t\tthis._ctx = null;\r\n\t\t\tthis._rect = null;\r\n\t\t\tthis._drawRect = null;\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._onTerminate = onTerminate;\r\n\t\t}\r\n\t\t/**\r\n\t\t * terminate\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tterminate() {\r\n\t\t\tif (this._mode !== 0) {\r\n\t\t\t\tthis._onTerminate();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * DrawGrid\r\n\t * @classdesc cheetahGrid.core.DrawGrid\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.core\r\n\t */\r\n\tclass DrawGrid extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * rowCount: grid row count.default 10\r\n\t\t * colCount: grid col count.default 10\r\n\t\t * frozenColCount: default 0\r\n\t\t * frozenRowCount: default 0\r\n\t\t * defaultRowHeight: default grid row height. default 40\r\n\t\t * defaultColWidth: default grid col width. default 80\r\n\t\t * parentElement: canvas parentElement\r\n\t\t * font: default font\r\n\t\t * underlayBackgroundColor: underlay background color\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\trowCount = 10,\r\n\t\t\t\t\tcolCount = 10,\r\n\t\t\t\t\tfrozenColCount = 0,\r\n\t\t\t\t\tfrozenRowCount = 0,\r\n\t\t\t\t\tdefaultRowHeight = 40,\r\n\t\t\t\t\tdefaultColWidth = 80,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tunderlayBackgroundColor,\r\n\t\t\t\t\tparentElement,\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis[_] = {};\r\n\t\t\tstyle.initDocument();\r\n\t\t\tthis[_].element = createRootElement();\r\n\t\t\tthis[_].scrollable = new Scrollable();\r\n\t\t\tthis[_].handler = new EventHandler();\r\n\t\t\tthis[_].selection = new Selection(this);\r\n\t\t\tthis[_].focusControl = new FocusControl(this, this[_].scrollable.getElement(), this[_].scrollable);\r\n\r\n\t\t\tthis[_].canvas = hiDPI.transform(document.createElement('canvas'));\r\n\t\t\tthis[_].context = this[_].canvas.getContext('2d', {alpha: false});\r\n\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\r\n\t\t\tthis[_].font = font;\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\r\n\t\t\t/////\r\n\t\t\tthis[_].rowHeightsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsLimit = {};\r\n\t\t\tthis[_].calcWidthContext = {\r\n\t\t\t\t_: this[_],\r\n\t\t\t\tget full() {\r\n\t\t\t\t\treturn this._.canvas.width;\r\n\t\t\t\t},\r\n\t\t\t\tget em() {\r\n\t\t\t\t\treturn this._.context.measureText('').width;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis[_].columnResizer = new ColumnResizer(this);\r\n\t\t\tthis[_].cellSelector = new CellSelector(this);\r\n\r\n\t\t\tthis[_].drawCells = {};\r\n\r\n\t\t\tthis[_].element.appendChild(this[_].canvas);\r\n\t\t\tthis[_].element.appendChild(this[_].scrollable.getElement());\r\n\t\t\tthis.updateScroll();\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.appendChild(this[_].element);\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t} else {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t}\r\n\t\t\t_bindEvents(this);\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this[_].element;\r\n\t\t}\r\n\t\tget canvas() {\r\n\t\t\treturn this[_].canvas;\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\tconst {col, row} = this[_].selection.select;\r\n\t\t\tthis.focusCell(col, row);\r\n\t\t}\r\n\t\tget selection() {\r\n\t\t\treturn this[_].selection;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset rowCount(rowCount) {\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget colCount() {\r\n\t\t\treturn this[_].colCount;\r\n\t\t}\r\n\t\tset colCount(colCount) {\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget frozenColCount() {\r\n\t\t\treturn this[_].frozenColCount;\r\n\t\t}\r\n\t\tset frozenColCount(frozenColCount) {\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t}\r\n\t\tget frozenRowCount() {\r\n\t\t\treturn this[_].frozenRowCount;\r\n\t\t}\r\n\t\tset frozenRowCount(frozenRowCount) {\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\t\t}\r\n\t\tget defaultRowHeight() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset defaultRowHeight(defaultRowHeight) {\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget defaultColWidth() {\r\n\t\t\treturn this[_].defaultColWidth;\r\n\t\t}\r\n\t\tset defaultColWidth(defaultColWidth) {\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this[_].font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis[_].font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn this[_].underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tconfigure(name, value) {\r\n\t\t\tconst cfg = this[_].config || (this[_].config = {});\r\n\t\t\tif (isDef(value)) {\r\n\t\t\t\tcfg[name] = value;\r\n\t\t\t}\r\n\t\t\treturn cfg[name];\r\n\t\t}\r\n\t\tupdateSize() {\r\n\t\t\t//\r\n\t\t\tthis[_].canvas.style.width = '';\r\n\t\t\tthis[_].canvas.style.height = '';\r\n\t\t\tconst width = Math.floor(this[_].canvas.offsetWidth ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetWidth - style.getScrollBarSize());\r\n\t\t\tconst height = Math.floor(this[_].canvas.offsetHeight ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetHeight - style.getScrollBarSize());\r\n\r\n\t\t\tthis[_].canvas.width = width;\r\n\t\t\tthis[_].canvas.height = height;\r\n\r\n\t\t\t//style\r\n\t\t\tthis[_].canvas.style.width = `${width}px`;\r\n\t\t\tthis[_].canvas.style.height = `${height}px`;\r\n\r\n\t\t\tconst sel = this[_].selection.select;\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\r\n\t\t}\r\n\t\tupdateScroll() {\r\n\t\t\tthis[_].scrollable.setScrollSize(_getScrollWidth(this), _getScrollHeight(this));\r\n\t\t\tthis[_].scroll = {\r\n\t\t\t\tleft: this[_].scrollable.scrollLeft,\r\n\t\t\t\ttop: this[_].scrollable.scrollTop,\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetRowHeight(row) {\r\n\t\t\treturn _getRowHeight(this, row);\r\n\t\t}\r\n\t\tsetRowHeight(row, height) {\r\n\t\t\t_setRowHeight(this, row, height);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetColWidth(col) {\r\n\t\t\treturn _getColWidth(this, col);\r\n\t\t}\r\n\t\tsetColWidth(col, width) {\r\n\t\t\t_setColWidth(this, col, width);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetMaxColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.max || undefined;\r\n\t\t}\r\n\t\tsetMaxColWidth(col, maxwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.max = maxwidth;\r\n\t\t}\r\n\t\tgetMinColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.min || undefined;\r\n\t\t}\r\n\t\tsetMinColWidth(col, minwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.min = minwidth;\r\n\t\t}\r\n\t\tgetCellRect(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n\t\t\tconst width = _getColWidth(this, col);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col) {\r\n\t\t\t\tabsoluteLeft += this[_].scroll.left;\r\n\t\t\t}\r\n\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, row - 1);\r\n\t\t\tconst height = _getRowHeight(this, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\tabsoluteTop += this[_].scroll.top;\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tgetCellRelativeRect(col, row) {\r\n\t\t\treturn _toRelativeRect(this, this.getCellRect(col, row));\r\n\t\t}\r\n\t\tgetCellsRect(startCol, startRow, endCol, endRow) {\r\n\t\t\tconst isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n\t\t\tconst isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n\t\t\tlet width = _getColsWidth(this, startCol, endCol);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.col) {\r\n\t\t\t\tconst scrollLeft = this[_].scroll.left;\r\n\t\t\t\tabsoluteLeft += scrollLeft;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n\t\t\t\t\twidth -= scrollLeft;\r\n\t\t\t\t\twidth = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, startRow - 1);\r\n\t\t\tlet height = _getRowsHeight(this, startRow, endRow);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.row) {\r\n\t\t\t\tconst scrollTop = this[_].scroll.top;\r\n\t\t\t\tabsoluteTop += scrollTop;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n\t\t\t\t\theight -= scrollTop;\r\n\t\t\t\t\theight = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tisFrozenCell(col, row) {\r\n\t\t\tconst isFrozenRow = this[_].frozenRowCount > 0 && row < this[_].frozenRowCount;\r\n\t\t\tconst isFrozenCol = this[_].frozenColCount > 0 && col < this[_].frozenColCount;\r\n\t\t\tif (isFrozenRow || isFrozenCol) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\trow: isFrozenRow,\r\n\t\t\t\t\tcol: isFrozenCol,\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetRowAt(absoluteY) {\r\n\t\t\tconst frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.row;\r\n\t\t\t}\r\n\t\t\tconst row = _getTargetRowAt(this, absoluteY);\r\n\t\t\treturn row ? row.row : -1;\r\n\r\n\t\t}\r\n\t\tgetColAt(absoluteX) {\r\n\t\t\tconst frozen = _getTargetFrozenColAt(this, absoluteX);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.col;\r\n\t\t\t}\r\n\t\t\tconst col = _getTargetColAt(this, absoluteX);\r\n\t\t\treturn col ? col.col : -1;\r\n\t\t}\r\n\t\tgetCellAt(absoluteX, absoluteY) {\r\n\t\t\treturn {\r\n\t\t\t\trow: this.getRowAt(absoluteY),\r\n\t\t\t\tcol: this.getColAt(absoluteX),\r\n\t\t\t};\r\n\t\t}\r\n\t\tmakeVisibleCell(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = this.getCellRect(col, row);\r\n\t\t\tconst visibleRect = _getScrollableVisibleRect(this);\r\n\t\t\tif (visibleRect.contains(rect)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.col) {\r\n\t\t\t\tif (rect.left < visibleRect.left) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n\t\t\t\t} else if (visibleRect.right < rect.right) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.row) {\r\n\t\t\t\tif (rect.top < visibleRect.top) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.top - rect.top;\r\n\t\t\t\t} else if (visibleRect.bottom < rect.bottom) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfocusCell(col, row) {\r\n\t\t\tconst oldEditMode = this[_].focusControl.editMode;\r\n\t\t\tif (oldEditMode) {\r\n\t\t\t\tthis[_].focusControl.resetInputStatus();\r\n\t\t\t}\r\n\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(col, row));\r\n\t\t\t\r\n\t\t\tconst {col: selCol, row: selRow} = this[_].selection.select;\r\n\t\t\tconst results = this.fireListeners(\r\n\t\t\t\t\tEVENT_TYPE.EDITABLEINPUT_CELL,\r\n\t\t\t\t\t{col: selCol, row: selRow}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tconst editMode = (array.findIndex(results, (v) => !!v) >= 0);\r\n\t\t\tthis[_].focusControl.editMode = editMode;\r\n\t\t\t\r\n\t\t\tif (editMode) {\r\n\t\t\t\tthis[_].focusControl.storeInputStatus();\r\n\t\t\t\tthis[_].focusControl.setDefaultInputStatus();\r\n\t\t\t\tthis.fireListeners(\r\n\t\t\t\t\t\tEVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\t\t\t\t\t{col: selCol, row: selRow, input: this[_].focusControl.input}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Failure occurs in IE if focus is not last\r\n\t\t\tthis[_].focusControl.focus();\r\n\t\t}\r\n\t\tinvalidateCell(col, row) {\r\n\t\t\tthis.invalidateGridRect(col, row);\r\n\t\t}\r\n\t\tinvalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n\t\t\tconst offset = this.getOffsetInvalidateCells();\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\tstartCol -= offset;\r\n\t\t\t\tstartRow -= offset;\r\n\t\t\t\tendCol += offset;\r\n\t\t\t\tendRow += offset;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\tconst cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n\t\t\tconst invalidateTarget = visibleRect.intersection(cellsRect);\r\n\t\t\tif (invalidateTarget) {\r\n\r\n\t\t\t\tif (this[_].frozenColCount > 0 && endCol >= this[_].frozenColCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenColsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.left = Math.min(frozenRect.right - 1, frozenRect.right);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this[_].frozenRowCount > 0 && endRow >= this[_].frozenRowCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_invalidateRect(this, invalidateTarget);\r\n\t\t\t}\r\n\t\t}\r\n\t\tinvalidate() {\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\t_invalidateRect(this, visibleRect);\r\n\t\t}\r\n\t\t/**\r\n\t\t * get cell value at copy action\r\n\t\t * <p>\r\n\t\t * Please implement\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\t//Please implement get cell value!!\r\n\t\t}\r\n\t\t/**\r\n\t\t * Draw a cell\r\n\t\t * <p>\r\n\t\t * Please implement cell drawing.\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @param  {DrawCellContext} context context of cell drawing.\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\t//Please implement cell drawing!!\r\n\t\t}\r\n\t\taddDisposable(disposable) {\r\n\t\t\tif (!disposable || !disposable.dispose || typeof disposable.dispose !== 'function') {\r\n\t\t\t\tthrow new Error('not disposable!');\r\n\t\t\t}\r\n\t\t\tconst disposables = this[_].disposables = this[_].disposables || [];\r\n\t\t\tdisposables.push(disposable);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis[_].handler.dispose();\r\n\t\t\tthis[_].scrollable.dispose();\r\n\t\t\tthis[_].focusControl.dispose();\r\n\t\t\tthis[_].columnResizer.dispose();\r\n\t\t\tthis[_].cellSelector.dispose();\r\n\t\t\tif (this[_].disposables) {\r\n\t\t\t\tthis[_].disposables.forEach((disposable) => disposable.dispose());\r\n\t\t\t\tthis[_].disposables = null;\r\n\t\t\t}\r\n\r\n\t\t\tconst {parentElement} = this[_].element;\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.removeChild(this[_].element);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetAttachCellArea(col, row) {\r\n\t\t\treturn {\r\n\t\t\t\telement: this.getElement(),\r\n\t\t\t\trect: _toRelativeRect(this, this.getCellRect(col, row)),\r\n\t\t\t};\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\t//nop\r\n\t\t}\r\n\t\tgetTargetRowAtInternal(absoluteY) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowsHeightInternal(startRow, endRow) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetScrollHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col - 1;\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col + 1;\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row - 1;\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row + 1;\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t_getInitContext() {\r\n\t\t\tconst ctx = this[_].context;\r\n\t\t\t//\r\n\t\t\tctx.fillStyle = 'white';\r\n\t\t\tctx.strokeStyle = 'black';\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'top';\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.font = this.font || '16px sans-serif';\r\n\t\t\treturn ctx;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = DrawGrid;\r\n}","'use strict';\r\n{\r\n\tconst {isDef, obj: {each}} = require('../internal/utils');\r\n\t//private symbol\r\n\tconst {_} = require('../internal/symbolManager').get();\r\n\r\n\tlet nextId = 1;\r\n\t/**\r\n\t * event target.\r\n\t */\r\n\tclass EventTarget {\r\n\t\tconstructor() {\r\n\t\t\tthis[_] = {};\r\n\t\t\tthis[_].listeners = {};\r\n\t\t\tthis[_].listenerData = {};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Adds an event listener.\r\n\t\t * @param  {string} type The event type id.\r\n\t\t * @param  {function} listener Callback method.\r\n\t\t * @return {number} unique id for the listener.\r\n\t\t */\r\n\t\tlisten(type, listener) {\r\n\t\t\tconst list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n\t\t\tlist.push(listener);\r\n\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis[_].listenerData[id] = {\r\n\t\t\t\ttype,\r\n\t\t\t\tlistener,\r\n\t\t\t\tremove: () => {\r\n\t\t\t\t\tdelete this[_].listenerData[id];\r\n\t\t\t\t\tconst index = list.indexOf(listener);\r\n\t\t\t\t\tlist.splice(index, 1);\r\n\t\t\t\t\tif (!this[_].listeners[type].length) {\r\n\t\t\t\t\t\tdelete this[_].listeners[type];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\treturn id;\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Removes an event listener which was added with listen() by the id returned by listen().\r\n\t\t * @param  {number} id the id returned by listen().\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tunlisten(id) {\r\n\t\t\tthis[_].listenerData[id].remove();\r\n\t\t}\r\n\t\taddEventListener(type, listener) {\r\n\t\t\tthis.listen(type, listener);\r\n\t\t}\r\n\t\tremoveEventListener(type, listener) {\r\n\t\t\teach(this[_].listenerData, (obj, id) => {\r\n\t\t\t\tif (obj.type === type && obj.listener === listener) {\r\n\t\t\t\t\tthis.unlisten(id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListeners(type) {\r\n\t\t\treturn !!this[_].listeners[type];\r\n\t\t}\r\n\t\t/**\r\n\t\t * Fires all registered listeners\r\n\t\t * @param  {string}    type The type of the listeners to fire.\r\n\t\t * @param  {...*} args fire arguments\r\n\t\t * @return {*} the result of the last listener\r\n\t\t */\r\n\t\tfireListeners(type, ...args) {\r\n\t\t\tconst list = this[_].listeners[type];\r\n\t\t\tif (!list) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\treturn list.\r\n\t\t\t\tmap((listener) => listener.call(this, ...args)).\r\n\t\t\t\tfilter(isDef);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tdelete this[_];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventTarget;\r\n}","'use strict';\r\n{\r\n\tconst DataSource = require('./data/DataSource');\r\n\tconst CachedDataSource = require('./data/CachedDataSource');\r\n\t\r\n\r\n\t/**\r\n\t * data modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.data\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDataSource,\r\n\t\tCachedDataSource\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst DataSource = require('./DataSource');\r\n\r\n\tfunction _setFieldCache({_fCache}, index, field, value) {\r\n\t\tconst recCache = _fCache[index] || (_fCache[index] = {});\r\n\t\trecCache[field] = value;\r\n\t}\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.CachedDataSource\r\n\t * @extends cheetahGrid.data.DataSource\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass CachedDataSource extends DataSource {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn DataSource.EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new CachedDataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor(opt = {}) {\r\n\t\t\tsuper(opt);\r\n\t\t\tthis._rCache = {};\r\n\t\t\tthis._fCache = {};\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\tif (this._rCache && this._rCache[index]) {\r\n\t\t\t\treturn this._rCache[index];\r\n\t\t\t}\r\n\t\t\treturn super.getOriginal(index);\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\r\n\t\t\tif (cache) {\r\n\t\t\t\treturn cache;\r\n\t\t\t}\r\n\t\t\treturn super.getOriginalField(index, field);\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tconst fCache = this._fCache;\r\n\t\t\tif (fCache && fCache[index]) {\r\n\t\t\t\tdelete fCache[index]; // clear row cache\r\n\t\t\t}\r\n\t\t\treturn super.setOriginalField(index, field, value);\r\n\t\t}\r\n\t\tclearCache() {\r\n\t\t\tif (this._rCache) {\r\n\t\t\t\tthis._rCache = {};\r\n\t\t\t}\r\n\t\t\tif (this._fCache) {\r\n\t\t\t\tthis._fCache = {};\r\n\t\t\t}\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t_setFieldCache(this, index, field, val);\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\tthis._rCache[index] = val;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CachedDataSource;\r\n}","'use strict';\r\n{\r\n\tconst {array, isDef, isPromise, getOrApply, applyChainSafe, emptyFn} = require('../internal/utils');\r\n\tconst sort = require('../internal/sort');\r\n\tconst EventTarget = require('../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tUPDATE_LENGTH: 'update_length',\r\n\t\tUPDATED_LENGTH: 'updated_length',\r\n\t\tUPDATED_ORDER: 'updated_order',\r\n\t};\r\n\r\n\tfunction getValue(value, setPromiseBack) {\r\n\t\tvalue = getOrApply(value);\r\n\t\tif (isPromise(value)) {\r\n\t\t\tvalue = value.then((r) => {\r\n\t\t\t\tif (!isPromise(r)) {\r\n\t\t\t\t\tsetPromiseBack(r);\r\n\t\t\t\t}\r\n\t\t\t\treturn getValue(r, setPromiseBack);\r\n\t\t\t});\r\n\t\t\t//\r\n\t\t\tsetPromiseBack(value);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tfunction getField(record, field, setPromiseBack) {\r\n\t\tif (!isDef(record)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (isPromise(record)) {\r\n\t\t\treturn record.then((r) => getField(r, field, setPromiseBack));\r\n\t\t}\r\n\t\tif (field in record) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\tif (typeof field === 'function') {\r\n\t\t\treturn getValue(field(record), setPromiseBack);\r\n\t\t}\r\n\r\n\t\tconst ss = (field + '').split('.');\r\n\t\tif (ss.length <= 1) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\treturn getValue(applyChainSafe(record, (val, name) => getField(val, name, emptyFn), ...ss), setPromiseBack);\r\n\t}\r\n\tfunction setField(record, field, value) {\r\n\t\tif (field in record) {\r\n\t\t\trecord[field] = value;\r\n\t\t} else if (typeof field === 'function') {\r\n\t\t\treturn field(record, value);\r\n\t\t} else if (typeof field === 'string') {\r\n\t\t\tconst ss = (field + '').split('.');\r\n\t\t\tlet obj = record;\r\n\t\t\tconst {length} = ss;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst f = ss[i];\r\n\t\t\t\tif (i === length - 1) {\r\n\t\t\t\t\tobj[f] = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj = obj[f] || (obj[f] = {});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\trecord[field] = value;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\tfunction _getIndex(dataSource, index) {\r\n\t\tif (!dataSource._sortedIndexMap) {\r\n\t\t\treturn index;\r\n\t\t}\r\n\t\tconst mapIndex = dataSource._sortedIndexMap[index];\r\n\t\treturn isDef(mapIndex) ? mapIndex : index;\r\n\t}\r\n\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.DataSource\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass DataSource extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new DataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor({get, length = 0} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._get = get;\r\n\t\t\tthis._length = length;\r\n\t\t\tthis._sortedIndexMap = false;\r\n\t\t}\r\n\t\tget(index) {\r\n\t\t\treturn this.getOriginal(_getIndex(this, index));\r\n\t\t}\r\n\t\tgetField(index, field) {\r\n\t\t\treturn this.getOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\thasField(index, field) {\r\n\t\t\treturn this.hasOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\tsetField(index, field, value) {\r\n\t\t\treturn this.setOriginalField(_getIndex(this, index), field, value);\r\n\t\t}\r\n\t\tsort(field, order) {\r\n\t\t\tconst sortedIndexMap = new Array(this._length);\r\n\r\n\t\t\tconst orderFn = order !== 'desc'\r\n\t\t\t\t? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1\r\n\t\t\t\t: (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\r\n\r\n\t\t\treturn sort.sortPromise(\r\n\t\t\t\t\t(index) => isDef(sortedIndexMap[index])\r\n\t\t\t\t\t\t? sortedIndexMap[index]\r\n\t\t\t\t\t\t: (sortedIndexMap[index] = index),\r\n\t\t\t\t\t(index, rel) => {\r\n\t\t\t\t\t\tsortedIndexMap[index] = rel;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis._length,\r\n\t\t\t\t\torderFn,\r\n\t\t\t\t\t(index) => this.getOriginalField(index, field)\r\n\t\t\t).then(() => {\r\n\t\t\t\tthis._sortedIndexMap = sortedIndexMap;\r\n\t\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n\t\t\t});\r\n\t\t}\r\n\t\tget length() {\r\n\t\t\treturn this._length;\r\n\t\t}\r\n\t\tset length(length) {\r\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._length = length;\r\n\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\treturn getValue(this._get(index), (val) => {\r\n\t\t\t\tthis.recordPromiseCallBackInternal(index, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn getField(record, field, (val) => {\r\n\t\t\t\tthis.fieldPromiseCallBackInternal(index, field, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\thasOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (typeof field === 'function') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn field in record;\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn setField(record, field, value);\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t}\r\n\tDataSource.EMPTY = new DataSource({\r\n\t\tlength: 0,\r\n\t});\r\n\r\n\tmodule.exports = DataSource;\r\n}","'use strict';\r\n\r\nconst {isDef} = require('../internal/utils');\r\nclass Inline {\r\n\tconstructor(content) {\r\n\t\tthis._content = isDef(content) ? content : '';\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn ctx.measureText(this._content).width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(fn) {\r\n\t\t\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight,\r\n\t\toffsetTop,\r\n\t\toffsetBottom,\r\n\t}) {\r\n\t\tcanvashelper.fillTextRect(ctx, this._content,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t}\r\n}\r\nmodule.exports = Inline;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\n\r\nclass InlineDrawer extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tdraw,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._draw = draw;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t\toffsetTop,\r\n\t\t\t\toffsetBottom,\r\n\t\t\t}) {\r\n\t\tthis._draw({\r\n\t\t\tctx,\r\n\t\t\tcanvashelper,\r\n\t\t\trect,\r\n\t\t\toffset,\r\n\t\t\toffsetLeft,\r\n\t\t\toffsetRight,\r\n\t\t\toffsetTop,\r\n\t\t\toffsetBottom,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineDrawer;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst fonts = require('../internal/fonts');\r\n\r\nclass InlineIcon extends Inline {\r\n\tconstructor(icon) {\r\n\t\tsuper();\r\n\t\tthis._icon = icon || {};\r\n\t}\r\n\twidth({ctx}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.width) {\r\n\t\t\treturn icon.width;\r\n\t\t}\r\n\t\tif (icon.font && fonts.check(icon.font, icon.content)) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.font = icon.font || ctx.font;\r\n\t\t\t\treturn ctx.measureText(icon.content).width;\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfont() {\r\n\t\treturn this._icon.font;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._icon.color;\r\n\t}\r\n\tcanDraw() {\r\n\t\tconst icon = this._icon;\r\n\t\treturn icon.font ? fonts.check(icon.font, icon.content) : true;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.font && !fonts.check(icon.font, icon.content)) {\r\n\t\t\tfonts.load(icon.font, icon.content, callback);\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t\toffsetTop,\r\n\t\t\t\toffsetBottom,\r\n\t\t\t}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.content) {\r\n\t\t\tcanvashelper.fillTextRect(ctx, icon.content,\r\n\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineIcon;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {getCacheOrLoad} = require('../internal/imgs');\r\nconst {isPromise} = require('../internal/utils');\r\n\r\nclass InlineImage extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsrc,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\tthis._src = src;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._imageLeft = imageLeft;\r\n\t\tthis._imageTop = imageTop;\r\n\t\tthis._imageWidth = imageWidth;\r\n\t\tthis._imageHeight = imageHeight;\r\n\r\n\t\tthis._onloaded = [];\r\n\r\n\r\n\t\tthis._loaded = false;\r\n\t\tif (isPromise(src)) {\r\n\t\t\tsrc.then((s) => {\r\n\t\t\t\tthis._src = s;\r\n\t\t\t\tthis._loadImage(s);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loadImage(src);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t_loadImage(src) {\r\n\t\tconst img = this._inlineImg = getCacheOrLoad('InlineImage', 50, src);\r\n\t\tif (isPromise(img)) {\r\n\t\t\timg.then((i) => {\r\n\t\t\t\tthis._loaded = true;\r\n\t\t\t\tthis._inlineImg = i;\r\n\r\n\t\t\t\tthis._onloaded.forEach((fn) => fn());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loaded = true;\r\n\t\t}\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width || (this._loaded ? this._inlineImg.width : 0);\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn this._loaded;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tif (isPromise(this._src) || isPromise(this._inlineImg)) {\r\n\t\t\tthis._onloaded.push(() => callback());\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t\toffsetTop,\r\n\t\t\t\toffsetBottom,\r\n\t\t\t}) {\r\n\t\tconst img = this._inlineImg;\r\n\t\tcanvashelper.drawInlineImageRect(ctx, img,\r\n\t\t\t\tthis._imageLeft || 0, this._imageTop || 0,\r\n\t\t\t\tthis._imageWidth || img.width, this._imageHeight || img.height,\r\n\t\t\t\tthis._width || img.width, this._height || img.height,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineImage;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nclass InlinePath2D extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tpath,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t// IEPath2Dpolyfill\r\n\t\tthis._path = new path2DManager.Path2D(path);\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight,\r\n\t\toffsetTop,\r\n\t\toffsetBottom,\r\n\t}) {\r\n\t\toffset++;\r\n\t\tconst padding = {\r\n\t\t\tleft: offsetLeft,\r\n\t\t\tright: offsetRight,\r\n\t\t\ttop: offsetTop,\r\n\t\t\tbottom: offsetBottom,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, this._width, this._height, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\tctx.translate(pos.x, pos.y);\r\n\t\t\tctx.fill(this._path);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlinePath2D;","'use strict';\r\n\r\nconst InlineImage = require('./InlineImage');\r\nconst {then} = require('../internal/utils');\r\n\r\nfunction buildSvgDataUrl(svg) {\r\n\tconst data = (typeof svg === 'string') ? svg : new XMLSerializer().serializeToString(svg);\r\n\tconst url = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(data); //svgbase64\r\n\treturn url;\r\n}\r\nfunction getSvgElement(svg) {\r\n\tif (typeof svg === 'string') {\r\n\t\tconst parser = new DOMParser();\r\n\t\treturn parser.parseFromString(svg, 'image/svg+xml');\r\n\t} else {\r\n\t\treturn svg;\r\n\t}\r\n}\r\n\r\nclass InlineSvg extends InlineImage {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsvg,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tconst svgElem = then(svg, getSvgElement);\r\n\t\tconst elmWidth = svgElem.getAttribute ? svgElem.getAttribute('width') : null;\r\n\t\tconst elmHeight = svgElem.getAttribute ? svgElem.getAttribute('height') : null;\r\n\t\tsuper({\r\n\t\t\tsrc: then(svg, buildSvgDataUrl),\r\n\t\t\twidth: width || elmWidth,\r\n\t\t\theight: height || elmHeight,\r\n\t\t\timageWidth: elmWidth,\r\n\t\t\timageHeight: elmHeight,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineSvg;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst InlineIcon = require('./InlineIcon');\r\nconst InlineImage = require('./InlineImage');\r\nconst InlineSvg = require('./InlineSvg');\r\nconst InlineDrawer = require('./InlineDrawer');\r\nconst InlinePath2D = require('./InlinePath2D');\r\nconst {isDef} = require('../internal/utils');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst icons = require('../icons');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nfunction drawRegisteredIcon(ctx, icon,\r\n\t\tdrawWidth, drawHeight,\r\n\t\tleft, top, width, height,\r\n\t\t{\r\n\t\t\toffset = 2,\r\n\t\t\tpadding,\r\n\t\t} = {}) {\r\n\tconst rect = {\r\n\t\tleft,\r\n\t\ttop,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tright: left + width,\r\n\t\tbottom: top + height,\r\n\t};\r\n\tctx.save();\r\n\ttry {\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t//clip\r\n\t\tctx.clip();\r\n\r\n\t\t//\r\n\t\tconst pos = calcStartPosition(ctx, rect, drawWidth, drawHeight, {\r\n\t\t\toffset,\r\n\t\t\tpadding\r\n\t\t});\r\n\t\tpath2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n\t} finally {\r\n\t\tctx.restore();\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\ticonOf(icon) {\r\n\t\tif (icon instanceof Inline) {\r\n\t\t\treturn icon;\r\n\t\t}\r\n\t\tif (!icon) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (icon.font && icon.content) {\r\n\t\t\treturn new InlineIcon(icon);\r\n\t\t}\r\n\t\tif (icon.src) {\r\n\t\t\treturn new InlineImage({\r\n\t\t\t\tsrc: icon.src,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.svg) {\r\n\t\t\treturn new InlineSvg({\r\n\t\t\t\tsvg: icon.svg,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.path) {\r\n\t\t\treturn new InlinePath2D({\r\n\t\t\t\tpath: icon.path,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst regedIcons = icons.get();\r\n\t\tif (icon.name && regedIcons[icon.name]) {\r\n\t\t\tconst regedIcon = regedIcons[icon.name];\r\n\t\t\tconst width = icon.width || Math.max(regedIcon.width, regedIcon.height);\r\n\t\t\treturn new InlineDrawer({\r\n\t\t\t\tdraw({\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\trect,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\toffsetRight,\r\n\t\t\t\t\toffsetTop,\r\n\t\t\t\t\toffsetBottom,\r\n\t\t\t\t}) {\r\n\t\t\t\t\tdrawRegisteredIcon(ctx, regedIcon,\r\n\t\t\t\t\t\t\twidth, width,\r\n\t\t\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\twidth,\r\n\t\t\t\theight: width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn new InlineIcon(icon);\r\n\t},\r\n\tof(content) {\r\n\t\tif (!isDef(content)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (content instanceof Inline) {\r\n\t\t\treturn content;\r\n\t\t}\r\n\t\treturn new Inline(content);\r\n\t},\r\n\tbuildInlines(icons, inline) {\r\n\t\tconst result = [];\r\n\t\tif (icons) {\r\n\t\t\tresult.push(...(icons.map((icon) => this.iconOf(icon)).filter((e) => !!e)));\r\n\t\t}\r\n\t\tif (Array.isArray(inline) && inline.filter((il) => il instanceof Inline).length) {\r\n\t\t\tresult.push(...(inline.map((il) => this.of(il)).filter((e) => !!e)));\r\n\t\t} else {\r\n\t\t\tconst il = this.of(inline);\r\n\t\t\tif (il) {\r\n\t\t\t\tresult.push(il);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\r\n\tconst style = {\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tof(columnStyle, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(), StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst Header = require('./type/Header');\r\n\tconst SortHeader = require('./type/SortHeader');\r\n\r\n\tconst type = {\r\n\t\tcreate(headerCell) {\r\n\t\t\tif (headerCell.sort) {\r\n\t\t\t\treturn new SortHeader(headerCell);\r\n\t\t\t}\r\n\t\t\treturn new Header(headerCell);\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\r\n\tclass BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tthis._headerCell = headerCell;\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\t\t\t//\r\n\t\t\tthis.drawInternal(\r\n\t\t\t\t\tcellValue,\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t\tstyleContents.of(style, this.StyleClass),\r\n\t\t\t\t\thelper,\r\n\t\t\t\t\tgrid,\r\n\t\t\t\t\tinfo\r\n\t\t\t);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseHeader;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\r\n\tclass Header extends BaseHeader {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t});\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Header;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tMOUSEMOVE_CELL,\r\n\t}} = require('../../core/DrawGrid');\r\n\r\n\tclass SortHeader extends BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tsuper(headerCell);\r\n\t\t\tthis._sort = headerCell.sort;\r\n\t\t\tthis._range = headerCell.range;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\tcolor,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tfont,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst state = grid.sortState;\r\n\t\t\tlet order = undefined;\r\n\t\t\tif (this._range.isCellInRange(state.col, this._range.startRow)) {\r\n\t\t\t\torder = state.order;\r\n\t\t\t}\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tconst arrowSize = ctx.measureText('').width * 1.2;\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons: [{\r\n\t\t\t\t\tname: isDef(order) ? (order === 'asc' ? 'arrow_downward' : 'arrow_upward') : null,\r\n\t\t\t\t\twidth: arrowSize,\r\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.38)',\r\n\t\t\t\t}],\r\n\t\t\t});\r\n\t\t}\r\n\t\t_executeSort(newState, grid) {\r\n\t\t\tif (typeof this._sort === 'function') {\r\n\t\t\t\tthis._sort(newState.order, newState.col, grid);\r\n\t\t\t} else {\r\n\t\t\t\tgrid.dataSource.sort(grid.getField(newState.col), newState.order);\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst state = grid.sortState;\r\n\t\t\t\t\tlet newState;\r\n\t\t\t\t\tif (this._range.isCellInRange(state.col, e.row)) {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: state.order === 'asc' ? 'desc' : 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.sortState = newState;\r\n\t\t\t\t\tthis._executeSort(newState, grid);\r\n\t\t\t\t\tgrid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n\t\t\t\t}),\r\n\t\t\t\t// mouse move\r\n\t\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}),\r\n\t\t\t\t//MOUSEENTER'col-resize'move\r\n\t\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t\t}),\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = SortHeader;\r\n}","/*eslint-disable camelcase*/\r\n'use strict';\r\n\r\nconst {extend} = require('./internal/utils');\r\nconst plugins = require('./plugins/icons');\r\nconst builtins = {\r\n\tget arrow_upward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg');\r\n\t},\r\n\tget arrow_downward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg');\r\n\t},\r\n\tget edit() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/image/svg/production/ic_edit_48px.svg');\r\n\t},\r\n\tget add() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/content/svg/production/ic_add_48px.svg');\r\n\t},\r\n\tget star() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg');\r\n\t},\r\n\tget star_border() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg');\r\n\t},\r\n\tget star_half() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg');\r\n\t},\r\n};\r\n\r\nmodule.exports = {\r\n\tget() {\r\n\t\treturn extend(builtins, plugins);\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst {obj: {each}} = require('./utils');\r\n\tlet nextId = 1;\r\n\r\n\tclass EventHandler {\r\n\t\tconstructor() {\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\ton(target, type, listener, ...options) {\r\n\t\t\tif (target.addEventListener) {\r\n\t\t\t\ttarget.addEventListener(type, listener, ...options);\r\n\t\t\t}\r\n\t\t\tconst obj = {\r\n\t\t\t\ttarget, type, listener, options\r\n\t\t\t};\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis._listeners[id] = obj;\r\n\t\t\treturn id;\r\n\t\t}\r\n\t\ttryWithOffEvents(target, type, call) {\r\n\t\t\tconst list = [];\r\n\t\t\ttry {\r\n\t\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlist.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcall();\r\n\t\t\t} finally {\r\n\t\t\t\tlist.forEach((obj) => {\r\n\t\t\t\t\tif (obj.target.addEventListener) {\r\n\t\t\t\t\t\tobj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\toff(id) {\r\n\t\t\tif (!id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst obj = this._listeners[id];\r\n\t\t\tif (!obj) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete this._listeners[id];\r\n\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfire(target, type, ...args) {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tobj.listener.call(obj.target, ...args);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListener(target, type) {\r\n\t\t\tlet result = false;\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tclear() {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis.clear();\r\n\t\t\tthis._listeners = null;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventHandler;\r\n}","'use strict';\r\n\r\nclass LRUCache {\r\n\tconstructor(cacheSize) {\r\n\t\tthis._list = [];\r\n\t\tthis._map = {};\r\n\t\tthis._cacheSize = cacheSize || 50;\r\n\t}\r\n\tget(key) {\r\n\t\tconst val = this._map[key];\r\n\t\tif (val) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t\tthis._list.push(key);\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\tput(key, value) {\r\n\t\tif (this._map[key]) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t}\r\n\t\tthis._map[key] = value;\r\n\t\tthis._list.push(key);\r\n\t\tif (this._list.length > this._cacheSize) {\r\n\t\t\tconst remKey = this._list.shift();\r\n\t\t\tdelete this._map[remKey];\r\n\t\t}\r\n\t}\r\n}\r\nmodule.exports = LRUCache;","'use strict';\r\n{\r\n\tconst indexFirst = (ary, elm) => {\r\n\t\tlet low = 0;\r\n\t\tlet high = ary.length - 1;\r\n\t\twhile (low <= high) {\r\n\t\t\tconst i = Math.floor((low + high) / 2);\r\n\t\t\tif (ary[i] === elm) {\r\n\t\t\t\treturn i;\r\n\t\t\t} else if (ary[i] > elm) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t} else {\r\n\t\t\t\tlow = i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn high < 0 ? 0 : high;\r\n\t};\r\n\r\n\r\n\tclass NumberMap {\r\n\t\tconstructor() {\r\n\t\t\tthis._keys = [];\r\n\t\t\tthis._vals = {};\r\n\t\t\tthis._sorted = false;\r\n\t\t}\r\n\t\tput(key, value) {\r\n\t\t\tif (!(key in this._vals)) {\r\n\t\t\t\tthis._keys.push(key);\r\n\t\t\t\tthis._sorted = false;\r\n\t\t\t}\r\n\t\t\tthis._vals[key] = value;\r\n\t\t}\r\n\t\tget(key) {\r\n\t\t\treturn this._vals[key];\r\n\t\t}\r\n\t\teachAll(fn) {\r\n\t\t\tthis._keys.forEach((key) => {\r\n\t\t\t\tfn(this.get(key), key);\r\n\t\t\t});\r\n\t\t}\r\n\t\teach(keyFrom, keyTo, fn) {\r\n\t\t\tconst {_keys: keys} = this;\r\n\t\t\tconst {length} = keys;\r\n\t\t\tif (!this._sorted) {\r\n\t\t\t\tkeys.sort((a, b) => {\r\n\t\t\t\t\tif (a < b) { return -1; }\r\n\t\t\t\t\tif (a > b) { return 1; }\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tthis._sorted = true;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n\t\t\t\tconst key = keys[i];\r\n\t\t\t\tif (keyFrom <= key && key <= keyTo) {\r\n\t\t\t\t\tfn(this.get(key), key);\r\n\t\t\t\t} else if (keyTo < key) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberMap;\r\n}","'use strict';\r\n{\r\n\tclass Rect {\r\n\t\tconstructor(left, top, width, height) {\r\n\t\t\tthis._left = left;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t}\r\n\t\tstatic bounds(left, top, right, bottom) {\r\n\t\t\treturn new Rect(left, top, right - left, bottom - top);\r\n\t\t}\r\n\t\tstatic max(rect1, rect2) {\r\n\t\t\treturn Rect.bounds(\r\n\t\t\t\t\tMath.min(rect1.left, rect2.left),\r\n\t\t\t\t\tMath.min(rect1.top, rect2.top),\r\n\t\t\t\t\tMath.max(rect1.right, rect2.right),\r\n\t\t\t\t\tMath.max(rect1.bottom, rect2.bottom)\r\n\t\t\t);\r\n\t\t}\r\n\t\tget left() {\r\n\t\t\treturn this._left;\r\n\t\t}\r\n\t\tset left(left) {\r\n\t\t\tconst {right} = this;\r\n\t\t\tthis._left = left;\r\n\t\t\tthis.right = right;\r\n\t\t}\r\n\t\tget top() {\r\n\t\t\treturn this._top;\r\n\t\t}\r\n\t\tset top(top) {\r\n\t\t\tconst {bottom} = this;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis.bottom = bottom;\r\n\t\t}\r\n\t\tget width() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset width(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\tget height() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset height(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tget right() {\r\n\t\t\treturn this._right !== undefined ? this._right : (this._right = this.left + this.width);\r\n\t\t}\r\n\t\tset right(right) {\r\n\t\t\tthis._right = right;\r\n\t\t\tthis.width = right - this.left;\r\n\t\t}\r\n\t\tget bottom() {\r\n\t\t\treturn this._bottom !== undefined ? this._bottom : (this._bottom = this.top + this.height);\r\n\t\t}\r\n\t\tset bottom(bottom) {\r\n\t\t\tthis._bottom = bottom;\r\n\t\t\tthis.height = bottom - this.top;\r\n\t\t}\r\n\t\toffsetLeft(offset) {\r\n\t\t\tthis._left += offset;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\toffsetTop(offset) {\r\n\t\t\tthis._top += offset;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tcopy() {\r\n\t\t\treturn new Rect(this.left, this.top, this.width, this.height);\r\n\t\t}\r\n\t\tintersection(rect) {\r\n\t\t\tconst x0 = Math.max(this.left, rect.left);\r\n\t\t\tconst x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n\t\t\tif (x0 <= x1) {\r\n\t\t\t\tconst y0 = Math.max(this.top, rect.top);\r\n\t\t\t\tconst y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n\t\t\t\tif (y0 <= y1) {\r\n\t\t\t\t\treturn Rect.bounds(x0, y0, x1, y1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tcontains(another) {\r\n\t\t\treturn this.left <= another.left &&\r\n\t\t\t\t\tthis.left + this.width >= another.left + another.width &&\r\n\t\t\t\t\tthis.top <= another.top &&\r\n\t\t\t\t\tthis.top + this.height >= another.top + another.height;\r\n\t\t}\r\n\t\tinPoint(x, y) {\r\n\t\t\treturn this.left <= x &&\r\n\t\t\t\t\tthis.left + this.width >= x &&\r\n\t\t\t\t\tthis.top <= y &&\r\n\t\t\t\t\tthis.top + this.height >= y;\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Rect;\r\n}","'use strict';\r\n{\r\n\tconst EventHandler = require('./EventHandler');\r\n\tconst style = require('./style');\r\n\tconst {browser} = require('./utils');\r\n\t\r\n\tconst MAX_SCROLL = browser.heightLimit - 1000;\r\n\r\n\tfunction _update(scrollable) {\r\n\t\tlet domHeight;\r\n\t\tif (scrollable._height > MAX_SCROLL) {\r\n\t\t\tconst sbSize = style.getScrollBarSize();\r\n\t\t\tconst offsetHeight = scrollable._scrollable.offsetHeight;\r\n\t\t\tconst vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n\t\t\tconst rScrollRange = scrollable._height - offsetHeight + sbSize;\r\n\t\t\tscrollable._p = vScrollRange / rScrollRange;\r\n\t\t\tdomHeight = MAX_SCROLL;\r\n\t\t} else {\r\n\t\t\tscrollable._p = 1;\r\n\t\t\tdomHeight = scrollable._height;\r\n\t\t}\r\n\r\n\t\tscrollable._endPointElement.style.top = domHeight.toFixed() + 'px';\r\n\t\tscrollable._endPointElement.style.left = scrollable._width.toFixed() + 'px';\r\n\t\t\r\n\t}\r\n\r\n\tclass Scrollable {\r\n\t\tconstructor() {\r\n\t\t\tthis._handler = new EventHandler();\r\n\r\n\t\t\tthis._scrollable = document.createElement('div');\r\n\t\t\tthis._scrollable.classList.add('grid-scrollable');\r\n\t\t\tthis._height = 0;\r\n\t\t\tthis._width = 0;\r\n\r\n\t\t\tthis._endPointElement = document.createElement('div');\r\n\t\t\tthis._endPointElement.classList.add('grid-scroll-end-point');\r\n\t\t\t_update(this);\r\n\t\t\tthis._scrollable.appendChild(this._endPointElement);\r\n\r\n\t\t\t// const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n\t\t\t// this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n\t\t\t// const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n\t\t\t// const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n\t\t\t// this.scrollTop += delta < 0 ? point : -point;\r\n\t\t\t// });\r\n\t\t}\r\n\t\tcalcTop(top) {\r\n\t\t\tconst relativeTop = top - this.scrollTop;\r\n\t\t\treturn this._scrollable.scrollTop + relativeTop;\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this._scrollable;\r\n\t\t}\r\n\t\tsetScrollSize(width, height) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollWidth() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset scrollWidth(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollHeight() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset scrollHeight(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollLeft() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollLeft);\r\n\t\t}\r\n\t\tset scrollLeft(scrollLeft) {\r\n\t\t\tthis._scrollable.scrollLeft = scrollLeft;\r\n\t\t}\r\n\t\tget scrollTop() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollTop / this._p);\r\n\t\t}\r\n\t\tset scrollTop(scrollTop) {\r\n\t\t\tthis._scrollable.scrollTop = scrollTop * this._p;\r\n\t\t}\r\n\t\tonScroll(fn) {\r\n\t\t\tthis._handler.on(this._scrollable, 'scroll', fn);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = Scrollable;\r\n}","'use strict';\r\n{\r\n\tfunction cubicBezier(x2, y2, x3, y3) {\r\n\t\tlet step;\r\n\t\tconst err = 0.0001;\r\n\r\n\t\tx2 *= 3;\r\n\t\ty2 *= 3;\r\n\t\tx3 *= 3;\r\n\t\ty3 *= 3;\r\n\t\t\t\r\n\t\treturn function(t) {\r\n\t\t\tlet p,\r\n\t\t\t\ta,\r\n\t\t\t\tb,\r\n\t\t\t\tc,\r\n\t\t\t\td,\r\n\t\t\t\tx,\r\n\t\t\t\ts;\r\n\t\t\tif (t < 0 || 1 < t) {\r\n\t\t\t\tthrow new Error(t);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tp = step || t;\r\n\r\n\t\t\tdo {\r\n\t\t\t\ta = 1 - p;\r\n\t\t\t\tb = a * a;\r\n\t\t\t\tc = p * p;\r\n\t\t\t\td = c * p;\r\n\t\t\t\t\t\r\n\t\t\t\tx = x2 * b * p + x3 * a * c + d;\r\n\t\t\t\ts = t - x;\r\n\t\t\t\tp += s * 0.5;\r\n\t\t\t} while (err < Math.abs(s));\r\n\r\n\t\t\tstep = p;\r\n\t\t\treturn\ty2 * b * p + y3 * a * c + d;\r\n\t\t};\r\n\t}\r\n\tconst EASINGS = {\r\n\t\tlinear(p) {\r\n\t\t\treturn p;\r\n\t\t},\r\n\t\teaseIn: cubicBezier(0.420, 0.000, 1.000, 1.000),\r\n\t\teaseOut: cubicBezier(0.000, 0.000, 0.580, 1.000),\r\n\t\teaseInOut: cubicBezier(0.420, 0.000, 0.580, 1.000),\r\n\t};\r\n\r\n\tconst raf = window.requestAnimationFrame || setTimeout;\r\n\t\r\n\tfunction now() {\r\n\t\treturn Date.now();\r\n\t}\r\n\t/**\r\n\t * <pre>\r\n\t * Animates.\r\n\t * </pre>\r\n\t * @function\r\n\t * @param {number} duration animation time.\r\n\t * @param {function} step\r\n\t * @param {function|string} easing\r\n\t * @returns {object} Deferred object.\r\n\t */\r\n\tmodule.exports = (duration, step, easing) => {\r\n\t\tconst startedAt = now();\r\n\r\n\t\tif (!easing) {\r\n\t\t\teasing = EASINGS.easeInOut;\r\n\t\t} else if (typeof easing === 'string') {\r\n\t\t\teasing = EASINGS[easing];\r\n\t\t}\r\n\r\n\t\tlet canceledFlg = false;\r\n\t\tconst createAnim = (resolve, reject) => {\r\n\t\t\tconst anim = () => {\r\n\t\t\t\tconst point = now() - startedAt;\r\n\t\t\t\tif (canceledFlg) {\r\n\t\t\t\t\t//cancel\r\n\t\t\t\t\tif (reject) { reject(); }\r\n\t\t\t\t} else if (point >= duration) {\r\n\t\t\t\t\t//end\r\n\t\t\t\t\tstep(1);\r\n\t\t\t\t\tif (resolve) { resolve(); }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstep(easing(point / duration));\r\n\r\n\t\t\t\t\traf(anim, 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn anim;\r\n\t\t};\r\n\t\tconst cancel = () => {\r\n\t\t\tcanceledFlg = true;\r\n\t\t};\r\n\t\tif (window.Promise) {\r\n\t\t\tconst result = new window.Promise((resolve, reject) => {\r\n\t\t\t\tconst anim = createAnim(resolve, reject);\r\n\t\t\t\tstep(0);\r\n\t\t\t\tanim();\r\n\t\t\t});\r\n\t\t\tresult.cancel = cancel;\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tconst anim = createAnim(() => {}, () => {});\r\n\t\t\tstep(0);\r\n\t\t\tanim();\r\n\t\t\treturn {\r\n\t\t\t\tcancel,\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n\r\nfunction parse(calcStr) {\r\n\tfunction replacer(match, num, unit) {\r\n\t\tswitch (unit) {\r\n\t\tcase '%':\r\n\t\t\treturn `(${num} * this.full / 100)`;\r\n\t\tcase 'em':\r\n\t\t\treturn `(${num} * this.em)`;\r\n\t\tcase 'px':\r\n\t\t\treturn `(${num})`;\r\n\t\tdefault:\r\n\t\t\tthrow new Error('calc error');\r\n\t\t}\r\n\t}\r\n\tconst script = calcStr.replace(/^calc\\((.*)\\)$/, '$1').\r\n\t\treplace(/(\\d+)([A-Za-z%]+)/g, replacer).\r\n\t\treplace(/(\\d*\\.\\d+)([A-Za-z%]+)/g, replacer);\r\n\treturn {\r\n\t\teval(context) {\r\n\t\t\treturn (() => {\r\n\t\t\t\tfunction calc(v) { // eslint-disable-line no-unused-vars\r\n\t\t\t\t\treturn v;\r\n\t\t\t\t}\r\n\t\t\t\treturn eval(script);// eslint-disable-line no-eval\r\n\t\t\t}).call(context);\r\n\t\t}\r\n\t};\r\n}\r\nfunction toPx(value, context) {\r\n\tif (/^calc\\(.*\\)$/.test(value)) {\r\n\t\treturn parse(value).eval(context);\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*%$/.test(value)) {\r\n\t\treturn context.full * value.substr(0, value.length - 1) / 100;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*px$/.test(value)) {\r\n\t\treturn value.substr(0, value.length - 2) - 0;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*em$/.test(value)) {\r\n\t\treturn context.em * (value.substr(0, value.length - 2) - 0);\r\n\t}\r\n\treturn value - 0;\r\n}\r\n\r\nmodule.exports = {\r\n\tparse,\r\n\ttoPx(value, context) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\treturn toPx(value.trim(), context);\r\n\t\t}\r\n\t\treturn value - 0;\r\n\t}\r\n};","'use strict';\r\n{\r\n\r\n\tfunction calcBasePosition(ctx, rect,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t\ttop: paddingTop = 0,\r\n\t\t\t\t\tbottom: paddingBottom = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\t// const textAlign = ctx.textAlign || 'left';\r\n\t\t// const textBaseline = ctx.textBaseline || 'middle';\r\n\t\t// ctx.textAlign = textAlign;\r\n\t\t// ctx.textBaseline = textBaseline;\r\n\r\n\t\t// let x = rect.left + offset + paddingLeft;\r\n\t\t// if (textAlign === 'right' || textAlign === 'end') {\r\n\t\t// \tx = rect.right - offset - paddingRight;\r\n\t\t// } else if (textAlign === 'center') {\r\n\t\t// \tx = rect.left + ((rect.width + paddingLeft - paddingRight) / 2);\r\n\t\t// }\r\n\t\t// let y = rect.top + offset;\r\n\t\t// if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t// \ty = rect.bottom - offset;\r\n\t\t// } else if (textBaseline === 'middle') {\r\n\t\t// \ty = rect.top + (rect.height / 2);\r\n\t\t// }\r\n\t\t// return {x, y};\r\n\t\treturn calcStartPosition(ctx, rect, 0, 0, {\r\n\t\t\toffset,\r\n\t\t\tpadding: {\r\n\t\t\t\tleft: paddingLeft,\r\n\t\t\t\tright: paddingRight,\r\n\t\t\t\ttop: paddingTop,\r\n\t\t\t\tbottom: paddingBottom,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction calcStartPosition(ctx, rect, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t\ttop: paddingTop = 0,\r\n\t\t\t\t\tbottom: paddingBottom = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\tconst textAlign = ctx.textAlign || 'left';\r\n\t\tconst textBaseline = ctx.textBaseline || 'middle';\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\r\n\t\tlet x = rect.left + offset + paddingLeft;\r\n\t\tif (textAlign === 'right' || textAlign === 'end') {\r\n\t\t\tx = rect.right - width - offset - paddingRight;\r\n\t\t} else if (textAlign === 'center') {\r\n\t\t\tx = rect.left + ((rect.width - width + paddingLeft - paddingRight) / 2);\r\n\t\t}\r\n\t\tlet y = rect.top + offset + paddingTop;\r\n\t\tif (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t\ty = rect.bottom - height - offset - paddingBottom;\r\n\t\t} else if (textBaseline === 'middle') {\r\n\t\t\ty = rect.top + ((rect.height - height + paddingTop - paddingBottom) / 2);\r\n\t\t}\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcalcBasePosition,\r\n\t\tcalcStartPosition,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst rgbMap = {};\r\n\tfunction styleColorToRGB(color) {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.color = color;\r\n\t\tstyle.position = 'fixed';\r\n\t\tstyle.height = '1px';\r\n\t\tstyle.width = '1px';\r\n\t\tstyle.opacity = 0;\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {color: styleColor} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn colorToRGB0(styleColor);\r\n\t}\r\n\r\n\tfunction hexToNum(hex) {\r\n\t\treturn parseInt(hex, 16);\r\n\t}\r\n\tfunction createRGB(r, g, b, a = 1) {\r\n\t\treturn {r, g, b, a};\r\n\t}\r\n\tfunction tripleHexToRGB({1: r, 2: g, 3: b}) {\r\n\t\treturn createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n\t}\r\n\tfunction sextupleHexToRGB({1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2}) {\r\n\t\treturn createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n\t}\r\n\t\r\n\tfunction testRGB({r, g, b, a}) {\r\n\t\treturn 0 <= r && r <= 255 &&\r\n\t\t0 <= g && g <= 255 &&\r\n\t\t0 <= b && b <= 255 &&\r\n\t\t0 <= a && a <= 1;\r\n\t}\r\n\tfunction rateToByte(r) {\r\n\t\treturn Math.ceil(r * 255 / 100);\r\n\t}\r\n\tfunction colorToRGB0(color) {\r\n\t\tif (color.match(/^#[0-9a-f]{3}$/i)) {\r\n\t\t\treturn tripleHexToRGB(color);\r\n\t\t}\r\n\t\tif (color.match(/^#[0-9a-f]{6}$/i)) {\r\n\t\t\treturn sextupleHexToRGB(color);\r\n\t\t}\r\n\t\tlet ret = color.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0, ret[4] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]));\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]), ret[7] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction colorToRGB(color) {\r\n\t\tif (typeof color !== 'string') {\r\n\t\t\treturn createRGB(0, 0, 0, 0);\r\n\t\t}\r\n\t\tcolor = color.toLowerCase().trim();\r\n\t\tif (rgbMap[color]) {\r\n\t\t\treturn rgbMap[color];\r\n\t\t}\r\n\t\treturn colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcolorToRGB\r\n\t};\r\n}","'use strict';\r\n\r\nmodule.exports = {\r\n\t'Array_isArray': window.Array.isArray\r\n};","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nfunction createElement(tagName, {classList, text, html} = {}) {\r\n\tconst element = document.createElement(tagName);\r\n\tif (classList) {\r\n\t\tif (Array.isArray(classList)) {\r\n\t\t\telement.classList.add(...classList);\r\n\t\t} else {\r\n\t\t\telement.classList.add(classList);\r\n\t\t}\r\n\t}\r\n\tif (text) {\r\n\t\telement.textContent = text;\r\n\t} else if (html) {\r\n\t\telement.innerHTML = html;\r\n\t}\r\n\treturn element;\r\n}\r\n\r\nfunction empty(dom) {\r\n\tlet c;\r\n\twhile ((c = dom.firstChild)) {\r\n\t\tdom.removeChild(c);\r\n\t}\r\n}\r\nfunction isNode(arg) {\r\n\treturn !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n\tif (isNode(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\tconst dom = createElement('div', {html: arg});\r\n\treturn Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n\tif ((window.jQuery && arg instanceof window.jQuery)) {\r\n\t\treturn Array.prototype.map.call(arg, (a) => a);\r\n\t}\r\n\tif (Array.isArray(arg)) {\r\n\t\treturn arg.map(toNode);\r\n\t}\r\n\treturn [toNode(arg)];\r\n}\r\n\r\nfunction appendHtml(dom, inner) {\r\n\ttoNodeList(inner).forEach((node) => {\r\n\t\tdom.appendChild(node);\r\n\t});\r\n}\r\n\r\nfunction disableFocus(el) {\r\n\tel.dataset.disableBeforeTabIndex = el.tabIndex;\r\n\tel.tabIndex = -1;\r\n\tArray.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nfunction enableFocus(el) {\r\n\tif ('disableBeforeTabIndex' in el.dataset) {\r\n\t\tel.tabIndex = el.dataset.disableBeforeTabIndex;\r\n\t}\r\n\tArray.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\n\r\nfunction isFocusable(el) {\r\n\treturn isDef(el.tabIndex) && el.tabIndex > -1;\r\n}\r\nfunction findPrevSiblingFocusable(el) {\r\n\tlet n = el.previousSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.previousSibling;\r\n\t}\r\n\treturn n;\r\n}\r\nfunction findNextSiblingFocusable(el) {\r\n\tlet n = el.nextSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.nextSibling;\r\n\t}\r\n\treturn n;\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateElement,\r\n\tempty,\r\n\tisNode,\r\n\ttoNode,\r\n\ttoNodeList,\r\n\tappendHtml,\r\n\tdisableFocus,\r\n\tenableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n};","'use strict';\r\n{\r\n\tconst loads = {};\r\n\tconst legacy = !document.fonts;\r\n\tconst load = legacy ? function(font, testStr, callback) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\trequire('./legacy/fontwatch/FontWatchRunner').load(font, testStr, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t}, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t} : function(font, testStr, callback) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdocument.fonts.ready.then(() => {\r\n\t\t\tloads.all = true;\r\n\t\t});\r\n\t\tdocument.fonts.load(font).then(() => {\r\n\t\t\tloads[font] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t};\r\n\tconst check = legacy ? function(font, testStr) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tload(font, testStr, () => {});\r\n\t\treturn false;\r\n\t} : function(font, testStr) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!document.fonts.check(font)) {\r\n\t\t\tload(font, testStr, () => {});\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t\r\n\tmodule.exports = {\r\n\t\tcheck,\r\n\t\tload\r\n\t};\r\n}","'use strict';\r\n\r\nconst EventHandler = require('./EventHandler');\r\nconst handler = new EventHandler();\r\n\r\nlet ratio;\r\nfunction setRatio() {\r\n\tratio = Math.ceil(window.devicePixelRatio || 1);\r\n\tif (ratio > 1 && (ratio % 2) !== 0) {\r\n\t\tratio += 1;\r\n\t}\r\n}\r\nsetRatio();\r\nhandler.on(window, 'resize', setRatio);\r\n\r\nmodule.exports = {\r\n\ttransform(canvas) {\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\tconst getAttribute = canvas.getAttribute;\r\n\t\tcanvas.getAttribute = function(name, ...args) {\r\n\t\t\tlet result = getAttribute.call(this, name, ...args);\r\n\t\t\tif (name === 'width' || name === 'height') {\r\n\t\t\t\tresult /= ratio;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t\tconst setAttribute = canvas.setAttribute;\r\n\t\tcanvas.setAttribute = function(name, val, ...args) {\r\n\t\t\tconst wh = name === 'width' || name === 'height';\r\n\t\t\tif (wh) {\r\n\t\t\t\tval *= ratio;\r\n\t\t\t}\r\n\t\t\tconst result = setAttribute.call(this, name, val, ...args);\r\n\t\t\tif (wh) {\r\n\t\t\t\tctx.scale(ratio, ratio);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tObject.defineProperty(canvas, 'width', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('width');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('width', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tObject.defineProperty(canvas, 'height', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('height');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('height', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tconst drawImage = ctx.drawImage;\r\n\t\tctx.drawImage = function(img, ...args) {\r\n\t\t\tif (img !== canvas || ratio === 1) {\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t}\r\n\t\t\tthis.save();\r\n\t\t\ttry {\r\n\t\t\t\tthis.scale(1 / ratio, 1 / ratio);\r\n\t\t\t\tif (args.length > 4) {\r\n\t\t\t\t\targs[4] = args[4] * ratio;\r\n\t\t\t\t\targs[5] = args[5] * ratio;\r\n\t\t\t\t} else {\r\n\t\t\t\t\targs[0] = args[0] * ratio;\r\n\t\t\t\t\targs[1] = args[1] * ratio;\r\n\t\t\t\t}\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn canvas;\r\n\t}\r\n};","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nconst ICON_PROP_KEYS = [\r\n\t'content',\r\n\t'font',\r\n\t'color',\r\n\t'className',\r\n\t'isLiga',\r\n\t'width',\r\n\t'src',\r\n\t'svg',\r\n\t'name',\r\n\t'path'\r\n];\r\n\r\nfunction quote(name) {\r\n\tconst quoted = [];\r\n\tconst split = name.split(/,\\s*/);\r\n\tfor (let i = 0; i < split.length; i++) {\r\n\t\tconst part = split[i].replace(/['\"]/g, '');\r\n\t\tif (part.indexOf(' ') === -1 && !(/^\\d/.test(part))) {\r\n\t\t\tquoted.push(part);\r\n\t\t} else {\r\n\t\t\tquoted.push('\\'' + part + '\\'');\r\n\t\t}\r\n\t}\r\n\treturn quoted.join(',');\r\n}\r\n\r\nconst doms = {};\r\nconst props = {};\r\n\r\nfunction getIconProps(tagName, className) {\r\n\tconst tagProps = props[tagName] || (props[tagName] = {});\r\n\tif (tagProps[className]) {\r\n\t\treturn tagProps[className];\r\n\t}\r\n\tconst dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n\tdom.className = className;\r\n\tdocument.body.appendChild(dom);\r\n\ttry {\r\n\t\tconst beforeStyle = document.defaultView.getComputedStyle(dom, '::before');\r\n\t\tlet content = beforeStyle.getPropertyValue('content');\r\n\t\tif (content.length >= 3 && (content[0] === '\"' || content[0] === '\\'')) {\r\n\t\t\tif (content[0] === content[content.length - 1]) {\r\n\t\t\t\tcontent = content.substr(1, content.length - 2);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet font = beforeStyle.getPropertyValue('font');\r\n\t\tif (!font) {\r\n\t\t\tfont = beforeStyle.getPropertyValue('font-style') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-variant') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-weight') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-size') + '/' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('line-height') + ' ' +\r\n\t\t\t\tquote(beforeStyle.getPropertyValue('font-family'));\r\n\t\t}\r\n\t\tconst color = beforeStyle.getPropertyValue('color');\r\n\t\tconst width = dom.clientWidth;\r\n\t\tconst isLiga = (beforeStyle.getPropertyValue('font-feature-settings') || '').indexOf('liga') > -1;\r\n\t\t\r\n\t\treturn (tagProps[className] = {\r\n\t\t\tcontent,\r\n\t\t\tfont,\r\n\t\t\tcolor,\r\n\t\t\twidth,\r\n\t\t\tisLiga,\r\n\t\t});\r\n\t} finally {\r\n\t\tdocument.body.removeChild(dom);\r\n\t}\r\n}\r\n\r\nfunction toPropArray(prop, count) {\r\n\tconst result = [];\r\n\tif (Array.isArray(prop)) {\r\n\t\tresult.push(...prop);\r\n\t\tfor (let i = prop.length; i < count; i++) {\r\n\t\t\tresult.push(null);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\tresult.push(prop);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction toSimpleArray(iconProps) {\r\n\tif (!iconProps) {\r\n\t\treturn iconProps;\r\n\t} else if (Array.isArray(iconProps)) {\r\n\t\treturn iconProps;\r\n\t}\r\n\r\n\tconst workData = {};\r\n\r\n\tlet count = 0;\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tif (iconProps[k]) {\r\n\t\t\tif (Array.isArray(iconProps[k])) {\r\n\t\t\t\tcount = Math.max(count, iconProps[k].length);\r\n\t\t\t} else {\r\n\t\t\t\tcount = Math.max(count, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tworkData[k] = toPropArray(iconProps[k], count);\r\n\t});\r\n\r\n\tconst result = [];\r\n\tfor (let i = 0; i < count; i++) {\r\n\t\tconst data = {};\r\n\t\tICON_PROP_KEYS.forEach((k) => {\r\n\t\t\tdata[k] = workData[k][i];\r\n\t\t});\r\n\t\tresult.push(data);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction normarize(iconProps) {\r\n\tconst data = {};\r\n\tfor (const k in iconProps) {\r\n\t\tif (k === 'className') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tdata[k] = iconProps[k];\r\n\t}\r\n\tif (iconProps.className) {\r\n\t\tconst prop = getIconProps(iconProps.tagName || 'i', iconProps.className);\r\n\t\tfor (const k in prop) {\r\n\t\t\tif (!isDef(iconProps[k])) {\r\n\t\t\t\tdata[k] = prop[k];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn data;\r\n}\r\n\r\nmodule.exports = {\r\n\ttoNormarizeArray(iconProps) {\r\n\t\tconst icons = toSimpleArray(iconProps);\r\n\t\tif (!icons) {\r\n\t\t\treturn icons;\r\n\t\t}\r\n\t\treturn icons.map((icon) => normarize(icon));\r\n\t},\r\n\tget iconPropKeys() {\r\n\t\treturn ICON_PROP_KEYS;\r\n\t},\r\n\tgetIconProps,\r\n};\r\n\r\n\r\n","'use strict';\r\n\r\nconst {then} = require('./utils');\r\nconst LRUCache = require('./LRUCache');\r\n\r\nconst allCache = {};\r\n\r\nfunction isDataUrl(url) {\r\n\treturn url.search(/^(data:)/) !== -1;\r\n}\r\n\r\nfunction loadImage(src) {\r\n\tif (!window.Promise) {\r\n\t\tconsole.error('Promise is not loaded. load Promise before this process.');\r\n\t\treturn {\r\n\t\t\tthen() {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst img = new Image();\r\n\tconst result = new window.Promise((resolve) => {\r\n\t\timg.onload = () => {\r\n\t\t\tresolve(img);\r\n\t\t};\r\n\t});\r\n\timg.onerror = (e) => {\r\n\t\tconst url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\r\n\t\tconsole.warn(`cannot load: ${url}`);\r\n\t\tthrow new Error(`IMAGE LOAD ERROR: ${url}`);\r\n\t};\r\n\timg.src = isDataUrl(src) ? src : `${src}?${Date.now()}`;\r\n\treturn result;\r\n}\r\n\r\nfunction getCacheOrLoad0(cache, src) {\r\n\treturn then(src, (src) => {\r\n\t\tconst c = cache.get(src);\r\n\t\tif (c) {\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconst result = loadImage(src).then((img) => {\r\n\t\t\tcache.put(src, img);\r\n\t\t\treturn img;\r\n\t\t});\r\n\t\tcache.put(src, result);\r\n\t\treturn result;\r\n\t});\r\n}\r\n\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n\tconst cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache(cacheSize));\r\n\treturn getCacheOrLoad0(cache, src);\r\n}\r\n\r\nmodule.exports = {\r\n\tloadImage,\r\n\tgetCacheOrLoad,\r\n};\r\n","'use strict';\r\n\r\nconst PathCommandsParser = require('./PathCommandsParser');\r\nconst parser = new PathCommandsParser();\r\n\r\nclass Path2D {\r\n\tconstructor(arg) {\r\n\t\tthis._ops = [];\r\n\t\t[\r\n\t\t\t'closePath',\r\n\t\t\t'moveTo',\r\n\t\t\t'lineTo',\r\n\t\t\t'bezierCurveTo',\r\n\t\t\t'quadraticCurveTo',\r\n\t\t\t'arc',\r\n\t\t\t'rect'\r\n\t\t].forEach((name) => {\r\n\t\t\tthis[name] = (...args) => {\r\n\t\t\t\tthis._ops.push({op: name, args});\r\n\t\t\t};\r\n\t\t});\r\n\t\tif (arg === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (typeof arg === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tthis._ops = parser.parse(arg);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t} else if (arg.hasOwnProperty('_ops')) {\r\n\t\t\tthis._ops = [...this._ops];\r\n\t\t} else {\r\n\t\t\tthrow new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst CanvasRenderingContext2D = window.CanvasRenderingContext2D;\r\n\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n\r\nCanvasRenderingContext2D.prototype.fill = function(...args) {\r\n\tif (args[0] instanceof Path2D) {\r\n\t\tconst path = args[0];\r\n\t\tthis.beginPath();\r\n\t\tpath._ops.forEach((op) => {\r\n\t\t\tthis[op.op](...op.args);\r\n\t\t});\r\n\t\toriginalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n\t} else {\r\n\t\toriginalFill.apply(this, args);\r\n\t}\r\n};\r\n\r\nmodule.exports = Path2D;\r\n","'use strict';\r\n\r\nfunction mag(v) {\r\n\treturn Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\n    \r\nfunction dot(u, v) {\r\n\treturn (u[0] * v[0] + u[1] * v[1]);\r\n}\r\n    \r\nfunction ratio(u, v) {\r\n\treturn dot(u, v) / (mag(u) * mag(v));\r\n}\r\n\r\nfunction clamp(value, min, max) {\r\n\treturn Math.min(Math.max(value, min), max);\r\n}\r\n    \r\nfunction angle(u, v) {\r\n\tlet sign = 1.0;\r\n\tif ((u[0] * v[1] - u[1] * v[0]) < 0) {\r\n\t\tsign = -1.0;\r\n\t}\r\n\treturn sign * Math.acos(clamp(ratio(u, v)), -1, 1);\r\n}\r\n    \r\nfunction rotClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction rotCounterClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction midPoint(u, v) {\r\n\treturn [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\n    \r\nfunction meanVec(u, v) {\r\n\treturn [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\n    \r\nfunction pointMul(u, v) {\r\n\treturn [u[0] * v[0], u[1] * v[1]];\r\n}\r\n    \r\nfunction scale(c, v) {\r\n\treturn [c * v[0], c * v[1]];\r\n}\r\n    \r\nfunction sum(u, v) {\r\n\treturn [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n\t// Convert from endpoint to center parametrization, as detailed in:\r\n\t//   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n\tif (rx === 0 || ry === 0) {\r\n\t\tctx.lineTo(x2, x1);\r\n\t\treturn;\r\n\t}\r\n\tphi = phi * (Math.PI / 180.0);\r\n\trx = Math.abs(rx);\r\n\try = Math.abs(ry);\r\n\tconst xPrime = rotClockwise(midPoint(x1, x2), phi); // F.6.5.1\r\n\tconst xPrime2 = pointMul(xPrime, xPrime);\r\n\tlet rx2 = Math.pow(rx, 2);\r\n\tlet ry2 = Math.pow(ry, 2);\r\n    \r\n\tconst lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n\tif (lambda > 1) {\r\n\t\trx *= lambda;\r\n\t\try *= lambda;\r\n\t\trx2 = Math.pow(rx, 2);\r\n\t\try2 = Math.pow(ry, 2);\r\n\t}\r\n\tlet factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n\tif (fA === fS) {\r\n\t\tfactor *= -1.0;\r\n\t}\r\n\tconst cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\r\n\tconst c = sum(rotCounterClockwise(cPrime, phi), meanVec(x1, x2)); // F.6.5.3\r\n\tconst x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\r\n\tconst x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\r\n\tconst theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n\tconst deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n\tconst start = theta;\r\n\tconst end = theta + deltaTheta;\r\n\tctx.save();\r\n\tctx.translate(c[0], c[1]);\r\n\tctx.rotate(phi);\r\n\tctx.scale(rx, ry);\r\n\tctx.arc(0, 0, 1, start, end, 1 - fS);\r\n\tctx.restore();\r\n}\r\n\r\nclass PathCommands {\r\n\tconstructor(ctx) {\r\n\t\tlet lMx;\r\n\t\tlet lMy;\r\n\t\tlet lx = 0;\r\n\t\tlet ly = 0;\r\n\t\tlet reflected;\r\n\t\tlet lastCommand = '';\r\n\t\tfunction makeReflected() {\r\n\t\t\tif ('CcSsQqTt'.indexOf(lastCommand) < 0) {\r\n\t\t\t\treturn {x: lx, y: ly};\r\n\t\t\t}\r\n\t\t\treturn reflected;\r\n\t\t}\r\n\r\n\t\tthis.M = (px, py) => {\r\n\t\t\tctx.moveTo(px, py);\r\n\t\t\tlMx = px;\r\n\t\t\tlMy = py;\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'M';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.m = (px, py) => this.M(px + lx, py + ly);\r\n\t\tthis.L = (px, py) => {\r\n\t\t\tctx.lineTo(px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'L';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.l = (px, py) => this.L(px + lx, py + ly);\r\n\t\tthis.H = (px) => this.L(px, ly);\r\n\t\tthis.h = (px) => this.H(px + lx);\r\n\t\tthis.V = (py) => this.L(lx, py);\r\n\t\tthis.v = (py) => this.V(py + ly);\r\n\t\tthis.Z = () => {\r\n\t\t\tctx.closePath();\r\n\t\t\tlx = lMx;\r\n\t\t\tly = lMy;\r\n\t\t\tlastCommand = 'Z';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.z = () => this.Z();\r\n\t\t//C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n\t\tthis.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n\t\t\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cp2x,\r\n\t\t\t\ty: 2 * py - cp2y,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'C';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(\r\n\t\t\t\tcp1x + lx, cp1y + ly,\r\n\t\t\t\tcp2x + lx, cp2y + ly,\r\n\t\t\t\tpx + lx, py + ly\r\n\t\t);\r\n\t\t//S x2 y2, x y (or s dx2 dy2, dx dy)\r\n\t\tthis.S = (cpx, cpy, px, py) => {\r\n\t\t\tconst {x: cp1x, y: cp1y} = makeReflected(lastCommand);\r\n\t\t\treturn this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n\t\tthis.Q = (cpx, cpy, px, py) => {\r\n\t\t\tctx.quadraticCurveTo(cpx, cpy, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cpx,\r\n\t\t\t\ty: 2 * py - cpy,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'Q';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//T x y (or t dx dy)\r\n\t\tthis.T = (px, py) => {\r\n\t\t\tconst {x: cpx, y: cpy} = makeReflected();\r\n\t\t\treturn this.Q(cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.t = (px, py) => this.T(px + lx, py + ly);\r\n\t\t//A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n\t\tthis.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n\t\t\tconst x1 = lx;\r\n\t\t\tconst y1 = ly;\r\n\r\n\t\t\tellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'A';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t//a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n\t\tthis.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(\r\n\t\t\t\trx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n\t\t\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommands;","'use strict';\r\n\r\nconst PathCommands = require('./PathCommands');\r\n\r\nfunction pathTokens(d) {\r\n\tlet idx = 0;\r\n\treturn {\r\n\t\tnext() {\r\n\t\t\tlet s = '';\r\n\t\t\twhile (d.length > idx) {\r\n\t\t\t\tconst c = d[idx];\r\n\t\t\t\tidx++;\r\n\t\t\t\tif (' ,\\n\\r\\t'.indexOf(c) > -1) {\r\n\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst type = '.+-1234567890'.indexOf(c) > -1 ? 'num' : 'str';\r\n\t\t\t\t\tif (type === 'str') {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('-+'.indexOf(c) > -1) {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\tif (s.indexOf('.') > -1) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += c;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn s || null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction command(builder, cmd, argsProvider) {\r\n\tif (cmd.toUpperCase() === 'M' || cmd.toUpperCase() === 'L' || cmd.toUpperCase() === 'T') {\r\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next());\r\n\t\treturn cmd === 'M' ? 'L'\r\n\t\t\t: cmd === 'm' ? 'l'\r\n\t\t\t: cmd;\r\n\t} else if (cmd.toUpperCase() === 'H' || cmd.toUpperCase() === 'V') {\r\n\t\tbuilder.command(cmd, argsProvider.next());\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'Z') {\r\n\t\tbuilder.command(cmd);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'C') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'S' || cmd.toUpperCase() === 'Q') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'A') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else {\r\n\t\t// https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n\t\tconsole.warn('unsupported:' + cmd);\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nconst canvasOperations = window.CanvasRenderingContext2D ? Object.keys(window.CanvasRenderingContext2D.prototype) : [\r\n\t'save',\r\n\t'restore',\r\n\t'beginPath',\r\n\t'closePath',\r\n\t'moveTo',\r\n\t'lineTo',\r\n\t'bezierCurveTo',\r\n\t'quadraticCurveTo',\r\n\t'arc',\r\n\t'arcTo',\r\n\t'ellipse',\r\n\t'rect',\r\n\t'translate',\r\n\t'rotate',\r\n\t'scale',\r\n];\r\n\r\nclass PathCommandsParser {\r\n\tconstructor() {\r\n\t\tthis._commands = new PathCommands(this);\r\n\t\tcanvasOperations.forEach((op) => {\r\n\t\t\tthis[op] = (...args) => {\r\n\t\t\t\tthis._ops.push({\r\n\t\t\t\t\top,\r\n\t\t\t\t\targs,\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\tcommand(name, ...args) {\r\n\t\targs = args || [];\r\n\t\tfor (let i = 0; i < args.length; i++) {\r\n\t\t\targs[i] = args[i] - 0;\r\n\t\t}\r\n\t\tthis._commands[name](...(args));\r\n\t}\r\n\tparse(d) {\r\n\t\tconst ops = this._ops = [];\r\n\t\tconst tokens = pathTokens(d);\r\n\t\ttry {\r\n\t\t\tlet cmd;\r\n\t\t\tlet subsequentCommand;\r\n\t\t\twhile ((cmd = tokens.next())) {\r\n\t\t\t\tif (!isNaN(cmd - 0)) {\r\n\t\t\t\t\tlet fst = true;\r\n\t\t\t\t\tconst argsProvider = {\r\n\t\t\t\t\t\tnext() {\r\n\t\t\t\t\t\t\tif (fst) {\r\n\t\t\t\t\t\t\t\tfst = false;\r\n\t\t\t\t\t\t\t\treturn cmd;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn tokens.next();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tsubsequentCommand = command(this, subsequentCommand, argsProvider);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsubsequentCommand = command(this, cmd, tokens);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('Error: ' + d);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t\treturn ops;\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommandsParser;","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\nfunction computeStyle(font) {\r\n\treturn [{\r\n\t\tdisplay: 'block',\r\n\t\tposition: 'absolute',\r\n\t\ttop: '-9999px',\r\n\t\tleft: '-9999px',\r\n\t\twidth: 'auto',\r\n\t\theight: 'auto',\r\n\t\tmargin: '0',\r\n\t\tpadding: '0',\r\n\t\t'white-space': 'nowrap',\r\n\t\tfont,\r\n\t}, {\r\n\t\t'font-variant': 'normal',\r\n\t\t'font-size': '300px',\r\n\t\t'font-style': 'normal',\r\n\t\t'font-weight': '400',\r\n\t\t'line-height': 'normal',\r\n\t}];\r\n}\r\n\r\nclass FontRuler {\r\n\tconstructor(font, testStr) {\r\n\t\tconst e = document.createElement('span');\r\n\t\te.setAttribute('aria-hidden', 'true');\r\n\t\te.textContent = testStr || 'BESbswy';\r\n\r\n\t\tcomputeStyle(font).forEach((style) => {\r\n\t\t\tfor (const key in style) {\r\n\t\t\t\te.style[key] = style[key];\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.body.appendChild(e);\r\n\t\tthis.el_ = e;\r\n\t}\r\n\tgetWidth() {\r\n\t\treturn this.el_.offsetWidth;\r\n\t}\r\n\tremove() {\r\n\t\tdocument.body.removeChild(this.el_);\r\n\t}\r\n}\r\n\r\nmodule.exports = FontRuler;\r\n\r\n\r\n","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\n\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler = require('./FontRuler');\r\n\r\n\r\nconst LastResortFonts = {\r\n\tSERIF: 'serif',\r\n\tSANS_SERIF: 'sans-serif'\r\n};\r\n\r\n\r\nconst watchRunners = {};\r\n\r\nclass FontWatchRunner {\r\n\tstatic load(font, testStr, activeCallback, inactiveCallback) {\r\n\t\tconst c = watchRunners[font] || (watchRunners[font] = {});\r\n\t\ttestStr = testStr + '';\r\n\t\tlet runner;\r\n\t\tif (c[testStr]) {\r\n\t\t\trunner = c[testStr];\r\n\t\t} else {\r\n\t\t\trunner = (c[testStr] = new FontWatchRunner(font, testStr));\r\n\t\t}\r\n\t\trunner.then(activeCallback, inactiveCallback);\r\n\t}\r\n\tconstructor(font, testStr) {\r\n\t\tthis.activeCallbacks = [];\r\n\t\tthis.inactiveCallbacks = [];\r\n\t\tthis.status = null;\r\n\t\tthis.lastResortWidths_ = {};\r\n\r\n\t\tthis.fontRulerA_ = new FontRuler(font + ',' + LastResortFonts.SERIF, testStr);\r\n\t\tthis.fontRulerB_ = new FontRuler(font + ',' + LastResortFonts.SANS_SERIF, testStr);\r\n\t\tconst lastResortRulerA = new FontRuler('4px ' + LastResortFonts.SERIF, testStr);\r\n\t\tconst lastResortRulerB = new FontRuler('4px ' + LastResortFonts.SANS_SERIF, testStr);\r\n\r\n\t\t//start\r\n\t\tthis.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n\t\tthis.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\r\n\r\n\t\tlastResortRulerA.remove();\r\n\t\tlastResortRulerB.remove();\r\n\r\n\t\tthis.started_ = Date.now();\r\n\r\n\t\tthis.check_();\r\n\t}\r\n\tthen(activeCallback, inactiveCallback) {\r\n\t\tif (this.status) {\r\n\t\t\tif (this.status !== 'ng') {\r\n\t\t\t\tactiveCallback();\r\n\t\t\t} else {\r\n\t\t\t\tinactiveCallback();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.activeCallbacks.push(activeCallback);\r\n\t\t\tthis.inactiveCallbacks.push(inactiveCallback);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tcheck_() {\r\n\t\tconst widthA = this.fontRulerA_.getWidth();\r\n\t\tconst widthB = this.fontRulerB_.getWidth();\r\n\r\n\t\tif (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\tif (Date.now() - this.started_ >= 3000) { // timeout\r\n\t\t\t\tif (this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\t\t\tthis.status = 'ok';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.finish_(this.inactiveCallbacks);\r\n\t\t\t\t\tthis.status = 'ng';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.check_();\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\tthis.status = 'ok';\r\n\t\t}\r\n\t}\r\n\tisFallbackFont_(a, b) {\r\n\t\treturn this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\r\n\t}\r\n\twidthsMatchLastResortWidths_(a, b) {\r\n\t\tfor (const font in LastResortFonts) {\r\n\t\t\tif (LastResortFonts.hasOwnProperty(font)) {\r\n\t\t\t\tif (this.widthMatches_(a, LastResortFonts[font]) &&\r\n\t\t\t\t\t\tthis.widthMatches_(b, LastResortFonts[font])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\twidthMatches_(width, lastResortFont) {\r\n\t\treturn width === this.lastResortWidths_[lastResortFont];\r\n\t}\r\n\tisLastResortFont_(a, b) {\r\n\t\treturn hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n\t}\r\n\tfinish_(callbacks) {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.fontRulerA_.remove();\r\n\t\t\tthis.fontRulerB_.remove();\r\n\t\t\tcallbacks.forEach((cb) => cb());\r\n\t\t}, 0);\r\n\t}\r\n}\r\n\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n\tif (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n\t\tconst match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n\r\n\t\tHAS_WEBKIT_FALLBACK_BUG = !!match &&\r\n\t\t\t(parseInt(match[1], 10) < 536 ||\r\n\t\t\t(parseInt(match[1], 10) === 536 &&\r\n\t\t\tparseInt(match[2], 10) <= 11));\r\n\t}\r\n\treturn HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\n\r\nmodule.exports = FontWatchRunner;\r\n","'use strict';\r\n\r\nfunction normalize(options) {\r\n\tif (!options) {\r\n\t\treturn [];\r\n\t}\r\n\tif (Array.isArray(options)) {\r\n\t\treturn options;\r\n\t}\r\n\tif (typeof options === 'string') {\r\n\t\treturn normalize(JSON.parse(options));\r\n\t}\r\n\tconst result = [];\r\n\tfor (const k in options) {\r\n\t\tresult.push({\r\n\t\t\tvalue: k,\r\n\t\t\tcaption: options[k]\r\n\t\t});\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nmodule.exports = {\r\n\tnormalize,\r\n};\r\n","'use strict';\r\n\r\nfunction getPath2D() {\r\n\t//return require('./legacy/canvas/Path2D');\r\n\treturn window.Path2D || require('./legacy/canvas/Path2D');\r\n}\r\n\r\nmodule.exports = {\r\n\tfill(module, ctx, x, y, w, h) {\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tconst {width, height} = module;\r\n\t\t\tconst {ud: upsideDown, x: offsetX = 0, y: offsetY = 0} = module;\r\n\t\t\tw = w || width;\r\n\t\t\th = h || height;\r\n\t\t\tconst xrate = w / width;\r\n\t\t\tconst yrate = h / (upsideDown ? -height : height);\r\n\t\t\tx = x || 0;\r\n\t\t\ty = upsideDown ? ((y || 0) + (-height * yrate)) : (y || 0);\r\n\r\n\t\t\tctx.translate(x, y);\r\n\t\t\tctx.scale(xrate, yrate);\r\n\t\t\tif (offsetX !== 0 || offsetY !== 0) {\r\n\t\t\t\tctx.translate(offsetX, offsetY);\r\n\t\t\t}\r\n\t\t\tconst Path2D = getPath2D();\r\n\t\t\tmodule.path2d = module.path2d || (new Path2D(module.d));\r\n\t\t\tctx.fill(module.path2d);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\tget Path2D() {\r\n\t\treturn getPath2D();\r\n\t},\r\n};\r\n","'use strict';\r\n{\r\n\tconst {isPromise} = require('./utils');\r\n\r\n\tfunction wait(val) {\r\n\t\treturn val.then((v) => {\r\n\t\t\tif (isPromise(v)) {\r\n\t\t\t\treturn wait(v);\r\n\t\t\t} else {\r\n\t\t\t\treturn v;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction createArray(get, length) {\r\n\t\tconst array = new Array(length);\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tarray[i] = get(i);\r\n\t\t}\r\n\t\treturn array;\r\n\t}\r\n\tfunction createArrayPromise(get, getField, length) {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst plist = [];\r\n\t\t\tconst array = new Array(length);\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst data = get(i);\r\n\t\t\t\tconst record = {\r\n\t\t\t\t\tv: data,\r\n\t\t\t\t\tf: data\r\n\t\t\t\t};\r\n\t\t\t\tarray[i] = record;\r\n\t\t\t\tif (isPromise(data)) {\r\n\t\t\t\t\tplist.push(wait(data).then((v) => {\r\n\t\t\t\t\t\trecord.v = v;\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(\r\n\t\t\t\t\t() => setArrayField(array, getField)\r\n\t\t\t).then(resolve);\r\n\t\t});\r\n\t}\r\n\tfunction setArrayField(array, getField) {\r\n\t\tif (!getField) {\r\n\t\t\treturn Promise.resolve(array);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst length = array.length;\r\n\t\t\tconst plist = [];\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst record = array[i];\r\n\t\t\t\trecord.f = getField(record.v);\r\n\t\t\t\tif (isPromise(record.f)) {\r\n\t\t\t\t\tplist.push(wait(record.f).then((v) => {\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(() => resolve(array));\r\n\t\t});\r\n\t}\r\n\tconst sort = {\r\n\t\tsort(get, set, length, compare, getField) {\r\n\t\t\tconst old = createArray(get, length);\r\n\t\t\tif (getField) {\r\n\t\t\t\told.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n\t\t\t} else {\r\n\t\t\t\told.sort(compare);\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tset(i, old[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortArray(array, compare) {\r\n\t\t\tArray.prototype.sort.call(array, compare);\r\n\t\t},\r\n\t\tsortPromise(get, set, length, compare, getField) {\r\n\t\t\tif (window.Promise) {\r\n\t\t\t\treturn createArrayPromise(get, getField, length).then((array) => {\r\n\t\t\t\t\tarray.sort((r1, r2) => compare(r1.f, r2.f));\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tset(i, array[i].v);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsort.sort(get, set, length, compare, getField);\r\n\t\t\t\tconst dummyPromise = {\r\n\t\t\t\t\tthen(fn) {\r\n\t\t\t\t\t\tfn();\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcatch() {\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn dummyPromise;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = sort;\r\n}","\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\n{\r\n\tfunction getScrollBarWidth() {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.position = 'absolute';\r\n\t\tstyle.height = '9999px';\r\n\t\tstyle.width = 'calc(100vw - 100%)';\r\n\t\tstyle.opacity = 0;\r\n\t\tdummy.textContent = 'x';\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {width} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn parseInt(width, 10);\r\n\t}\r\n\r\n\tlet SCROLLBAR_SIZE;\r\n\tconst initDocument = () => {\r\n\t\trequire('./style.css');\r\n\t\tSCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n\t\tconst style = document.createElement('style');\r\n\t\tstyle.setAttribute('type', 'text/css');\r\n\t\tstyle.setAttribute('data-name', 'cheetah-grid');\r\n\t\tstyle.innerHTML =\r\n\t\t`\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n\r\n\t\tdocument.head.appendChild(style);\r\n\t};\r\n\r\n\tconst style = {\r\n\t\tinitDocument() {\r\n\t\t\tstyle.initDocument = () => {};\r\n\t\t\tinitDocument();\r\n\t\t},\r\n\t\tgetScrollBarSize() {\r\n\t\t\treturn SCROLLBAR_SIZE;\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst Symbol = window.Symbol ? window.Symbol : (() => {\r\n\t\tlet nextId = 1;\r\n\t\treturn (name) => {\r\n\t\t\tconst id = nextId++;\r\n\t\t\tif (name) {\r\n\t\t\t\treturn ` $$$ ${name} - ${id} $$$ `;\r\n\t\t\t} else {\r\n\t\t\t\treturn ` $$$ ${id} $$$ `;\r\n\t\t\t}\r\n\t\t};\r\n\t})();\r\n\tconst mem = {};\r\n\r\n\tmodule.exports = {\r\n\t\tget(name) {\r\n\t\t\tif (name) {\r\n\t\t\t\treturn mem[name] ? mem[name] : (mem[name] = Symbol(name));\r\n\t\t\t} else {\r\n\t\t\t\treturn Symbol();\r\n\t\t\t}\r\n\t\t},\r\n\t\tget PROTECTED_SYMBOL() {\r\n\t\t\treturn this.get('protected');\r\n\t\t},\r\n\t\tget CHECK_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('chkcol.stateID');\r\n\t\t},\r\n\t\tget BUTTON_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('btncol.stateID');\r\n\t\t},\r\n\t\tget COLUMN_FADEIN_STATE_ID() {\r\n\t\t\treturn this.get('col.fadein_stateID');\r\n\t\t},\r\n\t\tget BRANCH_GRAPH_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('branch_graph_col.stateID');\r\n\t\t},\r\n\t\tget SMALL_DIALOG_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('small_dialog_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_MENU_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_menu_editor.stateID');\r\n\t\t}\r\n\t};\r\n\r\n}","'use strict';\r\n{\r\n\tlet arrayFind;\r\n\tlet arrayFindIndex;\r\n\tconst array = {\r\n\t\tget find() {\r\n\t\t\tif (arrayFind) {\r\n\t\t\t\treturn arrayFind;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.find) {\r\n\t\t\t\tarrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFind = (arr, predicate) => {\r\n\t\t\t\t\tconst index = array.findIndex(arr, predicate);\r\n\t\t\t\t\treturn index >= 0 ? arr[index] : undefined;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFind;\r\n\t\t},\r\n\t\tget findIndex() {\r\n\t\t\tif (arrayFindIndex) {\r\n\t\t\t\treturn arrayFindIndex;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.findIndex) {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => {\r\n\t\t\t\t\tconst length = arr.length;\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tconst value = arr[i];\r\n\t\t\t\t\t\tif (predicate(value, i, arr)) {\r\n\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFindIndex;\r\n\t\t},\r\n\t};\r\n\t\r\n\tfunction isDef(data) {\r\n\t\treturn data !== null && typeof data !== 'undefined';\r\n\t}\r\n\tconst ua = window.navigator.userAgent.toLowerCase();\r\n\tconst IE = (ua.match(/(msie)/) || ua.match(/trident/));\r\n\tconst Chrome = (ua.indexOf('chrome') > -1) && (ua.indexOf('edge') === -1);\r\n\tconst Firefox = (ua.indexOf('firefox') > -1);\r\n\r\n\tfunction setReadonly(obj, name, value) {\r\n\t\tObject.defineProperty(obj, name, {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction each(obj, fn) {\r\n\t\tfor (const key in obj) {\r\n\t\t\tfn(obj[key], key, obj);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isObject(obj) {\r\n\t\treturn obj === Object(obj);\r\n\t}\r\n\r\n\tfunction extend(...args) {\r\n\t\tconst result = {};\r\n\t\targs.forEach((source) => {\r\n\t\t\tfor (const key in source) {\r\n\t\t\t\tObject.defineProperty(result, key, {\r\n\t\t\t\t\tget() {\r\n\t\t\t\t\t\treturn source[key];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tset(val) {\r\n\t\t\t\t\t\tsource[key] = val;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\tfunction isDescendantElement(root, target) {\r\n\t\twhile (target.parentElement) {\r\n\t\t\tconst p = target.parentElement;\r\n\t\t\tif (root === p) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\ttarget = p;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction applyChainSafe(obj, fn, ...names) {\r\n\t\tlet value = obj;\r\n\t\tfor (let i = 0; i < names.length && isDef(value); i++) {\r\n\t\t\tvalue = fn(value, names[i]);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tfunction getChainSafe(obj, ...names) {\r\n\t\treturn applyChainSafe(obj, (val, name) => val[name], ...names);\r\n\t}\r\n\tfunction getOrApply(value, ...args) {\r\n\t\tif (typeof value === 'function') {\r\n\t\t\treturn value(...args);\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\tfunction endsWith(str, searchString, position) {\r\n\t\tconst subjectString = str.toString();\r\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\r\n\t\t\tposition = subjectString.length;\r\n\t\t}\r\n\t\tposition -= searchString.length;\r\n\t\tconst lastIndex = subjectString.lastIndexOf(searchString, position);\r\n\t\treturn lastIndex !== -1 && lastIndex === position;\r\n\t}\r\n\tconst isPromise = (data) => data && typeof data.then === 'function';\r\n\tconst then = (result, callback) => isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n\tfunction getMouseButtons(e) {\r\n\t\tif (isDef(e.buttons)) {\r\n\t\t\treturn e.buttons;\r\n\t\t}\r\n\t\t/*for legacy*/\r\n\t\tif (isDef(e.which)) {\r\n\t\t\tif (e.which === 3) { //right?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\tif (e.which === 2) { //middle?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\treturn e.which;//left or no\r\n\t\t}\r\n\t\t\r\n\t\tif (e.button === 0 || e.button === 1) {\r\n\t\t\treturn 1;//candidate left\r\n\t\t}\r\n\t\tif (e.button === 2) {\r\n\t\t\treturn 2;// right\r\n\t\t}\r\n\t\treturn 0;//no or middle?\r\n\t}\r\n\tfunction getKeyCode(e) {\r\n\t\treturn e.keyCode || e.which;\r\n\t}\r\n\tfunction isTouchEvent(e) {\r\n\t\treturn !!e.changedTouches;\r\n\t}\r\n\tfunction getIgnoreCase(obj, name) {\r\n\t\tif (obj[name]) {\r\n\t\t\treturn obj[name];\r\n\t\t}\r\n\t\tconst l = name.toLowerCase();\r\n\t\tif (obj[l]) {\r\n\t\t\treturn obj[l];\r\n\t\t}\r\n\t\tconst u = name.toLowerCase();\r\n\t\tif (obj[u]) {\r\n\t\t\treturn obj[u];\r\n\t\t}\r\n\t\tfor (const k in obj) {\r\n\t\t\tif (k.toLowerCase() === l) {\r\n\t\t\t\treturn obj[k];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\tfunction cancel(e) {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\r\n\tfunction toBoxArray(obj) {\r\n\t\tif (!Array.isArray(obj)) {\r\n\t\t\treturn [obj/*top*/, obj/*right*/, obj/*bottom*/, obj/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 3) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[2]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 2) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[0]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 1) {\r\n\t\t\treturn [obj[0]/*top*/, obj[0]/*right*/, obj[0]/*bottom*/, obj[0]/*left*/];\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t// Chrome 33554431\r\n\t// FireFox 17895588\r\n\t// IE 10737433\r\n\tmodule.exports = {\r\n\t\tisDef,\r\n\t\tbrowser: {\r\n\t\t\tIE,\r\n\t\t\tChrome,\r\n\t\t\tFirefox,\r\n\t\t\theightLimit: Chrome ? 33554431\r\n\t\t\t: Firefox ? 17895588\r\n\t\t\t: 10737433 // default IE limit\r\n\t\t},\r\n\t\textend,\r\n\t\tisDescendantElement,\r\n\t\tgetChainSafe,\r\n\t\tapplyChainSafe,\r\n\t\tgetOrApply,\r\n\t\tgetIgnoreCase,\r\n\t\tisPromise,\r\n\t\tthen,\r\n\t\tarray,\r\n\t\tobj: {\r\n\t\t\tsetReadonly,\r\n\t\t\teach,\r\n\t\t\tisObject,\r\n\t\t},\r\n\t\tstr: {\r\n\t\t\tendsWith\r\n\t\t},\r\n\t\tevent: {\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tisTouchEvent,\r\n\t\t\tcancel,\r\n\t\t},\r\n\t\tstyle: {\r\n\t\t\ttoBoxArray,\r\n\t\t},\r\n\t\temptyFn() {},\r\n\t};\r\n}","'use strict';\r\n\r\nconst {extend} = require('../internal/utils');\r\nconst DrawGrid = require('../core/DrawGrid');\r\nconst EVENT_TYPE = extend(DrawGrid.EVENT_TYPE, {\r\n\tCHANGED_VALUE: 'changed_value',\r\n});\r\nmodule.exports = EVENT_TYPE;","'use strict';\r\n\r\n{\r\n\tconst core = require('./core');\r\n\tconst tools = require('./tools');\r\n\tconst columns = require('./columns');\r\n\tconst themes = require('./themes');\r\n\tconst data = require('./data');\r\n\t\r\n\tconst ListGrid = require('./ListGrid');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\t\r\n\tconst icons = require('./icons');\r\n\tconst register = require('./register');\r\n\t\r\n\t/**\r\n\t * Cheetah Grid\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcore,\r\n\t\ttools,\r\n\r\n\t\t// impl Grids\r\n\t\tListGrid,\r\n\r\n\t\t// objects\r\n\t\tcolumns,\r\n\t\tthemes,\r\n\t\tdata,\r\n\r\n\t\t// helper\r\n\t\tGridCanvasHelper,\r\n\t\tget icons() {\r\n\t\t\treturn icons.get();\r\n\t\t},\r\n\r\n\t\t//plugin registers\r\n\t\tregister,\r\n\r\n\t\tget _internal() {\r\n\t\t\tconsole.warn('use internal!!');\r\n\t\t\treturn {\r\n\t\t\t\tcolor: require('./internal/color'),\r\n\t\t\t\tsort: require('./internal/sort'),\r\n\t\t\t\tcalc: require('./internal/calc'),\r\n\t\t\t\tsymbolManager: require('./internal/symbolManager'),\r\n\t\t\t\tpath2DManager: require('./internal/path2DManager'),\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n\r\nconst themePlugins = require('./plugins/themes');\r\nconst iconPlugins = require('./plugins/icons');\r\n\r\nfunction register(obj, name, value) {\r\n\tif (value) {\r\n\t\tconst old = obj[name];\r\n\t\tobj[name] = value;\r\n\t\treturn old;\r\n\t} else {\r\n\t\treturn obj[name];\r\n\t}\r\n}\r\nfunction registers(obj, values) {\r\n\tfor (const k in values) {\r\n\t\tobj[k] = values[k];\r\n\t}\r\n}\r\nmodule.exports = {\r\n\ttheme(name, theme) {\r\n\t\treturn register(themePlugins, name, theme);\r\n\t},\r\n\ticon(name, icon) {\r\n\t\treturn register(iconPlugins, name, icon);\r\n\t},\r\n\ticons(icons) {\r\n\t\tregisters(iconPlugins, icons);\r\n\t},\r\n};","'use strict';\r\n{\r\n\tconst {extend, getIgnoreCase} = require('./internal/utils');\r\n\tconst theme = require('./themes/theme');\r\n\tconst plugins = require('./plugins/themes');\r\n\tconst BASIC = theme.create(require('./themes/BASIC'));\r\n\tconst MATERIAL_DESIGN = theme.create(require('./themes/MATERIAL_DESIGN'));\r\n\r\n\tconst builtin = {\r\n\t\tBASIC,\r\n\t\tMATERIAL_DESIGN,\r\n\t};\r\n\tlet defTheme = theme.create({});\r\n\t/**\r\n\t * themes\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tconst themes = {\r\n\t\tget default() {\r\n\t\t\treturn defTheme;\r\n\t\t},\r\n\t\tset default(defaultTheme) {\r\n\t\t\tdefTheme = defaultTheme;\r\n\t\t},\r\n\t\ttheme,\r\n\t\tof(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (typeof value === 'string') {\r\n\t\t\t\tconst t = getIgnoreCase(themes.choices, value);\r\n\t\t\t\tif (t) {\r\n\t\t\t\t\treturn t;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @namespace cheetahGrid.themes.choices\r\n\t\t */\r\n\t\tget choices() {\r\n\t\t\treturn extend(builtin, plugins);\r\n\t\t},\r\n\t};\r\n\tmodule.exports = themes;\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\nfunction DEFAULT_BG_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (!((row - frozenRowCount) & 1)) {\r\n\t\treturn '#FFF';\r\n\t} else {\r\n\t\treturn '#F6F6F6';\r\n\t}\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n\tlet stop;\r\n\tconst stopsKey = [];\r\n\tfor (stop in colorStops) {\r\n\t\tstopsKey.push(`${stop}@${colorStops[stop]}`);\r\n\t}\r\n\tconst key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(',')}`;\r\n\tconst ret = cacheLinearGradient[key];\r\n\tif (ret) {\r\n\t\treturn ret;\r\n\t}\r\n\tconst grad = context.createLinearGradient(left, top, left, bottom);\r\n\tfor (stop in colorStops) {\r\n\t\tgrad.addColorStop(stop, colorStops[stop]);\r\n\t}\r\n\treturn (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid,\r\n\t\tgrid: {frozenRowCount},\r\n\t\tcontext\r\n\t} = args;\r\n\tconst {left, top} = grid.getCellRelativeRect(col, 0);\r\n\tconst {bottom} = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n\r\n\treturn getLinearGradient(context, left, top, left, bottom, {0: '#FFF', 1: '#D3D3D3'});\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: '#000',\r\n\tdefaultBgColor: DEFAULT_BG_COLOR,\r\n\tfrozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: '#000',\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#F6F6F6',\r\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (frozenRowCount - 1 === row) {\r\n\t\treturn ['#f2f2f2', '#f2f2f2', '#ccc7c7', '#f2f2f2'];\r\n\t} else {\r\n\t\treturn ['#f2f2f2'];\r\n\t}\r\n}\r\nfunction BORDER_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid: {colCount}\r\n\t} = args;\r\n\tif (colCount - 1 === col) {\r\n\t\treturn ['#ccc7c7', '#f2f2f2', '#ccc7c7', null];\r\n\t} else {\r\n\t\treturn ['#ccc7c7', null];\r\n\t}\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\tdefaultBgColor: '#FFF',\r\n\tfrozenRowsBgColor: '#FFF',\r\n\tfrozenRowsColor: 'rgba(0, 0, 0, 0.54)',\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: BORDER_COLOR,\r\n\tfrozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t\tborderColor: 'rgba(0, 0, 0, 0.26)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#FFF',\r\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst defaultTheme = require('./MATERIAL_DESIGN');\r\n\r\n\tfunction getProp(obj, superObj, names, defNames) {\r\n\t\treturn getChainSafe(obj, ...names) ||\r\n\t\t(defNames && getChainSafe(obj, ...defNames)) ||\r\n\t\tgetChainSafe(superObj, ...names);\r\n\t}\r\n\tfunction createTheme(obj = {}, superTheme = defaultTheme) {\r\n\t\treturn {\r\n\t\t\tget font() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['font']);\r\n\t\t\t},\r\n\t\t\tget underlayBackgroundColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['underlayBackgroundColor']);\r\n\t\t\t},\r\n\t\t\t// color\r\n\t\t\tget color() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['color']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsColor'], ['color']);\r\n\t\t\t},\r\n\t\t\t// background\r\n\t\t\tget defaultBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget selectionBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['selectionBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\t// border\r\n\t\t\tget borderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget hiliteBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['hiliteBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget checkbox() {\r\n\t\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'uncheckBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'checkBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget borderColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'borderColor'], ['borderColor']);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tget button() {\r\n\t\t\t\treturn this._button || (this._button = {\r\n\t\t\t\t\tget color() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'color'], ['color']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget bgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'bgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\textends(obj) {\r\n\t\t\t\treturn createTheme(obj, this);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * theme object\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes.theme\r\n\t * @memberof cheetahGrid.themes\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcreate(obj) {\r\n\t\t\treturn createTheme(obj);\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\r\n\t/**\r\n\t * tools\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcanvashelper,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {calcBasePosition, calcStartPosition} = require('../internal/canvases');\r\n\tconst {ceil, PI} = Math;\r\n\r\n\tfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n\t\tfunction strokeRectLines(positions) {\r\n\t\t\tfor (let i = 0; i < borderColors.length; i++) {\r\n\t\t\t\tconst color = borderColors[i];\r\n\t\t\t\tconst preColor = borderColors[i - 1];\r\n\t\t\t\tif (color) {\r\n\t\t\t\t\tif (preColor !== color) {\r\n\t\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst pos1 = positions[i];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(pos1.x, pos1.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst pos2 = positions[i + 1];\r\n\t\t\t\t\tctx.lineTo(pos2.x, pos2.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst preColor = borderColors[borderColors.length - 1];\r\n\t\t\tif (preColor) {\r\n\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (borderColors[0] === borderColors[1] &&\r\n\t\t\tborderColors[0] === borderColors[2] &&\r\n\t\t\tborderColors[0] === borderColors[3]) {\r\n\t\t\tif (borderColors[0]) {\r\n\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrokeRectLines([\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t\t{x: left + width, y: top},\r\n\t\t\t\t{x: left + width, y: top + height},\r\n\t\t\t\t{x: left, y: top + height},\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\tfunction roundRect(ctx, left, top, width, height, radius) {\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n\t\tctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n\t\tctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n\t\tctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n\t\tctx.closePath();\r\n\t}\r\n\tfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.fill();\r\n\t}\r\n\tfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.stroke();\r\n\t}\r\n\tfunction fillTextRect(ctx, text, left, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcBasePosition(ctx, rect, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.fillText(text, pos.x, pos.y);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawInlineImageRect(ctx, image,\r\n\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\tdestWidth, destHeight,\r\n\t\t\tleft, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, destWidth, destHeight, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.drawImage(image,\r\n\t\t\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\t\t\tpos.x, pos.y, destWidth, destHeight\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an object containing the width of the checkbox.\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @return {Object} Object containing the width of the checkbox\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction measureCheckbox(ctx) {\r\n\t\treturn {\r\n\t\t\twidth: ctx.measureText('').width\r\n\t\t};\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * draw Checkbox\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {boolean|number} check checkbox check status\r\n\t * @param  {object} option option\r\n\t * @return {void}\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction drawCheckbox(ctx, x, y, check,\r\n\t\t\t{\r\n\t\t\t\tuncheckBgColor = '#FFF',\r\n\t\t\t\tcheckBgColor = 'rgb(76, 73, 72)',\r\n\t\t\t\tborderColor = '#000',\r\n\t\t\t\tboxSize = measureCheckbox(ctx).width,\r\n\t\t\t} = {}) {\r\n\t\tconst checkPoint = typeof check === 'number' ? (check > 1 ? 1 : check) : 1;\r\n\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n\t\t\t\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 1,\r\n\t\t\t\t\tceil(y) - 1,\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.strokeStyle = borderColor;\r\n\t\t\tstrokeRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 0.5,\r\n\t\t\t\t\tceil(y) - 0.5,\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tif (check) {\r\n\t\t\t\tctx.lineWidth = ceil(boxSize / 10);\r\n\t\t\t\tctx.strokeStyle = uncheckBgColor;\r\n\t\t\t\tlet leftWidth = boxSize / 4;\r\n\t\t\t\tlet rightWidth = boxSize / 2 * 0.9;\r\n\t\t\t\tconst leftLeftPos = x + boxSize * 0.2;\r\n\t\t\t\tconst leftTopPos = y + boxSize / 2;\r\n\r\n\t\t\t\tif (checkPoint < 0.5) {\r\n\t\t\t\t\tleftWidth = leftWidth * (checkPoint * 2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(leftLeftPos, leftTopPos);\r\n\t\t\t\tctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n\t\t\t\tif (checkPoint > 0.5) {\r\n\t\t\t\t\tif (checkPoint < 1) {\r\n\t\t\t\t\t\trightWidth = rightWidth * ((checkPoint - 0.5) * 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n\t\tconst {\r\n\t\t\tbackgroundColor = '#FFF',\r\n\t\t\tbgColor = backgroundColor,\r\n\t\t\tradius = 4,\r\n\t\t\tshadow = {},\r\n\t\t} = option;\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = bgColor;\r\n\r\n\t\t\tif (shadow) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, 0.24)',\r\n\t\t\t\t\tblur = 1,\r\n\t\t\t\t\toffsetX = 0,\r\n\t\t\t\t\toffsetY = 2,\r\n\t\t\t\t\toffset: {\r\n\t\t\t\t\t\tx: ox = offsetX,\r\n\t\t\t\t\t\ty: oy = offsetY\r\n\t\t\t\t\t} = {},\r\n\t\t\t\t} = shadow;\r\n\t\t\t\tctx.shadowColor = color;\r\n\t\t\t\tctx.shadowBlur = blur; //\r\n\t\t\t\tctx.shadowOffsetX = ox;\r\n\t\t\t\tctx.shadowOffsetY = oy;\r\n\t\t\t}\r\n\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(left),\r\n\t\t\t\t\tceil(top),\r\n\t\t\t\t\tceil(width),\r\n\t\t\t\t\tceil(height),\r\n\t\t\t\t\tradius\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * canvashelper\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools.canvashelper\r\n\t * @memberof cheetahGrid.tools\r\n\t */\r\n\tconst canvashelper = {\r\n\t\troundRect,\r\n\t\tfillRoundRect,\r\n\t\tstrokeRoundRect,\r\n\t\tdrawCheckbox,\r\n\t\tmeasureCheckbox,\r\n\t\tfillTextRect,\r\n\t\tdrawButton,\r\n\t\tdrawInlineImageRect,\r\n\t\tstrokeColorsRect,\r\n\t};\r\n\r\n\r\n\tmodule.exports = canvashelper;\r\n}"],"sourceRoot":""}
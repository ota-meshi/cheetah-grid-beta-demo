{"version":3,"sources":["cheetahGrid.min/webpack/universalModuleDefinition","cheetahGrid.min/webpack/bootstrap","cheetahGrid.min/./internal/utils.js","cheetahGrid.min/./internal/symbolManager.js","cheetahGrid.min/./internal/com.js","cheetahGrid.min/./columns/style/Style.js","cheetahGrid.min/./core/DrawGrid.js","cheetahGrid.min/./internal/EventHandler.js","cheetahGrid.min/node_modules/css-loader/lib/css-base.js","cheetahGrid.min/node_modules/style-loader/lib/addStyles.js","cheetahGrid.min/./internal/Rect.js","cheetahGrid.min/./internal/canvases.js","cheetahGrid.min/./columns/type/Column.js","cheetahGrid.min/./columns/type/BaseColumn.js","cheetahGrid.min/./element/Inline.js","cheetahGrid.min/./core/EventTarget.js","cheetahGrid.min/./columns/action/Editor.js","cheetahGrid.min/./internal/dom.js","cheetahGrid.min/./header/style.js","cheetahGrid.min/./internal/calc.js","cheetahGrid.min/./columns/action/BaseAction.js","cheetahGrid.min/./columns/style/StdBaseStyle.js","cheetahGrid.min/./columns/style/BaseStyle.js","cheetahGrid.min/./columns/type/columnUtils.js","cheetahGrid.min/./internal/icons.js","cheetahGrid.min/./themes.js","cheetahGrid.min/./internal/path2DManager.js","cheetahGrid.min/./columns/type/MultilineTextColumn.js","cheetahGrid.min/./columns/style/MultilineTextStyle.js","cheetahGrid.min/./internal/style.js","cheetahGrid.min/./tools/canvashelper.js","cheetahGrid.min/./columns.js","cheetahGrid.min/./columns/action/Action.js","cheetahGrid.min/./columns/action/actionBind.js","cheetahGrid.min/./internal/animate.js","cheetahGrid.min/./columns/action/BaseInputEditor.js","cheetahGrid.min/./internal/menu-items.js","cheetahGrid.min/./columns/style.js","cheetahGrid.min/./columns/style/NumberStyle.js","cheetahGrid.min/./columns/style/CheckStyle.js","cheetahGrid.min/./columns/style/ButtonStyle.js","cheetahGrid.min/./columns/style/ImageStyle.js","cheetahGrid.min/./columns/style/IconStyle.js","cheetahGrid.min/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.min/./internal/imgs.js","cheetahGrid.min/./themes/MATERIAL_DESIGN.js","cheetahGrid.min/./plugins/themes.js","cheetahGrid.min/./data.js","cheetahGrid.min/./data/DataSource.js","cheetahGrid.min/./internal/sort.js","cheetahGrid.min/./GridCanvasHelper.js","cheetahGrid.min/./internal/fonts.js","cheetahGrid.min/./element/InlineImage.js","cheetahGrid.min/./icons.js","cheetahGrid.min/./plugins/icons.js","cheetahGrid.min/./internal/color.js","cheetahGrid.min/./header/style/BaseStyle.js","cheetahGrid.min/./header/type/BaseHeader.js","cheetahGrid.min/./list-grid/EVENT_TYPE.js","cheetahGrid.min/./main.js","cheetahGrid.min/./core.js","cheetahGrid.min/./internal/Scrollable.js","cheetahGrid.min/./internal/style.css*","cheetahGrid.min/./internal/style.css","cheetahGrid.min/node_modules/style-loader/lib/urls.js","cheetahGrid.min/./internal/NumberMap.js","cheetahGrid.min/./internal/hiDPI.js","cheetahGrid.min/./tools.js","cheetahGrid.min/./columns/action.js","cheetahGrid.min/./columns/action/CheckEditor.js","cheetahGrid.min/./columns/action/ButtonAction.js","cheetahGrid.min/./columns/action/SmallDialogInputEditor.js","cheetahGrid.min/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.min/./columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.min/./columns/action/internal/SmallDialogInputElement.css","cheetahGrid.min/./columns/action/InlineInputEditor.js","cheetahGrid.min/./columns/action/internal/InlineInputElement.js","cheetahGrid.min/./columns/action/internal/InlineInputElement.css*","cheetahGrid.min/./columns/action/internal/InlineInputElement.css","cheetahGrid.min/./columns/action/InlineMenuEditor.js","cheetahGrid.min/./columns/action/internal/InlineMenuElement.js","cheetahGrid.min/./columns/action/internal/InlineMenuElement.css*","cheetahGrid.min/./columns/action/internal/InlineMenuElement.css","cheetahGrid.min/./columns/type.js","cheetahGrid.min/./columns/type/NumberColumn.js","cheetahGrid.min/./columns/type/CheckColumn.js","cheetahGrid.min/./columns/type/ButtonColumn.js","cheetahGrid.min/./columns/type/ImageColumn.js","cheetahGrid.min/./internal/LRUCache.js","cheetahGrid.min/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.min/./columns/type/IconColumn.js","cheetahGrid.min/./columns/type/BranchGraphColumn.js","cheetahGrid.min/./columns/style/BranchGraphStyle.js","cheetahGrid.min/./columns/type/MenuColumn.js","cheetahGrid.min/./themes/theme.js","cheetahGrid.min/./themes/BASIC.js","cheetahGrid.min/./data/CachedDataSource.js","cheetahGrid.min/./ListGrid.js","cheetahGrid.min/./element/inlines.js","cheetahGrid.min/./element/InlineIcon.js","cheetahGrid.min/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.min/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.min/./element/InlineSvg.js","cheetahGrid.min/./element/InlineDrawer.js","cheetahGrid.min/./element/InlinePath2D.js","cheetahGrid.min/./internal/legacy/canvas/Path2D.js","cheetahGrid.min/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.min/./internal/legacy/canvas/PathCommands.js","cheetahGrid.min/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg","cheetahGrid.min/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg","cheetahGrid.min/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg","cheetahGrid.min/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg","cheetahGrid.min/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg","cheetahGrid.min/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg","cheetahGrid.min/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg","cheetahGrid.min/./header/type.js","cheetahGrid.min/./header/type/Header.js","cheetahGrid.min/./header/style/Style.js","cheetahGrid.min/./header/type/SortHeader.js","cheetahGrid.min/./columns/message/MessageHandler.js","cheetahGrid.min/./columns/message/ErrorMessage.js","cheetahGrid.min/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.min/./columns/message/internal/MessageElement.css*","cheetahGrid.min/./columns/message/internal/MessageElement.css","cheetahGrid.min/./columns/message/internal/ErrorMessageElement.css*","cheetahGrid.min/./columns/message/internal/ErrorMessageElement.css","cheetahGrid.min/./columns/message/WarningMessage.js","cheetahGrid.min/./columns/message/internal/WarningMessageElement.js","cheetahGrid.min/./columns/message/internal/WarningMessageElement.css*","cheetahGrid.min/./columns/message/internal/WarningMessageElement.css","cheetahGrid.min/./columns/message/InfoMessage.js","cheetahGrid.min/./register.js","cheetahGrid.min/./columns/message/BaseMessage.js","cheetahGrid.min/./columns/message/internal/MessageElement.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","arrayFind","arrayFindIndex","array","find","Array","arr","predicate","index","findIndex","undefined","length","isDef","data","ua","navigator","userAgent","toLowerCase","IE","match","Chrome","indexOf","Firefox","applyChainSafe","obj","fn","names","isPromise","then","result","callback","browser","heightLimit","extend","args","forEach","source","key","set","val","isDescendantElement","target","parentElement","getChainSafe","getOrApply","getIgnoreCase","u","k","setReadonly","each","isObject","str","endsWith","searchString","position","subjectString","toString","isFinite","Math","floor","lastIndex","lastIndexOf","event","getMouseButtons","e","buttons","which","button","getKeyCode","keyCode","isTouchEvent","changedTouches","cancel","preventDefault","stopPropagation","style","toBoxArray","__webpack_provided_Array_dot_isArray","emptyFn","Symbol","nextId","id","mem","PROTECTED_SYMBOL","this","CHECK_COLUMN_STATE_ID","BUTTON_COLUMN_STATE_ID","COLUMN_FADEIN_STATE_ID","BRANCH_GRAPH_COLUMN_STATE_ID","SMALL_DIALOG_INPUT_EDITOR_STATE_ID","INLINE_INPUT_EDITOR_STATE_ID","INLINE_MENU_EDITOR_STATE_ID","Array_isArray","isArray","StdBaseStyle","defaultStyle","Style","DEFAULT","constructor","super","_color","color","_font","font","_padding","padding","doChangeStyle","clone","cancelEvent","EventTarget","Rect","Scrollable","EventHandler","NumberMap","calc","hiDPI","_","KEY_END","KEY_HOME","KEY_LEFT","KEY_UP","KEY_RIGHT","KEY_DOWN","KEY_ALPHA_C","EVENT_TYPE","CLICK_CELL","DBLCLICK_CELL","DBLTAP_CELL","MOUSEDOWN_CELL","MOUSEUP_CELL","SELECTED_CELL","KEYDOWN","MOUSEMOVE_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","INPUT_CELL","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","RESIZE_COLUMN","SCROLL","_vibrate","vibrate","_getTargetRowAt","grid","absoluteY","internal","getTargetRowAtInternal","candRow","min","ceil","defaultRowHeight","rowCount","bottom","_getRowsHeight","startRow","startBottom","top","_getRowHeight","row","findAfter","findBefore","_getTargetColAt","absoluteX","left","colCount","col","right","_getColWidth","_getTargetFrozenRowAt","frozenRowCount","scroll","_getTargetFrozenColAt","frozenColCount","_getFrozenRowsRect","height","canvas","width","_getFrozenColsRect","_drawCell","ctx","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","rect","drawRect","bounds","max","save","dcContext","DrawCellContext","drawCells","_isCellDrawing","selection","onDrawCell","context","_putCellDrawing","pCol","_delayMode","keys","_removeCellDrawing","terminate","restore","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","beginPath","fillStyle","underlayBackgroundColor","fill","count","_invalidateRect","_getVisibleRect","_getInitContext","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","draw","_toPxWidth","round","toPx","calcWidthContext","_getDefaultColPxWidth","defaultColWidth","_adjustColWidth","orgWidth","limit","colWidthsLimit","colWidthsMap","_setColWidth","put","startCol","endCol","w","getRowHeightInternal","rowHeightsMap","endRow","getRowsHeightInternal","h","_moveFocusCell","shiftKey","offset","getOffsetInvalidateCells","extendRange","range","start","end","beforeRange","beforeRect","getCellsRect","_setFocusCell","makeVisibleCell","focusCell","afterRange","afterRect","intersection","_getMouseAbstractPoint","clientX","pageX","scrollX","clientY","pageY","scrollY","getBoundingClientRect","x","y","_bindEvents","getCellEventArgsSet","abstractPos","cell","getCellAt","eventArgs","canResizeColumn","handler","on","element","eventArgsSet","results","fireListeners","v","resizeCol","_getResizeColAt","columnResizer","cellSelector","doubleTapBefore","longTouchId","clearTimeout","defaultPrevented","setTimeout","select","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","scrollable","getElement","moving","cursor","lastMoving","hasListeners","focusControl","listen","selected","onScroll","lastLeft","lastTop","moveX","scrollLeft","moveY","scrollTop","abs","drawImage","redrawRect","copy","frozenRect","_onScroll","onKeyDownMove","_focus","_sel","getMoveLeftColByKeyDownInternal","getMoveUpRowByKeyDownInternal","getMoveRightColByKeyDownInternal","getMoveDownRowByKeyDownInternal","ctrlKey","_onKeyDownMove","copyValue","copyCellValue","getCopyCellValue","Promise","strCellValue","onCopy","onInput","bindEventsInternal","abstractX","abstractY","inPoint","cellRect","getCellRect","_toRelativeRect","absoluteRect","offsetLeft","offsetTop","BaseMouseDownMover","_grid","_handler","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","touchmove","document","body","_mouseMove","passive","touchend","_mouseUp","touchcancel","mousemove","mouseup","_moveInternal","off","_upInternal","dispose","CellSelector","_getTargetCell","_cell","makeVisibleCol","makeVisibleRow","ColumnResizer","_targetCol","_x","_preX","_invalidateAbsoluteLeft","pre","getColWidth","afterSize","updateScroll","setSafeInputValue","input","type","FocusControl","_scrollable","_input","createElement","classList","add","readOnly","appendChild","_isComposition","focus","remove","metaKey","inputClear","clipboardData","setData","setFocusRect","calcTop","getScrollBarSize","toFixed","editMode","resetInputStatus","el","composition","contains","atts","attributes","removeNames","att","_inputStatus","nodeName","push","removeName","removeAttribute","setAttribute","storeInputStatus","setDefaultInputStatus","Selection","_start","_end","inCell","_wrapFireSelectedEvent","_setSelectCell","keepSelect","_isWraped","before","after","_layers","addDraw","level","DrawLayer","list","sort","a","b","_level","_list","drawing","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","getSelectState","sel","getContext","getRect","getCellRelativeRect","setRect","getDrawRect","_toRelativeDrawRect","toCurrentContext","bind","addLayerDraw","isFrozenCell","fRect","onTerminate","_onTerminate","DrawGrid","initDocument","createRootElement","transform","alpha","full","em","measureText","updateSize","configure","cfg","config","offsetWidth","offsetHeight","setScrollSize","eachAll","_getScrollWidth","getScrollHeightInternal","_getScrollHeight","getRowHeight","setRowHeight","_setRowHeight","setColWidth","getMaxColWidth","setMaxColWidth","maxwidth","getMinColWidth","setMinColWidth","minwidth","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","frozenColsWidth","frozenRowsHeight","_getScrollableVisibleRect","selCol","selRow","invalidateCell","invalidateGridRect","cellsRect","invalidateTarget","invalidate","addDisposable","disposable","Error","disposables","removeChild","getAttachCellArea","strokeStyle","textAlign","textBaseline","lineWidth","_listeners","listener","options","addEventListener","tryWithOffEvents","removeEventListener","fire","hasListener","clear","useSourceMap","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","memo","stylesInDom","isOldIE","all","atob","apply","arguments","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","insertInto","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","removeStyleElement","parentNode","idx","splice","createStyleElement","attrs","addAttrs","update","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","filter","Boolean","cssNode","childNodes","_left","_top","_width","_height","[object Object]","rect1","rect2","_right","_bottom","x0","x1","y0","y1","another","calcStartPosition","paddingLeft","paddingRight","paddingTop","paddingBottom","calcBasePosition","BaseColumn","utils","Column","StyleClass","drawInternal","helper","drawCellBase","getIcon","bgColor","testFontLoad","loadIcons","icons","text","styleContents","animate","BaseStyle","getFadinState","_generateFadinPointAction","point","state","stateKey","opacity","cellState","globalAlpha","fadinMgr","activeFadeins","f","margeAnimate","option","_fadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","cellValue","info","getRecord","getGridCanvasHelper","Date","now","time","currentContext","actStyle","of","convertInternal","drawMessageInternal","getMessage","column","isFadeinWhenCallbackInPromise","message","messageHandler","drawCellMessage","bindGridEvent","util","_content","canDraw","onReady","canvashelper","offsetRight","offsetBottom","fillTextRect","listeners","listenerData","unlisten","BaseAction","Editor","_readOnly","onChangeReadOnlyInternal","tagName","html","textContent","innerHTML","isNode","arg","nodeType","toNode","dom","slice","toNodeList","jQuery","isFocusable","tabIndex","empty","appendHtml","inner","node","disableFocus","dataset","disableBeforeTabIndex","children","enableFocus","findPrevSiblingFocusable","previousSibling","findNextSiblingFocusable","columnStyle","parse","calcStr","replacer","num","unit","script","replace","eval","test","substr","trim","_disabled","disabled","onChangeDisabledInternal","_textAlign","_textBaseline","CHANGE_STYLE","_bgColor","icon","loadIcon","iconList","toNormarizeArray","ICON_PROP_KEYS","doms","props","getIconProps","className","tagProps","beforeStyle","defaultView","getComputedStyle","getPropertyValue","quoted","split","quote","clientWidth","isLiga","toSimpleArray","iconProps","workData","prop","toPropArray","normarize","iconPropKeys","theme","plugins","builtin","BASIC","create","MATERIAL_DESIGN","defTheme","themes","default","defaultTheme","t","choices","getPath2D","Path2D","ud","upsideDown","offsetX","offsetY","xrate","yrate","translate","scale","path2d","MultilineTextStyle","MultilineTextColumn","lineHeight","multilines","multilineText","adj","_lineHeight","SCROLLBAR_SIZE","dummy","parseInt","getScrollBarWidth","PI","roundRect","radius","arc","closePath","fillRoundRect","strokeRoundRect","stroke","measureCheckbox","drawCheckbox","check","uncheckBgColor","checkBgColor","borderColor","boxSize","checkPoint","leftWidth","rightWidth","leftLeftPos","leftTopPos","moveTo","lineTo","clip","pos","fillText","drawButton","backgroundColor","shadow","blur","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","drawInlineImageRect","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","strokeColorsRect","borderColors","strokeRect","positions","preColor","pos1","pos2","strokeRectLines","action","bindCellClickAction","bindCellKeyAction","Action","_action","getState","record","getRowRecord","mouseOver","mouseActiveCell","mouseOut","KEY_ENTER","isTarget","acceptKeys","cubicBezier","x2","y2","x3","y3","step","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","duration","easing","startedAt","canceledFlg","createAnim","resolve","reject","anim","KEY_F2","BaseInputEditor","onInputCellInternal","inputValue","onOpenCellInternal","onChangeSelectCellInternal","onSetInputAttrsInternal","onGridScrollInternal","open","normalize","caption","NumberStyle","CheckStyle","ButtonStyle","ImageStyle","IconStyle","PercentCompleteBarStyle","_uncheckBgColor","_checkBgColor","_borderColor","buttonBgColor","_buttonBgColor","_imageSizing","imageSizing","_margin","margin","DEFAULT_BAR_COLOR","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","LRUCache","allCache","loadImage","src","console","error","img","Image","onload","onerror","url","warn","search","getCacheOrLoad","cacheName","cacheSize","cache","getCacheOrLoad0","defaultBgColor","frozenRowsBgColor","frozenRowsColor","hiliteBorderColor","selectionBgColor","frozenRowsBorderColor","checkbox","DataSource","CachedDataSource","UPDATE_LENGTH","UPDATED_LENGTH","UPDATED_ORDER","getValue","setPromiseBack","_getIndex","dataSource","_sortedIndexMap","mapIndex","_get","_length","getOriginal","getField","field","getOriginalField","hasField","hasOriginalField","setField","setOriginalField","order","sortedIndexMap","orderFn","v1","v2","sortPromise","recordPromiseCallBackInternal","ss","fieldPromiseCallBackInternal","EMPTY","wait","createArrayPromise","plist","setArrayField","compare","old","createArray","r1","r2","sortArray","dummyPromise","catch","inlines","colorToRGB","fonts","getColor","getThemeColor","drawInlines","drawInline","inline","inlineWidths","reduce","inlineWidth","_inlineRect","buildInlines","Theme","_checkbox","_button","GridCanvasHelper","_theme","createCalculator","calcWidth","calcHeight","toBoxPixelArray","calculator","box","drawWithClip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","multiInlines","pad","line","shift","_multiInlineRect","fillCell","fillColor","fillCellWithState","getFillColorState","fillRect","fillRectWithState","border","startOffset","borderWithState","animElapsedTime","boxWidth","uncheckBgRGB","checkBgRGB","checkRGB","colorName","diff","uncheckRGB","load","loads","legacy","testStr","ready","Inline","imageLeft","imageTop","imageWidth","imageHeight","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_onloaded","_loaded","_loadImage","_inlineImg","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","rgbMap","hexToNum","hex","createRGB","g","testRGB","rateToByte","colorToRGB0","1","2","3","tripleHexToRGB","g1","4","g2","5","b1","6","b2","sextupleHexToRGB","ret","rgb","styleColor","styleColorToRGB","BaseHeader","headerCell","_headerCell","CHANGED_VALUE","core","tools","columns","ListGrid","register","_internal","symbolManager","path2DManager","MAX_SCROLL","_update","domHeight","sbSize","vScrollRange","rScrollRange","_p","_endPointElement","relativeTop","scrollWidth","scrollHeight","hmr","locals","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","indexFirst","ary","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","ratio","setRatio","devicePixelRatio","getAttribute","wh","CheckEditor","ButtonAction","SmallDialogInputEditor","InlineInputEditor","InlineMenuEditor","ImmutableCheckEditor","ImmutableInputEditor","ACTIONS","CHECK","INPUT","columnAction","toUpperCase","KEY_SPACE","toggleValue","blockKey","doChangeValue","onChange","elapsed","selrange","SmallDialogInputElement","globalElement","bindGridCount","attachInput","editor","attach","detachInput","gridFocus","detach","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","_classList","_type","_inputDialogManager","doGetCellValue","setInputAttrs","CLASSNAME","INPUT_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","KEY_ESC","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","_dialog","readonly","createDialogElement","_bindDialogEvents","dialog","_beforePropEditor","unbindProps","errorMessage","activeData","_onInputValue","bindProps","_activeData","_isActive","_beforeValue","_doChangeValue","_validate","res","stopPropagationOnly","onKeyupAndPress","_onInputValueChange","inputOnly","InlineInputElement","_bindInputEvents","InlineMenuElement","detachMenu","_options","attachMenu","KEY_TAB","ITEM_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","attachElement","menu","openMenu","emptyItemEl","valueItemEl","valueindex","span","optionToLi","focusEl","focusIndex","allHeight","menuClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","_menu","_bindMenuEvents","items","querySelectorAll","NumberColumn","CheckColumn","ButtonColumn","ImageColumn","PercentCompleteBarColumn","IconColumn","BranchGraphColumn","MenuColumn","TYPES","NUMBER","BUTTON","IMAGE","MULTILINETEXT","columnType","defaultFotmat","Intl","NumberFormat","fmt","_format","format","withFormat","isNaN","toBoolean","opt","_caption","withCaption","active","MAX_LRU_CACHE_SIZE","maxWidth","maxHeight","newWidth","newHeight","calcKeepAspectRatioSize","_map","_cacheSize","remKey","MARGIN","_min","_max","_formatter","formatter","svalue","rate","barMaxWidth","barTop","barLeft","barSize","_tagName","_className","_name","_iconWidth","iconWidth","Infinity","repeatArray","BranchGraphStyle","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","mergeLines","joinLine","timeline","branchIndex","reverse","calcCommand","command","timelineData","cmd","from","branch","to","branches","fromTargetIndex","findBranchRootIndex","branchTargetFromIndex","branchPoint","targetLine","merge","fromTargetLine","pop","commitMerge","commitTag","calcBranchesInfo","allData","promise","dataIndex","getAllColumnData","_cache","clearCache","upLineIndexKey","downLineIndexKey","branchColors","branchLineWidth","circleSize","mergeStyle","branchXPoints","tl","textWidth","calcBranchXPoints","upLineIndex","downLineIndex","pointIndex","lineCap","upX","upRect","upY","bezierCurveTo","downX","downRect","downY","renderMerge","DEFAULT_BRANCH_COLORS","_branchColors","_circleSize","_branchLineWidth","_mergeStyle","withOptions","_convertInternal","basePadding","textPadding","iconPadding","path","getProp","superObj","defNames","createTheme","superTheme","extends","cacheLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","getLinearGradient","0","_rCache","_fCache","fCache","_setFieldCache","headerType","HeaderBaseStyle","MessageHandler","headerId","_getHeaderCellRange","headerMap","getHeaderCellRange","_getCellValue","getCell","_getField","_getCellMessage","_getCellIcon0","retIcon","_getRowRecordIndex","_hasField","_onDrawValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","selId","_headerBorderWithState","_getCellIcon","_refreshHeader","headerEvents","HeaderMap","header","headerObjects","ids","_refreshRowCount","minWidth","isArrayHeaderRowHeight","headerRowHeight","_tryWithUpdateDataSource","dataSourceEventIds","_setRecords","records","ofArray","_setDataSource","_columns","_headerCells","_headerObjects","_addHeaders","_setupHeaderType","getHeaderCellRangeById","isCellInRange","roots","rowCells","_newRow","hd","headerStyle","newRow","prev","adjustListGridOption","sortState","_updateRect","valueCallback","changeValueCallback","_setCellValue","self","getColumnIndexByField","columnIndex","focusGridCell","newCol","makeVisibleGridCell","InlineIcon","InlineImage","InlineSvg","InlineDrawer","InlinePath2D","iconOf","svg","regedIcons","regedIcon","drawWidth","drawHeight","drawRegisteredIcon","il","_icon","FontRuler","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","getWidth","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","HAS_WEBKIT_FALLBACK_BUG","exec","hasWebKitFallbackBug","callbacks","cb","display","white-space","font-variant","font-size","font-style","font-weight","line-height","computeStyle","el_","buildSvgDataUrl","XMLSerializer","serializeToString","getSvgElement","DOMParser","parseFromString","svgElem","elmWidth","elmHeight","_draw","_path","parser","_ops","op","CanvasRenderingContext2D","originalFill","PathCommands","builder","argsProvider","next","canvasOperations","_commands","ops","tokens","pathTokens","subsequentCommand","fst","log","mag","sqrt","pow","angle","sign","acos","dot","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","cost","cos","sint","sin","rotClockwise","xPrime2","pointMul","rx2","ry2","lambda","factor","cPrime","sum","rotCounterClockwise","meanVec","x1UnitVector","x2UnitVector","theta","rotate","lMx","lMy","reflected","lx","ly","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","quadraticCurveTo","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","Header","SortHeader","_sort","_range","arrowSize","_executeSort","newState","ErrorMessage","WarningMessage","InfoMessage","_messageInstances","_bindGridEvent","messageInstances","_getMessageInstanceOfMessage","_attach","_attachInfo","instance","detachMessageElement","attachMessageElement","_toMessageText","_move","moveMessageElement","_detach","onSelectMessage","_createMessageInstance","Message","BaseMessage","ErrorMessageElement","RED_A100","createMessageElementInternal","drawCellMessageInternal","boxRect","MessageElement","MESSAGE_CLASSNAME","_rootElement","_messageElement","WarningMessageElement","DEEP_ORANGE_A100","GREY_L2","themePlugins","iconPlugins","values","registers","_getMessageElement","move","rootElement","createrootElement","messageElement","_attachCell"],"mappings":"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","file":"cheetahGrid.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 57);\n","'use strict';\r\n{\r\n\tlet arrayFind;\r\n\tlet arrayFindIndex;\r\n\tconst array = {\r\n\t\tget find() {\r\n\t\t\tif (arrayFind) {\r\n\t\t\t\treturn arrayFind;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.find) {\r\n\t\t\t\tarrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFind = (arr, predicate) => {\r\n\t\t\t\t\tconst index = array.findIndex(arr, predicate);\r\n\t\t\t\t\treturn index >= 0 ? arr[index] : undefined;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFind;\r\n\t\t},\r\n\t\tget findIndex() {\r\n\t\t\tif (arrayFindIndex) {\r\n\t\t\t\treturn arrayFindIndex;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.findIndex) {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => {\r\n\t\t\t\t\tconst length = arr.length;\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tconst value = arr[i];\r\n\t\t\t\t\t\tif (predicate(value, i, arr)) {\r\n\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFindIndex;\r\n\t\t},\r\n\t};\r\n\t\r\n\tfunction isDef(data) {\r\n\t\treturn data !== null && typeof data !== 'undefined';\r\n\t}\r\n\tconst ua = window.navigator.userAgent.toLowerCase();\r\n\tconst IE = (ua.match(/(msie)/) || ua.match(/trident/));\r\n\tconst Chrome = (ua.indexOf('chrome') > -1) && (ua.indexOf('edge') === -1);\r\n\tconst Firefox = (ua.indexOf('firefox') > -1);\r\n\r\n\tfunction setReadonly(obj, name, value) {\r\n\t\tObject.defineProperty(obj, name, {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction each(obj, fn) {\r\n\t\tfor (const key in obj) {\r\n\t\t\tfn(obj[key], key, obj);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isObject(obj) {\r\n\t\treturn obj === Object(obj);\r\n\t}\r\n\r\n\tfunction extend(...args) {\r\n\t\tconst result = {};\r\n\t\targs.forEach((source) => {\r\n\t\t\tfor (const key in source) {\r\n\t\t\t\tObject.defineProperty(result, key, {\r\n\t\t\t\t\tget() {\r\n\t\t\t\t\t\treturn source[key];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tset(val) {\r\n\t\t\t\t\t\tsource[key] = val;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\tfunction isDescendantElement(root, target) {\r\n\t\twhile (target.parentElement) {\r\n\t\t\tconst p = target.parentElement;\r\n\t\t\tif (root === p) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\ttarget = p;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction applyChainSafe(obj, fn, ...names) {\r\n\t\tlet value = obj;\r\n\t\tfor (let i = 0; i < names.length && isDef(value); i++) {\r\n\t\t\tvalue = fn(value, names[i]);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tfunction getChainSafe(obj, ...names) {\r\n\t\treturn applyChainSafe(obj, (val, name) => val[name], ...names);\r\n\t}\r\n\tfunction getOrApply(value, ...args) {\r\n\t\tif (typeof value === 'function') {\r\n\t\t\treturn value(...args);\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\tfunction endsWith(str, searchString, position) {\r\n\t\tconst subjectString = str.toString();\r\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\r\n\t\t\tposition = subjectString.length;\r\n\t\t}\r\n\t\tposition -= searchString.length;\r\n\t\tconst lastIndex = subjectString.lastIndexOf(searchString, position);\r\n\t\treturn lastIndex !== -1 && lastIndex === position;\r\n\t}\r\n\tconst isPromise = (data) => data && typeof data.then === 'function';\r\n\tconst then = (result, callback) => isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n\tfunction getMouseButtons(e) {\r\n\t\tif (isDef(e.buttons)) {\r\n\t\t\treturn e.buttons;\r\n\t\t}\r\n\t\t/*for legacy*/\r\n\t\tif (isDef(e.which)) {\r\n\t\t\tif (e.which === 3) { //right?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\tif (e.which === 2) { //middle?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\treturn e.which;//left or no\r\n\t\t}\r\n\t\t\r\n\t\tif (e.button === 0 || e.button === 1) {\r\n\t\t\treturn 1;//candidate left\r\n\t\t}\r\n\t\tif (e.button === 2) {\r\n\t\t\treturn 2;// right\r\n\t\t}\r\n\t\treturn 0;//no or middle?\r\n\t}\r\n\tfunction getKeyCode(e) {\r\n\t\treturn e.keyCode || e.which;\r\n\t}\r\n\tfunction isTouchEvent(e) {\r\n\t\treturn !!e.changedTouches;\r\n\t}\r\n\tfunction getIgnoreCase(obj, name) {\r\n\t\tif (obj[name]) {\r\n\t\t\treturn obj[name];\r\n\t\t}\r\n\t\tconst l = name.toLowerCase();\r\n\t\tif (obj[l]) {\r\n\t\t\treturn obj[l];\r\n\t\t}\r\n\t\tconst u = name.toLowerCase();\r\n\t\tif (obj[u]) {\r\n\t\t\treturn obj[u];\r\n\t\t}\r\n\t\tfor (const k in obj) {\r\n\t\t\tif (k.toLowerCase() === l) {\r\n\t\t\t\treturn obj[k];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\tfunction cancel(e) {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\r\n\tfunction toBoxArray(obj) {\r\n\t\tif (!Array.isArray(obj)) {\r\n\t\t\treturn [obj/*top*/, obj/*right*/, obj/*bottom*/, obj/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 3) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[2]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 2) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[0]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 1) {\r\n\t\t\treturn [obj[0]/*top*/, obj[0]/*right*/, obj[0]/*bottom*/, obj[0]/*left*/];\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t// Chrome 33554431\r\n\t// FireFox 17895588\r\n\t// IE 10737433\r\n\tmodule.exports = {\r\n\t\tisDef,\r\n\t\tbrowser: {\r\n\t\t\tIE,\r\n\t\t\tChrome,\r\n\t\t\tFirefox,\r\n\t\t\theightLimit: Chrome ? 33554431\r\n\t\t\t: Firefox ? 17895588\r\n\t\t\t: 10737433 // default IE limit\r\n\t\t},\r\n\t\textend,\r\n\t\tisDescendantElement,\r\n\t\tgetChainSafe,\r\n\t\tapplyChainSafe,\r\n\t\tgetOrApply,\r\n\t\tgetIgnoreCase,\r\n\t\tisPromise,\r\n\t\tthen,\r\n\t\tarray,\r\n\t\tobj: {\r\n\t\t\tsetReadonly,\r\n\t\t\teach,\r\n\t\t\tisObject,\r\n\t\t},\r\n\t\tstr: {\r\n\t\t\tendsWith\r\n\t\t},\r\n\t\tevent: {\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tisTouchEvent,\r\n\t\t\tcancel,\r\n\t\t},\r\n\t\tstyle: {\r\n\t\t\ttoBoxArray,\r\n\t\t},\r\n\t\temptyFn() {},\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst Symbol = window.Symbol ? window.Symbol : (() => {\r\n\t\tlet nextId = 1;\r\n\t\treturn (name) => {\r\n\t\t\tconst id = nextId++;\r\n\t\t\tif (name) {\r\n\t\t\t\treturn ` $$$ ${name} - ${id} $$$ `;\r\n\t\t\t} else {\r\n\t\t\t\treturn ` $$$ ${id} $$$ `;\r\n\t\t\t}\r\n\t\t};\r\n\t})();\r\n\tconst mem = {};\r\n\r\n\tmodule.exports = {\r\n\t\tget(name) {\r\n\t\t\tif (name) {\r\n\t\t\t\treturn mem[name] ? mem[name] : (mem[name] = Symbol(name));\r\n\t\t\t} else {\r\n\t\t\t\treturn Symbol();\r\n\t\t\t}\r\n\t\t},\r\n\t\tget PROTECTED_SYMBOL() {\r\n\t\t\treturn this.get('protected');\r\n\t\t},\r\n\t\tget CHECK_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('chkcol.stateID');\r\n\t\t},\r\n\t\tget BUTTON_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('btncol.stateID');\r\n\t\t},\r\n\t\tget COLUMN_FADEIN_STATE_ID() {\r\n\t\t\treturn this.get('col.fadein_stateID');\r\n\t\t},\r\n\t\tget BRANCH_GRAPH_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('branch_graph_col.stateID');\r\n\t\t},\r\n\t\tget SMALL_DIALOG_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('small_dialog_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_MENU_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_menu_editor.stateID');\r\n\t\t}\r\n\t};\r\n\r\n}","'use strict';\r\n\r\nmodule.exports = {\r\n\t'Array_isArray': window.Array.isArray\r\n};","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t\tthis._font = style.font;\r\n\t\t\tthis._padding = style.padding;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this._font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis._font = font;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget padding() {\r\n\t\t\treturn this._padding;\r\n\t\t}\r\n\t\tset padding(padding) {\r\n\t\t\tthis._padding = padding;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst {\r\n\t\tisDef,\r\n\t\tbrowser,\r\n\t\tisDescendantElement,\r\n\t\tarray,\r\n\t\tisPromise,\r\n\t\tevent: {\r\n\t\t\tisTouchEvent,\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tcancel: cancelEvent,\r\n\t\t}\r\n\t} = require('../internal/utils');\r\n\t\r\n\tconst EventTarget = require('./EventTarget');\r\n\tconst Rect = require('../internal/Rect');\r\n\tconst Scrollable = require('../internal/Scrollable');\r\n\tconst EventHandler = require('../internal/EventHandler');\r\n\tconst NumberMap = require('../internal/NumberMap');\r\n\tconst style = require('../internal/style');\r\n\tconst calc = require('../internal/calc');\r\n\tconst hiDPI = require('../internal/hiDPI');\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('../internal/symbolManager');\r\n\r\n\tfunction createRootElement() {\r\n\t\tconst element = document.createElement('div');\r\n\t\telement.classList.add('cheetah-grid');\r\n\t\treturn element;\r\n\t}\r\n\r\n\tconst KEY_END = 35;\r\n\tconst KEY_HOME = 36;\r\n\tconst KEY_LEFT = 37;\r\n\tconst KEY_UP = 38;\r\n\tconst KEY_RIGHT = 39;\r\n\tconst KEY_DOWN = 40;\r\n\tconst KEY_ALPHA_C = 67;\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCLICK_CELL: 'click_cell',\r\n\t\tDBLCLICK_CELL: 'dblclick_cell',\r\n\t\tDBLTAP_CELL: 'dbltap_cell',\r\n\t\tMOUSEDOWN_CELL: 'mousedown_cell',\r\n\t\tMOUSEUP_CELL: 'mouseup_cell',\r\n\t\tSELECTED_CELL: 'selected_cell',\r\n\t\tKEYDOWN: 'keydown',\r\n\t\tMOUSEMOVE_CELL: 'mousemove_cell',\r\n\t\tMOUSEENTER_CELL: 'mouseenter_cell',\r\n\t\tMOUSELEAVE_CELL: 'mouseleave_cell',\r\n\t\tMOUSEOVER_CELL: 'mouseover_cell',\r\n\t\tMOUSEOUT_CELL: 'mouseout_cell',\r\n\t\tINPUT_CELL: 'input_cell',\r\n\t\tEDITABLEINPUT_CELL: 'editableinput_cell',\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL: 'modify_status_editableinput_cell',\r\n\t\tRESIZE_COLUMN: 'resize_column',\r\n\t\tSCROLL: 'scroll',\r\n\t};\r\n\r\n\t//private methods\r\n\tfunction _vibrate(e) {\r\n\t\tif (navigator.vibrate && isTouchEvent(e)) {\r\n\t\t\tnavigator.vibrate(50);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetRowAt(grid, absoluteY) {\r\n\t\tconst internal = grid.getTargetRowAtInternal(absoluteY);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst findBefore = (startRow, startBottom) => {\r\n\t\t\tlet bottom = startBottom;\r\n\t\t\tfor (let row = startRow; row >= 0; row--) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst top = bottom - height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tbottom = top;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst findAfter = (startRow, startBottom) => {\r\n\t\t\tlet top = startBottom - _getRowHeight(grid, startRow);\r\n\t\t\tconst {rowCount} = grid[_];\r\n\t\t\tfor (let row = startRow; row < rowCount; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst bottom = top + height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\ttop = bottom;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst candRow = Math.min(Math.ceil(absoluteY / grid[_].defaultRowHeight), grid.rowCount - 1);\r\n\t\tconst bottom = _getRowsHeight(grid, 0, candRow);\r\n\t\tif (absoluteY >= bottom) {\r\n\t\t\treturn findAfter(candRow, bottom);\r\n\t\t} else {\r\n\t\t\treturn findBefore(candRow, bottom);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetColAt(grid, absoluteX) {\r\n\t\tlet left = 0;\r\n\t\tconst {colCount} = grid[_];\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {top} = grid[_].scroll;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\tconst bottom = top + height;\r\n\t\t\tif (bottom > absoluteY) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop,\r\n\t\t\t\t\trow,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\ttop = bottom;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {left} = grid[_].scroll;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getFrozenRowsRect(grid) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {top} = grid[_].scroll;\r\n\t\tlet height = 0;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\theight += _getRowHeight(grid, row);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\ttop,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\theight\r\n\t\t);\r\n\t}\r\n\tfunction _getFrozenColsRect(grid) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {left} = grid[_].scroll;\r\n\t\tlet width = 0;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\twidth += _getColWidth(grid, col);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tleft,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\twidth,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _isCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn !!grid[_].drawCells[row][col];\r\n\t}\r\n\tfunction _putCellDrawing(grid, col, row, context) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\tgrid[_].drawCells[row] = {};\r\n\t\t}\r\n\t\tgrid[_].drawCells[row][col] = context;\r\n\t}\r\n\tfunction _removeCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdelete grid[_].drawCells[row][col];\r\n\t\tif (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n\t\t\tdelete grid[_].drawCells[row];\r\n\t\t}\r\n\t}\r\n\tfunction _drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\tskipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n\t\tconst rect = new Rect(\r\n\t\t\t\tabsoluteLeft - visibleRect.left,\r\n\t\t\t\tabsoluteTop - visibleRect.top,\r\n\t\t\t\twidth,\r\n\t\t\t\theight\r\n\t\t);\r\n\r\n\t\tconst drawRect = Rect.bounds(\r\n\t\t\t\tMath.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left,\r\n\t\t\t\tMath.max(absoluteTop, skipAbsoluteTop) - visibleRect.top,\r\n\t\t\t\trect.right,\r\n\t\t\t\trect.bottom\r\n\t\t);\r\n\r\n\t\tif (drawRect.height > 0 && drawRect.width > 0) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst dcContext = new DrawCellContext(\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\tctx, rect, drawRect,\r\n\t\t\t\t\t\t_isCellDrawing(grid, col, row),\r\n\t\t\t\t\t\tgrid[_].selection,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tconst p = grid.onDrawCell(col, row, dcContext);\r\n\t\t\t\tif (isPromise(p)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\t_putCellDrawing(grid, col, row, dcContext);\r\n\r\n\t\t\t\t\tconst pCol = col;\r\n\t\t\t\t\tdcContext._delayMode(grid, () => {\r\n\t\t\t\t\t\t_removeCellDrawing(grid, pCol, row);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tp.then(() => {\r\n\t\t\t\t\t\tdcContext.terminate();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _drawRow(grid, ctx, initFrozenCol, initCol,\r\n\t\t\tdrawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n\t\tconst {colCount} = grid[_];\r\n\t\tconst drawOuter = (col, absoluteLeft) => {\r\n\t\t\t//\r\n\t\t\tif (col >= (colCount - 1) && grid[_].canvas.width > (absoluteLeft - visibleRect.left)) {\r\n\t\t\t\tconst outerLeft = absoluteLeft - visibleRect.left;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteLeft = 0;\r\n\t\tif (initFrozenCol) {\r\n\t\t\tlet absoluteLeft = initFrozenCol.left;\r\n\t\t\tconst count = grid[_].frozenColCount;\r\n\t\t\tfor (let {col} = initFrozenCol; col < count; col++) {\r\n\t\t\t\tconst width = _getColWidth(grid, col);\r\n\r\n\t\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\t\tskipAbsoluteTop, 0,\r\n\t\t\t\t\t\tdrawLayers);\r\n\t\t\t\t\t\r\n\t\t\t\tabsoluteLeft += width;\r\n\t\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteLeft = absoluteLeft;\r\n\t\t}\r\n\r\n\t\tlet absoluteLeft = initCol.left;\r\n\t\tfor (let {col} = initCol; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\tskipAbsoluteTop, skipAbsoluteLeft,\r\n\t\t\t\t\tdrawLayers);\r\n\r\n\t\t\tabsoluteLeft += width;\r\n\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(colCount - 1, absoluteLeft);\r\n\r\n\t}\r\n\tfunction _invalidateRect(grid, drawRect) {\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tconst {rowCount} = grid[_];\r\n\t\tconst ctx = grid._getInitContext();\r\n\r\n\t\tconst initRow = _getTargetRowAt(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n\t\t\ttop: _getRowsHeight(grid, 0, rowCount - 1),\r\n\t\t\trow: rowCount\r\n\t\t};\r\n\t\tconst initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n\t\t\tleft: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n\t\t\tcol: grid[_].colCount\r\n\t\t};\r\n\t\tconst drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n\t\tconst drawRight = Math.min(visibleRect.right, drawRect.right);\r\n\r\n\t\tconst initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n\t\tconst initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n\r\n\t\tconst drawLayers = new DrawLayers();\r\n\r\n\t\tconst drawOuter = (row, absoluteTop) => {\r\n\t\t\t//\r\n\t\t\tif (row >= (rowCount - 1) && grid[_].canvas.height > (absoluteTop - visibleRect.top)) {\r\n\t\t\t\tconst outerTop = absoluteTop - visibleRect.top;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteTop = 0;\r\n\t\tif (initFrozenRow) {\r\n\t\t\tlet absoluteTop = initFrozenRow.top;\r\n\t\t\tconst count = grid[_].frozenRowCount;\r\n\t\t\tfor (let {row} = initFrozenRow; row < count; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t_drawRow(grid,\r\n\t\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\t\trow, absoluteTop, height, visibleRect, 0,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tabsoluteTop += height;\r\n\t\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteTop = absoluteTop;\r\n\t\t}\r\n\r\n\t\tlet absoluteTop = initRow.top;\r\n\t\tfor (let {row} = initRow; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t\r\n\t\t\t//\r\n\t\t\t_drawRow(grid,\r\n\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\trow, absoluteTop, height, visibleRect, skipAbsoluteTop,\r\n\t\t\t\t\tdrawLayers\r\n\t\t\t);\r\n\r\n\t\t\tabsoluteTop += height;\r\n\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(rowCount - 1, absoluteTop);\r\n\r\n\t\tdrawLayers.draw(ctx);\r\n\t}\r\n\r\n\tfunction _toPxWidth(grid, width) {\r\n\t\treturn Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n\t}\r\n\r\n\tfunction _getDefaultColPxWidth(grid) {\r\n\t\treturn _toPxWidth(grid, grid.defaultColWidth);\r\n\t}\r\n\r\n\tfunction _adjustColWidth(grid, col, orgWidth) {\r\n\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\tif (!limit) {\r\n\t\t\treturn orgWidth;\r\n\t\t}\r\n\t\t\r\n\t\tif (limit.min) {\r\n\t\t\tconst min = _toPxWidth(grid, limit.min);\r\n\t\t\tif (min > orgWidth) {\r\n\t\t\t\treturn min;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (limit.max) {\r\n\t\t\tconst max = _toPxWidth(grid, limit.max);\r\n\t\t\tif (max < orgWidth) {\r\n\t\t\t\treturn max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn orgWidth;\r\n\t}\r\n\r\n\tfunction _getColWidth(grid, col) {\r\n\t\tconst width = grid[_].colWidthsMap.get(col);\r\n\t\tif (width) {\r\n\t\t\treturn _adjustColWidth(grid, col, _toPxWidth(grid, width));\r\n\t\t}\r\n\t\treturn _getDefaultColPxWidth(grid);\r\n\t}\r\n\tfunction _setColWidth(grid, col, width) {\r\n\t\tgrid[_].colWidthsMap.put(col, width);\r\n\t}\r\n\tfunction _getColsWidth(grid, startCol, endCol) {\r\n\t\tconst colCount = endCol - startCol + 1;\r\n\t\tlet w = _getDefaultColPxWidth(grid) * colCount;\r\n\t\tgrid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\r\n\tfunction _getRowHeight(grid, row) {\r\n\t\tconst internal = grid.getRowHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst height = grid[_].rowHeightsMap.get(row);\r\n\t\tif (height) {\r\n\t\t\treturn height;\r\n\t\t}\r\n\t\treturn grid[_].defaultRowHeight;\r\n\t}\r\n\tfunction _setRowHeight(grid, row, height) {\r\n\t\tgrid[_].rowHeightsMap.put(row, height);\r\n\t}\r\n\tfunction _getRowsHeight(grid, startRow, endRow) {\r\n\t\tconst internal = grid.getRowsHeightInternal(startRow, endRow);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst rowCount = endRow - startRow + 1;\r\n\t\tlet h = grid[_].defaultRowHeight * rowCount;\r\n\t\tgrid[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\r\n\tfunction _getScrollWidth(grid) {\r\n\t\tlet w = _getDefaultColPxWidth(grid) * grid[_].colCount;\r\n\t\tgrid[_].colWidthsMap.eachAll((width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\tfunction _getScrollHeight(grid, row) {\r\n\t\tconst internal = grid.getScrollHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tlet h = grid[_].defaultRowHeight * grid[_].rowCount;\r\n\t\tgrid[_].rowHeightsMap.eachAll((height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\tfunction _onScroll(grid, e) {\r\n\t\tconst lastLeft = grid[_].scroll.left;\r\n\t\tconst lastTop = grid[_].scroll.top;\r\n\t\tconst moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n\t\tconst moveY = grid[_].scrollable.scrollTop - lastTop;\r\n\r\n\t\t//\r\n\t\tgrid[_].scroll = {\r\n\t\t\tleft: grid[_].scrollable.scrollLeft,\r\n\t\t\ttop: grid[_].scrollable.scrollTop,\r\n\t\t};\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tif ((Math.abs(moveX) >= visibleRect.width) || (Math.abs(moveY) >= visibleRect.height)) {\r\n\t\t\t//\r\n\t\t\t_invalidateRect(grid, visibleRect);\r\n\t\t} else {\r\n\t\t\t//\r\n\t\t\tgrid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n\r\n\t\t\t\t\r\n\t\t\tif (moveX !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveX < 0) {\r\n\t\t\t\t\tredrawRect.width = -moveX;\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\t\t\t\tredrawRect.width += frozenRect.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveX > 0) {\r\n\t\t\t\t\tredrawRect.left = redrawRect.right - moveX;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveX > 0) {\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenColsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (moveY !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveY < 0) {\r\n\t\t\t\t\tredrawRect.height = -moveY;\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\t\t\t\tredrawRect.height += frozenRect.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveY > 0) {\r\n\t\t\t\t\tredrawRect.top = redrawRect.bottom - moveY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveY > 0) {\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenRowsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _onKeyDownMove(grid, e) {\r\n\t\tconst {shiftKey} = e;\r\n\t\tconst keyCode = getKeyCode(e);\r\n\t\tconst focusCell = shiftKey ? grid.selection._focus : grid.selection._sel;\r\n\t\tif (keyCode === KEY_LEFT) {\r\n\t\t\tconst col = grid.getMoveLeftColByKeyDownInternal(focusCell);\r\n\t\t\tif (col < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\tconst row = grid.getMoveUpRowByKeyDownInternal(focusCell);\r\n\t\t\tif (row < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_RIGHT) {\r\n\t\t\tconst col = grid.getMoveRightColByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.colCount <= col) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\tconst row = grid.getMoveDownRowByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.rowCount <= row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_HOME) {\r\n\t\t\tconst row = e.ctrlKey ? 0 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, 0, row, e.shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_END) {\r\n\t\t\tconst row = e.ctrlKey ? grid.rowCount - 1 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, grid.colCount - 1, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t}\r\n\tfunction _moveFocusCell(grid, col, row, shiftKey) {\r\n\t\tconst offset = grid.getOffsetInvalidateCells();\r\n\r\n\t\tfunction extendRange(range) {\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\trange.start.col -= offset;\r\n\t\t\t\trange.start.row -= offset;\r\n\t\t\t\trange.end.col += offset;\r\n\t\t\t\trange.end.row += offset;\r\n\t\t\t}\r\n\t\t\treturn range;\r\n\t\t}\r\n\r\n\t\tconst beforeRange = extendRange(grid.selection.range);\r\n\t\tconst beforeRect = grid.getCellsRect(\r\n\t\t\t\tbeforeRange.start.col, beforeRange.start.row,\r\n\t\t\t\tbeforeRange.end.col, beforeRange.end.row\r\n\t\t);\r\n\r\n\t\tgrid.selection._setFocusCell(col, row, shiftKey);\r\n\t\tgrid.makeVisibleCell(col, row);\r\n\t\tgrid.focusCell(col, row);\r\n\t\t\t\r\n\t\tconst afterRange = extendRange(grid.selection.range);\r\n\t\tconst afterRect = grid.getCellsRect(\r\n\t\t\t\tafterRange.start.col, afterRange.start.row,\r\n\t\t\t\tafterRange.end.col, afterRange.end.row\r\n\t\t);\r\n\r\n\t\tif (afterRect.intersection(beforeRect)) {\r\n\t\t\tconst invalidateRect = Rect.max(afterRect, beforeRect);\r\n\t\t\t_invalidateRect(grid, invalidateRect);\r\n\t\t} else {\r\n\t\t\t_invalidateRect(grid, beforeRect);\r\n\t\t\t_invalidateRect(grid, afterRect);\r\n\t\t}\r\n\t}\r\n\tfunction _getMouseAbstractPoint(grid, e) {\r\n\t\tif (isTouchEvent(e)) {\r\n\t\t\te = e.changedTouches[0];\r\n\t\t}\r\n\t\tconst clientX = e.clientX || (e.pageX + window.scrollX);\r\n\t\tconst clientY = e.clientY || (e.pageY + window.scrollY);\r\n\t\tconst rect = grid[_].canvas.getBoundingClientRect();\r\n\t\tif (rect.right <= clientX) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (rect.bottom <= clientY) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst x = clientX - rect.left + grid[_].scroll.left;\r\n\t\tconst y = clientY - rect.top + grid[_].scroll.top;\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tfunction _bindEvents(grid) {\r\n\t\tconst getCellEventArgsSet = (e) => {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t\tconst cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tabstractPos,\r\n\t\t\t\t\tcell\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst eventArgs = {\r\n\t\t\t\tcol: cell.col,\r\n\t\t\t\trow: cell.row,\r\n\t\t\t\tevent: e,\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tabstractPos,\r\n\t\t\t\tcell,\r\n\t\t\t\teventArgs\r\n\t\t\t};\r\n\t\t};\r\n\t\tconst canResizeColumn = (col) => {\r\n\t\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\t\tif (!limit || !limit.min || !limit.max) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn limit.max !== limit.min;\r\n\t\t};\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousedown', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst results = grid.fireListeners(EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n\t\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t} else {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet doubleTapBefore = null;\r\n\t\tlet longTouchId = null;\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchstart', (e) => {\r\n\t\t\r\n\t\t\tif (!doubleTapBefore) {\r\n\t\t\t\tdoubleTapBefore = getCellEventArgsSet(e).eventArgs;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdoubleTapBefore = null;\r\n\t\t\t\t}, 350);\r\n\t\t\t} else {\r\n\t\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\t\tif (eventArgs &&\r\n\t\t\t\t\teventArgs.col === doubleTapBefore.col &&\r\n\t\t\t\t\teventArgs.row === doubleTapBefore.row) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdoubleTapBefore = null;\r\n\r\n\t\t\t\tif (e.defaultPrevented) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlongTouchId = setTimeout(() => {\r\n\t\t\t\t//\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\t\tif (!abstractPos) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n\t\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t\t}\r\n\t\t\t}, 500);\r\n\t\t});\r\n\r\n\t\tfunction cancel(e) {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchcancel', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchmove', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchend', (e) => {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tgrid[_].cellSelector.select(e);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet isMouseover = false;\r\n\t\tlet mouseEnterCell = null;\r\n\t\tlet mouseOverCell = null;\r\n\t\tfunction onMouseenterCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEENTER_CELL, cell);\r\n\t\t\tmouseEnterCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseleaveCell() {\r\n\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\tmouseEnterCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSELEAVE_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction onMouseoverCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOVER_CELL, cell);\r\n\t\t\tmouseOverCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseoutCell() {\r\n\t\t\tconst beforeMouseCell = mouseOverCell;\r\n\t\t\tmouseOverCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOUT_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst scrollElement = grid[_].scrollable.getElement();\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseover', (e) => {\r\n\t\t\tisMouseover = true;\r\n\t\t});\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseout', (e) => {\r\n\t\t\tisMouseover = false;\r\n\t\t\tonMouseoutCell();\r\n\t\t});\r\n\r\n\t\tgrid[_].handler.on(grid[_].element, 'mouseleave', (e) => {\r\n\t\t\tonMouseleaveCell();\r\n\t\t});\r\n\t\t\t\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousemove', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\t\tif (beforeMouseCell) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t\tif (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\r\n\t\t\t\t\t\tonMouseoutCell();\r\n\t\t\t\t\t\tonMouseleaveCell();\r\n\t\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (isMouseover && !mouseOverCell) {\r\n\t\t\t\t\t\tonMouseoverCell({\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tonMouseoutCell();\r\n\t\t\t\tonMouseleaveCell();\r\n\t\t\t}\r\n\t\t\tif (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {style} = grid[_].element;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\tstyle.cursor = 'col-resize';\r\n\t\t\t} else {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'click', (e) => {\r\n\t\t\tif (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.CLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.CLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'dblclick', (e) => {\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.DBLCLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].focusControl.listen('keydown', (keyCode, e) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.KEYDOWN, keyCode, e);\r\n\t\t});\r\n\t\tgrid[_].selection.listen(EVENT_TYPE.SELECTED_CELL, (data) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n\t\t});\r\n\r\n\t\tgrid[_].scrollable.onScroll((e) => {\r\n\t\t\t_onScroll(grid, e);\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SCROLL, {event: e});\r\n\t\t});\r\n\t\tgrid[_].focusControl.onKeyDownMove((e) => {\r\n\t\t\t_onKeyDownMove(grid, e);\r\n\t\t});\r\n\t\tgrid.listen('copydata', (range) => {\r\n\t\t\tlet copyValue = '';\r\n\t\t\tfor (let {row} = range.start; row <= range.end.row; row++) {\r\n\t\t\t\tfor (let {col} = range.start; col <= range.end.col; col++) {\r\n\t\t\t\t\tconst copyCellValue = grid.getCopyCellValue(col, row);\r\n\t\t\t\t\tif (window.Promise && copyCellValue instanceof window.Promise) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst strCellValue = '' + copyCellValue;\r\n\t\t\t\t\t\tif (strCellValue.match(/^\\[object .*\\]$/)) {\r\n\t\t\t\t\t\t\t//object \r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcopyValue += strCellValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif (col < range.end.col) {\r\n\t\t\t\t\t\tcopyValue += '\\t';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopyValue += '\\n';\r\n\t\t\t}\r\n\t\t\treturn copyValue;\r\n\t\t});\r\n\t\tgrid[_].focusControl.onCopy((e) => array.find(grid.fireListeners('copydata', grid[_].selection.range), isDef));\r\n\t\tgrid[_].focusControl.onInput((value) => {\r\n\t\t\tconst {col, row} = grid[_].selection.select;\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.INPUT_CELL, {col, row, value});\r\n\t\t});\r\n\t\tgrid.bindEventsInternal();\r\n\t}\r\n\r\n\tfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n\t\tif (grid[_].frozenRowCount <= 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\tif (!frozenRect.inPoint(abstractX, abstractY)) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst cell = grid.getCellAt(abstractX, abstractY);\r\n\t\tconst cellRect = grid.getCellRect(cell.col, cell.row);\r\n\t\tif (abstractX < cellRect.left + offset) {\r\n\t\t\treturn cell.col - 1;\r\n\t\t}\r\n\t\tif (cellRect.right - offset < abstractX) {\r\n\t\t\treturn cell.col;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfunction _getVisibleRect(grid) {\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _getScrollableVisibleRect(grid) {\r\n\t\tlet frozenColsWidth = 0;\r\n\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\tfrozenColsWidth = frozenRect.width;\r\n\t\t}\r\n\t\tlet frozenRowsHeight = 0;\r\n\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\tfrozenRowsHeight = frozenRect.height;\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left + frozenColsWidth,\r\n\t\t\t\tgrid[_].scroll.top + frozenRowsHeight,\r\n\t\t\t\tgrid[_].canvas.width - frozenColsWidth,\r\n\t\t\t\tgrid[_].canvas.height - frozenRowsHeight\r\n\t\t);\r\n\t}\r\n\r\n\tfunction _toRelativeRect(grid, absoluteRect) {\r\n\t\tconst rect = absoluteRect.copy();\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\trect.offsetLeft(-visibleRect.left);\r\n\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\treturn rect;\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\t/**\r\n\t * managing mouse down moving\r\n\t * @private\r\n\t */\r\n\tclass BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._events = {};\r\n\t\t\tthis._started = false;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\tmoving(e) {\r\n\t\t\treturn !!this._started;\r\n\t\t}\r\n\t\tlastMoving(e) {\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this.moving(e)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst last = this._mouseEndPoint;\r\n\t\t\tif (!last) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst pt = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\treturn pt.x === last.x && pt.y === last.y;\r\n\t\t}\r\n\t\t_bindMoveAndUp(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tthis._events.mousemove = this._handler.on(document.body, 'mousemove', (e) => this._mouseMove(e));\r\n\t\t\t\tthis._events.mouseup = this._handler.on(document.body, 'mouseup', (e) => this._mouseUp(e));\r\n\t\t\t} else {\r\n\t\t\t\tthis._events.touchmove = this._handler.on(document.body, 'touchmove', (e) => this._mouseMove(e), {passive: false});\r\n\t\t\t\tthis._events.touchend = this._handler.on(document.body, 'touchend', (e) => this._mouseUp(e));\r\n\t\t\t\tthis._events.touchcancel = this._handler.on(document.body, 'touchcancel', (e) => this._mouseUp(e));\r\n\t\t\t}\r\n\t\t\tthis._started = true;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\t_mouseMove(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\t\tthis._mouseUp(e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._moved = this._moveInternal(e) || this._moved/*calculation on after*/;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\t_mouseUp(e) {\r\n\t\t\tthis._handler.off(this._events.mousemove);\r\n\t\t\tthis._handler.off(this._events.touchmove);\r\n\t\t\tthis._handler.off(this._events.mouseup);\r\n\t\t\tthis._handler.off(this._events.touchend);\r\n\t\t\t// this._handler.off(this._events.mouseleave);\r\n\t\t\tthis._handler.off(this._events.touchcancel);\r\n\r\n\t\t\tthis._started = false;\r\n\r\n\t\t\tthis._upInternal(e);\r\n\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this._moved) { //\r\n\t\t\t\tthis._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis._mouseEndPoint = null;\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * managing cell selection operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass CellSelector extends BaseMouseDownMover {\r\n\t\tstart(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._cell = cell;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\tselect(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\t\t\tthis._cell = cell;\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell || (this._cell.col === cell.col && this._cell.row === cell.row)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, true);\r\n\r\n\t\t\t//make visible\r\n\t\t\tconst makeVisibleCol = (() => {\r\n\t\t\t\tif (cell.col < this._cell.col && 0 < cell.col) {\r\n\t\t\t\t\t// move left\r\n\t\t\t\t\treturn cell.col - 1;\r\n\t\t\t\t} else if (this._cell.col < cell.col && cell.col + 1 < this._grid.colCount) {\r\n\t\t\t\t\t// move right\r\n\t\t\t\t\treturn cell.col + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.col;\r\n\t\t\t})();\r\n\t\t\tconst makeVisibleRow = (() => {\r\n\t\t\t\tif (cell.row < this._cell.row && 0 < cell.row) {\r\n\t\t\t\t\t// move up\r\n\t\t\t\t\treturn cell.row - 1;\r\n\t\t\t\t} else if (this._cell.row < cell.row && cell.row + 1 < this._grid.rowCount) {\r\n\t\t\t\t\t// move down\r\n\t\t\t\t\treturn cell.row + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.row;\r\n\t\t\t})();\r\n\t\t\tif (makeVisibleCol !== cell.col || makeVisibleRow !== cell.row) {\r\n\t\t\t\tthis._grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n\t\t\t}\r\n\t\t\tthis._cell = cell;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_getTargetCell(e) {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst cell = this._grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * managing row width changing operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass ColumnResizer extends BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper(grid);\r\n\t\t\tthis._targetCol = -1;\r\n\t\t}\r\n\t\tstart(col, e) {\r\n\t\t\tlet pageX;\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\t({pageX} = e);\r\n\t\t\t} else {\r\n\t\t\t\t({pageX} = e.changedTouches[0]);\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = pageX;\r\n\t\t\tthis._preX = 0;\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._targetCol = col;\r\n\t\t\tthis._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n\r\n\t\t\tconst x = pageX - this._x;\r\n\t\t\tconst moveX = x - this._preX;\r\n\t\t\tthis._preX = x;\r\n\t\t\tconst pre = this._grid.getColWidth(this._targetCol);\r\n\t\t\tlet afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n\t\t\tif (afterSize < 10 && moveX < 0) {\r\n\t\t\t\tafterSize = 10;\r\n\t\t\t}\r\n\t\t\t_setColWidth(this._grid, this._targetCol, afterSize);\r\n\r\n\t\t\tconst rect = _getVisibleRect(this._grid);\r\n\t\t\trect.left = this._invalidateAbsoluteLeft;\r\n\t\t\t_invalidateRect(this._grid, rect);\r\n\r\n\t\t\tthis._grid.fireListeners(EVENT_TYPE.RESIZE_COLUMN, {col: this._targetCol});\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\tthis._grid.updateScroll();\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setSafeInputValue(input, value) {\r\n\t\tconst {type} = input;\r\n\t\tinput.type = '';\r\n\t\tinput.value = value;\r\n\t\tif (type) {\r\n\t\t\tinput.type = type;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Manage focus\r\n\t * @private\r\n\t */\r\n\tclass FocusControl extends EventTarget {\r\n\t\tconstructor(grid, parentElement, scrollable) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._scrollable = scrollable;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._input = document.createElement('input');\r\n\t\t\tthis._input.classList.add('grid-focus-control');\r\n\t\t\tthis._input.readOnly = true;\r\n\t\t\tparentElement.appendChild(this._input);\r\n\r\n\t\t\tthis._handler.on(this._input, 'compositionstart', (e) => {\r\n\t\t\t\tthis._input.classList.add('composition');\r\n\t\t\t\tthis._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t\tthis._isComposition = true;\r\n\t\t\t\tgrid.focus();\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'compositionend', (e) => {\r\n\t\t\t\tthis._isComposition = false;\r\n\t\t\t\tthis._input.classList.remove('composition');\r\n\t\t\t\tthis._input.style.font = '';\r\n\t\t\t\tif (!this._input.readOnly) {\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keypress', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._input.readOnly && e.key && e.key.length === 1) {\r\n\t\t\t\t\tif (e.key === 'c' && (e.ctrlKey || e.metaKey)) {\r\n\t\t\t\t\t\t//copy! for Firefox\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.fireListeners('input', e.key);\r\n\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tthis.fireListeners('keydown', keyCode, e);\r\n\r\n\t\t\t\tif (!this._input.readOnly && this._input.value) {\r\n\t\t\t\t\t// for Safari\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tconst inputClear = (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t};\r\n\r\n\t\t\tthis._handler.on(this._input, 'input', inputClear);\r\n\t\t\tthis._handler.on(this._input, 'keyup', inputClear);\r\n\t\t\tthis._handler.on(document, 'keydown', (e) => {\r\n\t\t\t\tif (!browser.IE) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.target !== this._input) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n\t\t\t\t\tsetSafeInputValue(this._input, 'dummy');\r\n\t\t\t\t\tthis._input.select();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._handler.on(document, 'copy', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!isDescendantElement(parentElement, e.target)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\tconst data = array.find(this.fireListeners('copy'), isDef);\r\n\t\t\t\tif (isDef(data)) {\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\tif (browser.IE) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', data); // IE\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', data); // Chrome, Firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonKeyDownMove(fn) {\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_LEFT ||\r\n\t\t\t\t\tkeyCode === KEY_UP ||\r\n\t\t\t\t\tkeyCode === KEY_RIGHT ||\r\n\t\t\t\t\tkeyCode === KEY_DOWN ||\r\n\t\t\t\t\tkeyCode === KEY_HOME ||\r\n\t\t\t\t\tkeyCode === KEY_END\r\n\t\t\t\t) {\r\n\t\t\t\t\tfn(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonInput(fn) {\r\n\t\t\treturn this.listen('input', fn);\r\n\t\t}\r\n\t\tonCopy(fn) {\r\n\t\t\treturn this.listen('copy', fn);\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\t// this._input.value = '';\r\n\t\t\tthis._input.focus();\r\n\t\t}\r\n\t\tsetFocusRect(rect) {\r\n\t\t\tconst top = this._scrollable.calcTop(rect.top);\r\n\t\t\tthis._input.style.top = (top - style.getScrollBarSize()).toFixed() + 'px';//position:relative IE position:relative\r\n\t\t\tthis._input.style.left = rect.left.toFixed() + 'px';\r\n\t\t\tthis._input.style.width = rect.width.toFixed() + 'px';\r\n\t\t\tthis._input.style.height = rect.height.toFixed() + 'px';\r\n\t\t}\r\n\t\tset editMode(editMode) {\r\n\t\t\tthis._input.readOnly = !editMode;\r\n\t\t}\r\n\t\tresetInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tconst composition = el.classList.contains('composition');\r\n\t\t\t\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tconst removeNames = [];\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tif (!this._inputStatus.hasOwnProperty(att.nodeName)) {\r\n\t\t\t\t\tremoveNames.push(att.name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tremoveNames.forEach((removeName) => {\r\n\t\t\t\tel.removeAttribute(removeName);\r\n\t\t\t});\r\n\t\t\tfor (const name in this._inputStatus) {\r\n\t\t\t\tel.setAttribute(name, this._inputStatus[name]);\r\n\t\t\t}\r\n\t\t\tif (composition) {\r\n\t\t\t\tel.classList.add('composition');\r\n\t\t\t\tel.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t} else {\r\n\t\t\t\tel.classList.remove('composition');\r\n\t\t\t}\r\n\t\t}\r\n\t\tstoreInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tthis._inputStatus = {};\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tthis._inputStatus[att.name] = att.value;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDefaultInputStatus() {\r\n\t\t\t// \r\n\t\t\t// this._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t}\r\n\t\tget editMode() {\r\n\t\t\treturn !this._input.readOnly;\r\n\t\t}\r\n\t\tget input() {\r\n\t\t\treturn this._input;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Selected area management\r\n\t */\r\n\tclass Selection extends EventTarget {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\r\n\t\t\tthis._sel = {col: 0, row: 0};\r\n\t\t\tthis._focus = {col: 0, row: 0};\r\n\t\t\t\r\n\t\t\tthis._start = {col: 0, row: 0};\r\n\t\t\tthis._end = {col: 0, row: 0};\r\n\t\t}\r\n\t\tget range() {\r\n\t\t\tconst startCol = Math.min(this._start.col, this._end.col);\r\n\t\t\tconst startRow = Math.min(this._start.row, this._end.row);\r\n\t\t\tconst endCol = Math.max(this._start.col, this._end.col);\r\n\t\t\tconst endRow = Math.max(this._start.row, this._end.row);\r\n\t\t\treturn {\r\n\t\t\t\tstart: {\r\n\t\t\t\t\tcol: startCol,\r\n\t\t\t\t\trow: startRow,\r\n\t\t\t\t},\r\n\t\t\t\tend: {\r\n\t\t\t\t\tcol: endCol,\r\n\t\t\t\t\trow: endRow,\r\n\t\t\t\t},\r\n\t\t\t\tinCell(col, row) {\r\n\t\t\t\t\treturn startCol <= col && col <= endCol &&\r\n\t\t\t\t\t\tstartRow <= row && row <= endRow;\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\tget select() {\r\n\t\t\treturn {\r\n\t\t\t\tcol: this._sel.col,\r\n\t\t\t\trow: this._sel.row\r\n\t\t\t};\r\n\t\t}\r\n\t\tset select(cell = {}) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcol = 0,\r\n\t\t\t\t\trow = 0\r\n\t\t\t\t} = cell;\r\n\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\tthis._setFocusCell(col, row, true);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setSelectCell(col, row) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tthis._sel = {col, row};\r\n\t\t\t\tthis._start = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setFocusCell(col, row, keepSelect) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tif (!keepSelect) {\r\n\t\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\t}\r\n\t\t\t\tthis._focus = {col, row};\r\n\t\t\t\tthis._end = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_wrapFireSelectedEvent(callback) {\r\n\t\t\tif (this._isWraped) {\r\n\t\t\t\tcallback();\r\n\t\t\t} else {\r\n\t\t\t\tthis._isWraped = true;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst before = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: false,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t\tconst after = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: true,\r\n\t\t\t\t\t\tbefore: {\r\n\t\t\t\t\t\t\tcol: before.col,\r\n\t\t\t\t\t\t\trow: before.row,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbefore.after = {\r\n\t\t\t\t\t\tcol: after.col,\r\n\t\t\t\t\t\trow: after.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, before);\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, after);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis._isWraped = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * This class manages the drawing process for each layer\r\n\t */\r\n\tclass DrawLayers {\r\n\t\tconstructor() {\r\n\t\t\tthis._layers = {};\r\n\t\t}\r\n\t\taddDraw(level, fn) {\r\n\t\t\tconst l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n\t\t\tl.addDraw(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tconst list = [];\r\n\t\t\tfor (const k in this._layers) {\r\n\t\t\t\tlist.push(this._layers[k]);\r\n\t\t\t}\r\n\t\t\tlist.sort((a, b) => a.level - b.level);\r\n\t\t\tlist.forEach((l) => l.draw(ctx));\r\n\t\t}\r\n\t}\r\n\tclass DrawLayer {\r\n\t\tconstructor(level) {\r\n\t\t\tthis._level = level;\r\n\t\t\tthis._list = [];\r\n\t\t}\r\n\t\tget level() {\r\n\t\t\treturn this._level;\r\n\t\t}\r\n\t\taddDraw(fn) {\r\n\t\t\tthis._list.push(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tthis._list.forEach((fn) => {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfn(ctx);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Context of cell drawing\r\n\t */\r\n\tclass DrawCellContext {\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tconstructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n\t\t\tthis._col = col;\r\n\t\t\tthis._row = row;\r\n\t\t\tthis._mode = 0;\r\n\t\t\tthis._ctx = ctx;\r\n\t\t\tthis._rect = rect;\r\n\t\t\tthis._drawRect = drawRect;\r\n\t\t\tthis._drawing = drawing;\r\n\t\t\tthis._selection = selection;\r\n\t\t\tthis._drawLayers = drawLayers;\r\n\t\t}\r\n\t\tget drawing() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawing;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tget row() {\r\n\t\t\treturn this._row;\r\n\t\t}\r\n\t\tget col() {\r\n\t\t\treturn this._col;\r\n\t\t}\r\n\t\t/**\r\n\t\t * select status.\r\n\t\t * @return {object} select status\r\n\t\t */\r\n\t\tgetSelectState() {\r\n\t\t\tconst sel = this._selection.select;\r\n\t\t\treturn {\r\n\t\t\t\tselected: sel.col === this._col && sel.row === this._row,\r\n\t\t\t\tselection: this._selection.range.inCell(this._col, this._row),\r\n\t\t\t};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Canvas context.\r\n\t\t * @return {CanvasRenderingContext2D} Canvas context.\r\n\t\t */\r\n\t\tgetContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._ctx;\r\n\t\t\t} else {\r\n\t\t\t\treturn this._grid._getInitContext();\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of cell.\r\n\t\t * @return {Rect} rect Rectangle of cell.\r\n\t\t */\r\n\t\tgetRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._rect;\r\n\t\t\t} else {\r\n\t\t\t\tif (this._rect) {\r\n\t\t\t\t\treturn this._rect;\r\n\t\t\t\t}\r\n\t\t\t\treturn this._grid.getCellRelativeRect(this._col, this._row);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetRect(rect) {\r\n\t\t\tthis._rect = rect;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of Drawing range.\r\n\t\t * @return {Rect} Rectangle of Drawing range.\r\n\t\t */\r\n\t\tgetDrawRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawRect;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\treturn this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * get Context of current state\r\n\t\t * @return {DrawCellContext} current DrawCellContext.\r\n\t\t */\r\n\t\ttoCurrentContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\tconst rect = _toRelativeRect(this._grid, absoluteRect);\r\n\t\t\t\tconst drawRect = this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t\tconst context = new DrawCellContext(\r\n\t\t\t\t\t\tthis._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection,\r\n\t\t\t\t\t\tthis._drawLayers\r\n\t\t\t\t);\r\n\t\t\t\t// toCurrentContext  toCurrentContext\r\n\t\t\t\tcontext.toCurrentContext = this.toCurrentContext.bind(this);\r\n\t\t\t\treturn context;\r\n\t\t\t}\r\n\t\t}\r\n\t\taddLayerDraw(level, fn) {\r\n\t\t\tthis._drawLayers.addDraw(level, fn);\r\n\t\t}\r\n\t\t_toRelativeDrawRect(absoluteRect) {\r\n\t\t\tconst visibleRect = _getVisibleRect(this._grid);\r\n\t\t\tlet rect = absoluteRect.copy();\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst isFrozenCell = this._grid.isFrozenCell(this._col, this._row);\r\n\t\t\tif (this._grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._grid.frozenColCount - 1, this._row);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\tMath.max(rect.left, fRect.right),\r\n\t\t\t\t\t\trect.top,\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this._grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._col, this._grid.frozenRowCount - 1);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\trect.left,\r\n\t\t\t\t\t\tMath.max(rect.top, fRect.bottom),\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\trect.offsetLeft(-visibleRect.left);\r\n\t\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\t\treturn rect;\r\n\t\t}\r\n\t\t_delayMode(grid, onTerminate) {\r\n\t\t\tthis._mode = 1;\r\n\t\t\tthis._ctx = null;\r\n\t\t\tthis._rect = null;\r\n\t\t\tthis._drawRect = null;\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._onTerminate = onTerminate;\r\n\t\t}\r\n\t\t/**\r\n\t\t * terminate\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tterminate() {\r\n\t\t\tif (this._mode !== 0) {\r\n\t\t\t\tthis._onTerminate();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * DrawGrid\r\n\t * @classdesc cheetahGrid.core.DrawGrid\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.core\r\n\t */\r\n\tclass DrawGrid extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * rowCount: grid row count.default 10\r\n\t\t * colCount: grid col count.default 10\r\n\t\t * frozenColCount: default 0\r\n\t\t * frozenRowCount: default 0\r\n\t\t * defaultRowHeight: default grid row height. default 40\r\n\t\t * defaultColWidth: default grid col width. default 80\r\n\t\t * parentElement: canvas parentElement\r\n\t\t * font: default font\r\n\t\t * underlayBackgroundColor: underlay background color\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\trowCount = 10,\r\n\t\t\t\t\tcolCount = 10,\r\n\t\t\t\t\tfrozenColCount = 0,\r\n\t\t\t\t\tfrozenRowCount = 0,\r\n\t\t\t\t\tdefaultRowHeight = 40,\r\n\t\t\t\t\tdefaultColWidth = 80,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tunderlayBackgroundColor,\r\n\t\t\t\t\tparentElement,\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis[_] = {};\r\n\t\t\tstyle.initDocument();\r\n\t\t\tthis[_].element = createRootElement();\r\n\t\t\tthis[_].scrollable = new Scrollable();\r\n\t\t\tthis[_].handler = new EventHandler();\r\n\t\t\tthis[_].selection = new Selection(this);\r\n\t\t\tthis[_].focusControl = new FocusControl(this, this[_].scrollable.getElement(), this[_].scrollable);\r\n\r\n\t\t\tthis[_].canvas = hiDPI.transform(document.createElement('canvas'));\r\n\t\t\tthis[_].context = this[_].canvas.getContext('2d', {alpha: false});\r\n\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\r\n\t\t\tthis[_].font = font;\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\r\n\t\t\t/////\r\n\t\t\tthis[_].rowHeightsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsLimit = {};\r\n\t\t\tthis[_].calcWidthContext = {\r\n\t\t\t\t_: this[_],\r\n\t\t\t\tget full() {\r\n\t\t\t\t\treturn this._.canvas.width;\r\n\t\t\t\t},\r\n\t\t\t\tget em() {\r\n\t\t\t\t\treturn this._.context.measureText('').width;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis[_].columnResizer = new ColumnResizer(this);\r\n\t\t\tthis[_].cellSelector = new CellSelector(this);\r\n\r\n\t\t\tthis[_].drawCells = {};\r\n\r\n\t\t\tthis[_].element.appendChild(this[_].canvas);\r\n\t\t\tthis[_].element.appendChild(this[_].scrollable.getElement());\r\n\t\t\tthis.updateScroll();\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.appendChild(this[_].element);\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t} else {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t}\r\n\t\t\t_bindEvents(this);\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this[_].element;\r\n\t\t}\r\n\t\tget canvas() {\r\n\t\t\treturn this[_].canvas;\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\tconst {col, row} = this[_].selection.select;\r\n\t\t\tthis.focusCell(col, row);\r\n\t\t}\r\n\t\tget selection() {\r\n\t\t\treturn this[_].selection;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset rowCount(rowCount) {\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget colCount() {\r\n\t\t\treturn this[_].colCount;\r\n\t\t}\r\n\t\tset colCount(colCount) {\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget frozenColCount() {\r\n\t\t\treturn this[_].frozenColCount;\r\n\t\t}\r\n\t\tset frozenColCount(frozenColCount) {\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t}\r\n\t\tget frozenRowCount() {\r\n\t\t\treturn this[_].frozenRowCount;\r\n\t\t}\r\n\t\tset frozenRowCount(frozenRowCount) {\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\t\t}\r\n\t\tget defaultRowHeight() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset defaultRowHeight(defaultRowHeight) {\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget defaultColWidth() {\r\n\t\t\treturn this[_].defaultColWidth;\r\n\t\t}\r\n\t\tset defaultColWidth(defaultColWidth) {\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this[_].font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis[_].font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn this[_].underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tconfigure(name, value) {\r\n\t\t\tconst cfg = this[_].config || (this[_].config = {});\r\n\t\t\tif (isDef(value)) {\r\n\t\t\t\tcfg[name] = value;\r\n\t\t\t}\r\n\t\t\treturn cfg[name];\r\n\t\t}\r\n\t\tupdateSize() {\r\n\t\t\t//\r\n\t\t\tthis[_].canvas.style.width = '';\r\n\t\t\tthis[_].canvas.style.height = '';\r\n\t\t\tconst width = Math.floor(this[_].canvas.offsetWidth ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetWidth - style.getScrollBarSize());\r\n\t\t\tconst height = Math.floor(this[_].canvas.offsetHeight ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetHeight - style.getScrollBarSize());\r\n\r\n\t\t\tthis[_].canvas.width = width;\r\n\t\t\tthis[_].canvas.height = height;\r\n\r\n\t\t\t//style\r\n\t\t\tthis[_].canvas.style.width = `${width}px`;\r\n\t\t\tthis[_].canvas.style.height = `${height}px`;\r\n\r\n\t\t\tconst sel = this[_].selection.select;\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\r\n\t\t}\r\n\t\tupdateScroll() {\r\n\t\t\tthis[_].scrollable.setScrollSize(_getScrollWidth(this), _getScrollHeight(this));\r\n\t\t\tthis[_].scroll = {\r\n\t\t\t\tleft: this[_].scrollable.scrollLeft,\r\n\t\t\t\ttop: this[_].scrollable.scrollTop,\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetRowHeight(row) {\r\n\t\t\treturn _getRowHeight(this, row);\r\n\t\t}\r\n\t\tsetRowHeight(row, height) {\r\n\t\t\t_setRowHeight(this, row, height);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetColWidth(col) {\r\n\t\t\treturn _getColWidth(this, col);\r\n\t\t}\r\n\t\tsetColWidth(col, width) {\r\n\t\t\t_setColWidth(this, col, width);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetMaxColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.max || undefined;\r\n\t\t}\r\n\t\tsetMaxColWidth(col, maxwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.max = maxwidth;\r\n\t\t}\r\n\t\tgetMinColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.min || undefined;\r\n\t\t}\r\n\t\tsetMinColWidth(col, minwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.min = minwidth;\r\n\t\t}\r\n\t\tgetCellRect(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n\t\t\tconst width = _getColWidth(this, col);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col) {\r\n\t\t\t\tabsoluteLeft += this[_].scroll.left;\r\n\t\t\t}\r\n\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, row - 1);\r\n\t\t\tconst height = _getRowHeight(this, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\tabsoluteTop += this[_].scroll.top;\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tgetCellRelativeRect(col, row) {\r\n\t\t\treturn _toRelativeRect(this, this.getCellRect(col, row));\r\n\t\t}\r\n\t\tgetCellsRect(startCol, startRow, endCol, endRow) {\r\n\t\t\tconst isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n\t\t\tconst isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n\t\t\tlet width = _getColsWidth(this, startCol, endCol);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.col) {\r\n\t\t\t\tconst scrollLeft = this[_].scroll.left;\r\n\t\t\t\tabsoluteLeft += scrollLeft;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n\t\t\t\t\twidth -= scrollLeft;\r\n\t\t\t\t\twidth = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, startRow - 1);\r\n\t\t\tlet height = _getRowsHeight(this, startRow, endRow);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.row) {\r\n\t\t\t\tconst scrollTop = this[_].scroll.top;\r\n\t\t\t\tabsoluteTop += scrollTop;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n\t\t\t\t\theight -= scrollTop;\r\n\t\t\t\t\theight = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tisFrozenCell(col, row) {\r\n\t\t\tconst isFrozenRow = this[_].frozenRowCount > 0 && row < this[_].frozenRowCount;\r\n\t\t\tconst isFrozenCol = this[_].frozenColCount > 0 && col < this[_].frozenColCount;\r\n\t\t\tif (isFrozenRow || isFrozenCol) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\trow: isFrozenRow,\r\n\t\t\t\t\tcol: isFrozenCol,\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetRowAt(absoluteY) {\r\n\t\t\tconst frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.row;\r\n\t\t\t}\r\n\t\t\tconst row = _getTargetRowAt(this, absoluteY);\r\n\t\t\treturn row ? row.row : -1;\r\n\r\n\t\t}\r\n\t\tgetColAt(absoluteX) {\r\n\t\t\tconst frozen = _getTargetFrozenColAt(this, absoluteX);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.col;\r\n\t\t\t}\r\n\t\t\tconst col = _getTargetColAt(this, absoluteX);\r\n\t\t\treturn col ? col.col : -1;\r\n\t\t}\r\n\t\tgetCellAt(absoluteX, absoluteY) {\r\n\t\t\treturn {\r\n\t\t\t\trow: this.getRowAt(absoluteY),\r\n\t\t\t\tcol: this.getColAt(absoluteX),\r\n\t\t\t};\r\n\t\t}\r\n\t\tmakeVisibleCell(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = this.getCellRect(col, row);\r\n\t\t\tconst visibleRect = _getScrollableVisibleRect(this);\r\n\t\t\tif (visibleRect.contains(rect)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.col) {\r\n\t\t\t\tif (rect.left < visibleRect.left) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n\t\t\t\t} else if (visibleRect.right < rect.right) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.row) {\r\n\t\t\t\tif (rect.top < visibleRect.top) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.top - rect.top;\r\n\t\t\t\t} else if (visibleRect.bottom < rect.bottom) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfocusCell(col, row) {\r\n\t\t\tconst oldEditMode = this[_].focusControl.editMode;\r\n\t\t\tif (oldEditMode) {\r\n\t\t\t\tthis[_].focusControl.resetInputStatus();\r\n\t\t\t}\r\n\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(col, row));\r\n\t\t\t\r\n\t\t\tconst {col: selCol, row: selRow} = this[_].selection.select;\r\n\t\t\tconst results = this.fireListeners(\r\n\t\t\t\t\tEVENT_TYPE.EDITABLEINPUT_CELL,\r\n\t\t\t\t\t{col: selCol, row: selRow}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tconst editMode = (array.findIndex(results, (v) => !!v) >= 0);\r\n\t\t\tthis[_].focusControl.editMode = editMode;\r\n\t\t\t\r\n\t\t\tif (editMode) {\r\n\t\t\t\tthis[_].focusControl.storeInputStatus();\r\n\t\t\t\tthis[_].focusControl.setDefaultInputStatus();\r\n\t\t\t\tthis.fireListeners(\r\n\t\t\t\t\t\tEVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\t\t\t\t\t{col: selCol, row: selRow, input: this[_].focusControl.input}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Failure occurs in IE if focus is not last\r\n\t\t\tthis[_].focusControl.focus();\r\n\t\t}\r\n\t\tinvalidateCell(col, row) {\r\n\t\t\tthis.invalidateGridRect(col, row);\r\n\t\t}\r\n\t\tinvalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n\t\t\tconst offset = this.getOffsetInvalidateCells();\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\tstartCol -= offset;\r\n\t\t\t\tstartRow -= offset;\r\n\t\t\t\tendCol += offset;\r\n\t\t\t\tendRow += offset;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\tconst cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n\t\t\tconst invalidateTarget = visibleRect.intersection(cellsRect);\r\n\t\t\tif (invalidateTarget) {\r\n\r\n\t\t\t\tif (this[_].frozenColCount > 0 && endCol >= this[_].frozenColCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenColsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.left = Math.min(frozenRect.right - 1, frozenRect.right);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this[_].frozenRowCount > 0 && endRow >= this[_].frozenRowCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_invalidateRect(this, invalidateTarget);\r\n\t\t\t}\r\n\t\t}\r\n\t\tinvalidate() {\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\t_invalidateRect(this, visibleRect);\r\n\t\t}\r\n\t\t/**\r\n\t\t * get cell value at copy action\r\n\t\t * <p>\r\n\t\t * Please implement\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\t//Please implement get cell value!!\r\n\t\t}\r\n\t\t/**\r\n\t\t * Draw a cell\r\n\t\t * <p>\r\n\t\t * Please implement cell drawing.\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @param  {DrawCellContext} context context of cell drawing.\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\t//Please implement cell drawing!!\r\n\t\t}\r\n\t\taddDisposable(disposable) {\r\n\t\t\tif (!disposable || !disposable.dispose || typeof disposable.dispose !== 'function') {\r\n\t\t\t\tthrow new Error('not disposable!');\r\n\t\t\t}\r\n\t\t\tconst disposables = this[_].disposables = this[_].disposables || [];\r\n\t\t\tdisposables.push(disposable);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis[_].handler.dispose();\r\n\t\t\tthis[_].scrollable.dispose();\r\n\t\t\tthis[_].focusControl.dispose();\r\n\t\t\tthis[_].columnResizer.dispose();\r\n\t\t\tthis[_].cellSelector.dispose();\r\n\t\t\tif (this[_].disposables) {\r\n\t\t\t\tthis[_].disposables.forEach((disposable) => disposable.dispose());\r\n\t\t\t\tthis[_].disposables = null;\r\n\t\t\t}\r\n\r\n\t\t\tconst {parentElement} = this[_].element;\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.removeChild(this[_].element);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetAttachCellArea(col, row) {\r\n\t\t\treturn {\r\n\t\t\t\telement: this.getElement(),\r\n\t\t\t\trect: _toRelativeRect(this, this.getCellRect(col, row)),\r\n\t\t\t};\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\t//nop\r\n\t\t}\r\n\t\tgetTargetRowAtInternal(absoluteY) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowsHeightInternal(startRow, endRow) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetScrollHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col - 1;\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col + 1;\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row - 1;\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row + 1;\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t_getInitContext() {\r\n\t\t\tconst ctx = this[_].context;\r\n\t\t\t//\r\n\t\t\tctx.fillStyle = 'white';\r\n\t\t\tctx.strokeStyle = 'black';\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'top';\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.font = this.font || '16px sans-serif';\r\n\t\t\treturn ctx;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = DrawGrid;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {each}} = require('./utils');\r\n\tlet nextId = 1;\r\n\r\n\tclass EventHandler {\r\n\t\tconstructor() {\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\ton(target, type, listener, ...options) {\r\n\t\t\tif (target.addEventListener) {\r\n\t\t\t\ttarget.addEventListener(type, listener, ...options);\r\n\t\t\t}\r\n\t\t\tconst obj = {\r\n\t\t\t\ttarget, type, listener, options\r\n\t\t\t};\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis._listeners[id] = obj;\r\n\t\t\treturn id;\r\n\t\t}\r\n\t\ttryWithOffEvents(target, type, call) {\r\n\t\t\tconst list = [];\r\n\t\t\ttry {\r\n\t\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlist.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcall();\r\n\t\t\t} finally {\r\n\t\t\t\tlist.forEach((obj) => {\r\n\t\t\t\t\tif (obj.target.addEventListener) {\r\n\t\t\t\t\t\tobj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\toff(id) {\r\n\t\t\tif (!id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst obj = this._listeners[id];\r\n\t\t\tif (!obj) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete this._listeners[id];\r\n\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfire(target, type, ...args) {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tobj.listener.call(obj.target, ...args);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListener(target, type) {\r\n\t\t\tlet result = false;\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tclear() {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis.clear();\r\n\t\t\tthis._listeners = null;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventHandler;\r\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","'use strict';\r\n{\r\n\tclass Rect {\r\n\t\tconstructor(left, top, width, height) {\r\n\t\t\tthis._left = left;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t}\r\n\t\tstatic bounds(left, top, right, bottom) {\r\n\t\t\treturn new Rect(left, top, right - left, bottom - top);\r\n\t\t}\r\n\t\tstatic max(rect1, rect2) {\r\n\t\t\treturn Rect.bounds(\r\n\t\t\t\t\tMath.min(rect1.left, rect2.left),\r\n\t\t\t\t\tMath.min(rect1.top, rect2.top),\r\n\t\t\t\t\tMath.max(rect1.right, rect2.right),\r\n\t\t\t\t\tMath.max(rect1.bottom, rect2.bottom)\r\n\t\t\t);\r\n\t\t}\r\n\t\tget left() {\r\n\t\t\treturn this._left;\r\n\t\t}\r\n\t\tset left(left) {\r\n\t\t\tconst {right} = this;\r\n\t\t\tthis._left = left;\r\n\t\t\tthis.right = right;\r\n\t\t}\r\n\t\tget top() {\r\n\t\t\treturn this._top;\r\n\t\t}\r\n\t\tset top(top) {\r\n\t\t\tconst {bottom} = this;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis.bottom = bottom;\r\n\t\t}\r\n\t\tget width() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset width(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\tget height() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset height(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tget right() {\r\n\t\t\treturn this._right !== undefined ? this._right : (this._right = this.left + this.width);\r\n\t\t}\r\n\t\tset right(right) {\r\n\t\t\tthis._right = right;\r\n\t\t\tthis.width = right - this.left;\r\n\t\t}\r\n\t\tget bottom() {\r\n\t\t\treturn this._bottom !== undefined ? this._bottom : (this._bottom = this.top + this.height);\r\n\t\t}\r\n\t\tset bottom(bottom) {\r\n\t\t\tthis._bottom = bottom;\r\n\t\t\tthis.height = bottom - this.top;\r\n\t\t}\r\n\t\toffsetLeft(offset) {\r\n\t\t\tthis._left += offset;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\toffsetTop(offset) {\r\n\t\t\tthis._top += offset;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tcopy() {\r\n\t\t\treturn new Rect(this.left, this.top, this.width, this.height);\r\n\t\t}\r\n\t\tintersection(rect) {\r\n\t\t\tconst x0 = Math.max(this.left, rect.left);\r\n\t\t\tconst x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n\t\t\tif (x0 <= x1) {\r\n\t\t\t\tconst y0 = Math.max(this.top, rect.top);\r\n\t\t\t\tconst y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n\t\t\t\tif (y0 <= y1) {\r\n\t\t\t\t\treturn Rect.bounds(x0, y0, x1, y1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tcontains(another) {\r\n\t\t\treturn this.left <= another.left &&\r\n\t\t\t\t\tthis.left + this.width >= another.left + another.width &&\r\n\t\t\t\t\tthis.top <= another.top &&\r\n\t\t\t\t\tthis.top + this.height >= another.top + another.height;\r\n\t\t}\r\n\t\tinPoint(x, y) {\r\n\t\t\treturn this.left <= x &&\r\n\t\t\t\t\tthis.left + this.width >= x &&\r\n\t\t\t\t\tthis.top <= y &&\r\n\t\t\t\t\tthis.top + this.height >= y;\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Rect;\r\n}","'use strict';\r\n{\r\n\r\n\tfunction calcBasePosition(ctx, rect,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t\ttop: paddingTop = 0,\r\n\t\t\t\t\tbottom: paddingBottom = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\t// const textAlign = ctx.textAlign || 'left';\r\n\t\t// const textBaseline = ctx.textBaseline || 'middle';\r\n\t\t// ctx.textAlign = textAlign;\r\n\t\t// ctx.textBaseline = textBaseline;\r\n\r\n\t\t// let x = rect.left + offset + paddingLeft;\r\n\t\t// if (textAlign === 'right' || textAlign === 'end') {\r\n\t\t// \tx = rect.right - offset - paddingRight;\r\n\t\t// } else if (textAlign === 'center') {\r\n\t\t// \tx = rect.left + ((rect.width + paddingLeft - paddingRight) / 2);\r\n\t\t// }\r\n\t\t// let y = rect.top + offset;\r\n\t\t// if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t// \ty = rect.bottom - offset;\r\n\t\t// } else if (textBaseline === 'middle') {\r\n\t\t// \ty = rect.top + (rect.height / 2);\r\n\t\t// }\r\n\t\t// return {x, y};\r\n\t\treturn calcStartPosition(ctx, rect, 0, 0, {\r\n\t\t\toffset,\r\n\t\t\tpadding: {\r\n\t\t\t\tleft: paddingLeft,\r\n\t\t\t\tright: paddingRight,\r\n\t\t\t\ttop: paddingTop,\r\n\t\t\t\tbottom: paddingBottom,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction calcStartPosition(ctx, rect, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t\ttop: paddingTop = 0,\r\n\t\t\t\t\tbottom: paddingBottom = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\tconst textAlign = ctx.textAlign || 'left';\r\n\t\tconst textBaseline = ctx.textBaseline || 'middle';\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\r\n\t\tlet x = rect.left + offset + paddingLeft;\r\n\t\tif (textAlign === 'right' || textAlign === 'end') {\r\n\t\t\tx = rect.right - width - offset - paddingRight;\r\n\t\t} else if (textAlign === 'center') {\r\n\t\t\tx = rect.left + ((rect.width - width + paddingLeft - paddingRight) / 2);\r\n\t\t}\r\n\t\tlet y = rect.top + offset + paddingTop;\r\n\t\tif (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t\ty = rect.bottom - height - offset - paddingBottom;\r\n\t\t} else if (textBaseline === 'middle') {\r\n\t\t\ty = rect.top + ((rect.height - height + paddingTop - paddingBottom) / 2);\r\n\t\t}\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcalcBasePosition,\r\n\t\tcalcStartPosition,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst Style = require('../style/Style');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass Column extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Column(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.text(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Column;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {isPromise, isDef, obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst animate = require('../../internal/animate');\r\n\tconst BaseStyle = require('../style/Style');\r\n\tconst {COLUMN_FADEIN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\r\n\tfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n\t\tif (isDef(column._fadeinWhenCallbackInPromise)) {\r\n\t\t\treturn column._fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\treturn !!grid.configure('fadeinWhenCallbackInPromise');\r\n\t}\r\n\r\n\tfunction getFadinState(grid) {\r\n\t\tif (!grid[COLUMN_FADEIN_STATE_ID]) {\r\n\t\t\tsetReadonly(grid, COLUMN_FADEIN_STATE_ID, {});\r\n\t\t}\r\n\t\treturn grid[COLUMN_FADEIN_STATE_ID];\r\n\t}\r\n\tfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\treturn (point) => {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\tif (point === 1) {\r\n\t\t\t\tdelete state[stateKey];\r\n\t\t\t} else {\r\n\t\t\t\tstate[stateKey] = {\r\n\t\t\t\t\topacity: point,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\tdrawInternal();\r\n\r\n\t\t\tconst cellState = state[stateKey];\r\n\t\t\tif (cellState) {\r\n\t\t\t\t//\r\n\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst fadinMgr = {\r\n\t\tanimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\t// fadein animation\r\n\t\t\tconst state = getFadinState(grid);\r\n\r\n\t\t\tconst activeFadeins = [\r\n\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n\t\t\t];\r\n\t\t\tstate.activeFadeins = activeFadeins;\r\n\t\t\t\r\n\t\t\tanimate(500, (point) => {\r\n\t\t\t\tactiveFadeins.forEach((f) => f(point));\r\n\t\t\t\tif (point === 1) {\r\n\t\t\t\t\tdelete state.activeFadeins;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tmargeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tif (state.activeFadeins) {\r\n\t\t\t\tstate.activeFadeins.push(\r\n\t\t\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdrawInternal();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t};\r\n\r\n\tclass BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\r\n\t\t\t//Promisecallback\r\n\t\t\tthis._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn BaseStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, getRecord, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\t//\r\n\t\t\tif (isPromise(cellValue)) {\r\n\t\t\t\tif (context.drawing) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst start = Date.now();\r\n\t\t\t\treturn cellValue.then((val) => {\r\n\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst time = Date.now() - start;\r\n\r\n\t\t\t\t\tconst drawInternal = () => {\r\n\t\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\t\t\tthis.convertInternal(val),\r\n\t\t\t\t\t\t\t\tcurrentContext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n\t\t\t\t\t\tdrawInternal();//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst {col, row} = context;\r\n\t\t\t\t\t\tif (time < 80) {\r\n\t\t\t\t\t\t\t//80msPromiseCallback\r\n\t\t\t\t\t\t\tfadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\tfadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\tthis.convertInternal(cellValue),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\t//\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\t\tconst cellState = grid[COLUMN_FADEIN_STATE_ID] && grid[COLUMN_FADEIN_STATE_ID][stateKey];\r\n\t\t\t\tif (cellState) {\r\n\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn isDef(value) ? value : '';\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tdrawMessageInternal(message, context, style, helper, grid, info) {\r\n\t\t\tinfo.messageHandler.drawCellMessage(message, context, style, helper, info);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseColumn;\r\n}","'use strict';\r\n\r\nconst {isDef} = require('../internal/utils');\r\nclass Inline {\r\n\tconstructor(content) {\r\n\t\tthis._content = isDef(content) ? content : '';\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn ctx.measureText(this._content).width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(fn) {\r\n\t\t\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight,\r\n\t\toffsetTop,\r\n\t\toffsetBottom,\r\n\t}) {\r\n\t\tcanvashelper.fillTextRect(ctx, this._content,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t}\r\n}\r\nmodule.exports = Inline;","'use strict';\r\n{\r\n\tconst {isDef, obj: {each}} = require('../internal/utils');\r\n\t//private symbol\r\n\tconst {_} = require('../internal/symbolManager').get();\r\n\r\n\tlet nextId = 1;\r\n\t/**\r\n\t * event target.\r\n\t */\r\n\tclass EventTarget {\r\n\t\tconstructor() {\r\n\t\t\tthis[_] = {};\r\n\t\t\tthis[_].listeners = {};\r\n\t\t\tthis[_].listenerData = {};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Adds an event listener.\r\n\t\t * @param  {string} type The event type id.\r\n\t\t * @param  {function} listener Callback method.\r\n\t\t * @return {number} unique id for the listener.\r\n\t\t */\r\n\t\tlisten(type, listener) {\r\n\t\t\tconst list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n\t\t\tlist.push(listener);\r\n\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis[_].listenerData[id] = {\r\n\t\t\t\ttype,\r\n\t\t\t\tlistener,\r\n\t\t\t\tremove: () => {\r\n\t\t\t\t\tdelete this[_].listenerData[id];\r\n\t\t\t\t\tconst index = list.indexOf(listener);\r\n\t\t\t\t\tlist.splice(index, 1);\r\n\t\t\t\t\tif (!this[_].listeners[type].length) {\r\n\t\t\t\t\t\tdelete this[_].listeners[type];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\treturn id;\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Removes an event listener which was added with listen() by the id returned by listen().\r\n\t\t * @param  {number} id the id returned by listen().\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tunlisten(id) {\r\n\t\t\tthis[_].listenerData[id].remove();\r\n\t\t}\r\n\t\taddEventListener(type, listener) {\r\n\t\t\tthis.listen(type, listener);\r\n\t\t}\r\n\t\tremoveEventListener(type, listener) {\r\n\t\t\teach(this[_].listenerData, (obj, id) => {\r\n\t\t\t\tif (obj.type === type && obj.listener === listener) {\r\n\t\t\t\t\tthis.unlisten(id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListeners(type) {\r\n\t\t\treturn !!this[_].listeners[type];\r\n\t\t}\r\n\t\t/**\r\n\t\t * Fires all registered listeners\r\n\t\t * @param  {string}    type The type of the listeners to fire.\r\n\t\t * @param  {...*} args fire arguments\r\n\t\t * @return {*} the result of the last listener\r\n\t\t */\r\n\t\tfireListeners(type, ...args) {\r\n\t\t\tconst list = this[_].listeners[type];\r\n\t\t\tif (!list) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\treturn list.\r\n\t\t\t\tmap((listener) => listener.call(this, ...args)).\r\n\t\t\t\tfilter(isDef);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tdelete this[_];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventTarget;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst BaseAction = require('./BaseAction');\r\n\tclass Editor extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._readOnly = option.readOnly;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t\tset readOnly(readOnly) {\r\n\t\t\tthis._readOnly = !!readOnly;\r\n\t\t\tthis.onChangeReadOnlyInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Editor(this);\r\n\t\t}\r\n\t\tonChangeReadOnlyInternal() {}\r\n\t}\r\n\tmodule.exports = Editor;\r\n}","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nfunction createElement(tagName, {classList, text, html} = {}) {\r\n\tconst element = document.createElement(tagName);\r\n\tif (classList) {\r\n\t\tif (Array.isArray(classList)) {\r\n\t\t\telement.classList.add(...classList);\r\n\t\t} else {\r\n\t\t\telement.classList.add(classList);\r\n\t\t}\r\n\t}\r\n\tif (text) {\r\n\t\telement.textContent = text;\r\n\t} else if (html) {\r\n\t\telement.innerHTML = html;\r\n\t}\r\n\treturn element;\r\n}\r\n\r\nfunction empty(dom) {\r\n\tlet c;\r\n\twhile ((c = dom.firstChild)) {\r\n\t\tdom.removeChild(c);\r\n\t}\r\n}\r\nfunction isNode(arg) {\r\n\treturn !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n\tif (isNode(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\tconst dom = createElement('div', {html: arg});\r\n\treturn Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n\tif ((window.jQuery && arg instanceof window.jQuery)) {\r\n\t\treturn Array.prototype.map.call(arg, (a) => a);\r\n\t}\r\n\tif (Array.isArray(arg)) {\r\n\t\treturn arg.map(toNode);\r\n\t}\r\n\treturn [toNode(arg)];\r\n}\r\n\r\nfunction appendHtml(dom, inner) {\r\n\ttoNodeList(inner).forEach((node) => {\r\n\t\tdom.appendChild(node);\r\n\t});\r\n}\r\n\r\nfunction disableFocus(el) {\r\n\tel.dataset.disableBeforeTabIndex = el.tabIndex;\r\n\tel.tabIndex = -1;\r\n\tArray.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nfunction enableFocus(el) {\r\n\tif ('disableBeforeTabIndex' in el.dataset) {\r\n\t\tel.tabIndex = el.dataset.disableBeforeTabIndex;\r\n\t}\r\n\tArray.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\n\r\nfunction isFocusable(el) {\r\n\treturn isDef(el.tabIndex) && el.tabIndex > -1;\r\n}\r\nfunction findPrevSiblingFocusable(el) {\r\n\tlet n = el.previousSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.previousSibling;\r\n\t}\r\n\treturn n;\r\n}\r\nfunction findNextSiblingFocusable(el) {\r\n\tlet n = el.nextSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.nextSibling;\r\n\t}\r\n\treturn n;\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateElement,\r\n\tempty,\r\n\tisNode,\r\n\ttoNode,\r\n\ttoNodeList,\r\n\tappendHtml,\r\n\tdisableFocus,\r\n\tenableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n};","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\r\n\tconst style = {\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tof(columnStyle, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(), StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n\r\nfunction parse(calcStr) {\r\n\tfunction replacer(match, num, unit) {\r\n\t\tswitch (unit) {\r\n\t\tcase '%':\r\n\t\t\treturn `(${num} * this.full / 100)`;\r\n\t\tcase 'em':\r\n\t\t\treturn `(${num} * this.em)`;\r\n\t\tcase 'px':\r\n\t\t\treturn `(${num})`;\r\n\t\tdefault:\r\n\t\t\tthrow new Error('calc error');\r\n\t\t}\r\n\t}\r\n\tconst script = calcStr.replace(/^calc\\((.*)\\)$/, '$1').\r\n\t\treplace(/(\\d+)([A-Za-z%]+)/g, replacer).\r\n\t\treplace(/(\\d*\\.\\d+)([A-Za-z%]+)/g, replacer);\r\n\treturn {\r\n\t\teval(context) {\r\n\t\t\treturn (() => {\r\n\t\t\t\tfunction calc(v) { // eslint-disable-line no-unused-vars\r\n\t\t\t\t\treturn v;\r\n\t\t\t\t}\r\n\t\t\t\treturn eval(script);// eslint-disable-line no-eval\r\n\t\t\t}).call(context);\r\n\t\t}\r\n\t};\r\n}\r\nfunction toPx(value, context) {\r\n\tif (/^calc\\(.*\\)$/.test(value)) {\r\n\t\treturn parse(value).eval(context);\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*%$/.test(value)) {\r\n\t\treturn context.full * value.substr(0, value.length - 1) / 100;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*px$/.test(value)) {\r\n\t\treturn value.substr(0, value.length - 2) - 0;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*em$/.test(value)) {\r\n\t\treturn context.em * (value.substr(0, value.length - 2) - 0);\r\n\t}\r\n\treturn value - 0;\r\n}\r\n\r\nmodule.exports = {\r\n\tparse,\r\n\ttoPx(value, context) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\treturn toPx(value.trim(), context);\r\n\t\t}\r\n\t\treturn value - 0;\r\n\t}\r\n};","'use strict';\r\n{\r\n\t\r\n\r\n\tclass BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis._disabled = option.disabled;\r\n\t\t}\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tset disabled(disabled) {\r\n\t\t\tthis._disabled = !!disabled;\r\n\t\t\tthis.onChangeDisabledInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseAction(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tonChangeDisabledInternal() {}\r\n\t}\r\n\tmodule.exports = BaseAction;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\r\n\tlet defaultStyle;\r\n\tclass StdBaseStyle extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._textAlign = style.textAlign || 'left';\r\n\t\t\tthis._textBaseline = style.textBaseline || 'middle';\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new StdBaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = StdBaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst {isPromise} = require('../../internal/utils');\r\n\tconst icons = require('../../internal/icons');\r\n\tmodule.exports = {\r\n\t\tloadIcons(icon, context, helper, callback) {\r\n\t\t\tif (icon) {\r\n\t\t\t\tif (isPromise(icon)) {\r\n\t\t\t\t\ticon.then((i) => {\r\n\t\t\t\t\t\tthis.loadIcon(i, context.toCurrentContext(), callback);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst iconList = icons.toNormarizeArray(icon);\r\n\t\t\t\t\ticonList.forEach((i) => {\r\n\t\t\t\t\t\thelper.testFontLoad(i.font, i.content, context);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = iconList;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcallback(icon, context);\r\n\t\t},\r\n\t};\r\n}","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nconst ICON_PROP_KEYS = [\r\n\t'content',\r\n\t'font',\r\n\t'color',\r\n\t'className',\r\n\t'isLiga',\r\n\t'width',\r\n\t'src',\r\n\t'svg',\r\n\t'name',\r\n\t'path'\r\n];\r\n\r\nfunction quote(name) {\r\n\tconst quoted = [];\r\n\tconst split = name.split(/,\\s*/);\r\n\tfor (let i = 0; i < split.length; i++) {\r\n\t\tconst part = split[i].replace(/['\"]/g, '');\r\n\t\tif (part.indexOf(' ') === -1 && !(/^\\d/.test(part))) {\r\n\t\t\tquoted.push(part);\r\n\t\t} else {\r\n\t\t\tquoted.push('\\'' + part + '\\'');\r\n\t\t}\r\n\t}\r\n\treturn quoted.join(',');\r\n}\r\n\r\nconst doms = {};\r\nconst props = {};\r\n\r\nfunction getIconProps(tagName, className) {\r\n\tconst tagProps = props[tagName] || (props[tagName] = {});\r\n\tif (tagProps[className]) {\r\n\t\treturn tagProps[className];\r\n\t}\r\n\tconst dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n\tdom.className = className;\r\n\tdocument.body.appendChild(dom);\r\n\ttry {\r\n\t\tconst beforeStyle = document.defaultView.getComputedStyle(dom, '::before');\r\n\t\tlet content = beforeStyle.getPropertyValue('content');\r\n\t\tif (content.length >= 3 && (content[0] === '\"' || content[0] === '\\'')) {\r\n\t\t\tif (content[0] === content[content.length - 1]) {\r\n\t\t\t\tcontent = content.substr(1, content.length - 2);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet font = beforeStyle.getPropertyValue('font');\r\n\t\tif (!font) {\r\n\t\t\tfont = beforeStyle.getPropertyValue('font-style') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-variant') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-weight') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-size') + '/' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('line-height') + ' ' +\r\n\t\t\t\tquote(beforeStyle.getPropertyValue('font-family'));\r\n\t\t}\r\n\t\tconst color = beforeStyle.getPropertyValue('color');\r\n\t\tconst width = dom.clientWidth;\r\n\t\tconst isLiga = (beforeStyle.getPropertyValue('font-feature-settings') || '').indexOf('liga') > -1;\r\n\t\t\r\n\t\treturn (tagProps[className] = {\r\n\t\t\tcontent,\r\n\t\t\tfont,\r\n\t\t\tcolor,\r\n\t\t\twidth,\r\n\t\t\tisLiga,\r\n\t\t});\r\n\t} finally {\r\n\t\tdocument.body.removeChild(dom);\r\n\t}\r\n}\r\n\r\nfunction toPropArray(prop, count) {\r\n\tconst result = [];\r\n\tif (Array.isArray(prop)) {\r\n\t\tresult.push(...prop);\r\n\t\tfor (let i = prop.length; i < count; i++) {\r\n\t\t\tresult.push(null);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\tresult.push(prop);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction toSimpleArray(iconProps) {\r\n\tif (!iconProps) {\r\n\t\treturn iconProps;\r\n\t} else if (Array.isArray(iconProps)) {\r\n\t\treturn iconProps;\r\n\t}\r\n\r\n\tconst workData = {};\r\n\r\n\tlet count = 0;\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tif (iconProps[k]) {\r\n\t\t\tif (Array.isArray(iconProps[k])) {\r\n\t\t\t\tcount = Math.max(count, iconProps[k].length);\r\n\t\t\t} else {\r\n\t\t\t\tcount = Math.max(count, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tworkData[k] = toPropArray(iconProps[k], count);\r\n\t});\r\n\r\n\tconst result = [];\r\n\tfor (let i = 0; i < count; i++) {\r\n\t\tconst data = {};\r\n\t\tICON_PROP_KEYS.forEach((k) => {\r\n\t\t\tdata[k] = workData[k][i];\r\n\t\t});\r\n\t\tresult.push(data);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction normarize(iconProps) {\r\n\tconst data = {};\r\n\tfor (const k in iconProps) {\r\n\t\tif (k === 'className') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tdata[k] = iconProps[k];\r\n\t}\r\n\tif (iconProps.className) {\r\n\t\tconst prop = getIconProps(iconProps.tagName || 'i', iconProps.className);\r\n\t\tfor (const k in prop) {\r\n\t\t\tif (!isDef(iconProps[k])) {\r\n\t\t\t\tdata[k] = prop[k];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn data;\r\n}\r\n\r\nmodule.exports = {\r\n\ttoNormarizeArray(iconProps) {\r\n\t\tconst icons = toSimpleArray(iconProps);\r\n\t\tif (!icons) {\r\n\t\t\treturn icons;\r\n\t\t}\r\n\t\treturn icons.map((icon) => normarize(icon));\r\n\t},\r\n\tget iconPropKeys() {\r\n\t\treturn ICON_PROP_KEYS;\r\n\t},\r\n\tgetIconProps,\r\n};\r\n\r\n\r\n","'use strict';\r\n{\r\n\tconst {extend, getIgnoreCase} = require('./internal/utils');\r\n\tconst theme = require('./themes/theme');\r\n\tconst plugins = require('./plugins/themes');\r\n\tconst BASIC = theme.create(require('./themes/BASIC'));\r\n\tconst MATERIAL_DESIGN = theme.create(require('./themes/MATERIAL_DESIGN'));\r\n\r\n\tconst builtin = {\r\n\t\tBASIC,\r\n\t\tMATERIAL_DESIGN,\r\n\t};\r\n\tlet defTheme = theme.create({});\r\n\t/**\r\n\t * themes\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tconst themes = {\r\n\t\tget default() {\r\n\t\t\treturn defTheme;\r\n\t\t},\r\n\t\tset default(defaultTheme) {\r\n\t\t\tdefTheme = defaultTheme;\r\n\t\t},\r\n\t\ttheme,\r\n\t\tof(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (typeof value === 'string') {\r\n\t\t\t\tconst t = getIgnoreCase(themes.choices, value);\r\n\t\t\t\tif (t) {\r\n\t\t\t\t\treturn t;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @namespace cheetahGrid.themes.choices\r\n\t\t */\r\n\t\tget choices() {\r\n\t\t\treturn extend(builtin, plugins);\r\n\t\t},\r\n\t};\r\n\tmodule.exports = themes;\r\n}","'use strict';\r\n\r\nfunction getPath2D() {\r\n\t//return require('./legacy/canvas/Path2D');\r\n\treturn window.Path2D || require('./legacy/canvas/Path2D');\r\n}\r\n\r\nmodule.exports = {\r\n\tfill(module, ctx, x, y, w, h) {\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tconst {width, height} = module;\r\n\t\t\tconst {ud: upsideDown, x: offsetX = 0, y: offsetY = 0} = module;\r\n\t\t\tw = w || width;\r\n\t\t\th = h || height;\r\n\t\t\tconst xrate = w / width;\r\n\t\t\tconst yrate = h / (upsideDown ? -height : height);\r\n\t\t\tx = x || 0;\r\n\t\t\ty = upsideDown ? ((y || 0) + (-height * yrate)) : (y || 0);\r\n\r\n\t\t\tctx.translate(x, y);\r\n\t\t\tctx.scale(xrate, yrate);\r\n\t\t\tif (offsetX !== 0 || offsetY !== 0) {\r\n\t\t\t\tctx.translate(offsetX, offsetY);\r\n\t\t\t}\r\n\t\t\tconst Path2D = getPath2D();\r\n\t\t\tmodule.path2d = module.path2d || (new Path2D(module.d));\r\n\t\t\tctx.fill(module.path2d);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\tget Path2D() {\r\n\t\treturn getPath2D();\r\n\t},\r\n};\r\n","'use strict';\r\n{\r\n\tconst MultilineTextStyle = require('../style/MultilineTextStyle');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst utils = require('./columnUtils');\r\n\tclass MultilineTextColumn extends BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn MultilineTextStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MultilineTextColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t\tlineHeight,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst multilines = value.replace(/\\r?\\n/g, '\\n').replace(/\\r/g, '\\n').split('\\n');\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.multilineText(multilines, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\tlineHeight,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = MultilineTextColumn;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textBaseline = 'top'} = style;\r\n\t\tstyle.textBaseline = textBaseline;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass MultilineTextStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new MultilineTextStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tthis._lineHeight = style.lineHeight || '1em';\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MultilineTextStyle(this);\r\n\t\t}\r\n\t\tget lineHeight() {\r\n\t\t\treturn this._lineHeight;\r\n\t\t}\r\n\t\tset lineHeight(lineHeight) {\r\n\t\t\tthis._lineHeight = lineHeight;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = MultilineTextStyle;\r\n}","'use strict';\r\n{\r\n\tfunction getScrollBarWidth() {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.position = 'absolute';\r\n\t\tstyle.height = '9999px';\r\n\t\tstyle.width = 'calc(100vw - 100%)';\r\n\t\tstyle.opacity = 0;\r\n\t\tdummy.textContent = 'x';\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {width} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn parseInt(width, 10);\r\n\t}\r\n\r\n\tlet SCROLLBAR_SIZE;\r\n\tconst initDocument = () => {\r\n\t\trequire('./style.css');\r\n\t\tSCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n\t\tconst style = document.createElement('style');\r\n\t\tstyle.setAttribute('type', 'text/css');\r\n\t\tstyle.setAttribute('data-name', 'cheetah-grid');\r\n\t\tstyle.innerHTML =\r\n\t\t`\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n\r\n\t\tdocument.head.appendChild(style);\r\n\t};\r\n\r\n\tconst style = {\r\n\t\tinitDocument() {\r\n\t\t\tstyle.initDocument = () => {};\r\n\t\t\tinitDocument();\r\n\t\t},\r\n\t\tgetScrollBarSize() {\r\n\t\t\treturn SCROLLBAR_SIZE;\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst {calcBasePosition, calcStartPosition} = require('../internal/canvases');\r\n\tconst {ceil, PI} = Math;\r\n\r\n\tfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n\t\tfunction strokeRectLines(positions) {\r\n\t\t\tfor (let i = 0; i < borderColors.length; i++) {\r\n\t\t\t\tconst color = borderColors[i];\r\n\t\t\t\tconst preColor = borderColors[i - 1];\r\n\t\t\t\tif (color) {\r\n\t\t\t\t\tif (preColor !== color) {\r\n\t\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst pos1 = positions[i];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(pos1.x, pos1.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst pos2 = positions[i + 1];\r\n\t\t\t\t\tctx.lineTo(pos2.x, pos2.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst preColor = borderColors[borderColors.length - 1];\r\n\t\t\tif (preColor) {\r\n\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (borderColors[0] === borderColors[1] &&\r\n\t\t\tborderColors[0] === borderColors[2] &&\r\n\t\t\tborderColors[0] === borderColors[3]) {\r\n\t\t\tif (borderColors[0]) {\r\n\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrokeRectLines([\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t\t{x: left + width, y: top},\r\n\t\t\t\t{x: left + width, y: top + height},\r\n\t\t\t\t{x: left, y: top + height},\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\tfunction roundRect(ctx, left, top, width, height, radius) {\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n\t\tctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n\t\tctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n\t\tctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n\t\tctx.closePath();\r\n\t}\r\n\tfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.fill();\r\n\t}\r\n\tfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.stroke();\r\n\t}\r\n\tfunction fillTextRect(ctx, text, left, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcBasePosition(ctx, rect, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.fillText(text, pos.x, pos.y);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawInlineImageRect(ctx, image,\r\n\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\tdestWidth, destHeight,\r\n\t\t\tleft, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, destWidth, destHeight, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.drawImage(image,\r\n\t\t\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\t\t\tpos.x, pos.y, destWidth, destHeight\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an object containing the width of the checkbox.\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @return {Object} Object containing the width of the checkbox\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction measureCheckbox(ctx) {\r\n\t\treturn {\r\n\t\t\twidth: ctx.measureText('').width\r\n\t\t};\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * draw Checkbox\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {boolean|number} check checkbox check status\r\n\t * @param  {object} option option\r\n\t * @return {void}\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction drawCheckbox(ctx, x, y, check,\r\n\t\t\t{\r\n\t\t\t\tuncheckBgColor = '#FFF',\r\n\t\t\t\tcheckBgColor = 'rgb(76, 73, 72)',\r\n\t\t\t\tborderColor = '#000',\r\n\t\t\t\tboxSize = measureCheckbox(ctx).width,\r\n\t\t\t} = {}) {\r\n\t\tconst checkPoint = typeof check === 'number' ? (check > 1 ? 1 : check) : 1;\r\n\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n\t\t\t\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 1,\r\n\t\t\t\t\tceil(y) - 1,\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.strokeStyle = borderColor;\r\n\t\t\tstrokeRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 0.5,\r\n\t\t\t\t\tceil(y) - 0.5,\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tif (check) {\r\n\t\t\t\tctx.lineWidth = ceil(boxSize / 10);\r\n\t\t\t\tctx.strokeStyle = uncheckBgColor;\r\n\t\t\t\tlet leftWidth = boxSize / 4;\r\n\t\t\t\tlet rightWidth = boxSize / 2 * 0.9;\r\n\t\t\t\tconst leftLeftPos = x + boxSize * 0.2;\r\n\t\t\t\tconst leftTopPos = y + boxSize / 2;\r\n\r\n\t\t\t\tif (checkPoint < 0.5) {\r\n\t\t\t\t\tleftWidth = leftWidth * (checkPoint * 2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(leftLeftPos, leftTopPos);\r\n\t\t\t\tctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n\t\t\t\tif (checkPoint > 0.5) {\r\n\t\t\t\t\tif (checkPoint < 1) {\r\n\t\t\t\t\t\trightWidth = rightWidth * ((checkPoint - 0.5) * 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n\t\tconst {\r\n\t\t\tbackgroundColor = '#FFF',\r\n\t\t\tbgColor = backgroundColor,\r\n\t\t\tradius = 4,\r\n\t\t\tshadow = {},\r\n\t\t} = option;\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = bgColor;\r\n\r\n\t\t\tif (shadow) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, 0.24)',\r\n\t\t\t\t\tblur = 1,\r\n\t\t\t\t\toffsetX = 0,\r\n\t\t\t\t\toffsetY = 2,\r\n\t\t\t\t\toffset: {\r\n\t\t\t\t\t\tx: ox = offsetX,\r\n\t\t\t\t\t\ty: oy = offsetY\r\n\t\t\t\t\t} = {},\r\n\t\t\t\t} = shadow;\r\n\t\t\t\tctx.shadowColor = color;\r\n\t\t\t\tctx.shadowBlur = blur; //\r\n\t\t\t\tctx.shadowOffsetX = ox;\r\n\t\t\t\tctx.shadowOffsetY = oy;\r\n\t\t\t}\r\n\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(left),\r\n\t\t\t\t\tceil(top),\r\n\t\t\t\t\tceil(width),\r\n\t\t\t\t\tceil(height),\r\n\t\t\t\t\tradius\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * canvashelper\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools.canvashelper\r\n\t * @memberof cheetahGrid.tools\r\n\t */\r\n\tconst canvashelper = {\r\n\t\troundRect,\r\n\t\tfillRoundRect,\r\n\t\tstrokeRoundRect,\r\n\t\tdrawCheckbox,\r\n\t\tmeasureCheckbox,\r\n\t\tfillTextRect,\r\n\t\tdrawButton,\r\n\t\tdrawInlineImageRect,\r\n\t\tstrokeColorsRect,\r\n\t};\r\n\r\n\r\n\tmodule.exports = canvashelper;\r\n}","'use strict';\r\n{\r\n\tconst action = require('./columns/action');\r\n\tconst type = require('./columns/type');\r\n\tconst style = require('./columns/style');\r\n\r\n\t/**\r\n\t * columns\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\taction,\r\n\t\ttype,\r\n\t\tstyle,\r\n\t};\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\r\n\tconst BaseAction = require('./BaseAction');\r\n\r\n\tclass Action extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._action = option.action;\r\n\t\t}\r\n\t\tget action() {\r\n\t\t\treturn this._action;\r\n\t\t}\r\n\t\tset action(action) {\r\n\t\t\tthis._action = action;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Action(this);\r\n\t\t}\r\n\t\tgetState(grid) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst state = this.getState(grid);\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst record = grid.getRowRecord(cell.row);\r\n\t\t\t\tthis._action(record);\r\n\t\t\t};\r\n\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = Action;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst {isPromise, event: {cancel}} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tKEYDOWN,\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tfunction bindCellClickAction(grid, col, util, {\r\n\t\taction,\r\n\t\tmouseOver,\r\n\t\tmouseOut\r\n\t}) {\r\n\t\treturn [\r\n\t\t\t// click\r\n\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\trow: e.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOver) {\r\n\t\t\t\t\tif (!mouseOver({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t})) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOut) {\r\n\t\t\t\t\tmouseOut({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction bindCellKeyAction(grid, col, util, {action, acceptKeys = []}) {\r\n\t\tacceptKeys = [...acceptKeys, KEY_ENTER];\r\n\t\treturn [\r\n\t\t\t// enter key down\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (acceptKeys.indexOf(keyCode) === -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(sel.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t\tcancel(e);\r\n\t\t\t}),\r\n\r\n\t\t];\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tbindCellClickAction,\r\n\t\tbindCellKeyAction,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tfunction cubicBezier(x2, y2, x3, y3) {\r\n\t\tlet step;\r\n\t\tconst err = 0.0001;\r\n\r\n\t\tx2 *= 3;\r\n\t\ty2 *= 3;\r\n\t\tx3 *= 3;\r\n\t\ty3 *= 3;\r\n\t\t\t\r\n\t\treturn function(t) {\r\n\t\t\tlet p,\r\n\t\t\t\ta,\r\n\t\t\t\tb,\r\n\t\t\t\tc,\r\n\t\t\t\td,\r\n\t\t\t\tx,\r\n\t\t\t\ts;\r\n\t\t\tif (t < 0 || 1 < t) {\r\n\t\t\t\tthrow new Error(t);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tp = step || t;\r\n\r\n\t\t\tdo {\r\n\t\t\t\ta = 1 - p;\r\n\t\t\t\tb = a * a;\r\n\t\t\t\tc = p * p;\r\n\t\t\t\td = c * p;\r\n\t\t\t\t\t\r\n\t\t\t\tx = x2 * b * p + x3 * a * c + d;\r\n\t\t\t\ts = t - x;\r\n\t\t\t\tp += s * 0.5;\r\n\t\t\t} while (err < Math.abs(s));\r\n\r\n\t\t\tstep = p;\r\n\t\t\treturn\ty2 * b * p + y3 * a * c + d;\r\n\t\t};\r\n\t}\r\n\tconst EASINGS = {\r\n\t\tlinear(p) {\r\n\t\t\treturn p;\r\n\t\t},\r\n\t\teaseIn: cubicBezier(0.420, 0.000, 1.000, 1.000),\r\n\t\teaseOut: cubicBezier(0.000, 0.000, 0.580, 1.000),\r\n\t\teaseInOut: cubicBezier(0.420, 0.000, 0.580, 1.000),\r\n\t};\r\n\r\n\tconst raf = window.requestAnimationFrame || setTimeout;\r\n\t\r\n\tfunction now() {\r\n\t\treturn Date.now();\r\n\t}\r\n\t/**\r\n\t * <pre>\r\n\t * Animates.\r\n\t * </pre>\r\n\t * @function\r\n\t * @param {number} duration animation time.\r\n\t * @param {function} step\r\n\t * @param {function|string} easing\r\n\t * @returns {object} Deferred object.\r\n\t */\r\n\tmodule.exports = (duration, step, easing) => {\r\n\t\tconst startedAt = now();\r\n\r\n\t\tif (!easing) {\r\n\t\t\teasing = EASINGS.easeInOut;\r\n\t\t} else if (typeof easing === 'string') {\r\n\t\t\teasing = EASINGS[easing];\r\n\t\t}\r\n\r\n\t\tlet canceledFlg = false;\r\n\t\tconst createAnim = (resolve, reject) => {\r\n\t\t\tconst anim = () => {\r\n\t\t\t\tconst point = now() - startedAt;\r\n\t\t\t\tif (canceledFlg) {\r\n\t\t\t\t\t//cancel\r\n\t\t\t\t\tif (reject) { reject(); }\r\n\t\t\t\t} else if (point >= duration) {\r\n\t\t\t\t\t//end\r\n\t\t\t\t\tstep(1);\r\n\t\t\t\t\tif (resolve) { resolve(); }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstep(easing(point / duration));\r\n\r\n\t\t\t\t\traf(anim, 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn anim;\r\n\t\t};\r\n\t\tconst cancel = () => {\r\n\t\t\tcanceledFlg = true;\r\n\t\t};\r\n\t\tif (window.Promise) {\r\n\t\t\tconst result = new window.Promise((resolve, reject) => {\r\n\t\t\t\tconst anim = createAnim(resolve, reject);\r\n\t\t\t\tstep(0);\r\n\t\t\t\tanim();\r\n\t\t\t});\r\n\t\t\tresult.cancel = cancel;\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tconst anim = createAnim(() => {}, () => {});\r\n\t\t\tstep(0);\r\n\t\t\tanim();\r\n\t\t\treturn {\r\n\t\t\t\tcancel,\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst Editor = require('./Editor');\r\n\tconst {EVENT_TYPE: {\r\n\t\tINPUT_CELL,\r\n\t\tEDITABLEINPUT_CELL,\r\n\t\tSELECTED_CELL,\r\n\t\tDBLCLICK_CELL,\r\n\t\tDBLTAP_CELL,\r\n\t\tKEYDOWN,\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\tSCROLL\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_F2 = 113;\r\n\r\n\tclass BaseInputEditor extends Editor {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseInputEditor(this);\r\n\t\t}\r\n\t\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonOpenCellInternal(grid, cell) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonGridScrollInternal(grid) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst open = (cell) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onOpenCellInternal(grid, cell);\r\n\t\t\t};\r\n\r\n\t\t\tconst input = (cell, value) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onInputCellInternal(grid, cell, value);\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(INPUT_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinput({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t}, e.value);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLCLICK_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLTAP_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\te.event.preventDefault();\r\n\t\t\t\t\te.event.stopPropagation();\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\t\trow: sel.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\t\tthis.onChangeSelectCellInternal(grid, {col: e.col, row: e.row}, e.selected);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\t\tthis.onGridScrollInternal(grid);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.onSetInputAttrsInternal(grid, {\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t}, cell.input);\r\n\t\t\t\t}),\r\n\t\t\t\t\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = BaseInputEditor;\r\n}","'use strict';\r\n\r\nfunction normalize(options) {\r\n\tif (!options) {\r\n\t\treturn [];\r\n\t}\r\n\tif (Array.isArray(options)) {\r\n\t\treturn options;\r\n\t}\r\n\tif (typeof options === 'string') {\r\n\t\treturn normalize(JSON.parse(options));\r\n\t}\r\n\tconst result = [];\r\n\tfor (const k in options) {\r\n\t\tresult.push({\r\n\t\t\tvalue: k,\r\n\t\t\tcaption: options[k]\r\n\t\t});\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nmodule.exports = {\r\n\tnormalize,\r\n};\r\n","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\tconst NumberStyle = require('./style/NumberStyle');\r\n\tconst CheckStyle = require('./style/CheckStyle');\r\n\tconst ButtonStyle = require('./style/ButtonStyle');\r\n\tconst ImageStyle = require('./style/ImageStyle');\r\n\tconst IconStyle = require('./style/IconStyle');\r\n\tconst PercentCompleteBarStyle = require('./style/PercentCompleteBarStyle');\r\n\r\n\t/**\r\n\t * column styles\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.style\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst style = {\r\n\t\tget EVENT_TYPE() {\r\n\t\t\treturn BaseStyle.EVENT_TYPE;\r\n\t\t},\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tget NumberStyle() {\r\n\t\t\treturn NumberStyle;\r\n\t\t},\r\n\t\tget CheckStyle() {\r\n\t\t\treturn CheckStyle;\r\n\t\t},\r\n\t\tget ButtonStyle() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t},\r\n\t\tget ImageStyle() {\r\n\t\t\treturn ImageStyle;\r\n\t\t},\r\n\t\tget IconStyle() {\r\n\t\t\treturn IconStyle;\r\n\t\t},\r\n\t\tget PercentCompleteBarStyle() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t},\r\n\t\tof(columnStyle, record, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(record), record, StyleClass);\r\n\t\t\t\t} else if (record && columnStyle in record) {\r\n\t\t\t\t\treturn style.of(record[columnStyle], record, StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'right'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass NumberStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = NumberStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass CheckStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tborderColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t}\r\n\t\tget uncheckBgColor() {\r\n\t\t\treturn this._uncheckBgColor;\r\n\t\t}\r\n\t\tset uncheckBgColor(uncheckBgColor) {\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget checkBgColor() {\r\n\t\t\treturn this._checkBgColor;\r\n\t\t}\r\n\t\tset checkBgColor(checkBgColor) {\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget borderColor() {\r\n\t\t\treturn this._borderColor;\r\n\t\t}\r\n\t\tset borderColor(borderColor) {\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = CheckStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass ButtonStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tbuttonBgColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t}\r\n\t\tget buttonBgColor() {\r\n\t\t\treturn this._buttonBgColor;\r\n\t\t}\r\n\t\tset buttonBgColor(buttonBgColor) {\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = ButtonStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tclass ImageStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tthis._imageSizing = style.imageSizing;\r\n\t\t\tthis._margin = style.margin || 4;\r\n\t\t}\r\n\t\tget imageSizing() {\r\n\t\t\treturn this._imageSizing;\r\n\t\t}\r\n\t\tset imageSizing(imageSizing) {\r\n\t\t\tthis._imageSizing = imageSizing;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget margin() {\r\n\t\t\treturn this._margin;\r\n\t\t}\r\n\t\tset margin(margin) {\r\n\t\t\tthis._margin = margin;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass IconStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = IconStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\tlet defaultStyle;\r\n\tconst DEFAULT_BAR_COLOR = (num) => {\r\n\t\tif (num > 80) {\r\n\t\t\treturn '#20a8d8';\r\n\t\t}\r\n\t\tif (num > 50) {\r\n\t\t\treturn '#4dbd74';\r\n\t\t}\r\n\t\tif (num > 20) {\r\n\t\t\treturn '#ffc107';\r\n\t\t}\r\n\t\treturn '#f86c6b';\r\n\t};\r\n\tclass PercentCompleteBarStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new PercentCompleteBarStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n\t\t\tthis._barBgColor = style.barBgColor || '#f0f3f5';\r\n\t\t\tthis._barHeight = style.barHeight || 3;\r\n\t\t}\r\n\t\tget barColor() {\r\n\t\t\treturn this._barColor;\r\n\t\t}\r\n\t\tset barColor(barColor) {\r\n\t\t\tthis._barColor = barColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barBgColor() {\r\n\t\t\treturn this._barBgColor;\r\n\t\t}\r\n\t\tset barBgColor(barBgColor) {\r\n\t\t\tthis._barBgColor = barBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barHeight() {\r\n\t\t\treturn this._barHeight;\r\n\t\t}\r\n\t\tset barHeight(barHeight) {\r\n\t\t\tthis._barHeight = barHeight;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarStyle;\r\n}","'use strict';\r\n\r\nconst {then} = require('./utils');\r\nconst LRUCache = require('./LRUCache');\r\n\r\nconst allCache = {};\r\n\r\nfunction isDataUrl(url) {\r\n\treturn url.search(/^(data:)/) !== -1;\r\n}\r\n\r\nfunction loadImage(src) {\r\n\tif (!window.Promise) {\r\n\t\tconsole.error('Promise is not loaded. load Promise before this process.');\r\n\t\treturn {\r\n\t\t\tthen() {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst img = new Image();\r\n\tconst result = new window.Promise((resolve) => {\r\n\t\timg.onload = () => {\r\n\t\t\tresolve(img);\r\n\t\t};\r\n\t});\r\n\timg.onerror = (e) => {\r\n\t\tconst url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\r\n\t\tconsole.warn(`cannot load: ${url}`);\r\n\t\tthrow new Error(`IMAGE LOAD ERROR: ${url}`);\r\n\t};\r\n\timg.src = isDataUrl(src) ? src : `${src}?${Date.now()}`;\r\n\treturn result;\r\n}\r\n\r\nfunction getCacheOrLoad0(cache, src) {\r\n\treturn then(src, (src) => {\r\n\t\tconst c = cache.get(src);\r\n\t\tif (c) {\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconst result = loadImage(src).then((img) => {\r\n\t\t\tcache.put(src, img);\r\n\t\t\treturn img;\r\n\t\t});\r\n\t\tcache.put(src, result);\r\n\t\treturn result;\r\n\t});\r\n}\r\n\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n\tconst cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache(cacheSize));\r\n\treturn getCacheOrLoad0(cache, src);\r\n}\r\n\r\nmodule.exports = {\r\n\tloadImage,\r\n\tgetCacheOrLoad,\r\n};\r\n","/*eslint no-bitwise:0*/\r\n'use strict';\r\n\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (frozenRowCount - 1 === row) {\r\n\t\treturn ['#f2f2f2', '#f2f2f2', '#ccc7c7', '#f2f2f2'];\r\n\t} else {\r\n\t\treturn ['#f2f2f2'];\r\n\t}\r\n}\r\nfunction BORDER_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid: {colCount}\r\n\t} = args;\r\n\tif (colCount - 1 === col) {\r\n\t\treturn ['#ccc7c7', '#f2f2f2', '#ccc7c7', null];\r\n\t} else {\r\n\t\treturn ['#ccc7c7', null];\r\n\t}\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\tdefaultBgColor: '#FFF',\r\n\tfrozenRowsBgColor: '#FFF',\r\n\tfrozenRowsColor: 'rgba(0, 0, 0, 0.54)',\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: BORDER_COLOR,\r\n\tfrozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t\tborderColor: 'rgba(0, 0, 0, 0.26)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#FFF',\r\n};","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n{\r\n\tconst DataSource = require('./data/DataSource');\r\n\tconst CachedDataSource = require('./data/CachedDataSource');\r\n\t\r\n\r\n\t/**\r\n\t * data modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.data\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDataSource,\r\n\t\tCachedDataSource\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {array, isDef, isPromise, getOrApply, applyChainSafe, emptyFn} = require('../internal/utils');\r\n\tconst sort = require('../internal/sort');\r\n\tconst EventTarget = require('../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tUPDATE_LENGTH: 'update_length',\r\n\t\tUPDATED_LENGTH: 'updated_length',\r\n\t\tUPDATED_ORDER: 'updated_order',\r\n\t};\r\n\r\n\tfunction getValue(value, setPromiseBack) {\r\n\t\tvalue = getOrApply(value);\r\n\t\tif (isPromise(value)) {\r\n\t\t\tvalue = value.then((r) => {\r\n\t\t\t\tif (!isPromise(r)) {\r\n\t\t\t\t\tsetPromiseBack(r);\r\n\t\t\t\t}\r\n\t\t\t\treturn getValue(r, setPromiseBack);\r\n\t\t\t});\r\n\t\t\t//\r\n\t\t\tsetPromiseBack(value);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tfunction getField(record, field, setPromiseBack) {\r\n\t\tif (!isDef(record)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (isPromise(record)) {\r\n\t\t\treturn record.then((r) => getField(r, field, setPromiseBack));\r\n\t\t}\r\n\t\tif (field in record) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\tif (typeof field === 'function') {\r\n\t\t\treturn getValue(field(record), setPromiseBack);\r\n\t\t}\r\n\r\n\t\tconst ss = (field + '').split('.');\r\n\t\tif (ss.length <= 1) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\treturn getValue(applyChainSafe(record, (val, name) => getField(val, name, emptyFn), ...ss), setPromiseBack);\r\n\t}\r\n\tfunction setField(record, field, value) {\r\n\t\tif (field in record) {\r\n\t\t\trecord[field] = value;\r\n\t\t} else if (typeof field === 'function') {\r\n\t\t\treturn field(record, value);\r\n\t\t} else if (typeof field === 'string') {\r\n\t\t\tconst ss = (field + '').split('.');\r\n\t\t\tlet obj = record;\r\n\t\t\tconst {length} = ss;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst f = ss[i];\r\n\t\t\t\tif (i === length - 1) {\r\n\t\t\t\t\tobj[f] = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj = obj[f] || (obj[f] = {});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\trecord[field] = value;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\tfunction _getIndex(dataSource, index) {\r\n\t\tif (!dataSource._sortedIndexMap) {\r\n\t\t\treturn index;\r\n\t\t}\r\n\t\tconst mapIndex = dataSource._sortedIndexMap[index];\r\n\t\treturn isDef(mapIndex) ? mapIndex : index;\r\n\t}\r\n\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.DataSource\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass DataSource extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new DataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor({get, length = 0} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._get = get;\r\n\t\t\tthis._length = length;\r\n\t\t\tthis._sortedIndexMap = false;\r\n\t\t}\r\n\t\tget(index) {\r\n\t\t\treturn this.getOriginal(_getIndex(this, index));\r\n\t\t}\r\n\t\tgetField(index, field) {\r\n\t\t\treturn this.getOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\thasField(index, field) {\r\n\t\t\treturn this.hasOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\tsetField(index, field, value) {\r\n\t\t\treturn this.setOriginalField(_getIndex(this, index), field, value);\r\n\t\t}\r\n\t\tsort(field, order) {\r\n\t\t\tconst sortedIndexMap = new Array(this._length);\r\n\r\n\t\t\tconst orderFn = order !== 'desc'\r\n\t\t\t\t? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1\r\n\t\t\t\t: (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\r\n\r\n\t\t\treturn sort.sortPromise(\r\n\t\t\t\t\t(index) => isDef(sortedIndexMap[index])\r\n\t\t\t\t\t\t? sortedIndexMap[index]\r\n\t\t\t\t\t\t: (sortedIndexMap[index] = index),\r\n\t\t\t\t\t(index, rel) => {\r\n\t\t\t\t\t\tsortedIndexMap[index] = rel;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis._length,\r\n\t\t\t\t\torderFn,\r\n\t\t\t\t\t(index) => this.getOriginalField(index, field)\r\n\t\t\t).then(() => {\r\n\t\t\t\tthis._sortedIndexMap = sortedIndexMap;\r\n\t\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n\t\t\t});\r\n\t\t}\r\n\t\tget length() {\r\n\t\t\treturn this._length;\r\n\t\t}\r\n\t\tset length(length) {\r\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._length = length;\r\n\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\treturn getValue(this._get(index), (val) => {\r\n\t\t\t\tthis.recordPromiseCallBackInternal(index, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn getField(record, field, (val) => {\r\n\t\t\t\tthis.fieldPromiseCallBackInternal(index, field, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\thasOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (typeof field === 'function') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn field in record;\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn setField(record, field, value);\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t}\r\n\tDataSource.EMPTY = new DataSource({\r\n\t\tlength: 0,\r\n\t});\r\n\r\n\tmodule.exports = DataSource;\r\n}","'use strict';\r\n{\r\n\tconst {isPromise} = require('./utils');\r\n\r\n\tfunction wait(val) {\r\n\t\treturn val.then((v) => {\r\n\t\t\tif (isPromise(v)) {\r\n\t\t\t\treturn wait(v);\r\n\t\t\t} else {\r\n\t\t\t\treturn v;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction createArray(get, length) {\r\n\t\tconst array = new Array(length);\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tarray[i] = get(i);\r\n\t\t}\r\n\t\treturn array;\r\n\t}\r\n\tfunction createArrayPromise(get, getField, length) {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst plist = [];\r\n\t\t\tconst array = new Array(length);\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst data = get(i);\r\n\t\t\t\tconst record = {\r\n\t\t\t\t\tv: data,\r\n\t\t\t\t\tf: data\r\n\t\t\t\t};\r\n\t\t\t\tarray[i] = record;\r\n\t\t\t\tif (isPromise(data)) {\r\n\t\t\t\t\tplist.push(wait(data).then((v) => {\r\n\t\t\t\t\t\trecord.v = v;\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(\r\n\t\t\t\t\t() => setArrayField(array, getField)\r\n\t\t\t).then(resolve);\r\n\t\t});\r\n\t}\r\n\tfunction setArrayField(array, getField) {\r\n\t\tif (!getField) {\r\n\t\t\treturn Promise.resolve(array);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst length = array.length;\r\n\t\t\tconst plist = [];\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst record = array[i];\r\n\t\t\t\trecord.f = getField(record.v);\r\n\t\t\t\tif (isPromise(record.f)) {\r\n\t\t\t\t\tplist.push(wait(record.f).then((v) => {\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(() => resolve(array));\r\n\t\t});\r\n\t}\r\n\tconst sort = {\r\n\t\tsort(get, set, length, compare, getField) {\r\n\t\t\tconst old = createArray(get, length);\r\n\t\t\tif (getField) {\r\n\t\t\t\told.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n\t\t\t} else {\r\n\t\t\t\told.sort(compare);\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tset(i, old[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortArray(array, compare) {\r\n\t\t\tArray.prototype.sort.call(array, compare);\r\n\t\t},\r\n\t\tsortPromise(get, set, length, compare, getField) {\r\n\t\t\tif (window.Promise) {\r\n\t\t\t\treturn createArrayPromise(get, getField, length).then((array) => {\r\n\t\t\t\t\tarray.sort((r1, r2) => compare(r1.f, r2.f));\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tset(i, array[i].v);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsort.sort(get, set, length, compare, getField);\r\n\t\t\t\tconst dummyPromise = {\r\n\t\t\t\t\tthen(fn) {\r\n\t\t\t\t\t\tfn();\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcatch() {\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn dummyPromise;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = sort;\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {calcStartPosition} = require('./internal/canvases');\r\n\tconst inlines = require('./element/inlines');\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\tconst themes = require('./themes');\r\n\tconst {colorToRGB} = require('./internal/color');\r\n\tconst Rect = require('./internal/Rect');\r\n\tconst {getChainSafe, getOrApply, style: {toBoxArray}} = require('./internal/utils');\r\n\tconst fonts = require('./internal/fonts');\r\n\tconst calc = require('./internal/calc');\r\n\r\n\tfunction invalidateCell(context, grid) {\r\n\t\tconst {col, row} = context;\r\n\t\tgrid.invalidateCell(col, row);\r\n\t}\r\n\tfunction getColor(color, col, row, grid, context) {\r\n\t\treturn getOrApply(color, {\r\n\t\t\tcol,\r\n\t\t\trow,\r\n\t\t\tgrid,\r\n\t\t\tcontext,\r\n\t\t});\r\n\t}\r\n\tfunction getThemeColor(grid, ...names) {\r\n\t\treturn getChainSafe(grid.theme, ...names) || getChainSafe(themes.default, ...names);\r\n\t}\r\n\tfunction testFontLoad(font, value, context, grid) {\r\n\t\tif (font) {\r\n\t\t\tif (!fonts.check(font, value)) {\r\n\t\t\t\tfonts.load(font, value, () => invalidateCell(context, grid));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n\t\tfunction drawInline(inline, offsetLeft, offsetRight) {\r\n\t\t\tif (inline.canDraw()) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n\t\t\t\t\tctx.font = inline.font() || ctx.font;\r\n\t\t\t\t\tinline.draw({\r\n\t\t\t\t\t\tctx,\r\n\t\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\t\trect,\r\n\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\t\toffsetRight,\r\n\t\t\t\t\t\toffsetTop,\r\n\t\t\t\t\t\toffsetBottom,\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tinline.onReady(() => grid.invalidateCell(col, row));\r\n\t\t\t\t//noop\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (inlines.length === 1) {\r\n\t\t\t//1\r\n\t\t\tconst inline = inlines[0];\r\n\t\t\tdrawInline(inline, 0, 0);\r\n\t\t} else {\r\n\t\t\tconst inlineWidths = inlines.map((inline) => (inline.width({ctx}) || 0) - 0);\r\n\t\t\tlet offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n\r\n\t\t\tlet offsetLeft = 0;\r\n\t\t\tinlines.forEach((inline, index) => {\r\n\t\t\t\tconst inlineWidth = inlineWidths[index];\r\n\t\t\t\toffsetRight -= inlineWidth;\r\n\t\t\t\tdrawInline(inline, offsetLeft, offsetRight);\r\n\t\t\t\toffsetLeft += inlineWidth;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _inlineRect(grid, ctx, inline, rect, col, row,\r\n\t\t\t{\r\n\t\t\t\toffset,\r\n\t\t\t\tcolor,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons,\r\n\t\t\t} = {}) {\r\n\r\n\t\t//style\r\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tctx.font = font || ctx.font;\r\n\r\n\t\tconst actInlines = inlines.buildInlines(icons, inline);\r\n\t\tdrawInlines(ctx, actInlines, rect, offset, 0, 0, col, row, grid);\r\n\t}\r\n\r\n\tfunction _multiInlineRect(grid, ctx, multiInlines, rect, col, row,\r\n\t\t\t{\r\n\t\t\t\toffset,\r\n\t\t\t\tcolor,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\tlineHeight,\r\n\t\t\t\ticons,\r\n\t\t\t} = {}) {\r\n\t\t//style\r\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tctx.font = font || ctx.font;\r\n\r\n\t\tmultiInlines = [...multiInlines];\r\n\r\n\r\n\t\tlet paddingTop = 0;\r\n\t\tlet paddingBottom = lineHeight * (multiInlines.length - 1);\r\n\r\n\t\tif (ctx.textBaseline === 'top' || ctx.textBaseline === 'hanging') {\r\n\t\t\tconst em = ctx.measureText('').width;\r\n\t\t\tconst pad = (lineHeight - em) / 2;\r\n\t\t\tpaddingTop += pad;\r\n\t\t\tpaddingBottom -= pad;\r\n\t\t} else if (ctx.textBaseline === 'bottom' || ctx.textBaseline === 'alphabetic' || ctx.textBaseline === 'ideographic') {\r\n\t\t\tconst em = ctx.measureText('').width;\r\n\t\t\tconst pad = (lineHeight - em) / 2;\r\n\t\t\tpaddingTop -= pad;\r\n\t\t\tpaddingBottom += pad;\r\n\t\t}\r\n\t\tconst line = multiInlines.shift() || '';\r\n\t\tconst actInlines = inlines.buildInlines(icons, line);\r\n\t\tdrawInlines(ctx, actInlines, rect, offset, paddingTop, paddingBottom, col, row, grid);\r\n\t\tpaddingTop += lineHeight;\r\n\t\tpaddingBottom -= lineHeight;\r\n\t\twhile (multiInlines.length) {\r\n\t\t\tconst line = multiInlines.shift();\r\n\t\t\tconst actInlines = inlines.buildInlines(undefined, line);\r\n\t\t\tdrawInlines(ctx, actInlines, rect, offset, paddingTop, paddingBottom, col, row, grid);\r\n\t\t\tpaddingTop += lineHeight;\r\n\t\t\tpaddingBottom -= lineHeight;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction drawCheckbox(ctx, rect, check, helper,\r\n\t\t\t{\r\n\t\t\t\tanimElapsedTime = 1,\r\n\t\t\t\tuncheckBgColor = helper.theme.checkbox.uncheckBgColor,\r\n\t\t\t\tcheckBgColor = helper.theme.checkbox.checkBgColor,\r\n\t\t\t\tborderColor = helper.theme.checkbox.borderColor,\r\n\t\t\t\ttextAlign = 'center',\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t} = {}) {\r\n\t\tconst boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tconst pos = calcStartPosition(ctx, rect, boxWidth + 1/*+1*/, boxWidth + 1/*+1*/);\r\n\t\tif (0 < animElapsedTime && animElapsedTime < 1) {\r\n\t\t\tconst uncheckBgRGB = colorToRGB(uncheckBgColor);\r\n\t\t\tconst checkBgRGB = colorToRGB(checkBgColor);\r\n\t\t\tconst checkRGB = (colorName) => {\r\n\t\t\t\tconst start = uncheckBgRGB[colorName];\r\n\t\t\t\tconst end = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = start - end;\r\n\t\t\t\treturn Math.ceil(start - diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tconst uncheckRGB = (colorName) => {\r\n\t\t\t\tconst end = uncheckBgRGB[colorName];\r\n\t\t\t\tconst start = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = end - start;\r\n\t\t\t\treturn Math.ceil(start + diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tuncheckBgColor = check ? uncheckBgColor : `rgb(${uncheckRGB('r')} , ${uncheckRGB('g')}, ${uncheckRGB('b')})`;\r\n\t\t\tcheckBgColor = `rgb(${checkRGB('r')} , ${checkRGB('g')}, ${checkRGB('b')})`;\r\n\t\t}\r\n\r\n\t\tcanvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n\t\t\tuncheckBgColor,\r\n\t\t\tcheckBgColor,\r\n\t\t\tborderColor,\r\n\t\t});\r\n\t}\r\n\r\n\tclass Theme {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t}\r\n\t\tgetThemeColor(...name) {\r\n\t\t\treturn getThemeColor(this._grid, ...name);\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn getThemeColor(this._grid, 'font');\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'underlayBackgroundColor');\r\n\t\t}\r\n\t\t// color\r\n\t\tget color() {\r\n\t\t\treturn getThemeColor(this._grid, 'color');\r\n\t\t}\r\n\t\tget frozenRowsColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsColor');\r\n\t\t}\r\n\t\t// background\r\n\t\tget defaultBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'defaultBgColor');\r\n\t\t}\r\n\t\tget frozenRowsBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBgColor');\r\n\t\t}\r\n\t\tget selectionBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'selectionBgColor');\r\n\t\t}\r\n\t\t// border\r\n\t\tget borderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'borderColor');\r\n\t\t}\r\n\t\tget frozenRowsBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBorderColor');\r\n\t\t}\r\n\t\tget hiliteBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'hiliteBorderColor');\r\n\t\t}\r\n\t\tget checkbox() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'uncheckBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'checkBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget borderColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'borderColor');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tget button() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._button || (this._button = {\r\n\t\t\t\tget color() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'color');\r\n\t\t\t\t},\r\n\t\t\t\tget bgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'bgColor');\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\r\n\tfunction strokeRect(ctx, color, left, top, width, height) {\r\n\t\tif (!Array.isArray(color)) {\r\n\t\t\tif (color) {\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst borderColors = toBoxArray(color);\r\n\t\t\tcanvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\tclass GridCanvasHelper {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._theme = new Theme(grid);\r\n\t\t}\r\n\t\tcreateCalculator(context) {\r\n\t\t\treturn {\r\n\t\t\t\tcalcWidth(width) {\r\n\t\t\t\t\treturn calc.toPx(width, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.width;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcalcHeight(height) {\r\n\t\t\t\t\treturn calc.toPx(height, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.height;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetColor(color, col, row, ctx) {\r\n\t\t\treturn getColor(color, col, row, this._grid, ctx);\r\n\t\t}\r\n\t\ttoBoxArray(obj) {\r\n\t\t\treturn toBoxArray(obj);\r\n\t\t}\r\n\t\ttoBoxPixelArray(value, context) {\r\n\t\t\tif (typeof value === 'string' || Array.isArray(value)) {\r\n\t\t\t\tconst calculator = this.createCalculator(context);\r\n\t\t\t\tconst box = toBoxArray(value);\r\n\t\t\t\treturn [\r\n\t\t\t\t\tcalculator.calcHeight(box[0]),\r\n\t\t\t\t\tcalculator.calcWidth(box[1]),\r\n\t\t\t\t\tcalculator.calcHeight(box[2]),\r\n\t\t\t\t\tcalculator.calcWidth(box[3]),\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn toBoxArray(value);\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this._theme;\r\n\t\t}\r\n\t\tdrawWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawBorderWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tlet clipLeft = drawRect.left;\r\n\t\t\t\tlet clipWidth = drawRect.width;\r\n\t\t\t\tif (drawRect.left === rect.left) {\r\n\t\t\t\t\tclipLeft += -1;\r\n\t\t\t\t\tclipWidth += 1;\r\n\t\t\t\t}\r\n\t\t\t\tlet clipTop = drawRect.top;\r\n\t\t\t\tlet clipHeight = drawRect.height;\r\n\t\t\t\tif (drawRect.top === rect.top) {\r\n\t\t\t\t\tclipTop += -1;\r\n\t\t\t\t\tclipHeight += 1;\r\n\t\t\t\t}\r\n\t\t\t\tctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\ttext(text, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tlet rect = context.getRect();\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tif (padding) {\r\n\t\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\r\n\t\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\t\t\t\t\trect = new Rect(left, top, width, height);\r\n\t\t\t\t}\r\n\t\t\t\t_inlineRect(this._grid, ctx, text, rect, col, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tmultilineText(multilines, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tlineHeight = '1em',\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tlet rect = context.getRect();\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\tif (padding) {\r\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\r\n\t\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\t\t\t\t\trect = new Rect(left, top, width, height);\r\n\t\t\t\t}\r\n\t\t\t\tconst calculator = this.createCalculator(context);\r\n\t\t\t\tlineHeight = calculator.calcHeight(lineHeight);\r\n\t\t\t\t_multiInlineRect(this._grid, ctx, multilines, rect, col, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\tlineHeight,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillText(text, x, y, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'top',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\tctx.fillText(text, x, y);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfillCell(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillCellWithState(context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\t\t\tthis.fillCell(context, option);\r\n\t\t}\r\n\t\tfillRect(rect, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfillRectWithState(rect, context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\r\n\t\t\tthis.fillRect(rect, context, option);\r\n\t\t}\r\n\t\tgetFillColorState(context, option = {}) {\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tif (!state.selected && state.selection) {\r\n\t\t\t\treturn this.theme.selectionBgColor;\r\n\t\t\t} else {\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\treturn this.theme.frozenRowsBgColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn option.fillColor || this.theme.defaultBgColor;\r\n\t\t}\r\n\t\tborder(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tborderColor = this.theme.borderColor,\r\n\t\t\t\t\tlineWidth = 1,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tif (lineWidth === 1) {\r\n\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n\t\t\t\t} else if (lineWidth === 2) {\r\n\t\t\t\t\tctx.lineWidth = 2;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\t\t\tconst startOffset = (lineWidth / 2) - 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors,\r\n\t\t\t\t\t\t\trect.left + startOffset,\r\n\t\t\t\t\t\t\trect.top + startOffset,\r\n\t\t\t\t\t\t\trect.width - lineWidth + 1,\r\n\t\t\t\t\t\t\trect.height - lineWidth + 1\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tborderWithState(context, option = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\t//\r\n\t\t\tif (state.selected) {\r\n\t\t\t\toption.borderColor = this.theme.hiliteBorderColor;\r\n\t\t\t\toption.lineWidth = 2;\r\n\t\t\t\tthis.border(context, option);\r\n\t\t\t} else {\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\toption.borderColor = this.theme.frozenRowsBorderColor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toption.lineWidth = 1;\r\n\t\t\t\tthis.border(context, option);\r\n\r\n\t\t\t\t//\r\n\t\t\t\tconst sel = this._grid.selection.select;\r\n\t\t\t\tif (sel.col + 1 === col && sel.row === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (sel.col === col && sel.row + 1 === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckbox(check, context, option = {}) {\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tdrawCheckbox(ctx, context.getRect(), check, this, option);\r\n\t\t\t});\r\n\t\t}\r\n\t\tbutton(caption, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor = this.theme.button.bgColor,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor = this.theme.button.color,\r\n\t\t\t\t\ttextAlign = 'center',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tpadding = this.toBoxPixelArray(padding || rect.height / 8, context);\r\n\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\r\n\t\t\t\tcanvashelper.drawButton(ctx, left, top, width, height, {\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t\tradius: rect.height / 8,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t});\r\n\t\t\t\t_inlineRect(this._grid, ctx, caption, new Rect(left, top, width, height),\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\ttestFontLoad(font, value, context) {\r\n\t\t\treturn testFontLoad(font, value, context, this._grid);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = GridCanvasHelper;\r\n}","'use strict';\r\n{\r\n\tconst loads = {};\r\n\tconst legacy = !document.fonts;\r\n\tconst load = legacy ? function(font, testStr, callback) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\trequire('./legacy/fontwatch/FontWatchRunner').load(font, testStr, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t}, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t} : function(font, testStr, callback) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdocument.fonts.ready.then(() => {\r\n\t\t\tloads.all = true;\r\n\t\t});\r\n\t\tdocument.fonts.load(font).then(() => {\r\n\t\t\tloads[font] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t};\r\n\tconst check = legacy ? function(font, testStr) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tload(font, testStr, () => {});\r\n\t\treturn false;\r\n\t} : function(font, testStr) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!document.fonts.check(font)) {\r\n\t\t\tload(font, testStr, () => {});\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t\r\n\tmodule.exports = {\r\n\t\tcheck,\r\n\t\tload\r\n\t};\r\n}","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {getCacheOrLoad} = require('../internal/imgs');\r\nconst {isPromise} = require('../internal/utils');\r\n\r\nclass InlineImage extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsrc,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\tthis._src = src;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._imageLeft = imageLeft;\r\n\t\tthis._imageTop = imageTop;\r\n\t\tthis._imageWidth = imageWidth;\r\n\t\tthis._imageHeight = imageHeight;\r\n\r\n\t\tthis._onloaded = [];\r\n\r\n\r\n\t\tthis._loaded = false;\r\n\t\tif (isPromise(src)) {\r\n\t\t\tsrc.then((s) => {\r\n\t\t\t\tthis._src = s;\r\n\t\t\t\tthis._loadImage(s);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loadImage(src);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t_loadImage(src) {\r\n\t\tconst img = this._inlineImg = getCacheOrLoad('InlineImage', 50, src);\r\n\t\tif (isPromise(img)) {\r\n\t\t\timg.then((i) => {\r\n\t\t\t\tthis._loaded = true;\r\n\t\t\t\tthis._inlineImg = i;\r\n\r\n\t\t\t\tthis._onloaded.forEach((fn) => fn());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loaded = true;\r\n\t\t}\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width || (this._loaded ? this._inlineImg.width : 0);\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn this._loaded;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tif (isPromise(this._src) || isPromise(this._inlineImg)) {\r\n\t\t\tthis._onloaded.push(() => callback());\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t\toffsetTop,\r\n\t\t\t\toffsetBottom,\r\n\t\t\t}) {\r\n\t\tconst img = this._inlineImg;\r\n\t\tcanvashelper.drawInlineImageRect(ctx, img,\r\n\t\t\t\tthis._imageLeft || 0, this._imageTop || 0,\r\n\t\t\t\tthis._imageWidth || img.width, this._imageHeight || img.height,\r\n\t\t\t\tthis._width || img.width, this._height || img.height,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineImage;","/*eslint-disable camelcase*/\r\n'use strict';\r\n\r\nconst {extend} = require('./internal/utils');\r\nconst plugins = require('./plugins/icons');\r\nconst builtins = {\r\n\tget arrow_upward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg');\r\n\t},\r\n\tget arrow_downward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg');\r\n\t},\r\n\tget edit() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/image/svg/production/ic_edit_48px.svg');\r\n\t},\r\n\tget add() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/content/svg/production/ic_add_48px.svg');\r\n\t},\r\n\tget star() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg');\r\n\t},\r\n\tget star_border() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg');\r\n\t},\r\n\tget star_half() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg');\r\n\t},\r\n};\r\n\r\nmodule.exports = {\r\n\tget() {\r\n\t\treturn extend(builtins, plugins);\r\n\t}\r\n};","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n{\r\n\tconst rgbMap = {};\r\n\tfunction styleColorToRGB(color) {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.color = color;\r\n\t\tstyle.position = 'fixed';\r\n\t\tstyle.height = '1px';\r\n\t\tstyle.width = '1px';\r\n\t\tstyle.opacity = 0;\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {color: styleColor} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn colorToRGB0(styleColor);\r\n\t}\r\n\r\n\tfunction hexToNum(hex) {\r\n\t\treturn parseInt(hex, 16);\r\n\t}\r\n\tfunction createRGB(r, g, b, a = 1) {\r\n\t\treturn {r, g, b, a};\r\n\t}\r\n\tfunction tripleHexToRGB({1: r, 2: g, 3: b}) {\r\n\t\treturn createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n\t}\r\n\tfunction sextupleHexToRGB({1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2}) {\r\n\t\treturn createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n\t}\r\n\t\r\n\tfunction testRGB({r, g, b, a}) {\r\n\t\treturn 0 <= r && r <= 255 &&\r\n\t\t0 <= g && g <= 255 &&\r\n\t\t0 <= b && b <= 255 &&\r\n\t\t0 <= a && a <= 1;\r\n\t}\r\n\tfunction rateToByte(r) {\r\n\t\treturn Math.ceil(r * 255 / 100);\r\n\t}\r\n\tfunction colorToRGB0(color) {\r\n\t\tif (color.match(/^#[0-9a-f]{3}$/i)) {\r\n\t\t\treturn tripleHexToRGB(color);\r\n\t\t}\r\n\t\tif (color.match(/^#[0-9a-f]{6}$/i)) {\r\n\t\t\treturn sextupleHexToRGB(color);\r\n\t\t}\r\n\t\tlet ret = color.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0, ret[4] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]));\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]), ret[7] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction colorToRGB(color) {\r\n\t\tif (typeof color !== 'string') {\r\n\t\t\treturn createRGB(0, 0, 0, 0);\r\n\t\t}\r\n\t\tcolor = color.toLowerCase().trim();\r\n\t\tif (rgbMap[color]) {\r\n\t\t\treturn rgbMap[color];\r\n\t\t}\r\n\t\treturn colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcolorToRGB\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\r\n\tclass BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tthis._headerCell = headerCell;\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\t\t\t//\r\n\t\t\tthis.drawInternal(\r\n\t\t\t\t\tcellValue,\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t\tstyleContents.of(style, this.StyleClass),\r\n\t\t\t\t\thelper,\r\n\t\t\t\t\tgrid,\r\n\t\t\t\t\tinfo\r\n\t\t\t);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseHeader;\r\n}","'use strict';\r\n\r\nconst {extend} = require('../internal/utils');\r\nconst DrawGrid = require('../core/DrawGrid');\r\nconst EVENT_TYPE = extend(DrawGrid.EVENT_TYPE, {\r\n\tCHANGED_VALUE: 'changed_value',\r\n});\r\nmodule.exports = EVENT_TYPE;","'use strict';\r\n\r\n{\r\n\tconst core = require('./core');\r\n\tconst tools = require('./tools');\r\n\tconst columns = require('./columns');\r\n\tconst themes = require('./themes');\r\n\tconst data = require('./data');\r\n\t\r\n\tconst ListGrid = require('./ListGrid');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\t\r\n\tconst icons = require('./icons');\r\n\tconst register = require('./register');\r\n\t\r\n\t/**\r\n\t * Cheetah Grid\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcore,\r\n\t\ttools,\r\n\r\n\t\t// impl Grids\r\n\t\tListGrid,\r\n\r\n\t\t// objects\r\n\t\tcolumns,\r\n\t\tthemes,\r\n\t\tdata,\r\n\r\n\t\t// helper\r\n\t\tGridCanvasHelper,\r\n\t\tget icons() {\r\n\t\t\treturn icons.get();\r\n\t\t},\r\n\r\n\t\t//plugin registers\r\n\t\tregister,\r\n\r\n\t\tget _internal() {\r\n\t\t\tconsole.warn('use internal!!');\r\n\t\t\treturn {\r\n\t\t\t\tcolor: require('./internal/color'),\r\n\t\t\t\tsort: require('./internal/sort'),\r\n\t\t\t\tcalc: require('./internal/calc'),\r\n\t\t\t\tsymbolManager: require('./internal/symbolManager'),\r\n\t\t\t\tpath2DManager: require('./internal/path2DManager'),\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\r\n\t/**\r\n\t * core modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.core\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDrawGrid\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst EventHandler = require('./EventHandler');\r\n\tconst style = require('./style');\r\n\tconst {browser} = require('./utils');\r\n\t\r\n\tconst MAX_SCROLL = browser.heightLimit - 1000;\r\n\r\n\tfunction _update(scrollable) {\r\n\t\tlet domHeight;\r\n\t\tif (scrollable._height > MAX_SCROLL) {\r\n\t\t\tconst sbSize = style.getScrollBarSize();\r\n\t\t\tconst offsetHeight = scrollable._scrollable.offsetHeight;\r\n\t\t\tconst vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n\t\t\tconst rScrollRange = scrollable._height - offsetHeight + sbSize;\r\n\t\t\tscrollable._p = vScrollRange / rScrollRange;\r\n\t\t\tdomHeight = MAX_SCROLL;\r\n\t\t} else {\r\n\t\t\tscrollable._p = 1;\r\n\t\t\tdomHeight = scrollable._height;\r\n\t\t}\r\n\r\n\t\tscrollable._endPointElement.style.top = domHeight.toFixed() + 'px';\r\n\t\tscrollable._endPointElement.style.left = scrollable._width.toFixed() + 'px';\r\n\t\t\r\n\t}\r\n\r\n\tclass Scrollable {\r\n\t\tconstructor() {\r\n\t\t\tthis._handler = new EventHandler();\r\n\r\n\t\t\tthis._scrollable = document.createElement('div');\r\n\t\t\tthis._scrollable.classList.add('grid-scrollable');\r\n\t\t\tthis._height = 0;\r\n\t\t\tthis._width = 0;\r\n\r\n\t\t\tthis._endPointElement = document.createElement('div');\r\n\t\t\tthis._endPointElement.classList.add('grid-scroll-end-point');\r\n\t\t\t_update(this);\r\n\t\t\tthis._scrollable.appendChild(this._endPointElement);\r\n\r\n\t\t\t// const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n\t\t\t// this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n\t\t\t// const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n\t\t\t// const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n\t\t\t// this.scrollTop += delta < 0 ? point : -point;\r\n\t\t\t// });\r\n\t\t}\r\n\t\tcalcTop(top) {\r\n\t\t\tconst relativeTop = top - this.scrollTop;\r\n\t\t\treturn this._scrollable.scrollTop + relativeTop;\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this._scrollable;\r\n\t\t}\r\n\t\tsetScrollSize(width, height) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollWidth() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset scrollWidth(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollHeight() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset scrollHeight(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollLeft() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollLeft);\r\n\t\t}\r\n\t\tset scrollLeft(scrollLeft) {\r\n\t\t\tthis._scrollable.scrollLeft = scrollLeft;\r\n\t\t}\r\n\t\tget scrollTop() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollTop / this._p);\r\n\t\t}\r\n\t\tset scrollTop(scrollTop) {\r\n\t\t\tthis._scrollable.scrollTop = scrollTop * this._p;\r\n\t\t}\r\n\t\tonScroll(fn) {\r\n\t\t\tthis._handler.on(this._scrollable, 'scroll', fn);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = Scrollable;\r\n}","\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n\n// exports\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","'use strict';\r\n{\r\n\tconst indexFirst = (ary, elm) => {\r\n\t\tlet low = 0;\r\n\t\tlet high = ary.length - 1;\r\n\t\twhile (low <= high) {\r\n\t\t\tconst i = Math.floor((low + high) / 2);\r\n\t\t\tif (ary[i] === elm) {\r\n\t\t\t\treturn i;\r\n\t\t\t} else if (ary[i] > elm) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t} else {\r\n\t\t\t\tlow = i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn high < 0 ? 0 : high;\r\n\t};\r\n\r\n\r\n\tclass NumberMap {\r\n\t\tconstructor() {\r\n\t\t\tthis._keys = [];\r\n\t\t\tthis._vals = {};\r\n\t\t\tthis._sorted = false;\r\n\t\t}\r\n\t\tput(key, value) {\r\n\t\t\tif (!(key in this._vals)) {\r\n\t\t\t\tthis._keys.push(key);\r\n\t\t\t\tthis._sorted = false;\r\n\t\t\t}\r\n\t\t\tthis._vals[key] = value;\r\n\t\t}\r\n\t\tget(key) {\r\n\t\t\treturn this._vals[key];\r\n\t\t}\r\n\t\teachAll(fn) {\r\n\t\t\tthis._keys.forEach((key) => {\r\n\t\t\t\tfn(this.get(key), key);\r\n\t\t\t});\r\n\t\t}\r\n\t\teach(keyFrom, keyTo, fn) {\r\n\t\t\tconst {_keys: keys} = this;\r\n\t\t\tconst {length} = keys;\r\n\t\t\tif (!this._sorted) {\r\n\t\t\t\tkeys.sort((a, b) => {\r\n\t\t\t\t\tif (a < b) { return -1; }\r\n\t\t\t\t\tif (a > b) { return 1; }\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tthis._sorted = true;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n\t\t\t\tconst key = keys[i];\r\n\t\t\t\tif (keyFrom <= key && key <= keyTo) {\r\n\t\t\t\t\tfn(this.get(key), key);\r\n\t\t\t\t} else if (keyTo < key) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberMap;\r\n}","'use strict';\r\n\r\nconst EventHandler = require('./EventHandler');\r\nconst handler = new EventHandler();\r\n\r\nlet ratio;\r\nfunction setRatio() {\r\n\tratio = Math.ceil(window.devicePixelRatio || 1);\r\n\tif (ratio > 1 && (ratio % 2) !== 0) {\r\n\t\tratio += 1;\r\n\t}\r\n}\r\nsetRatio();\r\nhandler.on(window, 'resize', setRatio);\r\n\r\nmodule.exports = {\r\n\ttransform(canvas) {\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\tconst getAttribute = canvas.getAttribute;\r\n\t\tcanvas.getAttribute = function(name, ...args) {\r\n\t\t\tlet result = getAttribute.call(this, name, ...args);\r\n\t\t\tif (name === 'width' || name === 'height') {\r\n\t\t\t\tresult /= ratio;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t\tconst setAttribute = canvas.setAttribute;\r\n\t\tcanvas.setAttribute = function(name, val, ...args) {\r\n\t\t\tconst wh = name === 'width' || name === 'height';\r\n\t\t\tif (wh) {\r\n\t\t\t\tval *= ratio;\r\n\t\t\t}\r\n\t\t\tconst result = setAttribute.call(this, name, val, ...args);\r\n\t\t\tif (wh) {\r\n\t\t\t\tctx.scale(ratio, ratio);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tObject.defineProperty(canvas, 'width', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('width');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('width', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tObject.defineProperty(canvas, 'height', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('height');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('height', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tconst drawImage = ctx.drawImage;\r\n\t\tctx.drawImage = function(img, ...args) {\r\n\t\t\tif (img !== canvas || ratio === 1) {\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t}\r\n\t\t\tthis.save();\r\n\t\t\ttry {\r\n\t\t\t\tthis.scale(1 / ratio, 1 / ratio);\r\n\t\t\t\tif (args.length > 4) {\r\n\t\t\t\t\targs[4] = args[4] * ratio;\r\n\t\t\t\t\targs[5] = args[5] * ratio;\r\n\t\t\t\t} else {\r\n\t\t\t\t\targs[0] = args[0] * ratio;\r\n\t\t\t\t\targs[1] = args[1] * ratio;\r\n\t\t\t\t}\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn canvas;\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\r\n\t/**\r\n\t * tools\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcanvashelper,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst BaseAction = require('./action/BaseAction');\r\n\tconst Action = require('./action/Action');\r\n\tconst Editor = require('./action/Editor');\r\n\tconst CheckEditor = require('./action/CheckEditor');\r\n\tconst ButtonAction = require('./action/ButtonAction');\r\n\tconst SmallDialogInputEditor = require('./action/SmallDialogInputEditor');\r\n\tconst InlineInputEditor = require('./action/InlineInputEditor');\r\n\tconst InlineMenuEditor = require('./action/InlineMenuEditor');\r\n\r\n\tclass ImmutableCheckEditor extends CheckEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\tclass ImmutableInputEditor extends SmallDialogInputEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * column actions\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.action\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst action = {\r\n\t\tACTIONS: {\r\n\t\t\tCHECK: new ImmutableCheckEditor(),\r\n\t\t\tINPUT: new ImmutableInputEditor(),\r\n\t\t},\r\n\t\tget BaseAction() {\r\n\t\t\treturn BaseAction;\r\n\t\t},\r\n\t\tget Editor() {\r\n\t\t\treturn Editor;\r\n\t\t},\r\n\t\tget Action() {\r\n\t\t\treturn Action;\r\n\t\t},\r\n\t\tget CheckEditor() {\r\n\t\t\treturn CheckEditor;\r\n\t\t},\r\n\t\tget ButtonAction() {\r\n\t\t\treturn ButtonAction;\r\n\t\t},\r\n\t\tget SmallDialogInputEditor() {\r\n\t\t\treturn SmallDialogInputEditor;\r\n\t\t},\r\n\t\tget InlineInputEditor() {\r\n\t\t\tconsole.warn('InlineInputEditor is an experiment stage');\r\n\t\t\treturn InlineInputEditor;\r\n\t\t},\r\n\t\tget InlineMenuEditor() {\r\n\t\t\treturn InlineMenuEditor;\r\n\t\t},\r\n\t\tof(columnAction) {\r\n\t\t\tif (!columnAction) {\r\n\t\t\t\treturn action.ACTIONS.DEFAULT;\r\n\t\t\t} else if (typeof columnAction === 'string') {\r\n\t\t\t\treturn action.ACTIONS[columnAction.toUpperCase()] || action.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnAction;\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\tmodule.exports = action;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}, isPromise} = require('../../internal/utils');\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\tconst animate = require('../../internal/animate');\r\n\r\n\tconst Editor = require('./Editor');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_SPACE = 32;\r\n\r\n\tfunction toggleValue(val) {\r\n\t\tif (typeof val === 'number') {\r\n\t\t\tif (val === 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t} else if (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn 'true';\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn 'on';\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)0$/, '$11');\r\n\t\t\t} else if (val === 'true') {\r\n\t\t\t\treturn 'false';\r\n\t\t\t} else if (val === 'on') {\r\n\t\t\t\treturn 'off';\r\n\t\t\t} else if (val.match(/^0*1$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)1$/, '$10');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !val;\r\n\t}\r\n\r\n\tclass CheckEditor extends Editor {\r\n\t\tclone() {\r\n\t\t\treturn new CheckEditor(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tif (!grid[CHECK_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, CHECK_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID];\r\n\t\t\t\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tconst key = cell.col + ':' + cell.row;\r\n\t\t\t\tconst blockKey = key + '::block';\r\n\t\t\t\tif (this.readOnly || this.disabled || state[blockKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst ret = grid.doChangeValue(cell.col, cell.row, toggleValue);\r\n\t\t\t\tif (ret) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst onChange = () => {\r\n\t\t\t\t\t\t// checkbox animation\r\n\t\t\t\t\t\tanimate(200, (point) => {\r\n\t\t\t\t\t\t\tif (point === 1) {\r\n\t\t\t\t\t\t\t\tdelete state[key];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstate[key] = {\r\n\t\t\t\t\t\t\t\t\telapsed: point,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgrid.invalidateCell(cell.col, cell.row);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (isPromise(ret)) {\r\n\t\t\t\t\t\tstate[blockKey] = true;\r\n\t\t\t\t\t\tret.then(() => {\r\n\t\t\t\t\t\t\tdelete state[blockKey];\r\n\t\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction: (e) => {\r\n\t\t\t\t\t\tconst selrange = grid.selection.range;\r\n\t\t\t\t\t\tconst col = grid.selection.select.col;\r\n\t\t\t\t\t\tfor (let row = selrange.start.row; row <= selrange.end.row; row++) {\r\n\t\t\t\t\t\t\tif (!util.isTarget(col, row)) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taction({\r\n\t\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tacceptKeys: [KEY_ENTER, KEY_SPACE],\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckEditor;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst Action = require('./Action');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tclass ButtonAction extends Action {\r\n\t\tgetState(grid) {\r\n\t\t\tif (!grid[BUTTON_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, BUTTON_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\treturn grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonAction;\r\n}","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\t\r\nconst SmallDialogInputElement = require('./internal/SmallDialogInputElement');\r\nconst {SMALL_DIALOG_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new SmallDialogInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nclass SmallDialogInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._helperText = option.helperText;\r\n\t\tthis._inputValidator = option.inputValidator;\r\n\t\tthis._validator = option.validator;\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tdispose() {\r\n\t\tthis._inputDialogManager.dispose();\r\n\t\tthis._inputDialogManager = null;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tget helperText() {\r\n\t\treturn this._helperText;\r\n\t}\r\n\tget inputValidator() {\r\n\t\treturn this._inputValidator;\r\n\t}\r\n\tget validator() {\r\n\t\treturn this._validator;\r\n\t}\r\n\tclone() {\r\n\t\treturn new SmallDialogInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t// cancel input\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tSmallDialogInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputEditor;","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n\tthen,\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__small-dialog-input';\r\nconst INPUT_CLASSNAME = CLASSNAME + '__input';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\n\r\nfunction _focus(input, handler) {\r\n\tconst focus = () => {\r\n\t\tinput.focus();\r\n\r\n\t\tconst end = input.value.length;\r\n\t\ttry {\r\n\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t}\r\n\t\tif (document.selection) {\r\n\t\t\tconst range = input.createTextRange();\r\n\t\t\trange.collapse();\r\n\t\t\trange.moveEnd('character', end);\r\n\t\t\trange.moveStart('character', end);\r\n\t\t\trange.select();\r\n\t\t}\r\n\t};\r\n\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\tfocus();\r\n\t});\r\n}\r\n\r\nfunction createDialogElement() {\r\n\trequire('./SmallDialogInputElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst input = createElement('input', {classList: INPUT_CLASSNAME});\r\n\tinput.readonly = true;\r\n\tinput.tabIndex = -1;\r\n\telement.appendChild(input);\r\n\treturn element;\r\n}\r\n\r\nfunction bindProps(grid, dialog, input, editor) {\r\n\tconst {classList, helperText} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.add(...classList);\r\n\t}\r\n\tif (helperText && typeof helperText !== 'function') {\r\n\t\tdialog.dataset.helperText = helperText;\r\n\t}\r\n\tsetInputAttrs(editor, grid, input);\r\n}\r\n\r\nfunction unbindProps(grid, dialog, input, editor) {\r\n\tconst {classList} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.remove(...classList);\r\n\t}\r\n\tdelete dialog.dataset.helperText;\r\n\tinput.type = '';\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {type} = editor;\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass SmallDialogInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._dialog = createDialogElement();\r\n\t\tthis._input = this._dialog.querySelector('.' + INPUT_CLASSNAME);\r\n\t\tthis._bindDialogEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._dialog = null;\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (dialog.parentElement) {\r\n\t\t\tdialog.parentElement.removeChild(dialog);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tunbindProps(grid, dialog, input, this._beforePropEditor);\r\n\t\t}\r\n\r\n\t\tdelete dialog.dataset.errorMessage;\r\n\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = false;\r\n\t\tinput.tabIndex = 0;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tdialog.style.top = rect.top.toFixed() + 'px';\r\n\t\tdialog.style.left = rect.left.toFixed() + 'px';\r\n\t\tdialog.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(dialog);\r\n\t\t\t\r\n\t\tinput.value = value;\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\t\tconst activeData = {grid, col, row, editor};\r\n\t\tthis._onInputValue(input, activeData);\r\n\t\t_focus(input, handler);\r\n\t\tdialog.classList.add(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.remove(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = true;\r\n\r\n\t\t\r\n\t\tbindProps(grid, dialog, input, editor);\r\n\r\n\t\tthis._activeData = activeData;\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst dialog = this._dialog;\r\n\t\t\tconst input = this._input;\r\n\r\n\t\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\t\tinput.readonly = false;\r\n\t\t\tinput.tabIndex = -1;\r\n\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t\tthis._beforeValue = null;\r\n\t}\r\n\t_doChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\treturn then(this._validate(value), (res) => {\r\n\t\t\tif (res && value === input.value) {\r\n\t\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\tgrid.doChangeValue(col, row, () => value);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\t_isActive() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tif (!dialog || !dialog.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindDialogEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(dialog, 'click', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'dblclick', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'touchstart', stopPropagationOnly);\r\n\t\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t\tthis._onInputValue(input);\r\n\t\t});\r\n\t\tconst onKeyupAndPress = (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._onInputValue(input);\r\n\t\t};\r\n\t\thandler.on(input, 'keyup', onKeyupAndPress);\r\n\t\thandler.on(input, 'keypress', onKeyupAndPress);\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst input = this._input;\r\n\t\t\t\tconst {value} = input;\r\n\t\t\t\tthen(this._doChangeValue(), (r) => {\r\n\t\t\t\t\tif (r && value === input.value) {\r\n\t\t\t\t\t\tthis.detach(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else {\r\n\t\t\t\tthis._onInputValue(input);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t_onInputValue(input, activeData) {\r\n\t\tconst before = this._beforeValue;\r\n\t\tconst {value} = input;\r\n\t\tif (before !== value) {\r\n\t\t\tthis._onInputValueChange(value, before, activeData);\r\n\t\t}\r\n\t\tthis._beforeValue = value;\r\n\t}\r\n\t_onInputValueChange(after, before, activeData) {\r\n\t\tactiveData = activeData || this._activeData;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst {grid, col, row, editor} = activeData;\r\n\t\tif (typeof editor.helperText === 'function') {\r\n\t\t\tconst helperText = editor.helperText(after, {grid, col, row});\r\n\t\t\tif (helperText) {\r\n\t\t\t\tdialog.dataset.helperText = helperText;\r\n\t\t\t} else {\r\n\t\t\t\tdelete dialog.dataset.helperText;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ('errorMessage' in dialog.dataset) {\r\n\t\t\tthis._validate(after, true);\r\n\t\t}\r\n\t}\r\n\t_validate(value, inputOnly) {\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tlet message = null;\r\n\t\tif (editor.inputValidator) {\r\n\t\t\tmessage = editor.inputValidator(value, {grid, col, row});\r\n\t\t}\r\n\t\treturn then(message, (message) => {\r\n\t\t\tif (!message && editor.validator && !inputOnly) {\r\n\t\t\t\tmessage = editor.validator(value, {grid, col, row});\r\n\t\t\t}\r\n\t\t\treturn then(message, (message) => {\r\n\t\t\t\tif (message && value === input.value) {\r\n\t\t\t\t\tdialog.dataset.errorMessage = message;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete dialog.dataset.errorMessage;\r\n\t\t\t\t}\r\n\t\t\t\treturn !message;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n\n// exports\n","'use strict';\r\n\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nconst InlineInputElement = require('./internal/InlineInputElement');\r\nconst {INLINE_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nfunction doChangeValue(grid) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.doChangeValue();\r\n\t}\r\n}\r\n\r\n\r\nclass InlineInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tInlineInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputEditor;","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\nconst KEY_ENTER = 13;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-input';\r\n\r\nfunction createInputElement() {\r\n\trequire('./InlineInputElement.css');\r\n\treturn createElement('input', {classList: CLASSNAME});\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {classList, type} = editor;\r\n\tif (classList) {\r\n\t\tinput.classList.add(...classList);\r\n\t}\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass InlineInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._input = createInputElement();\r\n\t\tthis._bindInputEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst input = this._input;\r\n\t\tconst handler = this._handler;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tinput.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tinput.style.top = rect.top.toFixed() + 'px';\r\n\t\tinput.style.left = rect.left.toFixed() + 'px';\r\n\t\tinput.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(input);\r\n\r\n\t\tsetInputAttrs(editor, grid, input);\r\n\t\tinput.value = value;\r\n\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\r\n\t\tconst focus = () => {\r\n\t\t\tinput.focus();\r\n\r\n\t\t\tconst end = input.value.length;\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t\t}\r\n\t\t\tif (document.selection) {\r\n\t\t\t\tconst range = input.createTextRange();\r\n\t\t\t\trange.collapse();\r\n\t\t\t\trange.moveEnd('character', end);\r\n\t\t\t\trange.moveStart('character', end);\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t};\r\n\t\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\tfocus();\r\n\t\t});\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst input = this._input;\r\n\t\t\tthis._handler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\t\tinput.parentElement.removeChild(input);\r\n\t\t\t});\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\tdoChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\tconst {grid, col, row} = this._activeData;\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst input = this._input;\r\n\t\tif (!input || !input.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindInputEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(input, 'click', stopPropagationOnly);\r\n\t\thandler.on(input, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(input, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(input, 'dblclick', stopPropagationOnly);\r\n\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (getKeyCode(e) === KEY_ENTER) {\r\n\t\t\t\tif (!this._isActive()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {grid} = this._activeData;\r\n\r\n\t\t\t\tthis.doChangeValue();\r\n\t\t\t\tif (grid) {\r\n\t\t\t\t\tgrid.focus();\r\n\t\t\t\t}\r\n\t\t\t\tthis.detach();\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\thandler.on(input, 'blur', (e) => {\r\n\t\t\tthis.doChangeValue();\r\n\t\t\tthis.detach();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}\", \"\"]);\n\n// exports\n","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst {normalize} = require('../../internal/menu-items');\r\n\t\r\nconst Editor = require('./Editor');\r\nconst {EVENT_TYPE: {\r\n\tSELECTED_CELL,\r\n\tCLICK_CELL,\r\n\tKEYDOWN,\r\n\tSCROLL,\r\n\tMOUSEOVER_CELL,\r\n\tMOUSEOUT_CELL,\r\n\tMOUSEMOVE_CELL,\r\n}} = require('../../core/DrawGrid');\r\nconst InlineMenuElement = require('./internal/InlineMenuElement');\r\nconst {INLINE_MENU_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineMenuElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\n\r\nclass InlineMenuEditor extends Editor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._options = normalize(option.options);\r\n\t}\r\n\tdispose() {\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget options() {\r\n\t\treturn this._options;\r\n\t}\r\n\tset options(options) {\r\n\t\tthis._options = normalize(options);\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineMenuEditor(this);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tbindGridEvent(grid, col, util) {\r\n\t\tconst open = (cell) => {\r\n\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\t\tattachMenu(grid, cell, this, value);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn [\r\n\t\t\tgrid.listen(CLICK_CELL, (cell) => {\r\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\trow: cell.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\tdetachMenu();\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\tdetachMenu(true);\r\n\t\t\t}),\r\n\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuEditor;","'use strict';\r\nconst {\r\n\tisDef,\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t}\r\n} = require('../../../internal/utils');\r\n\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n\tappendHtml,\r\n\tempty,\r\n\tdisableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n} = require('../../../internal/dom');\r\n\t\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-menu';\r\nconst ITEM_CLASSNAME = CLASSNAME + '__menu-item';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\nconst EMPTY_ITEM_CLASSNAME = ITEM_CLASSNAME + '--empty';\r\n\r\nfunction findItemParents(target) {\r\n\tlet el = target;\r\n\twhile (!el.classList.contains(ITEM_CLASSNAME)) {\r\n\t\tel = el.parentElement;\r\n\t\tif (!el || el.classList.contains(CLASSNAME)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\treturn el;\r\n}\r\n\r\nfunction createMenuElement() {\r\n\trequire('./InlineMenuElement.css');\r\n\treturn createElement('ul', {classList: CLASSNAME});\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n\tmenu.style.top = rect.top.toFixed() + 'px';\r\n\tmenu.style.left = rect.left.toFixed() + 'px';\r\n\tmenu.style.width = rect.width.toFixed() + 'px';\r\n\tmenu.style['line-height'] = rect.height.toFixed() + 'px';\r\n\telement.appendChild(menu);\r\n}\r\n\r\nfunction optionToLi({classList, caption, value, html}, index) {\r\n\tconst item = createElement('li', {classList: ITEM_CLASSNAME});\r\n\titem.tabIndex = 0;\r\n\titem.dataset.valueindex = index;\r\n\tif (classList) {\r\n\t\titem.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n\t}\r\n\r\n\tif (caption) {\r\n\t\tconst span = createElement('span', {text: caption});\r\n\t\titem.appendChild(span);\r\n\t} else if (html) {\r\n\t\tappendHtml(item, html);\r\n\t}\r\n\r\n\tif (value === '' || !isDef(value)) {\r\n\t\titem.classList.add(EMPTY_ITEM_CLASSNAME);\r\n\t}\r\n\r\n\treturn item;\r\n}\r\n\r\nfunction openMenu(grid, editor, col, row, value, menu) {\r\n\tconst {options, classList} = editor;\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tempty(menu);\r\n\tmenu.style.font = grid.font || '16px sans-serif';\r\n\tlet emptyItemEl = null;\r\n\tlet valueItemEl = null;\r\n\t\t\r\n\toptions.forEach((option, i) => {\r\n\t\tconst item = optionToLi(option, i);\r\n\t\tmenu.appendChild(item);\r\n\t\tif (option.value === value) {\r\n\t\t\tvalueItemEl = item;\r\n\t\t\titem.dataset.select = true;\r\n\t\t}\r\n\t\tif (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n\t\t\temptyItemEl = item;\r\n\t\t}\r\n\t});\r\n\tconst focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n\tif (classList) {\r\n\t\tmenu.classList.add(...classList);\r\n\t}\r\n\tconst children = Array.prototype.slice.call(menu.children, 0);\r\n\tconst focusIndex = children.indexOf(focusEl);\r\n\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t// Cover the right line\r\n\trect.width++;\r\n\r\n\t// append for calculation\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Make the selection item at the middle\r\n\tlet offset = 0;\r\n\tlet allHeight = 0;\r\n\tfor (let i = 0; i < children.length; i++) {\r\n\t\tconst offsetHeight = children[i].offsetHeight;\r\n\t\tif (i < focusIndex) {\r\n\t\t\toffset += offsetHeight;\r\n\t\t}\r\n\t\tallHeight += offsetHeight;\r\n\t}\r\n\trect.offsetTop(-offset);\r\n\tmenu.style['transform-origin'] = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Control not to overflow the screen range\r\n\tconst menuClientRect = menu.getBoundingClientRect();\r\n\tconst scaleDiff = ((allHeight - menuClientRect.height) / 2);\r\n\tconst orgMenuTop = menuClientRect.top - scaleDiff;\r\n\tlet menuTop = orgMenuTop;\r\n\tconst menuBottom = menuTop + allHeight;\r\n\tconst winBottom = window.innerHeight;\r\n\tconst winMargin = 20;\r\n\tif (menuBottom > (winBottom - winMargin)) {\r\n\t\tconst diff = menuBottom - winBottom + winMargin;\r\n\t\tmenuTop -= diff;\r\n\t}\r\n\tif (menuTop < 0/*winTop*/ + winMargin) {\r\n\t\tmenuTop = winMargin;\r\n\t}\r\n\tif (menuTop !== orgMenuTop) {\r\n\t\trect.offsetTop(-(orgMenuTop - menuTop));\r\n\t\t// re update\r\n\t\tattachElement(element, rect, menu);\r\n\t}\r\n\t\t\r\n\tif (focusEl) {\r\n\t\tfocusEl.focus();\r\n\t}\r\n\tmenu.classList.remove(HIDDEN_CLASSNAME);\r\n\tmenu.classList.add(SHOWN_CLASSNAME);\r\n}\r\n\r\nfunction closeMenu(grid, col, row, menu) {\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tdisableFocus(menu);\r\n}\r\n\r\nclass InlineMenuElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._menu = createMenuElement();\r\n\t\tthis._bindMenuEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst menu = this._menu;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._menu = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (menu.parentElement) {\r\n\t\t\tmenu.parentElement.removeChild(menu);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tmenu.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\topenMenu(grid, editor, col, row, value, menu);\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst menu = this._menu;\r\n\t\t\tcloseMenu(grid, col, row, menu);\r\n\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\t_doChangeValue(valueindex) {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tconst {value} = editor.options[valueindex];\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst menu = this._menu;\r\n\t\tif (!menu || !menu.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindMenuEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\t\r\n\t\thandler.on(menu, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(menu, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(menu, 'dblclick', stopPropagationOnly);\r\n\r\n\t\thandler.on(menu, 'click', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\tthis._doChangeValue(item.dataset.valueindex);\r\n\t\t\tthis.detach(true);\r\n\t\t});\r\n\t\thandler.on(menu, 'keydown', (e) => {\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\t\tthis._doChangeValue(valueindex);\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\t\tconst n = findPrevSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\t\tconst n = findNextSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_TAB) {\r\n\t\t\t\tif (!e.shiftKey) {\r\n\t\t\t\t\tif (!findNextSiblingFocusable(item)) {\r\n\t\t\t\t\t\tlet n = menu.querySelector('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findNextSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!findPrevSiblingFocusable(item)) {\r\n\t\t\t\t\t\tconst items = menu.querySelectorAll('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tlet n = items[items.length - 1];\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findPrevSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n\n// exports\n","'use strict';\r\n{\r\n\tconst Column = require('./type/Column');\r\n\tconst NumberColumn = require('./type/NumberColumn');\r\n\tconst CheckColumn = require('./type/CheckColumn');\r\n\tconst ButtonColumn = require('./type/ButtonColumn');\r\n\tconst ImageColumn = require('./type/ImageColumn');\r\n\tconst PercentCompleteBarColumn = require('./type/PercentCompleteBarColumn');\r\n\tconst IconColumn = require('./type/IconColumn');\r\n\tconst BranchGraphColumn = require('./type/BranchGraphColumn');\r\n\tconst MenuColumn = require('./type/MenuColumn');\r\n\tconst MultilineTextColumn = require('./type/MultilineTextColumn');\r\n\r\n\t/**\r\n\t * column types\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.type\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst type = {\r\n\t\tTYPES: {\r\n\t\t\tDEFAULT: new Column(),\r\n\t\t\tNUMBER: new NumberColumn(),\r\n\t\t\tCHECK: new CheckColumn(),\r\n\t\t\tBUTTON: new ButtonColumn(),\r\n\t\t\tIMAGE: new ImageColumn(),\r\n\t\t\tMULTILINETEXT: new MultilineTextColumn(),\r\n\t\t},\r\n\t\tget Column() {\r\n\t\t\treturn Column;\r\n\t\t},\r\n\t\tget NumberColumn() {\r\n\t\t\treturn NumberColumn;\r\n\t\t},\r\n\t\tget CheckColumn() {\r\n\t\t\treturn CheckColumn;\r\n\t\t},\r\n\t\tget ButtonColumn() {\r\n\t\t\treturn ButtonColumn;\r\n\t\t},\r\n\t\tget ImageColumn() {\r\n\t\t\treturn ImageColumn;\r\n\t\t},\r\n\t\tget PercentCompleteBarColumn() {\r\n\t\t\treturn PercentCompleteBarColumn;\r\n\t\t},\r\n\t\tget IconColumn() {\r\n\t\t\treturn IconColumn;\r\n\t\t},\r\n\t\tget BranchGraphColumn() {\r\n\t\t\treturn BranchGraphColumn;\r\n\t\t},\r\n\t\tget MenuColumn() {\r\n\t\t\treturn MenuColumn;\r\n\t\t},\r\n\t\tget MultilineTextColumn() {\r\n\t\t\treturn MultilineTextColumn;\r\n\t\t},\r\n\t\tof(columnType) {\r\n\t\t\tif (!columnType) {\r\n\t\t\t\treturn type.TYPES.DEFAULT;\r\n\t\t\t} else if (typeof columnType === 'string') {\r\n\t\t\t\treturn type.TYPES[columnType.toUpperCase()] || type.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnType;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst NumberStyle = require('../style/NumberStyle');\r\n\tlet defaultFotmat;\r\n\tclass NumberColumn extends Column {\r\n\t\tstatic get defaultFotmat() {\r\n\t\t\treturn defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n\t\t}\r\n\t\tstatic set defaultFotmat(fmt) {\r\n\t\t\tdefaultFotmat = fmt;\r\n\t\t}\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._format = option.format;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn NumberStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberColumn(this);\r\n\t\t}\r\n\t\tget format() {\r\n\t\t\treturn this._format;\r\n\t\t}\r\n\t\twithFormat(format) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._format = format;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\tif (isNaN(value - 0)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t\tconst format = this._format || NumberColumn.defaultFotmat;\r\n\t\t\treturn format.format(value - 0);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberColumn;\r\n}","'use strict';\r\n{\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst CheckStyle = require('../style/CheckStyle');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\t\r\n\r\n\tfunction toBoolean(val) {\r\n\t\tif (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\r\n\tclass CheckColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn CheckStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn toBoolean(value);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tconst key = col + ':' + row;\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID] && grid[CHECK_COLUMN_STATE_ID][key];\r\n\t\t\t\r\n\t\t\tconst opt = {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t};\r\n\t\t\tif (state) {\r\n\t\t\t\topt.animElapsedTime = state.elapsed;\r\n\t\t\t}\r\n\t\t\thelper.checkbox(value, context, opt);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckColumn;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst ButtonStyle = require('../style/ButtonStyle');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tconst utils = require('./columnUtils');\r\n\t\r\n\r\n\tclass ButtonColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._caption = option.caption;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t}\r\n\t\tget caption() {\r\n\t\t\treturn this._caption;\r\n\t\t}\r\n\t\twithCaption(caption) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._caption = caption;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn this._caption || value;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tlet active = false;\r\n\t\t\tconst state = grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t\tif (state) {\r\n\t\t\t\tif (state.mouseActiveCell &&\r\n\t\t\t\t\tstate.mouseActiveCell.col === col &&\r\n\t\t\t\t\tstate.mouseActiveCell.row === row) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t} else if (context.getSelectState().selected) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.button(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tbgColor: buttonBgColor,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\tshadow: active ? {\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.48)',\r\n\t\t\t\t\t\tblur: 6,\r\n\t\t\t\t\t\toffsetY: 3,\r\n\t\t\t\t\t} : true,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonColumn;\r\n}","'use strict';\r\n{\r\n\tconst ImageStyle = require('../style/ImageStyle');\r\n\tconst {getCacheOrLoad} = require('../../internal/imgs');\r\n\tconst {calcStartPosition} = require('../../internal/canvases');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\r\n\tconst MAX_LRU_CACHE_SIZE = 50;\r\n\tfunction getImage(url) {\r\n\t\treturn getCacheOrLoad('ImageColumn', MAX_LRU_CACHE_SIZE, url);\r\n\t}\r\n\r\n\tfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n\t\tlet newWidth = width;\r\n\t\tlet newHeight = height;\r\n\t\tif (newWidth > maxWidth) {\r\n\t\t\tnewWidth = maxWidth;\r\n\t\t\tnewHeight = (newWidth * height) / width;\r\n\t\t}\r\n\t\tif (newHeight > maxHeight) {\r\n\t\t\tnewHeight = maxHeight;\r\n\t\t\tnewWidth = (newHeight * width) / height;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\twidth: newWidth,\r\n\t\t\theight: newHeight,\r\n\t\t};\r\n\t}\r\n\r\n\tclass ImageColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn ImageStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\treturn super.onDrawCell(getImage(cellValue), info, context, grid);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tif (value) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tmargin,\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t} = style;\r\n\t\t\t\tif (bgColor) {\r\n\t\t\t\t\tdrawCellBase({\r\n\t\t\t\t\t\tbgColor,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\tif (style.imageSizing === 'keep-aspect-ratio') {\r\n\t\t\t\t\t\tconst {width, height} = calcKeepAspectRatioSize(\r\n\t\t\t\t\t\t\t\tvalue.width, value.height,\r\n\t\t\t\t\t\t\t\trect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst pos = calcStartPosition(ctx, rect, width, height, {\r\n\t\t\t\t\t\t\toffset: margin,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\tpos.x, pos.y, width, height\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\trect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageColumn;\r\n}","'use strict';\r\n\r\nclass LRUCache {\r\n\tconstructor(cacheSize) {\r\n\t\tthis._list = [];\r\n\t\tthis._map = {};\r\n\t\tthis._cacheSize = cacheSize || 50;\r\n\t}\r\n\tget(key) {\r\n\t\tconst val = this._map[key];\r\n\t\tif (val) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t\tthis._list.push(key);\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\tput(key, value) {\r\n\t\tif (this._map[key]) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t}\r\n\t\tthis._map[key] = value;\r\n\t\tthis._list.push(key);\r\n\t\tif (this._list.length > this._cacheSize) {\r\n\t\t\tconst remKey = this._list.shift();\r\n\t\t\tdelete this._map[remKey];\r\n\t\t}\r\n\t}\r\n}\r\nmodule.exports = LRUCache;","'use strict';\r\n{\r\n\tconst PercentCompleteBarStyle = require('../style/PercentCompleteBarStyle');\r\n\tconst {getOrApply, str} = require('../../internal/utils');\r\n\tconst Column = require('./Column');\r\n\t\r\n\r\n\tconst MARGIN = 2;\r\n\r\n\tclass PercentCompleteBarColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._min = option.min || 0;\r\n\t\t\tthis._max = option.max || (this._min + 100);\r\n\t\t\tthis._formatter = option.formatter || ((v) => v);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tsuper.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n\t\t\tconst {\r\n\t\t\t\tbarColor,\r\n\t\t\t\tbarBgColor,\r\n\t\t\t\tbarHeight,\r\n\t\t\t} = style;\r\n\r\n\t\t\tlet svalue = value + '';\r\n\t\t\tif (str.endsWith(svalue, '%')) {\r\n\t\t\t\tsvalue = svalue.substr(0, svalue.length - 1);\r\n\t\t\t}\r\n\t\t\tconst num = svalue - 0;\r\n\t\t\tconst rate = num < this._min ? 0\r\n\t\t\t\t: num > this._max ? 1\r\n\t\t\t\t: (num - this._min) / (this._max - this._min);\r\n\t\t\t\r\n\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\t\tconst barMaxWidth = rect.width - MARGIN * 2 - 1/**/;\r\n\t\t\t\tconst barTop = rect.bottom - MARGIN - barHeight - 1/**/;\r\n\t\t\t\tconst barLeft = rect.left + MARGIN;\r\n\t\t\t\tctx.fillStyle = getOrApply(barBgColor, rate * 100) || '#f0f3f5';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n\t\t\t\tctx.fill();\r\n\r\n\r\n\t\t\t\tconst barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n\t\t\t\tctx.fillStyle = getOrApply(barColor, rate * 100) || '#20a8d8';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barSize, barHeight);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarColumn;\r\n}","'use strict';\r\n{\r\n\tconst IconStyle = require('../style/IconStyle');\r\n\tconst Column = require('./Column');\r\n\tconst icons = require('../../internal/icons');\r\n\r\n\tfunction repeatArray(val, count) {\r\n\t\tif (count === Infinity) {\r\n\t\t\tcount = 0;\r\n\t\t}\r\n\t\tconst a = [];\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\ta.push(val);\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tclass IconColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._tagName = option.tagName || 'i';\r\n\t\t\tthis._className = option.className;\r\n\t\t\tthis._content = option.content;\r\n\t\t\tthis._name = option.name;\r\n\t\t\tthis._iconWidth = option.iconWidth;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn IconStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tconst num = value - 0;\r\n\t\t\tif (!isNaN(num)) {\r\n\t\t\t\tconst icon = {};\r\n\t\t\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\t\t\ticon[k] = style[k];\r\n\t\t\t\t});\r\n\t\t\t\ticon.className = this._className;\r\n\t\t\t\ticon.tagName = this._tagName;\r\n\t\t\t\ticon.content = this._content;\r\n\t\t\t\ticon.name = this._name;\r\n\t\t\t\tif (this._iconWidth) {\r\n\t\t\t\t\ticon.width = this._iconWidth;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tinfo.getIcon = () => repeatArray(icon, num);\r\n\t\t\t} else {\r\n\t\t\t\tinfo.getIcon = () => null;\r\n\t\t\t}\r\n\t\t\tsuper.drawInternal('', context, style, helper, grid, info);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = IconColumn;\r\n}","'use strict';\r\nconst {isDef, getOrApply, isPromise, obj: {isObject}} = require('../../internal/utils');\r\nconst BranchGraphStyle = require('../style/BranchGraphStyle');\r\nconst BaseColumn = require('./BaseColumn');\r\nconst {BRANCH_GRAPH_COLUMN_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nfunction getAllColumnData(grid, col, callback) {\r\n\tconst dataSource = grid.dataSource;\r\n\tlet field = grid.getField(col);\r\n\tif (isObject(field) && field.get && field.set) {\r\n\t\tfield = field.get;\r\n\t}\r\n\tconst allData = [];\r\n\tlet promise;\r\n\tfor (let index = 0; index < dataSource.length; index++) {\r\n\t\tconst data = dataSource.getField(index, field);\r\n\t\tif (isPromise(data)) {\r\n\t\t\tconst dataIndex = allData.length;\r\n\t\t\tallData.push(data);\r\n\t\t\tif (!promise) {\r\n\t\t\t\tpromise = data.then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tpromise = promise.then(() => data).then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallData.push(data);\r\n\t\t}\r\n\t}\r\n\r\n\tif (promise) {\r\n\t\tpromise.then(() => callback(allData));\r\n\t} else {\r\n\t\tcallback(allData);\r\n\t}\r\n}\r\n\r\nclass BranchLine {\r\n\tconstructor({fromIndex, toIndex, colorIndex, point}) {\r\n\t\tthis.fromIndex = fromIndex;\r\n\t\tthis.toIndex = toIndex;\r\n\t\tthis.colorIndex = colorIndex;\r\n\t\tthis.point = point;\r\n\t}\r\n}\r\nclass BranchPoint {\r\n\tconstructor({index, commit = false, lines = [], tag}) {\r\n\t\tthis.index = index;\r\n\t\tthis.commit = commit;\r\n\t\tthis.lines = lines;\r\n\t\tthis.tag = tag;\r\n\t}\r\n\tstatic mergeLines(lines) {\r\n\t\tconst result = lines.filter(((l) => isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\t\t\r\n\t\tconst froms = lines.filter(((l) => isDef(l.fromIndex) && !isDef(l.toIndex)));\r\n\t\tconst tos = lines.filter(((l) => !isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\r\n\t\tfroms.forEach((f) => {\r\n\t\t\tfor (let i = 0; i < tos.length; i++) {\r\n\t\t\t\tconst t = tos[i];\r\n\t\t\t\tif (t.point) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (f.colorIndex === t.colorIndex) {\r\n\t\t\t\t\tf.toIndex = t.toIndex;\r\n\t\t\t\t\ttos.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult.push(f);\r\n\t\t});\r\n\r\n\t\treturn result.concat(tos);\r\n\t}\r\n\tstatic merge(a, b) {\r\n\t\tif (!a) {\r\n\t\t\treturn b;\r\n\t\t}\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: a.index,\r\n\t\t\tcommit: a.commit || b.commit,\r\n\t\t\tlines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n\t\t\ttag: a.tag || b.tag\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction joinLine(timeline, branchIndex) {\r\n\tconst reverse = [...timeline].reverse();\r\n\tfor (let i = 0; i < reverse.length; i++) {\r\n\t\tconst f = reverse[i][branchIndex];\r\n\t\tif (f) {\r\n\t\t\tf.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\r\n\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\tcolorIndex: branchIndex,\r\n\t\t\t})]));\r\n\r\n\t\t\tfor (let j = 0; j < i; j++) {\r\n\t\t\t\tconst tl = reverse[j];\r\n\t\t\t\ttl[branchIndex] = new BranchPoint({\r\n\t\t\t\t\tindex: branchIndex,\r\n\t\t\t\t\tlines: [new BranchLine({\r\n\t\t\t\t\t\tfromIndex: branchIndex,\r\n\t\t\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\t\t\tcolorIndex: branchIndex\r\n\t\t\t\t\t})]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction branch({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tlet toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0) {\r\n\t\ttoIndex = branches.length;\r\n\t\tbranches.push(to);\r\n\t}\r\n\t\r\n\tfunction findBranchRootIndex() {\r\n\t\tfor (let index = timeline.length - 1; index >= 0; index--) {\r\n\t\t\tconst tl = timeline[index];\r\n\t\t\tconst from = tl[fromIndex];\r\n\t\t\tif (from && from.commit) {\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tif (fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t});\r\n\t} else {\r\n\t\tconst fromTargetIndex = findBranchRootIndex();\r\n\t\tif (fromTargetIndex === -1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst branchTargetFromIndex = fromTargetIndex + 1;\r\n\t\tconst branchPoint = new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})]\r\n\t\t});\r\n\t\tlet point;\r\n\t\tlet result;\r\n\t\tif (branchTargetFromIndex < timeline.length) {\r\n\t\t\tconst targetLine = timeline[branchTargetFromIndex];\r\n\t\t\tpoint = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n\t\t} else {\r\n\t\t\tpoint = branchPoint;\r\n\t\t\tresult = branchPoint;\r\n\t\t}\r\n\t\tconst from = timeline[fromTargetIndex][fromIndex];\r\n\t\tfrom.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\r\n\t\t\ttoIndex,\r\n\t\t\tcolorIndex: toIndex,\r\n\t\t\tpoint,\r\n\t\t})]));\r\n\t\treturn result;\r\n\t}\r\n\t\r\n}\r\n\r\nfunction commit({timeline, branches}, name) {\r\n\tconst index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\treturn null;\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex,\r\n\t\tcommit: true,\r\n\t});\r\n\t\t\r\n\tif (joinLine(timeline, index)) {\r\n\t\tresult.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\r\n\t\t\tfromIndex: index,\r\n\t\t\tcolorIndex: index\r\n\t\t})]));\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction commitTag({timeline, branches}, name, tag) {\r\n\tlet index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\tindex = branches.length;\r\n\t\tbranches.push(name);\r\n\t}\r\n\treturn new BranchPoint({\r\n\t\tindex,\r\n\t\ttag\r\n\t});\r\n}\r\n\r\nfunction commitMerge({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tconst toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0 || fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tcommit: true,\r\n\t\t});\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex: toIndex,\r\n\t\tcommit: true,\r\n\t\tlines: [\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t}),\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex: toIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})],\r\n\t});\r\n\tconst froms = [...timeline];\r\n\tconst fromTargetLine = froms.pop();\r\n\tif (fromTargetLine) {\r\n\t\tfromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\ttoIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t})]\r\n\t\t}));\r\n\t}\r\n\r\n\tjoinLine(froms, fromIndex);\r\n\r\n\tjoinLine(timeline, toIndex);\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction calcCommand(info, command) {\r\n\tconst {timeline} = info;\r\n\tconst timelineData = [];\r\n\t// const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n\tconst commands = Array.isArray(command) ? command : [command];\r\n\tcommands.forEach((cmd) => {\r\n\t\tif (!cmd) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet point;\r\n\t\tif (cmd.command === 'branch') {\r\n\t\t\tconst from = isObject(cmd.branch) ? cmd.branch.from : null;\r\n\t\t\tconst to = isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n\t\t\tpoint = branch(info, from, to);\r\n\t\t} else if (cmd.command === 'commit') {\r\n\t\t\tconst {branch} = cmd;\r\n\t\t\tpoint = commit(info, branch);\r\n\t\t} else if (cmd.command === 'merge') {\r\n\t\t\tconst {from, to} = cmd.branch;\r\n\t\t\tpoint = commitMerge(info, from, to);\r\n\t\t} else if (cmd.command === 'tag') {\r\n\t\t\tconst {branch, tag} = cmd;\r\n\t\t\tpoint = commitTag(info, branch, tag);\r\n\t\t}\r\n\t\tif (point && point.index > -1) {\r\n\t\t\ttimelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n\t\t}\r\n\t});\r\n\ttimeline.push(timelineData);\r\n}\r\n\r\nfunction calcBranchesInfo(start, grid, col) {\r\n\tconst result = {\r\n\t\tbranches: [],\r\n\t\ttimeline: []\r\n\t};\r\n\tgetAllColumnData(grid, col, (data) => {\r\n\t\tif (start !== 'top') {\r\n\t\t\tdata = [...data].reverse();\r\n\t\t}\r\n\t\tdata.forEach((command) => {\r\n\t\t\tcalcCommand(result, command);\r\n\t\t});\r\n\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n\tlet w = Math.max(width / branches.length + 1, 5);\r\n\ttimeline.forEach((tl) => {\r\n\t\ttl.forEach((p, index) => {\r\n\t\t\tif (index <= 0) {\r\n\t\t\t\t// \r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (p.tag) {\r\n\t\t\t\tconst textWidth = ctx.measureText(p.tag).width;\r\n\t\t\t\tif (((w * index) + (radius * 2) + 4 + textWidth) > width) {\r\n\t\t\t\t\tw = Math.max((width - (radius * 2) - 4 - textWidth) / index, 5);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst result = [];\r\n\tlet x = left;\r\n\tbranches.forEach(() => {\r\n\t\tresult.push(Math.ceil(x + radius));\r\n\t\tx += w;\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\r\n\tbranchXPoints, margin, branchColors, branchLineWidth, mergeStyle\r\n}, {\r\n\twidth, col, row, branches\r\n}) {\r\n\tif (isDef(upLineIndex) || isDef(downLineIndex)) {\r\n\t\tctx.strokeStyle = getOrApply(branchColors, branches[colorIndex], colorIndex);\r\n\t\tctx.lineWidth = branchLineWidth;\r\n\t\tctx.lineCap = 'round';\r\n\t\tctx.beginPath();\r\n\r\n\r\n\t\tif (isDef(upLineIndex)) {\r\n\t\t\tconst upX = branchXPoints[upLineIndex];\r\n\t\t\tconst upRect = grid.getCellRelativeRect(col, row - 1);\r\n\t\t\tconst upY = upRect.top + upRect.height / 2;\r\n\t\t\tctx.moveTo(upX, upY);\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tupX, (y + upY) / 2,\r\n\t\t\t\t\t\tx, (y + upY) / 2,\r\n\t\t\t\t\t\tx, y\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t}\r\n\r\n\t\tif (isDef(downLineIndex)) {\r\n\t\t\tconst downX = branchXPoints[downLineIndex];\r\n\t\t\tconst downRect = grid.getCellRelativeRect(col, row + 1);\r\n\t\t\tconst downY = downRect.top + downRect.height / 2;\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tx, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, downY\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(downX, downY);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tctx.stroke();\r\n\t}\r\n}\r\n\r\n/**\r\n * BranchGraphColumn<br>\r\n * <br>\r\n * # Data command<br>\r\n * ## mastar branch or orphan branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * </code></pre>\r\n * ## commit<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * </code></pre>\r\n * ## branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## merge<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## tag<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * </code></pre>\r\n *\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._start = option.start || 'bottom';\r\n\t\tthis._cache = isDef(option.cache) ? option.cache : false;\r\n\t}\r\n\tget StyleClass() {\r\n\t\treturn BranchGraphStyle;\r\n\t}\r\n\tclearCache(grid) {\r\n\t\tdelete grid[_];\r\n\t}\r\n\tonDrawCell(cellValue, info, context, grid) {\r\n\t\tif (this._cache) {\r\n\t\t\tconst state = grid[_] || (grid[_] = {});\r\n\t\t\tconst {col} = context;\r\n\t\t\tif (!state[col]) {\r\n\t\t\t\tstate[col] = calcBranchesInfo(this._start, grid, col);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn super.onDrawCell(cellValue, info, context, grid);\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphColumn(this);\r\n\t}\r\n\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst {timeline, branches} = (this._cache && grid[_]) ? grid[_][col] : calcBranchesInfo(this._start, grid, col);\r\n\t\t\r\n\t\tconst {upLineIndexKey, downLineIndexKey} = this._start !== 'top' ? {upLineIndexKey: 'toIndex', downLineIndexKey: 'fromIndex'} : {upLineIndexKey: 'fromIndex', downLineIndexKey: 'toIndex'};\r\n\t\tconst data = this._start !== 'top' ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\r\n\r\n\t\tconst {\r\n\t\t\tbranchColors,\r\n\t\t\tbranchLineWidth,\r\n\t\t\tcircleSize,\r\n\t\t\tmergeStyle,\r\n\t\t\tmargin,\r\n\t\t\tbgColor,\r\n\t\t} = style;\r\n\t\tif (bgColor) {\r\n\t\t\tdrawCellBase({\r\n\t\t\t\tbgColor,\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tconst rect = context.getRect();\r\n\t\tconst radius = circleSize / 2;\r\n\t\tconst width = rect.width - margin * 2;\r\n\r\n\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'middle';\r\n\t\t\tconst branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n\t\t\t\r\n\t\t\tconst y = rect.top + rect.height / 2;\r\n\r\n\t\t\t// draw join lines\r\n\t\t\tdata.\r\n\t\t\t\tmap((point, index) => point ? point.lines.map((line) => ({\r\n\t\t\t\t\tcolorIndex: line.colorIndex,\r\n\t\t\t\t\tupLineIndex: line[upLineIndexKey],\r\n\t\t\t\t\tdownLineIndex: line[downLineIndexKey],\r\n\t\t\t\t\tpointIndex: index,\r\n\t\t\t\t})) : []).\r\n\t\t\t\treduce((p, c) => p.concat(c), []).// flatMap\r\n\t\t\t\t// order of overlap\r\n\t\t\t\tsort((a, b) => b.colorIndex - a.colorIndex).\r\n\t\t\t\tforEach((line) => {\r\n\t\t\t\t\tconst x = branchXPoints[line.pointIndex];\r\n\t\t\t\t\trenderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n\t\t\t\t\t\tmargin,\r\n\t\t\t\t\t\tbranchXPoints,\r\n\t\t\t\t\t\tbranchLineWidth,\r\n\t\t\t\t\t\tbranchColors,\r\n\t\t\t\t\t\tmergeStyle,\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\twidth, col, row, branches\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t// draw commit points\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.commit) {\r\n\t\t\t\t\tconst x = branchXPoints[index];\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// draw tags\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.tag) {\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\nmodule.exports = BranchGraphColumn;","'use strict';\r\nconst BaseStyle = require('./BaseStyle');\r\nlet defaultStyle;\r\nfunction adj(style) {\r\n\tconst {textAlign = 'center'} = style;\r\n\tstyle.textAlign = textAlign;\r\n\treturn style;\r\n}\r\nconst DEFAULT_BRANCH_COLORS = (name, index) => {\r\n\tswitch (index % 3) {\r\n\tcase 0:\r\n\t\treturn '#979797';\r\n\tcase 1:\r\n\t\treturn '#008fb5';\r\n\tcase 2:\r\n\t\treturn '#f1c109';\r\n\tdefault:\r\n\t}\r\n\treturn '#979797';\r\n};\r\nclass BranchGraphStyle extends BaseStyle {\r\n\tstatic get DEFAULT() {\r\n\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BranchGraphStyle());\r\n\t}\r\n\tconstructor(style = {}) {\r\n\t\tsuper(adj(style));\r\n\t\tthis._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n\t\tthis._margin = style.margin || 4;\r\n\t\tthis._circleSize = style.circleSize || 16;\r\n\t\tthis._branchLineWidth = style.branchLineWidth || 4;\r\n\t\tthis._mergeStyle = style.mergeStyle === 'straight' ? 'straight' : 'bezier';\r\n\t}\r\n\tget branchColors() {\r\n\t\treturn this._branchColors;\r\n\t}\r\n\tset branchColors(branchColors) {\r\n\t\tthis._branchColors = branchColors;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget margin() {\r\n\t\treturn this._margin;\r\n\t}\r\n\tset margin(margin) {\r\n\t\tthis._margin = margin;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget circleSize() {\r\n\t\treturn this._circleSize;\r\n\t}\r\n\tset circleSize(circleSize) {\r\n\t\tthis._circleSize = circleSize;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget branchLineWidth() {\r\n\t\treturn this._branchLineWidth;\r\n\t}\r\n\tset branchLineWidth(branchLineWidth) {\r\n\t\tthis._branchLineWidth = branchLineWidth;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget mergeStyle() {\r\n\t\treturn this._mergeStyle;\r\n\t}\r\n\tset mergeStyle(mergeStyle) {\r\n\t\tthis._mergeStyle = mergeStyle;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphStyle(this);\r\n\t}\r\n}\r\nmodule.exports = BranchGraphStyle;","'use strict';\r\n{\r\n\tconst {normalize} = require('../../internal/menu-items');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst Style = require('../style/Style');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass MenuColumn extends BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._options = normalize(option.options);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MenuColumn(this);\r\n\t\t}\r\n\t\tget options() {\r\n\t\t\treturn this._options;\r\n\t\t}\r\n\t\twithOptions(options) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._options = normalize(options);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tlet {\r\n\t\t\t\tcolor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst text = this._convertInternal(value);\r\n\t\t\thelper.testFontLoad(font, text, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\tconst basePadding = helper.toBoxPixelArray(padding || 0, context);\r\n\t\t\t\tconst textPadding = basePadding.slice(0);\r\n\t\t\t\ttextPadding[1] += 26;// icon padding\r\n\t\t\t\tconst iconPadding = basePadding.slice(0);\r\n\t\t\t\ticonPadding[1] += 8;\r\n\t\t\t\tif (!isDef(color) && (!isDef(value) || value === '')) {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, .38)';\r\n\t\t\t\t}\r\n\t\t\t\thelper.text(text, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding: textPadding,\r\n\t\t\t\t});\r\n\t\t\t\t// draw icon\r\n\t\t\t\thelper.text('', context, {\r\n\t\t\t\t\ttextAlign: 'right',\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons: [{\r\n\t\t\t\t\t\tpath: 'M0 2 5 7 10 2z',\r\n\t\t\t\t\t\twidth: 10,\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, .54)',\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tpadding: iconPadding,\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\t_convertInternal(value) {\r\n\t\t\tconst options = this._options;\r\n\t\t\tfor (let i = 0; i < options.length; i++) {\r\n\t\t\t\tconst option = options[i];\r\n\t\t\t\tif (option.value === value) {\r\n\t\t\t\t\tvalue = option.caption;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn super.convertInternal(value);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = MenuColumn;\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst defaultTheme = require('./MATERIAL_DESIGN');\r\n\r\n\tfunction getProp(obj, superObj, names, defNames) {\r\n\t\treturn getChainSafe(obj, ...names) ||\r\n\t\t(defNames && getChainSafe(obj, ...defNames)) ||\r\n\t\tgetChainSafe(superObj, ...names);\r\n\t}\r\n\tfunction createTheme(obj = {}, superTheme = defaultTheme) {\r\n\t\treturn {\r\n\t\t\tget font() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['font']);\r\n\t\t\t},\r\n\t\t\tget underlayBackgroundColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['underlayBackgroundColor']);\r\n\t\t\t},\r\n\t\t\t// color\r\n\t\t\tget color() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['color']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsColor'], ['color']);\r\n\t\t\t},\r\n\t\t\t// background\r\n\t\t\tget defaultBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget selectionBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['selectionBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\t// border\r\n\t\t\tget borderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget hiliteBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['hiliteBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget checkbox() {\r\n\t\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'uncheckBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'checkBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget borderColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'borderColor'], ['borderColor']);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tget button() {\r\n\t\t\t\treturn this._button || (this._button = {\r\n\t\t\t\t\tget color() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'color'], ['color']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget bgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'bgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\textends(obj) {\r\n\t\t\t\treturn createTheme(obj, this);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * theme object\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes.theme\r\n\t * @memberof cheetahGrid.themes\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcreate(obj) {\r\n\t\t\treturn createTheme(obj);\r\n\t\t}\r\n\t};\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\nfunction DEFAULT_BG_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (!((row - frozenRowCount) & 1)) {\r\n\t\treturn '#FFF';\r\n\t} else {\r\n\t\treturn '#F6F6F6';\r\n\t}\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n\tlet stop;\r\n\tconst stopsKey = [];\r\n\tfor (stop in colorStops) {\r\n\t\tstopsKey.push(`${stop}@${colorStops[stop]}`);\r\n\t}\r\n\tconst key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(',')}`;\r\n\tconst ret = cacheLinearGradient[key];\r\n\tif (ret) {\r\n\t\treturn ret;\r\n\t}\r\n\tconst grad = context.createLinearGradient(left, top, left, bottom);\r\n\tfor (stop in colorStops) {\r\n\t\tgrad.addColorStop(stop, colorStops[stop]);\r\n\t}\r\n\treturn (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid,\r\n\t\tgrid: {frozenRowCount},\r\n\t\tcontext\r\n\t} = args;\r\n\tconst {left, top} = grid.getCellRelativeRect(col, 0);\r\n\tconst {bottom} = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n\r\n\treturn getLinearGradient(context, left, top, left, bottom, {0: '#FFF', 1: '#D3D3D3'});\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: '#000',\r\n\tdefaultBgColor: DEFAULT_BG_COLOR,\r\n\tfrozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: '#000',\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#F6F6F6',\r\n};","'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst DataSource = require('./DataSource');\r\n\r\n\tfunction _setFieldCache({_fCache}, index, field, value) {\r\n\t\tconst recCache = _fCache[index] || (_fCache[index] = {});\r\n\t\trecCache[field] = value;\r\n\t}\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.CachedDataSource\r\n\t * @extends cheetahGrid.data.DataSource\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass CachedDataSource extends DataSource {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn DataSource.EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new CachedDataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor(opt = {}) {\r\n\t\t\tsuper(opt);\r\n\t\t\tthis._rCache = {};\r\n\t\t\tthis._fCache = {};\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\tif (this._rCache && this._rCache[index]) {\r\n\t\t\t\treturn this._rCache[index];\r\n\t\t\t}\r\n\t\t\treturn super.getOriginal(index);\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\r\n\t\t\tif (cache) {\r\n\t\t\t\treturn cache;\r\n\t\t\t}\r\n\t\t\treturn super.getOriginalField(index, field);\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tconst fCache = this._fCache;\r\n\t\t\tif (fCache && fCache[index]) {\r\n\t\t\t\tdelete fCache[index]; // clear row cache\r\n\t\t\t}\r\n\t\t\treturn super.setOriginalField(index, field, value);\r\n\t\t}\r\n\t\tclearCache() {\r\n\t\t\tif (this._rCache) {\r\n\t\t\t\tthis._rCache = {};\r\n\t\t\t}\r\n\t\t\tif (this._fCache) {\r\n\t\t\t\tthis._fCache = {};\r\n\t\t\t}\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t_setFieldCache(this, index, field, val);\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\tthis._rCache[index] = val;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CachedDataSource;\r\n}","'use strict';\r\n{\r\n\tconst {isDef, isPromise, then, obj: {isObject}} = require('./internal/utils');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\tconst columns = require('./columns');\r\n\tconst {BaseStyle} = columns.style;\r\n\tconst headerType = require('./header/type');\r\n\tconst {BaseStyle: HeaderBaseStyle} = require('./header/style');\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\tconst {DataSource, CachedDataSource} = require('./data');\r\n\tconst themes = require('./themes');\r\n\tconst icons = require('./internal/icons');\r\n\tconst MessageHandler = require('./columns/message/MessageHandler');\r\n\tconst EVENT_TYPE = require('./list-grid/EVENT_TYPE');\r\n\t\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('./internal/symbolManager');\r\n\r\n\tlet headerId = 0;\r\n\t//private methods\r\n\tfunction _getHeaderCellRange(grid, col, row) {\r\n\t\treturn grid[_].headerMap.getHeaderCellRange(col, row);\r\n\t}\r\n\tfunction _updateRect(grid, col, row, context) {\r\n\t\tconst rect = context.getRect();\r\n\t\tconst {\r\n\t\t\tstartCol,\r\n\t\t\tendCol,\r\n\t\t\tstartRow,\r\n\t\t\tendRow,\r\n\t\t} = _getHeaderCellRange(grid, col, row);\r\n\t\tfor (let c = col - 1; c >= startCol; c--) {\r\n\t\t\trect.left -= grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let c = col + 1; c <= endCol; c++) {\r\n\t\t\trect.right += grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let r = row - 1; r >= startRow; r--) {\r\n\t\t\trect.top -= grid.getRowHeight(r);\r\n\t\t}\r\n\t\tfor (let r = row + 1; r <= endRow; r++) {\r\n\t\t\trect.bottom += grid.getRowHeight(r);\r\n\t\t}\r\n\t\tcontext.setRect(rect);\r\n\t}\r\n\tfunction _getCellValue(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn grid[_].headerMap.getCell(col, row).caption;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.get;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, field, row);\r\n\t\t}\r\n\t}\r\n\tfunction _setCellValue(grid, col, row, value) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\t// nop\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.set;\r\n\t\t\t}\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\tconst res = grid[_].dataSource.setField(index, field, value);\r\n\t\t\treturn isPromise(res) ? res : true;\r\n\t\t}\r\n\t}\r\n\tfunction _getCellMessage(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst {message} = grid[_].headerMap.columns[col];\r\n\t\t\tif (!message) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, message, row);\r\n\t\t}\r\n\t}\r\n\tfunction _getCellIcon0(grid, icon, row) {\r\n\t\tif (!isDef(icon)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (Array.isArray(icon)) {\r\n\t\t\treturn icon.map((i) => _getCellIcon0(grid, i, row));\r\n\t\t}\r\n\t\tif (!isObject(icon)) {\r\n\t\t\treturn _getField(grid, icon, row);\r\n\t\t}\r\n\t\tconst retIcon = {};\r\n\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\tif (icon[k]) {\r\n\t\t\t\tconst f = _getField(grid, icon[k], row);\r\n\t\t\t\tif (isDef(f)) {\r\n\t\t\t\t\tretIcon[k] = f;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!_hasField(grid, icon[k], row)) {\r\n\t\t\t\t\t\tretIcon[k] = icon[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn retIcon;\r\n\t}\r\n\tfunction _getCellIcon(grid, col, row) {\r\n\t\tconst {icon} = grid[_].headerMap.columns[col];\r\n\t\treturn _getCellIcon0(grid, icon, row);\r\n\t}\r\n\tfunction _getField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.getField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _hasField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.hasField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _onDrawValue(grid, cellValue, context, {col, row}, style, draw) {\r\n\t\tconst helper = grid[_].gridCanvasHelper;\r\n\r\n\t\tconst drawCellBg = ({bgColor} = {}) => {\r\n\t\t\tconst fillOpt = {\r\n\t\t\t\tfillColor: bgColor,\r\n\t\t\t};\r\n\t\t\t//cell\r\n\t\t\thelper.fillCellWithState(context, fillOpt);\r\n\t\t};\r\n\t\tconst drawCellBorder = () => {\r\n\r\n\t\t\tif (context.col === grid.frozenColCount - 1) {\r\n\t\t\t\t//\r\n\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor\r\n\t\t\t\t\t\t: helper.theme.frozenRowsBorderColor;\r\n\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(borderColor, context.col, context.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.right - 2.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.right - 2.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (context.row < grid[_].headerMap.rowCount) {\r\n\t\t\t\t_headerBorderWithState(grid, helper, context);\r\n\t\t\t} else {\r\n\t\t\t\thelper.borderWithState(context);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tconst drawCellBase = ({bgColor} = {}) => {\r\n\t\t\tdrawCellBg({bgColor});\r\n\t\t\tdrawCellBorder();\r\n\t\t};\r\n\t\tconst info = {\r\n\t\t\tgetRecord: () => grid.getRowRecord(row),\r\n\t\t\tgetIcon: () => _getCellIcon(grid, col, row),\r\n\t\t\tgetMessage: () => _getCellMessage(grid, col, row),\r\n\t\t\tmessageHandler: grid[_].messageHandler,\r\n\t\t\tstyle,\r\n\t\t\tdrawCellBase,\r\n\t\t\tdrawCellBg,\r\n\t\t\tdrawCellBorder,\r\n\t\t};\r\n\r\n\t\treturn draw(cellValue, info, context, grid);\r\n\t}\r\n\tfunction _headerBorderWithState(grid, helper, context) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst sel = grid.selection.select;\r\n\t\tif (sel.row >= grid[_].headerMap.rowCount) {\r\n\t\t\t//\r\n\t\t\thelper.borderWithState(context);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst {id} = grid[_].headerMap.getCell(col, row);\r\n\r\n\t\tconst rect = context.getRect();\r\n\t\tconst option = {};\r\n\r\n\t\tconst {id: selId} = grid[_].headerMap.getCell(sel.col, sel.row);\r\n\t\t//\r\n\t\tif (selId === id) {\r\n\t\t\toption.borderColor = helper.theme.hiliteBorderColor;\r\n\t\t\toption.lineWidth = 2;\r\n\t\t\thelper.border(context, option);\r\n\t\t} else {\r\n\t\t\toption.lineWidth = 1;\r\n\t\t\t// header color\r\n\t\t\tconst isFrozenCell = grid.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\toption.borderColor = helper.theme.frozenRowsBorderColor;\r\n\t\t\t}\r\n\t\t\thelper.border(context, option);\r\n\r\n\t\t\t//\r\n\t\t\tif (col > 0 && grid[_].headerMap.getCell(col - 1, row).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (row > 0 &&\r\n\t\t\t\t\t\tgrid[_].headerMap.getCell(col, row - 1).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[0]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction _refreshHeader(grid) {\r\n\t\tif (grid[_].headerEvents) {\r\n\t\t\tgrid[_].headerEvents.forEach((id) => grid.unlisten(id));\r\n\t\t}\r\n\t\tgrid[_].headerMap = new HeaderMap(grid[_].header);\r\n\t\tgrid[_].headerEvents = [];\r\n\t\tgrid[_].headerMap.headerObjects.forEach((cell) => {\r\n\t\t\tconst ids = cell.headerType.bindGridEvent(grid);\r\n\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\tif (cell.style) {\r\n\t\t\t\tif (cell.style instanceof HeaderBaseStyle) {\r\n\t\t\t\t\tconst id = cell.style.listen(HeaderBaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].headerMap.columns.forEach((col, index) => {\r\n\t\t\tif (col.action) {\r\n\t\t\t\tconst ids = col.action.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.columnType) {\r\n\t\t\t\tconst ids = col.columnType.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.style) {\r\n\t\t\t\tif (col.style instanceof BaseStyle) {\r\n\t\t\t\t\tconst id = col.style.listen(columns.style.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid.colCount = grid[_].headerMap.columns.length;\r\n\t\t_refreshRowCount(grid);\r\n\t\tgrid.frozenRowCount = grid[_].headerMap.rowCount;\r\n\t\tfor (let col = 0; col < grid[_].headerMap.columns.length; col++) {\r\n\t\t\tconst column = grid[_].headerMap.columns[col];\r\n\t\t\tconst {width, minWidth, maxWidth} = column;\r\n\t\t\tif (width && (width > 0 || typeof width === 'string')) {\r\n\t\t\t\tgrid.setColWidth(col, width);\r\n\t\t\t}\r\n\t\t\tif (minWidth && (minWidth > 0 || typeof minWidth === 'string')) {\r\n\t\t\t\tgrid.setMinColWidth(col, minWidth);\r\n\t\t\t}\r\n\t\t\tif (maxWidth && (maxWidth > 0 || typeof maxWidth === 'string')) {\r\n\t\t\t\tgrid.setMaxColWidth(col, maxWidth);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isArrayHeaderRowHeight = Array.isArray(grid[_].headerRowHeight);\r\n\t\tfor (let row = 0; row < grid[_].headerMap.rowCount; row++) {\r\n\t\t\tconst height = isArrayHeaderRowHeight ? grid[_].headerRowHeight[row] : grid[_].headerRowHeight;\r\n\t\t\tif (height && height > 0) {\r\n\t\t\t\tgrid.setRowHeight(row, height);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _refreshRowCount(grid) {\r\n\t\tgrid.rowCount = grid[_].dataSource.length + grid[_].headerMap.rowCount;\r\n\t}\r\n\tfunction _tryWithUpdateDataSource(grid, fn) {\r\n\t\tif (grid[_].dataSourceEventIds) {\r\n\t\t\tgrid[_].dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n\t\t}\r\n\r\n\t\tfn(grid);\r\n\r\n\t\tgrid[_].dataSourceEventIds = [\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n\t\t\t\t_refreshRowCount(grid);\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction _setRecords(grid, records = []) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tgrid[_].records = records;\r\n\t\t\tgrid[_].dataSource = CachedDataSource.ofArray(grid[_].records);\r\n\t\t});\r\n\t}\r\n\tfunction _setDataSource(grid, dataSource) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tif (dataSource) {\r\n\t\t\t\tif (dataSource instanceof DataSource) {\r\n\t\t\t\t\tgrid[_].dataSource = dataSource;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgrid[_].dataSource = new CachedDataSource(dataSource);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tgrid[_].dataSource = DataSource.EMPTY;\r\n\t\t\t}\r\n\t\t\tgrid[_].records = null;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction _getRowRecordIndex(grid, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn undefined;\r\n\t\t} else {\r\n\t\t\treturn row - grid[_].headerMap.rowCount;\r\n\t\t}\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\tclass HeaderMap {\r\n\t\tconstructor(header) {\r\n\t\t\tthis._columns = [];\r\n\t\t\tthis._headerCells = [];\r\n\t\t\tthis._headerObjects = [];\r\n\r\n\t\t\tthis._addHeaders(0, header, []);\r\n\t\t\tthis._setupHeaderType();\r\n\t\t}\r\n\t\tget columns() {\r\n\t\t\treturn this._columns;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this._headerCells.length;\r\n\t\t}\r\n\t\tget headerObjects() {\r\n\t\t\treturn this._headerObjects;\r\n\t\t}\r\n\t\tgetCell(col, row) {\r\n\t\t\treturn this._headerCells[row][col];\r\n\t\t}\r\n\t\tgetHeaderCellRangeById(id) {\r\n\t\t\tfor (let r = 0; r < this.rowCount; r++) {\r\n\t\t\t\tfor (let c = 0; c < this.columns.length; c++) {\r\n\t\t\t\t\tif (id === this.getCell(c, r).id) {\r\n\t\t\t\t\t\treturn this.getHeaderCellRange(c, r);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tgetHeaderCellRange(col, row) {\r\n\t\t\tconst result = {\r\n\t\t\t\tstartCol: col,\r\n\t\t\t\tstartRow: row,\r\n\t\t\t\tendCol: col,\r\n\t\t\t\tendRow: row,\r\n\t\t\t\tisCellInRange(col, row) {\r\n\t\t\t\t\treturn this.startCol <= col && col <= this.endCol &&\r\n\t\t\t\t\t\t\tthis.startRow <= row && row <= this.endRow;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst {id} = this.getCell(col, row);\r\n\t\t\tfor (let c = col - 1; c >= 0; c--) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let c = col + 1; c < this.columns.length; c++) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startRow = r;\r\n\t\t\t}\r\n\t\t\tfor (let r = row + 1; r < this.rowCount; r++) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endRow = r;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\t_addHeaders(row, header, roots) {\r\n\t\t\tconst rowCells = this._headerCells[row] || this._newRow(row);\r\n\t\t\theader.forEach((hd) => {\r\n\t\t\t\tconst col = this._columns.length;\r\n\t\t\t\tconst cell = {\r\n\t\t\t\t\tid: headerId++,\r\n\t\t\t\t\tcaption: hd.caption,\r\n\t\t\t\t\tstyle: hd.headerStyle,\r\n\t\t\t\t\tsort: hd.sort,\r\n\t\t\t\t};\r\n\t\t\t\tthis._headerObjects.push(cell);\r\n\t\t\t\trowCells[col] = cell;\r\n\t\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\t\tthis._headerCells[r][col] = roots[r];\r\n\t\t\t\t}\r\n\t\t\t\tif (hd.columns) {\r\n\t\t\t\t\tthis._addHeaders(row + 1, hd.columns, [...roots, cell]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._columns.push({\r\n\t\t\t\t\t\twidth: hd.width,\r\n\t\t\t\t\t\tminWidth: hd.minWidth,\r\n\t\t\t\t\t\tmaxWidth: hd.maxWidth,\r\n\t\t\t\t\t\tfield: hd.field,\r\n\t\t\t\t\t\ticon: hd.icon,\r\n\t\t\t\t\t\tmessage: hd.message,\r\n\t\t\t\t\t\tcolumnType: columns.type.of(hd.columnType),\r\n\t\t\t\t\t\taction: columns.action.of(hd.action),\r\n\t\t\t\t\t\tstyle: hd.style,\r\n\t\t\t\t\t\tdefine: hd,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (let r = row + 1; r < this._headerCells.length; r++) {\r\n\t\t\t\t\t\tthis._headerCells[r][col] = cell;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setupHeaderType() {\r\n\t\t\tthis._headerObjects.forEach((cell) => {\r\n\t\t\t\tcell.range = this.getHeaderCellRangeById(cell.id);\r\n\t\t\t\tcell.headerType = headerType.create(cell);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_newRow(row) {\r\n\t\t\tconst newRow = this._headerCells[row] = [];\r\n\t\t\tif (!this._columns.length) {\r\n\t\t\t\treturn newRow;\r\n\t\t\t}\r\n\t\t\tconst prev = this._headerCells[row - 1];\r\n\t\t\tfor (let col = 0; col < prev.length; col++) {\r\n\t\t\t\tnewRow[col] = prev[col];\r\n\t\t\t}\r\n\t\t\treturn newRow;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction adjustListGridOption(options) {\r\n\t\tif (options) {\r\n\t\t\tdelete options.frozenRowCount;\r\n\t\t\tdelete options.colCount;\r\n\t\t\tdelete options.rowCount;\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\t\r\n\t/**\r\n\t * ListGrid\r\n\t * @classdesc cheetahGrid.ListGrid\r\n\t * @extends cheetahGrid.core.DrawGrid\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tclass ListGrid extends DrawGrid {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * header: see header property\r\n\t\t * records {array}: records data\r\n\t\t * dataSource {DataSource}: records data source\r\n\t\t * frozenColCount {number}: default 0\r\n\t\t * defaultRowHeight {number}: default grid row height. default 40\r\n\t\t * defaultColWidth {number}: default grid col width. default 80\r\n\t\t * borderColor: border color\r\n\t\t * parentElement {Element}: canvas parentElement\r\n\t\t * theme {object}: theme\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(options = {}) {\r\n\t\t\tsuper(adjustListGridOption(options));\r\n\t\t\tthis[_].header = options.header || [];\r\n\t\t\tthis[_].headerRowHeight = options.headerRowHeight || [];\r\n\t\t\tif (options.dataSource) {\r\n\t\t\t\t_setDataSource(this, options.dataSource);\r\n\t\t\t} else {\r\n\t\t\t\t_setRecords(this, options.records);\r\n\t\t\t}\r\n\t\t\t_refreshHeader(this);\r\n\t\t\tthis[_].sortState = {\r\n\t\t\t\tcol: -1,\r\n\t\t\t\torder: undefined,\r\n\t\t\t};\r\n\t\t\tthis[_].gridCanvasHelper = new GridCanvasHelper(this);\r\n\t\t\tthis[_].theme = themes.of(options.theme);\r\n\t\t\tthis[_].messageHandler = new MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n\t\t\tthis.invalidate();\r\n\t\t\tthis[_].handler.on(window, 'resize', () => {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t\tthis.updateScroll();\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t});\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis[_].messageHandler.dispose();\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tget header() {\r\n\t\t\treturn this[_].header;\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * <pre>\r\n\t\t * column options\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * field: field name\r\n\t\t * width: column width\r\n\t\t * minWidth: column min width\r\n\t\t * maxWidth: column max width\r\n\t\t * icon: icon name\r\n\t\t * message: message key name\r\n\t\t * columnType: ColumnType\r\n\t\t * action: ColumnAction\r\n\t\t * style: ColumnStyle\r\n\t\t * sort: define sort setting\r\n\t\t * -----\r\n\t\t *\r\n\t\t * multiline header\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * columns: columns define\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tset header(header) {\r\n\t\t\tthis[_].header = header;\r\n\t\t\t_refreshHeader(this);\r\n\t\t}\r\n\t\tget records() {\r\n\t\t\treturn this[_].records;\r\n\t\t}\r\n\t\tset records(records) {\r\n\t\t\t_setRecords(this, records);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget dataSource() {\r\n\t\t\treturn this[_].dataSource;\r\n\t\t}\r\n\t\tset dataSource(dataSource) {\r\n\t\t\t_setDataSource(this, dataSource);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this[_].theme;\r\n\t\t}\r\n\t\tset theme(theme) {\r\n\t\t\tthis[_].theme = themes.of(theme);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn super.font || this[_].gridCanvasHelper.theme.font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tsuper.font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tsuper.underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tget sortState() {\r\n\t\t\treturn this[_].sortState;\r\n\t\t}\r\n\t\tset sortState(sortState) {\r\n\t\t\tthis[_].sortState = sortState;\r\n\t\t}\r\n\t\tgetField(col) {\r\n\t\t\treturn this[_].headerMap.columns[col].field;\r\n\t\t}\r\n\t\tgetRowRecord(row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t} else {\r\n\t\t\t\treturn this[_].dataSource.get(_getRowRecordIndex(this, row));\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetGridCanvasHelper() {\r\n\t\t\treturn this[_].gridCanvasHelper;\r\n\t\t}\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol, startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tif (startCol !== col || startRow !== row) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn _getCellValue(this, col, row);\r\n\t\t}\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\tconst column = this[_].headerMap.columns[col];\r\n\r\n\t\t\tlet draw;\r\n\t\t\tlet style;\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst hd = this[_].headerMap.getCell(col, row);\r\n\t\t\t\tdraw = hd.headerType.onDrawCell;\r\n\t\t\t\t({style} = hd);\r\n\t\t\t\t_updateRect(this, col, row, context);\r\n\t\t\t} else {\r\n\t\t\t\tdraw = column.columnType.onDrawCell;\r\n\t\t\t\t({style} = column);\r\n\t\t\t}\r\n\t\t\tconst cellValue = _getCellValue(this, col, row);\r\n\t\t\treturn _onDrawValue(this, cellValue, context, {col, row}, style, draw);\r\n\t\t}\r\n\t\tdoGetCellValue(col, row, valueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst value = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(value)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvalueCallback(value);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tdoChangeValue(col, row, changeValueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst before = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(before)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tconst after = changeValueCallback(before);\r\n\t\t\t\tif (after === undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn then(_setCellValue(this, col, row, after), (ret) => {\r\n\t\t\t\t\tif (ret) {\r\n\t\t\t\t\t\tconst {field} = this[_].headerMap.columns[col];\r\n\t\t\t\t\t\tconst self = this;\r\n\t\t\t\t\t\tthis.fireListeners(EVENT_TYPE.CHANGED_VALUE, {\r\n\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\tget record() {\r\n\t\t\t\t\t\t\t\treturn self.getRowRecord(row);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfield,\r\n\t\t\t\t\t\t\tvalue: after,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\tthis.listen(EVENT_TYPE.SELECTED_CELL, (e) => {\r\n\t\t\t\tif (e.row < this[_].headerMap.rowCount) {\r\n\t\t\t\t\tconst {startCol, endCol, startRow, endRow} = _getHeaderCellRange(this, e.col, e.row);\r\n\t\t\t\t\tif (startCol !== endCol || startRow !== endRow) {\r\n\t\t\t\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = startCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveLeftColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = endCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveRightColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = startRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveUpRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = endRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveDownRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tgetColumnIndexByField(field) {\r\n\t\t\tfor (const columnIndex in this[_].headerMap.columns) {\r\n\t\t\t\tif (this[_].headerMap.columns[columnIndex].field === field) {\r\n\t\t\t\t\treturn columnIndex - 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfocusGridCell(field, index) {\r\n\t\t\tconst {\r\n\t\t\t\tstart: {col: startCol, row: startRow},\r\n\t\t\t\tend: {col: endCol, row: endRow}\r\n\t\t\t} = this.selection.range;\r\n\r\n\t\t\tconst newCol = this.getColumnIndexByField(field);\r\n\t\t\tconst newRow = index + this[_].headerMap.rowCount;\r\n\t\t\tthis.focusCell(newCol, newRow);\r\n\t\t\tthis.selection.select = {\r\n\t\t\t\tcol: newCol,\r\n\t\t\t\trow: newRow\r\n\t\t\t};\r\n\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\tthis.invalidateCell(newCol, newRow);\r\n\t\t}\r\n\t\tmakeVisibleGridCell(field, index) {\r\n\t\t\tthis.makeVisibleCell(this.getColumnIndexByField(field), index + this[_].headerMap.rowCount);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ListGrid;\r\n}","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst InlineIcon = require('./InlineIcon');\r\nconst InlineImage = require('./InlineImage');\r\nconst InlineSvg = require('./InlineSvg');\r\nconst InlineDrawer = require('./InlineDrawer');\r\nconst InlinePath2D = require('./InlinePath2D');\r\nconst {isDef} = require('../internal/utils');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst icons = require('../icons');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nfunction drawRegisteredIcon(ctx, icon,\r\n\t\tdrawWidth, drawHeight,\r\n\t\tleft, top, width, height,\r\n\t\t{\r\n\t\t\toffset = 2,\r\n\t\t\tpadding,\r\n\t\t} = {}) {\r\n\tconst rect = {\r\n\t\tleft,\r\n\t\ttop,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tright: left + width,\r\n\t\tbottom: top + height,\r\n\t};\r\n\tctx.save();\r\n\ttry {\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t//clip\r\n\t\tctx.clip();\r\n\r\n\t\t//\r\n\t\tconst pos = calcStartPosition(ctx, rect, drawWidth, drawHeight, {\r\n\t\t\toffset,\r\n\t\t\tpadding\r\n\t\t});\r\n\t\tpath2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n\t} finally {\r\n\t\tctx.restore();\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\ticonOf(icon) {\r\n\t\tif (icon instanceof Inline) {\r\n\t\t\treturn icon;\r\n\t\t}\r\n\t\tif (!icon) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (icon.font && icon.content) {\r\n\t\t\treturn new InlineIcon(icon);\r\n\t\t}\r\n\t\tif (icon.src) {\r\n\t\t\treturn new InlineImage({\r\n\t\t\t\tsrc: icon.src,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.svg) {\r\n\t\t\treturn new InlineSvg({\r\n\t\t\t\tsvg: icon.svg,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.path) {\r\n\t\t\treturn new InlinePath2D({\r\n\t\t\t\tpath: icon.path,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst regedIcons = icons.get();\r\n\t\tif (icon.name && regedIcons[icon.name]) {\r\n\t\t\tconst regedIcon = regedIcons[icon.name];\r\n\t\t\tconst width = icon.width || Math.max(regedIcon.width, regedIcon.height);\r\n\t\t\treturn new InlineDrawer({\r\n\t\t\t\tdraw({\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\trect,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\toffsetRight,\r\n\t\t\t\t\toffsetTop,\r\n\t\t\t\t\toffsetBottom,\r\n\t\t\t\t}) {\r\n\t\t\t\t\tdrawRegisteredIcon(ctx, regedIcon,\r\n\t\t\t\t\t\t\twidth, width,\r\n\t\t\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\twidth,\r\n\t\t\t\theight: width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn new InlineIcon(icon);\r\n\t},\r\n\tof(content) {\r\n\t\tif (!isDef(content)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (content instanceof Inline) {\r\n\t\t\treturn content;\r\n\t\t}\r\n\t\treturn new Inline(content);\r\n\t},\r\n\tbuildInlines(icons, inline) {\r\n\t\tconst result = [];\r\n\t\tif (icons) {\r\n\t\t\tresult.push(...(icons.map((icon) => this.iconOf(icon)).filter((e) => !!e)));\r\n\t\t}\r\n\t\tif (Array.isArray(inline) && inline.filter((il) => il instanceof Inline).length) {\r\n\t\t\tresult.push(...(inline.map((il) => this.of(il)).filter((e) => !!e)));\r\n\t\t} else {\r\n\t\t\tconst il = this.of(inline);\r\n\t\t\tif (il) {\r\n\t\t\t\tresult.push(il);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n};","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst fonts = require('../internal/fonts');\r\n\r\nclass InlineIcon extends Inline {\r\n\tconstructor(icon) {\r\n\t\tsuper();\r\n\t\tthis._icon = icon || {};\r\n\t}\r\n\twidth({ctx}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.width) {\r\n\t\t\treturn icon.width;\r\n\t\t}\r\n\t\tif (icon.font && fonts.check(icon.font, icon.content)) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.font = icon.font || ctx.font;\r\n\t\t\t\treturn ctx.measureText(icon.content).width;\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfont() {\r\n\t\treturn this._icon.font;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._icon.color;\r\n\t}\r\n\tcanDraw() {\r\n\t\tconst icon = this._icon;\r\n\t\treturn icon.font ? fonts.check(icon.font, icon.content) : true;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.font && !fonts.check(icon.font, icon.content)) {\r\n\t\t\tfonts.load(icon.font, icon.content, callback);\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t\toffsetTop,\r\n\t\t\t\toffsetBottom,\r\n\t\t\t}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.content) {\r\n\t\t\tcanvashelper.fillTextRect(ctx, icon.content,\r\n\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineIcon;","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\n\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler = require('./FontRuler');\r\n\r\n\r\nconst LastResortFonts = {\r\n\tSERIF: 'serif',\r\n\tSANS_SERIF: 'sans-serif'\r\n};\r\n\r\n\r\nconst watchRunners = {};\r\n\r\nclass FontWatchRunner {\r\n\tstatic load(font, testStr, activeCallback, inactiveCallback) {\r\n\t\tconst c = watchRunners[font] || (watchRunners[font] = {});\r\n\t\ttestStr = testStr + '';\r\n\t\tlet runner;\r\n\t\tif (c[testStr]) {\r\n\t\t\trunner = c[testStr];\r\n\t\t} else {\r\n\t\t\trunner = (c[testStr] = new FontWatchRunner(font, testStr));\r\n\t\t}\r\n\t\trunner.then(activeCallback, inactiveCallback);\r\n\t}\r\n\tconstructor(font, testStr) {\r\n\t\tthis.activeCallbacks = [];\r\n\t\tthis.inactiveCallbacks = [];\r\n\t\tthis.status = null;\r\n\t\tthis.lastResortWidths_ = {};\r\n\r\n\t\tthis.fontRulerA_ = new FontRuler(font + ',' + LastResortFonts.SERIF, testStr);\r\n\t\tthis.fontRulerB_ = new FontRuler(font + ',' + LastResortFonts.SANS_SERIF, testStr);\r\n\t\tconst lastResortRulerA = new FontRuler('4px ' + LastResortFonts.SERIF, testStr);\r\n\t\tconst lastResortRulerB = new FontRuler('4px ' + LastResortFonts.SANS_SERIF, testStr);\r\n\r\n\t\t//start\r\n\t\tthis.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n\t\tthis.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\r\n\r\n\t\tlastResortRulerA.remove();\r\n\t\tlastResortRulerB.remove();\r\n\r\n\t\tthis.started_ = Date.now();\r\n\r\n\t\tthis.check_();\r\n\t}\r\n\tthen(activeCallback, inactiveCallback) {\r\n\t\tif (this.status) {\r\n\t\t\tif (this.status !== 'ng') {\r\n\t\t\t\tactiveCallback();\r\n\t\t\t} else {\r\n\t\t\t\tinactiveCallback();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.activeCallbacks.push(activeCallback);\r\n\t\t\tthis.inactiveCallbacks.push(inactiveCallback);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tcheck_() {\r\n\t\tconst widthA = this.fontRulerA_.getWidth();\r\n\t\tconst widthB = this.fontRulerB_.getWidth();\r\n\r\n\t\tif (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\tif (Date.now() - this.started_ >= 3000) { // timeout\r\n\t\t\t\tif (this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\t\t\tthis.status = 'ok';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.finish_(this.inactiveCallbacks);\r\n\t\t\t\t\tthis.status = 'ng';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.check_();\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\tthis.status = 'ok';\r\n\t\t}\r\n\t}\r\n\tisFallbackFont_(a, b) {\r\n\t\treturn this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\r\n\t}\r\n\twidthsMatchLastResortWidths_(a, b) {\r\n\t\tfor (const font in LastResortFonts) {\r\n\t\t\tif (LastResortFonts.hasOwnProperty(font)) {\r\n\t\t\t\tif (this.widthMatches_(a, LastResortFonts[font]) &&\r\n\t\t\t\t\t\tthis.widthMatches_(b, LastResortFonts[font])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\twidthMatches_(width, lastResortFont) {\r\n\t\treturn width === this.lastResortWidths_[lastResortFont];\r\n\t}\r\n\tisLastResortFont_(a, b) {\r\n\t\treturn hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n\t}\r\n\tfinish_(callbacks) {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.fontRulerA_.remove();\r\n\t\t\tthis.fontRulerB_.remove();\r\n\t\t\tcallbacks.forEach((cb) => cb());\r\n\t\t}, 0);\r\n\t}\r\n}\r\n\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n\tif (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n\t\tconst match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n\r\n\t\tHAS_WEBKIT_FALLBACK_BUG = !!match &&\r\n\t\t\t(parseInt(match[1], 10) < 536 ||\r\n\t\t\t(parseInt(match[1], 10) === 536 &&\r\n\t\t\tparseInt(match[2], 10) <= 11));\r\n\t}\r\n\treturn HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\n\r\nmodule.exports = FontWatchRunner;\r\n","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\nfunction computeStyle(font) {\r\n\treturn [{\r\n\t\tdisplay: 'block',\r\n\t\tposition: 'absolute',\r\n\t\ttop: '-9999px',\r\n\t\tleft: '-9999px',\r\n\t\twidth: 'auto',\r\n\t\theight: 'auto',\r\n\t\tmargin: '0',\r\n\t\tpadding: '0',\r\n\t\t'white-space': 'nowrap',\r\n\t\tfont,\r\n\t}, {\r\n\t\t'font-variant': 'normal',\r\n\t\t'font-size': '300px',\r\n\t\t'font-style': 'normal',\r\n\t\t'font-weight': '400',\r\n\t\t'line-height': 'normal',\r\n\t}];\r\n}\r\n\r\nclass FontRuler {\r\n\tconstructor(font, testStr) {\r\n\t\tconst e = document.createElement('span');\r\n\t\te.setAttribute('aria-hidden', 'true');\r\n\t\te.textContent = testStr || 'BESbswy';\r\n\r\n\t\tcomputeStyle(font).forEach((style) => {\r\n\t\t\tfor (const key in style) {\r\n\t\t\t\te.style[key] = style[key];\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.body.appendChild(e);\r\n\t\tthis.el_ = e;\r\n\t}\r\n\tgetWidth() {\r\n\t\treturn this.el_.offsetWidth;\r\n\t}\r\n\tremove() {\r\n\t\tdocument.body.removeChild(this.el_);\r\n\t}\r\n}\r\n\r\nmodule.exports = FontRuler;\r\n\r\n\r\n","'use strict';\r\n\r\nconst InlineImage = require('./InlineImage');\r\nconst {then} = require('../internal/utils');\r\n\r\nfunction buildSvgDataUrl(svg) {\r\n\tconst data = (typeof svg === 'string') ? svg : new XMLSerializer().serializeToString(svg);\r\n\tconst url = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(data); //svgbase64\r\n\treturn url;\r\n}\r\nfunction getSvgElement(svg) {\r\n\tif (typeof svg === 'string') {\r\n\t\tconst parser = new DOMParser();\r\n\t\treturn parser.parseFromString(svg, 'image/svg+xml');\r\n\t} else {\r\n\t\treturn svg;\r\n\t}\r\n}\r\n\r\nclass InlineSvg extends InlineImage {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsvg,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tconst svgElem = then(svg, getSvgElement);\r\n\t\tconst elmWidth = svgElem.getAttribute ? svgElem.getAttribute('width') : null;\r\n\t\tconst elmHeight = svgElem.getAttribute ? svgElem.getAttribute('height') : null;\r\n\t\tsuper({\r\n\t\t\tsrc: then(svg, buildSvgDataUrl),\r\n\t\t\twidth: width || elmWidth,\r\n\t\t\theight: height || elmHeight,\r\n\t\t\timageWidth: elmWidth,\r\n\t\t\timageHeight: elmHeight,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineSvg;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\n\r\nclass InlineDrawer extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tdraw,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._draw = draw;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t\toffsetTop,\r\n\t\t\t\toffsetBottom,\r\n\t\t\t}) {\r\n\t\tthis._draw({\r\n\t\t\tctx,\r\n\t\t\tcanvashelper,\r\n\t\t\trect,\r\n\t\t\toffset,\r\n\t\t\toffsetLeft,\r\n\t\t\toffsetRight,\r\n\t\t\toffsetTop,\r\n\t\t\toffsetBottom,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineDrawer;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nclass InlinePath2D extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tpath,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t// IEPath2Dpolyfill\r\n\t\tthis._path = new path2DManager.Path2D(path);\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight,\r\n\t\toffsetTop,\r\n\t\toffsetBottom,\r\n\t}) {\r\n\t\toffset++;\r\n\t\tconst padding = {\r\n\t\t\tleft: offsetLeft,\r\n\t\t\tright: offsetRight,\r\n\t\t\ttop: offsetTop,\r\n\t\t\tbottom: offsetBottom,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, this._width, this._height, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\tctx.translate(pos.x, pos.y);\r\n\t\t\tctx.fill(this._path);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlinePath2D;","'use strict';\r\n\r\nconst PathCommandsParser = require('./PathCommandsParser');\r\nconst parser = new PathCommandsParser();\r\n\r\nclass Path2D {\r\n\tconstructor(arg) {\r\n\t\tthis._ops = [];\r\n\t\t[\r\n\t\t\t'closePath',\r\n\t\t\t'moveTo',\r\n\t\t\t'lineTo',\r\n\t\t\t'bezierCurveTo',\r\n\t\t\t'quadraticCurveTo',\r\n\t\t\t'arc',\r\n\t\t\t'rect'\r\n\t\t].forEach((name) => {\r\n\t\t\tthis[name] = (...args) => {\r\n\t\t\t\tthis._ops.push({op: name, args});\r\n\t\t\t};\r\n\t\t});\r\n\t\tif (arg === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (typeof arg === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tthis._ops = parser.parse(arg);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t} else if (arg.hasOwnProperty('_ops')) {\r\n\t\t\tthis._ops = [...this._ops];\r\n\t\t} else {\r\n\t\t\tthrow new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst CanvasRenderingContext2D = window.CanvasRenderingContext2D;\r\n\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n\r\nCanvasRenderingContext2D.prototype.fill = function(...args) {\r\n\tif (args[0] instanceof Path2D) {\r\n\t\tconst path = args[0];\r\n\t\tthis.beginPath();\r\n\t\tpath._ops.forEach((op) => {\r\n\t\t\tthis[op.op](...op.args);\r\n\t\t});\r\n\t\toriginalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n\t} else {\r\n\t\toriginalFill.apply(this, args);\r\n\t}\r\n};\r\n\r\nmodule.exports = Path2D;\r\n","'use strict';\r\n\r\nconst PathCommands = require('./PathCommands');\r\n\r\nfunction pathTokens(d) {\r\n\tlet idx = 0;\r\n\treturn {\r\n\t\tnext() {\r\n\t\t\tlet s = '';\r\n\t\t\twhile (d.length > idx) {\r\n\t\t\t\tconst c = d[idx];\r\n\t\t\t\tidx++;\r\n\t\t\t\tif (' ,\\n\\r\\t'.indexOf(c) > -1) {\r\n\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst type = '.+-1234567890'.indexOf(c) > -1 ? 'num' : 'str';\r\n\t\t\t\t\tif (type === 'str') {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('-+'.indexOf(c) > -1) {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\tif (s.indexOf('.') > -1) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += c;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn s || null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction command(builder, cmd, argsProvider) {\r\n\tif (cmd.toUpperCase() === 'M' || cmd.toUpperCase() === 'L' || cmd.toUpperCase() === 'T') {\r\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next());\r\n\t\treturn cmd === 'M' ? 'L'\r\n\t\t\t: cmd === 'm' ? 'l'\r\n\t\t\t: cmd;\r\n\t} else if (cmd.toUpperCase() === 'H' || cmd.toUpperCase() === 'V') {\r\n\t\tbuilder.command(cmd, argsProvider.next());\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'Z') {\r\n\t\tbuilder.command(cmd);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'C') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'S' || cmd.toUpperCase() === 'Q') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'A') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else {\r\n\t\t// https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n\t\tconsole.warn('unsupported:' + cmd);\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nconst canvasOperations = window.CanvasRenderingContext2D ? Object.keys(window.CanvasRenderingContext2D.prototype) : [\r\n\t'save',\r\n\t'restore',\r\n\t'beginPath',\r\n\t'closePath',\r\n\t'moveTo',\r\n\t'lineTo',\r\n\t'bezierCurveTo',\r\n\t'quadraticCurveTo',\r\n\t'arc',\r\n\t'arcTo',\r\n\t'ellipse',\r\n\t'rect',\r\n\t'translate',\r\n\t'rotate',\r\n\t'scale',\r\n];\r\n\r\nclass PathCommandsParser {\r\n\tconstructor() {\r\n\t\tthis._commands = new PathCommands(this);\r\n\t\tcanvasOperations.forEach((op) => {\r\n\t\t\tthis[op] = (...args) => {\r\n\t\t\t\tthis._ops.push({\r\n\t\t\t\t\top,\r\n\t\t\t\t\targs,\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\tcommand(name, ...args) {\r\n\t\targs = args || [];\r\n\t\tfor (let i = 0; i < args.length; i++) {\r\n\t\t\targs[i] = args[i] - 0;\r\n\t\t}\r\n\t\tthis._commands[name](...(args));\r\n\t}\r\n\tparse(d) {\r\n\t\tconst ops = this._ops = [];\r\n\t\tconst tokens = pathTokens(d);\r\n\t\ttry {\r\n\t\t\tlet cmd;\r\n\t\t\tlet subsequentCommand;\r\n\t\t\twhile ((cmd = tokens.next())) {\r\n\t\t\t\tif (!isNaN(cmd - 0)) {\r\n\t\t\t\t\tlet fst = true;\r\n\t\t\t\t\tconst argsProvider = {\r\n\t\t\t\t\t\tnext() {\r\n\t\t\t\t\t\t\tif (fst) {\r\n\t\t\t\t\t\t\t\tfst = false;\r\n\t\t\t\t\t\t\t\treturn cmd;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn tokens.next();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tsubsequentCommand = command(this, subsequentCommand, argsProvider);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsubsequentCommand = command(this, cmd, tokens);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('Error: ' + d);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t\treturn ops;\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommandsParser;","'use strict';\r\n\r\nfunction mag(v) {\r\n\treturn Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\n    \r\nfunction dot(u, v) {\r\n\treturn (u[0] * v[0] + u[1] * v[1]);\r\n}\r\n    \r\nfunction ratio(u, v) {\r\n\treturn dot(u, v) / (mag(u) * mag(v));\r\n}\r\n\r\nfunction clamp(value, min, max) {\r\n\treturn Math.min(Math.max(value, min), max);\r\n}\r\n    \r\nfunction angle(u, v) {\r\n\tlet sign = 1.0;\r\n\tif ((u[0] * v[1] - u[1] * v[0]) < 0) {\r\n\t\tsign = -1.0;\r\n\t}\r\n\treturn sign * Math.acos(clamp(ratio(u, v)), -1, 1);\r\n}\r\n    \r\nfunction rotClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction rotCounterClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction midPoint(u, v) {\r\n\treturn [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\n    \r\nfunction meanVec(u, v) {\r\n\treturn [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\n    \r\nfunction pointMul(u, v) {\r\n\treturn [u[0] * v[0], u[1] * v[1]];\r\n}\r\n    \r\nfunction scale(c, v) {\r\n\treturn [c * v[0], c * v[1]];\r\n}\r\n    \r\nfunction sum(u, v) {\r\n\treturn [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n\t// Convert from endpoint to center parametrization, as detailed in:\r\n\t//   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n\tif (rx === 0 || ry === 0) {\r\n\t\tctx.lineTo(x2, x1);\r\n\t\treturn;\r\n\t}\r\n\tphi = phi * (Math.PI / 180.0);\r\n\trx = Math.abs(rx);\r\n\try = Math.abs(ry);\r\n\tconst xPrime = rotClockwise(midPoint(x1, x2), phi); // F.6.5.1\r\n\tconst xPrime2 = pointMul(xPrime, xPrime);\r\n\tlet rx2 = Math.pow(rx, 2);\r\n\tlet ry2 = Math.pow(ry, 2);\r\n    \r\n\tconst lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n\tif (lambda > 1) {\r\n\t\trx *= lambda;\r\n\t\try *= lambda;\r\n\t\trx2 = Math.pow(rx, 2);\r\n\t\try2 = Math.pow(ry, 2);\r\n\t}\r\n\tlet factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n\tif (fA === fS) {\r\n\t\tfactor *= -1.0;\r\n\t}\r\n\tconst cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\r\n\tconst c = sum(rotCounterClockwise(cPrime, phi), meanVec(x1, x2)); // F.6.5.3\r\n\tconst x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\r\n\tconst x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\r\n\tconst theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n\tconst deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n\tconst start = theta;\r\n\tconst end = theta + deltaTheta;\r\n\tctx.save();\r\n\tctx.translate(c[0], c[1]);\r\n\tctx.rotate(phi);\r\n\tctx.scale(rx, ry);\r\n\tctx.arc(0, 0, 1, start, end, 1 - fS);\r\n\tctx.restore();\r\n}\r\n\r\nclass PathCommands {\r\n\tconstructor(ctx) {\r\n\t\tlet lMx;\r\n\t\tlet lMy;\r\n\t\tlet lx = 0;\r\n\t\tlet ly = 0;\r\n\t\tlet reflected;\r\n\t\tlet lastCommand = '';\r\n\t\tfunction makeReflected() {\r\n\t\t\tif ('CcSsQqTt'.indexOf(lastCommand) < 0) {\r\n\t\t\t\treturn {x: lx, y: ly};\r\n\t\t\t}\r\n\t\t\treturn reflected;\r\n\t\t}\r\n\r\n\t\tthis.M = (px, py) => {\r\n\t\t\tctx.moveTo(px, py);\r\n\t\t\tlMx = px;\r\n\t\t\tlMy = py;\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'M';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.m = (px, py) => this.M(px + lx, py + ly);\r\n\t\tthis.L = (px, py) => {\r\n\t\t\tctx.lineTo(px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'L';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.l = (px, py) => this.L(px + lx, py + ly);\r\n\t\tthis.H = (px) => this.L(px, ly);\r\n\t\tthis.h = (px) => this.H(px + lx);\r\n\t\tthis.V = (py) => this.L(lx, py);\r\n\t\tthis.v = (py) => this.V(py + ly);\r\n\t\tthis.Z = () => {\r\n\t\t\tctx.closePath();\r\n\t\t\tlx = lMx;\r\n\t\t\tly = lMy;\r\n\t\t\tlastCommand = 'Z';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.z = () => this.Z();\r\n\t\t//C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n\t\tthis.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n\t\t\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cp2x,\r\n\t\t\t\ty: 2 * py - cp2y,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'C';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(\r\n\t\t\t\tcp1x + lx, cp1y + ly,\r\n\t\t\t\tcp2x + lx, cp2y + ly,\r\n\t\t\t\tpx + lx, py + ly\r\n\t\t);\r\n\t\t//S x2 y2, x y (or s dx2 dy2, dx dy)\r\n\t\tthis.S = (cpx, cpy, px, py) => {\r\n\t\t\tconst {x: cp1x, y: cp1y} = makeReflected(lastCommand);\r\n\t\t\treturn this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n\t\tthis.Q = (cpx, cpy, px, py) => {\r\n\t\t\tctx.quadraticCurveTo(cpx, cpy, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cpx,\r\n\t\t\t\ty: 2 * py - cpy,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'Q';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//T x y (or t dx dy)\r\n\t\tthis.T = (px, py) => {\r\n\t\t\tconst {x: cpx, y: cpy} = makeReflected();\r\n\t\t\treturn this.Q(cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.t = (px, py) => this.T(px + lx, py + ly);\r\n\t\t//A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n\t\tthis.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n\t\t\tconst x1 = lx;\r\n\t\t\tconst y1 = ly;\r\n\r\n\t\t\tellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'A';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t//a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n\t\tthis.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(\r\n\t\t\t\trx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n\t\t\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommands;","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons\\image\\svg\\production\\ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons\\content\\svg\\production\\ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","'use strict';\r\n{\r\n\tconst Header = require('./type/Header');\r\n\tconst SortHeader = require('./type/SortHeader');\r\n\r\n\tconst type = {\r\n\t\tcreate(headerCell) {\r\n\t\t\tif (headerCell.sort) {\r\n\t\t\t\treturn new SortHeader(headerCell);\r\n\t\t\t}\r\n\t\t\treturn new Header(headerCell);\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\r\n\tclass Header extends BaseHeader {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t});\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Header;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tMOUSEMOVE_CELL,\r\n\t}} = require('../../core/DrawGrid');\r\n\r\n\tclass SortHeader extends BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tsuper(headerCell);\r\n\t\t\tthis._sort = headerCell.sort;\r\n\t\t\tthis._range = headerCell.range;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\tcolor,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tfont,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst state = grid.sortState;\r\n\t\t\tlet order = undefined;\r\n\t\t\tif (this._range.isCellInRange(state.col, this._range.startRow)) {\r\n\t\t\t\torder = state.order;\r\n\t\t\t}\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tconst arrowSize = ctx.measureText('').width * 1.2;\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons: [{\r\n\t\t\t\t\tname: isDef(order) ? (order === 'asc' ? 'arrow_downward' : 'arrow_upward') : null,\r\n\t\t\t\t\twidth: arrowSize,\r\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.38)',\r\n\t\t\t\t}],\r\n\t\t\t});\r\n\t\t}\r\n\t\t_executeSort(newState, grid) {\r\n\t\t\tif (typeof this._sort === 'function') {\r\n\t\t\t\tthis._sort(newState.order, newState.col, grid);\r\n\t\t\t} else {\r\n\t\t\t\tgrid.dataSource.sort(grid.getField(newState.col), newState.order);\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst state = grid.sortState;\r\n\t\t\t\t\tlet newState;\r\n\t\t\t\t\tif (this._range.isCellInRange(state.col, e.row)) {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: state.order === 'asc' ? 'desc' : 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.sortState = newState;\r\n\t\t\t\t\tthis._executeSort(newState, grid);\r\n\t\t\t\t\tgrid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n\t\t\t\t}),\r\n\t\t\t\t// mouse move\r\n\t\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}),\r\n\t\t\t\t//MOUSEENTER'col-resize'move\r\n\t\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t\t}),\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = SortHeader;\r\n}","'use strict';\r\n\r\n\r\nconst {isPromise} = require('../../internal/utils');\r\nconst {\r\n\tSELECTED_CELL,\r\n\tSCROLL,\r\n\tCHANGED_VALUE\r\n} = require('../../list-grid/EVENT_TYPE');\r\nconst ErrorMessage = require('./ErrorMessage');\r\nconst WarningMessage = require('./WarningMessage');\r\nconst InfoMessage = require('./InfoMessage');\r\n\r\n\r\nclass MessageHandler {\r\n\tconstructor(grid, getMessage) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._messageInstances = {};\r\n\t\tthis._bindGridEvent(grid, getMessage);\r\n\t}\r\n\tdispose() {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\tfor (const k in messageInstances) {\r\n\t\t\tmessageInstances[k].dispose();\r\n\t\t}\r\n\t\tthis._messageInstances = null;\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\r\n\t\tif (!message || isPromise(message)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tinstance.drawCellMessage(message, context, style, helper, info);\r\n\t}\r\n\t_attach(col, row, message) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tif (info && info.instance !== instance) {\r\n\t\t\tinfo.instance.detachMessageElement();\r\n\t\t}\r\n\t\tinstance.attachMessageElement(col, row, this._toMessageText(message));\r\n\t\tthis._attachInfo = {col, row, instance};\r\n\t}\r\n\t_move(col, row) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info || info.col !== col || info.row !== row) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.moveMessageElement(col, row);\r\n\t}\r\n\t_detach() {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.detachMessageElement();\r\n\t\tthis._attachInfo = null;\r\n\t}\r\n\t_bindGridEvent(grid, getMessage) {\r\n\t\tconst onSelectMessage = (sel) => {\r\n\t\t\tconst message = getMessage(sel.col, sel.row);\r\n\t\t\tif (!message || isPromise(message)) {\r\n\t\t\t\tthis._detach();\r\n\t\t\t} else {\r\n\t\t\t\tthis._attach(sel.col, sel.row, message);\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\tif (!e.selected) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.before.col === e.col && e.before.row === e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t\tgrid.listen(SCROLL, () => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tthis._move(sel.col, sel.row);\r\n\t\t});\r\n\t\tgrid.listen(CHANGED_VALUE, (e) => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tif (sel.col !== e.col || sel.row !== e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t}\r\n\t_getMessageInstanceOfMessage(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t\t}\r\n\t\tconst type = ('' + message.type).toLowerCase();\r\n\t\tif (type === 'info') {\r\n\t\t\treturn this._createMessageInstance('info', InfoMessage);\r\n\t\t} else if (type === 'warning') {\r\n\t\t\treturn this._createMessageInstance('warning', WarningMessage);\r\n\t\t}\r\n\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t}\r\n\t_toMessageText(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn message;\r\n\t\t}\r\n\t\tif (message.message) {\r\n\t\t\treturn message.message;\r\n\t\t}\r\n\t\treturn '' + message;\r\n\t}\r\n\t_createMessageInstance(name, Message) {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\treturn messageInstances[name] || (messageInstances[name] = new Message(this._grid));\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageHandler;","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst ErrorMessageElement = require('./internal/ErrorMessageElement');\r\n\r\nconst RED_A100 = '#ff8a80';\r\n// const RED_A400 = '#FF1744';\r\n\r\nclass ErrorMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new ErrorMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = RED_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessage;","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__error-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass ErrorMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./ErrorMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;user-select:none}.cheetah-grid__message-element--hidden{opacity:0;display:none}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}.cheetah-grid__message-element{border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element.helper-text--right-justified{text-align:right}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n\n// exports\n","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst WarningMessageElement = require('./internal/WarningMessageElement');\r\n\r\nconst DEEP_ORANGE_A100 = '#ff9e80';\r\n\r\nclass WarningMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new WarningMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = DEEP_ORANGE_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessage;","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__warning-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass WarningMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./WarningMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n\n// exports\n","'use strict';\r\n\r\nconst BaseMessage = require('./BaseMessage');\r\nconst MessageElement = require('./internal/MessageElement');\r\n\r\nconst Rect = require('../../internal/Rect');\r\n\r\nconst GREY_L2 = '#e0e0e0';\r\n// const GREY_L1 = '#bdbdbd';\r\n\t\r\nclass InfoMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new MessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = GREY_L2;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw i mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 2, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InfoMessage;","'use strict';\r\n\r\nconst themePlugins = require('./plugins/themes');\r\nconst iconPlugins = require('./plugins/icons');\r\n\r\nfunction register(obj, name, value) {\r\n\tif (value) {\r\n\t\tconst old = obj[name];\r\n\t\tobj[name] = value;\r\n\t\treturn old;\r\n\t} else {\r\n\t\treturn obj[name];\r\n\t}\r\n}\r\nfunction registers(obj, values) {\r\n\tfor (const k in values) {\r\n\t\tobj[k] = values[k];\r\n\t}\r\n}\r\nmodule.exports = {\r\n\ttheme(name, theme) {\r\n\t\treturn register(themePlugins, name, theme);\r\n\t},\r\n\ticon(name, icon) {\r\n\t\treturn register(iconPlugins, name, icon);\r\n\t},\r\n\ticons(icons) {\r\n\t\tregisters(iconPlugins, icons);\r\n\t},\r\n};","'use strict';\r\n\r\nclass BaseMessage {\r\n\tconstructor(grid) {\r\n\t\tthis._grid = grid;\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detachMessageElement();\r\n\t\tif (this._messageElement) {\r\n\t\t\tthis._messageElement.dispose();\r\n\t\t}\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\t_getMessageElement() {\r\n\t\treturn this._messageElement || (this._messageElement = this.createMessageElementInternal());\r\n\t}\r\n\tcreateMessageElementInternal() {\r\n\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\r\n\t}\r\n\tattachMessageElement(col, row, message) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.attach(this._grid, col, row, message);\r\n\t}\r\n\tmoveMessageElement(col, row) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.move(this._grid, col, row);\r\n\t}\r\n\tdetachMessageElement() {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement._detach();\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\t\tthis.drawCellMessageInternal(message, context, style, helper, info);\r\n\t}\r\n}\r\n\r\nmodule.exports = BaseMessage;","'use strict';\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nfunction createrootElement() {\r\n\trequire('./MessageElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst message = createElement('span', {classList: [MESSAGE_CLASSNAME]});\r\n\telement.appendChild(message);\r\n\treturn element;\r\n}\r\n\r\n\r\nclass MessageElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tconst rootElement = this._rootElement = createrootElement();\r\n\t\tthis._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._rootElement = null;\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\tattach(grid, col, row, message) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst messageElement = this._messageElement;\r\n\r\n\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\r\n\t\t\tmessageElement.textContent = message;\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tmove(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tdetach() {\r\n\t\tthis._detach();\r\n\t}\r\n\t_detach() {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (rootElement.parentElement) {\r\n\t\t\trootElement.parentElement.removeChild(rootElement);\r\n\t\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\t\t}\r\n\t}\r\n\t_attachCell(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t\tconst {bottom: top, left, width} = rect;\r\n\t\tconst {frozenRowCount, frozenColCount} = grid;\r\n\t\tif (row >= frozenRowCount && frozenRowCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(col, frozenRowCount - 1);\r\n\t\t\tif (top < frozenRect.bottom) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (top < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (col >= frozenColCount && frozenColCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(frozenColCount - 1, row);\r\n\t\t\tif (left < frozenRect.right) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (left < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst {offsetHeight, offsetWidth} = element;\r\n\t\tif (offsetHeight < top) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (offsetWidth < left) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\trootElement.style.top = top.toFixed() + 'px';\r\n\t\trootElement.style.left = left.toFixed() + 'px';\r\n\t\trootElement.style.width = width.toFixed() + 'px';\r\n\t\tif (rootElement.parentElement !== element) {\r\n\t\t\telement.appendChild(rootElement);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageElement;"],"sourceRoot":""}
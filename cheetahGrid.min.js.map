{"version":3,"sources":["cheetahGrid.min/webpack/universalModuleDefinition","cheetahGrid.min/webpack/bootstrap","cheetahGrid.min/./internal/utils.js","cheetahGrid.min/./internal/symbolManager.js","cheetahGrid.min/./internal/com.js","cheetahGrid.min/./columns/style/Style.js","cheetahGrid.min/./core/DrawGrid.js","cheetahGrid.min/./internal/EventHandler.js","cheetahGrid.min/node_modules/css-loader/lib/css-base.js","cheetahGrid.min/node_modules/style-loader/lib/addStyles.js","cheetahGrid.min/./internal/Rect.js","cheetahGrid.min/./internal/canvases.js","cheetahGrid.min/./columns/type/Column.js","cheetahGrid.min/./columns/type/BaseColumn.js","cheetahGrid.min/./element/Inline.js","cheetahGrid.min/./core/EventTarget.js","cheetahGrid.min/./columns/action/Editor.js","cheetahGrid.min/./internal/dom.js","cheetahGrid.min/./header/style.js","cheetahGrid.min/./internal/calc.js","cheetahGrid.min/./columns/action/BaseAction.js","cheetahGrid.min/./columns/style/StdBaseStyle.js","cheetahGrid.min/./columns/style/BaseStyle.js","cheetahGrid.min/./columns/type/columnUtils.js","cheetahGrid.min/./internal/icons.js","cheetahGrid.min/./themes.js","cheetahGrid.min/./internal/path2DManager.js","cheetahGrid.min/./columns/message/BaseMessage.js","cheetahGrid.min/./columns/message/internal/MessageElement.js","cheetahGrid.min/./internal/style.js","cheetahGrid.min/./tools/canvashelper.js","cheetahGrid.min/./columns.js","cheetahGrid.min/./columns/action/Action.js","cheetahGrid.min/./columns/action/actionBind.js","cheetahGrid.min/./internal/animate.js","cheetahGrid.min/./columns/action/BaseInputEditor.js","cheetahGrid.min/./internal/menu-items.js","cheetahGrid.min/./columns/style.js","cheetahGrid.min/./columns/style/NumberStyle.js","cheetahGrid.min/./columns/style/CheckStyle.js","cheetahGrid.min/./columns/style/ButtonStyle.js","cheetahGrid.min/./columns/style/ImageStyle.js","cheetahGrid.min/./columns/style/IconStyle.js","cheetahGrid.min/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.min/./internal/imgs.js","cheetahGrid.min/./themes/MATERIAL_DESIGN.js","cheetahGrid.min/./plugins/themes.js","cheetahGrid.min/./data.js","cheetahGrid.min/./data/DataSource.js","cheetahGrid.min/./internal/sort.js","cheetahGrid.min/./GridCanvasHelper.js","cheetahGrid.min/./internal/fonts.js","cheetahGrid.min/./element/InlineImage.js","cheetahGrid.min/./icons.js","cheetahGrid.min/./plugins/icons.js","cheetahGrid.min/./internal/color.js","cheetahGrid.min/./header/style/BaseStyle.js","cheetahGrid.min/./header/type/BaseHeader.js","cheetahGrid.min/./list-grid/EVENT_TYPE.js","cheetahGrid.min/./main.js","cheetahGrid.min/./core.js","cheetahGrid.min/./internal/Scrollable.js","cheetahGrid.min/./internal/style.css*","cheetahGrid.min/./internal/style.css","cheetahGrid.min/node_modules/style-loader/lib/urls.js","cheetahGrid.min/./internal/NumberMap.js","cheetahGrid.min/./internal/hiDPI.js","cheetahGrid.min/./tools.js","cheetahGrid.min/./columns/action.js","cheetahGrid.min/./columns/action/CheckEditor.js","cheetahGrid.min/./columns/action/ButtonAction.js","cheetahGrid.min/./columns/action/SmallDialogInputEditor.js","cheetahGrid.min/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.min/./columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.min/./columns/action/internal/SmallDialogInputElement.css","cheetahGrid.min/./columns/action/InlineInputEditor.js","cheetahGrid.min/./columns/action/internal/InlineInputElement.js","cheetahGrid.min/./columns/action/internal/InlineInputElement.css*","cheetahGrid.min/./columns/action/internal/InlineInputElement.css","cheetahGrid.min/./columns/action/InlineMenuEditor.js","cheetahGrid.min/./columns/action/internal/InlineMenuElement.js","cheetahGrid.min/./columns/action/internal/InlineMenuElement.css*","cheetahGrid.min/./columns/action/internal/InlineMenuElement.css","cheetahGrid.min/./columns/type.js","cheetahGrid.min/./columns/type/NumberColumn.js","cheetahGrid.min/./columns/type/CheckColumn.js","cheetahGrid.min/./columns/type/ButtonColumn.js","cheetahGrid.min/./columns/type/ImageColumn.js","cheetahGrid.min/./internal/LRUCache.js","cheetahGrid.min/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.min/./columns/type/IconColumn.js","cheetahGrid.min/./columns/type/BranchGraphColumn.js","cheetahGrid.min/./columns/style/BranchGraphStyle.js","cheetahGrid.min/./columns/type/MenuColumn.js","cheetahGrid.min/./themes/theme.js","cheetahGrid.min/./themes/BASIC.js","cheetahGrid.min/./data/CachedDataSource.js","cheetahGrid.min/./ListGrid.js","cheetahGrid.min/./element/inlines.js","cheetahGrid.min/./element/InlineIcon.js","cheetahGrid.min/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.min/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.min/./element/InlineSvg.js","cheetahGrid.min/./element/InlineDrawer.js","cheetahGrid.min/./element/InlinePath2D.js","cheetahGrid.min/./internal/legacy/canvas/Path2D.js","cheetahGrid.min/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.min/./internal/legacy/canvas/PathCommands.js","cheetahGrid.min/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg","cheetahGrid.min/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg","cheetahGrid.min/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg","cheetahGrid.min/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg","cheetahGrid.min/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg","cheetahGrid.min/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg","cheetahGrid.min/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg","cheetahGrid.min/./header/type.js","cheetahGrid.min/./header/type/Header.js","cheetahGrid.min/./header/style/Style.js","cheetahGrid.min/./header/type/SortHeader.js","cheetahGrid.min/./columns/message/MessageHandler.js","cheetahGrid.min/./columns/message/ErrorMessage.js","cheetahGrid.min/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.min/./columns/message/internal/MessageElement.css*","cheetahGrid.min/./columns/message/internal/MessageElement.css","cheetahGrid.min/./columns/message/internal/ErrorMessageElement.css*","cheetahGrid.min/./columns/message/internal/ErrorMessageElement.css","cheetahGrid.min/./columns/message/WarningMessage.js","cheetahGrid.min/./columns/message/internal/WarningMessageElement.js","cheetahGrid.min/./columns/message/internal/WarningMessageElement.css*","cheetahGrid.min/./columns/message/internal/WarningMessageElement.css","cheetahGrid.min/./columns/message/InfoMessage.js","cheetahGrid.min/./register.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","arrayFind","arrayFindIndex","array","find","Array","arr","predicate","index","findIndex","undefined","length","isDef","data","ua","navigator","userAgent","toLowerCase","IE","match","Chrome","indexOf","Firefox","applyChainSafe","obj","fn","names","isPromise","then","result","callback","browser","heightLimit","extend","args","forEach","source","key","set","val","isDescendantElement","target","parentElement","getChainSafe","getOrApply","getIgnoreCase","u","k","setReadonly","each","isObject","str","endsWith","searchString","position","subjectString","toString","isFinite","Math","floor","lastIndex","lastIndexOf","event","getMouseButtons","e","buttons","which","button","getKeyCode","keyCode","isTouchEvent","changedTouches","cancel","preventDefault","stopPropagation","style","toBoxArray","__webpack_provided_Array_dot_isArray","emptyFn","Symbol","nextId","id","mem","PROTECTED_SYMBOL","this","CHECK_COLUMN_STATE_ID","BUTTON_COLUMN_STATE_ID","COLUMN_FADEIN_STATE_ID","BRANCH_GRAPH_COLUMN_STATE_ID","SMALL_DIALOG_INPUT_EDITOR_STATE_ID","INLINE_INPUT_EDITOR_STATE_ID","INLINE_MENU_EDITOR_STATE_ID","Array_isArray","isArray","StdBaseStyle","defaultStyle","Style","DEFAULT","constructor","super","_color","color","_font","font","_padding","padding","doChangeStyle","clone","cancelEvent","EventTarget","Rect","Scrollable","EventHandler","NumberMap","calc","hiDPI","_","KEY_END","KEY_HOME","KEY_LEFT","KEY_UP","KEY_RIGHT","KEY_DOWN","KEY_ALPHA_C","EVENT_TYPE","CLICK_CELL","DBLCLICK_CELL","DBLTAP_CELL","MOUSEDOWN_CELL","MOUSEUP_CELL","SELECTED_CELL","KEYDOWN","MOUSEMOVE_CELL","MOUSEENTER_CELL","MOUSELEAVE_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","INPUT_CELL","EDITABLEINPUT_CELL","MODIFY_STATUS_EDITABLEINPUT_CELL","RESIZE_COLUMN","SCROLL","_vibrate","vibrate","_getTargetRowAt","grid","absoluteY","internal","getTargetRowAtInternal","candRow","min","ceil","defaultRowHeight","rowCount","bottom","_getRowsHeight","startRow","startBottom","top","_getRowHeight","row","findAfter","findBefore","_getTargetColAt","absoluteX","left","colCount","col","right","_getColWidth","_getTargetFrozenRowAt","frozenRowCount","scroll","_getTargetFrozenColAt","frozenColCount","_getFrozenRowsRect","height","canvas","width","_getFrozenColsRect","_drawCell","ctx","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","rect","drawRect","bounds","max","save","dcContext","DrawCellContext","drawCells","_isCellDrawing","selection","onDrawCell","context","_putCellDrawing","pCol","_delayMode","keys","_removeCellDrawing","terminate","restore","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","beginPath","fillStyle","underlayBackgroundColor","fill","count","_invalidateRect","_getVisibleRect","_getInitContext","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","draw","_toPxWidth","round","toPx","calcWidthContext","_getDefaultColPxWidth","defaultColWidth","_adjustColWidth","orgWidth","limit","colWidthsLimit","colWidthsMap","_setColWidth","put","startCol","endCol","w","getRowHeightInternal","rowHeightsMap","endRow","getRowsHeightInternal","h","_moveFocusCell","shiftKey","offset","getOffsetInvalidateCells","extendRange","range","start","end","beforeRange","beforeRect","getCellsRect","_setFocusCell","makeVisibleCell","focusCell","afterRange","afterRect","intersection","_getMouseAbstractPoint","clientX","pageX","scrollX","clientY","pageY","scrollY","getBoundingClientRect","x","y","_bindEvents","getCellEventArgsSet","abstractPos","cell","getCellAt","eventArgs","canResizeColumn","handler","on","element","eventArgsSet","results","fireListeners","v","resizeCol","_getResizeColAt","columnResizer","cellSelector","doubleTapBefore","longTouchId","clearTimeout","defaultPrevented","setTimeout","select","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","onMouseleaveCell","beforeMouseCell","onMouseoverCell","onMouseoutCell","scrollElement","scrollable","getElement","moving","cursor","lastMoving","hasListeners","focusControl","listen","selected","onScroll","lastLeft","lastTop","moveX","scrollLeft","moveY","scrollTop","abs","drawImage","redrawRect","copy","frozenRect","_onScroll","onKeyDownMove","_focus","_sel","getMoveLeftColByKeyDownInternal","getMoveUpRowByKeyDownInternal","getMoveRightColByKeyDownInternal","getMoveDownRowByKeyDownInternal","ctrlKey","_onKeyDownMove","copyValue","copyCellValue","getCopyCellValue","Promise","strCellValue","onCopy","onInput","bindEventsInternal","abstractX","abstractY","inPoint","cellRect","getCellRect","_toRelativeRect","absoluteRect","offsetLeft","offsetTop","BaseMouseDownMover","_grid","_handler","_events","_started","_moved","last","_mouseEndPoint","pt","_bindMoveAndUp","touchmove","document","body","_mouseMove","passive","touchend","_mouseUp","touchcancel","mousemove","mouseup","_moveInternal","off","_upInternal","dispose","CellSelector","_getTargetCell","_cell","makeVisibleCol","makeVisibleRow","ColumnResizer","_targetCol","_x","_preX","_invalidateAbsoluteLeft","pre","getColWidth","afterSize","updateScroll","setSafeInputValue","input","type","FocusControl","_scrollable","_input","createElement","classList","add","readOnly","appendChild","_isComposition","focus","remove","metaKey","inputClear","clipboardData","setData","setFocusRect","calcTop","getScrollBarSize","toFixed","editMode","resetInputStatus","el","composition","contains","atts","attributes","removeNames","att","_inputStatus","nodeName","push","removeName","removeAttribute","setAttribute","storeInputStatus","setDefaultInputStatus","Selection","_start","_end","inCell","_wrapFireSelectedEvent","_setSelectCell","keepSelect","_isWraped","before","after","_layers","addDraw","level","DrawLayer","list","sort","a","b","_level","_list","drawing","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","getSelectState","sel","getContext","getRect","getCellRelativeRect","setRect","getDrawRect","_toRelativeDrawRect","toCurrentContext","bind","addLayerDraw","isFrozenCell","fRect","onTerminate","_onTerminate","DrawGrid","initDocument","createRootElement","transform","alpha","full","em","measureText","updateSize","configure","cfg","config","offsetWidth","offsetHeight","setScrollSize","eachAll","_getScrollWidth","getScrollHeightInternal","_getScrollHeight","getRowHeight","setRowHeight","_setRowHeight","setColWidth","getMaxColWidth","setMaxColWidth","maxwidth","getMinColWidth","setMinColWidth","minwidth","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","getRowAt","frozen","getColAt","frozenColsWidth","frozenRowsHeight","_getScrollableVisibleRect","selCol","selRow","invalidateCell","invalidateGridRect","cellsRect","invalidateTarget","invalidate","addDisposable","disposable","Error","disposables","removeChild","getAttachCellArea","strokeStyle","textAlign","textBaseline","lineWidth","_listeners","listener","options","addEventListener","tryWithOffEvents","removeEventListener","fire","hasListener","clear","useSourceMap","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","memo","stylesInDom","isOldIE","all","atob","apply","arguments","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","insertInto","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","removeStyleElement","parentNode","idx","splice","createStyleElement","attrs","addAttrs","update","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","filter","Boolean","cssNode","childNodes","_left","_top","_width","_height","[object Object]","rect1","rect2","_right","_bottom","x0","x1","y0","y1","another","calcStartPosition","paddingLeft","paddingRight","calcBasePosition","BaseColumn","utils","Column","StyleClass","drawInternal","helper","drawCellBase","getIcon","bgColor","testFontLoad","loadIcons","icons","text","styleContents","animate","BaseStyle","getFadinState","_generateFadinPointAction","point","state","stateKey","opacity","cellState","globalAlpha","fadinMgr","activeFadeins","f","margeAnimate","option","_fadeinWhenCallbackInPromise","fadeinWhenCallbackInPromise","cellValue","info","getRecord","getGridCanvasHelper","Date","now","time","currentContext","actStyle","of","convertInternal","drawMessageInternal","getMessage","column","isFadeinWhenCallbackInPromise","message","messageHandler","drawCellMessage","bindGridEvent","util","_content","canDraw","onReady","canvashelper","offsetRight","fillTextRect","listeners","listenerData","unlisten","BaseAction","Editor","_readOnly","onChangeReadOnlyInternal","tagName","html","textContent","innerHTML","isNode","arg","nodeType","toNode","dom","slice","toNodeList","jQuery","isFocusable","tabIndex","empty","appendHtml","inner","node","disableFocus","dataset","disableBeforeTabIndex","children","enableFocus","findPrevSiblingFocusable","previousSibling","findNextSiblingFocusable","columnStyle","parse","calcStr","replacer","num","unit","script","replace","eval","test","substr","trim","_disabled","disabled","onChangeDisabledInternal","_textAlign","_textBaseline","CHANGE_STYLE","_bgColor","icon","loadIcon","iconList","toNormarizeArray","ICON_PROP_KEYS","doms","props","getIconProps","className","tagProps","beforeStyle","defaultView","getComputedStyle","getPropertyValue","quoted","split","quote","clientWidth","isLiga","toSimpleArray","iconProps","workData","prop","toPropArray","normarize","iconPropKeys","theme","plugins","builtin","BASIC","create","MATERIAL_DESIGN","defTheme","themes","default","defaultTheme","t","choices","getPath2D","Path2D","ud","upsideDown","offsetX","offsetY","xrate","yrate","translate","scale","path2d","detachMessageElement","_messageElement","_getMessageElement","createMessageElementInternal","drawCellMessageInternal","attachMessageElement","attach","moveMessageElement","move","_detach","CLASSNAME","MESSAGE_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","rootElement","_rootElement","createrootElement","detach","messageElement","_attachCell","SCROLLBAR_SIZE","dummy","parseInt","getScrollBarWidth","PI","roundRect","radius","arc","closePath","fillRoundRect","strokeRoundRect","stroke","measureCheckbox","drawCheckbox","check","uncheckBgColor","checkBgColor","borderColor","boxSize","checkPoint","leftWidth","rightWidth","leftLeftPos","leftTopPos","moveTo","lineTo","clip","pos","fillText","drawButton","backgroundColor","shadow","blur","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","drawInlineImageRect","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","strokeColorsRect","borderColors","strokeRect","positions","preColor","pos1","pos2","strokeRectLines","action","bindCellClickAction","bindCellKeyAction","Action","_action","getState","record","getRowRecord","mouseOver","mouseActiveCell","mouseOut","KEY_ENTER","isTarget","acceptKeys","cubicBezier","x2","y2","x3","y3","step","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","duration","easing","startedAt","canceledFlg","createAnim","resolve","reject","anim","KEY_F2","BaseInputEditor","onInputCellInternal","inputValue","onOpenCellInternal","onChangeSelectCellInternal","onSetInputAttrsInternal","onGridScrollInternal","open","normalize","caption","NumberStyle","CheckStyle","ButtonStyle","ImageStyle","IconStyle","PercentCompleteBarStyle","adj","_uncheckBgColor","_checkBgColor","_borderColor","buttonBgColor","_buttonBgColor","_imageSizing","imageSizing","_margin","margin","DEFAULT_BAR_COLOR","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","LRUCache","allCache","loadImage","src","console","error","img","Image","onload","onerror","url","warn","search","getCacheOrLoad","cacheName","cacheSize","cache","getCacheOrLoad0","defaultBgColor","frozenRowsBgColor","frozenRowsColor","hiliteBorderColor","selectionBgColor","frozenRowsBorderColor","checkbox","DataSource","CachedDataSource","UPDATE_LENGTH","UPDATED_LENGTH","UPDATED_ORDER","getValue","setPromiseBack","_getIndex","dataSource","_sortedIndexMap","mapIndex","_get","_length","getOriginal","getField","field","getOriginalField","hasField","hasOriginalField","setField","setOriginalField","order","sortedIndexMap","orderFn","v1","v2","sortPromise","recordPromiseCallBackInternal","ss","fieldPromiseCallBackInternal","EMPTY","wait","createArrayPromise","plist","setArrayField","compare","old","createArray","r1","r2","sortArray","dummyPromise","catch","inlines","colorToRGB","fonts","getColor","getThemeColor","_inlineRect","inline","drawInline","inlineWidths","reduce","inlineWidth","drawInlines","buildInlines","Theme","_checkbox","_button","GridCanvasHelper","_theme","createCalculator","calcWidth","calcHeight","toBoxPixelArray","calculator","box","drawWithClip","drawBorderWithClip","clipLeft","clipWidth","clipTop","clipHeight","fillCell","fillColor","fillCellWithState","getFillColorState","fillRect","fillRectWithState","border","startOffset","borderWithState","animElapsedTime","boxWidth","uncheckBgRGB","checkBgRGB","checkRGB","colorName","diff","uncheckRGB","load","loads","legacy","testStr","ready","Inline","imageLeft","imageTop","imageWidth","imageHeight","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_onloaded","_loaded","_loadImage","_inlineImg","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","rgbMap","hexToNum","hex","createRGB","g","testRGB","rateToByte","colorToRGB0","1","2","3","tripleHexToRGB","g1","4","g2","5","b1","6","b2","sextupleHexToRGB","ret","rgb","styleColor","styleColorToRGB","BaseHeader","headerCell","_headerCell","CHANGED_VALUE","core","tools","columns","ListGrid","register","_internal","symbolManager","path2DManager","MAX_SCROLL","_update","domHeight","sbSize","vScrollRange","rScrollRange","_p","_endPointElement","relativeTop","scrollWidth","scrollHeight","hmr","locals","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","indexFirst","ary","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","ratio","setRatio","devicePixelRatio","getAttribute","wh","CheckEditor","ButtonAction","SmallDialogInputEditor","InlineInputEditor","InlineMenuEditor","ImmutableCheckEditor","ImmutableInputEditor","ACTIONS","CHECK","INPUT","columnAction","toUpperCase","KEY_SPACE","toggleValue","blockKey","doChangeValue","onChange","elapsed","selrange","SmallDialogInputElement","globalElement","bindGridCount","attachInput","editor","detachInput","gridFocus","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","_classList","_type","_inputDialogManager","doGetCellValue","setInputAttrs","INPUT_CLASSNAME","KEY_ESC","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","_dialog","readonly","createDialogElement","_bindDialogEvents","dialog","_beforePropEditor","unbindProps","errorMessage","activeData","_onInputValue","bindProps","_activeData","_isActive","_beforeValue","_doChangeValue","_validate","res","stopPropagationOnly","onKeyupAndPress","_onInputValueChange","inputOnly","InlineInputElement","_bindInputEvents","InlineMenuElement","detachMenu","_options","attachMenu","KEY_TAB","ITEM_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","attachElement","menu","openMenu","emptyItemEl","valueItemEl","valueindex","span","optionToLi","focusEl","focusIndex","allHeight","menuClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","_menu","_bindMenuEvents","items","querySelectorAll","NumberColumn","CheckColumn","ButtonColumn","ImageColumn","PercentCompleteBarColumn","IconColumn","BranchGraphColumn","MenuColumn","TYPES","NUMBER","BUTTON","IMAGE","columnType","defaultFotmat","Intl","NumberFormat","fmt","_format","format","withFormat","isNaN","toBoolean","opt","_caption","withCaption","active","MAX_LRU_CACHE_SIZE","maxWidth","maxHeight","newWidth","newHeight","calcKeepAspectRatioSize","_map","_cacheSize","remKey","shift","MARGIN","_min","_max","_formatter","formatter","svalue","rate","barMaxWidth","barTop","barLeft","barSize","_tagName","_className","_name","_iconWidth","iconWidth","Infinity","repeatArray","BranchGraphStyle","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","mergeLines","joinLine","timeline","branchIndex","reverse","calcCommand","command","timelineData","cmd","from","branch","to","branches","fromTargetIndex","findBranchRootIndex","branchTargetFromIndex","branchPoint","targetLine","merge","fromTargetLine","pop","commitMerge","commitTag","calcBranchesInfo","allData","promise","dataIndex","getAllColumnData","_cache","clearCache","upLineIndexKey","downLineIndexKey","branchColors","branchLineWidth","circleSize","mergeStyle","branchXPoints","tl","textWidth","calcBranchXPoints","line","upLineIndex","downLineIndex","pointIndex","lineCap","upX","upRect","upY","bezierCurveTo","downX","downRect","downY","renderMerge","DEFAULT_BRANCH_COLORS","_branchColors","_circleSize","_branchLineWidth","_mergeStyle","withOptions","_convertInternal","basePadding","textPadding","iconPadding","path","getProp","superObj","defNames","createTheme","superTheme","extends","cacheLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","getLinearGradient","0","_rCache","_fCache","fCache","_setFieldCache","headerType","HeaderBaseStyle","MessageHandler","headerId","_getHeaderCellRange","headerMap","getHeaderCellRange","_getCellValue","getCell","_getField","_getCellMessage","_getCellIcon0","retIcon","_getRowRecordIndex","_hasField","_onDrawValue","gridCanvasHelper","drawCellBg","fillOpt","drawCellBorder","selId","_headerBorderWithState","_getCellIcon","_refreshHeader","headerEvents","HeaderMap","header","headerObjects","ids","_refreshRowCount","minWidth","isArrayHeaderRowHeight","headerRowHeight","_tryWithUpdateDataSource","dataSourceEventIds","_setRecords","records","ofArray","_setDataSource","_columns","_headerCells","_headerObjects","_addHeaders","_setupHeaderType","getHeaderCellRangeById","isCellInRange","roots","rowCells","_newRow","hd","headerStyle","newRow","prev","adjustListGridOption","sortState","_updateRect","valueCallback","changeValueCallback","_setCellValue","self","getColumnIndexByField","columnIndex","focusGridCell","newCol","makeVisibleGridCell","InlineIcon","InlineImage","InlineSvg","InlineDrawer","InlinePath2D","iconOf","svg","regedIcons","regedIcon","drawWidth","drawHeight","drawRegisteredIcon","il","_icon","FontRuler","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","getWidth","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","widthsMatchLastResortWidths_","lastResortFont","HAS_WEBKIT_FALLBACK_BUG","exec","hasWebKitFallbackBug","callbacks","cb","display","white-space","font-variant","font-size","font-style","font-weight","line-height","computeStyle","el_","buildSvgDataUrl","XMLSerializer","serializeToString","getSvgElement","DOMParser","parseFromString","svgElem","elmWidth","elmHeight","_draw","_path","parser","_ops","op","CanvasRenderingContext2D","originalFill","PathCommands","builder","argsProvider","next","canvasOperations","_commands","ops","tokens","pathTokens","subsequentCommand","fst","log","mag","sqrt","pow","angle","sign","acos","dot","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","cost","cos","sint","sin","rotClockwise","xPrime2","pointMul","rx2","ry2","lambda","factor","cPrime","sum","rotCounterClockwise","meanVec","x1UnitVector","x2UnitVector","theta","rotate","lMx","lMy","reflected","lx","ly","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","quadraticCurveTo","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","Header","SortHeader","_sort","_range","arrowSize","_executeSort","newState","ErrorMessage","WarningMessage","InfoMessage","_messageInstances","_bindGridEvent","messageInstances","_getMessageInstanceOfMessage","_attach","_attachInfo","instance","_toMessageText","_move","onSelectMessage","_createMessageInstance","Message","BaseMessage","ErrorMessageElement","RED_A100","boxRect","MessageElement","WarningMessageElement","DEEP_ORANGE_A100","GREY_L2","themePlugins","iconPlugins","values","registers"],"mappings":"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","file":"cheetahGrid.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 57);\n","'use strict';\r\n{\r\n\tlet arrayFind;\r\n\tlet arrayFindIndex;\r\n\tconst array = {\r\n\t\tget find() {\r\n\t\t\tif (arrayFind) {\r\n\t\t\t\treturn arrayFind;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.find) {\r\n\t\t\t\tarrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFind = (arr, predicate) => {\r\n\t\t\t\t\tconst index = array.findIndex(arr, predicate);\r\n\t\t\t\t\treturn index >= 0 ? arr[index] : undefined;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFind;\r\n\t\t},\r\n\t\tget findIndex() {\r\n\t\t\tif (arrayFindIndex) {\r\n\t\t\t\treturn arrayFindIndex;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.findIndex) {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => {\r\n\t\t\t\t\tconst length = arr.length;\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tconst value = arr[i];\r\n\t\t\t\t\t\tif (predicate(value, i, arr)) {\r\n\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFindIndex;\r\n\t\t},\r\n\t};\r\n\t\r\n\tfunction isDef(data) {\r\n\t\treturn data !== null && typeof data !== 'undefined';\r\n\t}\r\n\tconst ua = window.navigator.userAgent.toLowerCase();\r\n\tconst IE = (ua.match(/(msie)/) || ua.match(/trident/));\r\n\tconst Chrome = (ua.indexOf('chrome') > -1) && (ua.indexOf('edge') === -1);\r\n\tconst Firefox = (ua.indexOf('firefox') > -1);\r\n\r\n\tfunction setReadonly(obj, name, value) {\r\n\t\tObject.defineProperty(obj, name, {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction each(obj, fn) {\r\n\t\tfor (const key in obj) {\r\n\t\t\tfn(obj[key], key, obj);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isObject(obj) {\r\n\t\treturn obj === Object(obj);\r\n\t}\r\n\r\n\tfunction extend(...args) {\r\n\t\tconst result = {};\r\n\t\targs.forEach((source) => {\r\n\t\t\tfor (const key in source) {\r\n\t\t\t\tObject.defineProperty(result, key, {\r\n\t\t\t\t\tget() {\r\n\t\t\t\t\t\treturn source[key];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tset(val) {\r\n\t\t\t\t\t\tsource[key] = val;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\tfunction isDescendantElement(root, target) {\r\n\t\twhile (target.parentElement) {\r\n\t\t\tconst p = target.parentElement;\r\n\t\t\tif (root === p) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\ttarget = p;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction applyChainSafe(obj, fn, ...names) {\r\n\t\tlet value = obj;\r\n\t\tfor (let i = 0; i < names.length && isDef(value); i++) {\r\n\t\t\tvalue = fn(value, names[i]);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tfunction getChainSafe(obj, ...names) {\r\n\t\treturn applyChainSafe(obj, (val, name) => val[name], ...names);\r\n\t}\r\n\tfunction getOrApply(value, ...args) {\r\n\t\tif (typeof value === 'function') {\r\n\t\t\treturn value(...args);\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\tfunction endsWith(str, searchString, position) {\r\n\t\tconst subjectString = str.toString();\r\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\r\n\t\t\tposition = subjectString.length;\r\n\t\t}\r\n\t\tposition -= searchString.length;\r\n\t\tconst lastIndex = subjectString.lastIndexOf(searchString, position);\r\n\t\treturn lastIndex !== -1 && lastIndex === position;\r\n\t}\r\n\tconst isPromise = (data) => data && typeof data.then === 'function';\r\n\tconst then = (result, callback) => isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n\tfunction getMouseButtons(e) {\r\n\t\tif (isDef(e.buttons)) {\r\n\t\t\treturn e.buttons;\r\n\t\t}\r\n\t\t/*for legacy*/\r\n\t\tif (isDef(e.which)) {\r\n\t\t\tif (e.which === 3) { //right?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\tif (e.which === 2) { //middle?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\treturn e.which;//left or no\r\n\t\t}\r\n\t\t\r\n\t\tif (e.button === 0 || e.button === 1) {\r\n\t\t\treturn 1;//candidate left\r\n\t\t}\r\n\t\tif (e.button === 2) {\r\n\t\t\treturn 2;// right\r\n\t\t}\r\n\t\treturn 0;//no or middle?\r\n\t}\r\n\tfunction getKeyCode(e) {\r\n\t\treturn e.keyCode || e.which;\r\n\t}\r\n\tfunction isTouchEvent(e) {\r\n\t\treturn !!e.changedTouches;\r\n\t}\r\n\tfunction getIgnoreCase(obj, name) {\r\n\t\tif (obj[name]) {\r\n\t\t\treturn obj[name];\r\n\t\t}\r\n\t\tconst l = name.toLowerCase();\r\n\t\tif (obj[l]) {\r\n\t\t\treturn obj[l];\r\n\t\t}\r\n\t\tconst u = name.toLowerCase();\r\n\t\tif (obj[u]) {\r\n\t\t\treturn obj[u];\r\n\t\t}\r\n\t\tfor (const k in obj) {\r\n\t\t\tif (k.toLowerCase() === l) {\r\n\t\t\t\treturn obj[k];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\tfunction cancel(e) {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\r\n\tfunction toBoxArray(obj) {\r\n\t\tif (!Array.isArray(obj)) {\r\n\t\t\treturn [obj/*top*/, obj/*right*/, obj/*bottom*/, obj/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 3) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[2]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 2) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[0]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 1) {\r\n\t\t\treturn [obj[0]/*top*/, obj[0]/*right*/, obj[0]/*bottom*/, obj[0]/*left*/];\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t// Chrome 33554431\r\n\t// FireFox 17895588\r\n\t// IE 10737433\r\n\tmodule.exports = {\r\n\t\tisDef,\r\n\t\tbrowser: {\r\n\t\t\tIE,\r\n\t\t\tChrome,\r\n\t\t\tFirefox,\r\n\t\t\theightLimit: Chrome ? 33554431\r\n\t\t\t: Firefox ? 17895588\r\n\t\t\t: 10737433 // default IE limit\r\n\t\t},\r\n\t\textend,\r\n\t\tisDescendantElement,\r\n\t\tgetChainSafe,\r\n\t\tapplyChainSafe,\r\n\t\tgetOrApply,\r\n\t\tgetIgnoreCase,\r\n\t\tisPromise,\r\n\t\tthen,\r\n\t\tarray,\r\n\t\tobj: {\r\n\t\t\tsetReadonly,\r\n\t\t\teach,\r\n\t\t\tisObject,\r\n\t\t},\r\n\t\tstr: {\r\n\t\t\tendsWith\r\n\t\t},\r\n\t\tevent: {\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tisTouchEvent,\r\n\t\t\tcancel,\r\n\t\t},\r\n\t\tstyle: {\r\n\t\t\ttoBoxArray,\r\n\t\t},\r\n\t\temptyFn() {},\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst Symbol = window.Symbol ? window.Symbol : (() => {\r\n\t\tlet nextId = 1;\r\n\t\treturn (name) => {\r\n\t\t\tconst id = nextId++;\r\n\t\t\tif (name) {\r\n\t\t\t\treturn ` $$$ ${name} - ${id} $$$ `;\r\n\t\t\t} else {\r\n\t\t\t\treturn ` $$$ ${id} $$$ `;\r\n\t\t\t}\r\n\t\t};\r\n\t})();\r\n\tconst mem = {};\r\n\r\n\tmodule.exports = {\r\n\t\tget(name) {\r\n\t\t\tif (name) {\r\n\t\t\t\treturn mem[name] ? mem[name] : (mem[name] = Symbol(name));\r\n\t\t\t} else {\r\n\t\t\t\treturn Symbol();\r\n\t\t\t}\r\n\t\t},\r\n\t\tget PROTECTED_SYMBOL() {\r\n\t\t\treturn this.get('protected');\r\n\t\t},\r\n\t\tget CHECK_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('chkcol.stateID');\r\n\t\t},\r\n\t\tget BUTTON_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('btncol.stateID');\r\n\t\t},\r\n\t\tget COLUMN_FADEIN_STATE_ID() {\r\n\t\t\treturn this.get('col.fadein_stateID');\r\n\t\t},\r\n\t\tget BRANCH_GRAPH_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('branch_graph_col.stateID');\r\n\t\t},\r\n\t\tget SMALL_DIALOG_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('small_dialog_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_MENU_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_menu_editor.stateID');\r\n\t\t}\r\n\t};\r\n\r\n}","'use strict';\r\n\r\nmodule.exports = {\r\n\t'Array_isArray': window.Array.isArray\r\n};","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t\tthis._font = style.font;\r\n\t\t\tthis._padding = style.padding;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this._font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis._font = font;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget padding() {\r\n\t\t\treturn this._padding;\r\n\t\t}\r\n\t\tset padding(padding) {\r\n\t\t\tthis._padding = padding;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst {\r\n\t\tisDef,\r\n\t\tbrowser,\r\n\t\tisDescendantElement,\r\n\t\tarray,\r\n\t\tisPromise,\r\n\t\tevent: {\r\n\t\t\tisTouchEvent,\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tcancel: cancelEvent,\r\n\t\t}\r\n\t} = require('../internal/utils');\r\n\t\r\n\tconst EventTarget = require('./EventTarget');\r\n\tconst Rect = require('../internal/Rect');\r\n\tconst Scrollable = require('../internal/Scrollable');\r\n\tconst EventHandler = require('../internal/EventHandler');\r\n\tconst NumberMap = require('../internal/NumberMap');\r\n\tconst style = require('../internal/style');\r\n\tconst calc = require('../internal/calc');\r\n\tconst hiDPI = require('../internal/hiDPI');\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('../internal/symbolManager');\r\n\r\n\tfunction createRootElement() {\r\n\t\tconst element = document.createElement('div');\r\n\t\telement.classList.add('cheetah-grid');\r\n\t\treturn element;\r\n\t}\r\n\r\n\tconst KEY_END = 35;\r\n\tconst KEY_HOME = 36;\r\n\tconst KEY_LEFT = 37;\r\n\tconst KEY_UP = 38;\r\n\tconst KEY_RIGHT = 39;\r\n\tconst KEY_DOWN = 40;\r\n\tconst KEY_ALPHA_C = 67;\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCLICK_CELL: 'click_cell',\r\n\t\tDBLCLICK_CELL: 'dblclick_cell',\r\n\t\tDBLTAP_CELL: 'dbltap_cell',\r\n\t\tMOUSEDOWN_CELL: 'mousedown_cell',\r\n\t\tMOUSEUP_CELL: 'mouseup_cell',\r\n\t\tSELECTED_CELL: 'selected_cell',\r\n\t\tKEYDOWN: 'keydown',\r\n\t\tMOUSEMOVE_CELL: 'mousemove_cell',\r\n\t\tMOUSEENTER_CELL: 'mouseenter_cell',\r\n\t\tMOUSELEAVE_CELL: 'mouseleave_cell',\r\n\t\tMOUSEOVER_CELL: 'mouseover_cell',\r\n\t\tMOUSEOUT_CELL: 'mouseout_cell',\r\n\t\tINPUT_CELL: 'input_cell',\r\n\t\tEDITABLEINPUT_CELL: 'editableinput_cell',\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL: 'modify_status_editableinput_cell',\r\n\t\tRESIZE_COLUMN: 'resize_column',\r\n\t\tSCROLL: 'scroll',\r\n\t};\r\n\r\n\t//private methods\r\n\tfunction _vibrate(e) {\r\n\t\tif (navigator.vibrate && isTouchEvent(e)) {\r\n\t\t\tnavigator.vibrate(50);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetRowAt(grid, absoluteY) {\r\n\t\tconst internal = grid.getTargetRowAtInternal(absoluteY);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst findBefore = (startRow, startBottom) => {\r\n\t\t\tlet bottom = startBottom;\r\n\t\t\tfor (let row = startRow; row >= 0; row--) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst top = bottom - height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tbottom = top;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst findAfter = (startRow, startBottom) => {\r\n\t\t\tlet top = startBottom - _getRowHeight(grid, startRow);\r\n\t\t\tconst {rowCount} = grid[_];\r\n\t\t\tfor (let row = startRow; row < rowCount; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst bottom = top + height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\ttop = bottom;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst candRow = Math.min(Math.ceil(absoluteY / grid[_].defaultRowHeight), grid.rowCount - 1);\r\n\t\tconst bottom = _getRowsHeight(grid, 0, candRow);\r\n\t\tif (absoluteY >= bottom) {\r\n\t\t\treturn findAfter(candRow, bottom);\r\n\t\t} else {\r\n\t\t\treturn findBefore(candRow, bottom);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetColAt(grid, absoluteX) {\r\n\t\tlet left = 0;\r\n\t\tconst {colCount} = grid[_];\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {top} = grid[_].scroll;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\tconst bottom = top + height;\r\n\t\t\tif (bottom > absoluteY) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop,\r\n\t\t\t\t\trow,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\ttop = bottom;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {left} = grid[_].scroll;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getFrozenRowsRect(grid) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {top} = grid[_].scroll;\r\n\t\tlet height = 0;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\theight += _getRowHeight(grid, row);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\ttop,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\theight\r\n\t\t);\r\n\t}\r\n\tfunction _getFrozenColsRect(grid) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {left} = grid[_].scroll;\r\n\t\tlet width = 0;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\twidth += _getColWidth(grid, col);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tleft,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\twidth,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _isCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn !!grid[_].drawCells[row][col];\r\n\t}\r\n\tfunction _putCellDrawing(grid, col, row, context) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\tgrid[_].drawCells[row] = {};\r\n\t\t}\r\n\t\tgrid[_].drawCells[row][col] = context;\r\n\t}\r\n\tfunction _removeCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdelete grid[_].drawCells[row][col];\r\n\t\tif (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n\t\t\tdelete grid[_].drawCells[row];\r\n\t\t}\r\n\t}\r\n\tfunction _drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\tskipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n\t\tconst rect = new Rect(\r\n\t\t\t\tabsoluteLeft - visibleRect.left,\r\n\t\t\t\tabsoluteTop - visibleRect.top,\r\n\t\t\t\twidth,\r\n\t\t\t\theight\r\n\t\t);\r\n\r\n\t\tconst drawRect = Rect.bounds(\r\n\t\t\t\tMath.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left,\r\n\t\t\t\tMath.max(absoluteTop, skipAbsoluteTop) - visibleRect.top,\r\n\t\t\t\trect.right,\r\n\t\t\t\trect.bottom\r\n\t\t);\r\n\r\n\t\tif (drawRect.height > 0 && drawRect.width > 0) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst dcContext = new DrawCellContext(\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\tctx, rect, drawRect,\r\n\t\t\t\t\t\t_isCellDrawing(grid, col, row),\r\n\t\t\t\t\t\tgrid[_].selection,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tconst p = grid.onDrawCell(col, row, dcContext);\r\n\t\t\t\tif (isPromise(p)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\t_putCellDrawing(grid, col, row, dcContext);\r\n\r\n\t\t\t\t\tconst pCol = col;\r\n\t\t\t\t\tdcContext._delayMode(grid, () => {\r\n\t\t\t\t\t\t_removeCellDrawing(grid, pCol, row);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tp.then(() => {\r\n\t\t\t\t\t\tdcContext.terminate();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _drawRow(grid, ctx, initFrozenCol, initCol,\r\n\t\t\tdrawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n\t\tconst {colCount} = grid[_];\r\n\t\tconst drawOuter = (col, absoluteLeft) => {\r\n\t\t\t//\r\n\t\t\tif (col >= (colCount - 1) && grid[_].canvas.width > (absoluteLeft - visibleRect.left)) {\r\n\t\t\t\tconst outerLeft = absoluteLeft - visibleRect.left;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteLeft = 0;\r\n\t\tif (initFrozenCol) {\r\n\t\t\tlet absoluteLeft = initFrozenCol.left;\r\n\t\t\tconst count = grid[_].frozenColCount;\r\n\t\t\tfor (let {col} = initFrozenCol; col < count; col++) {\r\n\t\t\t\tconst width = _getColWidth(grid, col);\r\n\r\n\t\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\t\tskipAbsoluteTop, 0,\r\n\t\t\t\t\t\tdrawLayers);\r\n\t\t\t\t\t\r\n\t\t\t\tabsoluteLeft += width;\r\n\t\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteLeft = absoluteLeft;\r\n\t\t}\r\n\r\n\t\tlet absoluteLeft = initCol.left;\r\n\t\tfor (let {col} = initCol; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\tskipAbsoluteTop, skipAbsoluteLeft,\r\n\t\t\t\t\tdrawLayers);\r\n\r\n\t\t\tabsoluteLeft += width;\r\n\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(colCount - 1, absoluteLeft);\r\n\r\n\t}\r\n\tfunction _invalidateRect(grid, drawRect) {\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tconst {rowCount} = grid[_];\r\n\t\tconst ctx = grid._getInitContext();\r\n\r\n\t\tconst initRow = _getTargetRowAt(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n\t\t\ttop: _getRowsHeight(grid, 0, rowCount - 1),\r\n\t\t\trow: rowCount\r\n\t\t};\r\n\t\tconst initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n\t\t\tleft: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n\t\t\tcol: grid[_].colCount\r\n\t\t};\r\n\t\tconst drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n\t\tconst drawRight = Math.min(visibleRect.right, drawRect.right);\r\n\r\n\t\tconst initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n\t\tconst initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n\r\n\t\tconst drawLayers = new DrawLayers();\r\n\r\n\t\tconst drawOuter = (row, absoluteTop) => {\r\n\t\t\t//\r\n\t\t\tif (row >= (rowCount - 1) && grid[_].canvas.height > (absoluteTop - visibleRect.top)) {\r\n\t\t\t\tconst outerTop = absoluteTop - visibleRect.top;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteTop = 0;\r\n\t\tif (initFrozenRow) {\r\n\t\t\tlet absoluteTop = initFrozenRow.top;\r\n\t\t\tconst count = grid[_].frozenRowCount;\r\n\t\t\tfor (let {row} = initFrozenRow; row < count; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t_drawRow(grid,\r\n\t\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\t\trow, absoluteTop, height, visibleRect, 0,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tabsoluteTop += height;\r\n\t\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteTop = absoluteTop;\r\n\t\t}\r\n\r\n\t\tlet absoluteTop = initRow.top;\r\n\t\tfor (let {row} = initRow; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t\r\n\t\t\t//\r\n\t\t\t_drawRow(grid,\r\n\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\trow, absoluteTop, height, visibleRect, skipAbsoluteTop,\r\n\t\t\t\t\tdrawLayers\r\n\t\t\t);\r\n\r\n\t\t\tabsoluteTop += height;\r\n\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(rowCount - 1, absoluteTop);\r\n\r\n\t\tdrawLayers.draw(ctx);\r\n\t}\r\n\r\n\tfunction _toPxWidth(grid, width) {\r\n\t\treturn Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n\t}\r\n\r\n\tfunction _getDefaultColPxWidth(grid) {\r\n\t\treturn _toPxWidth(grid, grid.defaultColWidth);\r\n\t}\r\n\r\n\tfunction _adjustColWidth(grid, col, orgWidth) {\r\n\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\tif (!limit) {\r\n\t\t\treturn orgWidth;\r\n\t\t}\r\n\t\t\r\n\t\tif (limit.min) {\r\n\t\t\tconst min = _toPxWidth(grid, limit.min);\r\n\t\t\tif (min > orgWidth) {\r\n\t\t\t\treturn min;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (limit.max) {\r\n\t\t\tconst max = _toPxWidth(grid, limit.max);\r\n\t\t\tif (max < orgWidth) {\r\n\t\t\t\treturn max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn orgWidth;\r\n\t}\r\n\r\n\tfunction _getColWidth(grid, col) {\r\n\t\tconst width = grid[_].colWidthsMap.get(col);\r\n\t\tif (width) {\r\n\t\t\treturn _adjustColWidth(grid, col, _toPxWidth(grid, width));\r\n\t\t}\r\n\t\treturn _getDefaultColPxWidth(grid);\r\n\t}\r\n\tfunction _setColWidth(grid, col, width) {\r\n\t\tgrid[_].colWidthsMap.put(col, width);\r\n\t}\r\n\tfunction _getColsWidth(grid, startCol, endCol) {\r\n\t\tconst colCount = endCol - startCol + 1;\r\n\t\tlet w = _getDefaultColPxWidth(grid) * colCount;\r\n\t\tgrid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\r\n\tfunction _getRowHeight(grid, row) {\r\n\t\tconst internal = grid.getRowHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst height = grid[_].rowHeightsMap.get(row);\r\n\t\tif (height) {\r\n\t\t\treturn height;\r\n\t\t}\r\n\t\treturn grid[_].defaultRowHeight;\r\n\t}\r\n\tfunction _setRowHeight(grid, row, height) {\r\n\t\tgrid[_].rowHeightsMap.put(row, height);\r\n\t}\r\n\tfunction _getRowsHeight(grid, startRow, endRow) {\r\n\t\tconst internal = grid.getRowsHeightInternal(startRow, endRow);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst rowCount = endRow - startRow + 1;\r\n\t\tlet h = grid[_].defaultRowHeight * rowCount;\r\n\t\tgrid[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\r\n\tfunction _getScrollWidth(grid) {\r\n\t\tlet w = _getDefaultColPxWidth(grid) * grid[_].colCount;\r\n\t\tgrid[_].colWidthsMap.eachAll((width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\tfunction _getScrollHeight(grid, row) {\r\n\t\tconst internal = grid.getScrollHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tlet h = grid[_].defaultRowHeight * grid[_].rowCount;\r\n\t\tgrid[_].rowHeightsMap.eachAll((height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\tfunction _onScroll(grid, e) {\r\n\t\tconst lastLeft = grid[_].scroll.left;\r\n\t\tconst lastTop = grid[_].scroll.top;\r\n\t\tconst moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n\t\tconst moveY = grid[_].scrollable.scrollTop - lastTop;\r\n\r\n\t\t//\r\n\t\tgrid[_].scroll = {\r\n\t\t\tleft: grid[_].scrollable.scrollLeft,\r\n\t\t\ttop: grid[_].scrollable.scrollTop,\r\n\t\t};\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tif ((Math.abs(moveX) >= visibleRect.width) || (Math.abs(moveY) >= visibleRect.height)) {\r\n\t\t\t//\r\n\t\t\t_invalidateRect(grid, visibleRect);\r\n\t\t} else {\r\n\t\t\t//\r\n\t\t\tgrid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n\r\n\t\t\t\t\r\n\t\t\tif (moveX !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveX < 0) {\r\n\t\t\t\t\tredrawRect.width = -moveX;\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\t\t\t\tredrawRect.width += frozenRect.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveX > 0) {\r\n\t\t\t\t\tredrawRect.left = redrawRect.right - moveX;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveX > 0) {\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenColsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (moveY !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveY < 0) {\r\n\t\t\t\t\tredrawRect.height = -moveY;\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\t\t\t\tredrawRect.height += frozenRect.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveY > 0) {\r\n\t\t\t\t\tredrawRect.top = redrawRect.bottom - moveY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveY > 0) {\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenRowsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _onKeyDownMove(grid, e) {\r\n\t\tconst {shiftKey} = e;\r\n\t\tconst keyCode = getKeyCode(e);\r\n\t\tconst focusCell = shiftKey ? grid.selection._focus : grid.selection._sel;\r\n\t\tif (keyCode === KEY_LEFT) {\r\n\t\t\tconst col = grid.getMoveLeftColByKeyDownInternal(focusCell);\r\n\t\t\tif (col < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\tconst row = grid.getMoveUpRowByKeyDownInternal(focusCell);\r\n\t\t\tif (row < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_RIGHT) {\r\n\t\t\tconst col = grid.getMoveRightColByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.colCount <= col) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\tconst row = grid.getMoveDownRowByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.rowCount <= row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_HOME) {\r\n\t\t\tconst row = e.ctrlKey ? 0 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, 0, row, e.shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_END) {\r\n\t\t\tconst row = e.ctrlKey ? grid.rowCount - 1 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, grid.colCount - 1, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t}\r\n\tfunction _moveFocusCell(grid, col, row, shiftKey) {\r\n\t\tconst offset = grid.getOffsetInvalidateCells();\r\n\r\n\t\tfunction extendRange(range) {\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\trange.start.col -= offset;\r\n\t\t\t\trange.start.row -= offset;\r\n\t\t\t\trange.end.col += offset;\r\n\t\t\t\trange.end.row += offset;\r\n\t\t\t}\r\n\t\t\treturn range;\r\n\t\t}\r\n\r\n\t\tconst beforeRange = extendRange(grid.selection.range);\r\n\t\tconst beforeRect = grid.getCellsRect(\r\n\t\t\t\tbeforeRange.start.col, beforeRange.start.row,\r\n\t\t\t\tbeforeRange.end.col, beforeRange.end.row\r\n\t\t);\r\n\r\n\t\tgrid.selection._setFocusCell(col, row, shiftKey);\r\n\t\tgrid.makeVisibleCell(col, row);\r\n\t\tgrid.focusCell(col, row);\r\n\t\t\t\r\n\t\tconst afterRange = extendRange(grid.selection.range);\r\n\t\tconst afterRect = grid.getCellsRect(\r\n\t\t\t\tafterRange.start.col, afterRange.start.row,\r\n\t\t\t\tafterRange.end.col, afterRange.end.row\r\n\t\t);\r\n\r\n\t\tif (afterRect.intersection(beforeRect)) {\r\n\t\t\tconst invalidateRect = Rect.max(afterRect, beforeRect);\r\n\t\t\t_invalidateRect(grid, invalidateRect);\r\n\t\t} else {\r\n\t\t\t_invalidateRect(grid, beforeRect);\r\n\t\t\t_invalidateRect(grid, afterRect);\r\n\t\t}\r\n\t}\r\n\tfunction _getMouseAbstractPoint(grid, e) {\r\n\t\tif (isTouchEvent(e)) {\r\n\t\t\te = e.changedTouches[0];\r\n\t\t}\r\n\t\tconst clientX = e.clientX || (e.pageX + window.scrollX);\r\n\t\tconst clientY = e.clientY || (e.pageY + window.scrollY);\r\n\t\tconst rect = grid[_].canvas.getBoundingClientRect();\r\n\t\tif (rect.right <= clientX) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (rect.bottom <= clientY) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst x = clientX - rect.left + grid[_].scroll.left;\r\n\t\tconst y = clientY - rect.top + grid[_].scroll.top;\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tfunction _bindEvents(grid) {\r\n\t\tconst getCellEventArgsSet = (e) => {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t\tconst cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tabstractPos,\r\n\t\t\t\t\tcell\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst eventArgs = {\r\n\t\t\t\tcol: cell.col,\r\n\t\t\t\trow: cell.row,\r\n\t\t\t\tevent: e,\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tabstractPos,\r\n\t\t\t\tcell,\r\n\t\t\t\teventArgs\r\n\t\t\t};\r\n\t\t};\r\n\t\tconst canResizeColumn = (col) => {\r\n\t\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\t\tif (!limit || !limit.min || !limit.max) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn limit.max !== limit.min;\r\n\t\t};\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousedown', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst results = grid.fireListeners(EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n\t\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t} else {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet doubleTapBefore = null;\r\n\t\tlet longTouchId = null;\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchstart', (e) => {\r\n\t\t\r\n\t\t\tif (!doubleTapBefore) {\r\n\t\t\t\tdoubleTapBefore = getCellEventArgsSet(e).eventArgs;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdoubleTapBefore = null;\r\n\t\t\t\t}, 350);\r\n\t\t\t} else {\r\n\t\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\t\tif (eventArgs &&\r\n\t\t\t\t\teventArgs.col === doubleTapBefore.col &&\r\n\t\t\t\t\teventArgs.row === doubleTapBefore.row) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdoubleTapBefore = null;\r\n\r\n\t\t\t\tif (e.defaultPrevented) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlongTouchId = setTimeout(() => {\r\n\t\t\t\t//\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\t\tif (!abstractPos) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n\t\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t\t}\r\n\t\t\t}, 500);\r\n\t\t});\r\n\r\n\t\tfunction cancel(e) {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchcancel', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchmove', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchend', (e) => {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tgrid[_].cellSelector.select(e);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet isMouseover = false;\r\n\t\tlet mouseEnterCell = null;\r\n\t\tlet mouseOverCell = null;\r\n\t\tfunction onMouseenterCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEENTER_CELL, cell);\r\n\t\t\tmouseEnterCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseleaveCell() {\r\n\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\tmouseEnterCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSELEAVE_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction onMouseoverCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOVER_CELL, cell);\r\n\t\t\tmouseOverCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseoutCell() {\r\n\t\t\tconst beforeMouseCell = mouseOverCell;\r\n\t\t\tmouseOverCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOUT_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst scrollElement = grid[_].scrollable.getElement();\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseover', (e) => {\r\n\t\t\tisMouseover = true;\r\n\t\t});\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseout', (e) => {\r\n\t\t\tisMouseover = false;\r\n\t\t\tonMouseoutCell();\r\n\t\t});\r\n\r\n\t\tgrid[_].handler.on(grid[_].element, 'mouseleave', (e) => {\r\n\t\t\tonMouseleaveCell();\r\n\t\t});\r\n\t\t\t\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousemove', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\t\tif (beforeMouseCell) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t\tif (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\r\n\t\t\t\t\t\tonMouseoutCell();\r\n\t\t\t\t\t\tonMouseleaveCell();\r\n\t\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (isMouseover && !mouseOverCell) {\r\n\t\t\t\t\t\tonMouseoverCell({\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tonMouseoutCell();\r\n\t\t\t\tonMouseleaveCell();\r\n\t\t\t}\r\n\t\t\tif (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {style} = grid[_].element;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\tstyle.cursor = 'col-resize';\r\n\t\t\t} else {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'click', (e) => {\r\n\t\t\tif (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.CLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.CLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'dblclick', (e) => {\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.DBLCLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].focusControl.listen('keydown', (keyCode, e) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.KEYDOWN, keyCode, e);\r\n\t\t});\r\n\t\tgrid[_].selection.listen(EVENT_TYPE.SELECTED_CELL, (data) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n\t\t});\r\n\r\n\t\tgrid[_].scrollable.onScroll((e) => {\r\n\t\t\t_onScroll(grid, e);\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SCROLL, {event: e});\r\n\t\t});\r\n\t\tgrid[_].focusControl.onKeyDownMove((e) => {\r\n\t\t\t_onKeyDownMove(grid, e);\r\n\t\t});\r\n\t\tgrid.listen('copydata', (range) => {\r\n\t\t\tlet copyValue = '';\r\n\t\t\tfor (let {row} = range.start; row <= range.end.row; row++) {\r\n\t\t\t\tfor (let {col} = range.start; col <= range.end.col; col++) {\r\n\t\t\t\t\tconst copyCellValue = grid.getCopyCellValue(col, row);\r\n\t\t\t\t\tif (window.Promise && copyCellValue instanceof window.Promise) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst strCellValue = '' + copyCellValue;\r\n\t\t\t\t\t\tif (strCellValue.match(/^\\[object .*\\]$/)) {\r\n\t\t\t\t\t\t\t//object \r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcopyValue += strCellValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif (col < range.end.col) {\r\n\t\t\t\t\t\tcopyValue += '\\t';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopyValue += '\\n';\r\n\t\t\t}\r\n\t\t\treturn copyValue;\r\n\t\t});\r\n\t\tgrid[_].focusControl.onCopy((e) => array.find(grid.fireListeners('copydata', grid[_].selection.range), isDef));\r\n\t\tgrid[_].focusControl.onInput((value) => {\r\n\t\t\tconst {col, row} = grid[_].selection.select;\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.INPUT_CELL, {col, row, value});\r\n\t\t});\r\n\t\tgrid.bindEventsInternal();\r\n\t}\r\n\r\n\tfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n\t\tif (grid[_].frozenRowCount <= 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\tif (!frozenRect.inPoint(abstractX, abstractY)) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst cell = grid.getCellAt(abstractX, abstractY);\r\n\t\tconst cellRect = grid.getCellRect(cell.col, cell.row);\r\n\t\tif (abstractX < cellRect.left + offset) {\r\n\t\t\treturn cell.col - 1;\r\n\t\t}\r\n\t\tif (cellRect.right - offset < abstractX) {\r\n\t\t\treturn cell.col;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfunction _getVisibleRect(grid) {\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _getScrollableVisibleRect(grid) {\r\n\t\tlet frozenColsWidth = 0;\r\n\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\tfrozenColsWidth = frozenRect.width;\r\n\t\t}\r\n\t\tlet frozenRowsHeight = 0;\r\n\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\tfrozenRowsHeight = frozenRect.height;\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left + frozenColsWidth,\r\n\t\t\t\tgrid[_].scroll.top + frozenRowsHeight,\r\n\t\t\t\tgrid[_].canvas.width - frozenColsWidth,\r\n\t\t\t\tgrid[_].canvas.height - frozenRowsHeight\r\n\t\t);\r\n\t}\r\n\r\n\tfunction _toRelativeRect(grid, absoluteRect) {\r\n\t\tconst rect = absoluteRect.copy();\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\trect.offsetLeft(-visibleRect.left);\r\n\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\treturn rect;\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\t/**\r\n\t * managing mouse down moving\r\n\t * @private\r\n\t */\r\n\tclass BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._events = {};\r\n\t\t\tthis._started = false;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\tmoving(e) {\r\n\t\t\treturn !!this._started;\r\n\t\t}\r\n\t\tlastMoving(e) {\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this.moving(e)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst last = this._mouseEndPoint;\r\n\t\t\tif (!last) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst pt = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\treturn pt.x === last.x && pt.y === last.y;\r\n\t\t}\r\n\t\t_bindMoveAndUp(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tthis._events.mousemove = this._handler.on(document.body, 'mousemove', (e) => this._mouseMove(e));\r\n\t\t\t\tthis._events.mouseup = this._handler.on(document.body, 'mouseup', (e) => this._mouseUp(e));\r\n\t\t\t} else {\r\n\t\t\t\tthis._events.touchmove = this._handler.on(document.body, 'touchmove', (e) => this._mouseMove(e), {passive: false});\r\n\t\t\t\tthis._events.touchend = this._handler.on(document.body, 'touchend', (e) => this._mouseUp(e));\r\n\t\t\t\tthis._events.touchcancel = this._handler.on(document.body, 'touchcancel', (e) => this._mouseUp(e));\r\n\t\t\t}\r\n\t\t\tthis._started = true;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\t_mouseMove(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\t\tthis._mouseUp(e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._moved = this._moveInternal(e) || this._moved/*calculation on after*/;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\t_mouseUp(e) {\r\n\t\t\tthis._handler.off(this._events.mousemove);\r\n\t\t\tthis._handler.off(this._events.touchmove);\r\n\t\t\tthis._handler.off(this._events.mouseup);\r\n\t\t\tthis._handler.off(this._events.touchend);\r\n\t\t\t// this._handler.off(this._events.mouseleave);\r\n\t\t\tthis._handler.off(this._events.touchcancel);\r\n\r\n\t\t\tthis._started = false;\r\n\r\n\t\t\tthis._upInternal(e);\r\n\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this._moved) { //\r\n\t\t\t\tthis._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis._mouseEndPoint = null;\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * managing cell selection operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass CellSelector extends BaseMouseDownMover {\r\n\t\tstart(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._cell = cell;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\tselect(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\t\t\tthis._cell = cell;\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell || (this._cell.col === cell.col && this._cell.row === cell.row)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, true);\r\n\r\n\t\t\t//make visible\r\n\t\t\tconst makeVisibleCol = (() => {\r\n\t\t\t\tif (cell.col < this._cell.col && 0 < cell.col) {\r\n\t\t\t\t\t// move left\r\n\t\t\t\t\treturn cell.col - 1;\r\n\t\t\t\t} else if (this._cell.col < cell.col && cell.col + 1 < this._grid.colCount) {\r\n\t\t\t\t\t// move right\r\n\t\t\t\t\treturn cell.col + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.col;\r\n\t\t\t})();\r\n\t\t\tconst makeVisibleRow = (() => {\r\n\t\t\t\tif (cell.row < this._cell.row && 0 < cell.row) {\r\n\t\t\t\t\t// move up\r\n\t\t\t\t\treturn cell.row - 1;\r\n\t\t\t\t} else if (this._cell.row < cell.row && cell.row + 1 < this._grid.rowCount) {\r\n\t\t\t\t\t// move down\r\n\t\t\t\t\treturn cell.row + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.row;\r\n\t\t\t})();\r\n\t\t\tif (makeVisibleCol !== cell.col || makeVisibleRow !== cell.row) {\r\n\t\t\t\tthis._grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n\t\t\t}\r\n\t\t\tthis._cell = cell;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_getTargetCell(e) {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst cell = this._grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * managing row width changing operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass ColumnResizer extends BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper(grid);\r\n\t\t\tthis._targetCol = -1;\r\n\t\t}\r\n\t\tstart(col, e) {\r\n\t\t\tlet pageX;\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\t({pageX} = e);\r\n\t\t\t} else {\r\n\t\t\t\t({pageX} = e.changedTouches[0]);\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = pageX;\r\n\t\t\tthis._preX = 0;\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._targetCol = col;\r\n\t\t\tthis._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n\r\n\t\t\tconst x = pageX - this._x;\r\n\t\t\tconst moveX = x - this._preX;\r\n\t\t\tthis._preX = x;\r\n\t\t\tconst pre = this._grid.getColWidth(this._targetCol);\r\n\t\t\tlet afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n\t\t\tif (afterSize < 10 && moveX < 0) {\r\n\t\t\t\tafterSize = 10;\r\n\t\t\t}\r\n\t\t\t_setColWidth(this._grid, this._targetCol, afterSize);\r\n\r\n\t\t\tconst rect = _getVisibleRect(this._grid);\r\n\t\t\trect.left = this._invalidateAbsoluteLeft;\r\n\t\t\t_invalidateRect(this._grid, rect);\r\n\r\n\t\t\tthis._grid.fireListeners(EVENT_TYPE.RESIZE_COLUMN, {col: this._targetCol});\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\tthis._grid.updateScroll();\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setSafeInputValue(input, value) {\r\n\t\tconst {type} = input;\r\n\t\tinput.type = '';\r\n\t\tinput.value = value;\r\n\t\tif (type) {\r\n\t\t\tinput.type = type;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Manage focus\r\n\t * @private\r\n\t */\r\n\tclass FocusControl extends EventTarget {\r\n\t\tconstructor(grid, parentElement, scrollable) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._scrollable = scrollable;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._input = document.createElement('input');\r\n\t\t\tthis._input.classList.add('grid-focus-control');\r\n\t\t\tthis._input.readOnly = true;\r\n\t\t\tparentElement.appendChild(this._input);\r\n\r\n\t\t\tthis._handler.on(this._input, 'compositionstart', (e) => {\r\n\t\t\t\tthis._input.classList.add('composition');\r\n\t\t\t\tthis._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t\tthis._isComposition = true;\r\n\t\t\t\tgrid.focus();\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'compositionend', (e) => {\r\n\t\t\t\tthis._isComposition = false;\r\n\t\t\t\tthis._input.classList.remove('composition');\r\n\t\t\t\tthis._input.style.font = '';\r\n\t\t\t\tif (!this._input.readOnly) {\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keypress', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._input.readOnly && e.key && e.key.length === 1) {\r\n\t\t\t\t\tif (e.key === 'c' && (e.ctrlKey || e.metaKey)) {\r\n\t\t\t\t\t\t//copy! for Firefox\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.fireListeners('input', e.key);\r\n\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tthis.fireListeners('keydown', keyCode, e);\r\n\r\n\t\t\t\tif (!this._input.readOnly && this._input.value) {\r\n\t\t\t\t\t// for Safari\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tconst inputClear = (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t};\r\n\r\n\t\t\tthis._handler.on(this._input, 'input', inputClear);\r\n\t\t\tthis._handler.on(this._input, 'keyup', inputClear);\r\n\t\t\tthis._handler.on(document, 'keydown', (e) => {\r\n\t\t\t\tif (!browser.IE) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.target !== this._input) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n\t\t\t\t\tsetSafeInputValue(this._input, 'dummy');\r\n\t\t\t\t\tthis._input.select();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._handler.on(document, 'copy', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!isDescendantElement(parentElement, e.target)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\tconst data = array.find(this.fireListeners('copy'), isDef);\r\n\t\t\t\tif (isDef(data)) {\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\tif (browser.IE) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', data); // IE\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', data); // Chrome, Firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonKeyDownMove(fn) {\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_LEFT ||\r\n\t\t\t\t\tkeyCode === KEY_UP ||\r\n\t\t\t\t\tkeyCode === KEY_RIGHT ||\r\n\t\t\t\t\tkeyCode === KEY_DOWN ||\r\n\t\t\t\t\tkeyCode === KEY_HOME ||\r\n\t\t\t\t\tkeyCode === KEY_END\r\n\t\t\t\t) {\r\n\t\t\t\t\tfn(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonInput(fn) {\r\n\t\t\treturn this.listen('input', fn);\r\n\t\t}\r\n\t\tonCopy(fn) {\r\n\t\t\treturn this.listen('copy', fn);\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\t// this._input.value = '';\r\n\t\t\tthis._input.focus();\r\n\t\t}\r\n\t\tsetFocusRect(rect) {\r\n\t\t\tconst top = this._scrollable.calcTop(rect.top);\r\n\t\t\tthis._input.style.top = (top - style.getScrollBarSize()).toFixed() + 'px';//position:relative IE position:relative\r\n\t\t\tthis._input.style.left = rect.left.toFixed() + 'px';\r\n\t\t\tthis._input.style.width = rect.width.toFixed() + 'px';\r\n\t\t\tthis._input.style.height = rect.height.toFixed() + 'px';\r\n\t\t}\r\n\t\tset editMode(editMode) {\r\n\t\t\tthis._input.readOnly = !editMode;\r\n\t\t}\r\n\t\tresetInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tconst composition = el.classList.contains('composition');\r\n\t\t\t\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tconst removeNames = [];\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tif (!this._inputStatus.hasOwnProperty(att.nodeName)) {\r\n\t\t\t\t\tremoveNames.push(att.name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tremoveNames.forEach((removeName) => {\r\n\t\t\t\tel.removeAttribute(removeName);\r\n\t\t\t});\r\n\t\t\tfor (const name in this._inputStatus) {\r\n\t\t\t\tel.setAttribute(name, this._inputStatus[name]);\r\n\t\t\t}\r\n\t\t\tif (composition) {\r\n\t\t\t\tel.classList.add('composition');\r\n\t\t\t\tel.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t} else {\r\n\t\t\t\tel.classList.remove('composition');\r\n\t\t\t}\r\n\t\t}\r\n\t\tstoreInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tthis._inputStatus = {};\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tthis._inputStatus[att.name] = att.value;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDefaultInputStatus() {\r\n\t\t\t// \r\n\t\t\t// this._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t}\r\n\t\tget editMode() {\r\n\t\t\treturn !this._input.readOnly;\r\n\t\t}\r\n\t\tget input() {\r\n\t\t\treturn this._input;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Selected area management\r\n\t */\r\n\tclass Selection extends EventTarget {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\r\n\t\t\tthis._sel = {col: 0, row: 0};\r\n\t\t\tthis._focus = {col: 0, row: 0};\r\n\t\t\t\r\n\t\t\tthis._start = {col: 0, row: 0};\r\n\t\t\tthis._end = {col: 0, row: 0};\r\n\t\t}\r\n\t\tget range() {\r\n\t\t\tconst startCol = Math.min(this._start.col, this._end.col);\r\n\t\t\tconst startRow = Math.min(this._start.row, this._end.row);\r\n\t\t\tconst endCol = Math.max(this._start.col, this._end.col);\r\n\t\t\tconst endRow = Math.max(this._start.row, this._end.row);\r\n\t\t\treturn {\r\n\t\t\t\tstart: {\r\n\t\t\t\t\tcol: startCol,\r\n\t\t\t\t\trow: startRow,\r\n\t\t\t\t},\r\n\t\t\t\tend: {\r\n\t\t\t\t\tcol: endCol,\r\n\t\t\t\t\trow: endRow,\r\n\t\t\t\t},\r\n\t\t\t\tinCell(col, row) {\r\n\t\t\t\t\treturn startCol <= col && col <= endCol &&\r\n\t\t\t\t\t\tstartRow <= row && row <= endRow;\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\tget select() {\r\n\t\t\treturn {\r\n\t\t\t\tcol: this._sel.col,\r\n\t\t\t\trow: this._sel.row\r\n\t\t\t};\r\n\t\t}\r\n\t\tset select(cell = {}) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcol = 0,\r\n\t\t\t\t\trow = 0\r\n\t\t\t\t} = cell;\r\n\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\tthis._setFocusCell(col, row, true);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setSelectCell(col, row) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tthis._sel = {col, row};\r\n\t\t\t\tthis._start = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setFocusCell(col, row, keepSelect) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tif (!keepSelect) {\r\n\t\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\t}\r\n\t\t\t\tthis._focus = {col, row};\r\n\t\t\t\tthis._end = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_wrapFireSelectedEvent(callback) {\r\n\t\t\tif (this._isWraped) {\r\n\t\t\t\tcallback();\r\n\t\t\t} else {\r\n\t\t\t\tthis._isWraped = true;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst before = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: false,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t\tconst after = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: true,\r\n\t\t\t\t\t\tbefore: {\r\n\t\t\t\t\t\t\tcol: before.col,\r\n\t\t\t\t\t\t\trow: before.row,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbefore.after = {\r\n\t\t\t\t\t\tcol: after.col,\r\n\t\t\t\t\t\trow: after.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, before);\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, after);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis._isWraped = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * This class manages the drawing process for each layer\r\n\t */\r\n\tclass DrawLayers {\r\n\t\tconstructor() {\r\n\t\t\tthis._layers = {};\r\n\t\t}\r\n\t\taddDraw(level, fn) {\r\n\t\t\tconst l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n\t\t\tl.addDraw(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tconst list = [];\r\n\t\t\tfor (const k in this._layers) {\r\n\t\t\t\tlist.push(this._layers[k]);\r\n\t\t\t}\r\n\t\t\tlist.sort((a, b) => a.level - b.level);\r\n\t\t\tlist.forEach((l) => l.draw(ctx));\r\n\t\t}\r\n\t}\r\n\tclass DrawLayer {\r\n\t\tconstructor(level) {\r\n\t\t\tthis._level = level;\r\n\t\t\tthis._list = [];\r\n\t\t}\r\n\t\tget level() {\r\n\t\t\treturn this._level;\r\n\t\t}\r\n\t\taddDraw(fn) {\r\n\t\t\tthis._list.push(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tthis._list.forEach((fn) => {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfn(ctx);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Context of cell drawing\r\n\t */\r\n\tclass DrawCellContext {\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tconstructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n\t\t\tthis._col = col;\r\n\t\t\tthis._row = row;\r\n\t\t\tthis._mode = 0;\r\n\t\t\tthis._ctx = ctx;\r\n\t\t\tthis._rect = rect;\r\n\t\t\tthis._drawRect = drawRect;\r\n\t\t\tthis._drawing = drawing;\r\n\t\t\tthis._selection = selection;\r\n\t\t\tthis._drawLayers = drawLayers;\r\n\t\t}\r\n\t\tget drawing() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawing;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tget row() {\r\n\t\t\treturn this._row;\r\n\t\t}\r\n\t\tget col() {\r\n\t\t\treturn this._col;\r\n\t\t}\r\n\t\t/**\r\n\t\t * select status.\r\n\t\t * @return {object} select status\r\n\t\t */\r\n\t\tgetSelectState() {\r\n\t\t\tconst sel = this._selection.select;\r\n\t\t\treturn {\r\n\t\t\t\tselected: sel.col === this._col && sel.row === this._row,\r\n\t\t\t\tselection: this._selection.range.inCell(this._col, this._row),\r\n\t\t\t};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Canvas context.\r\n\t\t * @return {CanvasRenderingContext2D} Canvas context.\r\n\t\t */\r\n\t\tgetContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._ctx;\r\n\t\t\t} else {\r\n\t\t\t\treturn this._grid._getInitContext();\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of cell.\r\n\t\t * @return {Rect} rect Rectangle of cell.\r\n\t\t */\r\n\t\tgetRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._rect;\r\n\t\t\t} else {\r\n\t\t\t\tif (this._rect) {\r\n\t\t\t\t\treturn this._rect;\r\n\t\t\t\t}\r\n\t\t\t\treturn this._grid.getCellRelativeRect(this._col, this._row);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetRect(rect) {\r\n\t\t\tthis._rect = rect;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of Drawing range.\r\n\t\t * @return {Rect} Rectangle of Drawing range.\r\n\t\t */\r\n\t\tgetDrawRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawRect;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\treturn this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * get Context of current state\r\n\t\t * @return {DrawCellContext} current DrawCellContext.\r\n\t\t */\r\n\t\ttoCurrentContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\tconst rect = _toRelativeRect(this._grid, absoluteRect);\r\n\t\t\t\tconst drawRect = this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t\tconst context = new DrawCellContext(\r\n\t\t\t\t\t\tthis._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection,\r\n\t\t\t\t\t\tthis._drawLayers\r\n\t\t\t\t);\r\n\t\t\t\t// toCurrentContext  toCurrentContext\r\n\t\t\t\tcontext.toCurrentContext = this.toCurrentContext.bind(this);\r\n\t\t\t\treturn context;\r\n\t\t\t}\r\n\t\t}\r\n\t\taddLayerDraw(level, fn) {\r\n\t\t\tthis._drawLayers.addDraw(level, fn);\r\n\t\t}\r\n\t\t_toRelativeDrawRect(absoluteRect) {\r\n\t\t\tconst visibleRect = _getVisibleRect(this._grid);\r\n\t\t\tlet rect = absoluteRect.copy();\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst isFrozenCell = this._grid.isFrozenCell(this._col, this._row);\r\n\t\t\tif (this._grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._grid.frozenColCount - 1, this._row);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\tMath.max(rect.left, fRect.right),\r\n\t\t\t\t\t\trect.top,\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this._grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._col, this._grid.frozenRowCount - 1);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\trect.left,\r\n\t\t\t\t\t\tMath.max(rect.top, fRect.bottom),\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\trect.offsetLeft(-visibleRect.left);\r\n\t\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\t\treturn rect;\r\n\t\t}\r\n\t\t_delayMode(grid, onTerminate) {\r\n\t\t\tthis._mode = 1;\r\n\t\t\tthis._ctx = null;\r\n\t\t\tthis._rect = null;\r\n\t\t\tthis._drawRect = null;\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._onTerminate = onTerminate;\r\n\t\t}\r\n\t\t/**\r\n\t\t * terminate\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tterminate() {\r\n\t\t\tif (this._mode !== 0) {\r\n\t\t\t\tthis._onTerminate();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * DrawGrid\r\n\t * @classdesc cheetahGrid.core.DrawGrid\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.core\r\n\t */\r\n\tclass DrawGrid extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * rowCount: grid row count.default 10\r\n\t\t * colCount: grid col count.default 10\r\n\t\t * frozenColCount: default 0\r\n\t\t * frozenRowCount: default 0\r\n\t\t * defaultRowHeight: default grid row height. default 40\r\n\t\t * defaultColWidth: default grid col width. default 80\r\n\t\t * parentElement: canvas parentElement\r\n\t\t * font: default font\r\n\t\t * underlayBackgroundColor: underlay background color\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\trowCount = 10,\r\n\t\t\t\t\tcolCount = 10,\r\n\t\t\t\t\tfrozenColCount = 0,\r\n\t\t\t\t\tfrozenRowCount = 0,\r\n\t\t\t\t\tdefaultRowHeight = 40,\r\n\t\t\t\t\tdefaultColWidth = 80,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tunderlayBackgroundColor,\r\n\t\t\t\t\tparentElement,\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis[_] = {};\r\n\t\t\tstyle.initDocument();\r\n\t\t\tthis[_].element = createRootElement();\r\n\t\t\tthis[_].scrollable = new Scrollable();\r\n\t\t\tthis[_].handler = new EventHandler();\r\n\t\t\tthis[_].selection = new Selection(this);\r\n\t\t\tthis[_].focusControl = new FocusControl(this, this[_].scrollable.getElement(), this[_].scrollable);\r\n\r\n\t\t\tthis[_].canvas = hiDPI.transform(document.createElement('canvas'));\r\n\t\t\tthis[_].context = this[_].canvas.getContext('2d', {alpha: false});\r\n\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\r\n\t\t\tthis[_].font = font;\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\r\n\t\t\t/////\r\n\t\t\tthis[_].rowHeightsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsLimit = {};\r\n\t\t\tthis[_].calcWidthContext = {\r\n\t\t\t\t_: this[_],\r\n\t\t\t\tget full() {\r\n\t\t\t\t\treturn this._.canvas.width;\r\n\t\t\t\t},\r\n\t\t\t\tget em() {\r\n\t\t\t\t\treturn this._.context.measureText('').width;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis[_].columnResizer = new ColumnResizer(this);\r\n\t\t\tthis[_].cellSelector = new CellSelector(this);\r\n\r\n\t\t\tthis[_].drawCells = {};\r\n\r\n\t\t\tthis[_].element.appendChild(this[_].canvas);\r\n\t\t\tthis[_].element.appendChild(this[_].scrollable.getElement());\r\n\t\t\tthis.updateScroll();\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.appendChild(this[_].element);\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t} else {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t}\r\n\t\t\t_bindEvents(this);\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this[_].element;\r\n\t\t}\r\n\t\tget canvas() {\r\n\t\t\treturn this[_].canvas;\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\tconst {col, row} = this[_].selection.select;\r\n\t\t\tthis.focusCell(col, row);\r\n\t\t}\r\n\t\tget selection() {\r\n\t\t\treturn this[_].selection;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset rowCount(rowCount) {\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget colCount() {\r\n\t\t\treturn this[_].colCount;\r\n\t\t}\r\n\t\tset colCount(colCount) {\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget frozenColCount() {\r\n\t\t\treturn this[_].frozenColCount;\r\n\t\t}\r\n\t\tset frozenColCount(frozenColCount) {\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t}\r\n\t\tget frozenRowCount() {\r\n\t\t\treturn this[_].frozenRowCount;\r\n\t\t}\r\n\t\tset frozenRowCount(frozenRowCount) {\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\t\t}\r\n\t\tget defaultRowHeight() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset defaultRowHeight(defaultRowHeight) {\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget defaultColWidth() {\r\n\t\t\treturn this[_].defaultColWidth;\r\n\t\t}\r\n\t\tset defaultColWidth(defaultColWidth) {\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this[_].font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis[_].font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn this[_].underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tconfigure(name, value) {\r\n\t\t\tconst cfg = this[_].config || (this[_].config = {});\r\n\t\t\tif (isDef(value)) {\r\n\t\t\t\tcfg[name] = value;\r\n\t\t\t}\r\n\t\t\treturn cfg[name];\r\n\t\t}\r\n\t\tupdateSize() {\r\n\t\t\t//\r\n\t\t\tthis[_].canvas.style.width = '';\r\n\t\t\tthis[_].canvas.style.height = '';\r\n\t\t\tconst width = Math.floor(this[_].canvas.offsetWidth ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetWidth - style.getScrollBarSize());\r\n\t\t\tconst height = Math.floor(this[_].canvas.offsetHeight ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetHeight - style.getScrollBarSize());\r\n\r\n\t\t\tthis[_].canvas.width = width;\r\n\t\t\tthis[_].canvas.height = height;\r\n\r\n\t\t\t//style\r\n\t\t\tthis[_].canvas.style.width = `${width}px`;\r\n\t\t\tthis[_].canvas.style.height = `${height}px`;\r\n\r\n\t\t\tconst sel = this[_].selection.select;\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\r\n\t\t}\r\n\t\tupdateScroll() {\r\n\t\t\tthis[_].scrollable.setScrollSize(_getScrollWidth(this), _getScrollHeight(this));\r\n\t\t\tthis[_].scroll = {\r\n\t\t\t\tleft: this[_].scrollable.scrollLeft,\r\n\t\t\t\ttop: this[_].scrollable.scrollTop,\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetRowHeight(row) {\r\n\t\t\treturn _getRowHeight(this, row);\r\n\t\t}\r\n\t\tsetRowHeight(row, height) {\r\n\t\t\t_setRowHeight(this, row, height);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetColWidth(col) {\r\n\t\t\treturn _getColWidth(this, col);\r\n\t\t}\r\n\t\tsetColWidth(col, width) {\r\n\t\t\t_setColWidth(this, col, width);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetMaxColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.max || undefined;\r\n\t\t}\r\n\t\tsetMaxColWidth(col, maxwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.max = maxwidth;\r\n\t\t}\r\n\t\tgetMinColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.min || undefined;\r\n\t\t}\r\n\t\tsetMinColWidth(col, minwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.min = minwidth;\r\n\t\t}\r\n\t\tgetCellRect(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n\t\t\tconst width = _getColWidth(this, col);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col) {\r\n\t\t\t\tabsoluteLeft += this[_].scroll.left;\r\n\t\t\t}\r\n\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, row - 1);\r\n\t\t\tconst height = _getRowHeight(this, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\tabsoluteTop += this[_].scroll.top;\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tgetCellRelativeRect(col, row) {\r\n\t\t\treturn _toRelativeRect(this, this.getCellRect(col, row));\r\n\t\t}\r\n\t\tgetCellsRect(startCol, startRow, endCol, endRow) {\r\n\t\t\tconst isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n\t\t\tconst isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n\t\t\tlet width = _getColsWidth(this, startCol, endCol);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.col) {\r\n\t\t\t\tconst scrollLeft = this[_].scroll.left;\r\n\t\t\t\tabsoluteLeft += scrollLeft;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n\t\t\t\t\twidth -= scrollLeft;\r\n\t\t\t\t\twidth = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, startRow - 1);\r\n\t\t\tlet height = _getRowsHeight(this, startRow, endRow);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.row) {\r\n\t\t\t\tconst scrollTop = this[_].scroll.top;\r\n\t\t\t\tabsoluteTop += scrollTop;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n\t\t\t\t\theight -= scrollTop;\r\n\t\t\t\t\theight = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tisFrozenCell(col, row) {\r\n\t\t\tconst isFrozenRow = this[_].frozenRowCount > 0 && row < this[_].frozenRowCount;\r\n\t\t\tconst isFrozenCol = this[_].frozenColCount > 0 && col < this[_].frozenColCount;\r\n\t\t\tif (isFrozenRow || isFrozenCol) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\trow: isFrozenRow,\r\n\t\t\t\t\tcol: isFrozenCol,\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetRowAt(absoluteY) {\r\n\t\t\tconst frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.row;\r\n\t\t\t}\r\n\t\t\tconst row = _getTargetRowAt(this, absoluteY);\r\n\t\t\treturn row ? row.row : -1;\r\n\r\n\t\t}\r\n\t\tgetColAt(absoluteX) {\r\n\t\t\tconst frozen = _getTargetFrozenColAt(this, absoluteX);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.col;\r\n\t\t\t}\r\n\t\t\tconst col = _getTargetColAt(this, absoluteX);\r\n\t\t\treturn col ? col.col : -1;\r\n\t\t}\r\n\t\tgetCellAt(absoluteX, absoluteY) {\r\n\t\t\treturn {\r\n\t\t\t\trow: this.getRowAt(absoluteY),\r\n\t\t\t\tcol: this.getColAt(absoluteX),\r\n\t\t\t};\r\n\t\t}\r\n\t\tmakeVisibleCell(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = this.getCellRect(col, row);\r\n\t\t\tconst visibleRect = _getScrollableVisibleRect(this);\r\n\t\t\tif (visibleRect.contains(rect)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.col) {\r\n\t\t\t\tif (rect.left < visibleRect.left) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n\t\t\t\t} else if (visibleRect.right < rect.right) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.row) {\r\n\t\t\t\tif (rect.top < visibleRect.top) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.top - rect.top;\r\n\t\t\t\t} else if (visibleRect.bottom < rect.bottom) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfocusCell(col, row) {\r\n\t\t\tconst oldEditMode = this[_].focusControl.editMode;\r\n\t\t\tif (oldEditMode) {\r\n\t\t\t\tthis[_].focusControl.resetInputStatus();\r\n\t\t\t}\r\n\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(col, row));\r\n\t\t\t\r\n\t\t\tconst {col: selCol, row: selRow} = this[_].selection.select;\r\n\t\t\tconst results = this.fireListeners(\r\n\t\t\t\t\tEVENT_TYPE.EDITABLEINPUT_CELL,\r\n\t\t\t\t\t{col: selCol, row: selRow}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tconst editMode = (array.findIndex(results, (v) => !!v) >= 0);\r\n\t\t\tthis[_].focusControl.editMode = editMode;\r\n\t\t\t\r\n\t\t\tif (editMode) {\r\n\t\t\t\tthis[_].focusControl.storeInputStatus();\r\n\t\t\t\tthis[_].focusControl.setDefaultInputStatus();\r\n\t\t\t\tthis.fireListeners(\r\n\t\t\t\t\t\tEVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\t\t\t\t\t{col: selCol, row: selRow, input: this[_].focusControl.input}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Failure occurs in IE if focus is not last\r\n\t\t\tthis[_].focusControl.focus();\r\n\t\t}\r\n\t\tinvalidateCell(col, row) {\r\n\t\t\tthis.invalidateGridRect(col, row);\r\n\t\t}\r\n\t\tinvalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n\t\t\tconst offset = this.getOffsetInvalidateCells();\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\tstartCol -= offset;\r\n\t\t\t\tstartRow -= offset;\r\n\t\t\t\tendCol += offset;\r\n\t\t\t\tendRow += offset;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\tconst cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n\t\t\tconst invalidateTarget = visibleRect.intersection(cellsRect);\r\n\t\t\tif (invalidateTarget) {\r\n\r\n\t\t\t\tif (this[_].frozenColCount > 0 && endCol >= this[_].frozenColCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenColsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.left = Math.min(frozenRect.right - 1, frozenRect.right);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this[_].frozenRowCount > 0 && endRow >= this[_].frozenRowCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_invalidateRect(this, invalidateTarget);\r\n\t\t\t}\r\n\t\t}\r\n\t\tinvalidate() {\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\t_invalidateRect(this, visibleRect);\r\n\t\t}\r\n\t\t/**\r\n\t\t * get cell value at copy action\r\n\t\t * <p>\r\n\t\t * Please implement\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\t//Please implement get cell value!!\r\n\t\t}\r\n\t\t/**\r\n\t\t * Draw a cell\r\n\t\t * <p>\r\n\t\t * Please implement cell drawing.\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @param  {DrawCellContext} context context of cell drawing.\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\t//Please implement cell drawing!!\r\n\t\t}\r\n\t\taddDisposable(disposable) {\r\n\t\t\tif (!disposable || !disposable.dispose || typeof disposable.dispose !== 'function') {\r\n\t\t\t\tthrow new Error('not disposable!');\r\n\t\t\t}\r\n\t\t\tconst disposables = this[_].disposables = this[_].disposables || [];\r\n\t\t\tdisposables.push(disposable);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis[_].handler.dispose();\r\n\t\t\tthis[_].scrollable.dispose();\r\n\t\t\tthis[_].focusControl.dispose();\r\n\t\t\tthis[_].columnResizer.dispose();\r\n\t\t\tthis[_].cellSelector.dispose();\r\n\t\t\tif (this[_].disposables) {\r\n\t\t\t\tthis[_].disposables.forEach((disposable) => disposable.dispose());\r\n\t\t\t\tthis[_].disposables = null;\r\n\t\t\t}\r\n\r\n\t\t\tconst {parentElement} = this[_].element;\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.removeChild(this[_].element);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetAttachCellArea(col, row) {\r\n\t\t\treturn {\r\n\t\t\t\telement: this.getElement(),\r\n\t\t\t\trect: _toRelativeRect(this, this.getCellRect(col, row)),\r\n\t\t\t};\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\t//nop\r\n\t\t}\r\n\t\tgetTargetRowAtInternal(absoluteY) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowsHeightInternal(startRow, endRow) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetScrollHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col - 1;\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col + 1;\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row - 1;\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row + 1;\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t_getInitContext() {\r\n\t\t\tconst ctx = this[_].context;\r\n\t\t\t//\r\n\t\t\tctx.fillStyle = 'white';\r\n\t\t\tctx.strokeStyle = 'black';\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'top';\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.font = this.font || '16px sans-serif';\r\n\t\t\treturn ctx;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = DrawGrid;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {each}} = require('./utils');\r\n\tlet nextId = 1;\r\n\r\n\tclass EventHandler {\r\n\t\tconstructor() {\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\ton(target, type, listener, ...options) {\r\n\t\t\tif (target.addEventListener) {\r\n\t\t\t\ttarget.addEventListener(type, listener, ...options);\r\n\t\t\t}\r\n\t\t\tconst obj = {\r\n\t\t\t\ttarget, type, listener, options\r\n\t\t\t};\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis._listeners[id] = obj;\r\n\t\t\treturn id;\r\n\t\t}\r\n\t\ttryWithOffEvents(target, type, call) {\r\n\t\t\tconst list = [];\r\n\t\t\ttry {\r\n\t\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlist.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcall();\r\n\t\t\t} finally {\r\n\t\t\t\tlist.forEach((obj) => {\r\n\t\t\t\t\tif (obj.target.addEventListener) {\r\n\t\t\t\t\t\tobj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\toff(id) {\r\n\t\t\tif (!id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst obj = this._listeners[id];\r\n\t\t\tif (!obj) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete this._listeners[id];\r\n\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfire(target, type, ...args) {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tobj.listener.call(obj.target, ...args);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListener(target, type) {\r\n\t\t\tlet result = false;\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tclear() {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis.clear();\r\n\t\t\tthis._listeners = null;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventHandler;\r\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","'use strict';\r\n{\r\n\tclass Rect {\r\n\t\tconstructor(left, top, width, height) {\r\n\t\t\tthis._left = left;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t}\r\n\t\tstatic bounds(left, top, right, bottom) {\r\n\t\t\treturn new Rect(left, top, right - left, bottom - top);\r\n\t\t}\r\n\t\tstatic max(rect1, rect2) {\r\n\t\t\treturn Rect.bounds(\r\n\t\t\t\t\tMath.min(rect1.left, rect2.left),\r\n\t\t\t\t\tMath.min(rect1.top, rect2.top),\r\n\t\t\t\t\tMath.max(rect1.right, rect2.right),\r\n\t\t\t\t\tMath.max(rect1.bottom, rect2.bottom)\r\n\t\t\t);\r\n\t\t}\r\n\t\tget left() {\r\n\t\t\treturn this._left;\r\n\t\t}\r\n\t\tset left(left) {\r\n\t\t\tconst {right} = this;\r\n\t\t\tthis._left = left;\r\n\t\t\tthis.right = right;\r\n\t\t}\r\n\t\tget top() {\r\n\t\t\treturn this._top;\r\n\t\t}\r\n\t\tset top(top) {\r\n\t\t\tconst {bottom} = this;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis.bottom = bottom;\r\n\t\t}\r\n\t\tget width() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset width(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\tget height() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset height(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tget right() {\r\n\t\t\treturn this._right !== undefined ? this._right : (this._right = this.left + this.width);\r\n\t\t}\r\n\t\tset right(right) {\r\n\t\t\tthis._right = right;\r\n\t\t\tthis.width = right - this.left;\r\n\t\t}\r\n\t\tget bottom() {\r\n\t\t\treturn this._bottom !== undefined ? this._bottom : (this._bottom = this.top + this.height);\r\n\t\t}\r\n\t\tset bottom(bottom) {\r\n\t\t\tthis._bottom = bottom;\r\n\t\t\tthis.height = bottom - this.top;\r\n\t\t}\r\n\t\toffsetLeft(offset) {\r\n\t\t\tthis._left += offset;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\toffsetTop(offset) {\r\n\t\t\tthis._top += offset;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tcopy() {\r\n\t\t\treturn new Rect(this.left, this.top, this.width, this.height);\r\n\t\t}\r\n\t\tintersection(rect) {\r\n\t\t\tconst x0 = Math.max(this.left, rect.left);\r\n\t\t\tconst x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n\t\t\tif (x0 <= x1) {\r\n\t\t\t\tconst y0 = Math.max(this.top, rect.top);\r\n\t\t\t\tconst y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n\t\t\t\tif (y0 <= y1) {\r\n\t\t\t\t\treturn Rect.bounds(x0, y0, x1, y1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tcontains(another) {\r\n\t\t\treturn this.left <= another.left &&\r\n\t\t\t\t\tthis.left + this.width >= another.left + another.width &&\r\n\t\t\t\t\tthis.top <= another.top &&\r\n\t\t\t\t\tthis.top + this.height >= another.top + another.height;\r\n\t\t}\r\n\t\tinPoint(x, y) {\r\n\t\t\treturn this.left <= x &&\r\n\t\t\t\t\tthis.left + this.width >= x &&\r\n\t\t\t\t\tthis.top <= y &&\r\n\t\t\t\t\tthis.top + this.height >= y;\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Rect;\r\n}","'use strict';\r\n{\r\n\r\n\tfunction calcBasePosition(ctx, rect,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\t// const textAlign = ctx.textAlign || 'left';\r\n\t\t// const textBaseline = ctx.textBaseline || 'middle';\r\n\t\t// ctx.textAlign = textAlign;\r\n\t\t// ctx.textBaseline = textBaseline;\r\n\r\n\t\t// let x = rect.left + offset + paddingLeft;\r\n\t\t// if (textAlign === 'right' || textAlign === 'end') {\r\n\t\t// \tx = rect.right - offset - paddingRight;\r\n\t\t// } else if (textAlign === 'center') {\r\n\t\t// \tx = rect.left + ((rect.width + paddingLeft - paddingRight) / 2);\r\n\t\t// }\r\n\t\t// let y = rect.top + offset;\r\n\t\t// if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t// \ty = rect.bottom - offset;\r\n\t\t// } else if (textBaseline === 'middle') {\r\n\t\t// \ty = rect.top + (rect.height / 2);\r\n\t\t// }\r\n\t\t// return {x, y};\r\n\t\treturn calcStartPosition(ctx, rect, 0, 0, {\r\n\t\t\toffset,\r\n\t\t\tpadding: {\r\n\t\t\t\tleft: paddingLeft,\r\n\t\t\t\tright: paddingRight,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction calcStartPosition(ctx, rect, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\tconst textAlign = ctx.textAlign || 'left';\r\n\t\tconst textBaseline = ctx.textBaseline || 'middle';\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\r\n\t\tlet x = rect.left + offset + paddingLeft;\r\n\t\tif (textAlign === 'right' || textAlign === 'end') {\r\n\t\t\tx = rect.right - width - offset - paddingRight;\r\n\t\t} else if (textAlign === 'center') {\r\n\t\t\tx = rect.left + ((rect.width - width + paddingLeft - paddingRight) / 2);\r\n\t\t}\r\n\t\tlet y = rect.top + offset;\r\n\t\tif (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t\ty = rect.bottom - height - offset;\r\n\t\t} else if (textBaseline === 'middle') {\r\n\t\t\ty = rect.top + ((rect.height - height) / 2);\r\n\t\t}\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcalcBasePosition,\r\n\t\tcalcStartPosition,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst Style = require('../style/Style');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass Column extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Column(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.text(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Column;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {isPromise, isDef, obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst animate = require('../../internal/animate');\r\n\tconst BaseStyle = require('../style/Style');\r\n\tconst {COLUMN_FADEIN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\r\n\tfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n\t\tif (isDef(column._fadeinWhenCallbackInPromise)) {\r\n\t\t\treturn column._fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\treturn !!grid.configure('fadeinWhenCallbackInPromise');\r\n\t}\r\n\r\n\tfunction getFadinState(grid) {\r\n\t\tif (!grid[COLUMN_FADEIN_STATE_ID]) {\r\n\t\t\tsetReadonly(grid, COLUMN_FADEIN_STATE_ID, {});\r\n\t\t}\r\n\t\treturn grid[COLUMN_FADEIN_STATE_ID];\r\n\t}\r\n\tfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\treturn (point) => {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\tif (point === 1) {\r\n\t\t\t\tdelete state[stateKey];\r\n\t\t\t} else {\r\n\t\t\t\tstate[stateKey] = {\r\n\t\t\t\t\topacity: point,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\tdrawInternal();\r\n\r\n\t\t\tconst cellState = state[stateKey];\r\n\t\t\tif (cellState) {\r\n\t\t\t\t//\r\n\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst fadinMgr = {\r\n\t\tanimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\t// fadein animation\r\n\t\t\tconst state = getFadinState(grid);\r\n\r\n\t\t\tconst activeFadeins = [\r\n\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n\t\t\t];\r\n\t\t\tstate.activeFadeins = activeFadeins;\r\n\t\t\t\r\n\t\t\tanimate(500, (point) => {\r\n\t\t\t\tactiveFadeins.forEach((f) => f(point));\r\n\t\t\t\tif (point === 1) {\r\n\t\t\t\t\tdelete state.activeFadeins;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tmargeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tif (state.activeFadeins) {\r\n\t\t\t\tstate.activeFadeins.push(\r\n\t\t\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdrawInternal();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t};\r\n\r\n\tclass BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\r\n\t\t\t//Promisecallback\r\n\t\t\tthis._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn BaseStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, getRecord, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\t//\r\n\t\t\tif (isPromise(cellValue)) {\r\n\t\t\t\tif (context.drawing) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst start = Date.now();\r\n\t\t\t\treturn cellValue.then((val) => {\r\n\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst time = Date.now() - start;\r\n\r\n\t\t\t\t\tconst drawInternal = () => {\r\n\t\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\t\t\tthis.convertInternal(val),\r\n\t\t\t\t\t\t\t\tcurrentContext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n\t\t\t\t\t\tdrawInternal();//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst {col, row} = context;\r\n\t\t\t\t\t\tif (time < 80) {\r\n\t\t\t\t\t\t\t//80msPromiseCallback\r\n\t\t\t\t\t\t\tfadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\tfadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\tthis.convertInternal(cellValue),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\t//\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\t\tconst cellState = grid[COLUMN_FADEIN_STATE_ID] && grid[COLUMN_FADEIN_STATE_ID][stateKey];\r\n\t\t\t\tif (cellState) {\r\n\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn isDef(value) ? value : '';\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tdrawMessageInternal(message, context, style, helper, grid, info) {\r\n\t\t\tinfo.messageHandler.drawCellMessage(message, context, style, helper, info);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseColumn;\r\n}","'use strict';\r\n\r\nconst {isDef} = require('../internal/utils');\r\nclass Inline {\r\n\tconstructor(content) {\r\n\t\tthis._content = isDef(content) ? content : '';\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn ctx.measureText(this._content).width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(fn) {\r\n\t\t\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight,\r\n\t}) {\r\n\t\tcanvashelper.fillTextRect(ctx, this._content,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t}\r\n}\r\nmodule.exports = Inline;","'use strict';\r\n{\r\n\tconst {isDef, obj: {each}} = require('../internal/utils');\r\n\t//private symbol\r\n\tconst {_} = require('../internal/symbolManager').get();\r\n\r\n\tlet nextId = 1;\r\n\t/**\r\n\t * event target.\r\n\t */\r\n\tclass EventTarget {\r\n\t\tconstructor() {\r\n\t\t\tthis[_] = {};\r\n\t\t\tthis[_].listeners = {};\r\n\t\t\tthis[_].listenerData = {};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Adds an event listener.\r\n\t\t * @param  {string} type The event type id.\r\n\t\t * @param  {function} listener Callback method.\r\n\t\t * @return {number} unique id for the listener.\r\n\t\t */\r\n\t\tlisten(type, listener) {\r\n\t\t\tconst list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n\t\t\tlist.push(listener);\r\n\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis[_].listenerData[id] = {\r\n\t\t\t\ttype,\r\n\t\t\t\tlistener,\r\n\t\t\t\tremove: () => {\r\n\t\t\t\t\tdelete this[_].listenerData[id];\r\n\t\t\t\t\tconst index = list.indexOf(listener);\r\n\t\t\t\t\tlist.splice(index, 1);\r\n\t\t\t\t\tif (!this[_].listeners[type].length) {\r\n\t\t\t\t\t\tdelete this[_].listeners[type];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\treturn id;\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Removes an event listener which was added with listen() by the id returned by listen().\r\n\t\t * @param  {number} id the id returned by listen().\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tunlisten(id) {\r\n\t\t\tthis[_].listenerData[id].remove();\r\n\t\t}\r\n\t\taddEventListener(type, listener) {\r\n\t\t\tthis.listen(type, listener);\r\n\t\t}\r\n\t\tremoveEventListener(type, listener) {\r\n\t\t\teach(this[_].listenerData, (obj, id) => {\r\n\t\t\t\tif (obj.type === type && obj.listener === listener) {\r\n\t\t\t\t\tthis.unlisten(id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListeners(type) {\r\n\t\t\treturn !!this[_].listeners[type];\r\n\t\t}\r\n\t\t/**\r\n\t\t * Fires all registered listeners\r\n\t\t * @param  {string}    type The type of the listeners to fire.\r\n\t\t * @param  {...*} args fire arguments\r\n\t\t * @return {*} the result of the last listener\r\n\t\t */\r\n\t\tfireListeners(type, ...args) {\r\n\t\t\tconst list = this[_].listeners[type];\r\n\t\t\tif (!list) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\treturn list.\r\n\t\t\t\tmap((listener) => listener.call(this, ...args)).\r\n\t\t\t\tfilter(isDef);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tdelete this[_];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventTarget;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst BaseAction = require('./BaseAction');\r\n\tclass Editor extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._readOnly = option.readOnly;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t\tset readOnly(readOnly) {\r\n\t\t\tthis._readOnly = !!readOnly;\r\n\t\t\tthis.onChangeReadOnlyInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Editor(this);\r\n\t\t}\r\n\t\tonChangeReadOnlyInternal() {}\r\n\t}\r\n\tmodule.exports = Editor;\r\n}","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nfunction createElement(tagName, {classList, text, html} = {}) {\r\n\tconst element = document.createElement(tagName);\r\n\tif (classList) {\r\n\t\tif (Array.isArray(classList)) {\r\n\t\t\telement.classList.add(...classList);\r\n\t\t} else {\r\n\t\t\telement.classList.add(classList);\r\n\t\t}\r\n\t}\r\n\tif (text) {\r\n\t\telement.textContent = text;\r\n\t} else if (html) {\r\n\t\telement.innerHTML = html;\r\n\t}\r\n\treturn element;\r\n}\r\n\r\nfunction empty(dom) {\r\n\tlet c;\r\n\twhile ((c = dom.firstChild)) {\r\n\t\tdom.removeChild(c);\r\n\t}\r\n}\r\nfunction isNode(arg) {\r\n\treturn !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n\tif (isNode(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\tconst dom = createElement('div', {html: arg});\r\n\treturn Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n\tif ((window.jQuery && arg instanceof window.jQuery)) {\r\n\t\treturn Array.prototype.map.call(arg, (a) => a);\r\n\t}\r\n\tif (Array.isArray(arg)) {\r\n\t\treturn arg.map(toNode);\r\n\t}\r\n\treturn [toNode(arg)];\r\n}\r\n\r\nfunction appendHtml(dom, inner) {\r\n\ttoNodeList(inner).forEach((node) => {\r\n\t\tdom.appendChild(node);\r\n\t});\r\n}\r\n\r\nfunction disableFocus(el) {\r\n\tel.dataset.disableBeforeTabIndex = el.tabIndex;\r\n\tel.tabIndex = -1;\r\n\tArray.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nfunction enableFocus(el) {\r\n\tif ('disableBeforeTabIndex' in el.dataset) {\r\n\t\tel.tabIndex = el.dataset.disableBeforeTabIndex;\r\n\t}\r\n\tArray.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\n\r\nfunction isFocusable(el) {\r\n\treturn isDef(el.tabIndex) && el.tabIndex > -1;\r\n}\r\nfunction findPrevSiblingFocusable(el) {\r\n\tlet n = el.previousSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.previousSibling;\r\n\t}\r\n\treturn n;\r\n}\r\nfunction findNextSiblingFocusable(el) {\r\n\tlet n = el.nextSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.nextSibling;\r\n\t}\r\n\treturn n;\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateElement,\r\n\tempty,\r\n\tisNode,\r\n\ttoNode,\r\n\ttoNodeList,\r\n\tappendHtml,\r\n\tdisableFocus,\r\n\tenableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n};","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\r\n\tconst style = {\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tof(columnStyle, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(), StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n\r\nfunction parse(calcStr) {\r\n\tfunction replacer(match, num, unit) {\r\n\t\tswitch (unit) {\r\n\t\tcase '%':\r\n\t\t\treturn `(${num} * this.full / 100)`;\r\n\t\tcase 'em':\r\n\t\t\treturn `(${num} * this.em)`;\r\n\t\tcase 'px':\r\n\t\t\treturn `(${num})`;\r\n\t\tdefault:\r\n\t\t\tthrow new Error('calc error');\r\n\t\t}\r\n\t}\r\n\tconst script = calcStr.replace(/^calc\\((.*)\\)$/, '$1').\r\n\t\treplace(/(\\d+)([A-Za-z%]+)/g, replacer).\r\n\t\treplace(/(\\d*\\.\\d+)([A-Za-z%]+)/g, replacer);\r\n\treturn {\r\n\t\teval(context) {\r\n\t\t\treturn (() => {\r\n\t\t\t\tfunction calc(v) { // eslint-disable-line no-unused-vars\r\n\t\t\t\t\treturn v;\r\n\t\t\t\t}\r\n\t\t\t\treturn eval(script);// eslint-disable-line no-eval\r\n\t\t\t}).call(context);\r\n\t\t}\r\n\t};\r\n}\r\nfunction toPx(value, context) {\r\n\tif (/^calc\\(.*\\)$/.test(value)) {\r\n\t\treturn parse(value).eval(context);\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*%$/.test(value)) {\r\n\t\treturn context.full * value.substr(0, value.length - 1) / 100;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*px$/.test(value)) {\r\n\t\treturn value.substr(0, value.length - 2) - 0;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*em$/.test(value)) {\r\n\t\treturn context.em * (value.substr(0, value.length - 2) - 0);\r\n\t}\r\n\treturn value - 0;\r\n}\r\n\r\nmodule.exports = {\r\n\tparse,\r\n\ttoPx(value, context) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\treturn toPx(value.trim(), context);\r\n\t\t}\r\n\t\treturn value - 0;\r\n\t}\r\n};","'use strict';\r\n{\r\n\t\r\n\r\n\tclass BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis._disabled = option.disabled;\r\n\t\t}\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tset disabled(disabled) {\r\n\t\t\tthis._disabled = !!disabled;\r\n\t\t\tthis.onChangeDisabledInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseAction(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tonChangeDisabledInternal() {}\r\n\t}\r\n\tmodule.exports = BaseAction;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\r\n\tlet defaultStyle;\r\n\tclass StdBaseStyle extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._textAlign = style.textAlign || 'left';\r\n\t\t\tthis._textBaseline = style.textBaseline || 'middle';\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new StdBaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = StdBaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst {isPromise} = require('../../internal/utils');\r\n\tconst icons = require('../../internal/icons');\r\n\tmodule.exports = {\r\n\t\tloadIcons(icon, context, helper, callback) {\r\n\t\t\tif (icon) {\r\n\t\t\t\tif (isPromise(icon)) {\r\n\t\t\t\t\ticon.then((i) => {\r\n\t\t\t\t\t\tthis.loadIcon(i, context.toCurrentContext(), callback);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst iconList = icons.toNormarizeArray(icon);\r\n\t\t\t\t\ticonList.forEach((i) => {\r\n\t\t\t\t\t\thelper.testFontLoad(i.font, i.content, context);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = iconList;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcallback(icon, context);\r\n\t\t},\r\n\t};\r\n}","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nconst ICON_PROP_KEYS = [\r\n\t'content',\r\n\t'font',\r\n\t'color',\r\n\t'className',\r\n\t'isLiga',\r\n\t'width',\r\n\t'src',\r\n\t'svg',\r\n\t'name',\r\n\t'path'\r\n];\r\n\r\nfunction quote(name) {\r\n\tconst quoted = [];\r\n\tconst split = name.split(/,\\s*/);\r\n\tfor (let i = 0; i < split.length; i++) {\r\n\t\tconst part = split[i].replace(/['\"]/g, '');\r\n\t\tif (part.indexOf(' ') === -1 && !(/^\\d/.test(part))) {\r\n\t\t\tquoted.push(part);\r\n\t\t} else {\r\n\t\t\tquoted.push('\\'' + part + '\\'');\r\n\t\t}\r\n\t}\r\n\treturn quoted.join(',');\r\n}\r\n\r\nconst doms = {};\r\nconst props = {};\r\n\r\nfunction getIconProps(tagName, className) {\r\n\tconst tagProps = props[tagName] || (props[tagName] = {});\r\n\tif (tagProps[className]) {\r\n\t\treturn tagProps[className];\r\n\t}\r\n\tconst dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n\tdom.className = className;\r\n\tdocument.body.appendChild(dom);\r\n\ttry {\r\n\t\tconst beforeStyle = document.defaultView.getComputedStyle(dom, '::before');\r\n\t\tlet content = beforeStyle.getPropertyValue('content');\r\n\t\tif (content.length >= 3 && (content[0] === '\"' || content[0] === '\\'')) {\r\n\t\t\tif (content[0] === content[content.length - 1]) {\r\n\t\t\t\tcontent = content.substr(1, content.length - 2);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet font = beforeStyle.getPropertyValue('font');\r\n\t\tif (!font) {\r\n\t\t\tfont = beforeStyle.getPropertyValue('font-style') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-variant') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-weight') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-size') + '/' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('line-height') + ' ' +\r\n\t\t\t\tquote(beforeStyle.getPropertyValue('font-family'));\r\n\t\t}\r\n\t\tconst color = beforeStyle.getPropertyValue('color');\r\n\t\tconst width = dom.clientWidth;\r\n\t\tconst isLiga = (beforeStyle.getPropertyValue('font-feature-settings') || '').indexOf('liga') > -1;\r\n\t\t\r\n\t\treturn (tagProps[className] = {\r\n\t\t\tcontent,\r\n\t\t\tfont,\r\n\t\t\tcolor,\r\n\t\t\twidth,\r\n\t\t\tisLiga,\r\n\t\t});\r\n\t} finally {\r\n\t\tdocument.body.removeChild(dom);\r\n\t}\r\n}\r\n\r\nfunction toPropArray(prop, count) {\r\n\tconst result = [];\r\n\tif (Array.isArray(prop)) {\r\n\t\tresult.push(...prop);\r\n\t\tfor (let i = prop.length; i < count; i++) {\r\n\t\t\tresult.push(null);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\tresult.push(prop);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction toSimpleArray(iconProps) {\r\n\tif (!iconProps) {\r\n\t\treturn iconProps;\r\n\t} else if (Array.isArray(iconProps)) {\r\n\t\treturn iconProps;\r\n\t}\r\n\r\n\tconst workData = {};\r\n\r\n\tlet count = 0;\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tif (iconProps[k]) {\r\n\t\t\tif (Array.isArray(iconProps[k])) {\r\n\t\t\t\tcount = Math.max(count, iconProps[k].length);\r\n\t\t\t} else {\r\n\t\t\t\tcount = Math.max(count, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tworkData[k] = toPropArray(iconProps[k], count);\r\n\t});\r\n\r\n\tconst result = [];\r\n\tfor (let i = 0; i < count; i++) {\r\n\t\tconst data = {};\r\n\t\tICON_PROP_KEYS.forEach((k) => {\r\n\t\t\tdata[k] = workData[k][i];\r\n\t\t});\r\n\t\tresult.push(data);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction normarize(iconProps) {\r\n\tconst data = {};\r\n\tfor (const k in iconProps) {\r\n\t\tif (k === 'className') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tdata[k] = iconProps[k];\r\n\t}\r\n\tif (iconProps.className) {\r\n\t\tconst prop = getIconProps(iconProps.tagName || 'i', iconProps.className);\r\n\t\tfor (const k in prop) {\r\n\t\t\tif (!isDef(iconProps[k])) {\r\n\t\t\t\tdata[k] = prop[k];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn data;\r\n}\r\n\r\nmodule.exports = {\r\n\ttoNormarizeArray(iconProps) {\r\n\t\tconst icons = toSimpleArray(iconProps);\r\n\t\tif (!icons) {\r\n\t\t\treturn icons;\r\n\t\t}\r\n\t\treturn icons.map((icon) => normarize(icon));\r\n\t},\r\n\tget iconPropKeys() {\r\n\t\treturn ICON_PROP_KEYS;\r\n\t},\r\n\tgetIconProps,\r\n};\r\n\r\n\r\n","'use strict';\r\n{\r\n\tconst {extend, getIgnoreCase} = require('./internal/utils');\r\n\tconst theme = require('./themes/theme');\r\n\tconst plugins = require('./plugins/themes');\r\n\tconst BASIC = theme.create(require('./themes/BASIC'));\r\n\tconst MATERIAL_DESIGN = theme.create(require('./themes/MATERIAL_DESIGN'));\r\n\r\n\tconst builtin = {\r\n\t\tBASIC,\r\n\t\tMATERIAL_DESIGN,\r\n\t};\r\n\tlet defTheme = theme.create({});\r\n\t/**\r\n\t * themes\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tconst themes = {\r\n\t\tget default() {\r\n\t\t\treturn defTheme;\r\n\t\t},\r\n\t\tset default(defaultTheme) {\r\n\t\t\tdefTheme = defaultTheme;\r\n\t\t},\r\n\t\ttheme,\r\n\t\tof(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (typeof value === 'string') {\r\n\t\t\t\tconst t = getIgnoreCase(themes.choices, value);\r\n\t\t\t\tif (t) {\r\n\t\t\t\t\treturn t;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @namespace cheetahGrid.themes.choices\r\n\t\t */\r\n\t\tget choices() {\r\n\t\t\treturn extend(builtin, plugins);\r\n\t\t},\r\n\t};\r\n\tmodule.exports = themes;\r\n}","'use strict';\r\n\r\nfunction getPath2D() {\r\n\t//return require('./legacy/canvas/Path2D');\r\n\treturn window.Path2D || require('./legacy/canvas/Path2D');\r\n}\r\n\r\nmodule.exports = {\r\n\tfill(module, ctx, x, y, w, h) {\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tconst {width, height} = module;\r\n\t\t\tconst {ud: upsideDown, x: offsetX = 0, y: offsetY = 0} = module;\r\n\t\t\tw = w || width;\r\n\t\t\th = h || height;\r\n\t\t\tconst xrate = w / width;\r\n\t\t\tconst yrate = h / (upsideDown ? -height : height);\r\n\t\t\tx = x || 0;\r\n\t\t\ty = upsideDown ? ((y || 0) + (-height * yrate)) : (y || 0);\r\n\r\n\t\t\tctx.translate(x, y);\r\n\t\t\tctx.scale(xrate, yrate);\r\n\t\t\tif (offsetX !== 0 || offsetY !== 0) {\r\n\t\t\t\tctx.translate(offsetX, offsetY);\r\n\t\t\t}\r\n\t\t\tconst Path2D = getPath2D();\r\n\t\t\tmodule.path2d = module.path2d || (new Path2D(module.d));\r\n\t\t\tctx.fill(module.path2d);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\tget Path2D() {\r\n\t\treturn getPath2D();\r\n\t},\r\n};\r\n","'use strict';\r\n\r\nclass BaseMessage {\r\n\tconstructor(grid) {\r\n\t\tthis._grid = grid;\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detachMessageElement();\r\n\t\tif (this._messageElement) {\r\n\t\t\tthis._messageElement.dispose();\r\n\t\t}\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\t_getMessageElement() {\r\n\t\treturn this._messageElement || (this._messageElement = this.createMessageElementInternal());\r\n\t}\r\n\tcreateMessageElementInternal() {\r\n\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\r\n\t}\r\n\tattachMessageElement(col, row, message) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.attach(this._grid, col, row, message);\r\n\t}\r\n\tmoveMessageElement(col, row) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.move(this._grid, col, row);\r\n\t}\r\n\tdetachMessageElement() {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement._detach();\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\t\tthis.drawCellMessageInternal(message, context, style, helper, info);\r\n\t}\r\n}\r\n\r\nmodule.exports = BaseMessage;","'use strict';\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nfunction createrootElement() {\r\n\trequire('./MessageElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst message = createElement('span', {classList: [MESSAGE_CLASSNAME]});\r\n\telement.appendChild(message);\r\n\treturn element;\r\n}\r\n\r\n\r\nclass MessageElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tconst rootElement = this._rootElement = createrootElement();\r\n\t\tthis._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._rootElement = null;\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\tattach(grid, col, row, message) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst messageElement = this._messageElement;\r\n\r\n\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\r\n\t\t\tmessageElement.textContent = message;\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tmove(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tdetach() {\r\n\t\tthis._detach();\r\n\t}\r\n\t_detach() {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (rootElement.parentElement) {\r\n\t\t\trootElement.parentElement.removeChild(rootElement);\r\n\t\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\t\t}\r\n\t}\r\n\t_attachCell(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t\tconst {bottom: top, left, width} = rect;\r\n\t\tconst {frozenRowCount, frozenColCount} = grid;\r\n\t\tif (row >= frozenRowCount && frozenRowCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(col, frozenRowCount - 1);\r\n\t\t\tif (top < frozenRect.bottom) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (top < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (col >= frozenColCount && frozenColCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(frozenColCount - 1, row);\r\n\t\t\tif (left < frozenRect.right) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (left < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst {offsetHeight, offsetWidth} = element;\r\n\t\tif (offsetHeight < top) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (offsetWidth < left) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\trootElement.style.top = top.toFixed() + 'px';\r\n\t\trootElement.style.left = left.toFixed() + 'px';\r\n\t\trootElement.style.width = width.toFixed() + 'px';\r\n\t\tif (rootElement.parentElement !== element) {\r\n\t\t\telement.appendChild(rootElement);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageElement;","'use strict';\r\n{\r\n\tfunction getScrollBarWidth() {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.position = 'absolute';\r\n\t\tstyle.height = '9999px';\r\n\t\tstyle.width = 'calc(100vw - 100%)';\r\n\t\tstyle.opacity = 0;\r\n\t\tdummy.textContent = 'x';\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {width} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn parseInt(width, 10);\r\n\t}\r\n\r\n\tlet SCROLLBAR_SIZE;\r\n\tconst initDocument = () => {\r\n\t\trequire('./style.css');\r\n\t\tSCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n\t\tconst style = document.createElement('style');\r\n\t\tstyle.setAttribute('type', 'text/css');\r\n\t\tstyle.setAttribute('data-name', 'cheetah-grid');\r\n\t\tstyle.innerHTML =\r\n\t\t`\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n\r\n\t\tdocument.head.appendChild(style);\r\n\t};\r\n\r\n\tconst style = {\r\n\t\tinitDocument() {\r\n\t\t\tstyle.initDocument = () => {};\r\n\t\t\tinitDocument();\r\n\t\t},\r\n\t\tgetScrollBarSize() {\r\n\t\t\treturn SCROLLBAR_SIZE;\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst {calcBasePosition, calcStartPosition} = require('../internal/canvases');\r\n\tconst {ceil, PI} = Math;\r\n\r\n\tfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n\t\tfunction strokeRectLines(positions) {\r\n\t\t\tfor (let i = 0; i < borderColors.length; i++) {\r\n\t\t\t\tconst color = borderColors[i];\r\n\t\t\t\tconst preColor = borderColors[i - 1];\r\n\t\t\t\tif (color) {\r\n\t\t\t\t\tif (preColor !== color) {\r\n\t\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst pos1 = positions[i];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(pos1.x, pos1.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst pos2 = positions[i + 1];\r\n\t\t\t\t\tctx.lineTo(pos2.x, pos2.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst preColor = borderColors[borderColors.length - 1];\r\n\t\t\tif (preColor) {\r\n\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (borderColors[0] === borderColors[1] &&\r\n\t\t\tborderColors[0] === borderColors[2] &&\r\n\t\t\tborderColors[0] === borderColors[3]) {\r\n\t\t\tif (borderColors[0]) {\r\n\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrokeRectLines([\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t\t{x: left + width, y: top},\r\n\t\t\t\t{x: left + width, y: top + height},\r\n\t\t\t\t{x: left, y: top + height},\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\tfunction roundRect(ctx, left, top, width, height, radius) {\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n\t\tctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n\t\tctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n\t\tctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n\t\tctx.closePath();\r\n\t}\r\n\tfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.fill();\r\n\t}\r\n\tfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.stroke();\r\n\t}\r\n\tfunction fillTextRect(ctx, text, left, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcBasePosition(ctx, rect, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.fillText(text, pos.x, pos.y);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawInlineImageRect(ctx, image,\r\n\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\tdestWidth, destHeight,\r\n\t\t\tleft, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, destWidth, destHeight, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.drawImage(image,\r\n\t\t\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\t\t\tpos.x, pos.y, destWidth, destHeight\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an object containing the width of the checkbox.\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @return {Object} Object containing the width of the checkbox\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction measureCheckbox(ctx) {\r\n\t\treturn {\r\n\t\t\twidth: ctx.measureText('').width\r\n\t\t};\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * draw Checkbox\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {boolean|number} check checkbox check status\r\n\t * @param  {object} option option\r\n\t * @return {void}\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction drawCheckbox(ctx, x, y, check,\r\n\t\t\t{\r\n\t\t\t\tuncheckBgColor = '#FFF',\r\n\t\t\t\tcheckBgColor = 'rgb(76, 73, 72)',\r\n\t\t\t\tborderColor = '#000',\r\n\t\t\t\tboxSize = measureCheckbox(ctx).width,\r\n\t\t\t} = {}) {\r\n\t\tconst checkPoint = typeof check === 'number' ? (check > 1 ? 1 : check) : 1;\r\n\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n\t\t\t\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 1,\r\n\t\t\t\t\tceil(y) - 1,\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.strokeStyle = borderColor;\r\n\t\t\tstrokeRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 0.5,\r\n\t\t\t\t\tceil(y) - 0.5,\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tif (check) {\r\n\t\t\t\tctx.lineWidth = ceil(boxSize / 10);\r\n\t\t\t\tctx.strokeStyle = uncheckBgColor;\r\n\t\t\t\tlet leftWidth = boxSize / 4;\r\n\t\t\t\tlet rightWidth = boxSize / 2 * 0.9;\r\n\t\t\t\tconst leftLeftPos = x + boxSize * 0.2;\r\n\t\t\t\tconst leftTopPos = y + boxSize / 2;\r\n\r\n\t\t\t\tif (checkPoint < 0.5) {\r\n\t\t\t\t\tleftWidth = leftWidth * (checkPoint * 2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(leftLeftPos, leftTopPos);\r\n\t\t\t\tctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n\t\t\t\tif (checkPoint > 0.5) {\r\n\t\t\t\t\tif (checkPoint < 1) {\r\n\t\t\t\t\t\trightWidth = rightWidth * ((checkPoint - 0.5) * 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n\t\tconst {\r\n\t\t\tbackgroundColor = '#FFF',\r\n\t\t\tbgColor = backgroundColor,\r\n\t\t\tradius = 4,\r\n\t\t\tshadow = {},\r\n\t\t} = option;\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = bgColor;\r\n\r\n\t\t\tif (shadow) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, 0.24)',\r\n\t\t\t\t\tblur = 1,\r\n\t\t\t\t\toffsetX = 0,\r\n\t\t\t\t\toffsetY = 2,\r\n\t\t\t\t\toffset: {\r\n\t\t\t\t\t\tx: ox = offsetX,\r\n\t\t\t\t\t\ty: oy = offsetY\r\n\t\t\t\t\t} = {},\r\n\t\t\t\t} = shadow;\r\n\t\t\t\tctx.shadowColor = color;\r\n\t\t\t\tctx.shadowBlur = blur; //\r\n\t\t\t\tctx.shadowOffsetX = ox;\r\n\t\t\t\tctx.shadowOffsetY = oy;\r\n\t\t\t}\r\n\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(left),\r\n\t\t\t\t\tceil(top),\r\n\t\t\t\t\tceil(width),\r\n\t\t\t\t\tceil(height),\r\n\t\t\t\t\tradius\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * canvashelper\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools.canvashelper\r\n\t * @memberof cheetahGrid.tools\r\n\t */\r\n\tconst canvashelper = {\r\n\t\troundRect,\r\n\t\tfillRoundRect,\r\n\t\tstrokeRoundRect,\r\n\t\tdrawCheckbox,\r\n\t\tmeasureCheckbox,\r\n\t\tfillTextRect,\r\n\t\tdrawButton,\r\n\t\tdrawInlineImageRect,\r\n\t\tstrokeColorsRect,\r\n\t};\r\n\r\n\r\n\tmodule.exports = canvashelper;\r\n}","'use strict';\r\n{\r\n\tconst action = require('./columns/action');\r\n\tconst type = require('./columns/type');\r\n\tconst style = require('./columns/style');\r\n\r\n\t/**\r\n\t * columns\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\taction,\r\n\t\ttype,\r\n\t\tstyle,\r\n\t};\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\r\n\tconst BaseAction = require('./BaseAction');\r\n\r\n\tclass Action extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._action = option.action;\r\n\t\t}\r\n\t\tget action() {\r\n\t\t\treturn this._action;\r\n\t\t}\r\n\t\tset action(action) {\r\n\t\t\tthis._action = action;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Action(this);\r\n\t\t}\r\n\t\tgetState(grid) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst state = this.getState(grid);\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst record = grid.getRowRecord(cell.row);\r\n\t\t\t\tthis._action(record);\r\n\t\t\t};\r\n\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = Action;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst {isPromise, event: {cancel}} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tKEYDOWN,\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tfunction bindCellClickAction(grid, col, util, {\r\n\t\taction,\r\n\t\tmouseOver,\r\n\t\tmouseOut\r\n\t}) {\r\n\t\treturn [\r\n\t\t\t// click\r\n\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\trow: e.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOver) {\r\n\t\t\t\t\tif (!mouseOver({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t})) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOut) {\r\n\t\t\t\t\tmouseOut({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction bindCellKeyAction(grid, col, util, {action, acceptKeys = []}) {\r\n\t\tacceptKeys = [...acceptKeys, KEY_ENTER];\r\n\t\treturn [\r\n\t\t\t// enter key down\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (acceptKeys.indexOf(keyCode) === -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(sel.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t\tcancel(e);\r\n\t\t\t}),\r\n\r\n\t\t];\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tbindCellClickAction,\r\n\t\tbindCellKeyAction,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tfunction cubicBezier(x2, y2, x3, y3) {\r\n\t\tlet step;\r\n\t\tconst err = 0.0001;\r\n\r\n\t\tx2 *= 3;\r\n\t\ty2 *= 3;\r\n\t\tx3 *= 3;\r\n\t\ty3 *= 3;\r\n\t\t\t\r\n\t\treturn function(t) {\r\n\t\t\tlet p,\r\n\t\t\t\ta,\r\n\t\t\t\tb,\r\n\t\t\t\tc,\r\n\t\t\t\td,\r\n\t\t\t\tx,\r\n\t\t\t\ts;\r\n\t\t\tif (t < 0 || 1 < t) {\r\n\t\t\t\tthrow new Error(t);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tp = step || t;\r\n\r\n\t\t\tdo {\r\n\t\t\t\ta = 1 - p;\r\n\t\t\t\tb = a * a;\r\n\t\t\t\tc = p * p;\r\n\t\t\t\td = c * p;\r\n\t\t\t\t\t\r\n\t\t\t\tx = x2 * b * p + x3 * a * c + d;\r\n\t\t\t\ts = t - x;\r\n\t\t\t\tp += s * 0.5;\r\n\t\t\t} while (err < Math.abs(s));\r\n\r\n\t\t\tstep = p;\r\n\t\t\treturn\ty2 * b * p + y3 * a * c + d;\r\n\t\t};\r\n\t}\r\n\tconst EASINGS = {\r\n\t\tlinear(p) {\r\n\t\t\treturn p;\r\n\t\t},\r\n\t\teaseIn: cubicBezier(0.420, 0.000, 1.000, 1.000),\r\n\t\teaseOut: cubicBezier(0.000, 0.000, 0.580, 1.000),\r\n\t\teaseInOut: cubicBezier(0.420, 0.000, 0.580, 1.000),\r\n\t};\r\n\r\n\tconst raf = window.requestAnimationFrame || setTimeout;\r\n\t\r\n\tfunction now() {\r\n\t\treturn Date.now();\r\n\t}\r\n\t/**\r\n\t * <pre>\r\n\t * Animates.\r\n\t * </pre>\r\n\t * @function\r\n\t * @param {number} duration animation time.\r\n\t * @param {function} step\r\n\t * @param {function|string} easing\r\n\t * @returns {object} Deferred object.\r\n\t */\r\n\tmodule.exports = (duration, step, easing) => {\r\n\t\tconst startedAt = now();\r\n\r\n\t\tif (!easing) {\r\n\t\t\teasing = EASINGS.easeInOut;\r\n\t\t} else if (typeof easing === 'string') {\r\n\t\t\teasing = EASINGS[easing];\r\n\t\t}\r\n\r\n\t\tlet canceledFlg = false;\r\n\t\tconst createAnim = (resolve, reject) => {\r\n\t\t\tconst anim = () => {\r\n\t\t\t\tconst point = now() - startedAt;\r\n\t\t\t\tif (canceledFlg) {\r\n\t\t\t\t\t//cancel\r\n\t\t\t\t\tif (reject) { reject(); }\r\n\t\t\t\t} else if (point >= duration) {\r\n\t\t\t\t\t//end\r\n\t\t\t\t\tstep(1);\r\n\t\t\t\t\tif (resolve) { resolve(); }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstep(easing(point / duration));\r\n\r\n\t\t\t\t\traf(anim, 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn anim;\r\n\t\t};\r\n\t\tconst cancel = () => {\r\n\t\t\tcanceledFlg = true;\r\n\t\t};\r\n\t\tif (window.Promise) {\r\n\t\t\tconst result = new window.Promise((resolve, reject) => {\r\n\t\t\t\tconst anim = createAnim(resolve, reject);\r\n\t\t\t\tstep(0);\r\n\t\t\t\tanim();\r\n\t\t\t});\r\n\t\t\tresult.cancel = cancel;\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tconst anim = createAnim(() => {}, () => {});\r\n\t\t\tstep(0);\r\n\t\t\tanim();\r\n\t\t\treturn {\r\n\t\t\t\tcancel,\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst Editor = require('./Editor');\r\n\tconst {EVENT_TYPE: {\r\n\t\tINPUT_CELL,\r\n\t\tEDITABLEINPUT_CELL,\r\n\t\tSELECTED_CELL,\r\n\t\tDBLCLICK_CELL,\r\n\t\tDBLTAP_CELL,\r\n\t\tKEYDOWN,\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\tSCROLL\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_F2 = 113;\r\n\r\n\tclass BaseInputEditor extends Editor {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseInputEditor(this);\r\n\t\t}\r\n\t\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonOpenCellInternal(grid, cell) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonGridScrollInternal(grid) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst open = (cell) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onOpenCellInternal(grid, cell);\r\n\t\t\t};\r\n\r\n\t\t\tconst input = (cell, value) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onInputCellInternal(grid, cell, value);\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(INPUT_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinput({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t}, e.value);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLCLICK_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLTAP_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\te.event.preventDefault();\r\n\t\t\t\t\te.event.stopPropagation();\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\t\trow: sel.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\t\tthis.onChangeSelectCellInternal(grid, {col: e.col, row: e.row}, e.selected);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\t\tthis.onGridScrollInternal(grid);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.onSetInputAttrsInternal(grid, {\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t}, cell.input);\r\n\t\t\t\t}),\r\n\t\t\t\t\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = BaseInputEditor;\r\n}","'use strict';\r\n\r\nfunction normalize(options) {\r\n\tif (!options) {\r\n\t\treturn [];\r\n\t}\r\n\tif (Array.isArray(options)) {\r\n\t\treturn options;\r\n\t}\r\n\tif (typeof options === 'string') {\r\n\t\treturn normalize(JSON.parse(options));\r\n\t}\r\n\tconst result = [];\r\n\tfor (const k in options) {\r\n\t\tresult.push({\r\n\t\t\tvalue: k,\r\n\t\t\tcaption: options[k]\r\n\t\t});\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nmodule.exports = {\r\n\tnormalize,\r\n};\r\n","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\tconst NumberStyle = require('./style/NumberStyle');\r\n\tconst CheckStyle = require('./style/CheckStyle');\r\n\tconst ButtonStyle = require('./style/ButtonStyle');\r\n\tconst ImageStyle = require('./style/ImageStyle');\r\n\tconst IconStyle = require('./style/IconStyle');\r\n\tconst PercentCompleteBarStyle = require('./style/PercentCompleteBarStyle');\r\n\r\n\t/**\r\n\t * column styles\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.style\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst style = {\r\n\t\tget EVENT_TYPE() {\r\n\t\t\treturn BaseStyle.EVENT_TYPE;\r\n\t\t},\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tget NumberStyle() {\r\n\t\t\treturn NumberStyle;\r\n\t\t},\r\n\t\tget CheckStyle() {\r\n\t\t\treturn CheckStyle;\r\n\t\t},\r\n\t\tget ButtonStyle() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t},\r\n\t\tget ImageStyle() {\r\n\t\t\treturn ImageStyle;\r\n\t\t},\r\n\t\tget IconStyle() {\r\n\t\t\treturn IconStyle;\r\n\t\t},\r\n\t\tget PercentCompleteBarStyle() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t},\r\n\t\tof(columnStyle, record, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(record), record, StyleClass);\r\n\t\t\t\t} else if (record && columnStyle in record) {\r\n\t\t\t\t\treturn style.of(record[columnStyle], record, StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'right'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass NumberStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = NumberStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass CheckStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tborderColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t}\r\n\t\tget uncheckBgColor() {\r\n\t\t\treturn this._uncheckBgColor;\r\n\t\t}\r\n\t\tset uncheckBgColor(uncheckBgColor) {\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget checkBgColor() {\r\n\t\t\treturn this._checkBgColor;\r\n\t\t}\r\n\t\tset checkBgColor(checkBgColor) {\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget borderColor() {\r\n\t\t\treturn this._borderColor;\r\n\t\t}\r\n\t\tset borderColor(borderColor) {\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = CheckStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass ButtonStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tbuttonBgColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t}\r\n\t\tget buttonBgColor() {\r\n\t\t\treturn this._buttonBgColor;\r\n\t\t}\r\n\t\tset buttonBgColor(buttonBgColor) {\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = ButtonStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tclass ImageStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tthis._imageSizing = style.imageSizing;\r\n\t\t\tthis._margin = style.margin || 4;\r\n\t\t}\r\n\t\tget imageSizing() {\r\n\t\t\treturn this._imageSizing;\r\n\t\t}\r\n\t\tset imageSizing(imageSizing) {\r\n\t\t\tthis._imageSizing = imageSizing;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget margin() {\r\n\t\t\treturn this._margin;\r\n\t\t}\r\n\t\tset margin(margin) {\r\n\t\t\tthis._margin = margin;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass IconStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = IconStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\tlet defaultStyle;\r\n\tconst DEFAULT_BAR_COLOR = (num) => {\r\n\t\tif (num > 80) {\r\n\t\t\treturn '#20a8d8';\r\n\t\t}\r\n\t\tif (num > 50) {\r\n\t\t\treturn '#4dbd74';\r\n\t\t}\r\n\t\tif (num > 20) {\r\n\t\t\treturn '#ffc107';\r\n\t\t}\r\n\t\treturn '#f86c6b';\r\n\t};\r\n\tclass PercentCompleteBarStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new PercentCompleteBarStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n\t\t\tthis._barBgColor = style.barBgColor || '#f0f3f5';\r\n\t\t\tthis._barHeight = style.barHeight || 3;\r\n\t\t}\r\n\t\tget barColor() {\r\n\t\t\treturn this._barColor;\r\n\t\t}\r\n\t\tset barColor(barColor) {\r\n\t\t\tthis._barColor = barColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barBgColor() {\r\n\t\t\treturn this._barBgColor;\r\n\t\t}\r\n\t\tset barBgColor(barBgColor) {\r\n\t\t\tthis._barBgColor = barBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barHeight() {\r\n\t\t\treturn this._barHeight;\r\n\t\t}\r\n\t\tset barHeight(barHeight) {\r\n\t\t\tthis._barHeight = barHeight;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarStyle;\r\n}","'use strict';\r\n\r\nconst {then} = require('./utils');\r\nconst LRUCache = require('./LRUCache');\r\n\r\nconst allCache = {};\r\n\r\nfunction isDataUrl(url) {\r\n\treturn url.search(/^(data:)/) !== -1;\r\n}\r\n\r\nfunction loadImage(src) {\r\n\tif (!window.Promise) {\r\n\t\tconsole.error('Promise is not loaded. load Promise before this process.');\r\n\t\treturn {\r\n\t\t\tthen() {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst img = new Image();\r\n\tconst result = new window.Promise((resolve) => {\r\n\t\timg.onload = () => {\r\n\t\t\tresolve(img);\r\n\t\t};\r\n\t});\r\n\timg.onerror = (e) => {\r\n\t\tconst url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\r\n\t\tconsole.warn(`cannot load: ${url}`);\r\n\t\tthrow new Error(`IMAGE LOAD ERROR: ${url}`);\r\n\t};\r\n\timg.src = isDataUrl(src) ? src : `${src}?${Date.now()}`;\r\n\treturn result;\r\n}\r\n\r\nfunction getCacheOrLoad0(cache, src) {\r\n\treturn then(src, (src) => {\r\n\t\tconst c = cache.get(src);\r\n\t\tif (c) {\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconst result = loadImage(src).then((img) => {\r\n\t\t\tcache.put(src, img);\r\n\t\t\treturn img;\r\n\t\t});\r\n\t\tcache.put(src, result);\r\n\t\treturn result;\r\n\t});\r\n}\r\n\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n\tconst cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache(cacheSize));\r\n\treturn getCacheOrLoad0(cache, src);\r\n}\r\n\r\nmodule.exports = {\r\n\tloadImage,\r\n\tgetCacheOrLoad,\r\n};\r\n","/*eslint no-bitwise:0*/\r\n'use strict';\r\n\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (frozenRowCount - 1 === row) {\r\n\t\treturn ['#f2f2f2', '#f2f2f2', '#ccc7c7', '#f2f2f2'];\r\n\t} else {\r\n\t\treturn ['#f2f2f2'];\r\n\t}\r\n}\r\nfunction BORDER_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid: {colCount}\r\n\t} = args;\r\n\tif (colCount - 1 === col) {\r\n\t\treturn ['#ccc7c7', '#f2f2f2', '#ccc7c7', null];\r\n\t} else {\r\n\t\treturn ['#ccc7c7', null];\r\n\t}\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\tdefaultBgColor: '#FFF',\r\n\tfrozenRowsBgColor: '#FFF',\r\n\tfrozenRowsColor: 'rgba(0, 0, 0, 0.54)',\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: BORDER_COLOR,\r\n\tfrozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t\tborderColor: 'rgba(0, 0, 0, 0.26)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#FFF',\r\n};","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n{\r\n\tconst DataSource = require('./data/DataSource');\r\n\tconst CachedDataSource = require('./data/CachedDataSource');\r\n\t\r\n\r\n\t/**\r\n\t * data modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.data\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDataSource,\r\n\t\tCachedDataSource\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {array, isDef, isPromise, getOrApply, applyChainSafe, emptyFn} = require('../internal/utils');\r\n\tconst sort = require('../internal/sort');\r\n\tconst EventTarget = require('../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tUPDATE_LENGTH: 'update_length',\r\n\t\tUPDATED_LENGTH: 'updated_length',\r\n\t\tUPDATED_ORDER: 'updated_order',\r\n\t};\r\n\r\n\tfunction getValue(value, setPromiseBack) {\r\n\t\tvalue = getOrApply(value);\r\n\t\tif (isPromise(value)) {\r\n\t\t\tvalue = value.then((r) => {\r\n\t\t\t\tif (!isPromise(r)) {\r\n\t\t\t\t\tsetPromiseBack(r);\r\n\t\t\t\t}\r\n\t\t\t\treturn getValue(r, setPromiseBack);\r\n\t\t\t});\r\n\t\t\t//\r\n\t\t\tsetPromiseBack(value);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tfunction getField(record, field, setPromiseBack) {\r\n\t\tif (!isDef(record)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (isPromise(record)) {\r\n\t\t\treturn record.then((r) => getField(r, field, setPromiseBack));\r\n\t\t}\r\n\t\tif (field in record) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\tif (typeof field === 'function') {\r\n\t\t\treturn getValue(field(record), setPromiseBack);\r\n\t\t}\r\n\r\n\t\tconst ss = (field + '').split('.');\r\n\t\tif (ss.length <= 1) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\treturn getValue(applyChainSafe(record, (val, name) => getField(val, name, emptyFn), ...ss), setPromiseBack);\r\n\t}\r\n\tfunction setField(record, field, value) {\r\n\t\tif (field in record) {\r\n\t\t\trecord[field] = value;\r\n\t\t} else if (typeof field === 'function') {\r\n\t\t\treturn field(record, value);\r\n\t\t} else if (typeof field === 'string') {\r\n\t\t\tconst ss = (field + '').split('.');\r\n\t\t\tlet obj = record;\r\n\t\t\tconst {length} = ss;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst f = ss[i];\r\n\t\t\t\tif (i === length - 1) {\r\n\t\t\t\t\tobj[f] = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj = obj[f] || (obj[f] = {});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\trecord[field] = value;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\tfunction _getIndex(dataSource, index) {\r\n\t\tif (!dataSource._sortedIndexMap) {\r\n\t\t\treturn index;\r\n\t\t}\r\n\t\tconst mapIndex = dataSource._sortedIndexMap[index];\r\n\t\treturn isDef(mapIndex) ? mapIndex : index;\r\n\t}\r\n\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.DataSource\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass DataSource extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new DataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor({get, length = 0} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._get = get;\r\n\t\t\tthis._length = length;\r\n\t\t\tthis._sortedIndexMap = false;\r\n\t\t}\r\n\t\tget(index) {\r\n\t\t\treturn this.getOriginal(_getIndex(this, index));\r\n\t\t}\r\n\t\tgetField(index, field) {\r\n\t\t\treturn this.getOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\thasField(index, field) {\r\n\t\t\treturn this.hasOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\tsetField(index, field, value) {\r\n\t\t\treturn this.setOriginalField(_getIndex(this, index), field, value);\r\n\t\t}\r\n\t\tsort(field, order) {\r\n\t\t\tconst sortedIndexMap = new Array(this._length);\r\n\r\n\t\t\tconst orderFn = order !== 'desc'\r\n\t\t\t\t? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1\r\n\t\t\t\t: (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\r\n\r\n\t\t\treturn sort.sortPromise(\r\n\t\t\t\t\t(index) => isDef(sortedIndexMap[index])\r\n\t\t\t\t\t\t? sortedIndexMap[index]\r\n\t\t\t\t\t\t: (sortedIndexMap[index] = index),\r\n\t\t\t\t\t(index, rel) => {\r\n\t\t\t\t\t\tsortedIndexMap[index] = rel;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis._length,\r\n\t\t\t\t\torderFn,\r\n\t\t\t\t\t(index) => this.getOriginalField(index, field)\r\n\t\t\t).then(() => {\r\n\t\t\t\tthis._sortedIndexMap = sortedIndexMap;\r\n\t\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n\t\t\t});\r\n\t\t}\r\n\t\tget length() {\r\n\t\t\treturn this._length;\r\n\t\t}\r\n\t\tset length(length) {\r\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._length = length;\r\n\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\treturn getValue(this._get(index), (val) => {\r\n\t\t\t\tthis.recordPromiseCallBackInternal(index, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn getField(record, field, (val) => {\r\n\t\t\t\tthis.fieldPromiseCallBackInternal(index, field, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\thasOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (typeof field === 'function') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn field in record;\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn setField(record, field, value);\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t}\r\n\tDataSource.EMPTY = new DataSource({\r\n\t\tlength: 0,\r\n\t});\r\n\r\n\tmodule.exports = DataSource;\r\n}","'use strict';\r\n{\r\n\tconst {isPromise} = require('./utils');\r\n\r\n\tfunction wait(val) {\r\n\t\treturn val.then((v) => {\r\n\t\t\tif (isPromise(v)) {\r\n\t\t\t\treturn wait(v);\r\n\t\t\t} else {\r\n\t\t\t\treturn v;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction createArray(get, length) {\r\n\t\tconst array = new Array(length);\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tarray[i] = get(i);\r\n\t\t}\r\n\t\treturn array;\r\n\t}\r\n\tfunction createArrayPromise(get, getField, length) {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst plist = [];\r\n\t\t\tconst array = new Array(length);\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst data = get(i);\r\n\t\t\t\tconst record = {\r\n\t\t\t\t\tv: data,\r\n\t\t\t\t\tf: data\r\n\t\t\t\t};\r\n\t\t\t\tarray[i] = record;\r\n\t\t\t\tif (isPromise(data)) {\r\n\t\t\t\t\tplist.push(wait(data).then((v) => {\r\n\t\t\t\t\t\trecord.v = v;\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(\r\n\t\t\t\t\t() => setArrayField(array, getField)\r\n\t\t\t).then(resolve);\r\n\t\t});\r\n\t}\r\n\tfunction setArrayField(array, getField) {\r\n\t\tif (!getField) {\r\n\t\t\treturn Promise.resolve(array);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst length = array.length;\r\n\t\t\tconst plist = [];\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst record = array[i];\r\n\t\t\t\trecord.f = getField(record.v);\r\n\t\t\t\tif (isPromise(record.f)) {\r\n\t\t\t\t\tplist.push(wait(record.f).then((v) => {\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(() => resolve(array));\r\n\t\t});\r\n\t}\r\n\tconst sort = {\r\n\t\tsort(get, set, length, compare, getField) {\r\n\t\t\tconst old = createArray(get, length);\r\n\t\t\tif (getField) {\r\n\t\t\t\told.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n\t\t\t} else {\r\n\t\t\t\told.sort(compare);\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tset(i, old[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortArray(array, compare) {\r\n\t\t\tArray.prototype.sort.call(array, compare);\r\n\t\t},\r\n\t\tsortPromise(get, set, length, compare, getField) {\r\n\t\t\tif (window.Promise) {\r\n\t\t\t\treturn createArrayPromise(get, getField, length).then((array) => {\r\n\t\t\t\t\tarray.sort((r1, r2) => compare(r1.f, r2.f));\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tset(i, array[i].v);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsort.sort(get, set, length, compare, getField);\r\n\t\t\t\tconst dummyPromise = {\r\n\t\t\t\t\tthen(fn) {\r\n\t\t\t\t\t\tfn();\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcatch() {\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn dummyPromise;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = sort;\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {calcStartPosition} = require('./internal/canvases');\r\n\tconst inlines = require('./element/inlines');\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\tconst themes = require('./themes');\r\n\tconst {colorToRGB} = require('./internal/color');\r\n\tconst Rect = require('./internal/Rect');\r\n\tconst {getChainSafe, getOrApply, style: {toBoxArray}} = require('./internal/utils');\r\n\tconst fonts = require('./internal/fonts');\r\n\tconst calc = require('./internal/calc');\r\n\r\n\tfunction invalidateCell(context, grid) {\r\n\t\tconst {col, row} = context;\r\n\t\tgrid.invalidateCell(col, row);\r\n\t}\r\n\tfunction getColor(color, col, row, grid, context) {\r\n\t\treturn getOrApply(color, {\r\n\t\t\tcol,\r\n\t\t\trow,\r\n\t\t\tgrid,\r\n\t\t\tcontext,\r\n\t\t});\r\n\t}\r\n\tfunction getThemeColor(grid, ...names) {\r\n\t\treturn getChainSafe(grid.theme, ...names) || getChainSafe(themes.default, ...names);\r\n\t}\r\n\tfunction testFontLoad(font, value, context, grid) {\r\n\t\tif (font) {\r\n\t\t\tif (!fonts.check(font, value)) {\r\n\t\t\t\tfonts.load(font, value, () => invalidateCell(context, grid));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction drawInlines(ctx, inlines, rect, offset, col, row, grid) {\r\n\t\tfunction drawInline(inline, offsetLeft, offsetRight) {\r\n\t\t\tif (inline.canDraw()) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n\t\t\t\t\tctx.font = inline.font() || ctx.font;\r\n\t\t\t\t\tinline.draw({\r\n\t\t\t\t\t\tctx,\r\n\t\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\t\trect,\r\n\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\t\toffsetRight,\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tinline.onReady(() => grid.invalidateCell(col, row));\r\n\t\t\t\t//noop\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (inlines.length === 1) {\r\n\t\t\t//1\r\n\t\t\tconst inline = inlines[0];\r\n\t\t\tdrawInline(inline, 0, 0);\r\n\t\t} else {\r\n\t\t\tconst inlineWidths = inlines.map((inline) => (inline.width({ctx}) || 0) - 0);\r\n\t\t\tlet offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n\r\n\t\t\tlet offsetLeft = 0;\r\n\t\t\tinlines.forEach((inline, index) => {\r\n\t\t\t\tconst inlineWidth = inlineWidths[index];\r\n\t\t\t\toffsetRight -= inlineWidth;\r\n\t\t\t\tdrawInline(inline, offsetLeft, offsetRight);\r\n\t\t\t\toffsetLeft += inlineWidth;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _inlineRect(grid, ctx, inline, rect, col, row,\r\n\t\t\t{\r\n\t\t\t\toffset,\r\n\t\t\t\tcolor,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons,\r\n\t\t\t} = {}) {\r\n\r\n\t\t//style\r\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tctx.font = font || ctx.font;\r\n\r\n\t\tconst actInlines = inlines.buildInlines(icons, inline);\r\n\t\tdrawInlines(ctx, actInlines, rect, offset, col, row, grid);\r\n\t}\r\n\r\n\r\n\tfunction drawCheckbox(ctx, rect, check, helper,\r\n\t\t\t{\r\n\t\t\t\tanimElapsedTime = 1,\r\n\t\t\t\tuncheckBgColor = helper.theme.checkbox.uncheckBgColor,\r\n\t\t\t\tcheckBgColor = helper.theme.checkbox.checkBgColor,\r\n\t\t\t\tborderColor = helper.theme.checkbox.borderColor,\r\n\t\t\t\ttextAlign = 'center',\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t} = {}) {\r\n\t\tconst boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tconst pos = calcStartPosition(ctx, rect, boxWidth + 1/*+1*/, boxWidth + 1/*+1*/);\r\n\t\tif (0 < animElapsedTime && animElapsedTime < 1) {\r\n\t\t\tconst uncheckBgRGB = colorToRGB(uncheckBgColor);\r\n\t\t\tconst checkBgRGB = colorToRGB(checkBgColor);\r\n\t\t\tconst checkRGB = (colorName) => {\r\n\t\t\t\tconst start = uncheckBgRGB[colorName];\r\n\t\t\t\tconst end = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = start - end;\r\n\t\t\t\treturn Math.ceil(start - diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tconst uncheckRGB = (colorName) => {\r\n\t\t\t\tconst end = uncheckBgRGB[colorName];\r\n\t\t\t\tconst start = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = end - start;\r\n\t\t\t\treturn Math.ceil(start + diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tuncheckBgColor = check ? uncheckBgColor : `rgb(${uncheckRGB('r')} , ${uncheckRGB('g')}, ${uncheckRGB('b')})`;\r\n\t\t\tcheckBgColor = `rgb(${checkRGB('r')} , ${checkRGB('g')}, ${checkRGB('b')})`;\r\n\t\t}\r\n\r\n\t\tcanvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n\t\t\tuncheckBgColor,\r\n\t\t\tcheckBgColor,\r\n\t\t\tborderColor,\r\n\t\t});\r\n\t}\r\n\r\n\tclass Theme {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t}\r\n\t\tgetThemeColor(...name) {\r\n\t\t\treturn getThemeColor(this._grid, ...name);\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn getThemeColor(this._grid, 'font');\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'underlayBackgroundColor');\r\n\t\t}\r\n\t\t// color\r\n\t\tget color() {\r\n\t\t\treturn getThemeColor(this._grid, 'color');\r\n\t\t}\r\n\t\tget frozenRowsColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsColor');\r\n\t\t}\r\n\t\t// background\r\n\t\tget defaultBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'defaultBgColor');\r\n\t\t}\r\n\t\tget frozenRowsBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBgColor');\r\n\t\t}\r\n\t\tget selectionBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'selectionBgColor');\r\n\t\t}\r\n\t\t// border\r\n\t\tget borderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'borderColor');\r\n\t\t}\r\n\t\tget frozenRowsBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBorderColor');\r\n\t\t}\r\n\t\tget hiliteBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'hiliteBorderColor');\r\n\t\t}\r\n\t\tget checkbox() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'uncheckBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'checkBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget borderColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'borderColor');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tget button() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._button || (this._button = {\r\n\t\t\t\tget color() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'color');\r\n\t\t\t\t},\r\n\t\t\t\tget bgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'bgColor');\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\r\n\tfunction strokeRect(ctx, color, left, top, width, height) {\r\n\t\tif (!Array.isArray(color)) {\r\n\t\t\tif (color) {\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst borderColors = toBoxArray(color);\r\n\t\t\tcanvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\tclass GridCanvasHelper {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._theme = new Theme(grid);\r\n\t\t}\r\n\t\tcreateCalculator(context) {\r\n\t\t\treturn {\r\n\t\t\t\tcalcWidth(width) {\r\n\t\t\t\t\treturn calc.toPx(width, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.width;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcalcHeight(height) {\r\n\t\t\t\t\treturn calc.toPx(height, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.height;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetColor(color, col, row, ctx) {\r\n\t\t\treturn getColor(color, col, row, this._grid, ctx);\r\n\t\t}\r\n\t\ttoBoxArray(obj) {\r\n\t\t\treturn toBoxArray(obj);\r\n\t\t}\r\n\t\ttoBoxPixelArray(value, context) {\r\n\t\t\tif (typeof value === 'string' || Array.isArray(value)) {\r\n\t\t\t\tconst calculator = this.createCalculator(context);\r\n\t\t\t\tconst box = toBoxArray(value);\r\n\t\t\t\treturn [\r\n\t\t\t\t\tcalculator.calcHeight(box[0]),\r\n\t\t\t\t\tcalculator.calcWidth(box[1]),\r\n\t\t\t\t\tcalculator.calcHeight(box[2]),\r\n\t\t\t\t\tcalculator.calcWidth(box[3]),\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn toBoxArray(value);\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this._theme;\r\n\t\t}\r\n\t\tdrawWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawBorderWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tlet clipLeft = drawRect.left;\r\n\t\t\t\tlet clipWidth = drawRect.width;\r\n\t\t\t\tif (drawRect.left === rect.left) {\r\n\t\t\t\t\tclipLeft += -1;\r\n\t\t\t\t\tclipWidth += 1;\r\n\t\t\t\t}\r\n\t\t\t\tlet clipTop = drawRect.top;\r\n\t\t\t\tlet clipHeight = drawRect.height;\r\n\t\t\t\tif (drawRect.top === rect.top) {\r\n\t\t\t\t\tclipTop += -1;\r\n\t\t\t\t\tclipHeight += 1;\r\n\t\t\t\t}\r\n\t\t\t\tctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\ttext(text, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tlet rect = context.getRect();\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tif (padding) {\r\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\r\n\t\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\t\t\t\t\trect = new Rect(left, top, width, height);\r\n\t\t\t\t}\r\n\t\t\t\t_inlineRect(this._grid, ctx, text, rect, col, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillText(text, x, y, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'top',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\tctx.fillText(text, x, y);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfillCell(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillCellWithState(context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\t\t\tthis.fillCell(context, option);\r\n\t\t}\r\n\t\tfillRect(rect, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfillRectWithState(rect, context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\r\n\t\t\tthis.fillRect(rect, context, option);\r\n\t\t}\r\n\t\tgetFillColorState(context, option = {}) {\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tif (!state.selected && state.selection) {\r\n\t\t\t\treturn this.theme.selectionBgColor;\r\n\t\t\t} else {\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\treturn this.theme.frozenRowsBgColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn option.fillColor || this.theme.defaultBgColor;\r\n\t\t}\r\n\t\tborder(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tborderColor = this.theme.borderColor,\r\n\t\t\t\t\tlineWidth = 1,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tif (lineWidth === 1) {\r\n\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n\t\t\t\t} else if (lineWidth === 2) {\r\n\t\t\t\t\tctx.lineWidth = 2;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\t\t\tconst startOffset = (lineWidth / 2) - 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors,\r\n\t\t\t\t\t\t\trect.left + startOffset,\r\n\t\t\t\t\t\t\trect.top + startOffset,\r\n\t\t\t\t\t\t\trect.width - lineWidth + 1,\r\n\t\t\t\t\t\t\trect.height - lineWidth + 1\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tborderWithState(context, option = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\t//\r\n\t\t\tif (state.selected) {\r\n\t\t\t\toption.borderColor = this.theme.hiliteBorderColor;\r\n\t\t\t\toption.lineWidth = 2;\r\n\t\t\t\tthis.border(context, option);\r\n\t\t\t} else {\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\toption.borderColor = this.theme.frozenRowsBorderColor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toption.lineWidth = 1;\r\n\t\t\t\tthis.border(context, option);\r\n\r\n\t\t\t\t//\r\n\t\t\t\tconst sel = this._grid.selection.select;\r\n\t\t\t\tif (sel.col + 1 === col && sel.row === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (sel.col === col && sel.row + 1 === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckbox(check, context, option = {}) {\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tdrawCheckbox(ctx, context.getRect(), check, this, option);\r\n\t\t\t});\r\n\t\t}\r\n\t\tbutton(caption, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor = this.theme.button.bgColor,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor = this.theme.button.color,\r\n\t\t\t\t\ttextAlign = 'center',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tpadding = this.toBoxPixelArray(padding || rect.height / 8, context);\r\n\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\r\n\t\t\t\tcanvashelper.drawButton(ctx, left, top, width, height, {\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t\tradius: rect.height / 8,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t});\r\n\t\t\t\t_inlineRect(this._grid, ctx, caption, new Rect(left, top, width, height),\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\ttestFontLoad(font, value, context) {\r\n\t\t\treturn testFontLoad(font, value, context, this._grid);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = GridCanvasHelper;\r\n}","'use strict';\r\n{\r\n\tconst loads = {};\r\n\tconst legacy = !document.fonts;\r\n\tconst load = legacy ? function(font, testStr, callback) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\trequire('./legacy/fontwatch/FontWatchRunner').load(font, testStr, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t}, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t} : function(font, testStr, callback) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdocument.fonts.ready.then(() => {\r\n\t\t\tloads.all = true;\r\n\t\t});\r\n\t\tdocument.fonts.load(font).then(() => {\r\n\t\t\tloads[font] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t};\r\n\tconst check = legacy ? function(font, testStr) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tload(font, testStr, () => {});\r\n\t\treturn false;\r\n\t} : function(font, testStr) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!document.fonts.check(font)) {\r\n\t\t\tload(font, testStr, () => {});\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t\r\n\tmodule.exports = {\r\n\t\tcheck,\r\n\t\tload\r\n\t};\r\n}","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {getCacheOrLoad} = require('../internal/imgs');\r\nconst {isPromise} = require('../internal/utils');\r\n\r\nclass InlineImage extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsrc,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\tthis._src = src;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._imageLeft = imageLeft;\r\n\t\tthis._imageTop = imageTop;\r\n\t\tthis._imageWidth = imageWidth;\r\n\t\tthis._imageHeight = imageHeight;\r\n\r\n\t\tthis._onloaded = [];\r\n\r\n\r\n\t\tthis._loaded = false;\r\n\t\tif (isPromise(src)) {\r\n\t\t\tsrc.then((s) => {\r\n\t\t\t\tthis._src = s;\r\n\t\t\t\tthis._loadImage(s);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loadImage(src);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t_loadImage(src) {\r\n\t\tconst img = this._inlineImg = getCacheOrLoad('InlineImage', 50, src);\r\n\t\tif (isPromise(img)) {\r\n\t\t\timg.then((i) => {\r\n\t\t\t\tthis._loaded = true;\r\n\t\t\t\tthis._inlineImg = i;\r\n\r\n\t\t\t\tthis._onloaded.forEach((fn) => fn());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loaded = true;\r\n\t\t}\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width || (this._loaded ? this._inlineImg.width : 0);\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn this._loaded;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tif (isPromise(this._src) || isPromise(this._inlineImg)) {\r\n\t\t\tthis._onloaded.push(() => callback());\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t}) {\r\n\t\tconst img = this._inlineImg;\r\n\t\tcanvashelper.drawInlineImageRect(ctx, img,\r\n\t\t\t\tthis._imageLeft || 0, this._imageTop || 0,\r\n\t\t\t\tthis._imageWidth || img.width, this._imageHeight || img.height,\r\n\t\t\t\tthis._width || img.width, this._height || img.height,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineImage;","/*eslint-disable camelcase*/\r\n'use strict';\r\n\r\nconst {extend} = require('./internal/utils');\r\nconst plugins = require('./plugins/icons');\r\nconst builtins = {\r\n\tget arrow_upward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg');\r\n\t},\r\n\tget arrow_downward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg');\r\n\t},\r\n\tget edit() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/image/svg/production/ic_edit_48px.svg');\r\n\t},\r\n\tget add() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/content/svg/production/ic_add_48px.svg');\r\n\t},\r\n\tget star() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg');\r\n\t},\r\n\tget star_border() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg');\r\n\t},\r\n\tget star_half() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg');\r\n\t},\r\n};\r\n\r\nmodule.exports = {\r\n\tget() {\r\n\t\treturn extend(builtins, plugins);\r\n\t}\r\n};","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n{\r\n\tconst rgbMap = {};\r\n\tfunction styleColorToRGB(color) {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.color = color;\r\n\t\tstyle.position = 'fixed';\r\n\t\tstyle.height = '1px';\r\n\t\tstyle.width = '1px';\r\n\t\tstyle.opacity = 0;\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {color: styleColor} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn colorToRGB0(styleColor);\r\n\t}\r\n\r\n\tfunction hexToNum(hex) {\r\n\t\treturn parseInt(hex, 16);\r\n\t}\r\n\tfunction createRGB(r, g, b, a = 1) {\r\n\t\treturn {r, g, b, a};\r\n\t}\r\n\tfunction tripleHexToRGB({1: r, 2: g, 3: b}) {\r\n\t\treturn createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n\t}\r\n\tfunction sextupleHexToRGB({1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2}) {\r\n\t\treturn createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n\t}\r\n\t\r\n\tfunction testRGB({r, g, b, a}) {\r\n\t\treturn 0 <= r && r <= 255 &&\r\n\t\t0 <= g && g <= 255 &&\r\n\t\t0 <= b && b <= 255 &&\r\n\t\t0 <= a && a <= 1;\r\n\t}\r\n\tfunction rateToByte(r) {\r\n\t\treturn Math.ceil(r * 255 / 100);\r\n\t}\r\n\tfunction colorToRGB0(color) {\r\n\t\tif (color.match(/^#[0-9a-f]{3}$/i)) {\r\n\t\t\treturn tripleHexToRGB(color);\r\n\t\t}\r\n\t\tif (color.match(/^#[0-9a-f]{6}$/i)) {\r\n\t\t\treturn sextupleHexToRGB(color);\r\n\t\t}\r\n\t\tlet ret = color.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0, ret[4] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]));\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]), ret[7] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction colorToRGB(color) {\r\n\t\tif (typeof color !== 'string') {\r\n\t\t\treturn createRGB(0, 0, 0, 0);\r\n\t\t}\r\n\t\tcolor = color.toLowerCase().trim();\r\n\t\tif (rgbMap[color]) {\r\n\t\t\treturn rgbMap[color];\r\n\t\t}\r\n\t\treturn colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcolorToRGB\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\r\n\tclass BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tthis._headerCell = headerCell;\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\t\t\t//\r\n\t\t\tthis.drawInternal(\r\n\t\t\t\t\tcellValue,\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t\tstyleContents.of(style, this.StyleClass),\r\n\t\t\t\t\thelper,\r\n\t\t\t\t\tgrid,\r\n\t\t\t\t\tinfo\r\n\t\t\t);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseHeader;\r\n}","'use strict';\r\n\r\nconst {extend} = require('../internal/utils');\r\nconst DrawGrid = require('../core/DrawGrid');\r\nconst EVENT_TYPE = extend(DrawGrid.EVENT_TYPE, {\r\n\tCHANGED_VALUE: 'changed_value',\r\n});\r\nmodule.exports = EVENT_TYPE;","'use strict';\r\n\r\n{\r\n\tconst core = require('./core');\r\n\tconst tools = require('./tools');\r\n\tconst columns = require('./columns');\r\n\tconst themes = require('./themes');\r\n\tconst data = require('./data');\r\n\t\r\n\tconst ListGrid = require('./ListGrid');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\t\r\n\tconst icons = require('./icons');\r\n\tconst register = require('./register');\r\n\t\r\n\t/**\r\n\t * Cheetah Grid\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcore,\r\n\t\ttools,\r\n\r\n\t\t// impl Grids\r\n\t\tListGrid,\r\n\r\n\t\t// objects\r\n\t\tcolumns,\r\n\t\tthemes,\r\n\t\tdata,\r\n\r\n\t\t// helper\r\n\t\tGridCanvasHelper,\r\n\t\tget icons() {\r\n\t\t\treturn icons.get();\r\n\t\t},\r\n\r\n\t\t//plugin registers\r\n\t\tregister,\r\n\r\n\t\tget _internal() {\r\n\t\t\tconsole.warn('use internal!!');\r\n\t\t\treturn {\r\n\t\t\t\tcolor: require('./internal/color'),\r\n\t\t\t\tsort: require('./internal/sort'),\r\n\t\t\t\tcalc: require('./internal/calc'),\r\n\t\t\t\tsymbolManager: require('./internal/symbolManager'),\r\n\t\t\t\tpath2DManager: require('./internal/path2DManager'),\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\r\n\t/**\r\n\t * core modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.core\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDrawGrid\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst EventHandler = require('./EventHandler');\r\n\tconst style = require('./style');\r\n\tconst {browser} = require('./utils');\r\n\t\r\n\tconst MAX_SCROLL = browser.heightLimit - 1000;\r\n\r\n\tfunction _update(scrollable) {\r\n\t\tlet domHeight;\r\n\t\tif (scrollable._height > MAX_SCROLL) {\r\n\t\t\tconst sbSize = style.getScrollBarSize();\r\n\t\t\tconst offsetHeight = scrollable._scrollable.offsetHeight;\r\n\t\t\tconst vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n\t\t\tconst rScrollRange = scrollable._height - offsetHeight + sbSize;\r\n\t\t\tscrollable._p = vScrollRange / rScrollRange;\r\n\t\t\tdomHeight = MAX_SCROLL;\r\n\t\t} else {\r\n\t\t\tscrollable._p = 1;\r\n\t\t\tdomHeight = scrollable._height;\r\n\t\t}\r\n\r\n\t\tscrollable._endPointElement.style.top = domHeight.toFixed() + 'px';\r\n\t\tscrollable._endPointElement.style.left = scrollable._width.toFixed() + 'px';\r\n\t\t\r\n\t}\r\n\r\n\tclass Scrollable {\r\n\t\tconstructor() {\r\n\t\t\tthis._handler = new EventHandler();\r\n\r\n\t\t\tthis._scrollable = document.createElement('div');\r\n\t\t\tthis._scrollable.classList.add('grid-scrollable');\r\n\t\t\tthis._height = 0;\r\n\t\t\tthis._width = 0;\r\n\r\n\t\t\tthis._endPointElement = document.createElement('div');\r\n\t\t\tthis._endPointElement.classList.add('grid-scroll-end-point');\r\n\t\t\t_update(this);\r\n\t\t\tthis._scrollable.appendChild(this._endPointElement);\r\n\r\n\t\t\t// const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n\t\t\t// this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n\t\t\t// const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n\t\t\t// const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n\t\t\t// this.scrollTop += delta < 0 ? point : -point;\r\n\t\t\t// });\r\n\t\t}\r\n\t\tcalcTop(top) {\r\n\t\t\tconst relativeTop = top - this.scrollTop;\r\n\t\t\treturn this._scrollable.scrollTop + relativeTop;\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this._scrollable;\r\n\t\t}\r\n\t\tsetScrollSize(width, height) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollWidth() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset scrollWidth(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollHeight() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset scrollHeight(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollLeft() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollLeft);\r\n\t\t}\r\n\t\tset scrollLeft(scrollLeft) {\r\n\t\t\tthis._scrollable.scrollLeft = scrollLeft;\r\n\t\t}\r\n\t\tget scrollTop() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollTop / this._p);\r\n\t\t}\r\n\t\tset scrollTop(scrollTop) {\r\n\t\t\tthis._scrollable.scrollTop = scrollTop * this._p;\r\n\t\t}\r\n\t\tonScroll(fn) {\r\n\t\t\tthis._handler.on(this._scrollable, 'scroll', fn);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = Scrollable;\r\n}","\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n\n// exports\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","'use strict';\r\n{\r\n\tconst indexFirst = (ary, elm) => {\r\n\t\tlet low = 0;\r\n\t\tlet high = ary.length - 1;\r\n\t\twhile (low <= high) {\r\n\t\t\tconst i = Math.floor((low + high) / 2);\r\n\t\t\tif (ary[i] === elm) {\r\n\t\t\t\treturn i;\r\n\t\t\t} else if (ary[i] > elm) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t} else {\r\n\t\t\t\tlow = i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn high < 0 ? 0 : high;\r\n\t};\r\n\r\n\r\n\tclass NumberMap {\r\n\t\tconstructor() {\r\n\t\t\tthis._keys = [];\r\n\t\t\tthis._vals = {};\r\n\t\t\tthis._sorted = false;\r\n\t\t}\r\n\t\tput(key, value) {\r\n\t\t\tif (!(key in this._vals)) {\r\n\t\t\t\tthis._keys.push(key);\r\n\t\t\t\tthis._sorted = false;\r\n\t\t\t}\r\n\t\t\tthis._vals[key] = value;\r\n\t\t}\r\n\t\tget(key) {\r\n\t\t\treturn this._vals[key];\r\n\t\t}\r\n\t\teachAll(fn) {\r\n\t\t\tthis._keys.forEach((key) => {\r\n\t\t\t\tfn(this.get(key), key);\r\n\t\t\t});\r\n\t\t}\r\n\t\teach(keyFrom, keyTo, fn) {\r\n\t\t\tconst {_keys: keys} = this;\r\n\t\t\tconst {length} = keys;\r\n\t\t\tif (!this._sorted) {\r\n\t\t\t\tkeys.sort((a, b) => {\r\n\t\t\t\t\tif (a < b) { return -1; }\r\n\t\t\t\t\tif (a > b) { return 1; }\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tthis._sorted = true;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n\t\t\t\tconst key = keys[i];\r\n\t\t\t\tif (keyFrom <= key && key <= keyTo) {\r\n\t\t\t\t\tfn(this.get(key), key);\r\n\t\t\t\t} else if (keyTo < key) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberMap;\r\n}","'use strict';\r\n\r\nconst EventHandler = require('./EventHandler');\r\nconst handler = new EventHandler();\r\n\r\nlet ratio;\r\nfunction setRatio() {\r\n\tratio = Math.ceil(window.devicePixelRatio || 1);\r\n\tif (ratio > 1 && (ratio % 2) !== 0) {\r\n\t\tratio += 1;\r\n\t}\r\n}\r\nsetRatio();\r\nhandler.on(window, 'resize', setRatio);\r\n\r\nmodule.exports = {\r\n\ttransform(canvas) {\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\tconst getAttribute = canvas.getAttribute;\r\n\t\tcanvas.getAttribute = function(name, ...args) {\r\n\t\t\tlet result = getAttribute.call(this, name, ...args);\r\n\t\t\tif (name === 'width' || name === 'height') {\r\n\t\t\t\tresult /= ratio;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t\tconst setAttribute = canvas.setAttribute;\r\n\t\tcanvas.setAttribute = function(name, val, ...args) {\r\n\t\t\tconst wh = name === 'width' || name === 'height';\r\n\t\t\tif (wh) {\r\n\t\t\t\tval *= ratio;\r\n\t\t\t}\r\n\t\t\tconst result = setAttribute.call(this, name, val, ...args);\r\n\t\t\tif (wh) {\r\n\t\t\t\tctx.scale(ratio, ratio);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tObject.defineProperty(canvas, 'width', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('width');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('width', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tObject.defineProperty(canvas, 'height', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('height');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('height', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tconst drawImage = ctx.drawImage;\r\n\t\tctx.drawImage = function(img, ...args) {\r\n\t\t\tif (img !== canvas || ratio === 1) {\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t}\r\n\t\t\tthis.save();\r\n\t\t\ttry {\r\n\t\t\t\tthis.scale(1 / ratio, 1 / ratio);\r\n\t\t\t\tif (args.length > 4) {\r\n\t\t\t\t\targs[4] = args[4] * ratio;\r\n\t\t\t\t\targs[5] = args[5] * ratio;\r\n\t\t\t\t} else {\r\n\t\t\t\t\targs[0] = args[0] * ratio;\r\n\t\t\t\t\targs[1] = args[1] * ratio;\r\n\t\t\t\t}\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn canvas;\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\r\n\t/**\r\n\t * tools\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcanvashelper,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst BaseAction = require('./action/BaseAction');\r\n\tconst Action = require('./action/Action');\r\n\tconst Editor = require('./action/Editor');\r\n\tconst CheckEditor = require('./action/CheckEditor');\r\n\tconst ButtonAction = require('./action/ButtonAction');\r\n\tconst SmallDialogInputEditor = require('./action/SmallDialogInputEditor');\r\n\tconst InlineInputEditor = require('./action/InlineInputEditor');\r\n\tconst InlineMenuEditor = require('./action/InlineMenuEditor');\r\n\r\n\tclass ImmutableCheckEditor extends CheckEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\tclass ImmutableInputEditor extends SmallDialogInputEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * column actions\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.action\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst action = {\r\n\t\tACTIONS: {\r\n\t\t\tCHECK: new ImmutableCheckEditor(),\r\n\t\t\tINPUT: new ImmutableInputEditor(),\r\n\t\t},\r\n\t\tget BaseAction() {\r\n\t\t\treturn BaseAction;\r\n\t\t},\r\n\t\tget Editor() {\r\n\t\t\treturn Editor;\r\n\t\t},\r\n\t\tget Action() {\r\n\t\t\treturn Action;\r\n\t\t},\r\n\t\tget CheckEditor() {\r\n\t\t\treturn CheckEditor;\r\n\t\t},\r\n\t\tget ButtonAction() {\r\n\t\t\treturn ButtonAction;\r\n\t\t},\r\n\t\tget SmallDialogInputEditor() {\r\n\t\t\treturn SmallDialogInputEditor;\r\n\t\t},\r\n\t\tget InlineInputEditor() {\r\n\t\t\tconsole.warn('InlineInputEditor is an experiment stage');\r\n\t\t\treturn InlineInputEditor;\r\n\t\t},\r\n\t\tget InlineMenuEditor() {\r\n\t\t\treturn InlineMenuEditor;\r\n\t\t},\r\n\t\tof(columnAction) {\r\n\t\t\tif (!columnAction) {\r\n\t\t\t\treturn action.ACTIONS.DEFAULT;\r\n\t\t\t} else if (typeof columnAction === 'string') {\r\n\t\t\t\treturn action.ACTIONS[columnAction.toUpperCase()] || action.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnAction;\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\tmodule.exports = action;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}, isPromise} = require('../../internal/utils');\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\tconst animate = require('../../internal/animate');\r\n\r\n\tconst Editor = require('./Editor');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_SPACE = 32;\r\n\r\n\tfunction toggleValue(val) {\r\n\t\tif (typeof val === 'number') {\r\n\t\t\tif (val === 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t} else if (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn 'true';\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn 'on';\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)0$/, '$11');\r\n\t\t\t} else if (val === 'true') {\r\n\t\t\t\treturn 'false';\r\n\t\t\t} else if (val === 'on') {\r\n\t\t\t\treturn 'off';\r\n\t\t\t} else if (val.match(/^0*1$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)1$/, '$10');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !val;\r\n\t}\r\n\r\n\tclass CheckEditor extends Editor {\r\n\t\tclone() {\r\n\t\t\treturn new CheckEditor(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tif (!grid[CHECK_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, CHECK_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID];\r\n\t\t\t\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tconst key = cell.col + ':' + cell.row;\r\n\t\t\t\tconst blockKey = key + '::block';\r\n\t\t\t\tif (this.readOnly || this.disabled || state[blockKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst ret = grid.doChangeValue(cell.col, cell.row, toggleValue);\r\n\t\t\t\tif (ret) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst onChange = () => {\r\n\t\t\t\t\t\t// checkbox animation\r\n\t\t\t\t\t\tanimate(200, (point) => {\r\n\t\t\t\t\t\t\tif (point === 1) {\r\n\t\t\t\t\t\t\t\tdelete state[key];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstate[key] = {\r\n\t\t\t\t\t\t\t\t\telapsed: point,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgrid.invalidateCell(cell.col, cell.row);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (isPromise(ret)) {\r\n\t\t\t\t\t\tstate[blockKey] = true;\r\n\t\t\t\t\t\tret.then(() => {\r\n\t\t\t\t\t\t\tdelete state[blockKey];\r\n\t\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction: (e) => {\r\n\t\t\t\t\t\tconst selrange = grid.selection.range;\r\n\t\t\t\t\t\tconst col = grid.selection.select.col;\r\n\t\t\t\t\t\tfor (let row = selrange.start.row; row <= selrange.end.row; row++) {\r\n\t\t\t\t\t\t\tif (!util.isTarget(col, row)) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taction({\r\n\t\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tacceptKeys: [KEY_ENTER, KEY_SPACE],\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckEditor;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst Action = require('./Action');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tclass ButtonAction extends Action {\r\n\t\tgetState(grid) {\r\n\t\t\tif (!grid[BUTTON_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, BUTTON_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\treturn grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonAction;\r\n}","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\t\r\nconst SmallDialogInputElement = require('./internal/SmallDialogInputElement');\r\nconst {SMALL_DIALOG_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new SmallDialogInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nclass SmallDialogInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._helperText = option.helperText;\r\n\t\tthis._inputValidator = option.inputValidator;\r\n\t\tthis._validator = option.validator;\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tdispose() {\r\n\t\tthis._inputDialogManager.dispose();\r\n\t\tthis._inputDialogManager = null;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tget helperText() {\r\n\t\treturn this._helperText;\r\n\t}\r\n\tget inputValidator() {\r\n\t\treturn this._inputValidator;\r\n\t}\r\n\tget validator() {\r\n\t\treturn this._validator;\r\n\t}\r\n\tclone() {\r\n\t\treturn new SmallDialogInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t// cancel input\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tSmallDialogInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputEditor;","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n\tthen,\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__small-dialog-input';\r\nconst INPUT_CLASSNAME = CLASSNAME + '__input';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\n\r\nfunction _focus(input, handler) {\r\n\tconst focus = () => {\r\n\t\tinput.focus();\r\n\r\n\t\tconst end = input.value.length;\r\n\t\ttry {\r\n\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t}\r\n\t\tif (document.selection) {\r\n\t\t\tconst range = input.createTextRange();\r\n\t\t\trange.collapse();\r\n\t\t\trange.moveEnd('character', end);\r\n\t\t\trange.moveStart('character', end);\r\n\t\t\trange.select();\r\n\t\t}\r\n\t};\r\n\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\tfocus();\r\n\t});\r\n}\r\n\r\nfunction createDialogElement() {\r\n\trequire('./SmallDialogInputElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst input = createElement('input', {classList: INPUT_CLASSNAME});\r\n\tinput.readonly = true;\r\n\tinput.tabIndex = -1;\r\n\telement.appendChild(input);\r\n\treturn element;\r\n}\r\n\r\nfunction bindProps(grid, dialog, input, editor) {\r\n\tconst {classList, helperText} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.add(...classList);\r\n\t}\r\n\tif (helperText && typeof helperText !== 'function') {\r\n\t\tdialog.dataset.helperText = helperText;\r\n\t}\r\n\tsetInputAttrs(editor, grid, input);\r\n}\r\n\r\nfunction unbindProps(grid, dialog, input, editor) {\r\n\tconst {classList} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.remove(...classList);\r\n\t}\r\n\tdelete dialog.dataset.helperText;\r\n\tinput.type = '';\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {type} = editor;\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass SmallDialogInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._dialog = createDialogElement();\r\n\t\tthis._input = this._dialog.querySelector('.' + INPUT_CLASSNAME);\r\n\t\tthis._bindDialogEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._dialog = null;\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (dialog.parentElement) {\r\n\t\t\tdialog.parentElement.removeChild(dialog);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tunbindProps(grid, dialog, input, this._beforePropEditor);\r\n\t\t}\r\n\r\n\t\tdelete dialog.dataset.errorMessage;\r\n\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = false;\r\n\t\tinput.tabIndex = 0;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tdialog.style.top = rect.top.toFixed() + 'px';\r\n\t\tdialog.style.left = rect.left.toFixed() + 'px';\r\n\t\tdialog.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(dialog);\r\n\t\t\t\r\n\t\tinput.value = value;\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\t\tconst activeData = {grid, col, row, editor};\r\n\t\tthis._onInputValue(input, activeData);\r\n\t\t_focus(input, handler);\r\n\t\tdialog.classList.add(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.remove(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = true;\r\n\r\n\t\t\r\n\t\tbindProps(grid, dialog, input, editor);\r\n\r\n\t\tthis._activeData = activeData;\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst dialog = this._dialog;\r\n\t\t\tconst input = this._input;\r\n\r\n\t\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\t\tinput.readonly = false;\r\n\t\t\tinput.tabIndex = -1;\r\n\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t\tthis._beforeValue = null;\r\n\t}\r\n\t_doChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\treturn then(this._validate(value), (res) => {\r\n\t\t\tif (res && value === input.value) {\r\n\t\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\tgrid.doChangeValue(col, row, () => value);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\t_isActive() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tif (!dialog || !dialog.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindDialogEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(dialog, 'click', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'dblclick', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'touchstart', stopPropagationOnly);\r\n\t\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t\tthis._onInputValue(input);\r\n\t\t});\r\n\t\tconst onKeyupAndPress = (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._onInputValue(input);\r\n\t\t};\r\n\t\thandler.on(input, 'keyup', onKeyupAndPress);\r\n\t\thandler.on(input, 'keypress', onKeyupAndPress);\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst input = this._input;\r\n\t\t\t\tconst {value} = input;\r\n\t\t\t\tthen(this._doChangeValue(), (r) => {\r\n\t\t\t\t\tif (r && value === input.value) {\r\n\t\t\t\t\t\tthis.detach(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else {\r\n\t\t\t\tthis._onInputValue(input);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t_onInputValue(input, activeData) {\r\n\t\tconst before = this._beforeValue;\r\n\t\tconst {value} = input;\r\n\t\tif (before !== value) {\r\n\t\t\tthis._onInputValueChange(value, before, activeData);\r\n\t\t}\r\n\t\tthis._beforeValue = value;\r\n\t}\r\n\t_onInputValueChange(after, before, activeData) {\r\n\t\tactiveData = activeData || this._activeData;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst {grid, col, row, editor} = activeData;\r\n\t\tif (typeof editor.helperText === 'function') {\r\n\t\t\tconst helperText = editor.helperText(after, {grid, col, row});\r\n\t\t\tif (helperText) {\r\n\t\t\t\tdialog.dataset.helperText = helperText;\r\n\t\t\t} else {\r\n\t\t\t\tdelete dialog.dataset.helperText;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ('errorMessage' in dialog.dataset) {\r\n\t\t\tthis._validate(after, true);\r\n\t\t}\r\n\t}\r\n\t_validate(value, inputOnly) {\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tlet message = null;\r\n\t\tif (editor.inputValidator) {\r\n\t\t\tmessage = editor.inputValidator(value, {grid, col, row});\r\n\t\t}\r\n\t\treturn then(message, (message) => {\r\n\t\t\tif (!message && editor.validator && !inputOnly) {\r\n\t\t\t\tmessage = editor.validator(value, {grid, col, row});\r\n\t\t\t}\r\n\t\t\treturn then(message, (message) => {\r\n\t\t\t\tif (message && value === input.value) {\r\n\t\t\t\t\tdialog.dataset.errorMessage = message;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete dialog.dataset.errorMessage;\r\n\t\t\t\t}\r\n\t\t\t\treturn !message;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n\n// exports\n","'use strict';\r\n\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nconst InlineInputElement = require('./internal/InlineInputElement');\r\nconst {INLINE_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nfunction doChangeValue(grid) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.doChangeValue();\r\n\t}\r\n}\r\n\r\n\r\nclass InlineInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tInlineInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputEditor;","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\nconst KEY_ENTER = 13;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-input';\r\n\r\nfunction createInputElement() {\r\n\trequire('./InlineInputElement.css');\r\n\treturn createElement('input', {classList: CLASSNAME});\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {classList, type} = editor;\r\n\tif (classList) {\r\n\t\tinput.classList.add(...classList);\r\n\t}\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass InlineInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._input = createInputElement();\r\n\t\tthis._bindInputEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst input = this._input;\r\n\t\tconst handler = this._handler;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tinput.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tinput.style.top = rect.top.toFixed() + 'px';\r\n\t\tinput.style.left = rect.left.toFixed() + 'px';\r\n\t\tinput.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(input);\r\n\r\n\t\tsetInputAttrs(editor, grid, input);\r\n\t\tinput.value = value;\r\n\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\r\n\t\tconst focus = () => {\r\n\t\t\tinput.focus();\r\n\r\n\t\t\tconst end = input.value.length;\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t\t}\r\n\t\t\tif (document.selection) {\r\n\t\t\t\tconst range = input.createTextRange();\r\n\t\t\t\trange.collapse();\r\n\t\t\t\trange.moveEnd('character', end);\r\n\t\t\t\trange.moveStart('character', end);\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t};\r\n\t\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\tfocus();\r\n\t\t});\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst input = this._input;\r\n\t\t\tthis._handler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\t\tinput.parentElement.removeChild(input);\r\n\t\t\t});\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\tdoChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\tconst {grid, col, row} = this._activeData;\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst input = this._input;\r\n\t\tif (!input || !input.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindInputEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(input, 'click', stopPropagationOnly);\r\n\t\thandler.on(input, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(input, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(input, 'dblclick', stopPropagationOnly);\r\n\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (getKeyCode(e) === KEY_ENTER) {\r\n\t\t\t\tif (!this._isActive()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {grid} = this._activeData;\r\n\r\n\t\t\t\tthis.doChangeValue();\r\n\t\t\t\tif (grid) {\r\n\t\t\t\t\tgrid.focus();\r\n\t\t\t\t}\r\n\t\t\t\tthis.detach();\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\thandler.on(input, 'blur', (e) => {\r\n\t\t\tthis.doChangeValue();\r\n\t\t\tthis.detach();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}\", \"\"]);\n\n// exports\n","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst {normalize} = require('../../internal/menu-items');\r\n\t\r\nconst Editor = require('./Editor');\r\nconst {EVENT_TYPE: {\r\n\tSELECTED_CELL,\r\n\tCLICK_CELL,\r\n\tKEYDOWN,\r\n\tSCROLL,\r\n\tMOUSEOVER_CELL,\r\n\tMOUSEOUT_CELL,\r\n\tMOUSEMOVE_CELL,\r\n}} = require('../../core/DrawGrid');\r\nconst InlineMenuElement = require('./internal/InlineMenuElement');\r\nconst {INLINE_MENU_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineMenuElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\n\r\nclass InlineMenuEditor extends Editor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._options = normalize(option.options);\r\n\t}\r\n\tdispose() {\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget options() {\r\n\t\treturn this._options;\r\n\t}\r\n\tset options(options) {\r\n\t\tthis._options = normalize(options);\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineMenuEditor(this);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tbindGridEvent(grid, col, util) {\r\n\t\tconst open = (cell) => {\r\n\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\t\tattachMenu(grid, cell, this, value);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn [\r\n\t\t\tgrid.listen(CLICK_CELL, (cell) => {\r\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\trow: cell.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\tdetachMenu();\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\tdetachMenu(true);\r\n\t\t\t}),\r\n\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuEditor;","'use strict';\r\nconst {\r\n\tisDef,\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t}\r\n} = require('../../../internal/utils');\r\n\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n\tappendHtml,\r\n\tempty,\r\n\tdisableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n} = require('../../../internal/dom');\r\n\t\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-menu';\r\nconst ITEM_CLASSNAME = CLASSNAME + '__menu-item';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\nconst EMPTY_ITEM_CLASSNAME = ITEM_CLASSNAME + '--empty';\r\n\r\nfunction findItemParents(target) {\r\n\tlet el = target;\r\n\twhile (!el.classList.contains(ITEM_CLASSNAME)) {\r\n\t\tel = el.parentElement;\r\n\t\tif (!el || el.classList.contains(CLASSNAME)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\treturn el;\r\n}\r\n\r\nfunction createMenuElement() {\r\n\trequire('./InlineMenuElement.css');\r\n\treturn createElement('ul', {classList: CLASSNAME});\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n\tmenu.style.top = rect.top.toFixed() + 'px';\r\n\tmenu.style.left = rect.left.toFixed() + 'px';\r\n\tmenu.style.width = rect.width.toFixed() + 'px';\r\n\tmenu.style['line-height'] = rect.height.toFixed() + 'px';\r\n\telement.appendChild(menu);\r\n}\r\n\r\nfunction optionToLi({classList, caption, value, html}, index) {\r\n\tconst item = createElement('li', {classList: ITEM_CLASSNAME});\r\n\titem.tabIndex = 0;\r\n\titem.dataset.valueindex = index;\r\n\tif (classList) {\r\n\t\titem.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n\t}\r\n\r\n\tif (caption) {\r\n\t\tconst span = createElement('span', {text: caption});\r\n\t\titem.appendChild(span);\r\n\t} else if (html) {\r\n\t\tappendHtml(item, html);\r\n\t}\r\n\r\n\tif (value === '' || !isDef(value)) {\r\n\t\titem.classList.add(EMPTY_ITEM_CLASSNAME);\r\n\t}\r\n\r\n\treturn item;\r\n}\r\n\r\nfunction openMenu(grid, editor, col, row, value, menu) {\r\n\tconst {options, classList} = editor;\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tempty(menu);\r\n\tmenu.style.font = grid.font || '16px sans-serif';\r\n\tlet emptyItemEl = null;\r\n\tlet valueItemEl = null;\r\n\t\t\r\n\toptions.forEach((option, i) => {\r\n\t\tconst item = optionToLi(option, i);\r\n\t\tmenu.appendChild(item);\r\n\t\tif (option.value === value) {\r\n\t\t\tvalueItemEl = item;\r\n\t\t\titem.dataset.select = true;\r\n\t\t}\r\n\t\tif (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n\t\t\temptyItemEl = item;\r\n\t\t}\r\n\t});\r\n\tconst focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n\tif (classList) {\r\n\t\tmenu.classList.add(...classList);\r\n\t}\r\n\tconst children = Array.prototype.slice.call(menu.children, 0);\r\n\tconst focusIndex = children.indexOf(focusEl);\r\n\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t// Cover the right line\r\n\trect.width++;\r\n\r\n\t// append for calculation\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Make the selection item at the middle\r\n\tlet offset = 0;\r\n\tlet allHeight = 0;\r\n\tfor (let i = 0; i < children.length; i++) {\r\n\t\tconst offsetHeight = children[i].offsetHeight;\r\n\t\tif (i < focusIndex) {\r\n\t\t\toffset += offsetHeight;\r\n\t\t}\r\n\t\tallHeight += offsetHeight;\r\n\t}\r\n\trect.offsetTop(-offset);\r\n\tmenu.style['transform-origin'] = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Control not to overflow the screen range\r\n\tconst menuClientRect = menu.getBoundingClientRect();\r\n\tconst scaleDiff = ((allHeight - menuClientRect.height) / 2);\r\n\tconst orgMenuTop = menuClientRect.top - scaleDiff;\r\n\tlet menuTop = orgMenuTop;\r\n\tconst menuBottom = menuTop + allHeight;\r\n\tconst winBottom = window.innerHeight;\r\n\tconst winMargin = 20;\r\n\tif (menuBottom > (winBottom - winMargin)) {\r\n\t\tconst diff = menuBottom - winBottom + winMargin;\r\n\t\tmenuTop -= diff;\r\n\t}\r\n\tif (menuTop < 0/*winTop*/ + winMargin) {\r\n\t\tmenuTop = winMargin;\r\n\t}\r\n\tif (menuTop !== orgMenuTop) {\r\n\t\trect.offsetTop(-(orgMenuTop - menuTop));\r\n\t\t// re update\r\n\t\tattachElement(element, rect, menu);\r\n\t}\r\n\t\t\r\n\tif (focusEl) {\r\n\t\tfocusEl.focus();\r\n\t}\r\n\tmenu.classList.remove(HIDDEN_CLASSNAME);\r\n\tmenu.classList.add(SHOWN_CLASSNAME);\r\n}\r\n\r\nfunction closeMenu(grid, col, row, menu) {\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tdisableFocus(menu);\r\n}\r\n\r\nclass InlineMenuElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._menu = createMenuElement();\r\n\t\tthis._bindMenuEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst menu = this._menu;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._menu = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (menu.parentElement) {\r\n\t\t\tmenu.parentElement.removeChild(menu);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tmenu.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\topenMenu(grid, editor, col, row, value, menu);\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst menu = this._menu;\r\n\t\t\tcloseMenu(grid, col, row, menu);\r\n\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\t_doChangeValue(valueindex) {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tconst {value} = editor.options[valueindex];\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst menu = this._menu;\r\n\t\tif (!menu || !menu.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindMenuEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\t\r\n\t\thandler.on(menu, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(menu, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(menu, 'dblclick', stopPropagationOnly);\r\n\r\n\t\thandler.on(menu, 'click', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\tthis._doChangeValue(item.dataset.valueindex);\r\n\t\t\tthis.detach(true);\r\n\t\t});\r\n\t\thandler.on(menu, 'keydown', (e) => {\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\t\tthis._doChangeValue(valueindex);\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\t\tconst n = findPrevSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\t\tconst n = findNextSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_TAB) {\r\n\t\t\t\tif (!e.shiftKey) {\r\n\t\t\t\t\tif (!findNextSiblingFocusable(item)) {\r\n\t\t\t\t\t\tlet n = menu.querySelector('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findNextSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!findPrevSiblingFocusable(item)) {\r\n\t\t\t\t\t\tconst items = menu.querySelectorAll('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tlet n = items[items.length - 1];\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findPrevSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n\n// exports\n","'use strict';\r\n{\r\n\tconst Column = require('./type/Column');\r\n\tconst NumberColumn = require('./type/NumberColumn');\r\n\tconst CheckColumn = require('./type/CheckColumn');\r\n\tconst ButtonColumn = require('./type/ButtonColumn');\r\n\tconst ImageColumn = require('./type/ImageColumn');\r\n\tconst PercentCompleteBarColumn = require('./type/PercentCompleteBarColumn');\r\n\tconst IconColumn = require('./type/IconColumn');\r\n\tconst BranchGraphColumn = require('./type/BranchGraphColumn');\r\n\tconst MenuColumn = require('./type/MenuColumn');\r\n\r\n\t/**\r\n\t * column types\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.type\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst type = {\r\n\t\tTYPES: {\r\n\t\t\tDEFAULT: new Column(),\r\n\t\t\tNUMBER: new NumberColumn(),\r\n\t\t\tCHECK: new CheckColumn(),\r\n\t\t\tBUTTON: new ButtonColumn(),\r\n\t\t\tIMAGE: new ImageColumn(),\r\n\t\t},\r\n\t\tget Column() {\r\n\t\t\treturn Column;\r\n\t\t},\r\n\t\tget NumberColumn() {\r\n\t\t\treturn NumberColumn;\r\n\t\t},\r\n\t\tget CheckColumn() {\r\n\t\t\treturn CheckColumn;\r\n\t\t},\r\n\t\tget ButtonColumn() {\r\n\t\t\treturn ButtonColumn;\r\n\t\t},\r\n\t\tget ImageColumn() {\r\n\t\t\treturn ImageColumn;\r\n\t\t},\r\n\t\tget PercentCompleteBarColumn() {\r\n\t\t\treturn PercentCompleteBarColumn;\r\n\t\t},\r\n\t\tget IconColumn() {\r\n\t\t\treturn IconColumn;\r\n\t\t},\r\n\t\tget BranchGraphColumn() {\r\n\t\t\treturn BranchGraphColumn;\r\n\t\t},\r\n\t\tget MenuColumn() {\r\n\t\t\treturn MenuColumn;\r\n\t\t},\r\n\t\tof(columnType) {\r\n\t\t\tif (!columnType) {\r\n\t\t\t\treturn type.TYPES.DEFAULT;\r\n\t\t\t} else if (typeof columnType === 'string') {\r\n\t\t\t\treturn type.TYPES[columnType.toUpperCase()] || type.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnType;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst NumberStyle = require('../style/NumberStyle');\r\n\tlet defaultFotmat;\r\n\tclass NumberColumn extends Column {\r\n\t\tstatic get defaultFotmat() {\r\n\t\t\treturn defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n\t\t}\r\n\t\tstatic set defaultFotmat(fmt) {\r\n\t\t\tdefaultFotmat = fmt;\r\n\t\t}\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._format = option.format;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn NumberStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberColumn(this);\r\n\t\t}\r\n\t\tget format() {\r\n\t\t\treturn this._format;\r\n\t\t}\r\n\t\twithFormat(format) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._format = format;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\tif (isNaN(value - 0)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t\tconst format = this._format || NumberColumn.defaultFotmat;\r\n\t\t\treturn format.format(value - 0);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberColumn;\r\n}","'use strict';\r\n{\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst CheckStyle = require('../style/CheckStyle');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\t\r\n\r\n\tfunction toBoolean(val) {\r\n\t\tif (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\r\n\tclass CheckColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn CheckStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn toBoolean(value);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tconst key = col + ':' + row;\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID] && grid[CHECK_COLUMN_STATE_ID][key];\r\n\t\t\t\r\n\t\t\tconst opt = {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t};\r\n\t\t\tif (state) {\r\n\t\t\t\topt.animElapsedTime = state.elapsed;\r\n\t\t\t}\r\n\t\t\thelper.checkbox(value, context, opt);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckColumn;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst ButtonStyle = require('../style/ButtonStyle');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tconst utils = require('./columnUtils');\r\n\t\r\n\r\n\tclass ButtonColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._caption = option.caption;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t}\r\n\t\tget caption() {\r\n\t\t\treturn this._caption;\r\n\t\t}\r\n\t\twithCaption(caption) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._caption = caption;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn this._caption || value;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tlet active = false;\r\n\t\t\tconst state = grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t\tif (state) {\r\n\t\t\t\tif (state.mouseActiveCell &&\r\n\t\t\t\t\tstate.mouseActiveCell.col === col &&\r\n\t\t\t\t\tstate.mouseActiveCell.row === row) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t} else if (context.getSelectState().selected) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.button(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tbgColor: buttonBgColor,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\tshadow: active ? {\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.48)',\r\n\t\t\t\t\t\tblur: 6,\r\n\t\t\t\t\t\toffsetY: 3,\r\n\t\t\t\t\t} : true,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonColumn;\r\n}","'use strict';\r\n{\r\n\tconst ImageStyle = require('../style/ImageStyle');\r\n\tconst {getCacheOrLoad} = require('../../internal/imgs');\r\n\tconst {calcStartPosition} = require('../../internal/canvases');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\r\n\tconst MAX_LRU_CACHE_SIZE = 50;\r\n\tfunction getImage(url) {\r\n\t\treturn getCacheOrLoad('ImageColumn', MAX_LRU_CACHE_SIZE, url);\r\n\t}\r\n\r\n\tfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n\t\tlet newWidth = width;\r\n\t\tlet newHeight = height;\r\n\t\tif (newWidth > maxWidth) {\r\n\t\t\tnewWidth = maxWidth;\r\n\t\t\tnewHeight = (newWidth * height) / width;\r\n\t\t}\r\n\t\tif (newHeight > maxHeight) {\r\n\t\t\tnewHeight = maxHeight;\r\n\t\t\tnewWidth = (newHeight * width) / height;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\twidth: newWidth,\r\n\t\t\theight: newHeight,\r\n\t\t};\r\n\t}\r\n\r\n\tclass ImageColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn ImageStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\treturn super.onDrawCell(getImage(cellValue), info, context, grid);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tif (value) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tmargin,\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t} = style;\r\n\t\t\t\tif (bgColor) {\r\n\t\t\t\t\tdrawCellBase({\r\n\t\t\t\t\t\tbgColor,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\tif (style.imageSizing === 'keep-aspect-ratio') {\r\n\t\t\t\t\t\tconst {width, height} = calcKeepAspectRatioSize(\r\n\t\t\t\t\t\t\t\tvalue.width, value.height,\r\n\t\t\t\t\t\t\t\trect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst pos = calcStartPosition(ctx, rect, width, height, {\r\n\t\t\t\t\t\t\toffset: margin,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\tpos.x, pos.y, width, height\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\trect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageColumn;\r\n}","'use strict';\r\n\r\nclass LRUCache {\r\n\tconstructor(cacheSize) {\r\n\t\tthis._list = [];\r\n\t\tthis._map = {};\r\n\t\tthis._cacheSize = cacheSize || 50;\r\n\t}\r\n\tget(key) {\r\n\t\tconst val = this._map[key];\r\n\t\tif (val) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t\tthis._list.push(key);\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\tput(key, value) {\r\n\t\tif (this._map[key]) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t}\r\n\t\tthis._map[key] = value;\r\n\t\tthis._list.push(key);\r\n\t\tif (this._list.length > this._cacheSize) {\r\n\t\t\tconst remKey = this._list.shift();\r\n\t\t\tdelete this._map[remKey];\r\n\t\t}\r\n\t}\r\n}\r\nmodule.exports = LRUCache;","'use strict';\r\n{\r\n\tconst PercentCompleteBarStyle = require('../style/PercentCompleteBarStyle');\r\n\tconst {getOrApply, str} = require('../../internal/utils');\r\n\tconst Column = require('./Column');\r\n\t\r\n\r\n\tconst MARGIN = 2;\r\n\r\n\tclass PercentCompleteBarColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._min = option.min || 0;\r\n\t\t\tthis._max = option.max || (this._min + 100);\r\n\t\t\tthis._formatter = option.formatter || ((v) => v);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tsuper.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n\t\t\tconst {\r\n\t\t\t\tbarColor,\r\n\t\t\t\tbarBgColor,\r\n\t\t\t\tbarHeight,\r\n\t\t\t} = style;\r\n\r\n\t\t\tlet svalue = value + '';\r\n\t\t\tif (str.endsWith(svalue, '%')) {\r\n\t\t\t\tsvalue = svalue.substr(0, svalue.length - 1);\r\n\t\t\t}\r\n\t\t\tconst num = svalue - 0;\r\n\t\t\tconst rate = num < this._min ? 0\r\n\t\t\t\t: num > this._max ? 1\r\n\t\t\t\t: (num - this._min) / (this._max - this._min);\r\n\t\t\t\r\n\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\t\tconst barMaxWidth = rect.width - MARGIN * 2 - 1/**/;\r\n\t\t\t\tconst barTop = rect.bottom - MARGIN - barHeight - 1/**/;\r\n\t\t\t\tconst barLeft = rect.left + MARGIN;\r\n\t\t\t\tctx.fillStyle = getOrApply(barBgColor, rate * 100) || '#f0f3f5';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n\t\t\t\tctx.fill();\r\n\r\n\r\n\t\t\t\tconst barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n\t\t\t\tctx.fillStyle = getOrApply(barColor, rate * 100) || '#20a8d8';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barSize, barHeight);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarColumn;\r\n}","'use strict';\r\n{\r\n\tconst IconStyle = require('../style/IconStyle');\r\n\tconst Column = require('./Column');\r\n\tconst icons = require('../../internal/icons');\r\n\r\n\tfunction repeatArray(val, count) {\r\n\t\tif (count === Infinity) {\r\n\t\t\tcount = 0;\r\n\t\t}\r\n\t\tconst a = [];\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\ta.push(val);\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tclass IconColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._tagName = option.tagName || 'i';\r\n\t\t\tthis._className = option.className;\r\n\t\t\tthis._content = option.content;\r\n\t\t\tthis._name = option.name;\r\n\t\t\tthis._iconWidth = option.iconWidth;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn IconStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tconst num = value - 0;\r\n\t\t\tif (!isNaN(num)) {\r\n\t\t\t\tconst icon = {};\r\n\t\t\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\t\t\ticon[k] = style[k];\r\n\t\t\t\t});\r\n\t\t\t\ticon.className = this._className;\r\n\t\t\t\ticon.tagName = this._tagName;\r\n\t\t\t\ticon.content = this._content;\r\n\t\t\t\ticon.name = this._name;\r\n\t\t\t\tif (this._iconWidth) {\r\n\t\t\t\t\ticon.width = this._iconWidth;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tinfo.getIcon = () => repeatArray(icon, num);\r\n\t\t\t} else {\r\n\t\t\t\tinfo.getIcon = () => null;\r\n\t\t\t}\r\n\t\t\tsuper.drawInternal('', context, style, helper, grid, info);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = IconColumn;\r\n}","'use strict';\r\nconst {isDef, getOrApply, isPromise, obj: {isObject}} = require('../../internal/utils');\r\nconst BranchGraphStyle = require('../style/BranchGraphStyle');\r\nconst BaseColumn = require('./BaseColumn');\r\nconst {BRANCH_GRAPH_COLUMN_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nfunction getAllColumnData(grid, col, callback) {\r\n\tconst dataSource = grid.dataSource;\r\n\tlet field = grid.getField(col);\r\n\tif (isObject(field) && field.get && field.set) {\r\n\t\tfield = field.get;\r\n\t}\r\n\tconst allData = [];\r\n\tlet promise;\r\n\tfor (let index = 0; index < dataSource.length; index++) {\r\n\t\tconst data = dataSource.getField(index, field);\r\n\t\tif (isPromise(data)) {\r\n\t\t\tconst dataIndex = allData.length;\r\n\t\t\tallData.push(data);\r\n\t\t\tif (!promise) {\r\n\t\t\t\tpromise = data.then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tpromise = promise.then(() => data).then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallData.push(data);\r\n\t\t}\r\n\t}\r\n\r\n\tif (promise) {\r\n\t\tpromise.then(() => callback(allData));\r\n\t} else {\r\n\t\tcallback(allData);\r\n\t}\r\n}\r\n\r\nclass BranchLine {\r\n\tconstructor({fromIndex, toIndex, colorIndex, point}) {\r\n\t\tthis.fromIndex = fromIndex;\r\n\t\tthis.toIndex = toIndex;\r\n\t\tthis.colorIndex = colorIndex;\r\n\t\tthis.point = point;\r\n\t}\r\n}\r\nclass BranchPoint {\r\n\tconstructor({index, commit = false, lines = [], tag}) {\r\n\t\tthis.index = index;\r\n\t\tthis.commit = commit;\r\n\t\tthis.lines = lines;\r\n\t\tthis.tag = tag;\r\n\t}\r\n\tstatic mergeLines(lines) {\r\n\t\tconst result = lines.filter(((l) => isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\t\t\r\n\t\tconst froms = lines.filter(((l) => isDef(l.fromIndex) && !isDef(l.toIndex)));\r\n\t\tconst tos = lines.filter(((l) => !isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\r\n\t\tfroms.forEach((f) => {\r\n\t\t\tfor (let i = 0; i < tos.length; i++) {\r\n\t\t\t\tconst t = tos[i];\r\n\t\t\t\tif (t.point) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (f.colorIndex === t.colorIndex) {\r\n\t\t\t\t\tf.toIndex = t.toIndex;\r\n\t\t\t\t\ttos.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult.push(f);\r\n\t\t});\r\n\r\n\t\treturn result.concat(tos);\r\n\t}\r\n\tstatic merge(a, b) {\r\n\t\tif (!a) {\r\n\t\t\treturn b;\r\n\t\t}\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: a.index,\r\n\t\t\tcommit: a.commit || b.commit,\r\n\t\t\tlines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n\t\t\ttag: a.tag || b.tag\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction joinLine(timeline, branchIndex) {\r\n\tconst reverse = [...timeline].reverse();\r\n\tfor (let i = 0; i < reverse.length; i++) {\r\n\t\tconst f = reverse[i][branchIndex];\r\n\t\tif (f) {\r\n\t\t\tf.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\r\n\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\tcolorIndex: branchIndex,\r\n\t\t\t})]));\r\n\r\n\t\t\tfor (let j = 0; j < i; j++) {\r\n\t\t\t\tconst tl = reverse[j];\r\n\t\t\t\ttl[branchIndex] = new BranchPoint({\r\n\t\t\t\t\tindex: branchIndex,\r\n\t\t\t\t\tlines: [new BranchLine({\r\n\t\t\t\t\t\tfromIndex: branchIndex,\r\n\t\t\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\t\t\tcolorIndex: branchIndex\r\n\t\t\t\t\t})]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction branch({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tlet toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0) {\r\n\t\ttoIndex = branches.length;\r\n\t\tbranches.push(to);\r\n\t}\r\n\t\r\n\tfunction findBranchRootIndex() {\r\n\t\tfor (let index = timeline.length - 1; index >= 0; index--) {\r\n\t\t\tconst tl = timeline[index];\r\n\t\t\tconst from = tl[fromIndex];\r\n\t\t\tif (from && from.commit) {\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tif (fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t});\r\n\t} else {\r\n\t\tconst fromTargetIndex = findBranchRootIndex();\r\n\t\tif (fromTargetIndex === -1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst branchTargetFromIndex = fromTargetIndex + 1;\r\n\t\tconst branchPoint = new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})]\r\n\t\t});\r\n\t\tlet point;\r\n\t\tlet result;\r\n\t\tif (branchTargetFromIndex < timeline.length) {\r\n\t\t\tconst targetLine = timeline[branchTargetFromIndex];\r\n\t\t\tpoint = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n\t\t} else {\r\n\t\t\tpoint = branchPoint;\r\n\t\t\tresult = branchPoint;\r\n\t\t}\r\n\t\tconst from = timeline[fromTargetIndex][fromIndex];\r\n\t\tfrom.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\r\n\t\t\ttoIndex,\r\n\t\t\tcolorIndex: toIndex,\r\n\t\t\tpoint,\r\n\t\t})]));\r\n\t\treturn result;\r\n\t}\r\n\t\r\n}\r\n\r\nfunction commit({timeline, branches}, name) {\r\n\tconst index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\treturn null;\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex,\r\n\t\tcommit: true,\r\n\t});\r\n\t\t\r\n\tif (joinLine(timeline, index)) {\r\n\t\tresult.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\r\n\t\t\tfromIndex: index,\r\n\t\t\tcolorIndex: index\r\n\t\t})]));\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction commitTag({timeline, branches}, name, tag) {\r\n\tlet index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\tindex = branches.length;\r\n\t\tbranches.push(name);\r\n\t}\r\n\treturn new BranchPoint({\r\n\t\tindex,\r\n\t\ttag\r\n\t});\r\n}\r\n\r\nfunction commitMerge({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tconst toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0 || fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tcommit: true,\r\n\t\t});\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex: toIndex,\r\n\t\tcommit: true,\r\n\t\tlines: [\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t}),\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex: toIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})],\r\n\t});\r\n\tconst froms = [...timeline];\r\n\tconst fromTargetLine = froms.pop();\r\n\tif (fromTargetLine) {\r\n\t\tfromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\ttoIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t})]\r\n\t\t}));\r\n\t}\r\n\r\n\tjoinLine(froms, fromIndex);\r\n\r\n\tjoinLine(timeline, toIndex);\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction calcCommand(info, command) {\r\n\tconst {timeline} = info;\r\n\tconst timelineData = [];\r\n\t// const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n\tconst commands = Array.isArray(command) ? command : [command];\r\n\tcommands.forEach((cmd) => {\r\n\t\tif (!cmd) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet point;\r\n\t\tif (cmd.command === 'branch') {\r\n\t\t\tconst from = isObject(cmd.branch) ? cmd.branch.from : null;\r\n\t\t\tconst to = isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n\t\t\tpoint = branch(info, from, to);\r\n\t\t} else if (cmd.command === 'commit') {\r\n\t\t\tconst {branch} = cmd;\r\n\t\t\tpoint = commit(info, branch);\r\n\t\t} else if (cmd.command === 'merge') {\r\n\t\t\tconst {from, to} = cmd.branch;\r\n\t\t\tpoint = commitMerge(info, from, to);\r\n\t\t} else if (cmd.command === 'tag') {\r\n\t\t\tconst {branch, tag} = cmd;\r\n\t\t\tpoint = commitTag(info, branch, tag);\r\n\t\t}\r\n\t\tif (point && point.index > -1) {\r\n\t\t\ttimelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n\t\t}\r\n\t});\r\n\ttimeline.push(timelineData);\r\n}\r\n\r\nfunction calcBranchesInfo(start, grid, col) {\r\n\tconst result = {\r\n\t\tbranches: [],\r\n\t\ttimeline: []\r\n\t};\r\n\tgetAllColumnData(grid, col, (data) => {\r\n\t\tif (start !== 'top') {\r\n\t\t\tdata = [...data].reverse();\r\n\t\t}\r\n\t\tdata.forEach((command) => {\r\n\t\t\tcalcCommand(result, command);\r\n\t\t});\r\n\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n\tlet w = Math.max(width / branches.length + 1, 5);\r\n\ttimeline.forEach((tl) => {\r\n\t\ttl.forEach((p, index) => {\r\n\t\t\tif (index <= 0) {\r\n\t\t\t\t// \r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (p.tag) {\r\n\t\t\t\tconst textWidth = ctx.measureText(p.tag).width;\r\n\t\t\t\tif (((w * index) + (radius * 2) + 4 + textWidth) > width) {\r\n\t\t\t\t\tw = Math.max((width - (radius * 2) - 4 - textWidth) / index, 5);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst result = [];\r\n\tlet x = left;\r\n\tbranches.forEach(() => {\r\n\t\tresult.push(Math.ceil(x + radius));\r\n\t\tx += w;\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\r\n\tbranchXPoints, margin, branchColors, branchLineWidth, mergeStyle\r\n}, {\r\n\twidth, col, row, branches\r\n}) {\r\n\tif (isDef(upLineIndex) || isDef(downLineIndex)) {\r\n\t\tctx.strokeStyle = getOrApply(branchColors, branches[colorIndex], colorIndex);\r\n\t\tctx.lineWidth = branchLineWidth;\r\n\t\tctx.lineCap = 'round';\r\n\t\tctx.beginPath();\r\n\r\n\r\n\t\tif (isDef(upLineIndex)) {\r\n\t\t\tconst upX = branchXPoints[upLineIndex];\r\n\t\t\tconst upRect = grid.getCellRelativeRect(col, row - 1);\r\n\t\t\tconst upY = upRect.top + upRect.height / 2;\r\n\t\t\tctx.moveTo(upX, upY);\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tupX, (y + upY) / 2,\r\n\t\t\t\t\t\tx, (y + upY) / 2,\r\n\t\t\t\t\t\tx, y\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t}\r\n\r\n\t\tif (isDef(downLineIndex)) {\r\n\t\t\tconst downX = branchXPoints[downLineIndex];\r\n\t\t\tconst downRect = grid.getCellRelativeRect(col, row + 1);\r\n\t\t\tconst downY = downRect.top + downRect.height / 2;\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tx, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, downY\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(downX, downY);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tctx.stroke();\r\n\t}\r\n}\r\n\r\n/**\r\n * BranchGraphColumn<br>\r\n * <br>\r\n * # Data command<br>\r\n * ## mastar branch or orphan branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * </code></pre>\r\n * ## commit<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * </code></pre>\r\n * ## branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## merge<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## tag<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * </code></pre>\r\n *\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._start = option.start || 'bottom';\r\n\t\tthis._cache = isDef(option.cache) ? option.cache : false;\r\n\t}\r\n\tget StyleClass() {\r\n\t\treturn BranchGraphStyle;\r\n\t}\r\n\tclearCache(grid) {\r\n\t\tdelete grid[_];\r\n\t}\r\n\tonDrawCell(cellValue, info, context, grid) {\r\n\t\tif (this._cache) {\r\n\t\t\tconst state = grid[_] || (grid[_] = {});\r\n\t\t\tconst {col} = context;\r\n\t\t\tif (!state[col]) {\r\n\t\t\t\tstate[col] = calcBranchesInfo(this._start, grid, col);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn super.onDrawCell(cellValue, info, context, grid);\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphColumn(this);\r\n\t}\r\n\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst {timeline, branches} = (this._cache && grid[_]) ? grid[_][col] : calcBranchesInfo(this._start, grid, col);\r\n\t\t\r\n\t\tconst {upLineIndexKey, downLineIndexKey} = this._start !== 'top' ? {upLineIndexKey: 'toIndex', downLineIndexKey: 'fromIndex'} : {upLineIndexKey: 'fromIndex', downLineIndexKey: 'toIndex'};\r\n\t\tconst data = this._start !== 'top' ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\r\n\r\n\t\tconst {\r\n\t\t\tbranchColors,\r\n\t\t\tbranchLineWidth,\r\n\t\t\tcircleSize,\r\n\t\t\tmergeStyle,\r\n\t\t\tmargin,\r\n\t\t\tbgColor,\r\n\t\t} = style;\r\n\t\tif (bgColor) {\r\n\t\t\tdrawCellBase({\r\n\t\t\t\tbgColor,\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tconst rect = context.getRect();\r\n\t\tconst radius = circleSize / 2;\r\n\t\tconst width = rect.width - margin * 2;\r\n\r\n\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'middle';\r\n\t\t\tconst branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n\t\t\t\r\n\t\t\tconst y = rect.top + rect.height / 2;\r\n\r\n\t\t\t// draw join lines\r\n\t\t\tdata.\r\n\t\t\t\tmap((point, index) => point ? point.lines.map((line) => ({\r\n\t\t\t\t\tcolorIndex: line.colorIndex,\r\n\t\t\t\t\tupLineIndex: line[upLineIndexKey],\r\n\t\t\t\t\tdownLineIndex: line[downLineIndexKey],\r\n\t\t\t\t\tpointIndex: index,\r\n\t\t\t\t})) : []).\r\n\t\t\t\treduce((p, c) => p.concat(c), []).// flatMap\r\n\t\t\t\t// order of overlap\r\n\t\t\t\tsort((a, b) => b.colorIndex - a.colorIndex).\r\n\t\t\t\tforEach((line) => {\r\n\t\t\t\t\tconst x = branchXPoints[line.pointIndex];\r\n\t\t\t\t\trenderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n\t\t\t\t\t\tmargin,\r\n\t\t\t\t\t\tbranchXPoints,\r\n\t\t\t\t\t\tbranchLineWidth,\r\n\t\t\t\t\t\tbranchColors,\r\n\t\t\t\t\t\tmergeStyle,\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\twidth, col, row, branches\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t// draw commit points\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.commit) {\r\n\t\t\t\t\tconst x = branchXPoints[index];\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// draw tags\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.tag) {\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\nmodule.exports = BranchGraphColumn;","'use strict';\r\nconst BaseStyle = require('./BaseStyle');\r\nlet defaultStyle;\r\nfunction adj(style) {\r\n\tconst {textAlign = 'center'} = style;\r\n\tstyle.textAlign = textAlign;\r\n\treturn style;\r\n}\r\nconst DEFAULT_BRANCH_COLORS = (name, index) => {\r\n\tswitch (index % 3) {\r\n\tcase 0:\r\n\t\treturn '#979797';\r\n\tcase 1:\r\n\t\treturn '#008fb5';\r\n\tcase 2:\r\n\t\treturn '#f1c109';\r\n\tdefault:\r\n\t}\r\n\treturn '#979797';\r\n};\r\nclass BranchGraphStyle extends BaseStyle {\r\n\tstatic get DEFAULT() {\r\n\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BranchGraphStyle());\r\n\t}\r\n\tconstructor(style = {}) {\r\n\t\tsuper(adj(style));\r\n\t\tthis._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n\t\tthis._margin = style.margin || 4;\r\n\t\tthis._circleSize = style.circleSize || 16;\r\n\t\tthis._branchLineWidth = style.branchLineWidth || 4;\r\n\t\tthis._mergeStyle = style.mergeStyle === 'straight' ? 'straight' : 'bezier';\r\n\t}\r\n\tget branchColors() {\r\n\t\treturn this._branchColors;\r\n\t}\r\n\tset branchColors(branchColors) {\r\n\t\tthis._branchColors = branchColors;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget margin() {\r\n\t\treturn this._margin;\r\n\t}\r\n\tset margin(margin) {\r\n\t\tthis._margin = margin;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget circleSize() {\r\n\t\treturn this._circleSize;\r\n\t}\r\n\tset circleSize(circleSize) {\r\n\t\tthis._circleSize = circleSize;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget branchLineWidth() {\r\n\t\treturn this._branchLineWidth;\r\n\t}\r\n\tset branchLineWidth(branchLineWidth) {\r\n\t\tthis._branchLineWidth = branchLineWidth;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget mergeStyle() {\r\n\t\treturn this._mergeStyle;\r\n\t}\r\n\tset mergeStyle(mergeStyle) {\r\n\t\tthis._mergeStyle = mergeStyle;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphStyle(this);\r\n\t}\r\n}\r\nmodule.exports = BranchGraphStyle;","'use strict';\r\n{\r\n\tconst {normalize} = require('../../internal/menu-items');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst Style = require('../style/Style');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass MenuColumn extends BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._options = normalize(option.options);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MenuColumn(this);\r\n\t\t}\r\n\t\tget options() {\r\n\t\t\treturn this._options;\r\n\t\t}\r\n\t\twithOptions(options) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._options = normalize(options);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tlet {\r\n\t\t\t\tcolor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst text = this._convertInternal(value);\r\n\t\t\thelper.testFontLoad(font, text, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\tconst basePadding = helper.toBoxPixelArray(padding || 0, context);\r\n\t\t\t\tconst textPadding = basePadding.slice(0);\r\n\t\t\t\ttextPadding[1] += 26;// icon padding\r\n\t\t\t\tconst iconPadding = basePadding.slice(0);\r\n\t\t\t\ticonPadding[1] += 8;\r\n\t\t\t\tif (!isDef(color) && (!isDef(value) || value === '')) {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, .38)';\r\n\t\t\t\t}\r\n\t\t\t\thelper.text(text, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding: textPadding,\r\n\t\t\t\t});\r\n\t\t\t\t// draw icon\r\n\t\t\t\thelper.text('', context, {\r\n\t\t\t\t\ttextAlign: 'right',\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons: [{\r\n\t\t\t\t\t\tpath: 'M0 2 5 7 10 2z',\r\n\t\t\t\t\t\twidth: 10,\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, .54)',\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tpadding: iconPadding,\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\t_convertInternal(value) {\r\n\t\t\tconst options = this._options;\r\n\t\t\tfor (let i = 0; i < options.length; i++) {\r\n\t\t\t\tconst option = options[i];\r\n\t\t\t\tif (option.value === value) {\r\n\t\t\t\t\tvalue = option.caption;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn super.convertInternal(value);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = MenuColumn;\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst defaultTheme = require('./MATERIAL_DESIGN');\r\n\r\n\tfunction getProp(obj, superObj, names, defNames) {\r\n\t\treturn getChainSafe(obj, ...names) ||\r\n\t\t(defNames && getChainSafe(obj, ...defNames)) ||\r\n\t\tgetChainSafe(superObj, ...names);\r\n\t}\r\n\tfunction createTheme(obj = {}, superTheme = defaultTheme) {\r\n\t\treturn {\r\n\t\t\tget font() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['font']);\r\n\t\t\t},\r\n\t\t\tget underlayBackgroundColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['underlayBackgroundColor']);\r\n\t\t\t},\r\n\t\t\t// color\r\n\t\t\tget color() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['color']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsColor'], ['color']);\r\n\t\t\t},\r\n\t\t\t// background\r\n\t\t\tget defaultBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget selectionBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['selectionBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\t// border\r\n\t\t\tget borderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget hiliteBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['hiliteBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget checkbox() {\r\n\t\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'uncheckBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'checkBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget borderColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'borderColor'], ['borderColor']);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tget button() {\r\n\t\t\t\treturn this._button || (this._button = {\r\n\t\t\t\t\tget color() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'color'], ['color']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget bgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'bgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\textends(obj) {\r\n\t\t\t\treturn createTheme(obj, this);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * theme object\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes.theme\r\n\t * @memberof cheetahGrid.themes\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcreate(obj) {\r\n\t\t\treturn createTheme(obj);\r\n\t\t}\r\n\t};\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\nfunction DEFAULT_BG_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (!((row - frozenRowCount) & 1)) {\r\n\t\treturn '#FFF';\r\n\t} else {\r\n\t\treturn '#F6F6F6';\r\n\t}\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n\tlet stop;\r\n\tconst stopsKey = [];\r\n\tfor (stop in colorStops) {\r\n\t\tstopsKey.push(`${stop}@${colorStops[stop]}`);\r\n\t}\r\n\tconst key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(',')}`;\r\n\tconst ret = cacheLinearGradient[key];\r\n\tif (ret) {\r\n\t\treturn ret;\r\n\t}\r\n\tconst grad = context.createLinearGradient(left, top, left, bottom);\r\n\tfor (stop in colorStops) {\r\n\t\tgrad.addColorStop(stop, colorStops[stop]);\r\n\t}\r\n\treturn (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid,\r\n\t\tgrid: {frozenRowCount},\r\n\t\tcontext\r\n\t} = args;\r\n\tconst {left, top} = grid.getCellRelativeRect(col, 0);\r\n\tconst {bottom} = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n\r\n\treturn getLinearGradient(context, left, top, left, bottom, {0: '#FFF', 1: '#D3D3D3'});\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: '#000',\r\n\tdefaultBgColor: DEFAULT_BG_COLOR,\r\n\tfrozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: '#000',\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#F6F6F6',\r\n};","'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst DataSource = require('./DataSource');\r\n\r\n\tfunction _setFieldCache({_fCache}, index, field, value) {\r\n\t\tconst recCache = _fCache[index] || (_fCache[index] = {});\r\n\t\trecCache[field] = value;\r\n\t}\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.CachedDataSource\r\n\t * @extends cheetahGrid.data.DataSource\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass CachedDataSource extends DataSource {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn DataSource.EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new CachedDataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor(opt = {}) {\r\n\t\t\tsuper(opt);\r\n\t\t\tthis._rCache = {};\r\n\t\t\tthis._fCache = {};\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\tif (this._rCache && this._rCache[index]) {\r\n\t\t\t\treturn this._rCache[index];\r\n\t\t\t}\r\n\t\t\treturn super.getOriginal(index);\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\r\n\t\t\tif (cache) {\r\n\t\t\t\treturn cache;\r\n\t\t\t}\r\n\t\t\treturn super.getOriginalField(index, field);\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tconst fCache = this._fCache;\r\n\t\t\tif (fCache && fCache[index]) {\r\n\t\t\t\tdelete fCache[index]; // clear row cache\r\n\t\t\t}\r\n\t\t\treturn super.setOriginalField(index, field, value);\r\n\t\t}\r\n\t\tclearCache() {\r\n\t\t\tif (this._rCache) {\r\n\t\t\t\tthis._rCache = {};\r\n\t\t\t}\r\n\t\t\tif (this._fCache) {\r\n\t\t\t\tthis._fCache = {};\r\n\t\t\t}\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t_setFieldCache(this, index, field, val);\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\tthis._rCache[index] = val;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CachedDataSource;\r\n}","'use strict';\r\n{\r\n\tconst {isDef, isPromise, then, obj: {isObject}} = require('./internal/utils');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\tconst columns = require('./columns');\r\n\tconst {BaseStyle} = columns.style;\r\n\tconst headerType = require('./header/type');\r\n\tconst {BaseStyle: HeaderBaseStyle} = require('./header/style');\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\tconst {DataSource, CachedDataSource} = require('./data');\r\n\tconst themes = require('./themes');\r\n\tconst icons = require('./internal/icons');\r\n\tconst MessageHandler = require('./columns/message/MessageHandler');\r\n\tconst EVENT_TYPE = require('./list-grid/EVENT_TYPE');\r\n\t\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('./internal/symbolManager');\r\n\r\n\tlet headerId = 0;\r\n\t//private methods\r\n\tfunction _getHeaderCellRange(grid, col, row) {\r\n\t\treturn grid[_].headerMap.getHeaderCellRange(col, row);\r\n\t}\r\n\tfunction _updateRect(grid, col, row, context) {\r\n\t\tconst rect = context.getRect();\r\n\t\tconst {\r\n\t\t\tstartCol,\r\n\t\t\tendCol,\r\n\t\t\tstartRow,\r\n\t\t\tendRow,\r\n\t\t} = _getHeaderCellRange(grid, col, row);\r\n\t\tfor (let c = col - 1; c >= startCol; c--) {\r\n\t\t\trect.left -= grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let c = col + 1; c <= endCol; c++) {\r\n\t\t\trect.right += grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let r = row - 1; r >= startRow; r--) {\r\n\t\t\trect.top -= grid.getRowHeight(r);\r\n\t\t}\r\n\t\tfor (let r = row + 1; r <= endRow; r++) {\r\n\t\t\trect.bottom += grid.getRowHeight(r);\r\n\t\t}\r\n\t\tcontext.setRect(rect);\r\n\t}\r\n\tfunction _getCellValue(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn grid[_].headerMap.getCell(col, row).caption;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.get;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, field, row);\r\n\t\t}\r\n\t}\r\n\tfunction _setCellValue(grid, col, row, value) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\t// nop\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.set;\r\n\t\t\t}\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\tconst res = grid[_].dataSource.setField(index, field, value);\r\n\t\t\treturn isPromise(res) ? res : true;\r\n\t\t}\r\n\t}\r\n\tfunction _getCellMessage(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst {message} = grid[_].headerMap.columns[col];\r\n\t\t\tif (!message) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, message, row);\r\n\t\t}\r\n\t}\r\n\tfunction _getCellIcon0(grid, icon, row) {\r\n\t\tif (!isDef(icon)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (Array.isArray(icon)) {\r\n\t\t\treturn icon.map((i) => _getCellIcon0(grid, i, row));\r\n\t\t}\r\n\t\tif (!isObject(icon)) {\r\n\t\t\treturn _getField(grid, icon, row);\r\n\t\t}\r\n\t\tconst retIcon = {};\r\n\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\tif (icon[k]) {\r\n\t\t\t\tconst f = _getField(grid, icon[k], row);\r\n\t\t\t\tif (isDef(f)) {\r\n\t\t\t\t\tretIcon[k] = f;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!_hasField(grid, icon[k], row)) {\r\n\t\t\t\t\t\tretIcon[k] = icon[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn retIcon;\r\n\t}\r\n\tfunction _getCellIcon(grid, col, row) {\r\n\t\tconst {icon} = grid[_].headerMap.columns[col];\r\n\t\treturn _getCellIcon0(grid, icon, row);\r\n\t}\r\n\tfunction _getField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.getField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _hasField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.hasField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _onDrawValue(grid, cellValue, context, {col, row}, style, draw) {\r\n\t\tconst helper = grid[_].gridCanvasHelper;\r\n\r\n\t\tconst drawCellBg = ({bgColor} = {}) => {\r\n\t\t\tconst fillOpt = {\r\n\t\t\t\tfillColor: bgColor,\r\n\t\t\t};\r\n\t\t\t//cell\r\n\t\t\thelper.fillCellWithState(context, fillOpt);\r\n\t\t};\r\n\t\tconst drawCellBorder = () => {\r\n\r\n\t\t\tif (context.col === grid.frozenColCount - 1) {\r\n\t\t\t\t//\r\n\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor\r\n\t\t\t\t\t\t: helper.theme.frozenRowsBorderColor;\r\n\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(borderColor, context.col, context.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.right - 2.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.right - 2.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (context.row < grid[_].headerMap.rowCount) {\r\n\t\t\t\t_headerBorderWithState(grid, helper, context);\r\n\t\t\t} else {\r\n\t\t\t\thelper.borderWithState(context);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tconst drawCellBase = ({bgColor} = {}) => {\r\n\t\t\tdrawCellBg({bgColor});\r\n\t\t\tdrawCellBorder();\r\n\t\t};\r\n\t\tconst info = {\r\n\t\t\tgetRecord: () => grid.getRowRecord(row),\r\n\t\t\tgetIcon: () => _getCellIcon(grid, col, row),\r\n\t\t\tgetMessage: () => _getCellMessage(grid, col, row),\r\n\t\t\tmessageHandler: grid[_].messageHandler,\r\n\t\t\tstyle,\r\n\t\t\tdrawCellBase,\r\n\t\t\tdrawCellBg,\r\n\t\t\tdrawCellBorder,\r\n\t\t};\r\n\r\n\t\treturn draw(cellValue, info, context, grid);\r\n\t}\r\n\tfunction _headerBorderWithState(grid, helper, context) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst sel = grid.selection.select;\r\n\t\tif (sel.row >= grid[_].headerMap.rowCount) {\r\n\t\t\t//\r\n\t\t\thelper.borderWithState(context);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst {id} = grid[_].headerMap.getCell(col, row);\r\n\r\n\t\tconst rect = context.getRect();\r\n\t\tconst option = {};\r\n\r\n\t\tconst {id: selId} = grid[_].headerMap.getCell(sel.col, sel.row);\r\n\t\t//\r\n\t\tif (selId === id) {\r\n\t\t\toption.borderColor = helper.theme.hiliteBorderColor;\r\n\t\t\toption.lineWidth = 2;\r\n\t\t\thelper.border(context, option);\r\n\t\t} else {\r\n\t\t\toption.lineWidth = 1;\r\n\t\t\t// header color\r\n\t\t\tconst isFrozenCell = grid.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\toption.borderColor = helper.theme.frozenRowsBorderColor;\r\n\t\t\t}\r\n\t\t\thelper.border(context, option);\r\n\r\n\t\t\t//\r\n\t\t\tif (col > 0 && grid[_].headerMap.getCell(col - 1, row).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (row > 0 &&\r\n\t\t\t\t\t\tgrid[_].headerMap.getCell(col, row - 1).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[0]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction _refreshHeader(grid) {\r\n\t\tif (grid[_].headerEvents) {\r\n\t\t\tgrid[_].headerEvents.forEach((id) => grid.unlisten(id));\r\n\t\t}\r\n\t\tgrid[_].headerMap = new HeaderMap(grid[_].header);\r\n\t\tgrid[_].headerEvents = [];\r\n\t\tgrid[_].headerMap.headerObjects.forEach((cell) => {\r\n\t\t\tconst ids = cell.headerType.bindGridEvent(grid);\r\n\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\tif (cell.style) {\r\n\t\t\t\tif (cell.style instanceof HeaderBaseStyle) {\r\n\t\t\t\t\tconst id = cell.style.listen(HeaderBaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].headerMap.columns.forEach((col, index) => {\r\n\t\t\tif (col.action) {\r\n\t\t\t\tconst ids = col.action.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.columnType) {\r\n\t\t\t\tconst ids = col.columnType.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.style) {\r\n\t\t\t\tif (col.style instanceof BaseStyle) {\r\n\t\t\t\t\tconst id = col.style.listen(columns.style.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid.colCount = grid[_].headerMap.columns.length;\r\n\t\t_refreshRowCount(grid);\r\n\t\tgrid.frozenRowCount = grid[_].headerMap.rowCount;\r\n\t\tfor (let col = 0; col < grid[_].headerMap.columns.length; col++) {\r\n\t\t\tconst column = grid[_].headerMap.columns[col];\r\n\t\t\tconst {width, minWidth, maxWidth} = column;\r\n\t\t\tif (width && (width > 0 || typeof width === 'string')) {\r\n\t\t\t\tgrid.setColWidth(col, width);\r\n\t\t\t}\r\n\t\t\tif (minWidth && (minWidth > 0 || typeof minWidth === 'string')) {\r\n\t\t\t\tgrid.setMinColWidth(col, minWidth);\r\n\t\t\t}\r\n\t\t\tif (maxWidth && (maxWidth > 0 || typeof maxWidth === 'string')) {\r\n\t\t\t\tgrid.setMaxColWidth(col, maxWidth);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isArrayHeaderRowHeight = Array.isArray(grid[_].headerRowHeight);\r\n\t\tfor (let row = 0; row < grid[_].headerMap.rowCount; row++) {\r\n\t\t\tconst height = isArrayHeaderRowHeight ? grid[_].headerRowHeight[row] : grid[_].headerRowHeight;\r\n\t\t\tif (height && height > 0) {\r\n\t\t\t\tgrid.setRowHeight(row, height);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _refreshRowCount(grid) {\r\n\t\tgrid.rowCount = grid[_].dataSource.length + grid[_].headerMap.rowCount;\r\n\t}\r\n\tfunction _tryWithUpdateDataSource(grid, fn) {\r\n\t\tif (grid[_].dataSourceEventIds) {\r\n\t\t\tgrid[_].dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n\t\t}\r\n\r\n\t\tfn(grid);\r\n\r\n\t\tgrid[_].dataSourceEventIds = [\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n\t\t\t\t_refreshRowCount(grid);\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction _setRecords(grid, records = []) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tgrid[_].records = records;\r\n\t\t\tgrid[_].dataSource = CachedDataSource.ofArray(grid[_].records);\r\n\t\t});\r\n\t}\r\n\tfunction _setDataSource(grid, dataSource) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tif (dataSource) {\r\n\t\t\t\tif (dataSource instanceof DataSource) {\r\n\t\t\t\t\tgrid[_].dataSource = dataSource;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgrid[_].dataSource = new CachedDataSource(dataSource);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tgrid[_].dataSource = DataSource.EMPTY;\r\n\t\t\t}\r\n\t\t\tgrid[_].records = null;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction _getRowRecordIndex(grid, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn undefined;\r\n\t\t} else {\r\n\t\t\treturn row - grid[_].headerMap.rowCount;\r\n\t\t}\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\tclass HeaderMap {\r\n\t\tconstructor(header) {\r\n\t\t\tthis._columns = [];\r\n\t\t\tthis._headerCells = [];\r\n\t\t\tthis._headerObjects = [];\r\n\r\n\t\t\tthis._addHeaders(0, header, []);\r\n\t\t\tthis._setupHeaderType();\r\n\t\t}\r\n\t\tget columns() {\r\n\t\t\treturn this._columns;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this._headerCells.length;\r\n\t\t}\r\n\t\tget headerObjects() {\r\n\t\t\treturn this._headerObjects;\r\n\t\t}\r\n\t\tgetCell(col, row) {\r\n\t\t\treturn this._headerCells[row][col];\r\n\t\t}\r\n\t\tgetHeaderCellRangeById(id) {\r\n\t\t\tfor (let r = 0; r < this.rowCount; r++) {\r\n\t\t\t\tfor (let c = 0; c < this.columns.length; c++) {\r\n\t\t\t\t\tif (id === this.getCell(c, r).id) {\r\n\t\t\t\t\t\treturn this.getHeaderCellRange(c, r);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tgetHeaderCellRange(col, row) {\r\n\t\t\tconst result = {\r\n\t\t\t\tstartCol: col,\r\n\t\t\t\tstartRow: row,\r\n\t\t\t\tendCol: col,\r\n\t\t\t\tendRow: row,\r\n\t\t\t\tisCellInRange(col, row) {\r\n\t\t\t\t\treturn this.startCol <= col && col <= this.endCol &&\r\n\t\t\t\t\t\t\tthis.startRow <= row && row <= this.endRow;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst {id} = this.getCell(col, row);\r\n\t\t\tfor (let c = col - 1; c >= 0; c--) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let c = col + 1; c < this.columns.length; c++) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startRow = r;\r\n\t\t\t}\r\n\t\t\tfor (let r = row + 1; r < this.rowCount; r++) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endRow = r;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\t_addHeaders(row, header, roots) {\r\n\t\t\tconst rowCells = this._headerCells[row] || this._newRow(row);\r\n\t\t\theader.forEach((hd) => {\r\n\t\t\t\tconst col = this._columns.length;\r\n\t\t\t\tconst cell = {\r\n\t\t\t\t\tid: headerId++,\r\n\t\t\t\t\tcaption: hd.caption,\r\n\t\t\t\t\tstyle: hd.headerStyle,\r\n\t\t\t\t\tsort: hd.sort,\r\n\t\t\t\t};\r\n\t\t\t\tthis._headerObjects.push(cell);\r\n\t\t\t\trowCells[col] = cell;\r\n\t\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\t\tthis._headerCells[r][col] = roots[r];\r\n\t\t\t\t}\r\n\t\t\t\tif (hd.columns) {\r\n\t\t\t\t\tthis._addHeaders(row + 1, hd.columns, [...roots, cell]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._columns.push({\r\n\t\t\t\t\t\twidth: hd.width,\r\n\t\t\t\t\t\tminWidth: hd.minWidth,\r\n\t\t\t\t\t\tmaxWidth: hd.maxWidth,\r\n\t\t\t\t\t\tfield: hd.field,\r\n\t\t\t\t\t\ticon: hd.icon,\r\n\t\t\t\t\t\tmessage: hd.message,\r\n\t\t\t\t\t\tcolumnType: columns.type.of(hd.columnType),\r\n\t\t\t\t\t\taction: columns.action.of(hd.action),\r\n\t\t\t\t\t\tstyle: hd.style,\r\n\t\t\t\t\t\tdefine: hd,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (let r = row + 1; r < this._headerCells.length; r++) {\r\n\t\t\t\t\t\tthis._headerCells[r][col] = cell;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setupHeaderType() {\r\n\t\t\tthis._headerObjects.forEach((cell) => {\r\n\t\t\t\tcell.range = this.getHeaderCellRangeById(cell.id);\r\n\t\t\t\tcell.headerType = headerType.create(cell);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_newRow(row) {\r\n\t\t\tconst newRow = this._headerCells[row] = [];\r\n\t\t\tif (!this._columns.length) {\r\n\t\t\t\treturn newRow;\r\n\t\t\t}\r\n\t\t\tconst prev = this._headerCells[row - 1];\r\n\t\t\tfor (let col = 0; col < prev.length; col++) {\r\n\t\t\t\tnewRow[col] = prev[col];\r\n\t\t\t}\r\n\t\t\treturn newRow;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction adjustListGridOption(options) {\r\n\t\tif (options) {\r\n\t\t\tdelete options.frozenRowCount;\r\n\t\t\tdelete options.colCount;\r\n\t\t\tdelete options.rowCount;\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\t\r\n\t/**\r\n\t * ListGrid\r\n\t * @classdesc cheetahGrid.ListGrid\r\n\t * @extends cheetahGrid.core.DrawGrid\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tclass ListGrid extends DrawGrid {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * header: see header property\r\n\t\t * records {array}: records data\r\n\t\t * dataSource {DataSource}: records data source\r\n\t\t * frozenColCount {number}: default 0\r\n\t\t * defaultRowHeight {number}: default grid row height. default 40\r\n\t\t * defaultColWidth {number}: default grid col width. default 80\r\n\t\t * borderColor: border color\r\n\t\t * parentElement {Element}: canvas parentElement\r\n\t\t * theme {object}: theme\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(options = {}) {\r\n\t\t\tsuper(adjustListGridOption(options));\r\n\t\t\tthis[_].header = options.header || [];\r\n\t\t\tthis[_].headerRowHeight = options.headerRowHeight || [];\r\n\t\t\tif (options.dataSource) {\r\n\t\t\t\t_setDataSource(this, options.dataSource);\r\n\t\t\t} else {\r\n\t\t\t\t_setRecords(this, options.records);\r\n\t\t\t}\r\n\t\t\t_refreshHeader(this);\r\n\t\t\tthis[_].sortState = {\r\n\t\t\t\tcol: -1,\r\n\t\t\t\torder: undefined,\r\n\t\t\t};\r\n\t\t\tthis[_].gridCanvasHelper = new GridCanvasHelper(this);\r\n\t\t\tthis[_].theme = themes.of(options.theme);\r\n\t\t\tthis[_].messageHandler = new MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n\t\t\tthis.invalidate();\r\n\t\t\tthis[_].handler.on(window, 'resize', () => {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t\tthis.updateScroll();\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t});\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis[_].messageHandler.dispose();\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tget header() {\r\n\t\t\treturn this[_].header;\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * <pre>\r\n\t\t * column options\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * field: field name\r\n\t\t * width: column width\r\n\t\t * minWidth: column min width\r\n\t\t * maxWidth: column max width\r\n\t\t * icon: icon name\r\n\t\t * message: message key name\r\n\t\t * columnType: ColumnType\r\n\t\t * action: ColumnAction\r\n\t\t * style: ColumnStyle\r\n\t\t * sort: define sort setting\r\n\t\t * -----\r\n\t\t *\r\n\t\t * multiline header\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * columns: columns define\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tset header(header) {\r\n\t\t\tthis[_].header = header;\r\n\t\t\t_refreshHeader(this);\r\n\t\t}\r\n\t\tget records() {\r\n\t\t\treturn this[_].records;\r\n\t\t}\r\n\t\tset records(records) {\r\n\t\t\t_setRecords(this, records);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget dataSource() {\r\n\t\t\treturn this[_].dataSource;\r\n\t\t}\r\n\t\tset dataSource(dataSource) {\r\n\t\t\t_setDataSource(this, dataSource);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this[_].theme;\r\n\t\t}\r\n\t\tset theme(theme) {\r\n\t\t\tthis[_].theme = themes.of(theme);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn super.font || this[_].gridCanvasHelper.theme.font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tsuper.font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tsuper.underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tget sortState() {\r\n\t\t\treturn this[_].sortState;\r\n\t\t}\r\n\t\tset sortState(sortState) {\r\n\t\t\tthis[_].sortState = sortState;\r\n\t\t}\r\n\t\tgetField(col) {\r\n\t\t\treturn this[_].headerMap.columns[col].field;\r\n\t\t}\r\n\t\tgetRowRecord(row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t} else {\r\n\t\t\t\treturn this[_].dataSource.get(_getRowRecordIndex(this, row));\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetGridCanvasHelper() {\r\n\t\t\treturn this[_].gridCanvasHelper;\r\n\t\t}\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol, startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tif (startCol !== col || startRow !== row) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn _getCellValue(this, col, row);\r\n\t\t}\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\tconst column = this[_].headerMap.columns[col];\r\n\r\n\t\t\tlet draw;\r\n\t\t\tlet style;\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst hd = this[_].headerMap.getCell(col, row);\r\n\t\t\t\tdraw = hd.headerType.onDrawCell;\r\n\t\t\t\t({style} = hd);\r\n\t\t\t\t_updateRect(this, col, row, context);\r\n\t\t\t} else {\r\n\t\t\t\tdraw = column.columnType.onDrawCell;\r\n\t\t\t\t({style} = column);\r\n\t\t\t}\r\n\t\t\tconst cellValue = _getCellValue(this, col, row);\r\n\t\t\treturn _onDrawValue(this, cellValue, context, {col, row}, style, draw);\r\n\t\t}\r\n\t\tdoGetCellValue(col, row, valueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst value = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(value)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvalueCallback(value);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tdoChangeValue(col, row, changeValueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst before = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(before)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tconst after = changeValueCallback(before);\r\n\t\t\t\tif (after === undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn then(_setCellValue(this, col, row, after), (ret) => {\r\n\t\t\t\t\tif (ret) {\r\n\t\t\t\t\t\tconst {field} = this[_].headerMap.columns[col];\r\n\t\t\t\t\t\tconst self = this;\r\n\t\t\t\t\t\tthis.fireListeners(EVENT_TYPE.CHANGED_VALUE, {\r\n\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\tget record() {\r\n\t\t\t\t\t\t\t\treturn self.getRowRecord(row);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfield,\r\n\t\t\t\t\t\t\tvalue: after,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\tthis.listen(EVENT_TYPE.SELECTED_CELL, (e) => {\r\n\t\t\t\tif (e.row < this[_].headerMap.rowCount) {\r\n\t\t\t\t\tconst {startCol, endCol, startRow, endRow} = _getHeaderCellRange(this, e.col, e.row);\r\n\t\t\t\t\tif (startCol !== endCol || startRow !== endRow) {\r\n\t\t\t\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = startCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveLeftColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = endCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveRightColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = startRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveUpRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = endRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveDownRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tgetColumnIndexByField(field) {\r\n\t\t\tfor (const columnIndex in this[_].headerMap.columns) {\r\n\t\t\t\tif (this[_].headerMap.columns[columnIndex].field === field) {\r\n\t\t\t\t\treturn columnIndex - 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfocusGridCell(field, index) {\r\n\t\t\tconst {\r\n\t\t\t\tstart: {col: startCol, row: startRow},\r\n\t\t\t\tend: {col: endCol, row: endRow}\r\n\t\t\t} = this.selection.range;\r\n\r\n\t\t\tconst newCol = this.getColumnIndexByField(field);\r\n\t\t\tconst newRow = index + this[_].headerMap.rowCount;\r\n\t\t\tthis.focusCell(newCol, newRow);\r\n\t\t\tthis.selection.select = {\r\n\t\t\t\tcol: newCol,\r\n\t\t\t\trow: newRow\r\n\t\t\t};\r\n\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\tthis.invalidateCell(newCol, newRow);\r\n\t\t}\r\n\t\tmakeVisibleGridCell(field, index) {\r\n\t\t\tthis.makeVisibleCell(this.getColumnIndexByField(field), index + this[_].headerMap.rowCount);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ListGrid;\r\n}","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst InlineIcon = require('./InlineIcon');\r\nconst InlineImage = require('./InlineImage');\r\nconst InlineSvg = require('./InlineSvg');\r\nconst InlineDrawer = require('./InlineDrawer');\r\nconst InlinePath2D = require('./InlinePath2D');\r\nconst {isDef} = require('../internal/utils');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst icons = require('../icons');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nfunction drawRegisteredIcon(ctx, icon,\r\n\t\tdrawWidth, drawHeight,\r\n\t\tleft, top, width, height,\r\n\t\t{\r\n\t\t\toffset = 2,\r\n\t\t\tpadding,\r\n\t\t} = {}) {\r\n\tconst rect = {\r\n\t\tleft,\r\n\t\ttop,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tright: left + width,\r\n\t\tbottom: top + height,\r\n\t};\r\n\tctx.save();\r\n\ttry {\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t//clip\r\n\t\tctx.clip();\r\n\r\n\t\t//\r\n\t\tconst pos = calcStartPosition(ctx, rect, drawWidth, drawHeight, {\r\n\t\t\toffset,\r\n\t\t\tpadding\r\n\t\t});\r\n\t\tpath2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n\t} finally {\r\n\t\tctx.restore();\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\ticonOf(icon) {\r\n\t\tif (icon instanceof Inline) {\r\n\t\t\treturn icon;\r\n\t\t}\r\n\t\tif (!icon) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (icon.font && icon.content) {\r\n\t\t\treturn new InlineIcon(icon);\r\n\t\t}\r\n\t\tif (icon.src) {\r\n\t\t\treturn new InlineImage({\r\n\t\t\t\tsrc: icon.src,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.svg) {\r\n\t\t\treturn new InlineSvg({\r\n\t\t\t\tsvg: icon.svg,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.path) {\r\n\t\t\treturn new InlinePath2D({\r\n\t\t\t\tpath: icon.path,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst regedIcons = icons.get();\r\n\t\tif (icon.name && regedIcons[icon.name]) {\r\n\t\t\tconst regedIcon = regedIcons[icon.name];\r\n\t\t\tconst width = icon.width || Math.max(regedIcon.width, regedIcon.height);\r\n\t\t\treturn new InlineDrawer({\r\n\t\t\t\tdraw({\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\trect,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\toffsetRight,\r\n\t\t\t\t}) {\r\n\t\t\t\t\tdrawRegisteredIcon(ctx, regedIcon,\r\n\t\t\t\t\t\t\twidth, width,\r\n\t\t\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\twidth,\r\n\t\t\t\theight: width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn new InlineIcon(icon);\r\n\t},\r\n\tof(content) {\r\n\t\tif (!isDef(content)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (content instanceof Inline) {\r\n\t\t\treturn content;\r\n\t\t}\r\n\t\treturn new Inline(content);\r\n\t},\r\n\tbuildInlines(icons, inline) {\r\n\t\tconst result = [];\r\n\t\tif (icons) {\r\n\t\t\tresult.push(...(icons.map((icon) => this.iconOf(icon)).filter((e) => !!e)));\r\n\t\t}\r\n\t\tif (Array.isArray(inline) && inline.filter((il) => il instanceof Inline).length) {\r\n\t\t\tresult.push(...(inline.map((il) => this.of(il)).filter((e) => !!e)));\r\n\t\t} else {\r\n\t\t\tconst il = this.of(inline);\r\n\t\t\tif (il) {\r\n\t\t\t\tresult.push(il);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n};","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst fonts = require('../internal/fonts');\r\n\r\nclass InlineIcon extends Inline {\r\n\tconstructor(icon) {\r\n\t\tsuper();\r\n\t\tthis._icon = icon || {};\r\n\t}\r\n\twidth({ctx}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.width) {\r\n\t\t\treturn icon.width;\r\n\t\t}\r\n\t\tif (icon.font && fonts.check(icon.font, icon.content)) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.font = icon.font || ctx.font;\r\n\t\t\t\treturn ctx.measureText(icon.content).width;\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfont() {\r\n\t\treturn this._icon.font;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._icon.color;\r\n\t}\r\n\tcanDraw() {\r\n\t\tconst icon = this._icon;\r\n\t\treturn icon.font ? fonts.check(icon.font, icon.content) : true;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.font && !fonts.check(icon.font, icon.content)) {\r\n\t\t\tfonts.load(icon.font, icon.content, callback);\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.content) {\r\n\t\t\tcanvashelper.fillTextRect(ctx, icon.content,\r\n\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineIcon;","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\n\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler = require('./FontRuler');\r\n\r\n\r\nconst LastResortFonts = {\r\n\tSERIF: 'serif',\r\n\tSANS_SERIF: 'sans-serif'\r\n};\r\n\r\n\r\nconst watchRunners = {};\r\n\r\nclass FontWatchRunner {\r\n\tstatic load(font, testStr, activeCallback, inactiveCallback) {\r\n\t\tconst c = watchRunners[font] || (watchRunners[font] = {});\r\n\t\ttestStr = testStr + '';\r\n\t\tlet runner;\r\n\t\tif (c[testStr]) {\r\n\t\t\trunner = c[testStr];\r\n\t\t} else {\r\n\t\t\trunner = (c[testStr] = new FontWatchRunner(font, testStr));\r\n\t\t}\r\n\t\trunner.then(activeCallback, inactiveCallback);\r\n\t}\r\n\tconstructor(font, testStr) {\r\n\t\tthis.activeCallbacks = [];\r\n\t\tthis.inactiveCallbacks = [];\r\n\t\tthis.status = null;\r\n\t\tthis.lastResortWidths_ = {};\r\n\r\n\t\tthis.fontRulerA_ = new FontRuler(font + ',' + LastResortFonts.SERIF, testStr);\r\n\t\tthis.fontRulerB_ = new FontRuler(font + ',' + LastResortFonts.SANS_SERIF, testStr);\r\n\t\tconst lastResortRulerA = new FontRuler('4px ' + LastResortFonts.SERIF, testStr);\r\n\t\tconst lastResortRulerB = new FontRuler('4px ' + LastResortFonts.SANS_SERIF, testStr);\r\n\r\n\t\t//start\r\n\t\tthis.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n\t\tthis.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\r\n\r\n\t\tlastResortRulerA.remove();\r\n\t\tlastResortRulerB.remove();\r\n\r\n\t\tthis.started_ = Date.now();\r\n\r\n\t\tthis.check_();\r\n\t}\r\n\tthen(activeCallback, inactiveCallback) {\r\n\t\tif (this.status) {\r\n\t\t\tif (this.status !== 'ng') {\r\n\t\t\t\tactiveCallback();\r\n\t\t\t} else {\r\n\t\t\t\tinactiveCallback();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.activeCallbacks.push(activeCallback);\r\n\t\t\tthis.inactiveCallbacks.push(inactiveCallback);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tcheck_() {\r\n\t\tconst widthA = this.fontRulerA_.getWidth();\r\n\t\tconst widthB = this.fontRulerB_.getWidth();\r\n\r\n\t\tif (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\tif (Date.now() - this.started_ >= 3000) { // timeout\r\n\t\t\t\tif (this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\t\t\tthis.status = 'ok';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.finish_(this.inactiveCallbacks);\r\n\t\t\t\t\tthis.status = 'ng';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.check_();\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\tthis.status = 'ok';\r\n\t\t}\r\n\t}\r\n\tisFallbackFont_(a, b) {\r\n\t\treturn this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\r\n\t}\r\n\twidthsMatchLastResortWidths_(a, b) {\r\n\t\tfor (const font in LastResortFonts) {\r\n\t\t\tif (LastResortFonts.hasOwnProperty(font)) {\r\n\t\t\t\tif (this.widthMatches_(a, LastResortFonts[font]) &&\r\n\t\t\t\t\t\tthis.widthMatches_(b, LastResortFonts[font])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\twidthMatches_(width, lastResortFont) {\r\n\t\treturn width === this.lastResortWidths_[lastResortFont];\r\n\t}\r\n\tisLastResortFont_(a, b) {\r\n\t\treturn hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n\t}\r\n\tfinish_(callbacks) {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.fontRulerA_.remove();\r\n\t\t\tthis.fontRulerB_.remove();\r\n\t\t\tcallbacks.forEach((cb) => cb());\r\n\t\t}, 0);\r\n\t}\r\n}\r\n\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n\tif (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n\t\tconst match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n\r\n\t\tHAS_WEBKIT_FALLBACK_BUG = !!match &&\r\n\t\t\t(parseInt(match[1], 10) < 536 ||\r\n\t\t\t(parseInt(match[1], 10) === 536 &&\r\n\t\t\tparseInt(match[2], 10) <= 11));\r\n\t}\r\n\treturn HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\n\r\nmodule.exports = FontWatchRunner;\r\n","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\nfunction computeStyle(font) {\r\n\treturn [{\r\n\t\tdisplay: 'block',\r\n\t\tposition: 'absolute',\r\n\t\ttop: '-9999px',\r\n\t\tleft: '-9999px',\r\n\t\twidth: 'auto',\r\n\t\theight: 'auto',\r\n\t\tmargin: '0',\r\n\t\tpadding: '0',\r\n\t\t'white-space': 'nowrap',\r\n\t\tfont,\r\n\t}, {\r\n\t\t'font-variant': 'normal',\r\n\t\t'font-size': '300px',\r\n\t\t'font-style': 'normal',\r\n\t\t'font-weight': '400',\r\n\t\t'line-height': 'normal',\r\n\t}];\r\n}\r\n\r\nclass FontRuler {\r\n\tconstructor(font, testStr) {\r\n\t\tconst e = document.createElement('span');\r\n\t\te.setAttribute('aria-hidden', 'true');\r\n\t\te.textContent = testStr || 'BESbswy';\r\n\r\n\t\tcomputeStyle(font).forEach((style) => {\r\n\t\t\tfor (const key in style) {\r\n\t\t\t\te.style[key] = style[key];\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.body.appendChild(e);\r\n\t\tthis.el_ = e;\r\n\t}\r\n\tgetWidth() {\r\n\t\treturn this.el_.offsetWidth;\r\n\t}\r\n\tremove() {\r\n\t\tdocument.body.removeChild(this.el_);\r\n\t}\r\n}\r\n\r\nmodule.exports = FontRuler;\r\n\r\n\r\n","'use strict';\r\n\r\nconst InlineImage = require('./InlineImage');\r\nconst {then} = require('../internal/utils');\r\n\r\nfunction buildSvgDataUrl(svg) {\r\n\tconst data = (typeof svg === 'string') ? svg : new XMLSerializer().serializeToString(svg);\r\n\tconst url = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(data); //svgbase64\r\n\treturn url;\r\n}\r\nfunction getSvgElement(svg) {\r\n\tif (typeof svg === 'string') {\r\n\t\tconst parser = new DOMParser();\r\n\t\treturn parser.parseFromString(svg, 'image/svg+xml');\r\n\t} else {\r\n\t\treturn svg;\r\n\t}\r\n}\r\n\r\nclass InlineSvg extends InlineImage {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsvg,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tconst svgElem = then(svg, getSvgElement);\r\n\t\tconst elmWidth = svgElem.getAttribute ? svgElem.getAttribute('width') : null;\r\n\t\tconst elmHeight = svgElem.getAttribute ? svgElem.getAttribute('height') : null;\r\n\t\tsuper({\r\n\t\t\tsrc: then(svg, buildSvgDataUrl),\r\n\t\t\twidth: width || elmWidth,\r\n\t\t\theight: height || elmHeight,\r\n\t\t\timageWidth: elmWidth,\r\n\t\t\timageHeight: elmHeight,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineSvg;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\n\r\nclass InlineDrawer extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tdraw,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._draw = draw;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t}) {\r\n\t\tthis._draw({\r\n\t\t\tctx,\r\n\t\t\tcanvashelper,\r\n\t\t\trect,\r\n\t\t\toffset,\r\n\t\t\toffsetLeft,\r\n\t\t\toffsetRight,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineDrawer;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nclass InlinePath2D extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tpath,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t// IEPath2Dpolyfill\r\n\t\tthis._path = new path2DManager.Path2D(path);\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight\r\n\t}) {\r\n\t\toffset++;\r\n\t\tconst padding = {\r\n\t\t\tleft: offsetLeft,\r\n\t\t\tright: offsetRight,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, this._width, this._height, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\tctx.translate(pos.x, pos.y);\r\n\t\t\tctx.fill(this._path);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlinePath2D;","'use strict';\r\n\r\nconst PathCommandsParser = require('./PathCommandsParser');\r\nconst parser = new PathCommandsParser();\r\n\r\nclass Path2D {\r\n\tconstructor(arg) {\r\n\t\tthis._ops = [];\r\n\t\t[\r\n\t\t\t'closePath',\r\n\t\t\t'moveTo',\r\n\t\t\t'lineTo',\r\n\t\t\t'bezierCurveTo',\r\n\t\t\t'quadraticCurveTo',\r\n\t\t\t'arc',\r\n\t\t\t'rect'\r\n\t\t].forEach((name) => {\r\n\t\t\tthis[name] = (...args) => {\r\n\t\t\t\tthis._ops.push({op: name, args});\r\n\t\t\t};\r\n\t\t});\r\n\t\tif (arg === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (typeof arg === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tthis._ops = parser.parse(arg);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t} else if (arg.hasOwnProperty('_ops')) {\r\n\t\t\tthis._ops = [...this._ops];\r\n\t\t} else {\r\n\t\t\tthrow new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst CanvasRenderingContext2D = window.CanvasRenderingContext2D;\r\n\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n\r\nCanvasRenderingContext2D.prototype.fill = function(...args) {\r\n\tif (args[0] instanceof Path2D) {\r\n\t\tconst path = args[0];\r\n\t\tthis.beginPath();\r\n\t\tpath._ops.forEach((op) => {\r\n\t\t\tthis[op.op](...op.args);\r\n\t\t});\r\n\t\toriginalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n\t} else {\r\n\t\toriginalFill.apply(this, args);\r\n\t}\r\n};\r\n\r\nmodule.exports = Path2D;\r\n","'use strict';\r\n\r\nconst PathCommands = require('./PathCommands');\r\n\r\nfunction pathTokens(d) {\r\n\tlet idx = 0;\r\n\treturn {\r\n\t\tnext() {\r\n\t\t\tlet s = '';\r\n\t\t\twhile (d.length > idx) {\r\n\t\t\t\tconst c = d[idx];\r\n\t\t\t\tidx++;\r\n\t\t\t\tif (' ,\\n\\r\\t'.indexOf(c) > -1) {\r\n\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst type = '.+-1234567890'.indexOf(c) > -1 ? 'num' : 'str';\r\n\t\t\t\t\tif (type === 'str') {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('-+'.indexOf(c) > -1) {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\tif (s.indexOf('.') > -1) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += c;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn s || null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction command(builder, cmd, argsProvider) {\r\n\tif (cmd.toUpperCase() === 'M' || cmd.toUpperCase() === 'L' || cmd.toUpperCase() === 'T') {\r\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next());\r\n\t\treturn cmd === 'M' ? 'L'\r\n\t\t\t: cmd === 'm' ? 'l'\r\n\t\t\t: cmd;\r\n\t} else if (cmd.toUpperCase() === 'H' || cmd.toUpperCase() === 'V') {\r\n\t\tbuilder.command(cmd, argsProvider.next());\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'Z') {\r\n\t\tbuilder.command(cmd);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'C') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'S' || cmd.toUpperCase() === 'Q') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'A') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else {\r\n\t\t// https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n\t\tconsole.warn('unsupported:' + cmd);\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nconst canvasOperations = window.CanvasRenderingContext2D ? Object.keys(window.CanvasRenderingContext2D.prototype) : [\r\n\t'save',\r\n\t'restore',\r\n\t'beginPath',\r\n\t'closePath',\r\n\t'moveTo',\r\n\t'lineTo',\r\n\t'bezierCurveTo',\r\n\t'quadraticCurveTo',\r\n\t'arc',\r\n\t'arcTo',\r\n\t'ellipse',\r\n\t'rect',\r\n\t'translate',\r\n\t'rotate',\r\n\t'scale',\r\n];\r\n\r\nclass PathCommandsParser {\r\n\tconstructor() {\r\n\t\tthis._commands = new PathCommands(this);\r\n\t\tcanvasOperations.forEach((op) => {\r\n\t\t\tthis[op] = (...args) => {\r\n\t\t\t\tthis._ops.push({\r\n\t\t\t\t\top,\r\n\t\t\t\t\targs,\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\tcommand(name, ...args) {\r\n\t\targs = args || [];\r\n\t\tfor (let i = 0; i < args.length; i++) {\r\n\t\t\targs[i] = args[i] - 0;\r\n\t\t}\r\n\t\tthis._commands[name](...(args));\r\n\t}\r\n\tparse(d) {\r\n\t\tconst ops = this._ops = [];\r\n\t\tconst tokens = pathTokens(d);\r\n\t\ttry {\r\n\t\t\tlet cmd;\r\n\t\t\tlet subsequentCommand;\r\n\t\t\twhile ((cmd = tokens.next())) {\r\n\t\t\t\tif (!isNaN(cmd - 0)) {\r\n\t\t\t\t\tlet fst = true;\r\n\t\t\t\t\tconst argsProvider = {\r\n\t\t\t\t\t\tnext() {\r\n\t\t\t\t\t\t\tif (fst) {\r\n\t\t\t\t\t\t\t\tfst = false;\r\n\t\t\t\t\t\t\t\treturn cmd;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn tokens.next();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tsubsequentCommand = command(this, subsequentCommand, argsProvider);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsubsequentCommand = command(this, cmd, tokens);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('Error: ' + d);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t\treturn ops;\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommandsParser;","'use strict';\r\n\r\nfunction mag(v) {\r\n\treturn Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\n    \r\nfunction dot(u, v) {\r\n\treturn (u[0] * v[0] + u[1] * v[1]);\r\n}\r\n    \r\nfunction ratio(u, v) {\r\n\treturn dot(u, v) / (mag(u) * mag(v));\r\n}\r\n\r\nfunction clamp(value, min, max) {\r\n\treturn Math.min(Math.max(value, min), max);\r\n}\r\n    \r\nfunction angle(u, v) {\r\n\tlet sign = 1.0;\r\n\tif ((u[0] * v[1] - u[1] * v[0]) < 0) {\r\n\t\tsign = -1.0;\r\n\t}\r\n\treturn sign * Math.acos(clamp(ratio(u, v)), -1, 1);\r\n}\r\n    \r\nfunction rotClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction rotCounterClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction midPoint(u, v) {\r\n\treturn [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\n    \r\nfunction meanVec(u, v) {\r\n\treturn [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\n    \r\nfunction pointMul(u, v) {\r\n\treturn [u[0] * v[0], u[1] * v[1]];\r\n}\r\n    \r\nfunction scale(c, v) {\r\n\treturn [c * v[0], c * v[1]];\r\n}\r\n    \r\nfunction sum(u, v) {\r\n\treturn [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n\t// Convert from endpoint to center parametrization, as detailed in:\r\n\t//   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n\tif (rx === 0 || ry === 0) {\r\n\t\tctx.lineTo(x2, x1);\r\n\t\treturn;\r\n\t}\r\n\tphi = phi * (Math.PI / 180.0);\r\n\trx = Math.abs(rx);\r\n\try = Math.abs(ry);\r\n\tconst xPrime = rotClockwise(midPoint(x1, x2), phi); // F.6.5.1\r\n\tconst xPrime2 = pointMul(xPrime, xPrime);\r\n\tlet rx2 = Math.pow(rx, 2);\r\n\tlet ry2 = Math.pow(ry, 2);\r\n    \r\n\tconst lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n\tif (lambda > 1) {\r\n\t\trx *= lambda;\r\n\t\try *= lambda;\r\n\t\trx2 = Math.pow(rx, 2);\r\n\t\try2 = Math.pow(ry, 2);\r\n\t}\r\n\tlet factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n\tif (fA === fS) {\r\n\t\tfactor *= -1.0;\r\n\t}\r\n\tconst cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\r\n\tconst c = sum(rotCounterClockwise(cPrime, phi), meanVec(x1, x2)); // F.6.5.3\r\n\tconst x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\r\n\tconst x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\r\n\tconst theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n\tconst deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n\tconst start = theta;\r\n\tconst end = theta + deltaTheta;\r\n\tctx.save();\r\n\tctx.translate(c[0], c[1]);\r\n\tctx.rotate(phi);\r\n\tctx.scale(rx, ry);\r\n\tctx.arc(0, 0, 1, start, end, 1 - fS);\r\n\tctx.restore();\r\n}\r\n\r\nclass PathCommands {\r\n\tconstructor(ctx) {\r\n\t\tlet lMx;\r\n\t\tlet lMy;\r\n\t\tlet lx = 0;\r\n\t\tlet ly = 0;\r\n\t\tlet reflected;\r\n\t\tlet lastCommand = '';\r\n\t\tfunction makeReflected() {\r\n\t\t\tif ('CcSsQqTt'.indexOf(lastCommand) < 0) {\r\n\t\t\t\treturn {x: lx, y: ly};\r\n\t\t\t}\r\n\t\t\treturn reflected;\r\n\t\t}\r\n\r\n\t\tthis.M = (px, py) => {\r\n\t\t\tctx.moveTo(px, py);\r\n\t\t\tlMx = px;\r\n\t\t\tlMy = py;\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'M';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.m = (px, py) => this.M(px + lx, py + ly);\r\n\t\tthis.L = (px, py) => {\r\n\t\t\tctx.lineTo(px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'L';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.l = (px, py) => this.L(px + lx, py + ly);\r\n\t\tthis.H = (px) => this.L(px, ly);\r\n\t\tthis.h = (px) => this.H(px + lx);\r\n\t\tthis.V = (py) => this.L(lx, py);\r\n\t\tthis.v = (py) => this.V(py + ly);\r\n\t\tthis.Z = () => {\r\n\t\t\tctx.closePath();\r\n\t\t\tlx = lMx;\r\n\t\t\tly = lMy;\r\n\t\t\tlastCommand = 'Z';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.z = () => this.Z();\r\n\t\t//C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n\t\tthis.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n\t\t\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cp2x,\r\n\t\t\t\ty: 2 * py - cp2y,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'C';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(\r\n\t\t\t\tcp1x + lx, cp1y + ly,\r\n\t\t\t\tcp2x + lx, cp2y + ly,\r\n\t\t\t\tpx + lx, py + ly\r\n\t\t);\r\n\t\t//S x2 y2, x y (or s dx2 dy2, dx dy)\r\n\t\tthis.S = (cpx, cpy, px, py) => {\r\n\t\t\tconst {x: cp1x, y: cp1y} = makeReflected(lastCommand);\r\n\t\t\treturn this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n\t\tthis.Q = (cpx, cpy, px, py) => {\r\n\t\t\tctx.quadraticCurveTo(cpx, cpy, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cpx,\r\n\t\t\t\ty: 2 * py - cpy,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'Q';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//T x y (or t dx dy)\r\n\t\tthis.T = (px, py) => {\r\n\t\t\tconst {x: cpx, y: cpy} = makeReflected();\r\n\t\t\treturn this.Q(cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.t = (px, py) => this.T(px + lx, py + ly);\r\n\t\t//A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n\t\tthis.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n\t\t\tconst x1 = lx;\r\n\t\t\tconst y1 = ly;\r\n\r\n\t\t\tellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'A';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t//a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n\t\tthis.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(\r\n\t\t\t\trx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n\t\t\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommands;","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons\\image\\svg\\production\\ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons\\content\\svg\\production\\ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","'use strict';\r\n{\r\n\tconst Header = require('./type/Header');\r\n\tconst SortHeader = require('./type/SortHeader');\r\n\r\n\tconst type = {\r\n\t\tcreate(headerCell) {\r\n\t\t\tif (headerCell.sort) {\r\n\t\t\t\treturn new SortHeader(headerCell);\r\n\t\t\t}\r\n\t\t\treturn new Header(headerCell);\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\r\n\tclass Header extends BaseHeader {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t});\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Header;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tMOUSEMOVE_CELL,\r\n\t}} = require('../../core/DrawGrid');\r\n\r\n\tclass SortHeader extends BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tsuper(headerCell);\r\n\t\t\tthis._sort = headerCell.sort;\r\n\t\t\tthis._range = headerCell.range;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\tcolor,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tfont,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst state = grid.sortState;\r\n\t\t\tlet order = undefined;\r\n\t\t\tif (this._range.isCellInRange(state.col, this._range.startRow)) {\r\n\t\t\t\torder = state.order;\r\n\t\t\t}\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tconst arrowSize = ctx.measureText('').width * 1.2;\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons: [{\r\n\t\t\t\t\tname: isDef(order) ? (order === 'asc' ? 'arrow_downward' : 'arrow_upward') : null,\r\n\t\t\t\t\twidth: arrowSize,\r\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.38)',\r\n\t\t\t\t}],\r\n\t\t\t});\r\n\t\t}\r\n\t\t_executeSort(newState, grid) {\r\n\t\t\tif (typeof this._sort === 'function') {\r\n\t\t\t\tthis._sort(newState.order, newState.col, grid);\r\n\t\t\t} else {\r\n\t\t\t\tgrid.dataSource.sort(grid.getField(newState.col), newState.order);\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst state = grid.sortState;\r\n\t\t\t\t\tlet newState;\r\n\t\t\t\t\tif (this._range.isCellInRange(state.col, e.row)) {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: state.order === 'asc' ? 'desc' : 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.sortState = newState;\r\n\t\t\t\t\tthis._executeSort(newState, grid);\r\n\t\t\t\t\tgrid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n\t\t\t\t}),\r\n\t\t\t\t// mouse move\r\n\t\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}),\r\n\t\t\t\t//MOUSEENTER'col-resize'move\r\n\t\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t\t}),\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = SortHeader;\r\n}","'use strict';\r\n\r\n\r\nconst {isPromise} = require('../../internal/utils');\r\nconst {\r\n\tSELECTED_CELL,\r\n\tSCROLL,\r\n\tCHANGED_VALUE\r\n} = require('../../list-grid/EVENT_TYPE');\r\nconst ErrorMessage = require('./ErrorMessage');\r\nconst WarningMessage = require('./WarningMessage');\r\nconst InfoMessage = require('./InfoMessage');\r\n\r\n\r\nclass MessageHandler {\r\n\tconstructor(grid, getMessage) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._messageInstances = {};\r\n\t\tthis._bindGridEvent(grid, getMessage);\r\n\t}\r\n\tdispose() {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\tfor (const k in messageInstances) {\r\n\t\t\tmessageInstances[k].dispose();\r\n\t\t}\r\n\t\tthis._messageInstances = null;\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\r\n\t\tif (!message || isPromise(message)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tinstance.drawCellMessage(message, context, style, helper, info);\r\n\t}\r\n\t_attach(col, row, message) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tif (info && info.instance !== instance) {\r\n\t\t\tinfo.instance.detachMessageElement();\r\n\t\t}\r\n\t\tinstance.attachMessageElement(col, row, this._toMessageText(message));\r\n\t\tthis._attachInfo = {col, row, instance};\r\n\t}\r\n\t_move(col, row) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info || info.col !== col || info.row !== row) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.moveMessageElement(col, row);\r\n\t}\r\n\t_detach() {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.detachMessageElement();\r\n\t\tthis._attachInfo = null;\r\n\t}\r\n\t_bindGridEvent(grid, getMessage) {\r\n\t\tconst onSelectMessage = (sel) => {\r\n\t\t\tconst message = getMessage(sel.col, sel.row);\r\n\t\t\tif (!message || isPromise(message)) {\r\n\t\t\t\tthis._detach();\r\n\t\t\t} else {\r\n\t\t\t\tthis._attach(sel.col, sel.row, message);\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\tif (!e.selected) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.before.col === e.col && e.before.row === e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t\tgrid.listen(SCROLL, () => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tthis._move(sel.col, sel.row);\r\n\t\t});\r\n\t\tgrid.listen(CHANGED_VALUE, (e) => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tif (sel.col !== e.col || sel.row !== e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t}\r\n\t_getMessageInstanceOfMessage(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t\t}\r\n\t\tconst type = ('' + message.type).toLowerCase();\r\n\t\tif (type === 'info') {\r\n\t\t\treturn this._createMessageInstance('info', InfoMessage);\r\n\t\t} else if (type === 'warning') {\r\n\t\t\treturn this._createMessageInstance('warning', WarningMessage);\r\n\t\t}\r\n\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t}\r\n\t_toMessageText(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn message;\r\n\t\t}\r\n\t\tif (message.message) {\r\n\t\t\treturn message.message;\r\n\t\t}\r\n\t\treturn '' + message;\r\n\t}\r\n\t_createMessageInstance(name, Message) {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\treturn messageInstances[name] || (messageInstances[name] = new Message(this._grid));\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageHandler;","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst ErrorMessageElement = require('./internal/ErrorMessageElement');\r\n\r\nconst RED_A100 = '#ff8a80';\r\n// const RED_A400 = '#FF1744';\r\n\r\nclass ErrorMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new ErrorMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = RED_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessage;","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__error-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass ErrorMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./ErrorMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;user-select:none}.cheetah-grid__message-element--hidden{opacity:0;display:none}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}.cheetah-grid__message-element{border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element.helper-text--right-justified{text-align:right}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n\n// exports\n","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst WarningMessageElement = require('./internal/WarningMessageElement');\r\n\r\nconst DEEP_ORANGE_A100 = '#ff9e80';\r\n\r\nclass WarningMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new WarningMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = DEEP_ORANGE_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessage;","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__warning-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass WarningMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./WarningMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n\n// exports\n","'use strict';\r\n\r\nconst BaseMessage = require('./BaseMessage');\r\nconst MessageElement = require('./internal/MessageElement');\r\n\r\nconst Rect = require('../../internal/Rect');\r\n\r\nconst GREY_L2 = '#e0e0e0';\r\n// const GREY_L1 = '#bdbdbd';\r\n\t\r\nclass InfoMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new MessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = GREY_L2;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 2, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InfoMessage;","'use strict';\r\n\r\nconst themePlugins = require('./plugins/themes');\r\nconst iconPlugins = require('./plugins/icons');\r\n\r\nfunction register(obj, name, value) {\r\n\tif (value) {\r\n\t\tconst old = obj[name];\r\n\t\tobj[name] = value;\r\n\t\treturn old;\r\n\t} else {\r\n\t\treturn obj[name];\r\n\t}\r\n}\r\nfunction registers(obj, values) {\r\n\tfor (const k in values) {\r\n\t\tobj[k] = values[k];\r\n\t}\r\n}\r\nmodule.exports = {\r\n\ttheme(name, theme) {\r\n\t\treturn register(themePlugins, name, theme);\r\n\t},\r\n\ticon(name, icon) {\r\n\t\treturn register(iconPlugins, name, icon);\r\n\t},\r\n\ticons(icons) {\r\n\t\tregisters(iconPlugins, icons);\r\n\t},\r\n};"],"sourceRoot":""}
!function(){"use strict";var _set=function t(e,n,r,o){var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);null!==a&&t(a,n,r,o)}else if("value"in i&&i.writable)i.value=r;else{var l=i.set;void 0!==l&&l.call(o,r)}return r},_get=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(function(){var root,factory;root=window,factory=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=57)}([function(t,e,n){(function(e){var n=function(t){return null!==t&&void 0!==t},r=function(t,e){for(var r=t,o=arguments.length,i=Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];for(var l=0;l<i.length&&n(r);l++)r=e(r,i[l]);return r},o=void 0,i=void 0,a={get find(){return o||(o=Array.prototype.find?function(t,e){return Array.prototype.find.call(t,e)}:function(t,e){var n=a.findIndex(t,e);return n>=0?t[n]:void 0})},get findIndex(){return i||(i=Array.prototype.findIndex?function(t,e){return Array.prototype.findIndex.call(t,e)}:function(t,e){for(var n=t.length,r=0;r<n;r++){if(e(t[r],r,t))return r}return-1})}},l=window.navigator.userAgent.toLowerCase(),s=l.match(/(msie)/)||l.match(/trident/),c=l.indexOf("chrome")>-1&&-1===l.indexOf("edge"),u=l.indexOf("firefox")>-1,h=function(t){return t&&"function"==typeof t.then};t.exports={isDef:n,browser:{IE:s,Chrome:c,Firefox:u,heightLimit:c?33554431:u?17895588:10737433},extend:function(){for(var t={},e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(e){var n=function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0,enumerable:!0})};for(var r in e)n(r)}),t},isDescendantElement:function(t,e){for(;e.parentElement;){var n=e.parentElement;if(t===n)return!0;e=n}return!1},getChainSafe:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return r.apply(void 0,[t,function(t,e){return t[e]}].concat(n))},applyChainSafe:r,getOrApply:function(t){if("function"==typeof t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}return t},getIgnoreCase:function(t,e){if(t[e])return t[e];var n=e.toLowerCase();if(t[n])return t[n];var r=e.toLowerCase();if(t[r])return t[r];for(var o in t)if(o.toLowerCase()===n)return t[o]},isPromise:h,then:function(t,e){return h(t)?t.then(function(t){return e(t)}):e(t)},array:a,obj:{setReadonly:function(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,value:n})},each:function(t,e){for(var n in t)e(t[n],n,t)},isObject:function(t){return t===Object(t)}},str:{endsWith:function(t,e,n){var r=t.toString();("number"!=typeof n||!isFinite(n)||Math.floor(n)!==n||n>r.length)&&(n=r.length),n-=e.length;var o=r.lastIndexOf(e,n);return-1!==o&&o===n}},event:{getMouseButtons:function(t){return n(t.buttons)?t.buttons:n(t.which)?3===t.which?4:2===t.which?4:t.which:0===t.button||1===t.button?1:2===t.button?2:0},getKeyCode:function(t){return t.keyCode||t.which},isTouchEvent:function(t){return!!t.changedTouches},cancel:function(t){t.preventDefault(),t.stopPropagation()}},style:{toBoxArray:function(t){return e(t)?3===t.length?[t[0],t[1],t[2],t[1]]:2===t.length?[t[0],t[1],t[0],t[1]]:1===t.length?[t[0],t[0],t[0],t[0]]:t:[t,t,t,t]}},emptyFn:function(){}}}).call(this,n(2).Array_isArray)},function(t,e,n){var r,o=window.Symbol?window.Symbol:(r=1,function(t){var e=r++;return t?" $$$ "+t+" - "+e+" $$$ ":" $$$ "+e+" $$$ "}),i={};t.exports={get:function(t){return t?i[t]?i[t]:i[t]=o(t):o()},get PROTECTED_SYMBOL(){return this.get("protected")},get CHECK_COLUMN_STATE_ID(){return this.get("chkcol.stateID")},get BUTTON_COLUMN_STATE_ID(){return this.get("btncol.stateID")},get COLUMN_FADEIN_STATE_ID(){return this.get("col.fadein_stateID")},get BRANCH_GRAPH_COLUMN_STATE_ID(){return this.get("branch_graph_col.stateID")},get SMALL_DIALOG_INPUT_EDITOR_STATE_ID(){return this.get("small_dialog_input_editor.stateID")},get INLINE_INPUT_EDITOR_STATE_ID(){return this.get("inline_input_editor.stateID")},get INLINE_MENU_EDITOR_STATE_ID(){return this.get("inline_menu_editor.stateID")}}},function(t,e,n){t.exports={Array_isArray:window.Array.isArray}},function(t,e,n){var r=n(19),o=void 0,i=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._color=t.color,n._font=t.font,n._padding=t.padding,n}return _inherits(e,r),_createClass(e,null,[{key:"DEFAULT",get:function(){return o||(o=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.doChangeStyle()}},{key:"font",get:function(){return this._font},set:function(t){this._font=t,this.doChangeStyle()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r=function(){var t=document.createElement("div");return t.classList.add("cheetah-grid"),t},o=function(t){navigator.vibrate&&D(t)&&navigator.vibrate(50)},i=function(t,e){var n=t.getTargetRowAtInternal(e);if(O(n))return n;var r=Math.min(Math.ceil(e/t[$].defaultRowHeight),t.rowCount-1),o=w(t,0,r);return e>=o?function(n,r){for(var o=r-m(t,n),i=t[$].rowCount,a=n;a<i;a++){var l=o+m(t,a);if(o<=e&&e<l)return{top:o,row:a};o=l}return null}(r,o):function(n,r){for(var o=r,i=n;i>=0;i--){var a=o-m(t,i);if(a<=e&&e<o)return{top:a,row:i};o=a}return null}(r,o)},a=function(t,e){for(var n=0,r=t[$].colCount,o=0;o<r;o++){var i=n+_(t,o);if(i>e)return{left:n,col:o};n=i}return null},l=function(t,e){if(!t[$].frozenRowCount)return null;for(var n=t[$].scroll.top,r=t[$].frozenRowCount,o=0;o<r;o++){var i=n+m(t,o);if(i>e)return{top:n,row:o};n=i}return null},s=function(t,e){if(!t[$].frozenColCount)return null;for(var n=t[$].scroll.left,r=t[$].frozenColCount,o=0;o<r;o++){var i=n+_(t,o);if(i>e)return{left:n,col:o};n=i}return null},c=function(t){if(!t[$].frozenRowCount)return null;for(var e=t[$].scroll.top,n=0,r=t[$].frozenRowCount,o=0;o<r;o++)n+=m(t,o);return new U(t[$].scroll.left,e,t[$].canvas.width,n)},u=function(t){if(!t[$].frozenColCount)return null;for(var e=t[$].scroll.left,n=0,r=t[$].frozenColCount,o=0;o<r;o++)n+=_(t,o);return new U(e,t[$].scroll.top,n,t[$].canvas.height)},h=function(t,e,n,r,o,i,a,l,s,c,u,h){var f=new U(r-s.left,a-s.top,o,l),d=U.bounds(Math.max(r,u)-s.left,Math.max(a,c)-s.top,f.right,f.bottom);if(d.height>0&&d.width>0){e.save();try{var v=new ut(n,i,e,f,d,function(t,e,n){return!!t[$].drawCells[n]&&!!t[$].drawCells[n][e]}(t,n,i),t[$].selection,h),g=t.onDrawCell(n,i,v);if(B(g)){!function(t,e,n,r){t[$].drawCells[n]||(t[$].drawCells[n]={}),t[$].drawCells[n][e]=r}(t,n,i,v);var p=n;v._delayMode(t,function(){!function(t,e,n){t[$].drawCells[n]&&(delete t[$].drawCells[n][e],0===Object.keys(t[$].drawCells[n]).length&&delete t[$].drawCells[n])}(t,p,i)}),g.then(function(){v.terminate()})}}finally{e.restore()}}},f=function(t,e,n,r,o,i,a,l,s,c,u){var f=t[$].colCount,d=function(n,r){if(n>=f-1&&t[$].canvas.width>r-s.left){var o=r-s.left;e.save(),e.beginPath(),e.fillStyle=t.underlayBackgroundColor||"#F6F6F6",e.rect(o,a-s.top,t[$].canvas.width-o,l),e.fill(),e.restore()}},v=0;if(n){for(var g=n.left,p=t[$].frozenColCount,y=n.col;y<p;y++){var C=_(t,y);if(h(t,e,y,g,C,i,a,l,s,c,0,u),o<=(g+=C))return void d(y,g)}v=g}for(var m=r.left,w=r.col;w<f;w++){var b=_(t,w);if(h(t,e,w,m,b,i,a,l,s,c,v,u),o<=(m+=b))return void d(w,m)}d(f-1,m)},d=function(t,e){var n=L(t),r=t[$].rowCount,o=t._getInitContext(),c=i(t,Math.max(n.top,e.top))||{top:w(t,0,r-1),row:r},u=a(t,Math.max(n.left,e.left))||{left:C(t,0,t[$].colCount-1),col:t[$].colCount},h=Math.min(n.bottom,e.bottom),d=Math.min(n.right,e.right),v=l(t,Math.max(n.top,e.top)),g=s(t,Math.max(n.left,e.left)),p=new st,_=function(e,i){if(e>=r-1&&t[$].canvas.height>i-n.top){var a=i-n.top;o.save(),o.beginPath(),o.fillStyle=t.underlayBackgroundColor||"#F6F6F6",o.rect(0,a,t[$].canvas.width,t[$].canvas.height-a),o.fill(),o.restore()}},y=0;if(v){for(var b=v.top,x=t[$].frozenRowCount,k=v.row;k<x;k++){var E=m(t,k);if(f(t,o,g,u,d,k,b,E,n,0,p),h<=(b+=E))return _(k,b),void p.draw(o)}y=b}for(var I=c.top,R=c.row;R<r;R++){var S=m(t,R);if(f(t,o,g,u,d,R,I,S,n,y,p),h<=(I+=S))return _(R,I),void p.draw(o)}_(r-1,I),p.draw(o)},v=function(t,e){return Math.round(G.toPx(e,t[$].calcWidthContext))},g=function(t){return v(t,t.defaultColWidth)},p=function(t,e,n){var r=t[$].colWidthsLimit[e];if(!r)return n;if(r.min){var o=v(t,r.min);if(o>n)return o}if(r.max){var i=v(t,r.max);if(i<n)return i}return n},_=function(t,e){var n=t[$].colWidthsMap.get(e);return n?p(t,e,v(t,n)):g(t)},y=function(t,e,n){t[$].colWidthsMap.put(e,n)},C=function(t,e,n){var r=n-e+1,o=g(t)*r;return t[$].colWidthsMap.each(e,n,function(e,n){o+=p(t,n,v(t,e))-g(t)}),o},m=function(t,e){var n=t.getRowHeightInternal(e);if(O(n))return n;var r=t[$].rowHeightsMap.get(e);return r||t[$].defaultRowHeight},w=function(t,e,n){var r=t.getRowsHeightInternal(e,n);if(O(r))return r;var o=n-e+1,i=t[$].defaultRowHeight*o;return t[$].rowHeightsMap.each(e,n,function(e){i+=e-t[$].defaultRowHeight}),i},b=function(t,e,n,r){var o=t.getOffsetInvalidateCells();function i(t){return o>0&&(t.start.col-=o,t.start.row-=o,t.end.col+=o,t.end.row+=o),t}var a=i(t.selection.range),l=t.getCellsRect(a.start.col,a.start.row,a.end.col,a.end.row);t.selection._setFocusCell(e,n,r),t.makeVisibleCell(e,n),t.focusCell(e,n);var s=i(t.selection.range),c=t.getCellsRect(s.start.col,s.start.row,s.end.col,s.end.row);if(c.intersection(l)){var u=U.max(c,l);d(t,u)}else d(t,l),d(t,c)},x=function(t,e){D(e)&&(e=e.changedTouches[0]);var n=e.clientX||e.pageX+window.scrollX,r=e.clientY||e.pageY+window.scrollY,o=t[$].canvas.getBoundingClientRect();return o.right<=n?null:o.bottom<=r?null:{x:n-o.left+t[$].scroll.left,y:r-o.top+t[$].scroll.top}},k=function(t){var e=function(e){var n=x(t,e);if(!n)return{};var r=t.getCellAt(n.x,n.y);return r.col<0||r.row<0?{abstractPos:n,cell:r}:{abstractPos:n,cell:r,eventArgs:{col:r.col,row:r.row,event:e}}},n=function(e){var n=t[$].colWidthsLimit[e];return!(n&&n.min&&n.max)||n.max!==n.min};t[$].handler.on(t[$].element,"mousedown",function(r){var o=e(r),i=o.abstractPos,a=o.eventArgs;if(i){if(a){var l=t.fireListeners(nt.MOUSEDOWN_CELL,a);if(M.findIndex(l,function(t){return!t})>=0)return}if(1===F(r)){var s=E(t,i.x,i.y);s>=0&&n(s)?t[$].columnResizer.start(s,r):t[$].cellSelector.start(r)}}});var r=null,o=null;function i(t){o&&(clearTimeout(o),o=null)}t[$].handler.on(t[$].element,"touchstart",function(i){if(r){var a=e(i).eventArgs;if(a&&a.col===r.col&&a.row===r.row&&t.fireListeners(nt.DBLTAP_CELL,a),r=null,i.defaultPrevented)return}else r=e(i).eventArgs,setTimeout(function(){r=null},350);o=setTimeout(function(){o=null;var e=x(t,i);if(e){var r=E(t,e.x,e.y,15);r>=0&&n(r)?t[$].columnResizer.start(r,i):t[$].cellSelector.start(i)}},500)}),t[$].handler.on(t[$].element,"touchcancel",i),t[$].handler.on(t[$].element,"touchmove",i),t[$].handler.on(t[$].element,"touchend",function(e){o&&(clearTimeout(o),t[$].cellSelector.select(e),o=null)});var a=!1,l=null,s=null;function h(e){t.fireListeners(nt.MOUSEENTER_CELL,e),l=e}function f(){var e=l;l=null,e&&t.fireListeners(nt.MOUSELEAVE_CELL,{col:e.col,row:e.row})}function v(e){t.fireListeners(nt.MOUSEOVER_CELL,e),s=e}function g(){var e=s;s=null,e&&t.fireListeners(nt.MOUSEOUT_CELL,{col:e.col,row:e.row})}var p=t[$].scrollable.getElement();t[$].handler.on(p,"mouseover",function(t){a=!0}),t[$].handler.on(p,"mouseout",function(t){a=!1,g()}),t[$].handler.on(t[$].element,"mouseleave",function(t){f()}),t[$].handler.on(t[$].element,"mousemove",function(r){var o=e(r),i=o.abstractPos,c=o.eventArgs;if(c){var u=l;if(u)if(t.fireListeners(nt.MOUSEMOVE_CELL,c),u.col!==c.col||u.row!==c.row){g(),f();var d={col:c.col,row:c.row};h(d),a&&v(d)}else a&&!s&&v({col:c.col,row:c.row});else{var p={col:c.col,row:c.row};h(p),a&&v(p),t.fireListeners(nt.MOUSEMOVE_CELL,c)}}else g(),f();if(!t[$].columnResizer.moving(r)&&!t[$].cellSelector.moving(r)){var _=t[$].element.style;if(i){var y=E(t,i.x,i.y);y>=0&&n(y)?_.cursor="col-resize":"col-resize"===_.cursor&&(_.cursor="")}else"col-resize"===_.cursor&&(_.cursor="")}}),t[$].handler.on(t[$].element,"click",function(n){if(!t[$].columnResizer.lastMoving(n)&&!t[$].cellSelector.lastMoving(n)&&t.hasListeners(nt.CLICK_CELL)){var r=e(n).eventArgs;r&&t.fireListeners(nt.CLICK_CELL,r)}}),t[$].handler.on(t[$].element,"dblclick",function(n){if(t.hasListeners(nt.DBLCLICK_CELL)){var r=e(n).eventArgs;r&&t.fireListeners(nt.DBLCLICK_CELL,r)}}),t[$].focusControl.listen("keydown",function(e,n){t.fireListeners(nt.KEYDOWN,e,n)}),t[$].selection.listen(nt.SELECTED_CELL,function(e){t.fireListeners(nt.SELECTED_CELL,e,e.selected)}),t[$].scrollable.onScroll(function(e){!function(t,e){var n=t[$].scroll.left,r=t[$].scroll.top,o=t[$].scrollable.scrollLeft-n,i=t[$].scrollable.scrollTop-r;t[$].scroll={left:t[$].scrollable.scrollLeft,top:t[$].scrollable.scrollTop};var a=L(t);if(Math.abs(o)>=a.width||Math.abs(i)>=a.height)d(t,a);else{if(t[$].context.drawImage(t[$].canvas,-o,-i),0!==o){var l=a.copy();if(o<0){if(l.width=-o,t[$].frozenColCount>0){var s=u(t);l.width+=s.width}}else o>0&&(l.left=l.right-o);d(t,l),o>0&&t[$].frozenColCount>0&&d(t,u(t))}if(0!==i){var h=a.copy();if(i<0){if(h.height=-i,t[$].frozenRowCount>0){var f=c(t);h.height+=f.height}}else i>0&&(h.top=h.bottom-i);d(t,h),i>0&&t[$].frozenRowCount>0&&d(t,c(t))}}}(t),t.fireListeners(nt.SCROLL,{event:e})}),t[$].focusControl.onKeyDownMove(function(e){!function(t,e){var n=e.shiftKey,r=z(e),o=n?t.selection._focus:t.selection._sel;if(r===Q){var i=t.getMoveLeftColByKeyDownInternal(o);if(i<0)return;b(t,i,o.row,n),W(e)}else if(r===Z){var a=t.getMoveUpRowByKeyDownInternal(o);if(a<0)return;b(t,o.col,a,n),W(e)}else if(r===J){var l=t.getMoveRightColByKeyDownInternal(o);if(t.colCount<=l)return;b(t,l,o.row,n),W(e)}else if(r===tt){var s=t.getMoveDownRowByKeyDownInternal(o);if(t.rowCount<=s)return;b(t,o.col,s,n),W(e)}else if(r===X){var c=e.ctrlKey?0:o.row;b(t,0,c,e.shiftKey),W(e)}else if(r===q){var u=e.ctrlKey?t.rowCount-1:o.row;b(t,t.colCount-1,u,n),W(e)}}(t,e)}),t.listen("copydata",function(e){for(var n="",r=e.start.row;r<=e.end.row;r++){for(var o=e.start.col;o<=e.end.col;o++){var i=t.getCopyCellValue(o,r);if(window.Promise&&i instanceof window.Promise);else{var a=""+i;a.match(/^\[object .*\]$/)||(n+=a)}o<e.end.col&&(n+="\t")}n+="\n"}return n}),t[$].focusControl.onCopy(function(e){return M.find(t.fireListeners("copydata",t[$].selection.range),O)}),t[$].focusControl.onInput(function(e){var n=t[$].selection.select,r=n.col,o=n.row;t.fireListeners(nt.INPUT_CELL,{col:r,row:o,value:e})}),t.bindEventsInternal()},E=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if(t[$].frozenRowCount<=0)return-1;if(!c(t).inPoint(e,n))return-1;var o=t.getCellAt(e,n),i=t.getCellRect(o.col,o.row);return e<i.left+r?o.col-1:i.right-r<e?o.col:-1},L=function(t){return new U(t[$].scroll.left,t[$].scroll.top,t[$].canvas.width,t[$].canvas.height)},I=function(t,e){var n=e.copy(),r=L(t);return n.offsetLeft(-r.left),n.offsetTop(-r.top),n},R=function(t,e){var n=t.type;t.type="",t.value=e,n&&(t.type=n)},S=n(0),O=S.isDef,A=S.browser,T=S.isDescendantElement,M=S.array,B=S.isPromise,P=S.event,D=P.isTouchEvent,F=P.getMouseButtons,z=P.getKeyCode,W=P.cancel,j=n(13),U=n(8),N=n(59),H=n(5),V=n(63),K=n(27),G=n(17),Y=n(64),$=n(1).PROTECTED_SYMBOL,q=35,X=36,Q=37,Z=38,J=39,tt=40,et=67,nt={CLICK_CELL:"click_cell",DBLCLICK_CELL:"dblclick_cell",DBLTAP_CELL:"dbltap_cell",MOUSEDOWN_CELL:"mousedown_cell",MOUSEUP_CELL:"mouseup_cell",SELECTED_CELL:"selected_cell",KEYDOWN:"keydown",MOUSEMOVE_CELL:"mousemove_cell",MOUSEENTER_CELL:"mouseenter_cell",MOUSELEAVE_CELL:"mouseleave_cell",MOUSEOVER_CELL:"mouseover_cell",MOUSEOUT_CELL:"mouseout_cell",INPUT_CELL:"input_cell",EDITABLEINPUT_CELL:"editableinput_cell",MODIFY_STATUS_EDITABLEINPUT_CELL:"modify_status_editableinput_cell",RESIZE_COLUMN:"resize_column",SCROLL:"scroll"},rt=function(){function t(e){_classCallCheck(this,t),this._grid=e,this._handler=new H,this._events={},this._started=!1,this._moved=!1}return _createClass(t,[{key:"moving",value:function(t){return!!this._started}},{key:"lastMoving",value:function(t){if(this.moving(t))return!0;var e=this._mouseEndPoint;if(!e)return!1;var n=x(this._grid,t);return n.x===e.x&&n.y===e.y}},{key:"_bindMoveAndUp",value:function(t){var e=this;D(t)?(this._events.touchmove=this._handler.on(document.body,"touchmove",function(t){return e._mouseMove(t)},{passive:!1}),this._events.touchend=this._handler.on(document.body,"touchend",function(t){return e._mouseUp(t)}),this._events.touchcancel=this._handler.on(document.body,"touchcancel",function(t){return e._mouseUp(t)})):(this._events.mousemove=this._handler.on(document.body,"mousemove",function(t){return e._mouseMove(t)}),this._events.mouseup=this._handler.on(document.body,"mouseup",function(t){return e._mouseUp(t)})),this._started=!0,this._moved=!1}},{key:"_mouseMove",value:function(t){D(t)||1===F(t)?(this._moved=this._moveInternal(t)||this._moved,W(t)):this._mouseUp(t)}},{key:"_moveInternal",value:function(t){}},{key:"_mouseUp",value:function(t){var e=this;this._handler.off(this._events.mousemove),this._handler.off(this._events.touchmove),this._handler.off(this._events.mouseup),this._handler.off(this._events.touchend),this._handler.off(this._events.touchcancel),this._started=!1,this._upInternal(t),this._moved&&(this._mouseEndPoint=x(this._grid,t),setTimeout(function(){e._mouseEndPoint=null},10))}},{key:"_upInternal",value:function(t){}},{key:"dispose",value:function(){this._handler.dispose()}}]),t}(),ot=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,rt),_createClass(e,[{key:"start",value:function(t){var e=this._getTargetCell(t);e&&(b(this._grid,e.col,e.row,t.shiftKey),this._bindMoveAndUp(t),this._cell=e,W(t),o(t))}},{key:"select",value:function(t){var e=this._getTargetCell(t);e&&(b(this._grid,e.col,e.row,t.shiftKey),this._cell=e)}},{key:"_moveInternal",value:function(t){var e=this,n=this._getTargetCell(t);if(!n||this._cell.col===n.col&&this._cell.row===n.row)return!1;b(this._grid,n.col,n.row,!0);var r=n.col<e._cell.col&&0<n.col?n.col-1:e._cell.col<n.col&&n.col+1<e._grid.colCount?n.col+1:n.col,o=n.row<e._cell.row&&0<n.row?n.row-1:e._cell.row<n.row&&n.row+1<e._grid.rowCount?n.row+1:n.row;return r===n.col&&o===n.row||this._grid.makeVisibleCell(r,o),this._cell=n,!0}},{key:"_getTargetCell",value:function(t){var e=x(this._grid,t);if(!e)return null;var n=this._grid.getCellAt(e.x,e.y);return n.col<0||n.row<0?null:n}}]),e}(),it=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._targetCol=-1,n}return _inherits(e,rt),_createClass(e,[{key:"start",value:function(t,e){var n=void 0;n=D(e)?e.changedTouches[0].pageX:e.pageX,this._x=n,this._preX=0,this._bindMoveAndUp(e),this._targetCol=t,this._invalidateAbsoluteLeft=C(this._grid,0,t-1),W(e),o(e)}},{key:"_moveInternal",value:function(t){var e=(D(t)?t.changedTouches[0].pageX:t.pageX)-this._x,n=e-this._preX;this._preX=e;var r=this._grid.getColWidth(this._targetCol),o=p(this._grid,this._targetCol,r+n);o<10&&n<0&&(o=10),y(this._grid,this._targetCol,o);var i=L(this._grid);return i.left=this._invalidateAbsoluteLeft,d(this._grid,i),this._grid.fireListeners(nt.RESIZE_COLUMN,{col:this._targetCol}),!0}},{key:"_upInternal",value:function(t){this._grid.updateScroll()}}]),e}(),at=function(t){function e(t,n,r){_classCallCheck(this,e);var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));o._grid=t,o._scrollable=r,o._handler=new H,o._input=document.createElement("input"),o._input.classList.add("grid-focus-control"),o._input.readOnly=!0,n.appendChild(o._input),o._handler.on(o._input,"compositionstart",function(e){o._input.classList.add("composition"),o._input.style.font=o._grid.font||"16px sans-serif",o._isComposition=!0,t.focus()}),o._handler.on(o._input,"compositionend",function(t){o._isComposition=!1,o._input.classList.remove("composition"),o._input.style.font="",o._input.readOnly||o.fireListeners("input",o._input.value),R(o._input,"")}),o._handler.on(o._input,"keypress",function(t){o._isComposition||(!o._input.readOnly&&t.key&&1===t.key.length&&("c"===t.key&&(t.ctrlKey||t.metaKey)||(o.fireListeners("input",t.key),W(t))),R(o._input,""))}),o._handler.on(o._input,"keydown",function(t){if(!o._isComposition){var e=z(t);o.fireListeners("keydown",e,t),!o._input.readOnly&&o._input.value&&o.fireListeners("input",o._input.value),R(o._input,"")}});var i=function(t){o._isComposition||R(o._input,"")};return o._handler.on(o._input,"input",i),o._handler.on(o._input,"keyup",i),o._handler.on(document,"keydown",function(t){A.IE&&(t.target===o._input&&z(t)===et&&t.ctrlKey&&(R(o._input,"dummy"),o._input.select(),setTimeout(function(){R(o._input,"")},100)))}),o._handler.on(document,"copy",function(t){if(!o._isComposition&&T(n,t.target)){R(o._input,"");var e=M.find(o.fireListeners("copy"),O);O(e)&&(W(t),A.IE?window.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e))}}),o}return _inherits(e,j),_createClass(e,[{key:"onKeyDownMove",value:function(t){var e=this;this._handler.on(this._input,"keydown",function(n){if(!e._isComposition){var r=z(n);r!==Q&&r!==Z&&r!==J&&r!==tt&&r!==X&&r!==q||t(n)}})}},{key:"onInput",value:function(t){return this.listen("input",t)}},{key:"onCopy",value:function(t){return this.listen("copy",t)}},{key:"focus",value:function(){this._input.focus()}},{key:"setFocusRect",value:function(t){var e=this._scrollable.calcTop(t.top);this._input.style.top=(e-K.getScrollBarSize()).toFixed()+"px",this._input.style.left=t.left.toFixed()+"px",this._input.style.width=t.width.toFixed()+"px",this._input.style.height=t.height.toFixed()+"px"}},{key:"resetInputStatus",value:function(){for(var t=this._input,e=t.classList.contains("composition"),n=t.attributes,r=[],o=0,i=n.length;o<i;o++){var a=n[o];this._inputStatus.hasOwnProperty(a.nodeName)||r.push(a.name)}for(var l in r.forEach(function(e){t.removeAttribute(e)}),this._inputStatus)t.setAttribute(l,this._inputStatus[l]);e?(t.classList.add("composition"),t.style.font=this._grid.font||"16px sans-serif"):t.classList.remove("composition")}},{key:"storeInputStatus",value:function(){var t=this._input;this._inputStatus={};for(var e=t.attributes,n=0,r=e.length;n<r;n++){var o=e[n];this._inputStatus[o.name]=o.value}}},{key:"setDefaultInputStatus",value:function(){}},{key:"dispose",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this),this._handler.dispose()}},{key:"editMode",set:function(t){this._input.readOnly=!t},get:function(){return!this._input.readOnly}},{key:"input",get:function(){return this._input}}]),e}(),lt=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._grid=t,n._sel={col:0,row:0},n._focus={col:0,row:0},n._start={col:0,row:0},n._end={col:0,row:0},n}return _inherits(e,j),_createClass(e,[{key:"_setSelectCell",value:function(t,e){var n=this;this._wrapFireSelectedEvent(function(){n._sel={col:t,row:e},n._start={col:t,row:e}})}},{key:"_setFocusCell",value:function(t,e,n){var r=this;this._wrapFireSelectedEvent(function(){n||r._setSelectCell(t,e),r._focus={col:t,row:e},r._end={col:t,row:e}})}},{key:"_wrapFireSelectedEvent",value:function(t){if(this._isWraped)t();else{this._isWraped=!0;try{var e={col:this._sel.col,row:this._sel.row,selected:!1};t();var n={col:this._sel.col,row:this._sel.row,selected:!0,before:{col:e.col,row:e.row}};e.after={col:n.col,row:n.row},this.fireListeners(nt.SELECTED_CELL,e),this.fireListeners(nt.SELECTED_CELL,n)}finally{this._isWraped=!1}}}},{key:"range",get:function(){var t=Math.min(this._start.col,this._end.col),e=Math.min(this._start.row,this._end.row),n=Math.max(this._start.col,this._end.col),r=Math.max(this._start.row,this._end.row);return{start:{col:t,row:e},end:{col:n,row:r},inCell:function(o,i){return t<=o&&o<=n&&e<=i&&i<=r}}}},{key:"select",get:function(){return{col:this._sel.col,row:this._sel.row}},set:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._wrapFireSelectedEvent(function(){var n=e.col,r=void 0===n?0:n,o=e.row,i=void 0===o?0:o;t._setSelectCell(r,i),t._setFocusCell(r,i,!0)})}}]),e}(),st=function(){function t(){_classCallCheck(this,t),this._layers={}}return _createClass(t,[{key:"addDraw",value:function(t,e){(this._layers[t]||(this._layers[t]=new ct(t))).addDraw(e)}},{key:"draw",value:function(t){var e=[];for(var n in this._layers)e.push(this._layers[n]);e.sort(function(t,e){return t.level-e.level}),e.forEach(function(e){return e.draw(t)})}}]),t}(),ct=function(){function t(e){_classCallCheck(this,t),this._level=e,this._list=[]}return _createClass(t,[{key:"addDraw",value:function(t){this._list.push(t)}},{key:"draw",value:function(t){this._list.forEach(function(e){t.save();try{e(t)}finally{t.restore()}})}},{key:"level",get:function(){return this._level}}]),t}(),ut=function(){function t(e,n,r,o,i,a,l,s){_classCallCheck(this,t),this._col=e,this._row=n,this._mode=0,this._ctx=r,this._rect=o,this._drawRect=i,this._drawing=a,this._selection=l,this._drawLayers=s}return _createClass(t,[{key:"getSelectState",value:function(){var t=this._selection.select;return{selected:t.col===this._col&&t.row===this._row,selection:this._selection.range.inCell(this._col,this._row)}}},{key:"getContext",value:function(){return 0===this._mode?this._ctx:this._grid._getInitContext()}},{key:"getRect",value:function(){return 0===this._mode?this._rect:this._rect?this._rect:this._grid.getCellRelativeRect(this._col,this._row)}},{key:"setRect",value:function(t){this._rect=t}},{key:"getDrawRect",value:function(){if(0===this._mode)return this._drawRect;var t=this._grid.getCellRect(this._col,this._row);return this._toRelativeDrawRect(t)}},{key:"toCurrentContext",value:function(){if(0===this._mode)return this;var e=this._grid.getCellRect(this._col,this._row),n=I(this._grid,e),r=this._toRelativeDrawRect(e),o=new t(this._col,this._row,this.getContext(),n,r,this.drawing,this._selection,this._drawLayers);return o.toCurrentContext=this.toCurrentContext.bind(this),o}},{key:"addLayerDraw",value:function(t,e){this._drawLayers.addDraw(t,e)}},{key:"_toRelativeDrawRect",value:function(t){var e=L(this._grid),n=t.copy();if(!n.intersection(e))return null;var r=this._grid.isFrozenCell(this._col,this._row);if(this._grid.frozenColCount>=0&&(!r||!r.col)){var o=this._grid.getCellRect(this._grid.frozenColCount-1,this._row);n=U.bounds(Math.max(n.left,o.right),n.top,n.right,n.bottom)}if(this._grid.frozenRowCount>=0&&(!r||!r.row)){var i=this._grid.getCellRect(this._col,this._grid.frozenRowCount-1);n=U.bounds(n.left,Math.max(n.top,i.bottom),n.right,n.bottom)}return n.intersection(e)?(n.offsetLeft(-e.left),n.offsetTop(-e.top),n):null}},{key:"_delayMode",value:function(t,e){this._mode=1,this._ctx=null,this._rect=null,this._drawRect=null,this._grid=t,this._onTerminate=e}},{key:"terminate",value:function(){0!==this._mode&&this._onTerminate()}},{key:"drawing",get:function(){return 0!==this._mode||this._drawing}},{key:"row",get:function(){return this._row}},{key:"col",get:function(){return this._col}}]),t}(),ht=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.rowCount,o=void 0===n?10:n,i=t.colCount,a=void 0===i?10:i,l=t.frozenColCount,s=void 0===l?0:l,c=t.frozenRowCount,u=void 0===c?0:c,h=t.defaultRowHeight,f=void 0===h?40:h,d=t.defaultColWidth,v=void 0===d?80:d,g=t.font,p=t.underlayBackgroundColor,_=t.parentElement;_classCallCheck(this,e);var y=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return y[$]={},K.initDocument(),y[$].element=r(),y[$].scrollable=new N,y[$].handler=new H,y[$].selection=new lt(y),y[$].focusControl=new at(y,y[$].scrollable.getElement(),y[$].scrollable),y[$].canvas=Y.transform(document.createElement("canvas")),y[$].context=y[$].canvas.getContext("2d",{alpha:!1}),y[$].rowCount=o,y[$].colCount=a,y[$].frozenColCount=s,y[$].frozenRowCount=u,y[$].defaultRowHeight=f,y[$].defaultColWidth=v,y[$].font=g,y[$].underlayBackgroundColor=p,y[$].rowHeightsMap=new V,y[$].colWidthsMap=new V,y[$].colWidthsLimit={},y[$].calcWidthContext={_:y[$],get full(){return this._.canvas.width},get em(){return this._.context.measureText("ã‚").width}},y[$].columnResizer=new it(y),y[$].cellSelector=new ot(y),y[$].drawCells={},y[$].element.appendChild(y[$].canvas),y[$].element.appendChild(y[$].scrollable.getElement()),y.updateScroll(),_?(_.appendChild(y[$].element),y.updateSize()):y.updateSize(),k(y),y}return _inherits(e,j),_createClass(e,null,[{key:"EVENT_TYPE",get:function(){return nt}}]),_createClass(e,[{key:"getElement",value:function(){return this[$].element}},{key:"focus",value:function(){var t=this[$].selection.select,e=t.col,n=t.row;this.focusCell(e,n)}},{key:"configure",value:function(t,e){var n=this[$].config||(this[$].config={});return O(e)&&(n[t]=e),n[t]}},{key:"updateSize",value:function(){this[$].canvas.style.width="",this[$].canvas.style.height="";var t=Math.floor(this[$].canvas.offsetWidth||this[$].canvas.parentElement.offsetWidth-K.getScrollBarSize()),e=Math.floor(this[$].canvas.offsetHeight||this[$].canvas.parentElement.offsetHeight-K.getScrollBarSize());this[$].canvas.width=t,this[$].canvas.height=e,this[$].canvas.style.width=t+"px",this[$].canvas.style.height=e+"px";var n=this[$].selection.select;this[$].focusControl.setFocusRect(this.getCellRect(n.col,n.row))}},{key:"updateScroll",value:function(){var t,e;this[$].scrollable.setScrollSize((e=g(t=this)*t[$].colCount,t[$].colWidthsMap.eachAll(function(n,r){e+=p(t,r,v(t,n))-g(t)}),e),function(t,e){var n=t.getScrollHeightInternal(e);if(O(n))return n;var r=t[$].defaultRowHeight*t[$].rowCount;return t[$].rowHeightsMap.eachAll(function(e){r+=e-t[$].defaultRowHeight}),r}(this)),this[$].scroll={left:this[$].scrollable.scrollLeft,top:this[$].scrollable.scrollTop}}},{key:"getRowHeight",value:function(t){return m(this,t)}},{key:"setRowHeight",value:function(t,e){!function(t,e,n){t[$].rowHeightsMap.put(e,n)}(this,t,e),this.updateScroll()}},{key:"getColWidth",value:function(t){return _(this,t)}},{key:"setColWidth",value:function(t,e){y(this,t,e),this.updateScroll()}},{key:"getMaxColWidth",value:function(t){var e=this[$].colWidthsLimit[t];return e&&e.max||void 0}},{key:"setMaxColWidth",value:function(t,e){(this[$].colWidthsLimit[t]||(this[$].colWidthsLimit[t]={})).max=e}},{key:"getMinColWidth",value:function(t){var e=this[$].colWidthsLimit[t];return e&&e.min||void 0}},{key:"setMinColWidth",value:function(t,e){(this[$].colWidthsLimit[t]||(this[$].colWidthsLimit[t]={})).min=e}},{key:"getCellRect",value:function(t,e){var n=this.isFrozenCell(t,e),r=C(this,0,t-1),o=_(this,t);n&&n.col&&(r+=this[$].scroll.left);var i=w(this,0,e-1),a=m(this,e);return n&&n.row&&(i+=this[$].scroll.top),new U(r,i,o,a)}},{key:"getCellRelativeRect",value:function(t,e){return I(this,this.getCellRect(t,e))}},{key:"getCellsRect",value:function(t,e,n,r){var o=this.isFrozenCell(t,e),i=this.isFrozenCell(n,r),a=C(this,0,t-1),l=C(this,t,n);if(o&&o.col){var s=this[$].scroll.left;a+=s,i&&i.col||(l-=s,l=Math.max(l,C(this,t,this.frozenColCount-1)))}var c=w(this,0,e-1),u=w(this,e,r);if(o&&o.row){var h=this[$].scroll.top;c+=h,i&&i.row||(u-=h,u=Math.max(u,C(this,e,this.frozenRowCount-1)))}return new U(a,c,l,u)}},{key:"isFrozenCell",value:function(t,e){var n=this[$].frozenRowCount>0&&e<this[$].frozenRowCount,r=this[$].frozenColCount>0&&t<this[$].frozenColCount;return n||r?{row:n,col:r}:null}},{key:"getRowAt",value:function(t){var e=l(this,t);if(e)return e.row;var n=i(this,t);return n?n.row:-1}},{key:"getColAt",value:function(t){var e=s(this,t);if(e)return e.col;var n=a(this,t);return n?n.col:-1}},{key:"getCellAt",value:function(t,e){return{row:this.getRowAt(e),col:this.getColAt(t)}}},{key:"makeVisibleCell",value:function(t,e){var n=this.isFrozenCell(t,e);if(!(n&&n.col&&n.row)){var r=this.getCellRect(t,e),o=function(t){var e=0;t[$].frozenColCount>0&&(e=u(t).width);var n=0;t[$].frozenRowCount>0&&(n=c(t).height);return new U(t[$].scroll.left+e,t[$].scroll.top+n,t[$].canvas.width-e,t[$].canvas.height-n)}(this);o.contains(r)||(n&&n.col||(r.left<o.left?this[$].scrollable.scrollLeft-=o.left-r.left:o.right<r.right&&(this[$].scrollable.scrollLeft-=o.right-r.right)),n&&n.row||(r.top<o.top?this[$].scrollable.scrollTop-=o.top-r.top:o.bottom<r.bottom&&(this[$].scrollable.scrollTop-=o.bottom-r.bottom)))}}},{key:"focusCell",value:function(t,e){this[$].focusControl.editMode&&this[$].focusControl.resetInputStatus(),this[$].focusControl.setFocusRect(this.getCellRect(t,e));var n=this[$].selection.select,r=n.col,o=n.row,i=this.fireListeners(nt.EDITABLEINPUT_CELL,{col:r,row:o}),a=M.findIndex(i,function(t){return!!t})>=0;this[$].focusControl.editMode=a,a&&(this[$].focusControl.storeInputStatus(),this[$].focusControl.setDefaultInputStatus(),this.fireListeners(nt.MODIFY_STATUS_EDITABLEINPUT_CELL,{col:r,row:o,input:this[$].focusControl.input})),this[$].focusControl.focus()}},{key:"invalidateCell",value:function(t,e){this.invalidateGridRect(t,e)}},{key:"invalidateGridRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=this.getOffsetInvalidateCells();o>0&&(t-=o,e-=o,n+=o,r+=o);var i=L(this),a=this.getCellsRect(t,e,n,r),l=i.intersection(a);if(l){if(this[$].frozenColCount>0&&n>=this[$].frozenColCount){var s=u(this);s.intersection(l)&&(l.left=Math.min(s.right-1,s.right))}if(this[$].frozenRowCount>0&&r>=this[$].frozenRowCount){var h=c(this);h.intersection(l)&&(l.top=Math.min(h.bottom-1,l.top))}d(this,l)}}},{key:"invalidate",value:function(){var t=L(this);d(this,t)}},{key:"getCopyCellValue",value:function(t,e){}},{key:"onDrawCell",value:function(t,e,n){}},{key:"addDisposable",value:function(t){if(!t||!t.dispose||"function"!=typeof t.dispose)throw new Error("not disposable!");(this[$].disposables=this[$].disposables||[]).push(t)}},{key:"dispose",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this),this[$].handler.dispose(),this[$].scrollable.dispose(),this[$].focusControl.dispose(),this[$].columnResizer.dispose(),this[$].cellSelector.dispose(),this[$].disposables&&(this[$].disposables.forEach(function(t){return t.dispose()}),this[$].disposables=null);var t=this[$].element.parentElement;t&&t.removeChild(this[$].element)}},{key:"getAttachCellArea",value:function(t,e){return{element:this.getElement(),rect:I(this,this.getCellRect(t,e))}}},{key:"bindEventsInternal",value:function(){}},{key:"getTargetRowAtInternal",value:function(t){}},{key:"getRowsHeightInternal",value:function(t,e){}},{key:"getRowHeightInternal",value:function(t){}},{key:"getScrollHeightInternal",value:function(t){}},{key:"getMoveLeftColByKeyDownInternal",value:function(t){var e=t.col;t.row;return e-1}},{key:"getMoveRightColByKeyDownInternal",value:function(t){var e=t.col;t.row;return e+1}},{key:"getMoveUpRowByKeyDownInternal",value:function(t){t.col;return t.row-1}},{key:"getMoveDownRowByKeyDownInternal",value:function(t){t.col;return t.row+1}},{key:"getOffsetInvalidateCells",value:function(){return 0}},{key:"_getInitContext",value:function(){var t=this[$].context;return t.fillStyle="white",t.strokeStyle="black",t.textAlign="left",t.textBaseline="top",t.lineWidth=1,t.font=this.font||"16px sans-serif",t}},{key:"canvas",get:function(){return this[$].canvas}},{key:"selection",get:function(){return this[$].selection}},{key:"rowCount",get:function(){return this[$].rowCount},set:function(t){this[$].rowCount=t,this.updateScroll()}},{key:"colCount",get:function(){return this[$].colCount},set:function(t){this[$].colCount=t,this.updateScroll()}},{key:"frozenColCount",get:function(){return this[$].frozenColCount},set:function(t){this[$].frozenColCount=t}},{key:"frozenRowCount",get:function(){return this[$].frozenRowCount},set:function(t){this[$].frozenRowCount=t}},{key:"defaultRowHeight",get:function(){return this[$].rowCount},set:function(t){this[$].defaultRowHeight=t,this.updateScroll()}},{key:"defaultColWidth",get:function(){return this[$].defaultColWidth},set:function(t){this[$].defaultColWidth=t,this.updateScroll()}},{key:"font",get:function(){return this[$].font},set:function(t){this[$].font=t}},{key:"underlayBackgroundColor",get:function(){return this[$].underlayBackgroundColor},set:function(t){this[$].underlayBackgroundColor=t}}]),e}();t.exports=ht},function(t,e,n){var r=n(0).obj.each,o=1,i=function(){function t(){_classCallCheck(this,t),this._listeners={}}return _createClass(t,[{key:"on",value:function(t,e,n){for(var r=arguments.length,i=Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];t.addEventListener&&t.addEventListener.apply(t,[e,n].concat(i));var l={target:t,type:e,listener:n,options:i},s=o++;return this._listeners[s]=l,s}},{key:"tryWithOffEvents",value:function(t,e,n){var o=[];try{r(this._listeners,function(n){if(n.target===t&&n.type===e){var r;if(n.target.removeEventListener)(r=n.target).removeEventListener.apply(r,[n.type,n.listener].concat(_toConsumableArray(n.options)));o.push(n)}}),n()}finally{o.forEach(function(t){var e;t.target.addEventListener&&(e=t.target).addEventListener.apply(e,[t.type,t.listener].concat(_toConsumableArray(t.options)))})}}},{key:"off",value:function(t){if(t){var e,n=this._listeners[t];if(n)if(delete this._listeners[t],n.target.removeEventListener)(e=n.target).removeEventListener.apply(e,[n.type,n.listener].concat(_toConsumableArray(n.options)))}}},{key:"fire",value:function(t,e){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];r(this._listeners,function(n){var r;n.target===t&&n.type===e&&(r=n.listener).call.apply(r,[n.target].concat(o))})}},{key:"hasListener",value:function(t,e){var n=!1;return r(this._listeners,function(r){r.target===t&&r.type===e&&(n=!0)}),n}},{key:"clear",value:function(){r(this._listeners,function(t){var e;t.target.removeEventListener&&(e=t.target).removeEventListener.apply(e,[t.type,t.listener].concat(_toConsumableArray(t.options)))}),this._listeners={}}},{key:"dispose",value:function(){this.clear(),this._listeners=null}}]),t}();t.exports=i},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),l=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),s=null,c=0,u=[],h=n(62);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(y(r.parts[a],e))}else{var l=[];for(a=0;a<r.parts.length;a++)l.push(y(r.parts[a],e));i[r.id]={id:r.id,refs:1,parts:l}}}}function d(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}function v(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!==_typeof(t.insertAt)||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function p(t){var e=document.createElement("style");return t.attrs.type="text/css",_(e,t.attrs),v(t,e),e}function _(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var a=c++;n=s||(s=p(e)),r=w.bind(null,n,a,!1),o=w.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",_(e,t.attrs),v(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=h(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),l=t.href;t.href=URL.createObjectURL(a),l&&URL.revokeObjectURL(l)}.bind(null,n,e),o=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){g(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!==("undefined"==typeof document?"undefined":_typeof(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"===_typeof(e.attrs)?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return f(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var a=n[o];(l=i[a.id]).refs--,r.push(l)}t&&f(d(t,e),e);for(o=0;o<r.length;o++){var l;if(0===(l=r[o]).refs){for(var s=0;s<l.parts.length;s++)l.parts[s]();delete i[l.id]}}}};var C,m=(C=[],function(t,e){return C[t]=e,C.filter(Boolean).join("\n")});function w(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=m(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e,n){var r=function(){function t(e,n,r,o){_classCallCheck(this,t),this._left=e,this._top=n,this._width=r,this._height=o}return _createClass(t,[{key:"offsetLeft",value:function(t){this._left+=t,this._right=void 0}},{key:"offsetTop",value:function(t){this._top+=t,this._bottom=void 0}},{key:"copy",value:function(){return new t(this.left,this.top,this.width,this.height)}},{key:"intersection",value:function(e){var n=Math.max(this.left,e.left),r=Math.min(this.left+this.width,e.left+e.width);if(n<=r){var o=Math.max(this.top,e.top),i=Math.min(this.top+this.height,e.top+e.height);if(o<=i)return t.bounds(n,o,r,i)}return null}},{key:"contains",value:function(t){return this.left<=t.left&&this.left+this.width>=t.left+t.width&&this.top<=t.top&&this.top+this.height>=t.top+t.height}},{key:"inPoint",value:function(t,e){return this.left<=t&&this.left+this.width>=t&&this.top<=e&&this.top+this.height>=e}},{key:"left",get:function(){return this._left},set:function(t){var e=this.right;this._left=t,this.right=e}},{key:"top",get:function(){return this._top},set:function(t){var e=this.bottom;this._top=t,this.bottom=e}},{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._right=void 0}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._bottom=void 0}},{key:"right",get:function(){return void 0!==this._right?this._right:this._right=this.left+this.width},set:function(t){this._right=t,this.width=t-this.left}},{key:"bottom",get:function(){return void 0!==this._bottom?this._bottom:this._bottom=this.top+this.height},set:function(t){this._bottom=t,this.height=t-this.top}}],[{key:"bounds",value:function(e,n,r,o){return new t(e,n,r-e,o-n)}},{key:"max",value:function(e,n){return t.bounds(Math.min(e.left,n.left),Math.min(e.top,n.top),Math.max(e.right,n.right),Math.max(e.bottom,n.bottom))}}]),t}();t.exports=r},function(t,e,n){var r=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.offset,a=void 0===i?0:i,l=o.padding,s=(l=void 0===l?{}:l).left,c=void 0===s?0:s,u=l.right,h=void 0===u?0:u,f=l.top,d=void 0===f?0:f,v=l.bottom,g=void 0===v?0:v,p=t.textAlign||"left",_=t.textBaseline||"middle";t.textAlign=p,t.textBaseline=_;var y=e.left+a+c;"right"===p||"end"===p?y=e.right-n-a-h:"center"===p&&(y=e.left+(e.width-n+c-h)/2);var C=e.top+a+d;return"bottom"===_||"alphabetic"===_||"ideographic"===_?C=e.bottom-r-a-g:"middle"===_&&(C=e.top+(e.height-r+d-g)/2),{x:y,y:C}};t.exports={calcBasePosition:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.offset,i=void 0===o?0:o,a=n.padding,l=(a=void 0===a?{}:a).left,s=void 0===l?0:l,c=a.right,u=void 0===c?0:c,h=a.top,f=void 0===h?0:h,d=a.bottom;return r(t,e,0,0,{offset:i,padding:{left:s,right:u,top:f,bottom:void 0===d?0:d}})},calcStartPosition:r}},function(t,e,n){var r=n(3),o=n(11),i=n(21),a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,o),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,e,n,r,o,a){var l=a.drawCellBase,s=a.getIcon,c=n.textAlign,u=n.textBaseline,h=n.color,f=n.font,d=n.bgColor,v=n.padding;d&&l({bgColor:d}),r.testFontLoad(f,t,e),i.loadIcons(s(),e,r,function(e,n){r.text(t,n,{textAlign:c,textBaseline:u,color:h,font:f,icons:e,padding:v})})}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=a},function(t,e,n){var r=function(t){return t[f]||c(t,f,{}),t[f]},o=function(t,e,n,o,i,a){return function(l){var s=r(t),c=e+":"+n;1===l?delete s[c]:s[c]={opacity:l},a(),i();var u=s[c];if(u){var h=o.getContext();h.globalAlpha=1-u.opacity;try{a()}finally{h.globalAlpha=1}}}},i=n(35),a=n(0),l=a.isPromise,s=a.isDef,c=a.obj.setReadonly,u=n(32),h=n(3),f=n(1).COLUMN_FADEIN_STATE_ID,d={animate:function(t,e,n,i,a,l){var s=r(t),c=[o(t,e,n,i,a,l)];s.activeFadeins=c,u(500,function(t){c.forEach(function(e){return e(t)}),1===t&&delete s.activeFadeins})},margeAnimate:function(t,e,n,i,a,l){var s=r(t);s.activeFadeins?s.activeFadeins.push(o(t,e,n,i,a,l)):a()}},v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this.onDrawCell=this.onDrawCell.bind(this),this._fadeinWhenCallbackInPromise=e.fadeinWhenCallbackInPromise}return _createClass(t,[{key:"onDrawCell",value:function(t,e,n,r){var o=this,a=e.style,c=e.getRecord,u=e.drawCellBase;delete e.getRecord,delete e.style;var h=r.getGridCanvasHelper();if(u(),l(t)){if(n.drawing)return null;var v=Date.now();return t.then(function(t){if(n.toCurrentContext().getDrawRect()){var l=Date.now()-v,f=function(){var l=n.toCurrentContext();if(l.getDrawRect()){var s=i.of(a,c(),o.StyleClass);o.drawInternal(o.convertInternal(t),l,s,h,r,e),o.drawMessageInternal(e.getMessage(),n,s,h,r,e)}};if(function(t,e){return s(t._fadeinWhenCallbackInPromise)?t._fadeinWhenCallbackInPromise:!!e.configure("fadeinWhenCallbackInPromise")}(o,r)){var g=n.col,p=n.row;l<80?d.margeAnimate(r,g,p,n,f,u):d.animate(r,g,p,n,f,u)}else f()}})}var g=i.of(a,c(),this.StyleClass);this.drawInternal(this.convertInternal(t),n,g,h,r,e),this.drawMessageInternal(e.getMessage(),n,g,h,r,e);var p=n.col+":"+n.row,_=r[f]&&r[f][p];if(_){var y=n.getContext();y.globalAlpha=1-_.opacity;try{u()}finally{y.globalAlpha=1}}return null}},{key:"clone",value:function(){return new t(this)}},{key:"convertInternal",value:function(t){return s(t)?t:""}},{key:"drawInternal",value:function(t,e,n,r,o,i){}},{key:"drawMessageInternal",value:function(t,e,n,r,o,i){i.messageHandler.drawCellMessage(t,e,n,r,i)}},{key:"bindGridEvent",value:function(t,e,n){return[]}},{key:"StyleClass",get:function(){return h}}]),t}();t.exports=v},function(t,e,n){var r=n(0).isDef,o=function(){function t(e){_classCallCheck(this,t),this._content=r(e)?e:""}return _createClass(t,[{key:"width",value:function(t){return t.ctx.measureText(this._content).width}},{key:"font",value:function(){return null}},{key:"color",value:function(){return null}},{key:"canDraw",value:function(){return!0}},{key:"onReady",value:function(t){}},{key:"draw",value:function(t){var e=t.ctx,n=t.canvashelper,r=t.rect,o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom;n.fillTextRect(e,this._content,r.left,r.top,r.width,r.height,{offset:o+1,padding:{left:i,right:a,top:l,bottom:s}})}}]),t}();t.exports=o},function(t,e,n){var r=n(0),o=r.isDef,i=r.obj.each,a=n(1).get()._,l=1,s=function(){function t(){_classCallCheck(this,t),this[a]={},this[a].listeners={},this[a].listenerData={}}return _createClass(t,[{key:"listen",value:function(t,e){var n=this,r=this[a].listeners[t]||(this[a].listeners[t]=[]);r.push(e);var o=l++;return this[a].listenerData[o]={type:t,listener:e,remove:function(){delete n[a].listenerData[o];var i=r.indexOf(e);r.splice(i,1),n[a].listeners[t].length||delete n[a].listeners[t]}},o}},{key:"unlisten",value:function(t){this[a].listenerData[t].remove()}},{key:"addEventListener",value:function(t,e){this.listen(t,e)}},{key:"removeEventListener",value:function(t,e){var n=this;i(this[a].listenerData,function(r,o){r.type===t&&r.listener===e&&n.unlisten(o)})}},{key:"hasListeners",value:function(t){return!!this[a].listeners[t]}},{key:"fireListeners",value:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var l=this[a].listeners[t];return l?l.map(function(t){return t.call.apply(t,[e].concat(r))}).filter(o):[]}},{key:"dispose",value:function(){delete this[a]}}]),t}();t.exports=s},function(t,e,n){var r=n(18),o=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._readOnly=t.readOnly,n}return _inherits(e,r),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"onChangeReadOnlyInternal",value:function(){}},{key:"readOnly",get:function(){return this._readOnly},set:function(t){this._readOnly=!!t,this.onChangeReadOnlyInternal()}}]),e}();t.exports=o},function(t,e,n){(function(e){var r=n(0).isDef;function o(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.classList,i=r.text,a=r.html,l=document.createElement(t);o&&(e(o)?(n=l.classList).add.apply(n,_toConsumableArray(o)):l.classList.add(o));return i?l.textContent=i:a&&(l.innerHTML=a),l}function i(t){return!(!t.nodeType||!t.nodeName)}function a(t){if(i(t))return t;var e=o("div",{html:t});return Array.prototype.slice.call(e.childNodes)}function l(t){return window.jQuery&&t instanceof window.jQuery?Array.prototype.map.call(t,function(t){return t}):e(t)?t.map(a):[a(t)]}function s(t){return r(t.tabIndex)&&t.tabIndex>-1}t.exports={createElement:o,empty:function(t){for(var e=void 0;e=t.firstChild;)t.removeChild(e)},isNode:i,toNode:a,toNodeList:l,appendHtml:function(t,e){l(e).forEach(function(e){t.appendChild(e)})},disableFocus:function t(e){e.dataset.disableBeforeTabIndex=e.tabIndex,e.tabIndex=-1,Array.prototype.slice.call(e.children,0).forEach(t)},enableFocus:function t(e){"disableBeforeTabIndex"in e.dataset&&(e.tabIndex=e.dataset.disableBeforeTabIndex),Array.prototype.slice.call(e.children,0).forEach(t)},isFocusable:s,findPrevSiblingFocusable:function(t){for(var e=t.previousSibling;e&&!s(e);)e=e.previousSibling;return e},findNextSiblingFocusable:function(t){for(var e=t.nextSibling;e&&!s(e);)e=e.nextSibling;return e}}}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(54),o=n(115),i={get BaseStyle(){return r},get Style(){return o},of:function(t,e){return t?t instanceof o?t:"function"==typeof t?i.of(t(),e):new e(t):e.DEFAULT}};t.exports=i},function(module,exports,__webpack_require__){function parse(calcStr){function replacer(t,e,n){switch(n){case"%":return"("+e+" * this.full / 100)";case"em":return"("+e+" * this.em)";case"px":return"("+e+")";default:throw new Error("calc error")}}var script=calcStr.replace(/^calc\((.*)\)$/,"$1").replace(/(\d+)([A-Za-z%]+)/g,replacer).replace(/(\d*\.\d+)([A-Za-z%]+)/g,replacer);return{eval:function _eval(context){return function(){function calc(t){return t}return eval(script)}.call(context)}}}function _toPx(t,e){return/^calc\(.*\)$/.test(t)?parse(t).eval(e):/^[+-]?\d+\.?\d*%$/.test(t)?e.full*t.substr(0,t.length-1)/100:/^[+-]?\d+\.?\d*px$/.test(t)?t.substr(0,t.length-2)-0:/^[+-]?\d+\.?\d*em$/.test(t)?e.em*(t.substr(0,t.length-2)-0):t-0}module.exports={parse:parse,toPx:function(t,e){return"string"==typeof t?_toPx(t.trim(),e):t-0}}},function(t,e,n){var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t),this._disabled=e.disabled}return _createClass(t,[{key:"clone",value:function(){return new t(this)}},{key:"bindGridEvent",value:function(t,e,n){return[]}},{key:"onChangeDisabledInternal",value:function(){}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=!!t,this.onChangeDisabledInternal()}}]),t}();t.exports=r},function(t,e,n){var r=n(20),o=void 0,i=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._textAlign=t.textAlign||"left",n._textBaseline=t.textBaseline||"middle",n}return _inherits(e,r),_createClass(e,null,[{key:"DEFAULT",get:function(){return o||(o=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"textAlign",get:function(){return this._textAlign},set:function(t){this._textAlign=t,this.doChangeStyle()}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r=n(13),o={CHANGE_STYLE:"change_style"},i=void 0,a=function(t){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor;_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._bgColor=t,n}return _inherits(e,r),_createClass(e,null,[{key:"EVENT_TYPE",get:function(){return o}},{key:"DEFAULT",get:function(){return i||(i=new e)}}]),_createClass(e,[{key:"doChangeStyle",value:function(){this.fireListeners(o.CHANGE_STYLE)}},{key:"clone",value:function(){return new e(this)}},{key:"bgColor",get:function(){return this._bgColor},set:function(t){this._bgColor=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r=n(0).isPromise,o=n(22);t.exports={loadIcons:function(t,e,n,i){var a=this;if(t)if(r(t))t.then(function(t){a.loadIcon(t,e.toCurrentContext(),i)}),t=null;else{var l=o.toNormarizeArray(t);l.forEach(function(t){n.testFontLoad(t.font,t.content,e)}),t=l}i(t,e)}}},function(t,e,n){(function(e){var r=n(0).isDef,o=["content","font","color","className","isLiga","width","src","svg","name","path"];var i={},a={};function l(t,e){var n=a[t]||(a[t]={});if(n[e])return n[e];var r=i[t]||(i[t]=document.createElement(t));r.className=e,document.body.appendChild(r);try{var o=document.defaultView.getComputedStyle(r,"::before"),l=o.getPropertyValue("content");l.length>=3&&('"'===l[0]||"'"===l[0])&&l[0]===l[l.length-1]&&(l=l.substr(1,l.length-2));var s=o.getPropertyValue("font");s||(s=o.getPropertyValue("font-style")+" "+o.getPropertyValue("font-variant")+" "+o.getPropertyValue("font-weight")+" "+o.getPropertyValue("font-size")+"/"+o.getPropertyValue("line-height")+" "+function(t){for(var e=[],n=t.split(/,\s*/),r=0;r<n.length;r++){var o=n[r].replace(/['"]/g,"");-1!==o.indexOf(" ")||/^\d/.test(o)?e.push("'"+o+"'"):e.push(o)}return e.join(",")}(o.getPropertyValue("font-family")));var c=o.getPropertyValue("color"),u=r.clientWidth,h=(o.getPropertyValue("font-feature-settings")||"").indexOf("liga")>-1;return n[e]={content:l,font:s,color:c,width:u,isLiga:h}}finally{document.body.removeChild(r)}}function s(t){if(!t)return t;if(e(t))return t;var n={},r=0;o.forEach(function(n){t[n]&&(r=e(t[n])?Math.max(r,t[n].length):Math.max(r,1))}),o.forEach(function(o){n[o]=function(t,n){var r=[];if(e(t)){r.push.apply(r,_toConsumableArray(t));for(var o=t.length;o<n;o++)r.push(null)}else for(var i=0;i<n;i++)r.push(t);return r}(t[o],r)});for(var i=[],a=function(t){var e={};o.forEach(function(r){e[r]=n[r][t]}),i.push(e)},l=0;l<r;l++)a(l);return i}t.exports={toNormarizeArray:function(t){var e=s(t);return e?e.map(function(t){return function(t){var e={};for(var n in t)"className"!==n&&(e[n]=t[n]);if(t.className){var o=l(t.tagName||"i",t.className);for(var i in o)r(t[i])||(e[i]=o[i])}return e}(t)}):e},get iconPropKeys(){return o},getIconProps:l}}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(0),o=r.extend,i=r.getIgnoreCase,a=n(92),l=n(44),s={BASIC:a.create(n(93)),MATERIAL_DESIGN:a.create(n(43))},c=a.create({}),u={get default(){return c},set default(t){c=t},theme:a,of:function(t){if(!t)return null;if("string"==typeof t){var e=i(u.choices,t);return e||null}return t},get choices(){return o(s,l)}};t.exports=u},function(t,e,n){function r(){return window.Path2D||n(103)}t.exports={fill:function(t,e,n,o,i,a){e.save();try{var l=t.width,s=t.height,c=t.ud,u=t.x,h=void 0===u?0:u,f=t.y,d=void 0===f?0:f,v=(i=i||l)/l,g=(a=a||s)/(c?-s:s);n=n||0,o=c?(o||0)+-s*g:o||0,e.translate(n,o),e.scale(v,g),0===h&&0===d||e.translate(h,d);var p=r();t.path2d=t.path2d||new p(t.d),e.fill(t.path2d)}finally{e.restore()}},get Path2D(){return r()}}},function(t,e,n){var r=n(26),o=n(11),i=n(21),a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,o),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,e,n,r,o,a){var l=a.drawCellBase,s=a.getIcon,c=n.textAlign,u=n.textBaseline,h=n.color,f=n.font,d=n.bgColor,v=n.padding,g=n.lineHeight;d&&l({bgColor:d});var p=t.replace(/\r?\n/g,"\n").replace(/\r/g,"\n").split("\n");r.testFontLoad(f,t,e),i.loadIcons(s(),e,r,function(t,e){r.multilineText(p,e,{textAlign:c,textBaseline:u,color:h,font:f,icons:t,padding:v,lineHeight:g})})}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=a},function(t,e,n){var r=function(t){var e=t.textBaseline,n=void 0===e?"top":e;return t.textBaseline=n,t},o=n(3),i=void 0,a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r(t)));return n._lineHeight=t.lineHeight||"1em",n}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return i||(i=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r=void 0,o=function(){n(60),r=function(){var t=document.createElement("div"),e=t.style;e.position="absolute",e.height="9999px",e.width="calc(100vw - 100%)",e.opacity=0,t.textContent="x",document.body.appendChild(t);var n=document.defaultView.getComputedStyle(t,"").width;return document.body.removeChild(t),parseInt(n,10)}()||10;var t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("data-name","cheetah-grid"),t.innerHTML="\n.cheetah-grid .grid-scroll-end-point {\n\twidth: "+r+"px;\n\theight: "+r+"px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - "+r+"px);\n\twidth: calc(100% - "+r+"px);\n\theight: -webkit-calc(100% - "+r+"px);\n\theight: calc(100% - "+r+"px);\n}\n\t\t",document.head.appendChild(t)},i={initDocument:function(){i.initDocument=function(){},o()},getScrollBarSize:function(){return r}};t.exports=i},function(t,e,n){var r=function(t,e,n,r,o,i){t.beginPath(),t.arc(e+i,n+i,i,-h,-.5*h,!1),t.arc(e+r-i,n+i,i,-.5*h,0,!1),t.arc(e+r-i,n+o-i,i,0,.5*h,!1),t.arc(e+i,n+o-i,i,.5*h,h,!1),t.closePath()},o=function(t,e,n,o,i,a){r(t,e,n,o,i,a),t.fill()},i=function(t,e,n,o,i,a){r(t,e,n,o,i,a),t.stroke()},a=function(t){return{width:t.measureText("ã‚").width}},l=n(9),s=l.calcBasePosition,c=l.calcStartPosition,u=Math.ceil,h=Math.PI,f={roundRect:r,fillRoundRect:o,strokeRoundRect:i,drawCheckbox:function(t,e,n,r){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=l.uncheckBgColor,c=void 0===s?"#FFF":s,h=l.checkBgColor,f=void 0===h?"rgb(76, 73, 72)":h,d=l.borderColor,v=void 0===d?"#000":d,g=l.boxSize,p=void 0===g?a(t).width:g,_="number"==typeof r?r>1?1:r:1;t.save();try{if(t.fillStyle=r?f:c,o(t,u(e)-1,u(n)-1,u(p+1),u(p+1),p/5),t.lineWidth=1,t.strokeStyle=v,i(t,u(e)-.5,u(n)-.5,u(p),u(p),p/5),r){t.lineWidth=u(p/10),t.strokeStyle=c;var y=p/4,C=p/2*.9,m=e+.2*p,w=n+p/2;_<.5&&(y*=2*_),t.beginPath(),t.moveTo(m,w),t.lineTo(m+y,w+y),_>.5&&(_<1&&(C*=2*(_-.5)),t.lineTo(m+y+C,w+y-C)),t.stroke()}}finally{t.restore()}},measureCheckbox:a,fillTextRect:function(t,e,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=a.offset,c=void 0===l?2:l,u=a.padding,h={left:n,top:r,width:o,height:i,right:n+o,bottom:r+i};t.save();try{t.beginPath(),t.rect(h.left,h.top,h.width,h.height),t.clip();var f=s(t,h,{offset:c,padding:u});t.fillText(e,f.x,f.y)}finally{t.restore()}},drawButton:function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=a.backgroundColor,s=void 0===l?"#FFF":l,c=a.bgColor,h=void 0===c?s:c,f=a.radius,d=void 0===f?4:f,v=a.shadow,g=void 0===v?{}:v;t.save();try{if(t.fillStyle=h,g){var p=g.color,_=void 0===p?"rgba(0, 0, 0, 0.24)":p,y=g.blur,C=void 0===y?1:y,m=g.offsetX,w=void 0===m?0:m,b=g.offsetY,x=void 0===b?2:b,k=g.offset,E=(k=void 0===k?{}:k).x,L=void 0===E?w:E,I=k.y,R=void 0===I?x:I;t.shadowColor=_,t.shadowBlur=C,t.shadowOffsetX=L,t.shadowOffsetY=R}o(t,u(e),u(n),u(r),u(i),d)}finally{t.restore()}},drawInlineImageRect:function(t,e,n,r,o,i,a,l,s,u,h,f){var d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:{},v=d.offset,g=void 0===v?2:v,p=d.padding,_={left:s,top:u,width:h,height:f,right:s+h,bottom:u+f};t.save();try{t.beginPath(),t.rect(_.left,_.top,_.width,_.height),t.clip();var y=c(t,_,a,l,{offset:g,padding:p});t.drawImage(e,n,r,o,i,y.x,y.y,a,l)}finally{t.restore()}},strokeColorsRect:function(t,e,n,r,o,i){e[0]===e[1]&&e[0]===e[2]&&e[0]===e[3]?e[0]&&(t.strokeStyle=e[0],t.strokeRect(n,r,o,i)):function(n){for(var r=0;r<e.length;r++){var o=e[r],i=e[r-1];if(o){if(i!==o){i&&(t.strokeStyle=i,t.stroke());var a=n[r];t.beginPath(),t.moveTo(a.x,a.y)}var l=n[r+1];t.lineTo(l.x,l.y)}else i&&(t.strokeStyle=i,t.stroke())}var s=e[e.length-1];s&&(t.strokeStyle=s,t.stroke())}([{x:n,y:r},{x:n+o,y:r},{x:n+o,y:r+i},{x:n,y:r+i},{x:n,y:r}])}};t.exports=f},function(t,e,n){var r=n(66),o=n(81),i=n(35);t.exports={action:r,type:o,style:i}},function(t,e,n){var r=n(31),o=r.bindCellClickAction,i=r.bindCellKeyAction,a=n(18),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._action=t.action,n}return _inherits(e,a),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"getState",value:function(t){return{}}},{key:"bindGridEvent",value:function(t,e,n){var r=this,a=this.getState(t),l=function(e){if(!r.disabled){var n=t.getRowRecord(e.row);r._action(n)}};return[].concat(_toConsumableArray(o(t,e,n,{action:l,mouseOver:function(e){return!r.disabled&&(a.mouseActiveCell={col:e.col,row:e.row},t.invalidateCell(e.col,e.row),!0)},mouseOut:function(e){delete a.mouseActiveCell,t.invalidateCell(e.col,e.row)}})),_toConsumableArray(i(t,e,n,{action:l})))}},{key:"action",get:function(){return this._action},set:function(t){this._action=t}}]),e}();t.exports=l},function(t,e,n){var r=n(0),o=r.isPromise,i=r.event.cancel,a=n(4).EVENT_TYPE,l=a.CLICK_CELL,s=a.MOUSEOVER_CELL,c=a.MOUSEOUT_CELL,u=a.KEYDOWN,h=13;t.exports={bindCellClickAction:function(t,e,n,r){var i=r.action,a=r.mouseOver,u=r.mouseOut;return[t.listen(l,function(e){n.isTarget(e.col,e.row)&&(o(t.getRowRecord(e.row))||i({col:e.col,row:e.row}))}),t.listen(s,function(e){n.isTarget(e.col,e.row)&&(o(t.getRowRecord(e.row))||a&&!a({col:e.col,row:e.row})||(t.getElement().style.cursor="pointer"))}),t.listen(c,function(e){n.isTarget(e.col,e.row)&&(u&&u({col:e.col,row:e.row}),t.getElement().style.cursor="")})]},bindCellKeyAction:function(t,e,n,r){var a=r.action,l=r.acceptKeys,s=void 0===l?[]:l;return s=[].concat(_toConsumableArray(s),[h]),[t.listen(u,function(e,r){if(-1!==s.indexOf(e)){var l=t.selection.select;n.isTarget(l.col,l.row)&&(o(t.getRowRecord(l.row))||(a({col:l.col,row:l.row}),i(r)))}})]}}},function(t,e,n){var r=function(t,e,n,r){var o=void 0;return t*=3,e*=3,n*=3,r*=3,function(i){var a=void 0,l=void 0,s=void 0,c=void 0,u=void 0,h=void 0;if(i<0||1<i)throw new Error(i);a=o||i;do{a+=.5*(h=i-(t*(s=(l=1-a)*l)*a+n*l*(c=a*a)+(u=c*a)))}while(1e-4<Math.abs(h));return o=a,e*s*a+r*l*c+u}},o=function(){return Date.now()},i={linear:function(t){return t},easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1)},a=window.requestAnimationFrame||setTimeout;t.exports=function(t,e,n){var r=o();n?"string"==typeof n&&(n=i[n]):n=i.easeInOut;var l=!1,s=function(i,s){return function c(){var u=o()-r;l?s&&s():u>=t?(e(1),i&&i()):(e(n(u/t)),a(c,1))}},c=function(){l=!0};if(window.Promise){var u=new window.Promise(function(t,n){var r=s(t,n);e(0),r()});return u.cancel=c,u}var h=s(function(){},function(){});return e(0),h(),{cancel:c}}},function(t,e,n){var r=n(14),o=n(4).EVENT_TYPE,i=o.INPUT_CELL,a=o.EDITABLEINPUT_CELL,l=o.SELECTED_CELL,s=o.DBLCLICK_CELL,c=o.DBLTAP_CELL,u=o.KEYDOWN,h=o.MODIFY_STATUS_EDITABLEINPUT_CELL,f=o.SCROLL,d=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,r),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"onInputCellInternal",value:function(t,e,n){throw new Error}},{key:"onOpenCellInternal",value:function(t,e){throw new Error}},{key:"onChangeSelectCellInternal",value:function(t,e,n){throw new Error}},{key:"onSetInputAttrsInternal",value:function(t,e,n){throw new Error}},{key:"onGridScrollInternal",value:function(t){throw new Error}},{key:"bindGridEvent",value:function(t,e,n){var r=this,o=function(e){r.readOnly||r.disabled||r.onOpenCellInternal(t,e)};return[t.listen(i,function(e){var o,i;n.isTarget(e.col,e.row)&&(o={col:e.col,row:e.row},i=e.value,r.readOnly||r.disabled||r.onInputCellInternal(t,o,i))}),t.listen(s,function(t){n.isTarget(t.col,t.row)&&o({col:t.col,row:t.row})}),t.listen(c,function(t){n.isTarget(t.col,t.row)&&(o({col:t.col,row:t.row}),t.event.preventDefault(),t.event.stopPropagation())}),t.listen(u,function(e,r){if(113===e||13===e){var i=t.selection.select;n.isTarget(i.col,i.row)&&o({col:i.col,row:i.row})}}),t.listen(l,function(e){r.onChangeSelectCellInternal(t,{col:e.col,row:e.row},e.selected)}),t.listen(f,function(){r.onGridScrollInternal(t)}),t.listen(a,function(t){return!!n.isTarget(t.col,t.row)&&(!r.readOnly&&!r.disabled)}),t.listen(h,function(e){n.isTarget(e.col,e.row)&&(r.readOnly||r.disabled||r.onSetInputAttrsInternal(t,{col:e.col,row:e.row},e.input))})]}}]),e}();t.exports=d},function(t,e,n){(function(e){t.exports={normalize:function t(n){if(!n)return[];if(e(n))return n;if("string"==typeof n)return t(JSON.parse(n));var r=[];for(var o in n)r.push({value:o,caption:n[o]});return r}}}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(20),o=n(3),i=n(36),a=n(37),l=n(38),s=n(39),c=n(40),u=n(41),h={get EVENT_TYPE(){return r.EVENT_TYPE},get BaseStyle(){return r},get Style(){return o},get NumberStyle(){return i},get CheckStyle(){return a},get ButtonStyle(){return l},get ImageStyle(){return s},get IconStyle(){return c},get PercentCompleteBarStyle(){return u},of:function(t,e,n){return t?t instanceof o?t:"function"==typeof t?h.of(t(e),e,n):e&&t in e?h.of(e[t],e,n):new n(t):n.DEFAULT}};t.exports=h},function(t,e,n){var r=function(t){var e=t.textAlign,n=void 0===e?"right":e;return t.textAlign=n,t},o=n(3),i=void 0,a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r(t)))}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return i||(i=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}}]),e}();t.exports=a},function(t,e,n){var r=function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t},o=n(19),i=void 0,a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r(t))),o=t.uncheckBgColor,i=t.checkBgColor,a=t.borderColor;return n._uncheckBgColor=o,n._checkBgColor=i,n._borderColor=a,n}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return i||(i=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"uncheckBgColor",get:function(){return this._uncheckBgColor},set:function(t){this._uncheckBgColor=t,this.doChangeStyle()}},{key:"checkBgColor",get:function(){return this._checkBgColor},set:function(t){this._checkBgColor=t,this.doChangeStyle()}},{key:"borderColor",get:function(){return this._borderColor},set:function(t){this._borderColor=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r=function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t},o=n(3),i=void 0,a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r(t))),o=t.buttonBgColor;return n._buttonBgColor=o,n}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return i||(i=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"buttonBgColor",get:function(){return this._buttonBgColor},set:function(t){this._buttonBgColor=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r=function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t},o=n(19),i=void 0,a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r(t)));return n._imageSizing=t.imageSizing,n._margin=t.margin||4,n}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return i||(i=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"imageSizing",get:function(){return this._imageSizing},set:function(t){this._imageSizing=t,this.doChangeStyle()}},{key:"margin",get:function(){return this._margin},set:function(t){this._margin=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r=function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t},o=n(3),i=void 0,a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r(t)))}return _inherits(e,o),_createClass(e,null,[{key:"DEFAULT",get:function(){return i||(i=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}}]),e}();t.exports=a},function(t,e,n){var r=n(3),o=void 0,i=function(t){return t>80?"#20a8d8":t>50?"#4dbd74":t>20?"#ffc107":"#f86c6b"},a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._barColor=t.barColor||i,n._barBgColor=t.barBgColor||"#f0f3f5",n._barHeight=t.barHeight||3,n}return _inherits(e,r),_createClass(e,null,[{key:"DEFAULT",get:function(){return o||(o=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"barColor",get:function(){return this._barColor},set:function(t){this._barColor=t,this.doChangeStyle()}},{key:"barBgColor",get:function(){return this._barBgColor},set:function(t){this._barBgColor=t,this.doChangeStyle()}},{key:"barHeight",get:function(){return this._barHeight},set:function(t){this._barHeight=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r=n(0).then,o=n(86),i={};function a(t){if(!window.Promise)return console.error("Promise is not loaded. load Promise before this process."),{then:function(){return this}};var e=new Image,n=new window.Promise(function(t){e.onload=function(){t(e)}});return e.onerror=function(e){var n=t.length>200?t.substr(0,200)+"...":t;throw console.warn("cannot load: "+n),new Error("IMAGE LOAD ERROR: "+n)},e.src=-1!==t.search(/^(data:)/)?t:t+"?"+Date.now(),n}t.exports={loadImage:a,getCacheOrLoad:function(t,e,n){return function(t,e){return r(e,function(e){var n=t.get(e);if(n)return n;var r=a(e).then(function(n){return t.put(e,n),n});return t.put(e,r),r})}(i[t]||(i[t]=new o(e)),n)}}},function(t,e,n){t.exports={color:"rgba(0, 0, 0, 0.87)",defaultBgColor:"#FFF",frozenRowsBgColor:"#FFF",frozenRowsColor:"rgba(0, 0, 0, 0.54)",hiliteBorderColor:"#5E9ED6",selectionBgColor:"#CCE0FF",borderColor:function(t){var e=t.col;return t.grid.colCount-1===e?["#ccc7c7","#f2f2f2","#ccc7c7",null]:["#ccc7c7",null]},frozenRowsBorderColor:function(t){var e=t.row;return t.grid.frozenRowCount-1===e?["#f2f2f2","#f2f2f2","#ccc7c7","#f2f2f2"]:["#f2f2f2"]},checkbox:{uncheckBgColor:"#FFF",checkBgColor:"rgb(76, 73, 72)",borderColor:"rgba(0, 0, 0, 0.26)"},button:{color:"#FFF",bgColor:"#2196F3"},underlayBackgroundColor:"#FFF"}},function(t,e,n){t.exports={}},function(t,e,n){var r=n(46),o=n(94);t.exports={DataSource:r,CachedDataSource:o}},function(t,e,n){var r=function t(e,n){return e=c(e),s(e)&&(e=e.then(function(e){return s(e)||n(e),t(e,n)}),n(e)),e},o=function(t,e){if(!t._sortedIndexMap)return e;var n=t._sortedIndexMap[e];return l(n)?n:e},i=n(0),a=i.array,l=i.isDef,s=i.isPromise,c=i.getOrApply,u=i.applyChainSafe,h=i.emptyFn,f=n(47),d=n(13),v={UPDATE_LENGTH:"update_length",UPDATED_LENGTH:"updated_length",UPDATED_ORDER:"updated_order"},g=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.get,r=t.length,o=void 0===r?0:r;_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._get=n,i._length=o,i._sortedIndexMap=!1,i}return _inherits(e,d),_createClass(e,null,[{key:"ofArray",value:function(t){return new e({get:function(e){return t[e]},length:t.length})}},{key:"EVENT_TYPE",get:function(){return v}}]),_createClass(e,[{key:"get",value:function(t){return this.getOriginal(o(this,t))}},{key:"getField",value:function(t,e){return this.getOriginalField(o(this,t),e)}},{key:"hasField",value:function(t,e){return this.hasOriginalField(o(this,t),e)}},{key:"setField",value:function(t,e,n){return this.setOriginalField(o(this,t),e,n)}},{key:"sort",value:function(t,e){var n=this,r=new Array(this._length),o="desc"!==e?function(t,e){return t===e?0:t>e?1:-1}:function(t,e){return t===e?0:t<e?1:-1};return f.sortPromise(function(t){return l(r[t])?r[t]:r[t]=t},function(t,e){r[t]=e},this._length,o,function(e){return n.getOriginalField(e,t)}).then(function(){n._sortedIndexMap=r,n.fireListeners(v.UPDATED_ORDER)})}},{key:"dispose",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"getOriginal",value:function(t){var e=this;return r(this._get(t),function(n){e.recordPromiseCallBackInternal(t,n)})}},{key:"getOriginalField",value:function(t,e){var n=this;if(l(e))return function t(e,n,o){if(l(e)){if(s(e))return e.then(function(e){return t(e,n,o)});if(n in e)return r(e[n],o);if("function"==typeof n)return r(n(e),o);var i=(n+"").split(".");return i.length<=1?r(e[n],o):r(u.apply(void 0,[e,function(e,n){return t(e,n,h)}].concat(_toConsumableArray(i))),o)}}(this.getOriginal(t),e,function(r){n.fieldPromiseCallBackInternal(t,e,r)})}},{key:"hasOriginalField",value:function(t,e){return!!l(e)&&("function"==typeof e||e in this.getOriginal(t))}},{key:"setOriginalField",value:function(t,e,n){if(l(e))return function(t,e,n){if(e in t)t[e]=n;else{if("function"==typeof e)return e(t,n);if("string"==typeof e)for(var r=(e+"").split("."),o=t,i=r.length,a=0;a<i;a++){var l=r[a];a===i-1?o[l]=n:o=o[l]||(o[l]={})}else t[e]=n}return!0}(this.getOriginal(t),e,n)}},{key:"fieldPromiseCallBackInternal",value:function(t,e,n){}},{key:"recordPromiseCallBackInternal",value:function(t,e){}},{key:"length",get:function(){return this._length},set:function(t){var e=this.fireListeners(v.UPDATE_LENGTH,t);a.findIndex(e,function(t){return!t})>=0||(this._length=t,this.fireListeners(v.UPDATED_LENGTH,this._length))}}]),e}();g.EMPTY=new g({length:0}),t.exports=g},function(t,e,n){var r=function t(e){return e.then(function(e){return i(e)?t(e):e})},o=function(t,e){return e?new Promise(function(n){for(var o=t.length,a=[],l=function(n){var o=t[n];o.f=e(o.v),i(o.f)&&a.push(r(o.f).then(function(t){o.f=t}))},s=0;s<o;s++)l(s);Promise.all(a).then(function(){return n(t)})}):Promise.resolve(t)},i=n(0).isPromise,a={sort:function(t,e,n,r,o){var i=function(t,e){for(var n=new Array(e),r=0;r<e;r++)n[r]=t(r);return n}(t,n);o?i.sort(function(t,e){return r(o(t),o(e))}):i.sort(r);for(var a=0;a<n;a++)e(a,i[a])},sortArray:function(t,e){Array.prototype.sort.call(t,e)},sortPromise:function(t,e,n,l,s){if(window.Promise)return function(t,e,n){return new Promise(function(a){for(var l=[],s=new Array(n),c=function(e){var n=t(e),o={v:n,f:n};s[e]=o,i(n)&&l.push(r(n).then(function(t){o.v=t,o.f=t}))},u=0;u<n;u++)c(u);Promise.all(l).then(function(){return o(s,e)}).then(a)})}(t,s,n).then(function(t){t.sort(function(t,e){return l(t.f,e.f)});for(var r=0;r<n;r++)e(r,t[r].v)});a.sort(t,e,n,l,s);var c={then:function(t){return t(),c},catch:function(){return c}};return c}};t.exports=a},function(t,e,n){(function(e){var r=function(t,e,n,r,o){return p(t,{col:e,row:n,grid:r,context:o})},o=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return g.apply(void 0,[t.theme].concat(n))||g.apply(void 0,[h.default].concat(n))},i=function(t,e,n,o,i,a,l,s,c){function h(e,h,f){if(e.canDraw()){t.save();try{t.fillStyle=r(e.color()||t.fillStyle,l,s,c,t),t.font=e.font()||t.font,e.draw({ctx:t,canvashelper:u,rect:n,offset:o,offsetLeft:h,offsetRight:f,offsetTop:i,offsetBottom:a})}finally{t.restore()}}else e.onReady(function(){return c.invalidateCell(l,s)})}if(1===e.length){h(e[0],0,0)}else{var f=e.map(function(e){return(e.width({ctx:t})||0)-0}),d=f.reduce(function(t,e){return t+e}),v=0;e.forEach(function(t,e){var n=f[e];h(t,v,d-=n),v+=n})}},a=function(t,e,n,o,a,l){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=s.offset,h=s.color,f=s.textAlign,d=s.textBaseline,v=s.font,g=s.icons;e.fillStyle=r(h,a,l,t,e),e.textAlign=f,e.textBaseline=d,e.font=v||e.font;var p=c.buildInlines(g,n);i(e,p,o,u,0,0,a,l,t)},l=function(t,n,r,o,i,a){if(e(n)){var l=_(n);u.strokeColorsRect(t,l,r,o,i,a)}else n&&(t.strokeStyle=n,t.strokeRect(r,o,i,a))},s=n(9).calcStartPosition,c=n(96),u=n(28),h=n(23),f=n(53).colorToRGB,d=n(8),v=n(0),g=v.getChainSafe,p=v.getOrApply,_=v.style.toBoxArray,y=n(49),C=n(17),m=function(){function t(e){_classCallCheck(this,t),this._grid=e}return _createClass(t,[{key:"getThemeColor",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return o.apply(void 0,[this._grid].concat(e))}},{key:"font",get:function(){return o(this._grid,"font")}},{key:"underlayBackgroundColor",get:function(){return o(this._grid,"underlayBackgroundColor")}},{key:"color",get:function(){return o(this._grid,"color")}},{key:"frozenRowsColor",get:function(){return o(this._grid,"frozenRowsColor")}},{key:"defaultBgColor",get:function(){return o(this._grid,"defaultBgColor")}},{key:"frozenRowsBgColor",get:function(){return o(this._grid,"frozenRowsBgColor")}},{key:"selectionBgColor",get:function(){return o(this._grid,"selectionBgColor")}},{key:"borderColor",get:function(){return o(this._grid,"borderColor")}},{key:"frozenRowsBorderColor",get:function(){return o(this._grid,"frozenRowsBorderColor")}},{key:"hiliteBorderColor",get:function(){return o(this._grid,"hiliteBorderColor")}},{key:"checkbox",get:function(){var t=this._grid;return this._checkbox||(this._checkbox={get uncheckBgColor(){return o(t,"checkbox","uncheckBgColor")},get checkBgColor(){return o(t,"checkbox","checkBgColor")},get borderColor(){return o(t,"checkbox","borderColor")}})}},{key:"button",get:function(){var t=this._grid;return this._button||(this._button={get color(){return o(t,"button","color")},get bgColor(){return o(t,"button","bgColor")}})}}]),t}(),w=function(){function t(e){_classCallCheck(this,t),this._grid=e,this._theme=new m(e)}return _createClass(t,[{key:"createCalculator",value:function(t){return{calcWidth:function(e){return C.toPx(e,{get full(){return t.getRect().width},get em(){return t.getContext().measureText("ã‚").width}})},calcHeight:function(e){return C.toPx(e,{get full(){return t.getRect().height},get em(){return t.getContext().measureText("ã‚").width}})}}}},{key:"getColor",value:function(t,e,n,o){return r(t,e,n,this._grid,o)}},{key:"toBoxArray",value:function(t){return _(t)}},{key:"toBoxPixelArray",value:function(t,n){if("string"==typeof t||e(t)){var r=this.createCalculator(n),o=_(t);return[r.calcHeight(o[0]),r.calcWidth(o[1]),r.calcHeight(o[2]),r.calcWidth(o[3])]}return _(t)}},{key:"drawWithClip",value:function(t,e){var n=t.getDrawRect();if(n){var r=t.getContext();r.save();try{r.beginPath(),r.rect(n.left,n.top,n.width,n.height),r.clip(),e(r)}finally{r.restore()}}}},{key:"drawBorderWithClip",value:function(t,e){var n=t.getDrawRect();if(n){var r=t.getRect(),o=t.getContext();o.save();try{o.beginPath();var i=n.left,a=n.width;n.left===r.left&&(i+=-1,a+=1);var l=n.top,s=n.height;n.top===r.top&&(l+=-1,s+=1),o.rect(i,l,a,s),o.clip(),e(o)}finally{o.restore()}}}},{key:"text",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.padding,i=r.offset,l=void 0===i?2:i,s=r.color,c=r.textAlign,u=void 0===c?"left":c,h=r.textBaseline,f=void 0===h?"middle":h,v=r.font,g=r.icons,p=e.getRect(),_=e.col,y=e.row;if(!s){s=this.theme.color;var C=this._grid.isFrozenCell(_,y);C&&C.row&&(s=this.theme.frozenRowsColor)}this.drawWithClip(e,function(r){if(o){r.font=v||r.font,o=n.toBoxPixelArray(o,e);var i=p.left+o[3],c=p.top+o[0],h=p.width-o[1]-o[3],C=p.height-o[0]-o[2];p=new d(i,c,h,C)}a(n._grid,r,t,p,_,y,{offset:l,color:s,textAlign:u,textBaseline:f,font:v,icons:g})})}},{key:"multilineText",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.padding,l=o.offset,s=void 0===l?2:l,u=o.color,h=o.textAlign,f=void 0===h?"left":h,v=o.textBaseline,g=void 0===v?"middle":v,p=o.font,_=o.lineHeight,y=void 0===_?"1em":_,C=o.icons,m=e.getRect(),w=e.col,b=e.row;if(!u){u=this.theme.color;var x=this._grid.isFrozenCell(w,b);x&&x.row&&(u=this.theme.frozenRowsColor)}this.drawWithClip(e,function(o){if(o.font=p||o.font,a){a=n.toBoxPixelArray(a,e);var l=m.left+a[3],h=m.top+a[0],v=m.width-a[1]-a[3],_=m.height-a[0]-a[2];m=new d(l,h,v,_)}var x=n.createCalculator(e);y=x.calcHeight(y),function(t,e,n,o,a,l){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},u=s.offset,h=s.color,f=s.textAlign,d=s.textBaseline,v=s.font,g=s.lineHeight,p=s.icons;e.fillStyle=r(h,a,l,t,e),e.textAlign=f,e.textBaseline=d,e.font=v||e.font;var _=0,y=g*((n=[].concat(_toConsumableArray(n))).length-1);if("top"===e.textBaseline||"hanging"===e.textBaseline){var C=(g-e.measureText("ã‚").width)/2;_+=C,y-=C}else if("bottom"===e.textBaseline||"alphabetic"===e.textBaseline||"ideographic"===e.textBaseline){var m=(g-e.measureText("ã‚").width)/2;_-=m,y+=m}var w=n.shift()||"",b=c.buildInlines(p,w);for(i(e,b,o,u,_,y,a,l,t),_+=g,y-=g;n.length;){var x=n.shift(),k=c.buildInlines(void 0,x);i(e,k,o,u,_,y,a,l,t),_+=g,y-=g}}(n._grid,o,t,m,w,b,{offset:s,color:u,textAlign:f,textBaseline:g,font:p,lineHeight:y,icons:C})})}},{key:"fillText",value:function(t,e,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=i.color,l=i.textAlign,s=void 0===l?"left":l,c=i.textBaseline,u=void 0===c?"top":c,h=i.font,f=o.col,d=o.row;if(!a){a=this.theme.color;var v=this._grid.isFrozenCell(f,d);v&&v.row&&(a=this.theme.frozenRowsColor)}var g=o.getContext();g.save();try{g.fillStyle=r(a,f,d,this._grid,g),g.textAlign=s,g.textBaseline=u,g.font=h||g.font,g.fillText(t,e,n)}finally{g.restore()}}},{key:"fillCell",value:function(t){var e=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fillColor,o=void 0===n?this.theme.defaultBgColor:n,i=t.getRect();this.drawWithClip(t,function(n){var a=t.col,l=t.row;n.fillStyle=r(o,a,l,e._grid,n),n.beginPath(),n.rect(i.left,i.top,i.width,i.height),n.fill()})}},{key:"fillCellWithState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.fillColor=this.getFillColorState(t,e),this.fillCell(t,e)}},{key:"fillRect",value:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fillColor,o=void 0===n?this.theme.defaultBgColor:n,i=e.getContext();i.save();try{var a=e.col,l=e.row;i.fillStyle=r(o,a,l,this._grid,i),i.beginPath(),i.rect(t.left,t.top,t.width,t.height),i.fill()}finally{i.restore()}}},{key:"fillRectWithState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.fillColor=this.getFillColorState(e,n),this.fillRect(t,e,n)}},{key:"getFillColorState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getSelectState(),r=t.col,o=t.row;if(!n.selected&&n.selection)return this.theme.selectionBgColor;var i=this._grid.isFrozenCell(r,o);return i&&i.row?this.theme.frozenRowsBgColor:e.fillColor||this.theme.defaultBgColor}},{key:"border",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.borderColor,i=void 0===o?this.theme.borderColor:o,a=n.lineWidth,s=void 0===a?1:a,c=t.getRect();this.drawBorderWithClip(t,function(n){var o=t.col,a=t.row,u=r(i,o,a,e._grid,n);if(1===s)n.lineWidth=1,l(n,u,c.left-.5,c.top-.5,c.width,c.height);else if(2===s)n.lineWidth=2,l(n,u,c.left,c.top,c.width-1,c.height-1);else{n.lineWidth=s;var h=s/2-1;l(n,u,c.left+h,c.top+h,c.width-s+1,c.height-s+1)}})}},{key:"borderWithState",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.getRect(),i=t.getSelectState(),a=t.col,l=t.row;if(i.selected)n.borderColor=this.theme.hiliteBorderColor,n.lineWidth=2,this.border(t,n);else{var s=this._grid.isFrozenCell(a,l);s&&s.row&&(n.borderColor=this.theme.frozenRowsBorderColor),n.lineWidth=1,this.border(t,n);var c=this._grid.selection.select;c.col+1===a&&c.row===l?this.drawBorderWithClip(t,function(t){var n=_(r(e.theme.hiliteBorderColor,c.col,c.row,e._grid,t));t.lineWidth=1,t.strokeStyle=n[1],t.beginPath(),t.moveTo(o.left-.5,o.top),t.lineTo(o.left-.5,o.bottom),t.stroke()}):c.col===a&&c.row+1===l&&this.drawBorderWithClip(t,function(t){var n=_(r(e.theme.hiliteBorderColor,c.col,c.row,e._grid,t));t.lineWidth=1,t.strokeStyle=n[0],t.beginPath(),t.moveTo(o.left,o.top-.5),t.lineTo(o.right,o.top-.5),t.stroke()})}}},{key:"checkbox",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.drawWithClip(e,function(o){!function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.animElapsedTime,a=void 0===i?1:i,l=o.uncheckBgColor,c=void 0===l?r.theme.checkbox.uncheckBgColor:l,h=o.checkBgColor,d=void 0===h?r.theme.checkbox.checkBgColor:h,v=o.borderColor,g=void 0===v?r.theme.checkbox.borderColor:v,p=o.textAlign,_=void 0===p?"center":p,y=o.textBaseline,C=void 0===y?"middle":y,m=u.measureCheckbox(t).width;t.textAlign=_,t.textBaseline=C;var w=s(t,e,m+1,m+1);if(0<a&&a<1){var b=f(c),x=f(d),k=function(t){var e=b[t],n=x[t];if(a>=1)return n;var r=e-n;return Math.ceil(e-r*a)},E=function(t){var e=b[t],n=x[t];if(a>=1)return e;var r=e-n;return Math.ceil(n+r*a)};c=n?c:"rgb("+E("r")+" , "+E("g")+", "+E("b")+")",d="rgb("+k("r")+" , "+k("g")+", "+k("b")+")"}u.drawCheckbox(t,w.x,w.y,!!n&&a,{uncheckBgColor:c,checkBgColor:d,borderColor:g})}(o,e.getRect(),t,n,r)})}},{key:"button",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.bgColor,i=void 0===o?this.theme.button.bgColor:o,l=r.padding,s=r.offset,c=void 0===s?2:s,h=r.color,f=void 0===h?this.theme.button.color:h,v=r.textAlign,g=void 0===v?"center":v,p=r.textBaseline,_=void 0===p?"middle":p,y=r.shadow,C=r.font,m=r.icons,w=e.getRect();this.drawWithClip(e,function(r){var o=e.col,s=e.row;l=n.toBoxPixelArray(l||w.height/8,e);var h=w.left+l[3],v=w.top+l[0],p=w.width-l[1]-l[3],b=w.height-l[0]-l[2];u.drawButton(r,h,v,p,b,{bgColor:i,radius:w.height/8,offset:c,shadow:y}),a(n._grid,r,t,new d(h,v,p,b),o,s,{offset:c,color:f,textAlign:g,textBaseline:_,font:C,icons:m})})}},{key:"testFontLoad",value:function(t,e,n){return function(t,e,n,r){return!(t&&!y.check(t,e)&&(y.load(t,e,function(){return function(t,e){var n=t.col,r=t.row;e.invalidateCell(n,r)}(n,r)}),1))}(t,e,n,this._grid)}},{key:"theme",get:function(){return this._theme}}]),t}();t.exports=w}).call(this,n(2).Array_isArray)},function(t,e,n){var r={},o=!document.fonts,i=o?function(t,e,o){r[t+" @ "+e]?o():n(98).load(t,e,function(){r[t+" @ "+e]=!0,o()},function(){r[t+" @ "+e]=!0,o()})}:function(t,e,n){r.all||r[t]?n():(document.fonts.ready.then(function(){r.all=!0}),document.fonts.load(t).then(function(){r[t]=!0,n()}))},a=o?function(t,e){return!!r[t+" @ "+e]||(i(t,e,function(){}),!1)}:function(t,e){return!(!r.all&&!r[t])||(!!document.fonts.check(t)||(i(t,e,function(){}),!1))};t.exports={check:a,load:i}},function(t,e,n){var r=n(12),o=n(42).getCacheOrLoad,i=n(0).isPromise,a=function(t){function e(t){var n=t.src,r=t.width,o=t.height,a=t.imageLeft,l=t.imageTop,s=t.imageWidth,c=t.imageHeight;_classCallCheck(this,e);var u=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return u._src=n,u._width=r,u._height=o,u._imageLeft=a,u._imageTop=l,u._imageWidth=s,u._imageHeight=c,u._onloaded=[],u._loaded=!1,i(n)?n.then(function(t){u._src=t,u._loadImage(t)}):u._loadImage(n),u}return _inherits(e,r),_createClass(e,[{key:"_loadImage",value:function(t){var e=this,n=this._inlineImg=o("InlineImage",50,t);i(n)?n.then(function(t){e._loaded=!0,e._inlineImg=t,e._onloaded.forEach(function(t){return t()})}):this._loaded=!0}},{key:"width",value:function(t){t.ctx;return this._width||(this._loaded?this._inlineImg.width:0)}},{key:"font",value:function(){return null}},{key:"color",value:function(){return null}},{key:"canDraw",value:function(){return this._loaded}},{key:"onReady",value:function(t){(i(this._src)||i(this._inlineImg))&&this._onloaded.push(function(){return t()})}},{key:"draw",value:function(t){var e=t.ctx,n=t.canvashelper,r=t.rect,o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom,c=this._inlineImg;n.drawInlineImageRect(e,c,this._imageLeft||0,this._imageTop||0,this._imageWidth||c.width,this._imageHeight||c.height,this._width||c.width,this._height||c.height,r.left,r.top,r.width,r.height,{offset:o+1,padding:{left:i,right:a,top:l,bottom:s}})}}]),e}();t.exports=a},function(t,e,n){var r=n(0).extend,o=n(52),i={get arrow_upward(){return n(106)},get arrow_downward(){return n(107)},get edit(){return n(108)},get add(){return n(109)},get star(){return n(110)},get star_border(){return n(111)},get star_half(){return n(112)}};t.exports={get:function(){return r(i,o)}}},function(t,e,n){t.exports={}},function(t,e,n){var r=function(t){return parseInt(t,16)},o=function(t,e,n){return{r:t,g:e,b:n,a:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1}},i=function(t){var e=t.r,n=t.g,r=t.b,o=t.a;return 0<=e&&e<=255&&0<=n&&n<=255&&0<=r&&r<=255&&0<=o&&o<=1},a=function(t){return Math.ceil(255*t/100)},l=function(t){if(t.match(/^#[0-9a-f]{3}$/i))return n=(e=t)[1],l=e[2],s=e[3],o(r(n+n),r(l+l),r(s+s));var e,n,l,s,c,u,h,f,d,v,g;if(t.match(/^#[0-9a-f]{6}$/i))return u=(c=t)[1],h=c[2],f=c[3],d=c[4],v=c[5],g=c[6],o(r(u+h),r(f+d),r(v+g));var p=t.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(p){var _=o(p[1]-0,p[2]-0,p[3]-0);if(i(_))return _}if(p=t.match(/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d(\.\d)?)\s*\)$/i)){var y=o(p[1]-0,p[2]-0,p[3]-0,p[4]-0);if(i(y))return y}if(p=t.match(/^rgb\(\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*\)$/i)){var C=o(a(p[1]),a(p[3]),a(p[5]));if(i(C))return C}if(p=t.match(/^rgba\(\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d{1,3}(\.\d)?)%\s*,\s*(\d(\.\d)?)\s*\)$/i)){var m=o(a(p[1]),a(p[3]),a(p[5]),p[7]-0);if(i(m))return m}return null},s={};t.exports={colorToRGB:function(t){return"string"!=typeof t?o(0,0,0,0):(t=t.toLowerCase().trim(),s[t]?s[t]:l(t)||(s[t]=function(t){var e=document.createElement("div"),n=e.style;n.color=t,n.position="fixed",n.height="1px",n.width="1px",n.opacity=0,document.body.appendChild(e);var r=document.defaultView.getComputedStyle(e,"").color;return document.body.removeChild(e),l(r)}(t)))}}},function(t,e,n){var r=n(13),o={CHANGE_STYLE:"change_style"},i=void 0,a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.textAlign,r=void 0===n?"left":n,o=t.textBaseline,i=void 0===o?"middle":o,a=t.bgColor;_classCallCheck(this,e);var l=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l._textAlign=r,l._textBaseline=i,l._bgColor=a,l}return _inherits(e,r),_createClass(e,null,[{key:"EVENT_TYPE",get:function(){return o}},{key:"DEFAULT",get:function(){return i||(i=new e)}}]),_createClass(e,[{key:"doChangeStyle",value:function(){this.fireListeners(o.CHANGE_STYLE)}},{key:"clone",value:function(){return new e(this)}},{key:"textAlign",get:function(){return this._textAlign},set:function(t){this._textAlign=t,this.doChangeStyle()}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline=t,this.doChangeStyle()}},{key:"bgColor",get:function(){return this._bgColor},set:function(t){this._bgColor=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r=n(16),o=r.Style,i=function(){function t(e){_classCallCheck(this,t),this._headerCell=e,this.onDrawCell=this.onDrawCell.bind(this)}return _createClass(t,[{key:"onDrawCell",value:function(t,e,n,o){var i=e.style,a=e.drawCellBase;delete e.getRecord,delete e.style;var l=o.getGridCanvasHelper();a(),this.drawInternal(t,n,r.of(i,this.StyleClass),l,o,e)}},{key:"drawInternal",value:function(t,e,n,r,o,i){}},{key:"bindGridEvent",value:function(t){return[]}},{key:"StyleClass",get:function(){return o}}]),t}();t.exports=i},function(t,e,n){var r=(0,n(0).extend)(n(4).EVENT_TYPE,{CHANGED_VALUE:"changed_value"});t.exports=r},function(t,e,n){var r=n(58),o=n(65),i=n(29),a=n(23),l=n(45),s=n(95),c=n(48),u=n(51),h=n(129);t.exports={core:r,tools:o,ListGrid:s,columns:i,themes:a,data:l,GridCanvasHelper:c,get icons(){return u.get()},register:h,get _internal(){return console.warn("use internal!!"),{color:n(53),sort:n(47),calc:n(17),symbolManager:n(1),path2DManager:n(24)}}}},function(t,e,n){var r=n(4);t.exports={DrawGrid:r}},function(t,e,n){var r=function(t){var e=void 0;if(t._height>a){var n=i.getScrollBarSize(),r=t._scrollable.offsetHeight,o=a-r+n,l=t._height-r+n;t._p=o/l,e=a}else t._p=1,e=t._height;t._endPointElement.style.top=e.toFixed()+"px",t._endPointElement.style.left=t._width.toFixed()+"px"},o=n(5),i=n(27),a=n(0).browser.heightLimit-1e3,l=function(){function t(){_classCallCheck(this,t),this._handler=new o,this._scrollable=document.createElement("div"),this._scrollable.classList.add("grid-scrollable"),this._height=0,this._width=0,this._endPointElement=document.createElement("div"),this._endPointElement.classList.add("grid-scroll-end-point"),r(this),this._scrollable.appendChild(this._endPointElement)}return _createClass(t,[{key:"calcTop",value:function(t){var e=t-this.scrollTop;return this._scrollable.scrollTop+e}},{key:"getElement",value:function(){return this._scrollable}},{key:"setScrollSize",value:function(t,e){this._width=t,this._height=e,r(this)}},{key:"onScroll",value:function(t){this._handler.on(this._scrollable,"scroll",t)}},{key:"dispose",value:function(){this._handler.dispose()}},{key:"scrollWidth",get:function(){return this._width},set:function(t){this._width=t,r(this)}},{key:"scrollHeight",get:function(){return this._height},set:function(t){this._height=t,r(this)}},{key:"scrollLeft",get:function(){return Math.ceil(this._scrollable.scrollLeft)},set:function(t){this._scrollable.scrollLeft=t}},{key:"scrollTop",get:function(){return Math.ceil(this._scrollable.scrollTop/this._p)},set:function(t){this._scrollable.scrollTop=t*this._p}}]),t}();t.exports=l},function(t,e,n){var r=n(61);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(6)(!1)).push([t.i,".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var r=function(){function t(){_classCallCheck(this,t),this._keys=[],this._vals={},this._sorted=!1}return _createClass(t,[{key:"put",value:function(t,e){t in this._vals||(this._keys.push(t),this._sorted=!1),this._vals[t]=e}},{key:"get",value:function(t){return this._vals[t]}},{key:"eachAll",value:function(t){var e=this;this._keys.forEach(function(n){t(e.get(n),n)})}},{key:"each",value:function(t,e,n){var r=this._keys,o=r.length;this._sorted||(r.sort(function(t,e){return t<e?-1:t>e?1:0}),this._sorted=!0);for(var i=function(t,e){for(var n=0,r=t.length-1;n<=r;){var o=Math.floor((n+r)/2);if(t[o]===e)return o;t[o]>e?r=o-1:n=o+1}return r<0?0:r}(r,t);i<o;i++){var a=r[i];if(t<=a&&a<=e)n(this.get(a),a);else if(e<a)return}}}]),t}();t.exports=r},function(t,e,n){var r=new(n(5)),o=void 0;function i(){(o=Math.ceil(window.devicePixelRatio||1))>1&&o%2!=0&&(o+=1)}i(),r.on(window,"resize",i),t.exports={transform:function(t){var e=t.getContext("2d"),n=t.getAttribute;t.getAttribute=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var a=n.call.apply(n,[this,t].concat(r));return"width"!==t&&"height"!==t||(a/=o),a};var r=t.setAttribute;t.setAttribute=function(t,n){var i="width"===t||"height"===t;i&&(n*=o);for(var a=arguments.length,l=Array(a>2?a-2:0),s=2;s<a;s++)l[s-2]=arguments[s];var c=r.call.apply(r,[this,t,n].concat(l));return i&&e.scale(o,o),c},Object.defineProperty(t,"width",{get:function(){return t.getAttribute("width")},set:function(e){t.setAttribute("width",Math.floor(e))},configurable:!0,enumerable:!0}),Object.defineProperty(t,"height",{get:function(){return t.getAttribute("height")},set:function(e){t.setAttribute("height",Math.floor(e))},configurable:!0,enumerable:!0});var i=e.drawImage;return e.drawImage=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(e!==t||1===o)return i.call.apply(i,[this,e].concat(r));this.save();try{return this.scale(1/o,1/o),r.length>4?(r[4]=r[4]*o,r[5]=r[5]*o):(r[0]=r[0]*o,r[1]=r[1]*o),i.call.apply(i,[this,e].concat(r))}finally{this.restore()}},t}}},function(t,e,n){var r=n(28);t.exports={canvashelper:r}},function(t,e,n){var r=n(18),o=n(30),i=n(14),a=n(67),l=n(68),s=n(69),c=n(73),u=n(77),h=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,a),_createClass(e,[{key:"disabled",get:function(){return this._disabled}},{key:"readOnly",get:function(){return this._readOnly}}]),e}(),f=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,s),_createClass(e,[{key:"disabled",get:function(){return this._disabled}},{key:"readOnly",get:function(){return this._readOnly}}]),e}(),d={ACTIONS:{CHECK:new h,INPUT:new f},get BaseAction(){return r},get Editor(){return i},get Action(){return o},get CheckEditor(){return a},get ButtonAction(){return l},get SmallDialogInputEditor(){return s},get InlineInputEditor(){return console.warn("InlineInputEditor is an experiment stage"),c},get InlineMenuEditor(){return u},of:function(t){return t?"string"==typeof t?d.ACTIONS[t.toUpperCase()]||d.of(null):t:d.ACTIONS.DEFAULT}};t.exports=d},function(t,e,n){var r=function(t){if("number"==typeof t)return 0===t?1:0;if("string"==typeof t){if("false"===t)return"true";if("off"===t)return"on";if(t.match(/^0+$/))return t.replace(/^(0*)0$/,"$11");if("true"===t)return"false";if("on"===t)return"off";if(t.match(/^0*1$/))return t.replace(/^(0*)1$/,"$10")}return!t},o=n(0),i=o.obj.setReadonly,a=o.isPromise,l=n(31),s=l.bindCellClickAction,c=l.bindCellKeyAction,u=n(32),h=n(14),f=n(1).CHECK_COLUMN_STATE_ID,d=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,h),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"bindGridEvent",value:function(t,e,n){var o=this;t[f]||i(t,f,{});var l=t[f],h=function(e){var n=e.col+":"+e.row,i=n+"::block";if(!(o.readOnly||o.disabled||l[i])){var s=t.doChangeValue(e.col,e.row,r);if(s){var c=function(){u(200,function(r){1===r?delete l[n]:l[n]={elapsed:r},t.invalidateCell(e.col,e.row)})};a(s)?(l[i]=!0,s.then(function(){delete l[i],c()})):c()}}};return[].concat(_toConsumableArray(s(t,e,n,{action:h,mouseOver:function(e){return!o.disabled&&(l.mouseActiveCell={col:e.col,row:e.row},t.invalidateCell(e.col,e.row),!0)},mouseOut:function(e){delete l.mouseActiveCell,t.invalidateCell(e.col,e.row)}})),_toConsumableArray(c(t,e,n,{action:function(e){for(var r=t.selection.range,o=t.selection.select.col,i=r.start.row;i<=r.end.row;i++)n.isTarget(o,i)&&h({col:o,row:i})},acceptKeys:[13,32]})))}}]),e}();t.exports=d},function(t,e,n){var r=n(0).obj.setReadonly,o=n(30),i=n(1).BUTTON_COLUMN_STATE_ID,a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,o),_createClass(e,[{key:"getState",value:function(t){return t[i]||r(t,i,{}),t[i]}}]),e}();t.exports=a},function(t,e,n){(function(e){var r=n(0).obj.setReadonly,o=n(70),i=n(1).SMALL_DIALOG_INPUT_EDITOR_STATE_ID,a=null,l=0;function s(t,e,n,s){t[i]||r(t,i,{}),a||(a=new o);var c=t[i];c.element||(c.element=a,l++,t.addDisposable({dispose:function(){--l||(a.dispose(),a=null)}})),a.attach(t,n,e.col,e.row,s)}function c(t){a&&a.detach(t)}var u=n(33),h=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._helperText=t.helperText,e._inputValidator=t.inputValidator,e._validator=t.validator,e._classList=t.classList,e._type=t.type,e}return _inherits(n,u),_createClass(n,[{key:"dispose",value:function(){this._inputDialogManager.dispose(),this._inputDialogManager=null}},{key:"clone",value:function(){return new n(this)}},{key:"onInputCellInternal",value:function(t,e,n){s(t,e,this,n)}},{key:"onOpenCellInternal",value:function(t,e){var n=this;t.doGetCellValue(e.col,e.row,function(r){s(t,e,n,r)})}},{key:"onChangeSelectCellInternal",value:function(t,e,n){c()}},{key:"onGridScrollInternal",value:function(t){c(!0)}},{key:"onChangeDisabledInternal",value:function(){c(!0)}},{key:"onChangeReadOnlyInternal",value:function(){c(!0)}},{key:"onSetInputAttrsInternal",value:function(t,e,n){o.setInputAttrs(this,t,n)}},{key:"classList",get:function(){return this._classList&&(e(this._classList)?this._classList:[this._classList])},set:function(t){this._classList=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"helperText",get:function(){return this._helperText}},{key:"inputValidator",get:function(){return this._inputValidator}},{key:"validator",get:function(){return this._validator}}]),n}();t.exports=h}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(0),o=r.event,i=o.getKeyCode,a=o.cancel,l=r.then,s=n(5),c=n(15).createElement,u="cheetah-grid__small-dialog-input",h=u+"__input",f=u+"--hidden",d=u+"--shown";function v(t,e){e.tryWithOffEvents(t,"blur",function(){!function(){t.focus();var e=t.value.length;try{if(void 0!==t.selectionStart)return t.selectionStart=e,void(t.selectionEnd=e)}catch(t){}if(document.selection){var n=t.createTextRange();n.collapse(),n.moveEnd("character",e),n.moveStart("character",e),n.select()}}()})}function g(t,e,n){var r=t.type;n.type=r||""}var p=function(){function t(){_classCallCheck(this,t),this._handler=new s,this._dialog=function(){n(71);var t=c("div",{classList:[u,f]}),e=c("input",{classList:h});return e.readonly=!0,e.tabIndex=-1,t.appendChild(e),t}(),this._input=this._dialog.querySelector("."+h),this._bindDialogEvents()}return _createClass(t,null,[{key:"setInputAttrs",value:function(){g.apply(void 0,arguments)}}]),_createClass(t,[{key:"dispose",value:function(){var t=this._dialog;this.detach(),this._handler.dispose(),this._dialog=null,this._input=null,this._beforePropEditor=null,t.parentElement&&t.parentElement.removeChild(t)}},{key:"attach",value:function(t,e,n,r,o){var i=this._handler,a=this._dialog,l=this._input;this._beforePropEditor&&function(t,e,n,r){var o,i=r.classList;i&&(o=e.classList).remove.apply(o,_toConsumableArray(i)),delete e.dataset.helperText,n.type=""}(0,a,l,this._beforePropEditor),delete a.dataset.errorMessage,a.classList.remove(d),a.classList.add(f),l.readonly=!1,l.tabIndex=0;var s=t.getAttachCellArea(n,r),c=s.element,u=s.rect;a.style.top=u.top.toFixed()+"px",a.style.left=u.left.toFixed()+"px",a.style.width=u.width.toFixed()+"px",l.style.height=u.height.toFixed()+"px",c.appendChild(a),l.value=o,l.style.font=t.font||"16px sans-serif";var h={grid:t,col:n,row:r,editor:e};this._onInputValue(l,h),v(l,i),a.classList.add(d),a.classList.remove(f),l.readonly=!0,function(t,e,n,r){var o,i=r.classList,a=r.helperText;i&&(o=e.classList).add.apply(o,_toConsumableArray(i)),a&&"function"!=typeof a&&(e.dataset.helperText=a),g(r,0,n)}(0,a,l,e),this._activeData=h,this._beforePropEditor=e}},{key:"detach",value:function(t){if(this._isActive()){var e=this._dialog,n=this._input;e.classList.remove(d),e.classList.add(f),n.readonly=!1,n.tabIndex=-1;var r=this._activeData,o=r.grid,i=r.col,a=r.row;o.invalidateCell(i,a),t&&o.focus()}this._activeData=null,this._beforeValue=null}},{key:"_doChangeValue",value:function(){var t=this;if(!this._isActive())return!1;var e=this._input,n=e.value;return l(this._validate(n),function(r){if(r&&n===e.value){var o=t._activeData,i=o.grid,a=o.col,l=o.row;return i.doChangeValue(a,l,function(){return n}),!0}return!1})}},{key:"_isActive",value:function(){var t=this._dialog;return!(!t||!t.parentElement)&&!!this._activeData}},{key:"_bindDialogEvents",value:function(){var t=this,e=this._handler,n=this._dialog,r=this._input,o=function(t){return t.stopPropagation()};e.on(n,"click",o),e.on(n,"dblclick",o),e.on(n,"mousedown",o),e.on(n,"touchstart",o),e.on(r,"compositionstart",function(t){r.classList.add("composition")}),e.on(r,"compositionend",function(e){r.classList.remove("composition"),t._onInputValue(r)});var s=function(e){r.classList.contains("composition")||t._onInputValue(r)};e.on(r,"keyup",s),e.on(r,"keypress",s),e.on(r,"keydown",function(e){if(!r.classList.contains("composition")){var n=i(e);if(27===n)t.detach(!0),a(e);else if(13===n){var o=t._input,s=o.value;l(t._doChangeValue(),function(e){e&&s===o.value&&t.detach(!0)}),a(e)}else t._onInputValue(r)}})}},{key:"_onInputValue",value:function(t,e){var n=this._beforeValue,r=t.value;n!==r&&this._onInputValueChange(r,n,e),this._beforeValue=r}},{key:"_onInputValueChange",value:function(t,e,n){n=n||this._activeData;var r=this._dialog,o=n,i=o.grid,a=o.col,l=o.row,s=o.editor;if("function"==typeof s.helperText){var c=s.helperText(t,{grid:i,col:a,row:l});c?r.dataset.helperText=c:delete r.dataset.helperText}"errorMessage"in r.dataset&&this._validate(t,!0)}},{key:"_validate",value:function(t,e){var n=this._dialog,r=this._input,o=this._activeData,i=o.grid,a=o.col,s=o.row,c=o.editor,u=null;return c.inputValidator&&(u=c.inputValidator(t,{grid:i,col:a,row:s})),l(u,function(o){return o||!c.validator||e||(o=c.validator(t,{grid:i,col:a,row:s})),l(o,function(e){return e&&t===r.value?n.dataset.errorMessage=e:delete n.dataset.errorMessage,!e})})}}]),t}();t.exports=p},function(t,e,n){var r=n(72);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(6)(!1)).push([t.i,'.cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:"";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}',""])},function(t,e,n){(function(e){var r=n(0).obj.setReadonly,o=n(33),i=n(74),a=n(1).INLINE_INPUT_EDITOR_STATE_ID,l=null,s=0;function c(t,e,n,o){t[a]||r(t,a,{}),l||(l=new i);var c=t[a];c.element||(c.element=l,s++,t.addDisposable({dispose:function(){--s||(l.dispose(),l=null)}})),l.attach(t,n,e.col,e.row,o)}function u(t){l&&l.detach(t)}function h(t){l&&l.doChangeValue()}var f=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._classList=t.classList,e._type=t.type,e}return _inherits(n,o),_createClass(n,[{key:"clone",value:function(){return new n(this)}},{key:"onInputCellInternal",value:function(t,e,n){c(t,e,this,n)}},{key:"onOpenCellInternal",value:function(t,e){var n=this;t.doGetCellValue(e.col,e.row,function(r){c(t,e,n,r)})}},{key:"onChangeSelectCellInternal",value:function(t,e,n){h(),u()}},{key:"onGridScrollInternal",value:function(t){h(),u(!0)}},{key:"onChangeDisabledInternal",value:function(){u(!0)}},{key:"onChangeReadOnlyInternal",value:function(){u(!0)}},{key:"onSetInputAttrsInternal",value:function(t,e,n){i.setInputAttrs(this,t,n)}},{key:"classList",get:function(){return this._classList&&(e(this._classList)?this._classList:[this._classList])},set:function(t){this._classList=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}}]),n}();t.exports=f}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(0).event,o=r.getKeyCode,i=r.cancel,a=n(5),l=n(15).createElement,s="cheetah-grid__inline-input";function c(t,e,n){var r,o=t.classList,i=t.type;o&&(r=n.classList).add.apply(r,_toConsumableArray(o));n.type=i||""}var u=function(){function t(){_classCallCheck(this,t),this._handler=new a,this._input=(n(75),l("input",{classList:s})),this._bindInputEvents()}return _createClass(t,null,[{key:"setInputAttrs",value:function(){c.apply(void 0,arguments)}}]),_createClass(t,[{key:"dispose",value:function(){this.detach(),this._handler.dispose(),this._input=null,this._beforePropEditor=null}},{key:"attach",value:function(t,e,n,r,o){var i=this._input,a=this._handler;if(this._beforePropEditor){var l,s=this._beforePropEditor.classList;if(s)(l=i.classList).remove.apply(l,_toConsumableArray(s))}i.style.font=t.font||"16px sans-serif";var u=t.getAttachCellArea(n,r),h=u.element,f=u.rect;i.style.top=f.top.toFixed()+"px",i.style.left=f.left.toFixed()+"px",i.style.width=f.width.toFixed()+"px",i.style.height=f.height.toFixed()+"px",h.appendChild(i),c(e,0,i),i.value=o,this._activeData={grid:t,col:n,row:r,editor:e},this._beforePropEditor=e;a.tryWithOffEvents(i,"blur",function(){!function(){i.focus();var t=i.value.length;try{if(void 0!==i.selectionStart)return i.selectionStart=t,void(i.selectionEnd=t)}catch(t){}if(document.selection){var e=i.createTextRange();e.collapse(),e.moveEnd("character",t),e.moveStart("character",t),e.select()}}()})}},{key:"detach",value:function(t){if(this._isActive()){var e=this._activeData,n=e.grid,r=e.col,o=e.row,i=this._input;this._handler.tryWithOffEvents(i,"blur",function(){i.parentElement.removeChild(i)}),n.invalidateCell(r,o),t&&n.focus()}this._activeData=null}},{key:"doChangeValue",value:function(){if(this._isActive()){var t=this._input.value,e=this._activeData,n=e.grid,r=e.col,o=e.row;n.doChangeValue(r,o,function(){return t})}}},{key:"_isActive",value:function(){var t=this._input;return!(!t||!t.parentElement)&&!!this._activeData}},{key:"_bindInputEvents",value:function(){var t=this,e=this._handler,n=this._input,r=function(t){return t.stopPropagation()};e.on(n,"click",r),e.on(n,"mousedown",r),e.on(n,"touchstart",r),e.on(n,"dblclick",r),e.on(n,"compositionstart",function(t){n.classList.add("composition")}),e.on(n,"compositionend",function(t){n.classList.remove("composition")}),e.on(n,"keydown",function(e){if(!n.classList.contains("composition")&&13===o(e)){if(!t._isActive())return;var r=t._activeData.grid;t.doChangeValue(),r&&r.focus(),t.detach(),i(e)}}),e.on(n,"blur",function(e){t.doChangeValue(),t.detach()})}}]),t}();t.exports=u},function(t,e,n){var r=n(76);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(6)(!1)).push([t.i,".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}",""])},function(t,e,n){(function(e){var r=n(0).obj.setReadonly,o=n(34).normalize,i=n(14),a=n(4).EVENT_TYPE,l=a.SELECTED_CELL,s=a.CLICK_CELL,c=a.KEYDOWN,u=a.SCROLL,h=a.MOUSEOVER_CELL,f=a.MOUSEOUT_CELL,d=a.MOUSEMOVE_CELL,v=n(78),g=n(1).INLINE_MENU_EDITOR_STATE_ID,p=null,_=0;function y(t){p&&p.detach(t)}var C=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._classList=t.classList,e._options=o(t.options),e}return _inherits(n,i),_createClass(n,[{key:"dispose",value:function(){}},{key:"clone",value:function(){return new n(this)}},{key:"onChangeDisabledInternal",value:function(){y(!0)}},{key:"onChangeReadOnlyInternal",value:function(){y(!0)}},{key:"bindGridEvent",value:function(t,e,n){var o=this,i=function(e){o.readOnly||o.disabled||t.doGetCellValue(e.col,e.row,function(n){!function(t,e,n,o){t[g]||r(t,g,{}),p||(p=new v);var i=t[g];i.element||(i.element=p,_++,t.addDisposable({dispose:function(){--_||(p.dispose(),p=null)}})),p.attach(t,n,e.col,e.row,o)}(t,e,o,n)})};return[t.listen(s,function(t){n.isTarget(t.col,t.row)&&i({col:t.col,row:t.row})}),t.listen(c,function(e,r){if(113===e||13===e){var o=t.selection.select;n.isTarget(o.col,o.row)&&i({col:o.col,row:o.row})}}),t.listen(l,function(t){y()}),t.listen(u,function(){y(!0)}),t.listen(h,function(e){o.readOnly||o.disabled||n.isTarget(e.col,e.row)&&(t.getElement().style.cursor="pointer")}),t.listen(d,function(e){o.readOnly||o.disabled||n.isTarget(e.col,e.row)&&(t.getElement().style.cursor||(t.getElement().style.cursor="pointer"))}),t.listen(f,function(e){n.isTarget(e.col,e.row)&&(t.getElement().style.cursor="")})]}},{key:"classList",get:function(){return this._classList&&(e(this._classList)?this._classList:[this._classList])},set:function(t){this._classList=t}},{key:"options",get:function(){return this._options},set:function(t){this._options=o(t)}}]),n}();t.exports=C}).call(this,n(2).Array_isArray)},function(t,e,n){(function(e){var r=n(0),o=r.isDef,i=r.event,a=i.getKeyCode,l=i.cancel,s=n(5),c=n(15),u=c.createElement,h=c.appendHtml,f=c.empty,d=c.disableFocus,v=c.isFocusable,g=c.findPrevSiblingFocusable,p=c.findNextSiblingFocusable,_="cheetah-grid__inline-menu",y=_+"__menu-item",C=_+"--hidden",m=_+"--shown",w=y+"--empty";function b(t){for(var e=t;!e.classList.contains(y);)if(!(e=e.parentElement)||e.classList.contains(_))return;return e}function x(t,e,n){n.style.top=e.top.toFixed()+"px",n.style.left=e.left.toFixed()+"px",n.style.width=e.width.toFixed()+"px",n.style["line-height"]=e.height.toFixed()+"px",t.appendChild(n)}function k(t,n,r,i,a,l){var s=n.options,c=n.classList;l.classList.remove(m),l.classList.add(C),f(l),l.style.font=t.font||"16px sans-serif";var d=null,v=null;s.forEach(function(t,n){var r=function(t,n){var r,i=t.classList,a=t.caption,l=t.value,s=t.html,c=u("li",{classList:y});if(c.tabIndex=0,c.dataset.valueindex=n,i&&(r=c.classList).add.apply(r,_toConsumableArray(e(i)?i:[i])),a){var f=u("span",{text:a});c.appendChild(f)}else s&&h(c,s);return""!==l&&o(l)||c.classList.add(w),c}(t,n);l.appendChild(r),t.value===a&&(v=r,r.dataset.select=!0),r.classList.contains(w)&&(d=r)});var g,p=v||d||l.children[0];c&&(g=l.classList).add.apply(g,_toConsumableArray(c));var _=Array.prototype.slice.call(l.children,0),b=_.indexOf(p),k=t.getAttachCellArea(r,i),E=k.element,L=k.rect;L.width++,x(E,L,l);for(var I=0,R=0,S=0;S<_.length;S++){var O=_[S].offsetHeight;S<b&&(I+=O),R+=O}L.offsetTop(-I),l.style["transform-origin"]="center "+(I+Math.ceil(_[b].offsetHeight/2))+"px 0px",x(E,L,l);var A=l.getBoundingClientRect(),T=(R-A.height)/2,M=A.top-T,B=M,P=B+R,D=window.innerHeight;P>D-20&&(B-=P-D+20);B<20&&(B=20),B!==M&&(L.offsetTop(-(M-B)),x(E,L,l)),p&&p.focus(),l.classList.remove(C),l.classList.add(m)}var E=function(){function t(){_classCallCheck(this,t),this._handler=new s,this._menu=(n(79),u("ul",{classList:_})),this._bindMenuEvents()}return _createClass(t,[{key:"dispose",value:function(){var t=this._menu;this.detach(),this._handler.dispose(),this._menu=null,this._beforePropEditor=null,t.parentElement&&t.parentElement.removeChild(t)}},{key:"attach",value:function(t,e,n,r,o){var i=this._menu;if(this._beforePropEditor){var a,l=this._beforePropEditor.classList;if(l)(a=i.classList).remove.apply(a,_toConsumableArray(l))}k(t,e,n,r,o,i),this._activeData={grid:t,col:n,row:r,editor:e},this._beforePropEditor=e}},{key:"detach",value:function(t){if(this._isActive()){var e=this._activeData,n=e.grid,r=e.col,o=e.row;!function(t,e,n,r){r.classList.remove(m),r.classList.add(C),d(r)}(0,0,0,this._menu),n.invalidateCell(r,o),t&&n.focus()}this._activeData=null}},{key:"_doChangeValue",value:function(t){if(this._isActive()){var e=this._activeData,n=e.grid,r=e.col,o=e.row,i=e.editor.options[t].value;n.doChangeValue(r,o,function(){return i})}}},{key:"_isActive",value:function(){var t=this._menu;return!(!t||!t.parentElement)&&!!this._activeData}},{key:"_bindMenuEvents",value:function(){var t=this,e=this._handler,n=this._menu,r=function(t){return t.stopPropagation()};e.on(n,"mousedown",r),e.on(n,"touchstart",r),e.on(n,"dblclick",r),e.on(n,"click",function(e){e.stopPropagation();var n=b(e.target);if(n){n.dataset.valueindex;t._doChangeValue(n.dataset.valueindex),t.detach(!0)}}),e.on(n,"keydown",function(e){var r=b(e.target);if(r){var o=a(e);if(13===o){var i=r.dataset.valueindex;t._doChangeValue(i),t.detach(!0),l(e)}else if(27===o)t.detach(!0),l(e);else if(38===o){var s=g(r);s&&(s.focus(),l(e))}else if(40===o){var c=p(r);c&&(c.focus(),l(e))}else if(9===o)if(e.shiftKey){if(!g(r)){var u=n.querySelectorAll("."+y),h=u[u.length-1];v(h)||(h=g(h)),h&&(h.focus(),l(e))}}else if(!p(r)){var f=n.querySelector("."+y);v(f)||(f=p(f)),f&&(f.focus(),l(e))}}})}}]),t}();t.exports=E}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(80);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(6)(!1)).push([t.i,'.cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}',""])},function(t,e,n){var r=n(10),o=n(82),i=n(83),a=n(84),l=n(85),s=n(87),c=n(88),u=n(89),h=n(91),f=n(25),d={TYPES:{DEFAULT:new r,NUMBER:new o,CHECK:new i,BUTTON:new a,IMAGE:new l,MULTILINETEXT:new f},get Column(){return r},get NumberColumn(){return o},get CheckColumn(){return i},get ButtonColumn(){return a},get ImageColumn(){return l},get PercentCompleteBarColumn(){return s},get IconColumn(){return c},get BranchGraphColumn(){return u},get MenuColumn(){return h},get MultilineTextColumn(){return f},of:function(t){return t?"string"==typeof t?d.TYPES[t.toUpperCase()]||d.of(null):t:d.TYPES.DEFAULT}};t.exports=d},function(t,e,n){var r=n(10),o=n(36),i=void 0,a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._format=t.format,n}return _inherits(e,r),_createClass(e,null,[{key:"defaultFotmat",get:function(){return i||(i=new Intl.NumberFormat)},set:function(t){i=t}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"withFormat",value:function(t){var e=this.clone();return e._format=t,e}},{key:"convertInternal",value:function(t){return isNaN(t-0)?t:(this._format||e.defaultFotmat).format(t-0)}},{key:"StyleClass",get:function(){return o}},{key:"format",get:function(){return this._format}}]),e}();t.exports=a},function(t,e,n){var r=n(11),o=n(37),i=n(1).CHECK_COLUMN_STATE_ID,a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,r),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"convertInternal",value:function(t){return function(t){if("string"==typeof t){if("false"===t)return!1;if("off"===t)return!1;if(t.match(/^0+$/))return!1}return t}(t)}},{key:"drawInternal",value:function(t,e,n,r,o,a){var l=a.drawCellBase,s=n.textAlign,c=n.textBaseline,u=n.borderColor,h=n.checkBgColor,f=n.uncheckBgColor,d=n.bgColor;d&&l({bgColor:d});var v=e.col+":"+e.row,g=o[i]&&o[i][v],p={textAlign:s,textBaseline:c,borderColor:u,checkBgColor:h,uncheckBgColor:f};g&&(p.animElapsedTime=g.elapsed),r.checkbox(t,e,p)}},{key:"bindGridEvent",value:function(t,e,n){return[]}},{key:"StyleClass",get:function(){return o}}]),e}();t.exports=a},function(t,e,n){var r=n(10),o=n(38),i=n(1).BUTTON_COLUMN_STATE_ID,a=n(21),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._caption=t.caption,n}return _inherits(e,r),_createClass(e,[{key:"withCaption",value:function(t){var e=this.clone();return e._caption=t,e}},{key:"clone",value:function(){return new e(this)}},{key:"convertInternal",value:function(t){return this._caption||t}},{key:"drawInternal",value:function(t,e,n,r,o,l){var s=l.drawCellBase,c=l.getIcon,u=n.textAlign,h=n.textBaseline,f=n.bgColor,d=n.color,v=n.buttonBgColor,g=n.font,p=n.padding;f&&s({bgColor:f}),r.testFontLoad(g,t,e);var _=e.col,y=e.row,C=!1,m=o[i];m&&(m.mouseActiveCell&&m.mouseActiveCell.col===_&&m.mouseActiveCell.row===y?C=!0:e.getSelectState().selected&&(C=!0)),a.loadIcons(c(),e,r,function(e,n){r.button(t,n,{textAlign:u,textBaseline:h,bgColor:v,color:d,font:g,padding:p,shadow:!C||{color:"rgba(0, 0, 0, 0.48)",blur:6,offsetY:3},icons:e})})}},{key:"StyleClass",get:function(){return o}},{key:"caption",get:function(){return this._caption}}]),e}();t.exports=l},function(t,e,n){var r=n(39),o=n(42).getCacheOrLoad,i=n(9).calcStartPosition,a=n(11),l=50,s=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,a),_createClass(e,[{key:"onDrawCell",value:function(t,n,r,i){return _get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onDrawCell",this).call(this,o("ImageColumn",l,t),n,r,i)}},{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,e,n,r,o,a){var l=a.drawCellBase;if(t){var s=n.textAlign,c=n.textBaseline,u=n.margin,h=n.bgColor;h&&l({bgColor:h}),r.drawWithClip(e,function(r){r.textAlign=s,r.textBaseline=c;var o=e.getRect();if("keep-aspect-ratio"===n.imageSizing){var a=function(t,e,n,r){var o=t,i=e;return o>n&&(i=(o=n)*e/t),i>r&&(o=(i=r)*t/e),{width:o,height:i}}(t.width,t.height,o.width-2*u,o.height-2*u),l=a.width,h=a.height,f=i(r,o,l,h,{offset:u});r.drawImage(t,0,0,t.width,t.height,f.x,f.y,l,h)}else r.drawImage(t,0,0,t.width,t.height,o.left+u,o.top+u,o.width-2*u,o.height-2*u)})}}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=s},function(t,e,n){var r=function(){function t(e){_classCallCheck(this,t),this._list=[],this._map={},this._cacheSize=e||50}return _createClass(t,[{key:"get",value:function(t){var e=this._map[t];if(e){var n=this._list.indexOf(t);this._list.splice(n,1),this._list.push(t)}return e}},{key:"put",value:function(t,e){if(this._map[t]){var n=this._list.indexOf(t);this._list.splice(n,1)}if(this._map[t]=e,this._list.push(t),this._list.length>this._cacheSize){var r=this._list.shift();delete this._map[r]}}}]),t}();t.exports=r},function(t,e,n){var r=n(41),o=n(0),i=o.getOrApply,a=o.str,l=n(10),s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._min=t.min||0,n._max=t.max||n._min+100,n._formatter=t.formatter||function(t){return t},n}return _inherits(e,l),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,n,r,o,l,s){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"drawInternal",this).call(this,this._formatter(t),n,r,o,l,s);var c=r.barColor,u=r.barBgColor,h=r.barHeight,f=t+"";a.endsWith(f,"%")&&(f=f.substr(0,f.length-1));var d=f-0,v=d<this._min?0:d>this._max?1:(d-this._min)/(this._max-this._min);o.drawWithClip(n,function(t){var e=n.getRect(),r=e.width-4-1,o=e.bottom-2-h-1,a=e.left+2;t.fillStyle=i(u,100*v)||"#f0f3f5",t.beginPath(),t.rect(a,o,r,h),t.fill();var l=Math.min(r*v,r);t.fillStyle=i(c,100*v)||"#20a8d8",t.beginPath(),t.rect(a,o,l,h),t.fill()})}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=s},function(t,e,n){var r=n(40),o=n(10),i=n(22),a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._tagName=t.tagName||"i",n._className=t.className,n._content=t.content,n._name=t.name,n._iconWidth=t.iconWidth,n}return _inherits(e,o),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,n,r,o,a,l){var s=t-0;if(isNaN(s))l.getIcon=function(){return null};else{var c={};i.iconPropKeys.forEach(function(t){c[t]=r[t]}),c.className=this._className,c.tagName=this._tagName,c.content=this._content,c.name=this._name,this._iconWidth&&(c.width=this._iconWidth),l.getIcon=function(){return function(t,e){e===1/0&&(e=0);for(var n=[],r=0;r<e;r++)n.push(t);return n}(c,s)}}_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"drawInternal",this).call(this,"",n,r,o,a,l)}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=a},function(t,e,n){(function(e){var r=n(0),o=r.isDef,i=r.getOrApply,a=r.isPromise,l=r.obj.isObject,s=n(90),c=n(11),u=n(1).BRANCH_GRAPH_COLUMN_STATE_ID;var h=function t(e){var n=e.fromIndex,r=e.toIndex,o=e.colorIndex,i=e.point;_classCallCheck(this,t),this.fromIndex=n,this.toIndex=r,this.colorIndex=o,this.point=i},f=function(){function t(e){var n=e.index,r=e.commit,o=void 0!==r&&r,i=e.lines,a=void 0===i?[]:i,l=e.tag;_classCallCheck(this,t),this.index=n,this.commit=o,this.lines=a,this.tag=l}return _createClass(t,null,[{key:"mergeLines",value:function(t){var e=t.filter(function(t){return o(t.fromIndex)&&o(t.toIndex)}),n=t.filter(function(t){return o(t.fromIndex)&&!o(t.toIndex)}),r=t.filter(function(t){return!o(t.fromIndex)&&o(t.toIndex)});return n.forEach(function(t){for(var n=0;n<r.length;n++){var o=r[n];if(!o.point&&t.colorIndex===o.colorIndex){t.toIndex=o.toIndex,r.splice(n,1);break}}e.push(t)}),e.concat(r)}},{key:"merge",value:function(e,n){return e?new t({index:e.index,commit:e.commit||n.commit,lines:t.mergeLines(e.lines.concat(n.lines)),tag:e.tag||n.tag}):n}}]),t}();function d(t,e){for(var n=[].concat(_toConsumableArray(t)).reverse(),r=0;r<n.length;r++){var o=n[r][e];if(o){o.lines=f.mergeLines(o.lines.concat([new h({toIndex:e,colorIndex:e})]));for(var i=0;i<r;i++){n[i][e]=new f({index:e,lines:[new h({fromIndex:e,toIndex:e,colorIndex:e})]})}return!0}}return!1}function v(t,n){var r=t.timeline,o=[];(e(n)?n:[n]).forEach(function(e){if(e){var n=void 0;if("branch"===e.command){var r=l(e.branch)?e.branch.from:null,i=l(e.branch)?e.branch.to:e.branch;n=function(t,e,n){var r=t.timeline,o=t.branches,i=o.indexOf(e),a=o.indexOf(n);if(a<0&&(a=o.length,o.push(n)),i<0)return new f({index:a});var l=function(){for(var t=r.length-1;t>=0;t--){var e=r[t][i];if(e&&e.commit)return t}return-1}();if(-1===l)return null;var s=l+1,c=new f({index:a,lines:[new h({fromIndex:i,colorIndex:a})]}),u=void 0,d=void 0;if(s<r.length){var v=r[s];u=v[a]=f.merge(v[a],c)}else u=c,d=c;var g=r[l][i];return g.lines=f.mergeLines(g.lines.concat([new h({toIndex:a,colorIndex:a,point:u})])),d}(t,r,i)}else if("commit"===e.command){var a=e.branch;n=function(t,e){var n=t.timeline,r=t.branches.indexOf(e);if(r<0)return null;var o=new f({index:r,commit:!0});return d(n,r)&&(o.lines=f.mergeLines(o.lines.concat([new h({fromIndex:r,colorIndex:r})]))),o}(t,a)}else if("merge"===e.command){var s=e.branch,c=s.from,u=s.to;n=function(t,e,n){var r=t.timeline,o=t.branches,i=o.indexOf(e),a=o.indexOf(n);if(a<0||i<0)return new f({index:a,commit:!0});var l=new f({index:a,commit:!0,lines:[new h({fromIndex:i,colorIndex:i}),new h({fromIndex:a,colorIndex:a})]}),s=[].concat(_toConsumableArray(r)),c=s.pop();return c&&(c[i]=f.merge(c[i],new f({index:a,lines:[new h({toIndex:a,colorIndex:i})]}))),d(s,i),d(r,a),l}(t,c,u)}else if("tag"===e.command){var v=e.branch,g=e.tag;n=function(t,e,n){t.timeline;var r=t.branches,o=r.indexOf(e);return o<0&&(o=r.length,r.push(e)),new f({index:o,tag:n})}(t,v,g)}n&&n.index>-1&&(o[n.index]=f.merge(o[n.index],n))}}),r.push(o)}function g(t,e,n){var r={branches:[],timeline:[]};return function(t,e,n){var r=t.dataSource,o=t.getField(e);l(o)&&o.get&&o.set&&(o=o.get);for(var i=[],s=void 0,c=function(t){var e=r.getField(t,o);if(a(e)){var n=i.length;i.push(e),s=s?s.then(function(){return e}).then(function(t){i[n]=t}):e.then(function(t){i[n]=t})}else i.push(e)},u=0;u<r.length;u++)c(u);s?s.then(function(){return n(i)}):n(i)}(e,n,function(e){"top"!==t&&(e=[].concat(_toConsumableArray(e)).reverse()),e.forEach(function(t){v(r,t)})}),r}var p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._start=t.start||"bottom",n._cache=!!o(t.cache)&&t.cache,n}return _inherits(e,c),_createClass(e,[{key:"clearCache",value:function(t){delete t[u]}},{key:"onDrawCell",value:function(t,n,r,o){if(this._cache){var i=o[u]||(o[u]={}),a=r.col;i[a]||(i[a]=g(this._start,o,a))}return _get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onDrawCell",this).call(this,t,n,r,o)}},{key:"clone",value:function(){return new e(this)}},{key:"drawInternal",value:function(t,e,n,r,a,l){var s=l.drawCellBase,c=e.col,h=e.row,f=this._cache&&a[u]?a[u][c]:g(this._start,a,c),d=f.timeline,v=f.branches,p="top"!==this._start?{upLineIndexKey:"toIndex",downLineIndexKey:"fromIndex"}:{upLineIndexKey:"fromIndex",downLineIndexKey:"toIndex"},_=p.upLineIndexKey,y=p.downLineIndexKey,C="top"!==this._start?d[d.length-(h-a.frozenRowCount)-1]:d[h-a.frozenRowCount],m=n.branchColors,w=n.branchLineWidth,b=n.circleSize,x=n.mergeStyle,k=n.margin,E=n.bgColor;E&&s({bgColor:E});var L=e.getRect(),I=b/2,R=L.width-2*k;r.drawWithClip(e,function(t){t.textAlign="left",t.textBaseline="middle";var e=function(t,e,n,r,o,i){var a=Math.max(n/o.length+1,5);i.forEach(function(e){e.forEach(function(e,o){if(!(o<=0)&&e.tag){var i=t.measureText(e.tag).width;a*o+2*r+4+i>n&&(a=Math.max((n-2*r-4-i)/o,5))}})});var l=[],s=e;return o.forEach(function(){l.push(Math.ceil(s+r)),s+=a}),l}(t,L.left+k,R,I,v,d),n=L.top+L.height/2;C.map(function(t,e){return t?t.lines.map(function(t){return{colorIndex:t.colorIndex,upLineIndex:t[_],downLineIndex:t[y],pointIndex:e}}):[]}).reduce(function(t,e){return t.concat(e)},[]).sort(function(t,e){return e.colorIndex-t.colorIndex}).forEach(function(r){var l=e[r.pointIndex];!function(t,e,n,r,a,l,s,c,u){var h=c.branchXPoints,f=(c.margin,c.branchColors),d=c.branchLineWidth,v=c.mergeStyle,g=(u.width,u.col),p=u.row,_=u.branches;if(o(a)||o(l)){if(e.strokeStyle=i(f,_[s],s),e.lineWidth=d,e.lineCap="round",e.beginPath(),o(a)){var y=h[a],C=t.getCellRelativeRect(g,p-1),m=C.top+C.height/2;e.moveTo(y,m),"bezier"===v?e.bezierCurveTo(y,(r+m)/2,n,(r+m)/2,n,r):e.lineTo(n,r)}else e.moveTo(n,r);if(o(l)){var w=h[l],b=t.getCellRelativeRect(g,p+1),x=b.top+b.height/2;"bezier"===v?e.bezierCurveTo(n,(r+x)/2,w,(r+x)/2,w,x):e.lineTo(w,x)}e.stroke()}}(a,t,l,n,r.upLineIndex,r.downLineIndex,r.colorIndex,{margin:k,branchXPoints:e,branchLineWidth:w,branchColors:m,mergeStyle:x},{width:R,col:c,row:h,branches:v})}),C.forEach(function(r,o){if(r&&r.commit){var a=e[o];t.fillStyle=i(m,v[o],o),t.beginPath(),t.arc(a,n,I,0,2*Math.PI,!0),t.fill(),t.closePath()}}),C.forEach(function(r,o){r&&r.tag&&(t.fillStyle=i(m,v[o],o),t.fillText(r.tag,e[o]+I+4,n))})})}},{key:"StyleClass",get:function(){return s}}]),e}();t.exports=p}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(20),o=void 0;var i=function(t,e){switch(e%3){case 0:return"#979797";case 1:return"#008fb5";case 2:return"#f1c109"}return"#979797"},a=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,function(t){var e=t.textAlign,n=void 0===e?"center":e;return t.textAlign=n,t}(t)));return n._branchColors=t.branchColors||i,n._margin=t.margin||4,n._circleSize=t.circleSize||16,n._branchLineWidth=t.branchLineWidth||4,n._mergeStyle="straight"===t.mergeStyle?"straight":"bezier",n}return _inherits(e,r),_createClass(e,null,[{key:"DEFAULT",get:function(){return o||(o=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"branchColors",get:function(){return this._branchColors},set:function(t){this._branchColors=t,this.doChangeStyle()}},{key:"margin",get:function(){return this._margin},set:function(t){this._margin=t,this.doChangeStyle()}},{key:"circleSize",get:function(){return this._circleSize},set:function(t){this._circleSize=t,this.doChangeStyle()}},{key:"branchLineWidth",get:function(){return this._branchLineWidth},set:function(t){this._branchLineWidth=t,this.doChangeStyle()}},{key:"mergeStyle",get:function(){return this._mergeStyle},set:function(t){this._mergeStyle=t,this.doChangeStyle()}}]),e}();t.exports=a},function(t,e,n){var r=n(34).normalize,o=n(0).isDef,i=n(11),a=n(3),l=n(21),s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._options=r(t.options),n}return _inherits(e,i),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"withOptions",value:function(t){var e=this.clone();return e._options=r(t),e}},{key:"drawInternal",value:function(t,e,n,r,i,a){var s=a.drawCellBase,c=a.getIcon,u=n.textAlign,h=n.textBaseline,f=n.font,d=n.bgColor,v=n.padding,g=n.color;d&&s({bgColor:d});var p=this._convertInternal(t);r.testFontLoad(f,p,e),l.loadIcons(c(),e,r,function(e,n){var i=r.toBoxPixelArray(v||0,n),a=i.slice(0);a[1]+=26;var l=i.slice(0);l[1]+=8,o(g)||o(t)&&""!==t||(g="rgba(0, 0, 0, .38)"),r.text(p,n,{textAlign:u,textBaseline:h,color:g,font:f,icons:e,padding:a}),r.text("",n,{textAlign:"right",textBaseline:h,color:g,font:f,icons:[{path:"M0 2 5 7 10 2z",width:10,color:"rgba(0, 0, 0, .54)"}],padding:l})})}},{key:"convertInternal",value:function(t){return t}},{key:"_convertInternal",value:function(t){for(var n=this._options,r=0;r<n.length;r++){var o=n[r];if(o.value===t){t=o.caption;break}}return _get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"convertInternal",this).call(this,t)}},{key:"StyleClass",get:function(){return a}},{key:"options",get:function(){return this._options}}]),e}();t.exports=s},function(t,e,n){var r=function(t,e,n,r){return o.apply(void 0,[t].concat(_toConsumableArray(n)))||r&&o.apply(void 0,[t].concat(_toConsumableArray(r)))||o.apply(void 0,[e].concat(_toConsumableArray(n)))},o=n(0).getChainSafe,i=n(43);t.exports={create:function(t){return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return{get font(){return r(e,n,["font"])},get underlayBackgroundColor(){return r(e,n,["underlayBackgroundColor"])},get color(){return r(e,n,["color"])},get frozenRowsColor(){return r(e,n,["frozenRowsColor"],["color"])},get defaultBgColor(){return r(e,n,["defaultBgColor"])},get frozenRowsBgColor(){return r(e,n,["frozenRowsBgColor"],["defaultBgColor"])},get selectionBgColor(){return r(e,n,["selectionBgColor"],["defaultBgColor"])},get borderColor(){return r(e,n,["borderColor"])},get frozenRowsBorderColor(){return r(e,n,["frozenRowsBorderColor"],["borderColor"])},get hiliteBorderColor(){return r(e,n,["hiliteBorderColor"],["borderColor"])},get checkbox(){return this._checkbox||(this._checkbox={get uncheckBgColor(){return r(e,n,["checkbox","uncheckBgColor"],["defaultBgColor"])},get checkBgColor(){return r(e,n,["checkbox","checkBgColor"],["defaultBgColor"])},get borderColor(){return r(e,n,["checkbox","borderColor"],["borderColor"])}})},get button(){return this._button||(this._button={get color(){return r(e,n,["button","color"],["color"])},get bgColor(){return r(e,n,["button","bgColor"],["defaultBgColor"])}})},extends:function(e){return t(e,this)}}}(t)}}},function(t,e,n){var r={};t.exports={color:"#000",defaultBgColor:function(t){return t.row-t.grid.frozenRowCount&1?"#F6F6F6":"#FFF"},frozenRowsBgColor:function(t){var e=t.col,n=t.grid,o=t.grid.frozenRowCount,i=t.context,a=n.getCellRelativeRect(e,0),l=a.left;return function(t,e,n,o,i,a){var l=void 0,s=[];for(l in a)s.push(l+"@"+a[l]);var c=e+"/"+n+"/"+o+"/"+i+"/"+s.join(","),u=r[c];if(u)return u;var h=t.createLinearGradient(e,n,e,i);for(l in a)h.addColorStop(l,a[l]);return r[c]=h}(i,l,a.top,l,n.getCellRelativeRect(e,o-1).bottom,{0:"#FFF",1:"#D3D3D3"})},hiliteBorderColor:"#5E9ED6",selectionBgColor:"#CCE0FF",borderColor:"#000",checkbox:{uncheckBgColor:"#FFF",checkBgColor:"rgb(76, 73, 72)"},button:{color:"#FFF",bgColor:"#2196F3"},underlayBackgroundColor:"#F6F6F6"}},function(t,e,n){var r=n(0).getChainSafe,o=n(46),i=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._rCache={},n._fCache={},n}return _inherits(e,o),_createClass(e,null,[{key:"ofArray",value:function(t){return new e({get:function(e){return t[e]},length:t.length})}},{key:"EVENT_TYPE",get:function(){return o.EVENT_TYPE}}]),_createClass(e,[{key:"getOriginal",value:function(t){return this._rCache&&this._rCache[t]?this._rCache[t]:_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getOriginal",this).call(this,t)}},{key:"getOriginalField",value:function(t,n){var o=r(this._fCache,t,n);return o||_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getOriginalField",this).call(this,t,n)}},{key:"setOriginalField",value:function(t,n,r){var o=this._fCache;return o&&o[t]&&delete o[t],_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOriginalField",this).call(this,t,n,r)}},{key:"clearCache",value:function(){this._rCache&&(this._rCache={}),this._fCache&&(this._fCache={})}},{key:"fieldPromiseCallBackInternal",value:function(t,e,n){!function(t,e,n,r){var o=t._fCache;(o[e]||(o[e]={}))[n]=r}(this,t,e,n)}},{key:"recordPromiseCallBackInternal",value:function(t,e){this._rCache[t]=e}},{key:"dispose",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}}]),e}();t.exports=i},function(t,e,n){(function(e){var r=function(t,e,n){return t[P].headerMap.getHeaderCellRange(e,n)},o=function(t,e,n){if(n<t[P].headerMap.rowCount)return t[P].headerMap.getCell(e,n).caption;var r=t[P].headerMap.columns[e].field;return w(r)&&r.get&&r.set&&(r=r.get),l(t,r,n)},i=function(t,e,n){if(n<t[P].headerMap.rowCount)return null;var r=t[P].headerMap.columns[e].message;return r?l(t,r,n):null},a=function(t,n,r){return function t(n,r,o){if(!y(r))return null;if(e(r))return r.map(function(e){return t(n,e,o)});if(!w(r))return l(n,r,o);var i={};return T.iconPropKeys.forEach(function(t){if(r[t]){var e=l(n,r[t],o);y(e)?i[t]=e:s(n,r[t],o)||(i[t]=r[t])}}),i}(t,t[P].headerMap.columns[n].icon,r)},l=function(t,e,n){if(!y(e))return null;if(n<t[P].headerMap.rowCount)return null;var r=g(t,n);return t[P].dataSource.getField(r,e)},s=function(t,e,n){if(!y(e))return!1;if(n<t[P].headerMap.rowCount)return!1;var r=g(t,n);return t[P].dataSource.hasField(r,e)},c=function(t,e,n){var r=n.col,o=n.row,i=t.selection.select;if(i.row>=t[P].headerMap.rowCount)e.borderWithState(n);else{var a=t[P].headerMap.getCell(r,o).id,l=n.getRect(),s={},c=t[P].headerMap.getCell(i.col,i.row).id;if(c===a)s.borderColor=e.theme.hiliteBorderColor,s.lineWidth=2,e.border(n,s);else{s.lineWidth=1;var u=t.isFrozenCell(r,o);u&&u.row&&(s.borderColor=e.theme.frozenRowsBorderColor),e.border(n,s),r>0&&t[P].headerMap.getCell(r-1,o).id===c?e.drawBorderWithClip(n,function(t){var n=e.toBoxArray(e.getColor(e.theme.hiliteBorderColor,i.col,i.row,t));n[1]&&(t.lineWidth=1,t.strokeStyle=n[1],t.beginPath(),t.moveTo(l.left-.5,l.top),t.lineTo(l.left-.5,l.bottom),t.stroke())}):o>0&&t[P].headerMap.getCell(r,o-1).id===c&&e.drawBorderWithClip(n,function(t){var n=e.toBoxArray(e.getColor(e.theme.hiliteBorderColor,i.col,i.row,t));n[0]&&(t.lineWidth=1,t.strokeStyle=n[0],t.beginPath(),t.moveTo(l.left,l.top-.5),t.lineTo(l.right,l.top-.5),t.stroke())})}}},u=function(t){t[P].headerEvents&&t[P].headerEvents.forEach(function(e){return t.unlisten(e)}),t[P].headerMap=new F(t[P].header),t[P].headerEvents=[],t[P].headerMap.headerObjects.forEach(function(e){var n,r=e.headerType.bindGridEvent(t);if((n=t[P].headerEvents).push.apply(n,_toConsumableArray(r)),e.style&&e.style instanceof L){var o=e.style.listen(L.EVENT_TYPE.CHANGE_STYLE,function(){t.invalidate()});t[P].headerEvents.push(o)}}),t[P].headerMap.columns.forEach(function(e,n){if(e.action){var r,o=e.action.bindGridEvent(t,n,{isTarget:function(e,r){return n===e&&t.frozenRowCount<=r}});(r=t[P].headerEvents).push.apply(r,_toConsumableArray(o))}if(e.columnType){var i,a=e.columnType.bindGridEvent(t,n,{isTarget:function(e,r){return n===e&&t.frozenRowCount<=r}});(i=t[P].headerEvents).push.apply(i,_toConsumableArray(a))}if(e.style&&e.style instanceof k){var l=e.style.listen(x.style.EVENT_TYPE.CHANGE_STYLE,function(){t.invalidate()});t[P].headerEvents.push(l)}}),t.colCount=t[P].headerMap.columns.length,h(t),t.frozenRowCount=t[P].headerMap.rowCount;for(var n=0;n<t[P].headerMap.columns.length;n++){var r=t[P].headerMap.columns[n],o=r.width,i=r.minWidth,a=r.maxWidth;o&&(o>0||"string"==typeof o)&&t.setColWidth(n,o),i&&(i>0||"string"==typeof i)&&t.setMinColWidth(n,i),a&&(a>0||"string"==typeof a)&&t.setMaxColWidth(n,a)}for(var l=e(t[P].headerRowHeight),s=0;s<t[P].headerMap.rowCount;s++){var c=l?t[P].headerRowHeight[s]:t[P].headerRowHeight;c&&c>0&&t.setRowHeight(s,c)}},h=function(t){t.rowCount=t[P].dataSource.length+t[P].headerMap.rowCount},f=function(t,e){t[P].dataSourceEventIds&&t[P].dataSourceEventIds.forEach(function(e){return t[P].handler.off(e)}),e(t),t[P].dataSourceEventIds=[t[P].handler.on(t[P].dataSource,S.EVENT_TYPE.UPDATED_LENGTH,function(){h(t),t.invalidate()}),t[P].handler.on(t[P].dataSource,S.EVENT_TYPE.UPDATED_ORDER,function(){t.invalidate()})]},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];f(t,function(){t[P].records=e,t[P].dataSource=O.ofArray(t[P].records)})},v=function(t,e){f(t,function(){t[P].dataSource=e?e instanceof S?e:new O(e):S.EMPTY,t[P].records=null})},g=function(t,e){return e<t[P].headerMap.rowCount?void 0:e-t[P].headerMap.rowCount},p=function(t){return t&&(delete t.frozenRowCount,delete t.colCount,delete t.rowCount),t},_=n(0),y=_.isDef,C=_.isPromise,m=_.then,w=_.obj.isObject,b=n(48),x=n(29),k=x.style.BaseStyle,E=n(113),L=n(16).BaseStyle,I=n(4),R=n(45),S=R.DataSource,O=R.CachedDataSource,A=n(23),T=n(22),M=n(117),B=n(56),P=n(1).PROTECTED_SYMBOL,D=0,F=function(){function t(e){_classCallCheck(this,t),this._columns=[],this._headerCells=[],this._headerObjects=[],this._addHeaders(0,e,[]),this._setupHeaderType()}return _createClass(t,[{key:"getCell",value:function(t,e){return this._headerCells[e][t]}},{key:"getHeaderCellRangeById",value:function(t){for(var e=0;e<this.rowCount;e++)for(var n=0;n<this.columns.length;n++)if(t===this.getCell(n,e).id)return this.getHeaderCellRange(n,e)}},{key:"getHeaderCellRange",value:function(t,e){for(var n={startCol:t,startRow:e,endCol:t,endRow:e,isCellInRange:function(t,e){return this.startCol<=t&&t<=this.endCol&&this.startRow<=e&&e<=this.endRow}},r=this.getCell(t,e).id,o=t-1;o>=0&&r===this.getCell(o,e).id;o--)n.startCol=o;for(var i=t+1;i<this.columns.length&&r===this.getCell(i,e).id;i++)n.endCol=i;for(var a=e-1;a>=0&&r===this.getCell(t,a).id;a--)n.startRow=a;for(var l=e+1;l<this.rowCount&&r===this.getCell(t,l).id;l++)n.endRow=l;return n}},{key:"_addHeaders",value:function(t,e,n){var r=this,o=this._headerCells[t]||this._newRow(t);e.forEach(function(e){var i=r._columns.length,a={id:D++,caption:e.caption,style:e.headerStyle,sort:e.sort};r._headerObjects.push(a),o[i]=a;for(var l=t-1;l>=0;l--)r._headerCells[l][i]=n[l];if(e.columns)r._addHeaders(t+1,e.columns,[].concat(_toConsumableArray(n),[a]));else{r._columns.push({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth,field:e.field,icon:e.icon,message:e.message,columnType:x.type.of(e.columnType),action:x.action.of(e.action),style:e.style,define:e});for(var s=t+1;s<r._headerCells.length;s++)r._headerCells[s][i]=a}})}},{key:"_setupHeaderType",value:function(){var t=this;this._headerObjects.forEach(function(e){e.range=t.getHeaderCellRangeById(e.id),e.headerType=E.create(e)})}},{key:"_newRow",value:function(t){var e=this._headerCells[t]=[];if(!this._columns.length)return e;for(var n=this._headerCells[t-1],r=0;r<n.length;r++)e[r]=n[r];return e}},{key:"columns",get:function(){return this._columns}},{key:"rowCount",get:function(){return this._headerCells.length}},{key:"headerObjects",get:function(){return this._headerObjects}}]),t}(),z=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,p(t)));return n[P].header=t.header||[],n[P].headerRowHeight=t.headerRowHeight||[],t.dataSource?v(n,t.dataSource):d(n,t.records),u(n),n[P].sortState={col:-1,order:void 0},n[P].gridCanvasHelper=new b(n),n[P].theme=A.of(t.theme),n[P].messageHandler=new M(n,function(t,e){return i(n,t,e)}),n.invalidate(),n[P].handler.on(window,"resize",function(){n.updateSize(),n.updateScroll(),n.invalidate()}),n}return _inherits(e,I),_createClass(e,null,[{key:"EVENT_TYPE",get:function(){return B}}]),_createClass(e,[{key:"dispose",value:function(){this[P].messageHandler.dispose(),_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"getField",value:function(t){return this[P].headerMap.columns[t].field}},{key:"getRowRecord",value:function(t){return t<this[P].headerMap.rowCount?void 0:this[P].dataSource.get(g(this,t))}},{key:"getGridCanvasHelper",value:function(){return this[P].gridCanvasHelper}},{key:"getCopyCellValue",value:function(t,e){if(e<this[P].headerMap.rowCount){var n=r(this,t,e),i=n.startCol,a=n.startRow;if(i!==t||a!==e)return""}return o(this,t,e)}},{key:"onDrawCell",value:function(t,e,n){var l=this[P].headerMap.columns[t],s=void 0,u=void 0;if(e<this[P].headerMap.rowCount){var h=this[P].headerMap.getCell(t,e);s=h.headerType.onDrawCell,u=h.style,function(t,e,n,o){for(var i=o.getRect(),a=r(t,e,n),l=a.startCol,s=a.endCol,c=a.startRow,u=a.endRow,h=e-1;h>=l;h--)i.left-=t.getColWidth(h);for(var f=e+1;f<=s;f++)i.right+=t.getColWidth(f);for(var d=n-1;d>=c;d--)i.top-=t.getRowHeight(d);for(var v=n+1;v<=u;v++)i.bottom+=t.getRowHeight(v);o.setRect(i)}(this,t,e,n)}else s=l.columnType.onDrawCell,u=l.style;return function(t,e,n,r,o,l){var s=r.col,u=r.row,h=t[P].gridCanvasHelper,f=function(){var t={fillColor:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor};h.fillCellWithState(n,t)},d=function(){if(n.col===t.frozenColCount-1){var e=n.getRect();h.drawWithClip(n,function(r){var o=n.row>=t.frozenRowCount?h.theme.borderColor:h.theme.frozenRowsBorderColor,i=h.toBoxArray(h.getColor(o,n.col,n.row,r));i[1]&&(r.lineWidth=1,r.strokeStyle=i[1],r.beginPath(),r.moveTo(e.right-2.5,e.top),r.lineTo(e.right-2.5,e.bottom),r.stroke())})}n.row<t[P].headerMap.rowCount?c(t,h,n):h.borderWithState(n)};return l(e,{getRecord:function(){return t.getRowRecord(u)},getIcon:function(){return a(t,s,u)},getMessage:function(){return i(t,s,u)},messageHandler:t[P].messageHandler,style:o,drawCellBase:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bgColor;f({bgColor:t}),d()},drawCellBg:f,drawCellBorder:d},n,t)}(this,o(this,t,e),n,{col:t,row:e},u,s)}},{key:"doGetCellValue",value:function(t,e,n){if(e<this[P].headerMap.rowCount)return!1;var r=o(this,t,e);return!C(r)&&(n(r),!0)}},{key:"doChangeValue",value:function(t,e,n){var r=this;if(e<this[P].headerMap.rowCount)return!1;var i=o(this,t,e);if(C(i))return!1;var a=n(i);return void 0!==a&&m(function(t,e,n,r){if(n<t[P].headerMap.rowCount)return!1;var o=t[P].headerMap.columns[e].field;w(o)&&o.get&&o.set&&(o=o.set);var i=g(t,n),a=t[P].dataSource.setField(i,o,r);return!C(a)||a}(this,t,e,a),function(n){if(n){var o=r[P].headerMap.columns[t].field,i=r;r.fireListeners(B.CHANGED_VALUE,{col:t,row:e,get record(){return i.getRowRecord(e)},field:o,value:a})}return n})}},{key:"bindEventsInternal",value:function(){var t=this;this.listen(B.SELECTED_CELL,function(e){if(e.row<t[P].headerMap.rowCount){var n=r(t,e.col,e.row),o=n.startCol,i=n.endCol,a=n.startRow,l=n.endRow;o===i&&a===l||t.invalidateGridRect(o,a,i,l)}})}},{key:"getMoveLeftColByKeyDownInternal",value:function(t){var n=t.col,o=t.row;o<this[P].headerMap.rowCount&&(n=r(this,n,o).startCol);return _get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMoveLeftColByKeyDownInternal",this).call(this,{col:n,row:o})}},{key:"getMoveRightColByKeyDownInternal",value:function(t){var n=t.col,o=t.row;o<this[P].headerMap.rowCount&&(n=r(this,n,o).endCol);return _get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMoveRightColByKeyDownInternal",this).call(this,{col:n,row:o})}},{key:"getMoveUpRowByKeyDownInternal",value:function(t){var n=t.col,o=t.row;o<this[P].headerMap.rowCount&&(o=r(this,n,o).startRow);return _get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMoveUpRowByKeyDownInternal",this).call(this,{col:n,row:o})}},{key:"getMoveDownRowByKeyDownInternal",value:function(t){var n=t.col,o=t.row;o<this[P].headerMap.rowCount&&(o=r(this,n,o).endRow);return _get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMoveDownRowByKeyDownInternal",this).call(this,{col:n,row:o})}},{key:"getOffsetInvalidateCells",value:function(){return 1}},{key:"getColumnIndexByField",value:function(t){for(var e in this[P].headerMap.columns)if(this[P].headerMap.columns[e].field===t)return e-0;return null}},{key:"focusGridCell",value:function(t,e){var n=this.selection.range,r=n.start,o=r.col,i=r.row,a=n.end,l=a.col,s=a.row,c=this.getColumnIndexByField(t),u=e+this[P].headerMap.rowCount;this.focusCell(c,u),this.selection.select={col:c,row:u},this.invalidateGridRect(o,i,l,s),this.invalidateCell(c,u)}},{key:"makeVisibleGridCell",value:function(t,e){this.makeVisibleCell(this.getColumnIndexByField(t),e+this[P].headerMap.rowCount)}},{key:"header",get:function(){return this[P].header},set:function(t){this[P].header=t,u(this)}},{key:"records",get:function(){return this[P].records},set:function(t){d(this,t),h(this),this.invalidate()}},{key:"dataSource",get:function(){return this[P].dataSource},set:function(t){v(this,t),h(this),this.invalidate()}},{key:"theme",get:function(){return this[P].theme},set:function(t){this[P].theme=A.of(t),this.invalidate()}},{key:"font",get:function(){return _get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"font",this)||this[P].gridCanvasHelper.theme.font},set:function(t){_set(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"font",t,this)}},{key:"underlayBackgroundColor",get:function(){return _get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"underlayBackgroundColor",this)||this[P].gridCanvasHelper.theme.underlayBackgroundColor},set:function(t){_set(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"underlayBackgroundColor",t,this)}},{key:"sortState",get:function(){return this[P].sortState},set:function(t){this[P].sortState=t}}]),e}();t.exports=z}).call(this,n(2).Array_isArray)},function(t,e,n){(function(e){var r=n(12),o=n(97),i=n(50),a=n(100),l=n(101),s=n(102),c=n(0).isDef,u=n(9).calcStartPosition,h=n(51),f=n(24);t.exports={iconOf:function(t){if(t instanceof r)return t;if(!t)return null;if(t.font&&t.content)return new o(t);if(t.src)return new i({src:t.src,width:t.width,height:t.width});if(t.svg)return new a({svg:t.svg,width:t.width,height:t.width});if(t.path)return new s({path:t.path,width:t.width,height:t.width,color:t.color});var e=h.get();if(t.name&&e[t.name]){var n=e[t.name],c=t.width||Math.max(n.width,n.height);return new l({draw:function(t){var e=t.ctx,r=(t.canvashelper,t.rect),o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom;!function(t,e,n,r,o,i,a,l){var s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},c=s.offset,h=void 0===c?2:c,d=s.padding,v={left:o,top:i,width:a,height:l,right:o+a,bottom:i+l};t.save();try{t.beginPath(),t.rect(v.left,v.top,v.width,v.height),t.clip();var g=u(t,v,n,r,{offset:h,padding:d});f.fill(e,t,g.x,g.y,n,r)}finally{t.restore()}}(e,n,c,c,r.left,r.top,r.width,r.height,{offset:o+1,padding:{left:i,right:a,top:l,bottom:s}})},width:c,height:c,color:t.color})}return new o(t)},of:function(t){return c(t)?t instanceof r?t:new r(t):null},buildInlines:function(t,n){var o=this,i=[];if(t&&i.push.apply(i,_toConsumableArray(t.map(function(t){return o.iconOf(t)}).filter(function(t){return!!t}))),e(n)&&n.filter(function(t){return t instanceof r}).length)i.push.apply(i,_toConsumableArray(n.map(function(t){return o.of(t)}).filter(function(t){return!!t})));else{var a=this.of(n);a&&i.push(a)}return i}}}).call(this,n(2).Array_isArray)},function(t,e,n){var r=n(12),o=n(49),i=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._icon=t||{},n}return _inherits(e,r),_createClass(e,[{key:"width",value:function(t){var e=t.ctx,n=this._icon;if(n.width)return n.width;if(n.font&&o.check(n.font,n.content)){e.save();try{return e.font=n.font||e.font,e.measureText(n.content).width}finally{e.restore()}}return null}},{key:"font",value:function(){return this._icon.font}},{key:"color",value:function(){return this._icon.color}},{key:"canDraw",value:function(){var t=this._icon;return!t.font||o.check(t.font,t.content)}},{key:"onReady",value:function(t){var e=this._icon;e.font&&!o.check(e.font,e.content)&&o.load(e.font,e.content,t)}},{key:"draw",value:function(t){var e=t.ctx,n=t.canvashelper,r=t.rect,o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom,c=this._icon;c.content&&n.fillTextRect(e,c.content,r.left,r.top,r.width,r.height,{offset:o+1,padding:{left:i,right:a,top:l,bottom:s}})}}]),e}();t.exports=i},function(t,e,n){var r=n(99),o={SERIF:"serif",SANS_SERIF:"sans-serif"},i={},a=function(){function t(e,n){_classCallCheck(this,t),this.activeCallbacks=[],this.inactiveCallbacks=[],this.status=null,this.lastResortWidths_={},this.fontRulerA_=new r(e+","+o.SERIF,n),this.fontRulerB_=new r(e+","+o.SANS_SERIF,n);var i=new r("4px "+o.SERIF,n),a=new r("4px "+o.SANS_SERIF,n);this.lastResortWidths_[o.SERIF]=i.getWidth(),this.lastResortWidths_[o.SANS_SERIF]=a.getWidth(),i.remove(),a.remove(),this.started_=Date.now(),this.check_()}return _createClass(t,null,[{key:"load",value:function(e,n,r,o){var a=i[e]||(i[e]={});(a[n+=""]?a[n]:a[n]=new t(e,n)).then(r,o)}}]),_createClass(t,[{key:"then",value:function(t,e){this.status?"ng"!==this.status?t():e():(this.activeCallbacks.push(t),this.inactiveCallbacks.push(e))}},{key:"check_",value:function(){var t=this,e=this.fontRulerA_.getWidth(),n=this.fontRulerB_.getWidth();this.isFallbackFont_(e,n)||this.isLastResortFont_(e,n)?Date.now()-this.started_>=3e3?this.isLastResortFont_(e,n)?(this.finish_(this.activeCallbacks),this.status="ok"):(this.finish_(this.inactiveCallbacks),this.status="ng"):setTimeout(function(){t.check_()},50):(this.finish_(this.activeCallbacks),this.status="ok")}},{key:"isFallbackFont_",value:function(t,e){return this.widthMatches_(t,o.SERIF)&&this.widthMatches_(e,o.SANS_SERIF)}},{key:"widthsMatchLastResortWidths_",value:function(t,e){for(var n in o)if(o.hasOwnProperty(n)&&this.widthMatches_(t,o[n])&&this.widthMatches_(e,o[n]))return!0;return!1}},{key:"widthMatches_",value:function(t,e){return t===this.lastResortWidths_[e]}},{key:"isLastResortFont_",value:function(t,e){return function(){if(null===l){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return l}()&&this.widthsMatchLastResortWidths_(t,e)}},{key:"finish_",value:function(t){var e=this;setTimeout(function(){e.fontRulerA_.remove(),e.fontRulerB_.remove(),t.forEach(function(t){return t()})},0)}}]),t}(),l=null;t.exports=a},function(t,e,n){var r=function(){function t(e,n){_classCallCheck(this,t);var r=document.createElement("span");r.setAttribute("aria-hidden","true"),r.textContent=n||"BESbswy",function(t){return[{display:"block",position:"absolute",top:"-9999px",left:"-9999px",width:"auto",height:"auto",margin:"0",padding:"0","white-space":"nowrap",font:t},{"font-variant":"normal","font-size":"300px","font-style":"normal","font-weight":"400","line-height":"normal"}]}(e).forEach(function(t){for(var e in t)r.style[e]=t[e]}),document.body.appendChild(r),this.el_=r}return _createClass(t,[{key:"getWidth",value:function(){return this.el_.offsetWidth}},{key:"remove",value:function(){document.body.removeChild(this.el_)}}]),t}();t.exports=r},function(t,e,n){var r=n(50),o=n(0).then;function i(t){var e="string"==typeof t?t:(new XMLSerializer).serializeToString(t);return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e)}function a(t){return"string"==typeof t?(new DOMParser).parseFromString(t,"image/svg+xml"):t}var l=function(t){function e(t){var n=t.svg,r=t.width,l=t.height;t.imageLeft,t.imageTop,t.imageWidth,t.imageHeight;_classCallCheck(this,e);var s=o(n,a),c=s.getAttribute?s.getAttribute("width"):null,u=s.getAttribute?s.getAttribute("height"):null;return _possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{src:o(n,i),width:r||c,height:l||u,imageWidth:c,imageHeight:u}))}return _inherits(e,r),e}();t.exports=l},function(t,e,n){var r=n(12),o=function(t){function e(t){var n=t.draw,r=t.width,o=t.height,i=t.color;_classCallCheck(this,e);var a=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a._draw=n,a._width=r,a._height=o,a._color=i,a}return _inherits(e,r),_createClass(e,[{key:"width",value:function(t){t.ctx;return this._width}},{key:"font",value:function(){return null}},{key:"color",value:function(){return this._color}},{key:"canDraw",value:function(){return!0}},{key:"onReady",value:function(t){}},{key:"draw",value:function(t){var e=t.ctx,n=t.canvashelper,r=t.rect,o=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom;this._draw({ctx:e,canvashelper:n,rect:r,offset:o,offsetLeft:i,offsetRight:a,offsetTop:l,offsetBottom:s})}}]),e}();t.exports=o},function(t,e,n){var r=n(12),o=n(9).calcStartPosition,i=n(24),a=function(t){function e(t){var n=t.path,r=t.width,o=t.height,a=t.color;_classCallCheck(this,e);var l=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l._path=new i.Path2D(n),l._width=r,l._height=o,l._color=a,l}return _inherits(e,r),_createClass(e,[{key:"width",value:function(t){t.ctx;return this._width}},{key:"font",value:function(){return null}},{key:"color",value:function(){return this._color}},{key:"canDraw",value:function(){return!0}},{key:"onReady",value:function(t){}},{key:"draw",value:function(t){var e=t.ctx,n=(t.canvashelper,t.rect),r=t.offset,i=t.offsetLeft,a=t.offsetRight,l=t.offsetTop,s=t.offsetBottom;r++;var c={left:i,right:a,top:l,bottom:s};e.save();try{e.beginPath(),e.rect(n.left,n.top,n.width,n.height),e.clip();var u=o(e,n,this._width,this._height,{offset:r,padding:c});e.translate(u.x,u.y),e.fill(this._path)}finally{e.restore()}}}]),e}();t.exports=a},function(t,e,n){var r=new(n(104)),o=function t(e){var n=this;if(_classCallCheck(this,t),this._ops=[],["closePath","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","arc","rect"].forEach(function(t){n[t]=function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];n._ops.push({op:t,args:r})}}),void 0!==e)if("string"==typeof e)try{this._ops=r.parse(e)}catch(t){throw t}else{if(!e.hasOwnProperty("_ops"))throw new Error("Error: "+(void 0===e?"undefined":_typeof(e))+" is not a valid argument to Path");this._ops=[].concat(_toConsumableArray(this._ops))}},i=window.CanvasRenderingContext2D,a=i.prototype.fill;i.prototype.fill=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n[0]instanceof o){var i=n[0];this.beginPath(),i._ops.forEach(function(e){t[e.op].apply(t,_toConsumableArray(e.args))}),a.apply(this,Array.prototype.slice.call(n,1))}else a.apply(this,n)},t.exports=o},function(t,e,n){var r=n(105);function o(t,e,n){return"M"===e.toUpperCase()||"L"===e.toUpperCase()||"T"===e.toUpperCase()?(t.command(e,n.next(),n.next()),"M"===e?"L":"m"===e?"l":e):"H"===e.toUpperCase()||"V"===e.toUpperCase()?(t.command(e,n.next()),e):"Z"===e.toUpperCase()?(t.command(e),e):"C"===e.toUpperCase()?(t.command(e,n.next(),n.next(),n.next(),n.next(),n.next(),n.next()),e):"S"===e.toUpperCase()||"Q"===e.toUpperCase()?(t.command(e,n.next(),n.next(),n.next(),n.next()),e):"A"===e.toUpperCase()?(t.command(e,n.next(),n.next(),n.next(),n.next(),n.next(),n.next(),n.next()),e):(console.warn("unsupported:"+e),null)}var i=window.CanvasRenderingContext2D?Object.keys(window.CanvasRenderingContext2D.prototype):["save","restore","beginPath","closePath","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","arc","arcTo","ellipse","rect","translate","rotate","scale"],a=function(){function t(){var e=this;_classCallCheck(this,t),this._commands=new r(this),i.forEach(function(t){e[t]=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];e._ops.push({op:t,args:r})}})}return _createClass(t,[{key:"command",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r=r||[];for(var i=0;i<r.length;i++)r[i]=r[i]-0;(e=this._commands)[t].apply(e,_toConsumableArray(r))}},{key:"parse",value:function(t){var e=this,n=this._ops=[],r=function(t){var e=0;return{next:function(){for(var n="";t.length>e;){var r=t[e];if(e++," ,\n\r\t".indexOf(r)>-1){if(n)return n}else{if("str"==(".+-1234567890".indexOf(r)>-1?"num":"str"))return n?(e--,n):r;if("-+".indexOf(r)>-1&&n)return e--,n;if("."===r&&n.indexOf(".")>-1)return e--,n;n+=r}}return n||null}}}(t);try{!function(){for(var t=void 0,n=void 0;t=r.next();)isNaN(t-0)?n=o(e,t,r):function(){var i=!0;n=o(e,n,{next:function(){return i?(i=!1,t):r.next()}})}()}()}catch(e){throw console.log("Error: "+t),e}return n}}]),t}();t.exports=a},function(t,e,n){function r(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function o(t,e){var n,o,i,a=1;return t[0]*e[1]-t[1]*e[0]<0&&(a=-1),a*Math.acos((n=function(t,e){return function(t,e){return t[0]*e[0]+t[1]*e[1]}(t,e)/(r(t)*r(e))}(t,e),Math.min(Math.max(n,o),i)),-1,1)}function i(t,e,n,r,i,a,l,s,c,u){if(0!==r&&0!==i){a*=Math.PI/180,r=Math.abs(r),i=Math.abs(i);var h,f,d=function(t,e){var n=Math.cos(e),r=Math.sin(e);return[n*t[0]+r*t[1],-1*r*t[0]+n*t[1]]}((f=c,[((h=e)[0]-f[0])/2,(h[1]-f[1])/2]),a),v=function(t,e){return[t[0]*e[0],t[1]*e[1]]}(d,d),g=Math.pow(r,2),p=Math.pow(i,2),_=Math.sqrt(v[0]/g+v[1]/p);_>1&&(r*=_,i*=_,g=Math.pow(r,2),p=Math.pow(i,2));var y=Math.sqrt(Math.abs(g*p-g*v[1]-p*v[0])/(g*v[1]+p*v[0]));l===s&&(y*=-1);var C=function(t,e){return[t*e[0],t*e[1]]}(y,[r*d[1]/i,-i*d[0]/r]),m=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(function(t,e){var n=Math.cos(e),r=Math.sin(e);return[n*t[0]-r*t[1],r*t[0]+n*t[1]]}(C,a),function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e,c)),w=[(d[0]-C[0])/r,(d[1]-C[1])/i],b=[(-1*d[0]-C[0])/r,(-1*d[1]-C[1])/i],x=o([1,0],w),k=x,E=x+o(w,b);t.save(),t.translate(m[0],m[1]),t.rotate(a),t.scale(r,i),t.arc(0,0,1,k,E,1-s),t.restore()}else t.lineTo(c,e)}t.exports=function t(e){var n=this;_classCallCheck(this,t);var r=void 0,o=void 0,a=0,l=0,s=void 0,c="";function u(){return"CcSsQqTt".indexOf(c)<0?{x:a,y:l}:s}this.M=function(t,i){return e.moveTo(t,i),r=t,o=i,a=t,l=i,c="M",n},this.m=function(t,e){return n.M(t+a,e+l)},this.L=function(t,r){return e.lineTo(t,r),a=t,l=r,c="L",n},this.l=function(t,e){return n.L(t+a,e+l)},this.H=function(t){return n.L(t,l)},this.h=function(t){return n.H(t+a)},this.V=function(t){return n.L(a,t)},this.v=function(t){return n.V(t+l)},this.Z=function(){return e.closePath(),a=r,l=o,c="Z",n},this.z=function(){return n.Z()},this.C=function(t,r,o,i,u,h){return e.bezierCurveTo(t,r,o,i,u,h),a=u,l=h,s={x:2*u-o,y:2*h-i},c="C",n},this.c=function(t,e,r,o,i,s){return n.C(t+a,e+l,r+a,o+l,i+a,s+l)},this.S=function(t,e,r,o){var i=u(),a=i.x,l=i.y;return n.C(a,l,t,e,r,o)},this.s=function(t,e,r,o){return n.S(t+a,e+l,r+a,o+l)},this.Q=function(t,r,o,i){return e.quadraticCurveTo(t,r,o,i),a=o,l=i,s={x:2*o-t,y:2*i-r},c="Q",n},this.q=function(t,e,r,o){return n.Q(t+a,e+l,r+a,o+l)},this.T=function(t,e){var r=u(),o=r.x,i=r.y;return n.Q(o,i,t,e)},this.t=function(t,e){return n.T(t+a,e+l)},this.A=function(t,r,o,s,u,h,f){return i(e,a,0,t,r,o,s,u,h),a=h,l=f,c="A",n},this.a=function(t,e,r,o,i,s,c){return n.A(t,e,r,o,i,s+a,c+l)}}},function(t,e){t.exports={d:"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z",width:48,height:48}},function(t,e){t.exports={d:"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z",width:48,height:48}},function(t,e){t.exports={d:"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z",width:48,height:48}},function(t,e){t.exports={d:"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z",width:48,height:48}},function(t,e){t.exports={d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",width:24,height:24}},function(t,e){t.exports={d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",width:24,height:24}},function(t,e){t.exports={d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z",width:24,height:24}},function(t,e,n){var r=n(114),o=n(116),i={create:function(t){return t.sort?new o(t):new r(t)}};t.exports=i},function(t,e,n){var r=n(16).Style,o=n(55),i=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,o),_createClass(e,[{key:"drawInternal",value:function(t,e,n,r,o,i){var a=i.drawCellBase,l=n.textAlign,s=n.textBaseline,c=n.color,u=n.font,h=n.bgColor;h&&a({bgColor:h}),r.text(t,e,{textAlign:l,textBaseline:s,color:c,font:u})}},{key:"bindGridEvent",value:function(t){return[]}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=i},function(t,e,n){var r=n(54),o=void 0,i=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._color=t.color,n}return _inherits(e,r),_createClass(e,null,[{key:"DEFAULT",get:function(){return o||(o=new e)}}]),_createClass(e,[{key:"clone",value:function(){return new e(this)}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.doChangeStyle()}}]),e}();t.exports=i},function(t,e,n){var r=n(16).Style,o=n(55),i=n(0).isDef,a=n(4).EVENT_TYPE,l=a.CLICK_CELL,s=a.MOUSEOVER_CELL,c=a.MOUSEOUT_CELL,u=a.MOUSEMOVE_CELL,h=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._sort=t.sort,n._range=t.range,n}return _inherits(e,o),_createClass(e,[{key:"drawInternal",value:function(t,e,n,r,o,a){var l=a.drawCellBase,s=n.textAlign,c=n.textBaseline,u=void 0===c?"middle":c,h=n.color,f=n.bgColor,d=n.font;f&&l({bgColor:f});var v=o.sortState,g=void 0;this._range.isCellInRange(v.col,this._range.startRow)&&(g=v.order);var p=1.2*e.getContext().measureText("ã‚").width;r.text(t,e,{textAlign:s,textBaseline:u,color:h,font:d,icons:[{name:i(g)?"asc"===g?"arrow_downward":"arrow_upward":null,width:p,color:"rgba(0, 0, 0, 0.38)"}]})}},{key:"_executeSort",value:function(t,e){"function"==typeof this._sort?this._sort(t.order,t.col,e):e.dataSource.sort(e.getField(t.col),t.order)}},{key:"bindGridEvent",value:function(t){var e=this;return[t.listen(l,function(n){if(e._range.isCellInRange(n.col,n.row)){var r=t.sortState,o=void 0;o=e._range.isCellInRange(r.col,n.row)?{col:e._range.startCol,order:"asc"===r.order?"desc":"asc"}:{col:e._range.startCol,order:"asc"},t.sortState=o,e._executeSort(o,t),t.invalidateGridRect(0,0,t.colCount-1,t.rowCount-1)}}),t.listen(s,function(n){e._range.isCellInRange(n.col,n.row)&&(t.getElement().style.cursor="pointer")}),t.listen(u,function(n){e._range.isCellInRange(n.col,n.row)&&(t.getElement().style.cursor||(t.getElement().style.cursor="pointer"))}),t.listen(c,function(n){e._range.isCellInRange(n.col,n.row)&&(t.getElement().style.cursor="")})]}},{key:"StyleClass",get:function(){return r}}]),e}();t.exports=h},function(t,e,n){var r=n(0).isPromise,o=n(56),i=o.SELECTED_CELL,a=o.SCROLL,l=o.CHANGED_VALUE,s=n(118),c=n(124),u=n(128),h=function(){function t(e,n){_classCallCheck(this,t),this._grid=e,this._messageInstances={},this._bindGridEvent(e,n)}return _createClass(t,[{key:"dispose",value:function(){var t=this._messageInstances;for(var e in t)t[e].dispose();this._messageInstances=null}},{key:"drawCellMessage",value:function(t,e,n,o,i){t&&!r(t)&&this._getMessageInstanceOfMessage(t).drawCellMessage(t,e,n,o,i)}},{key:"_attach",value:function(t,e,n){var r=this._attachInfo,o=this._getMessageInstanceOfMessage(n);r&&r.instance!==o&&r.instance.detachMessageElement(),o.attachMessageElement(t,e,this._toMessageText(n)),this._attachInfo={col:t,row:e,instance:o}}},{key:"_move",value:function(t,e){var n=this._attachInfo;n&&n.col===t&&n.row===e&&n.instance.moveMessageElement(t,e)}},{key:"_detach",value:function(){var t=this._attachInfo;t&&(t.instance.detachMessageElement(),this._attachInfo=null)}},{key:"_bindGridEvent",value:function(t,e){var n=this,o=function(t){var o=e(t.col,t.row);!o||r(o)?n._detach():n._attach(t.col,t.row,o)};t.listen(i,function(t){t.selected&&(t.before.col===t.col&&t.before.row===t.row||o(t))}),t.listen(a,function(){var e=t.selection.select;n._move(e.col,e.row)}),t.listen(l,function(e){var n=t.selection.select;n.col===e.col&&n.row===e.row&&o(e)})}},{key:"_getMessageInstanceOfMessage",value:function(t){if("string"==typeof(t=t||""))return this._createMessageInstance("error",s);var e=(""+t.type).toLowerCase();return"info"===e?this._createMessageInstance("info",u):"warning"===e?this._createMessageInstance("warning",c):this._createMessageInstance("error",s)}},{key:"_toMessageText",value:function(t){return"string"==typeof(t=t||"")?t:t.message?t.message:""+t}},{key:"_createMessageInstance",value:function(t,e){var n=this._messageInstances;return n[t]||(n[t]=new e(this._grid))}}]),t}();t.exports=h},function(t,e,n){var r=n(8),o=n(130),i=n(119),a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,o),_createClass(e,[{key:"createMessageElementInternal",value:function(){return new i}},{key:"drawCellMessageInternal",value:function(t,e,n,o,i){var a=n.bgColor,l=e.getSelectState().selected,s=e.getRect();o.drawBorderWithClip(e,function(t){if(!l){t.fillStyle="#ff8a80";var n=s.copy();n.left=n.right-24,t.fillRect(n.left,n.top,n.width,n.height-1);var i=a,c=n.left+(n.width-4)/2,u=n.top+(n.height-20)/2;o.fillRectWithState(new r(c,u,4,12),e,{fillColor:i}),o.fillRectWithState(new r(c,u+16,4,4),e,{fillColor:i})}})}}]),e}();t.exports=a},function(t,e,n){var r=n(131),o="cheetah-grid__error-message-element",i=o+"__message",a=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(122),t._rootElement.classList.add(o),t._messageElement.classList.add(i),t}return _inherits(e,r),e}();t.exports=a},function(t,e,n){var r=n(121);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(6)(!1)).push([t.i,".cheetah-grid__message-element{position:absolute;margin-top:-2px;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;user-select:none}.cheetah-grid__message-element--hidden{opacity:0;display:none}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}.cheetah-grid__message-element{border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element.helper-text--right-justified{text-align:right}",""])},function(t,e,n){var r=n(123);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(6)(!1)).push([t.i,".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}",""])},function(t,e,n){var r=n(8),o=n(130),i=n(125),a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,o),_createClass(e,[{key:"createMessageElementInternal",value:function(){return new i}},{key:"drawCellMessageInternal",value:function(t,e,n,o,i){var a=n.bgColor,l=e.getSelectState().selected,s=e.getRect();o.drawBorderWithClip(e,function(t){if(!l){t.fillStyle="#ff9e80";var n=s.copy();n.left=n.right-24,t.fillRect(n.left,n.top,n.width,n.height-1);var i=a,c=n.left+(n.width-4)/2,u=n.top+(n.height-20)/2;o.fillRectWithState(new r(c,u,4,12),e,{fillColor:i}),o.fillRectWithState(new r(c,u+16,4,4),e,{fillColor:i})}})}}]),e}();t.exports=a},function(t,e,n){var r=n(131),o="cheetah-grid__warning-message-element",i=o+"__message",a=function(t){function e(){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(126),t._rootElement.classList.add(o),t._messageElement.classList.add(i),t}return _inherits(e,r),e}();t.exports=a},function(t,e,n){var r=n(127);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(6)(!1)).push([t.i,".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}",""])},function(t,e,n){var r=n(130),o=n(131),i=n(8),a=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,r),_createClass(e,[{key:"createMessageElementInternal",value:function(){return new o}},{key:"drawCellMessageInternal",value:function(t,e,n,r,o){var a=n.bgColor,l=e.getSelectState().selected,s=e.getRect();r.drawBorderWithClip(e,function(t){if(!l){t.fillStyle="#e0e0e0";var n=s.copy();n.left=n.right-24,t.fillRect(n.left,n.top,n.width,n.height-1);var o=a,c=n.left+(n.width-4)/2,u=n.top+(n.height-20)/2;r.fillRectWithState(new i(c,u,4,4),e,{fillColor:o}),r.fillRectWithState(new i(c,u+8,4,12),e,{fillColor:o})}})}}]),e}();t.exports=a},function(t,e,n){var r=n(44),o=n(52);function i(t,e,n){if(n){var r=t[e];return t[e]=n,r}return t[e]}t.exports={theme:function(t,e){return i(r,t,e)},icon:function(t,e){return i(o,t,e)},icons:function(t){!function(t,e){for(var n in e)t[n]=e[n]}(o,t)}}},function(t,e,n){var r=function(){function t(e){_classCallCheck(this,t),this._grid=e}return _createClass(t,[{key:"dispose",value:function(){this.detachMessageElement(),this._messageElement&&this._messageElement.dispose(),this._messageElement=null}},{key:"_getMessageElement",value:function(){return this._messageElement||(this._messageElement=this.createMessageElementInternal())}},{key:"createMessageElementInternal",value:function(){}},{key:"drawCellMessageInternal",value:function(t,e,n,r,o){}},{key:"attachMessageElement",value:function(t,e,n){this._getMessageElement().attach(this._grid,t,e,n)}},{key:"moveMessageElement",value:function(t,e){this._getMessageElement().move(this._grid,t,e)}},{key:"detachMessageElement",value:function(){this._getMessageElement()._detach()}},{key:"drawCellMessage",value:function(t,e,n,r,o){this.drawCellMessageInternal(t,e,n,r,o)}}]),t}();t.exports=r},function(t,e,n){var r=n(5),o=n(15).createElement,i="cheetah-grid__message-element",a=i+"__message",l=i+"--hidden",s=i+"--shown";var c=function(){function t(){_classCallCheck(this,t),this._handler=new r;var e=this._rootElement=function(){n(120);var t=o("div",{classList:[i,l]}),e=o("span",{classList:[a]});return t.appendChild(e),t}();this._messageElement=e.querySelector("."+a)}return _createClass(t,[{key:"dispose",value:function(){this.detach(),this._handler.dispose(),this._rootElement=null,this._messageElement=null}},{key:"attach",value:function(t,e,n,r){var o=this._rootElement,i=this._messageElement;o.classList.remove(s),o.classList.add(l),this._attachCell(t,e,n)?(o.classList.add(s),o.classList.remove(l),i.textContent=r):this._detach()}},{key:"move",value:function(t,e,n){var r=this._rootElement;this._attachCell(t,e,n)?(r.classList.add(s),r.classList.remove(l)):this._detach()}},{key:"detach",value:function(){this._detach()}},{key:"_detach",value:function(){var t=this._rootElement;t.parentElement&&(t.parentElement.removeChild(t),t.classList.remove(s),t.classList.add(l))}},{key:"_attachCell",value:function(t,e,n){var r=this._rootElement,o=t.getAttachCellArea(e,n),i=o.element,a=o.rect,l=a.bottom,s=a.left,c=a.width,u=t.frozenRowCount,h=t.frozenColCount;if(n>=u&&u>0){if(l<t.getAttachCellArea(e,u-1).rect.bottom)return!1}else if(l<0)return!1;if(e>=h&&h>0){if(s<t.getAttachCellArea(h-1,n).rect.right)return!1}else if(s<0)return!1;var f=i.offsetHeight,d=i.offsetWidth;return!(f<l)&&(!(d<s)&&(r.style.top=l.toFixed()+"px",r.style.left=s.toFixed()+"px",r.style.width=c.toFixed()+"px",r.parentElement!==i&&i.appendChild(r),!0))}}]),t}();t.exports=c}])},"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports.cheetahGrid=factory():root.cheetahGrid=factory()}).call("undefined"!=typeof global?global:window)}();
//# sourceMappingURL=cheetahGrid.es5.min.js.map
{"version":3,"sources":["cheetahGrid.es5/cheetahGrid.es5.js","cheetahGrid.es5/webpack/universalModuleDefinition","cheetahGrid.es5/webpack/bootstrap","cheetahGrid.es5/./columns/action/internal/InlineInputElement.css","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.css","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.css","cheetahGrid.es5/./internal/style.css","cheetahGrid.es5/node_modules/css-loader/lib/css-base.js","cheetahGrid.es5/node_modules/style-loader/lib/addStyles.js","cheetahGrid.es5/node_modules/style-loader/lib/urls.js","cheetahGrid.es5/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg","cheetahGrid.es5/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg","cheetahGrid.es5/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg","cheetahGrid.es5/./GridCanvasHelper.js","cheetahGrid.es5/./ListGrid.js","cheetahGrid.es5/./columns.js","cheetahGrid.es5/./columns/action.js","cheetahGrid.es5/./columns/action/Action.js","cheetahGrid.es5/./columns/action/BaseAction.js","cheetahGrid.es5/./columns/action/BaseInputEditor.js","cheetahGrid.es5/./columns/action/ButtonAction.js","cheetahGrid.es5/./columns/action/CheckEditor.js","cheetahGrid.es5/./columns/action/Editor.js","cheetahGrid.es5/./columns/action/InlineInputEditor.js","cheetahGrid.es5/./columns/action/InlineMenuEditor.js","cheetahGrid.es5/./columns/action/SmallDialogInputEditor.js","cheetahGrid.es5/./columns/action/actionBind.js","cheetahGrid.es5/./columns/action/internal/InlineInputElement.css*","cheetahGrid.es5/./columns/action/internal/InlineInputElement.js","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.css*","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.js","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.es5/./columns/action/internal/dom.js","cheetahGrid.es5/./columns/style.js","cheetahGrid.es5/./columns/style/BaseStyle.js","cheetahGrid.es5/./columns/style/BranchGraphStyle.js","cheetahGrid.es5/./columns/style/ButtonStyle.js","cheetahGrid.es5/./columns/style/CheckStyle.js","cheetahGrid.es5/./columns/style/IconStyle.js","cheetahGrid.es5/./columns/style/ImageStyle.js","cheetahGrid.es5/./columns/style/NumberStyle.js","cheetahGrid.es5/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.es5/./columns/style/StdBaseStyle.js","cheetahGrid.es5/./columns/style/Style.js","cheetahGrid.es5/./columns/type.js","cheetahGrid.es5/./columns/type/BaseColumn.js","cheetahGrid.es5/./columns/type/BranchGraphColumn.js","cheetahGrid.es5/./columns/type/ButtonColumn.js","cheetahGrid.es5/./columns/type/CheckColumn.js","cheetahGrid.es5/./columns/type/Column.js","cheetahGrid.es5/./columns/type/IconColumn.js","cheetahGrid.es5/./columns/type/ImageColumn.js","cheetahGrid.es5/./columns/type/MenuColumn.js","cheetahGrid.es5/./columns/type/NumberColumn.js","cheetahGrid.es5/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.es5/./columns/type/columnUtils.js","cheetahGrid.es5/./core.js","cheetahGrid.es5/./core/DrawGrid.js","cheetahGrid.es5/./core/EventTarget.js","cheetahGrid.es5/./data.js","cheetahGrid.es5/./data/CachedDataSource.js","cheetahGrid.es5/./data/DataSource.js","cheetahGrid.es5/./element/Inline.js","cheetahGrid.es5/./element/InlineDrawer.js","cheetahGrid.es5/./element/InlineIcon.js","cheetahGrid.es5/./element/InlineImage.js","cheetahGrid.es5/./element/InlinePath2D.js","cheetahGrid.es5/./element/InlineSvg.js","cheetahGrid.es5/./element/inlines.js","cheetahGrid.es5/./header/style.js","cheetahGrid.es5/./header/style/BaseStyle.js","cheetahGrid.es5/./header/style/Style.js","cheetahGrid.es5/./header/type.js","cheetahGrid.es5/./header/type/BaseHeader.js","cheetahGrid.es5/./header/type/Header.js","cheetahGrid.es5/./header/type/SortHeader.js","cheetahGrid.es5/./icons.js","cheetahGrid.es5/./internal/EventHandler.js","cheetahGrid.es5/./internal/LRUCache.js","cheetahGrid.es5/./internal/NumberMap.js","cheetahGrid.es5/./internal/Rect.js","cheetahGrid.es5/./internal/Scrollable.js","cheetahGrid.es5/./internal/animate.js","cheetahGrid.es5/./internal/calc.js","cheetahGrid.es5/./internal/canvases.js","cheetahGrid.es5/./internal/color.js","cheetahGrid.es5/./internal/com.js","cheetahGrid.es5/./internal/fonts.js","cheetahGrid.es5/./internal/hiDPI.js","cheetahGrid.es5/./internal/icons.js","cheetahGrid.es5/./internal/imgs.js","cheetahGrid.es5/./internal/legacy/canvas/Path2D.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommands.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.es5/./internal/menu-items.js","cheetahGrid.es5/./internal/path2DManager.js","cheetahGrid.es5/./internal/sort.js","cheetahGrid.es5/./internal/style.css*","cheetahGrid.es5/./internal/style.js","cheetahGrid.es5/./internal/symbolManager.js","cheetahGrid.es5/./internal/utils.js","cheetahGrid.es5/./main.js","cheetahGrid.es5/./plugins/icons.js","cheetahGrid.es5/./plugins/themes.js","cheetahGrid.es5/./register.js","cheetahGrid.es5/./themes.js","cheetahGrid.es5/./themes/BASIC.js","cheetahGrid.es5/./themes/MATERIAL_DESIGN.js","cheetahGrid.es5/./themes/theme.js","cheetahGrid.es5/./tools.js","cheetahGrid.es5/./tools/canvashelper.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","window","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","push","useSourceMap","list","toString","map","item","content","cssWithMappingToString","join","mediaQuery","alreadyImportedModules","length","id","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","concat","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","stylesInDom","memoize","fn","memo","apply","arguments","isOldIE","document","all","atob","getTarget","target","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","options","DEBUG","Error","attrs","insertInto","insertAt","styles","listToStyles","addStylesToDom","update","newList","mayRemove","domStyle","refs","newStyles","j","parts","addStyle","base","css","media","part","insertStyleElement","style","lastStyleElementInsertedAtTop","insertBefore","firstChild","nextSibling","appendChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","type","addAttrs","createLinkElement","link","rel","el","keys","forEach","key","setAttribute","obj","remove","result","transform","styleIndex","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","updateStyle","newObj","replaceText","textStore","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","undefined","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","replace","fixedCss","fullMatch","origUrl","unquotedOrigUrl","trim","$1","test","newUrl","width","height","__webpack_provided_Array_dot_isArray","invalidateCell","context","grid","col","row","getColor","color","getOrApply","getThemeColor","names","getChainSafe","theme","themes","default","testFontLoad","font","fonts","check","load","drawInlines","ctx","inlines","rect","offset","drawInline","inline","offsetLeft","offsetRight","canDraw","save","fillStyle","draw","canvashelper","restore","onReady","inlineWidths","reduce","a","b","inlineWidth","_inlineRect","textAlign","textBaseline","icons","actInlines","buildInlines","drawCheckbox","helper","animElapsedTime","uncheckBgColor","checkbox","checkBgColor","borderColor","boxWidth","measureCheckbox","pos","calcStartPosition","uncheckBgRGB","colorToRGB","checkBgRGB","checkRGB","colorName","start","end","diff","Math","ceil","uncheckRGB","x","y","strokeRect","left","top","strokeStyle","borderColors","toBoxArray","strokeColorsRect","Rect","calc","Theme","constructor","_grid","_checkbox","_button","bgColor","GridCanvasHelper","_theme","calcWidth","toPx","full","getRect","em","getContext","measureText","calcHeight","calculator","createCalculator","box","drawRect","getDrawRect","beginPath","clip","clipLeft","clipWidth","clipTop","clipHeight","text","padding","isFrozenCell","frozenRowsColor","drawWithClip","toBoxPixelArray","fillColor","defaultBgColor","fill","option","state","getSelectState","selected","selection","selectionBgColor","frozenRowsBgColor","fillCell","lineWidth","drawBorderWithClip","startOffset","hiliteBorderColor","border","frozenRowsBorderColor","sel","select","moveTo","lineTo","bottom","stroke","right","caption","button","shadow","drawButton","radius","_getHeaderCellRange","_","headerMap","getHeaderCellRange","_updateRect","startCol","endCol","startRow","endRow","getColWidth","getRowHeight","setRect","_getCellValue","rowCount","getCell","field","columns","isObject","set","_getField","_setCellValue","hasListeners","EVENT_TYPE","SET_VALUE","ret","fireListeners","getRowRecord","dataSource","clearCache","arrayFind","isDef","_getRowRecordIndex","res","setField","isPromise","_getCellIcon0","icon","retIcon","iconPropKeys","k","f","_hasField","_getCellIcon","getField","hasField","_onDrawValue","cellValue","gridCanvasHelper","drawCellBase","fillOpt","fillCellWithState","frozenColCount","frozenRowCount","_headerBorderWithState","borderWithState","info","getRecord","getIcon","selId","_refreshHeader","headerEvents","unlisten","HeaderMap","header","headerObjects","cell","ids","headerType","bindGridEvent","HeaderBaseStyle","listen","CHANGE_STYLE","invalidate","action","isTarget","columnType","BaseStyle","colCount","_refreshRowCount","column","setColWidth","minWidth","setMinColWidth","maxWidth","setMaxColWidth","isArrayHeaderRowHeight","headerRowHeight","setRowHeight","_tryWithUpdateDataSource","dataSourceEventIds","handler","off","on","DataSource","UPDATED_LENGTH","UPDATED_ORDER","_setRecords","records","CachedDataSource","ofArray","_setDataSource","EMPTY","adjustListGridOption","extend","array","find","DrawGrid","PROTECTED_SYMBOL","headerId","_columns","_headerCells","_headerObjects","_addHeaders","_setupHeaderType","isCellInRange","roots","rowCells","_newRow","hd","headerStyle","sort","of","range","getHeaderCellRangeById","create","newRow","prev","ListGrid","sortState","order","updateSize","updateScroll","onDrawCell","valueCallback","changeValueCallback","after","SELECTED_CELL","invalidateGridRect","columnIndex","newCol","getColumnIndexByField","focusCell","makeVisibleCell","underlayBackgroundColor","BaseAction","Action","Editor","CheckEditor","ButtonAction","SmallDialogInputEditor","InlineInputEditor","InlineMenuEditor","ImmutableCheckEditor","_disabled","_readOnly","ImmutableInputEditor","ACTIONS","CHECK","INPUT","columnAction","DEFAULT","toUpperCase","bindCellClickAction","bindCellKeyAction","_action","util","getState","disabled","record","mouseOver","mouseActiveCell","mouseOut","INPUT_CELL","EDITABLEINPUT_CELL","DBLCLICK_CELL","DBLTAP_CELL","KEYDOWN","MODIFY_STATUS_EDITABLEINPUT_CELL","SCROLL","KEY_ENTER","KEY_F2","BaseInputEditor","inputValue","input","open","readOnly","onOpenCellInternal","onInputCellInternal","keyCode","onChangeSelectCellInternal","onGridScrollInternal","onSetInputAttrsInternal","setReadonly","BUTTON_COLUMN_STATE_ID","toggleValue","val","match","animate","CHECK_COLUMN_STATE_ID","KEY_SPACE","blockKey","doChangeValue","onChange","point","elapsed","then","selrange","acceptKeys","InlineInputElement","INLINE_INPUT_EDITOR_STATE_ID","globalElement","bindGridCount","attachInput","editor","element","addDisposable","dispose","attach","detachInput","detach","_classList","classList","_type","doGetCellValue","setInputAttrs","normalize","CLICK_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","MOUSEMOVE_CELL","InlineMenuElement","INLINE_MENU_EDITOR_STATE_ID","attachMenu","detachMenu","_options","cursor","SmallDialogInputElement","SMALL_DIALOG_INPUT_EDITOR_STATE_ID","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","_inputDialogManager","cancel","event","locals","getKeyCode","cancelEvent","EventHandler","CLASSNAME","createInputElement","add","_handler","_input","_bindInputEvents","_beforePropEditor","getAttachCellArea","toFixed","_activeData","focus","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","tryWithOffEvents","_isActive","parentElement","stopPropagationOnly","stopPropagation","contains","appendHtml","empty","disableFocus","isFocusable","findPrevSiblingFocusable","findNextSiblingFocusable","KEY_TAB","KEY_UP","KEY_DOWN","KEY_ESC","ITEM_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","createMenuElement","attachElement","menu","optionToLi","html","tabIndex","dataset","valueindex","span","openMenu","emptyItemEl","valueItemEl","focusEl","children","Array","slice","focusIndex","allHeight","offsetHeight","offsetTop","menuClientRect","getBoundingClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","winMargin","closeMenu","_menu","_bindMenuEvents","gridFocus","_doChangeValue","shiftKey","items","querySelectorAll","INPUT_CLASSNAME","_focus","createDialogElement","readonly","bindProps","dialog","unbindProps","_dialog","_bindDialogEvents","errorMessage","activeData","_onInputValue","_beforeValue","_validate","onKeyupAndPress","_onInputValueChange","inputOnly","message","tagName","textContent","innerHTML","dom","isNode","arg","nodeType","nodeName","toNode","toNodeList","jQuery","inner","node","disableBeforeTabIndex","enableFocus","previousSibling","Style","NumberStyle","CheckStyle","ButtonStyle","ImageStyle","IconStyle","PercentCompleteBarStyle","columnStyle","StyleClass","EventTarget","defaultStyle","_bgColor","doChangeStyle","adj","DEFAULT_BRANCH_COLORS","BranchGraphStyle","_branchColors","branchColors","_margin","margin","_circleSize","circleSize","_branchLineWidth","branchLineWidth","_mergeStyle","mergeStyle","buttonBgColor","_buttonBgColor","StdBaseStyle","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","DEFAULT_BAR_COLOR","num","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","_textAlign","_textBaseline","_color","_font","_padding","Column","NumberColumn","CheckColumn","ButtonColumn","ImageColumn","PercentCompleteBarColumn","IconColumn","BranchGraphColumn","MenuColumn","TYPES","NUMBER","BUTTON","IMAGE","isFadeinWhenCallbackInPromise","_fadeinWhenCallbackInPromise","configure","getFadinState","COLUMN_FADEIN_STATE_ID","_generateFadinPointAction","drawInternal","stateKey","opacity","cellState","globalAlpha","styleContents","fadinMgr","activeFadeins","margeAnimate","BaseColumn","fadeinWhenCallbackInPromise","getGridCanvasHelper","drawing","Date","now","currentContext","toCurrentContext","time","convertInternal","BRANCH_GRAPH_COLUMN_STATE_ID","getAllColumnData","callback","allData","promise","dataIndex","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","t","mergeLines","joinLine","timeline","branchIndex","reverse","tl","branch","from","to","branches","findBranchRootIndex","fromTargetIndex","branchTargetFromIndex","branchPoint","targetLine","merge","commitTag","commitMerge","fromTargetLine","pop","calcCommand","command","timelineData","commands","cmd","calcBranchesInfo","calcBranchXPoints","w","max","textWidth","renderMerge","upLineIndex","downLineIndex","branchXPoints","lineCap","upX","upRect","getCellRelativeRect","upY","bezierCurveTo","downX","downRect","downY","_start","_cache","cache","upLineIndexKey","downLineIndexKey","line","pointIndex","arc","PI","closePath","fillText","utils","_caption","clone","active","loadIcons","blur","offsetY","toBoolean","opt","repeatArray","count","Infinity","_tagName","_className","className","_content","_name","_iconWidth","iconWidth","isNaN","getImage","url","getCacheOrLoad","MAX_LRU_CACHE_SIZE","calcKeepAspectRatioSize","maxHeight","newWidth","newHeight","drawImage","_convertInternal","basePadding","textPadding","iconPadding","path","defaultFotmat","Intl","NumberFormat","fmt","_format","format","str","MARGIN","_min","min","_max","_formatter","formatter","v","svalue","endsWith","substr","rate","barMaxWidth","barTop","barLeft","barSize","loadIcon","iconList","toNormarizeArray","createRootElement","_vibrate","navigator","vibrate","isTouchEvent","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startBottom","_getRowHeight","findAfter","candRow","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_isCellDrawing","drawCells","_putCellDrawing","_removeCellDrawing","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","bounds","dcContext","DrawCellContext","pCol","_delayMode","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","_invalidateRect","_getVisibleRect","_getInitContext","initRow","_getColsWidth","drawBottom","initFrozenRow","outerTop","_toPxWidth","round","calcWidthContext","_getDefaultColPxWidth","defaultColWidth","_adjustColWidth","orgWidth","limit","colWidthsLimit","colWidthsMap","_setColWidth","put","each","getRowHeightInternal","rowHeightsMap","_setRowHeight","getRowsHeightInternal","h","_getScrollWidth","eachAll","_getScrollHeight","getScrollHeightInternal","_onScroll","lastLeft","lastTop","moveX","scrollable","scrollLeft","moveY","scrollTop","abs","redrawRect","copy","frozenRect","_onKeyDownMove","_sel","KEY_LEFT","getMoveLeftColByKeyDownInternal","_moveFocusCell","getMoveUpRowByKeyDownInternal","KEY_RIGHT","getMoveRightColByKeyDownInternal","getMoveDownRowByKeyDownInternal","KEY_HOME","ctrlKey","KEY_END","getOffsetInvalidateCells","extendRange","beforeRange","beforeRect","getCellsRect","_setFocusCell","afterRange","afterRect","intersection","invalidateRect","_getMouseAbstractPoint","changedTouches","clientX","pageX","scrollX","clientY","pageY","scrollY","_bindEvents","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","eventArgsSet","results","MOUSEDOWN_CELL","findIndex","getMouseButtons","resizeCol","_getResizeColAt","columnResizer","cellSelector","doubleTapBefore","longTouchId","setTimeout","preventDefault","clearTimeout","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","MOUSEENTER_CELL","onMouseleaveCell","beforeMouseCell","MOUSELEAVE_CELL","onMouseoverCell","onMouseoutCell","scrollElement","moving","lastMoving","focusControl","onScroll","onKeyDownMove","copyValue","copyCellValue","getCopyCellValue","Promise","strCellValue","onCopy","onInput","bindEventsInternal","abstractX","abstractY","inPoint","cellRect","getCellRect","_getScrollableVisibleRect","frozenColsWidth","frozenRowsHeight","_toRelativeRect","absoluteRect","setSafeInputValue","browser","isDescendantElement","Scrollable","NumberMap","hiDPI","KEY_ALPHA_C","MOUSEUP_CELL","RESIZE_COLUMN","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","mousemove","body","_mouseMove","mouseup","_mouseUp","touchmove","passive","touchend","touchcancel","_moveInternal","_upInternal","CellSelector","_getTargetCell","_bindMoveAndUp","_cell","makeVisibleCol","makeVisibleRow","ColumnResizer","_targetCol","_x","_preX","_invalidateAbsoluteLeft","pre","afterSize","FocusControl","_scrollable","_isComposition","metaKey","IE","clipboardData","setData","calcTop","getScrollBarSize","composition","atts","attributes","removeNames","att","_inputStatus","removeName","removeAttribute","editMode","Selection","_end","_wrapFireSelectedEvent","keepSelect","_setSelectCell","_isWraped","inCell","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_toRelativeDrawRect","fRect","onTerminate","_onTerminate","initDocument","alpha","cfg","config","floor","offsetWidth","setFocusRect","setScrollSize","maxwidth","minwidth","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","frozen","getRowAt","getColAt","oldEditMode","resetInputStatus","selCol","selRow","storeInputStatus","setDefaultInputStatus","cellsRect","invalidateTarget","disposable","disposables","nextId","listeners","listenerData","listener","args","_setFieldCache","_fCache","recCache","_rCache","getValue","setPromiseBack","ss","split","applyChainSafe","emptyFn","_getIndex","_sortedIndexMap","mapIndex","UPDATE_LENGTH","_get","_length","getOriginal","getOriginalField","hasOriginalField","setOriginalField","sortedIndexMap","orderFn","v1","v2","sortPromise","recordPromiseCallBackInternal","fieldPromiseCallBackInternal","Inline","fillTextRect","InlineDrawer","_draw","_width","_height","InlineIcon","_icon","InlineImage","src","imageLeft","imageTop","imageWidth","imageHeight","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_onloaded","_loaded","_loadImage","img","_inlineImg","drawInlineImageRect","path2DManager","InlinePath2D","_path","Path2D","translate","buildSvgDataUrl","svg","XMLSerializer","serializeToString","getSvgElement","parser","DOMParser","parseFromString","InlineSvg","svgElem","elmWidth","getAttribute","elmHeight","drawRegisteredIcon","drawWidth","drawHeight","iconOf","regedIcons","regedIcon","il","Header","SortHeader","headerCell","BaseHeader","_headerCell","_sort","_range","arrowSize","newState","_executeSort","plugins","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","_listeners","addEventListener","removeEventListener","clear","LRUCache","cacheSize","_list","_map","_cacheSize","remKey","shift","indexFirst","ary","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","_left","_top","_right","_bottom","x0","x1","y0","y1","another","rect1","rect2","_update","domHeight","MAX_SCROLL","sbSize","vScrollRange","rScrollRange","_p","_endPointElement","heightLimit","relativeTop","cubicBezier","x2","y2","x3","y3","step","err","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","duration","easing","startedAt","canceledFlg","createAnim","resolve","reject","anim","parse","calcStr","replacer","unit","script","eval","calcBasePosition","paddingLeft","paddingRight","styleColorToRGB","dummy","position","defaultView","getComputedStyle","styleColor","colorToRGB0","hexToNum","hex","parseInt","createRGB","g","tripleHexToRGB","sextupleHexToRGB","r1","r2","g1","g2","b1","b2","testRGB","rateToByte","rgb","toLowerCase","rgbMap","isArray","loads","legacy","testStr","ready","ratio","setRatio","devicePixelRatio","wh","scale","ICON_PROP_KEYS","quote","quoted","doms","props","getIconProps","tagProps","beforeStyle","getPropertyValue","clientWidth","isLiga","toPropArray","prop","toSimpleArray","iconProps","workData","normarize","allCache","isDataUrl","search","loadImage","console","error","Image","onload","onerror","warn","getCacheOrLoad0","u","cacheName","PathCommandsParser","_ops","op","CanvasRenderingContext2D","originalFill","mag","sqrt","pow","dot","clamp","angle","sign","acos","rotClockwise","cost","cos","sint","sin","rotCounterClockwise","midPoint","meanVec","pointMul","sum","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","xPrime2","rx2","ry2","lambda","factor","cPrime","x1UnitVector","x2UnitVector","theta","deltaTheta","rotate","PathCommands","lMx","lMy","lx","ly","reflected","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","quadraticCurveTo","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","pathTokens","next","builder","argsProvider","canvasOperations","_commands","ops","tokens","subsequentCommand","fst","log","computeStyle","display","FontRuler","el_","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","getWidth","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","lastResortFont","hasWebKitFallbackBug","widthsMatchLastResortWidths_","callbacks","cb","HAS_WEBKIT_FALLBACK_BUG","exec","userAgent","getPath2D","upsideDown","ud","offsetX","xrate","yrate","path2d","wait","createArray","createArrayPromise","plist","setArrayField","compare","old","sortArray","dummyPromise","catch","getScrollBarWidth","SCROLLBAR_SIZE","Symbol","mem","searchString","subjectString","isFinite","lastIndex","lastIndexOf","buttons","which","getIgnoreCase","arrayFindIndex","arr","predicate","ua","Chrome","Firefox","core","tools","register","_internal","symbolManager","themePlugins","iconPlugins","registers","values","BASIC","MATERIAL_DESIGN","builtin","defTheme","defaultTheme","choices","DEFAULT_BG_COLOR","cacheLinearGradient","getLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","FROZEN_ROWS_BG_COLOR","FROZEN_ROWS_BORDER_COLOR","BORDER_COLOR","getProp","superObj","defNames","createTheme","superTheme","extends","strokeRectLines","positions","preColor","pos1","pos2","roundRect","fillRoundRect","strokeRoundRect","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftWidth","rightWidth","leftLeftPos","leftTopPos","backgroundColor","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","global"],"mappings":"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","file":"cheetahGrid.es5.js","sourcesContent":["(function(){\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineInputElement.css\":\n/*!***********************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/action/internal/InlineInputElement.css ***!\n  \\***********************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineMenuElement.css\":\n/*!**********************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/action/internal/InlineMenuElement.css ***!\n  \\**********************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{padding:0;transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:padding 50ms ease-out,transform 50ms ease-out,box-shadow 50ms ease-out,opacity 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{padding:8px 0;transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:padding .15s ease-out,transform .15s ease-out,box-shadow .15s ease-out,opacity .15s ease-out}.cheetah-grid__inline-menu__menu-item{background-color:#fafafa;height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/SmallDialogInputElement.css\":\n/*!****************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/action/internal/SmallDialogInputElement.css ***!\n  \\****************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px 26px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-error-message]:after,.cheetah-grid__small-dialog-input[data-helper-text]:after{font-size:12px;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #dd2c00;box-shadow:0 1px 0 0 #dd2c00}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#dd2c00;text-align:left}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./internal/style.css\":\n/*!*******************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./internal/style.css ***!\n  \\*******************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/lib/css-base.js\":\n/*!*****************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader/lib/css-base.js ***!\n  \\*****************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n\n/***/ \"../../node_modules/style-loader/lib/addStyles.js\":\n/*!********************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/style-loader/lib/addStyles.js ***!\n  \\********************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(/*! ./urls */ \"../../node_modules/style-loader/lib/urls.js\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n\n/***/ \"../../node_modules/style-loader/lib/urls.js\":\n/*!***************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/style-loader/lib/urls.js ***!\n  \\***************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/content/svg/production/ic_add_48px.svg\":\n/*!*************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg ***!\n  \\*************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons\\content\\svg\\production\\ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg\":\n/*!************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg ***!\n  \\************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons\\image\\svg\\production\\ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\":\n/*!***************************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg ***!\n  \\***************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\":\n/*!*************************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg ***!\n  \\*************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg\":\n/*!*************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg ***!\n  \\*************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg\":\n/*!********************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg ***!\n  \\********************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg\":\n/*!******************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg ***!\n  \\******************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n\n/***/ \"./GridCanvasHelper.js\":\n/*!*****************************!*\\\n  !*** ./GridCanvasHelper.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {/*eslint no-bitwise:0*/\n\n\n{\n\tconst { calcStartPosition } = __webpack_require__(/*! ./internal/canvases */ \"./internal/canvases.js\");\n\tconst inlines = __webpack_require__(/*! ./element/inlines */ \"./element/inlines.js\");\n\tconst canvashelper = __webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\");\n\tconst themes = __webpack_require__(/*! ./themes */ \"./themes.js\");\n\tconst { colorToRGB } = __webpack_require__(/*! ./internal/color */ \"./internal/color.js\");\n\tconst Rect = __webpack_require__(/*! ./internal/Rect */ \"./internal/Rect.js\");\n\tconst { getChainSafe, getOrApply, style: { toBoxArray } } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\tconst fonts = __webpack_require__(/*! ./internal/fonts */ \"./internal/fonts.js\");\n\tconst calc = __webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\");\n\n\tfunction invalidateCell(context, grid) {\n\t\tconst { col, row } = context;\n\t\tgrid.invalidateCell(col, row);\n\t}\n\tfunction getColor(color, col, row, grid, context) {\n\t\treturn getOrApply(color, {\n\t\t\tcol,\n\t\t\trow,\n\t\t\tgrid,\n\t\t\tcontext\n\t\t});\n\t}\n\tfunction getThemeColor(grid, ...names) {\n\t\treturn getChainSafe(grid.theme, ...names) || getChainSafe(themes.default, ...names);\n\t}\n\tfunction testFontLoad(font, value, context, grid) {\n\t\tif (font) {\n\t\t\tif (!fonts.check(font, value)) {\n\t\t\t\tfonts.load(font, value, () => invalidateCell(context, grid));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction drawInlines(ctx, inlines, rect, offset, col, row, grid) {\n\t\tfunction drawInline(inline, offsetLeft, offsetRight) {\n\t\t\tif (inline.canDraw()) {\n\t\t\t\tctx.save();\n\t\t\t\ttry {\n\t\t\t\t\tctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\n\t\t\t\t\tctx.font = inline.font() || ctx.font;\n\t\t\t\t\tinline.draw({\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\tcanvashelper,\n\t\t\t\t\t\trect,\n\t\t\t\t\t\toffset,\n\t\t\t\t\t\toffsetLeft,\n\t\t\t\t\t\toffsetRight\n\t\t\t\t\t});\n\t\t\t\t} finally {\n\t\t\t\t\tctx.restore();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinline.onReady(() => grid.invalidateCell(col, row));\n\t\t\t\t//noop\n\t\t\t}\n\t\t}\n\t\tif (inlines.length === 1) {\n\t\t\t//1\n\t\t\tconst inline = inlines[0];\n\t\t\tdrawInline(inline, 0, 0);\n\t\t} else {\n\t\t\tconst inlineWidths = inlines.map(inline => (inline.width({ ctx }) || 0) - 0);\n\t\t\tlet offsetRight = inlineWidths.reduce((a, b) => a + b);\n\n\t\t\tlet offsetLeft = 0;\n\t\t\tinlines.forEach((inline, index) => {\n\t\t\t\tconst inlineWidth = inlineWidths[index];\n\t\t\t\toffsetRight -= inlineWidth;\n\t\t\t\tdrawInline(inline, offsetLeft, offsetRight);\n\t\t\t\toffsetLeft += inlineWidth;\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction _inlineRect(grid, ctx, inline, rect, col, row, {\n\t\toffset,\n\t\tcolor,\n\t\ttextAlign,\n\t\ttextBaseline,\n\t\tfont,\n\t\ticons\n\t} = {}) {\n\n\t\t//style\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\t\tctx.font = font || ctx.font;\n\n\t\tconst actInlines = inlines.buildInlines(icons, inline);\n\t\tdrawInlines(ctx, actInlines, rect, offset, col, row, grid);\n\t}\n\n\tfunction drawCheckbox(ctx, rect, check, helper, {\n\t\tanimElapsedTime = 1,\n\t\tuncheckBgColor = helper.theme.checkbox.uncheckBgColor,\n\t\tcheckBgColor = helper.theme.checkbox.checkBgColor,\n\t\tborderColor = helper.theme.checkbox.borderColor,\n\t\ttextAlign = 'center',\n\t\ttextBaseline = 'middle'\n\t} = {}) {\n\t\tconst boxWidth = canvashelper.measureCheckbox(ctx).width;\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\t\tconst pos = calcStartPosition(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/);\n\t\tif (0 < animElapsedTime && animElapsedTime < 1) {\n\t\t\tconst uncheckBgRGB = colorToRGB(uncheckBgColor);\n\t\t\tconst checkBgRGB = colorToRGB(checkBgColor);\n\t\t\tconst checkRGB = colorName => {\n\t\t\t\tconst start = uncheckBgRGB[colorName];\n\t\t\t\tconst end = checkBgRGB[colorName];\n\t\t\t\tif (animElapsedTime >= 1) {\n\t\t\t\t\treturn end;\n\t\t\t\t}\n\t\t\t\tconst diff = start - end;\n\t\t\t\treturn Math.ceil(start - diff * animElapsedTime);\n\t\t\t};\n\t\t\tconst uncheckRGB = colorName => {\n\t\t\t\tconst end = uncheckBgRGB[colorName];\n\t\t\t\tconst start = checkBgRGB[colorName];\n\t\t\t\tif (animElapsedTime >= 1) {\n\t\t\t\t\treturn end;\n\t\t\t\t}\n\t\t\t\tconst diff = end - start;\n\t\t\t\treturn Math.ceil(start + diff * animElapsedTime);\n\t\t\t};\n\t\t\tuncheckBgColor = check ? uncheckBgColor : `rgb(${uncheckRGB('r')} , ${uncheckRGB('g')}, ${uncheckRGB('b')})`;\n\t\t\tcheckBgColor = `rgb(${checkRGB('r')} , ${checkRGB('g')}, ${checkRGB('b')})`;\n\t\t}\n\n\t\tcanvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\n\t\t\tuncheckBgColor,\n\t\t\tcheckBgColor,\n\t\t\tborderColor\n\t\t});\n\t}\n\n\tclass Theme {\n\t\tconstructor(grid) {\n\t\t\tthis._grid = grid;\n\t\t}\n\t\tgetThemeColor(...name) {\n\t\t\treturn getThemeColor(this._grid, ...name);\n\t\t}\n\t\tget font() {\n\t\t\treturn getThemeColor(this._grid, 'font');\n\t\t}\n\t\tget underlayBackgroundColor() {\n\t\t\treturn getThemeColor(this._grid, 'underlayBackgroundColor');\n\t\t}\n\t\t// color\n\t\tget color() {\n\t\t\treturn getThemeColor(this._grid, 'color');\n\t\t}\n\t\tget frozenRowsColor() {\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsColor');\n\t\t}\n\t\t// background\n\t\tget defaultBgColor() {\n\t\t\treturn getThemeColor(this._grid, 'defaultBgColor');\n\t\t}\n\t\tget frozenRowsBgColor() {\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBgColor');\n\t\t}\n\t\tget selectionBgColor() {\n\t\t\treturn getThemeColor(this._grid, 'selectionBgColor');\n\t\t}\n\t\t// border\n\t\tget borderColor() {\n\t\t\treturn getThemeColor(this._grid, 'borderColor');\n\t\t}\n\t\tget frozenRowsBorderColor() {\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBorderColor');\n\t\t}\n\t\tget hiliteBorderColor() {\n\t\t\treturn getThemeColor(this._grid, 'hiliteBorderColor');\n\t\t}\n\t\tget checkbox() {\n\t\t\tconst grid = this._grid;\n\t\t\treturn this._checkbox || (this._checkbox = {\n\t\t\t\tget uncheckBgColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'uncheckBgColor');\n\t\t\t\t},\n\t\t\t\tget checkBgColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'checkBgColor');\n\t\t\t\t},\n\t\t\t\tget borderColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'borderColor');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tget button() {\n\t\t\tconst grid = this._grid;\n\t\t\treturn this._button || (this._button = {\n\t\t\t\tget color() {\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'color');\n\t\t\t\t},\n\t\t\t\tget bgColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'bgColor');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t}\n\n\tfunction strokeRect(ctx, color, left, top, width, height) {\n\t\tif (!__webpack_provided_Array_dot_isArray(color)) {\n\t\t\tif (color) {\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.strokeRect(left, top, width, height);\n\t\t\t}\n\t\t} else {\n\t\t\tconst borderColors = toBoxArray(color);\n\t\t\tcanvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\n\t\t}\n\t}\n\n\tclass GridCanvasHelper {\n\t\tconstructor(grid) {\n\t\t\tthis._grid = grid;\n\t\t\tthis._theme = new Theme(grid);\n\t\t}\n\t\tcreateCalculator(context) {\n\t\t\treturn {\n\t\t\t\tcalcWidth(width) {\n\t\t\t\t\treturn calc.toPx(width, {\n\t\t\t\t\t\tget full() {\n\t\t\t\t\t\t\tconst rect = context.getRect();\n\t\t\t\t\t\t\treturn rect.width;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget em() {\n\t\t\t\t\t\t\tconst ctx = context.getContext();\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcalcHeight(height) {\n\t\t\t\t\treturn calc.toPx(height, {\n\t\t\t\t\t\tget full() {\n\t\t\t\t\t\t\tconst rect = context.getRect();\n\t\t\t\t\t\t\treturn rect.height;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget em() {\n\t\t\t\t\t\t\tconst ctx = context.getContext();\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tgetColor(color, col, row, ctx) {\n\t\t\treturn getColor(color, col, row, this._grid, ctx);\n\t\t}\n\t\ttoBoxArray(obj) {\n\t\t\treturn toBoxArray(obj);\n\t\t}\n\t\ttoBoxPixelArray(value, context) {\n\t\t\tif (typeof value === 'string' || __webpack_provided_Array_dot_isArray(value)) {\n\t\t\t\tconst calculator = this.createCalculator(context);\n\t\t\t\tconst box = toBoxArray(value);\n\t\t\t\treturn [calculator.calcHeight(box[0]), calculator.calcWidth(box[1]), calculator.calcHeight(box[2]), calculator.calcWidth(box[3])];\n\t\t\t}\n\t\t\treturn toBoxArray(value);\n\t\t}\n\t\tget theme() {\n\t\t\treturn this._theme;\n\t\t}\n\t\tdrawWithClip(context, draw) {\n\t\t\tconst drawRect = context.getDrawRect();\n\t\t\tif (!drawRect) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst ctx = context.getContext();\n\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n\t\t\t\t//clip\n\t\t\t\tctx.clip();\n\n\t\t\t\tdraw(ctx);\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\tdrawBorderWithClip(context, draw) {\n\t\t\tconst drawRect = context.getDrawRect();\n\t\t\tif (!drawRect) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst rect = context.getRect();\n\t\t\tconst ctx = context.getContext();\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\t//clip\n\t\t\t\tctx.beginPath();\n\t\t\t\tlet clipLeft = drawRect.left;\n\t\t\t\tlet clipWidth = drawRect.width;\n\t\t\t\tif (drawRect.left === rect.left) {\n\t\t\t\t\tclipLeft += -1;\n\t\t\t\t\tclipWidth += 1;\n\t\t\t\t}\n\t\t\t\tlet clipTop = drawRect.top;\n\t\t\t\tlet clipHeight = drawRect.height;\n\t\t\t\tif (drawRect.top === rect.top) {\n\t\t\t\t\tclipTop += -1;\n\t\t\t\t\tclipHeight += 1;\n\t\t\t\t}\n\t\t\t\tctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\n\t\t\t\tctx.clip();\n\n\t\t\t\tdraw(ctx);\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\ttext(text, context, {\n\t\t\tpadding,\n\t\t\toffset = 2,\n\t\t\tcolor,\n\t\t\ttextAlign = 'left',\n\t\t\ttextBaseline = 'middle',\n\t\t\tfont,\n\t\t\ticons\n\t\t} = {}) {\n\t\t\tlet rect = context.getRect();\n\n\t\t\tconst { col, row } = context;\n\n\t\t\tif (!color) {\n\t\t\t\tcolor = this.theme.color;\n\t\t\t\t// header color\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tif (padding) {\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\n\t\t\t\t\tconst left = rect.left + padding[3];\n\t\t\t\t\tconst top = rect.top + padding[0];\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\n\t\t\t\t\trect = new Rect(left, top, width, height);\n\t\t\t\t}\n\t\t\t\t_inlineRect(this._grid, ctx, text, rect, col, row, {\n\t\t\t\t\toffset,\n\t\t\t\t\tcolor,\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tfillCell(context, {\n\t\t\tfillColor = this.theme.defaultBgColor\n\t\t} = {}) {\n\t\t\tconst rect = context.getRect();\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t\tctx.fill();\n\t\t\t});\n\t\t}\n\t\tfillCellWithState(context, option = {}) {\n\t\t\tconst state = context.getSelectState();\n\t\t\tconst { col, row } = context;\n\n\t\t\toption.fillColor = (() => {\n\t\t\t\tif (!state.selected && state.selection) {\n\t\t\t\t\treturn this.theme.selectionBgColor;\n\t\t\t\t} else {\n\t\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\t\treturn this.theme.frozenRowsBgColor;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn option.fillColor || this.theme.defaultBgColor;\n\t\t\t})();\n\n\t\t\tthis.fillCell(context, option);\n\t\t}\n\t\tborder(context, {\n\t\t\tborderColor = this.theme.borderColor,\n\t\t\tlineWidth = 1\n\t\t} = {}) {\n\t\t\tconst rect = context.getRect();\n\n\t\t\tthis.drawBorderWithClip(context, ctx => {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tconst borderColors = getColor(borderColor, col, row, this._grid, ctx);\n\n\t\t\t\tif (lineWidth === 1) {\n\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\n\t\t\t\t} else if (lineWidth === 2) {\n\t\t\t\t\tctx.lineWidth = 2;\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\n\t\t\t\t} else {\n\t\t\t\t\tctx.lineWidth = lineWidth;\n\t\t\t\t\tconst startOffset = lineWidth / 2 - 1;\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tborderWithState(context, option = {}) {\n\t\t\tconst rect = context.getRect();\n\t\t\tconst state = context.getSelectState();\n\t\t\tconst { col, row } = context;\n\n\t\t\t//\n\t\t\tif (state.selected) {\n\t\t\t\toption.borderColor = this.theme.hiliteBorderColor;\n\t\t\t\toption.lineWidth = 2;\n\t\t\t\tthis.border(context, option);\n\t\t\t} else {\n\t\t\t\t// header color\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\toption.borderColor = this.theme.frozenRowsBorderColor;\n\t\t\t\t}\n\n\t\t\t\toption.lineWidth = 1;\n\t\t\t\tthis.border(context, option);\n\n\t\t\t\t//\n\t\t\t\tconst sel = this._grid.selection.select;\n\t\t\t\tif (sel.col + 1 === col && sel.row === row) {\n\t\t\t\t\t//\n\t\t\t\t\tthis.drawBorderWithClip(context, ctx => {\n\t\t\t\t\t\tconst borderColors = toBoxArray(getColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx));\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t});\n\t\t\t\t} else if (sel.col === col && sel.row + 1 === row) {\n\t\t\t\t\t//\n\t\t\t\t\tthis.drawBorderWithClip(context, ctx => {\n\t\t\t\t\t\tconst borderColors = toBoxArray(getColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx));\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcheckbox(check, context, option = {}) {\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tdrawCheckbox(ctx, context.getRect(), check, this, option);\n\t\t\t});\n\t\t}\n\t\tbutton(caption, context, {\n\t\t\tbgColor = this.theme.button.bgColor,\n\t\t\tpadding,\n\t\t\toffset = 2,\n\t\t\tcolor = this.theme.button.color,\n\t\t\ttextAlign = 'center',\n\t\t\ttextBaseline = 'middle',\n\t\t\tshadow,\n\t\t\tfont,\n\t\t\ticons\n\t\t} = {}) {\n\t\t\tconst rect = context.getRect();\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tpadding = this.toBoxPixelArray(padding || rect.height / 8, context);\n\t\t\t\tconst left = rect.left + padding[3];\n\t\t\t\tconst top = rect.top + padding[0];\n\t\t\t\tconst width = rect.width - padding[1] - padding[3];\n\t\t\t\tconst height = rect.height - padding[0] - padding[2];\n\n\t\t\t\tcanvashelper.drawButton(ctx, left, top, width, height, {\n\t\t\t\t\tbgColor,\n\t\t\t\t\tradius: rect.height / 8,\n\t\t\t\t\toffset,\n\t\t\t\t\tshadow\n\t\t\t\t});\n\t\t\t\t_inlineRect(this._grid, ctx, caption, new Rect(left, top, width, height), col, row, {\n\t\t\t\t\toffset,\n\t\t\t\t\tcolor,\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\ttestFontLoad(font, value, context) {\n\t\t\treturn testFontLoad(font, value, context, this._grid);\n\t\t}\n\t}\n\n\tmodule.exports = GridCanvasHelper;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./ListGrid.js\":\n/*!*********************!*\\\n  !*** ./ListGrid.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\n{\n\tconst { extend, array: { find: arrayFind }, isDef, isPromise, obj: { isObject } } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\tconst GridCanvasHelper = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\tconst columns = __webpack_require__(/*! ./columns */ \"./columns.js\");\n\tconst { BaseStyle } = columns.style;\n\tconst headerType = __webpack_require__(/*! ./header/type */ \"./header/type.js\");\n\tconst { BaseStyle: HeaderBaseStyle } = __webpack_require__(/*! ./header/style */ \"./header/style.js\");\n\tconst DrawGrid = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\tconst { DataSource, CachedDataSource } = __webpack_require__(/*! ./data */ \"./data.js\");\n\tconst themes = __webpack_require__(/*! ./themes */ \"./themes.js\");\n\tconst icons = __webpack_require__(/*! ./internal/icons */ \"./internal/icons.js\");\n\t//protected symbol\n\tconst { PROTECTED_SYMBOL: _ } = __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tlet headerId = 0;\n\t//private methods\n\tfunction _getHeaderCellRange(grid, col, row) {\n\t\treturn grid[_].headerMap.getHeaderCellRange(col, row);\n\t}\n\tfunction _updateRect(grid, col, row, context) {\n\t\tconst rect = context.getRect();\n\t\tconst {\n\t\t\tstartCol,\n\t\t\tendCol,\n\t\t\tstartRow,\n\t\t\tendRow\n\t\t} = _getHeaderCellRange(grid, col, row);\n\t\tfor (let c = col - 1; c >= startCol; c--) {\n\t\t\trect.left -= grid.getColWidth(c);\n\t\t}\n\t\tfor (let c = col + 1; c <= endCol; c++) {\n\t\t\trect.right += grid.getColWidth(c);\n\t\t}\n\t\tfor (let r = row - 1; r >= startRow; r--) {\n\t\t\trect.top -= grid.getRowHeight(r);\n\t\t}\n\t\tfor (let r = row + 1; r <= endRow; r++) {\n\t\t\trect.bottom += grid.getRowHeight(r);\n\t\t}\n\t\tcontext.setRect(rect);\n\t}\n\tfunction _getCellValue(grid, col, row) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn grid[_].headerMap.getCell(col, row).caption;\n\t\t} else {\n\t\t\tlet { field } = grid[_].headerMap.columns[col];\n\t\t\tif (isObject(field) && field.get && field.set) {\n\t\t\t\tfield = field.get;\n\t\t\t}\n\t\t\treturn _getField(grid, field, row);\n\t\t}\n\t}\n\tfunction _setCellValue(grid, col, row, value) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\t// nop\n\t\t\treturn false;\n\t\t} else {\n\t\t\tlet { field } = grid[_].headerMap.columns[col];\n\t\t\tif (isObject(field) && field.get && field.set) {\n\t\t\t\tfield = field.set;\n\t\t\t}\n\t\t\tif (grid.hasListeners(EVENT_TYPE.SET_VALUE)) {\n\t\t\t\tconst ret = grid.fireListeners(EVENT_TYPE.SET_VALUE, grid.getRowRecord(row), field, value);\n\t\t\t\tgrid[_].dataSource.clearCache();\n\t\t\t\treturn arrayFind(ret, isDef);\n\t\t\t} else {\n\t\t\t\tconst index = _getRowRecordIndex(grid, row);\n\t\t\t\tconst res = grid[_].dataSource.setField(index, field, value);\n\t\t\t\treturn isPromise(res) ? res : true;\n\t\t\t}\n\t\t}\n\t}\n\tfunction _getCellIcon0(grid, icon, row) {\n\t\tif (!isDef(icon)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (__webpack_provided_Array_dot_isArray(icon)) {\n\t\t\treturn icon.map(i => _getCellIcon0(grid, i, row));\n\t\t}\n\t\tif (!isObject(icon)) {\n\t\t\treturn _getField(grid, icon, row);\n\t\t}\n\t\tconst retIcon = {};\n\t\ticons.iconPropKeys.forEach(k => {\n\t\t\tif (icon[k]) {\n\t\t\t\tconst f = _getField(grid, icon[k], row);\n\t\t\t\tif (isDef(f)) {\n\t\t\t\t\tretIcon[k] = f;\n\t\t\t\t} else {\n\t\t\t\t\tif (!_hasField(grid, icon[k], row)) {\n\t\t\t\t\t\tretIcon[k] = icon[k];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn retIcon;\n\t}\n\tfunction _getCellIcon(grid, col, row, name) {\n\t\tconst { [name]: icon } = grid[_].headerMap.columns[col];\n\t\treturn _getCellIcon0(grid, icon, row);\n\t}\n\tfunction _getField(grid, field, row) {\n\t\tif (!isDef(field)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst index = _getRowRecordIndex(grid, row);\n\t\t\treturn grid[_].dataSource.getField(index, field);\n\t\t}\n\t}\n\tfunction _hasField(grid, field, row) {\n\t\tif (!isDef(field)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tconst index = _getRowRecordIndex(grid, row);\n\t\t\treturn grid[_].dataSource.hasField(index, field);\n\t\t}\n\t}\n\tfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\n\t\tconst helper = grid[_].gridCanvasHelper;\n\n\t\tconst drawCellBase = ({ bgColor } = {}) => {\n\t\t\tconst fillOpt = {\n\t\t\t\tfillColor: bgColor\n\t\t\t};\n\t\t\t//cell\n\t\t\thelper.fillCellWithState(context, fillOpt);\n\n\t\t\tif (context.col === grid.frozenColCount - 1) {\n\t\t\t\t//\n\t\t\t\tconst rect = context.getRect();\n\t\t\t\thelper.drawWithClip(context, ctx => {\n\t\t\t\t\tconst borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor : helper.theme.frozenRowsBorderColor;\n\n\t\t\t\t\tconst borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\n\t\t\t\t\tif (borderColors[1]) {\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.right - 2.5, rect.top);\n\t\t\t\t\t\tctx.lineTo(rect.right - 2.5, rect.bottom);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (context.row < grid[_].headerMap.rowCount) {\n\t\t\t\t_headerBorderWithState(grid, helper, context);\n\t\t\t} else {\n\t\t\t\thelper.borderWithState(context);\n\t\t\t}\n\t\t};\n\t\tconst info = {\n\t\t\tgetRecord: () => grid.getRowRecord(row),\n\t\t\tgetIcon: () => _getCellIcon(grid, col, row, 'icon'),\n\t\t\tstyle,\n\t\t\tdrawCellBase\n\t\t};\n\n\t\treturn draw(cellValue, info, context, grid);\n\t}\n\tfunction _headerBorderWithState(grid, helper, context) {\n\t\tconst { col, row } = context;\n\t\tconst sel = grid.selection.select;\n\t\tif (sel.row >= grid[_].headerMap.rowCount) {\n\t\t\t//\n\t\t\thelper.borderWithState(context);\n\t\t\treturn;\n\t\t}\n\n\t\tconst { id } = grid[_].headerMap.getCell(col, row);\n\n\t\tconst rect = context.getRect();\n\t\tconst option = {};\n\n\t\tconst { id: selId } = grid[_].headerMap.getCell(sel.col, sel.row);\n\t\t//\n\t\tif (selId === id) {\n\t\t\toption.borderColor = helper.theme.hiliteBorderColor;\n\t\t\toption.lineWidth = 2;\n\t\t\thelper.border(context, option);\n\t\t} else {\n\t\t\toption.lineWidth = 1;\n\t\t\t// header color\n\t\t\tconst isFrozenCell = grid.isFrozenCell(col, row);\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\toption.borderColor = helper.theme.frozenRowsBorderColor;\n\t\t\t}\n\t\t\thelper.border(context, option);\n\n\t\t\t//\n\t\t\tif (col > 0 && grid[_].headerMap.getCell(col - 1, row).id === selId) {\n\t\t\t\t//\n\t\t\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\t\t\tconst borderColors = helper.toBoxArray(helper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx));\n\t\t\t\t\tif (borderColors[1]) {\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (row > 0 && grid[_].headerMap.getCell(col, row - 1).id === selId) {\n\t\t\t\t//\n\t\t\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\t\t\tconst borderColors = helper.toBoxArray(helper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx));\n\t\t\t\t\tif (borderColors[0]) {\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tfunction _refreshHeader(grid) {\n\t\tif (grid[_].headerEvents) {\n\t\t\tgrid[_].headerEvents.forEach(id => grid.unlisten(id));\n\t\t}\n\t\tgrid[_].headerMap = new HeaderMap(grid[_].header);\n\t\tgrid[_].headerEvents = [];\n\t\tgrid[_].headerMap.headerObjects.forEach(cell => {\n\t\t\tconst ids = cell.headerType.bindGridEvent(grid);\n\t\t\tgrid[_].headerEvents.push(...ids);\n\t\t\tif (cell.style) {\n\t\t\t\tif (cell.style instanceof HeaderBaseStyle) {\n\t\t\t\t\tconst id = cell.style.listen(HeaderBaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n\t\t\t\t\t\tgrid.invalidate();\n\t\t\t\t\t});\n\t\t\t\t\tgrid[_].headerEvents.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tgrid[_].headerMap.columns.forEach((col, index) => {\n\t\t\tif (col.action) {\n\t\t\t\tconst ids = col.action.bindGridEvent(grid, index, {\n\t\t\t\t\tisTarget(col, row) {\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgrid[_].headerEvents.push(...ids);\n\t\t\t}\n\t\t\tif (col.columnType) {\n\t\t\t\tconst ids = col.columnType.bindGridEvent(grid, index, {\n\t\t\t\t\tisTarget(col, row) {\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgrid[_].headerEvents.push(...ids);\n\t\t\t}\n\t\t\tif (col.style) {\n\t\t\t\tif (col.style instanceof BaseStyle) {\n\t\t\t\t\tconst id = col.style.listen(columns.style.EVENT_TYPE.CHANGE_STYLE, () => {\n\t\t\t\t\t\tgrid.invalidate();\n\t\t\t\t\t});\n\t\t\t\t\tgrid[_].headerEvents.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tgrid.colCount = grid[_].headerMap.columns.length;\n\t\t_refreshRowCount(grid);\n\t\tgrid.frozenRowCount = grid[_].headerMap.rowCount;\n\t\tfor (let col = 0; col < grid[_].headerMap.columns.length; col++) {\n\t\t\tconst column = grid[_].headerMap.columns[col];\n\t\t\tconst width = column.width;\n\t\t\tif (width && (width > 0 || typeof width === 'string')) {\n\t\t\t\tgrid.setColWidth(col, width);\n\t\t\t}\n\t\t\tconst minWidth = column.minWidth;\n\t\t\tif (minWidth && (minWidth > 0 || typeof minWidth === 'string')) {\n\t\t\t\tgrid.setMinColWidth(col, minWidth);\n\t\t\t}\n\t\t\tconst maxWidth = column.maxWidth;\n\t\t\tif (maxWidth && (maxWidth > 0 || typeof maxWidth === 'string')) {\n\t\t\t\tgrid.setMaxColWidth(col, maxWidth);\n\t\t\t}\n\t\t}\n\t\tconst isArrayHeaderRowHeight = __webpack_provided_Array_dot_isArray(grid[_].headerRowHeight);\n\t\tfor (let row = 0; row < grid[_].headerMap.rowCount; row++) {\n\t\t\tconst height = isArrayHeaderRowHeight ? grid[_].headerRowHeight[row] : grid[_].headerRowHeight;\n\t\t\tif (height && height > 0) {\n\t\t\t\tgrid.setRowHeight(row, height);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _refreshRowCount(grid) {\n\t\tgrid.rowCount = grid[_].dataSource.length + grid[_].headerMap.rowCount;\n\t}\n\tfunction _tryWithUpdateDataSource(grid, fn) {\n\t\tif (grid[_].dataSourceEventIds) {\n\t\t\tgrid[_].dataSourceEventIds.forEach(id => grid[_].handler.off(id));\n\t\t}\n\n\t\tfn(grid);\n\n\t\tgrid[_].dataSourceEventIds = [grid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\n\t\t\t_refreshRowCount(grid);\n\t\t\tgrid.invalidate();\n\t\t}), grid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n\t\t\tgrid.invalidate();\n\t\t})];\n\t}\n\tfunction _setRecords(grid, records = []) {\n\t\t_tryWithUpdateDataSource(grid, () => {\n\t\t\tgrid[_].records = records;\n\t\t\tgrid[_].dataSource = CachedDataSource.ofArray(grid[_].records);\n\t\t});\n\t}\n\tfunction _setDataSource(grid, dataSource) {\n\t\t_tryWithUpdateDataSource(grid, () => {\n\t\t\tif (dataSource) {\n\t\t\t\tif (dataSource instanceof DataSource) {\n\t\t\t\t\tgrid[_].dataSource = dataSource;\n\t\t\t\t} else {\n\t\t\t\t\tgrid[_].dataSource = new CachedDataSource(dataSource);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tgrid[_].dataSource = DataSource.EMPTY;\n\t\t\t}\n\t\t\tgrid[_].records = null;\n\t\t});\n\t}\n\n\tfunction _getRowRecordIndex(grid, row) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn row - grid[_].headerMap.rowCount;\n\t\t}\n\t}\n\t//end private methods\n\t//\n\t//\n\t//\n\n\tclass HeaderMap {\n\t\tconstructor(header) {\n\t\t\tthis._columns = [];\n\t\t\tthis._headerCells = [];\n\t\t\tthis._headerObjects = [];\n\n\t\t\tthis._addHeaders(0, header, []);\n\t\t\tthis._setupHeaderType();\n\t\t}\n\t\tget columns() {\n\t\t\treturn this._columns;\n\t\t}\n\t\tget rowCount() {\n\t\t\treturn this._headerCells.length;\n\t\t}\n\t\tget headerObjects() {\n\t\t\treturn this._headerObjects;\n\t\t}\n\t\tgetCell(col, row) {\n\t\t\treturn this._headerCells[row][col];\n\t\t}\n\t\tgetHeaderCellRangeById(id) {\n\t\t\tfor (let r = 0; r < this.rowCount; r++) {\n\t\t\t\tfor (let c = 0; c < this.columns.length; c++) {\n\t\t\t\t\tif (id === this.getCell(c, r).id) {\n\t\t\t\t\t\treturn this.getHeaderCellRange(c, r);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\tgetHeaderCellRange(col, row) {\n\t\t\tconst result = {\n\t\t\t\tstartCol: col,\n\t\t\t\tstartRow: row,\n\t\t\t\tendCol: col,\n\t\t\t\tendRow: row,\n\t\t\t\tisCellInRange(col, row) {\n\t\t\t\t\treturn this.startCol <= col && col <= this.endCol && this.startRow <= row && row <= this.endRow;\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst { id } = this.getCell(col, row);\n\t\t\tfor (let c = col - 1; c >= 0; c--) {\n\t\t\t\tif (id !== this.getCell(c, row).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.startCol = c;\n\t\t\t}\n\t\t\tfor (let c = col + 1; c < this.columns.length; c++) {\n\t\t\t\tif (id !== this.getCell(c, row).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.endCol = c;\n\t\t\t}\n\t\t\tfor (let r = row - 1; r >= 0; r--) {\n\t\t\t\tif (id !== this.getCell(col, r).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.startRow = r;\n\t\t\t}\n\t\t\tfor (let r = row + 1; r < this.rowCount; r++) {\n\t\t\t\tif (id !== this.getCell(col, r).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.endRow = r;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\t_addHeaders(row, header, roots) {\n\t\t\tconst rowCells = this._headerCells[row] || this._newRow(row);\n\t\t\theader.forEach(hd => {\n\t\t\t\tconst col = this._columns.length;\n\t\t\t\tconst cell = {\n\t\t\t\t\tid: headerId++,\n\t\t\t\t\tcaption: hd.caption,\n\t\t\t\t\tstyle: hd.headerStyle,\n\t\t\t\t\tsort: hd.sort\n\t\t\t\t};\n\t\t\t\tthis._headerObjects.push(cell);\n\t\t\t\trowCells[col] = cell;\n\t\t\t\tfor (let r = row - 1; r >= 0; r--) {\n\t\t\t\t\tthis._headerCells[r][col] = roots[r];\n\t\t\t\t}\n\t\t\t\tif (hd.columns) {\n\t\t\t\t\tthis._addHeaders(row + 1, hd.columns, [...roots, cell]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._columns.push({\n\t\t\t\t\t\twidth: hd.width,\n\t\t\t\t\t\tminWidth: hd.minWidth,\n\t\t\t\t\t\tmaxWidth: hd.maxWidth,\n\t\t\t\t\t\tfield: hd.field,\n\t\t\t\t\t\ticon: hd.icon,\n\t\t\t\t\t\tcolumnType: columns.type.of(hd.columnType),\n\t\t\t\t\t\taction: columns.action.of(hd.action),\n\t\t\t\t\t\tstyle: hd.style,\n\t\t\t\t\t\tdefine: hd\n\t\t\t\t\t});\n\t\t\t\t\tfor (let r = row + 1; r < this._headerCells.length; r++) {\n\t\t\t\t\t\tthis._headerCells[r][col] = cell;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t_setupHeaderType() {\n\t\t\tthis._headerObjects.forEach(cell => {\n\t\t\t\tcell.range = this.getHeaderCellRangeById(cell.id);\n\t\t\t\tcell.headerType = headerType.create(cell);\n\t\t\t});\n\t\t}\n\t\t_newRow(row) {\n\t\t\tconst newRow = this._headerCells[row] = [];\n\t\t\tif (!this._columns.length) {\n\t\t\t\treturn newRow;\n\t\t\t}\n\t\t\tconst prev = this._headerCells[row - 1];\n\t\t\tfor (let col = 0; col < prev.length; col++) {\n\t\t\t\tnewRow[col] = prev[col];\n\t\t\t}\n\t\t\treturn newRow;\n\t\t}\n\t}\n\n\tfunction adjustListGridOption(options) {\n\t\tif (options) {\n\t\t\tdelete options.frozenRowCount;\n\t\t\tdelete options.colCount;\n\t\t\tdelete options.rowCount;\n\t\t}\n\t\treturn options;\n\t}\n\n\tconst EVENT_TYPE = extend(DrawGrid.EVENT_TYPE, {\n\t\tSET_VALUE: 'set_value'\n\t});\n\n\t/**\r\n  * ListGrid\r\n  * @classdesc cheetahGrid.ListGrid\r\n  * @extends cheetahGrid.core.DrawGrid\r\n  * @memberof cheetahGrid\r\n  */\n\tclass ListGrid extends DrawGrid {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\t/**\r\n   * constructor\r\n   *\r\n   * <pre>\r\n   * Constructor options\r\n   * -----\r\n   * header: see header property\r\n   * records {array}: records data\r\n   * dataSource {DataSource}: records data source\r\n   * frozenColCount {number}: default 0\r\n   * defaultRowHeight {number}: default grid row height. default 40\r\n   * defaultColWidth {number}: default grid col width. default 80\r\n   * borderColor: border color\r\n   * parentElement {Element}: canvas parentElement\r\n   * theme {object}: theme\r\n   * -----\r\n   * </pre>\r\n   *\r\n   * @constructor\r\n   * @param  {Object} options Constructor options\r\n   */\n\t\tconstructor(options = {}) {\n\t\t\tsuper(adjustListGridOption(options));\n\t\t\tthis[_].header = options.header || [];\n\t\t\tthis[_].headerRowHeight = options.headerRowHeight || [];\n\t\t\tif (options.dataSource) {\n\t\t\t\t_setDataSource(this, options.dataSource);\n\t\t\t} else {\n\t\t\t\t_setRecords(this, options.records);\n\t\t\t}\n\t\t\t_refreshHeader(this);\n\t\t\tthis[_].sortState = {\n\t\t\t\tcol: -1,\n\t\t\t\torder: undefined\n\t\t\t};\n\t\t\tthis[_].gridCanvasHelper = new GridCanvasHelper(this);\n\t\t\tthis[_].theme = themes.of(options.theme);\n\t\t\tthis.invalidate();\n\t\t\tthis[_].handler.on(window, 'resize', () => {\n\t\t\t\tthis.updateSize();\n\t\t\t\tthis.updateScroll();\n\t\t\t\tthis.invalidate();\n\t\t\t});\n\t\t}\n\t\t/**\r\n   * header define\r\n   * @type {Array}\r\n   */\n\t\tget header() {\n\t\t\treturn this[_].header;\n\t\t}\n\t\t/**\r\n   * header define\r\n   * <pre>\r\n   * column options\r\n   * -----\r\n   * caption: header caption\r\n   * field: field name\r\n   * width: column width\r\n   * columnType: ColumnType\r\n   * action: ColumnAction\r\n   * style\r\n   * -----\r\n   *\r\n   * multiline header\r\n   * -----\r\n   * caption: header caption\r\n   * columns: columns define\r\n   * -----\r\n   * </pre>\r\n   *\r\n   * @type {Array}\r\n   */\n\t\tset header(header) {\n\t\t\tthis[_].header = header;\n\t\t\t_refreshHeader(this);\n\t\t}\n\t\tget records() {\n\t\t\treturn this[_].records;\n\t\t}\n\t\tset records(records) {\n\t\t\t_setRecords(this, records);\n\t\t\t_refreshRowCount(this);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tget dataSource() {\n\t\t\treturn this[_].dataSource;\n\t\t}\n\t\tset dataSource(dataSource) {\n\t\t\t_setDataSource(this, dataSource);\n\t\t\t_refreshRowCount(this);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tget theme() {\n\t\t\treturn this[_].theme;\n\t\t}\n\t\tset theme(theme) {\n\t\t\tthis[_].theme = themes.of(theme);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tget font() {\n\t\t\treturn super.font || this[_].gridCanvasHelper.theme.font;\n\t\t}\n\t\tset font(font) {\n\t\t\tsuper.font = font;\n\t\t}\n\t\tget underlayBackgroundColor() {\n\t\t\treturn super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\n\t\t}\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\n\t\t\tsuper.underlayBackgroundColor = underlayBackgroundColor;\n\t\t}\n\t\tget sortState() {\n\t\t\treturn this[_].sortState;\n\t\t}\n\t\tset sortState(sortState) {\n\t\t\tthis[_].sortState = sortState;\n\t\t}\n\t\tgetField(col) {\n\t\t\treturn this[_].headerMap.columns[col].field;\n\t\t}\n\t\tgetRowRecord(row) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\treturn undefined;\n\t\t\t} else {\n\t\t\t\treturn this[_].dataSource.get(_getRowRecordIndex(this, row));\n\t\t\t}\n\t\t}\n\t\tgetGridCanvasHelper() {\n\t\t\treturn this[_].gridCanvasHelper;\n\t\t}\n\t\tgetCopyCellValue(col, row) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { startCol, startRow } = _getHeaderCellRange(this, col, row);\n\t\t\t\tif (startCol !== col || startRow !== row) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _getCellValue(this, col, row);\n\t\t}\n\t\tonDrawCell(col, row, context) {\n\t\t\tconst column = this[_].headerMap.columns[col];\n\n\t\t\tlet draw;\n\t\t\tlet style;\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst hd = this[_].headerMap.getCell(col, row);\n\t\t\t\tdraw = hd.headerType.onDrawCell;\n\t\t\t\tstyle = hd.style;\n\t\t\t\t_updateRect(this, col, row, context);\n\t\t\t} else {\n\t\t\t\tdraw = column.columnType.onDrawCell;\n\t\t\t\tstyle = column.style;\n\t\t\t}\n\t\t\tconst cellValue = _getCellValue(this, col, row);\n\t\t\treturn _onDrawValue(this, cellValue, context, { col, row }, style, draw);\n\t\t}\n\t\tdoGetCellValue(col, row, valueCallback) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\t// nop\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tconst value = _getCellValue(this, col, row);\n\t\t\t\tif (isPromise(value)) {\n\t\t\t\t\t//\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvalueCallback(value);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tdoChangeValue(col, row, changeValueCallback) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\t// nop\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tconst before = _getCellValue(this, col, row);\n\t\t\t\tif (isPromise(before)) {\n\t\t\t\t\t//\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst after = changeValueCallback(before);\n\t\t\t\tif (after === undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn _setCellValue(this, col, row, after);\n\t\t\t}\n\t\t}\n\t\tbindEventsInternal() {\n\t\t\tthis.listen(EVENT_TYPE.SELECTED_CELL, (cell, selected) => {\n\t\t\t\tif (cell.row < this[_].headerMap.rowCount) {\n\t\t\t\t\tconst { startCol, endCol, startRow, endRow } = _getHeaderCellRange(this, cell.col, cell.row);\n\t\t\t\t\tif (startCol !== endCol || startRow !== endRow) {\n\t\t\t\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tgetMoveLeftColByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { startCol } = _getHeaderCellRange(this, col, row);\n\t\t\t\tcol = startCol;\n\t\t\t}\n\t\t\treturn super.getMoveLeftColByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetMoveRightColByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { endCol } = _getHeaderCellRange(this, col, row);\n\t\t\t\tcol = endCol;\n\t\t\t}\n\t\t\treturn super.getMoveRightColByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetMoveUpRowByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { startRow } = _getHeaderCellRange(this, col, row);\n\t\t\t\trow = startRow;\n\t\t\t}\n\t\t\treturn super.getMoveUpRowByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetMoveDownRowByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { endRow } = _getHeaderCellRange(this, col, row);\n\t\t\t\trow = endRow;\n\t\t\t}\n\t\t\treturn super.getMoveDownRowByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetOffsetInvalidateCells() {\n\t\t\treturn 1;\n\t\t}\n\t\tgetColumnIndexByField(field) {\n\t\t\tfor (const columnIndex in this[_].headerMap.columns) {\n\t\t\t\tif (this[_].headerMap.columns[columnIndex].field === field) {\n\t\t\t\t\treturn columnIndex - 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tfocusGridCell(field, index) {\n\t\t\tconst {\n\t\t\t\tstart: { col: startCol, row: startRow },\n\t\t\t\tend: { col: endCol, row: endRow }\n\t\t\t} = this.selection.range;\n\n\t\t\tconst newCol = this.getColumnIndexByField(field);\n\t\t\tconst newRow = index + this[_].headerMap.rowCount;\n\t\t\tthis.focusCell(newCol, newRow);\n\t\t\tthis.selection.select = {\n\t\t\t\tcol: newCol,\n\t\t\t\trow: newRow\n\t\t\t};\n\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\n\t\t\tthis.invalidateCell(newCol, newRow);\n\t\t}\n\t\tmakeVisibleGridCell(field, index) {\n\t\t\tthis.makeVisibleCell(this.getColumnIndexByField(field), index + this[_].headerMap.rowCount);\n\t\t}\n\t}\n\tmodule.exports = ListGrid;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns.js\":\n/*!********************!*\\\n  !*** ./columns.js ***!\n  \\********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst action = __webpack_require__(/*! ./columns/action */ \"./columns/action.js\");\n\tconst type = __webpack_require__(/*! ./columns/type */ \"./columns/type.js\");\n\tconst style = __webpack_require__(/*! ./columns/style */ \"./columns/style.js\");\n\n\t/**\r\n  * columns\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\taction,\n\t\ttype,\n\t\tstyle\n\t};\n}\n\n/***/ }),\n\n/***/ \"./columns/action.js\":\n/*!***************************!*\\\n  !*** ./columns/action.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseAction = __webpack_require__(/*! ./action/BaseAction */ \"./columns/action/BaseAction.js\");\n\tconst Action = __webpack_require__(/*! ./action/Action */ \"./columns/action/Action.js\");\n\tconst Editor = __webpack_require__(/*! ./action/Editor */ \"./columns/action/Editor.js\");\n\tconst CheckEditor = __webpack_require__(/*! ./action/CheckEditor */ \"./columns/action/CheckEditor.js\");\n\tconst ButtonAction = __webpack_require__(/*! ./action/ButtonAction */ \"./columns/action/ButtonAction.js\");\n\tconst SmallDialogInputEditor = __webpack_require__(/*! ./action/SmallDialogInputEditor */ \"./columns/action/SmallDialogInputEditor.js\");\n\tconst InlineInputEditor = __webpack_require__(/*! ./action/InlineInputEditor */ \"./columns/action/InlineInputEditor.js\");\n\tconst InlineMenuEditor = __webpack_require__(/*! ./action/InlineMenuEditor */ \"./columns/action/InlineMenuEditor.js\");\n\n\tclass ImmutableCheckEditor extends CheckEditor {\n\t\tget disabled() {\n\t\t\treturn this._disabled;\n\t\t}\n\t\tget readOnly() {\n\t\t\treturn this._readOnly;\n\t\t}\n\t}\n\tclass ImmutableInputEditor extends SmallDialogInputEditor {\n\t\tget disabled() {\n\t\t\treturn this._disabled;\n\t\t}\n\t\tget readOnly() {\n\t\t\treturn this._readOnly;\n\t\t}\n\t}\n\n\t/**\r\n  * column actions\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns.action\r\n  * @memberof cheetahGrid.columns\r\n  */\n\tconst action = {\n\t\tACTIONS: {\n\t\t\tCHECK: new ImmutableCheckEditor(),\n\t\t\tINPUT: new ImmutableInputEditor()\n\t\t},\n\t\tget BaseAction() {\n\t\t\treturn BaseAction;\n\t\t},\n\t\tget Editor() {\n\t\t\treturn Editor;\n\t\t},\n\t\tget Action() {\n\t\t\treturn Action;\n\t\t},\n\t\tget CheckEditor() {\n\t\t\treturn CheckEditor;\n\t\t},\n\t\tget ButtonAction() {\n\t\t\treturn ButtonAction;\n\t\t},\n\t\tget SmallDialogInputEditor() {\n\t\t\treturn SmallDialogInputEditor;\n\t\t},\n\t\tget InlineInputEditor() {\n\t\t\treturn InlineInputEditor;\n\t\t},\n\t\tget InlineMenuEditor() {\n\t\t\treturn InlineMenuEditor;\n\t\t},\n\t\tof(columnAction) {\n\t\t\tif (!columnAction) {\n\t\t\t\treturn action.ACTIONS.DEFAULT;\n\t\t\t} else if (typeof columnAction === 'string') {\n\t\t\t\treturn action.ACTIONS[columnAction.toUpperCase()] || action.of(null);\n\t\t\t} else {\n\t\t\t\treturn columnAction;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = action;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/Action.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Action.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst { bindCellClickAction, bindCellKeyAction } = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\n\tconst BaseAction = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\n\tclass Action extends BaseAction {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._action = option.action;\n\t\t}\n\t\tget action() {\n\t\t\treturn this._action;\n\t\t}\n\t\tset action(action) {\n\t\t\tthis._action = action;\n\t\t}\n\t\tclone() {\n\t\t\treturn new Action(this);\n\t\t}\n\t\tgetState(grid) {\n\t\t\treturn {};\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\tconst state = this.getState(grid);\n\t\t\tconst action = cell => {\n\t\t\t\tif (this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = grid.getRowRecord(cell.row);\n\t\t\t\tthis._action(record);\n\t\t\t};\n\n\t\t\treturn [...bindCellClickAction(grid, col, util, {\n\t\t\t\taction,\n\t\t\t\tmouseOver: e => {\n\t\t\t\t\tif (this.disabled) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tstate.mouseActiveCell = {\n\t\t\t\t\t\tcol: e.col,\n\t\t\t\t\t\trow: e.row\n\t\t\t\t\t};\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tmouseOut: e => {\n\t\t\t\t\tdelete state.mouseActiveCell;\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t}\n\t\t\t}), ...bindCellKeyAction(grid, col, util, {\n\t\t\t\taction\n\t\t\t})];\n\t\t}\n\t}\n\n\tmodule.exports = Action;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/BaseAction.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/BaseAction.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tclass BaseAction {\n\t\tconstructor(option = {}) {\n\t\t\tthis._disabled = option.disabled;\n\t\t}\n\t\tget disabled() {\n\t\t\treturn this._disabled;\n\t\t}\n\t\tset disabled(disabled) {\n\t\t\tthis._disabled = !!disabled;\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseAction(this);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = BaseAction;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/BaseInputEditor.js\":\n/*!*******************************************!*\\\n  !*** ./columns/action/BaseInputEditor.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst Editor = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\tconst { EVENT_TYPE: {\n\t\t\tINPUT_CELL,\n\t\t\tEDITABLEINPUT_CELL,\n\t\t\tSELECTED_CELL,\n\t\t\tDBLCLICK_CELL,\n\t\t\tDBLTAP_CELL,\n\t\t\tKEYDOWN,\n\t\t\tMODIFY_STATUS_EDITABLEINPUT_CELL,\n\t\t\tSCROLL\n\t\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\n\tconst KEY_ENTER = 13;\n\tconst KEY_F2 = 113;\n\n\tclass BaseInputEditor extends Editor {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseInputEditor(this);\n\t\t}\n\t\tonInputCellInternal(grid, cell, inputValue) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonOpenCellInternal(grid, cell) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonChangeSelectCellInternal(grid, cell, selected) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonSetInputAttrsInternal(grid, cell, input) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonGridScrollInternal(grid) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\tconst open = cell => {\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.onOpenCellInternal(grid, cell);\n\t\t\t};\n\n\t\t\tconst input = (cell, value) => {\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.onInputCellInternal(grid, cell, value);\n\t\t\t};\n\t\t\treturn [grid.listen(INPUT_CELL, e => {\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinput({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t}, e.value);\n\t\t\t}), grid.listen(DBLCLICK_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topen({\n\t\t\t\t\tcol: cell.col,\n\t\t\t\t\trow: cell.row\n\t\t\t\t});\n\t\t\t}), grid.listen(DBLTAP_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topen({\n\t\t\t\t\tcol: cell.col,\n\t\t\t\t\trow: cell.row\n\t\t\t\t});\n\t\t\t}), grid.listen(KEYDOWN, (keyCode, e) => {\n\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst sel = grid.selection.select;\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topen({\n\t\t\t\t\tcol: sel.col,\n\t\t\t\t\trow: sel.row\n\t\t\t\t});\n\t\t\t}), grid.listen(SELECTED_CELL, (cell, selected) => {\n\t\t\t\tthis.onChangeSelectCellInternal(grid, cell, selected);\n\t\t\t}), grid.listen(SCROLL, () => {\n\t\t\t\tthis.onGridScrollInternal(grid);\n\t\t\t}), grid.listen(EDITABLEINPUT_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}), grid.listen(MODIFY_STATUS_EDITABLEINPUT_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.onSetInputAttrsInternal(grid, {\n\t\t\t\t\tcol: cell.col,\n\t\t\t\t\trow: cell.row\n\t\t\t\t}, cell.input);\n\t\t\t})];\n\t\t}\n\t}\n\n\tmodule.exports = BaseInputEditor;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/ButtonAction.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/ButtonAction.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst Action = __webpack_require__(/*! ./Action */ \"./columns/action/Action.js\");\n\tconst { BUTTON_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\tclass ButtonAction extends Action {\n\t\tgetState(grid) {\n\t\t\tif (!grid[BUTTON_COLUMN_STATE_ID]) {\n\t\t\t\tsetReadonly(grid, BUTTON_COLUMN_STATE_ID, {});\n\t\t\t}\n\t\t\treturn grid[BUTTON_COLUMN_STATE_ID];\n\t\t}\n\t}\n\n\tmodule.exports = ButtonAction;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/CheckEditor.js\":\n/*!***************************************!*\\\n  !*** ./columns/action/CheckEditor.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { obj: { setReadonly }, isPromise } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst { bindCellClickAction, bindCellKeyAction } = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\tconst animate = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\n\tconst Editor = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\tconst { CHECK_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tconst KEY_ENTER = 13;\n\tconst KEY_SPACE = 32;\n\n\tfunction toggleValue(val) {\n\t\tif (typeof val === 'number') {\n\t\t\tif (val === 0) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t} else if (typeof val === 'string') {\n\t\t\tif (val === 'false') {\n\t\t\t\treturn 'true';\n\t\t\t} else if (val === 'off') {\n\t\t\t\treturn 'on';\n\t\t\t} else if (val.match(/^0+$/)) {\n\t\t\t\treturn val.replace(/^(0*)0$/, '$11');\n\t\t\t} else if (val === 'true') {\n\t\t\t\treturn 'false';\n\t\t\t} else if (val === 'on') {\n\t\t\t\treturn 'off';\n\t\t\t} else if (val.match(/^0*1$/)) {\n\t\t\t\treturn val.replace(/^(0*)1$/, '$10');\n\t\t\t}\n\t\t}\n\t\treturn !val;\n\t}\n\n\tclass CheckEditor extends Editor {\n\t\tclone() {\n\t\t\treturn new CheckEditor(this);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\tif (!grid[CHECK_COLUMN_STATE_ID]) {\n\t\t\t\tsetReadonly(grid, CHECK_COLUMN_STATE_ID, {});\n\t\t\t}\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID];\n\n\t\t\tconst action = cell => {\n\t\t\t\tconst key = cell.col + ':' + cell.row;\n\t\t\t\tconst blockKey = key + '::block';\n\t\t\t\tif (this.readOnly || this.disabled || state[blockKey]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst ret = grid.doChangeValue(cell.col, cell.row, toggleValue);\n\t\t\t\tif (ret) {\n\n\t\t\t\t\tconst onChange = () => {\n\t\t\t\t\t\t// checkbox animation\n\t\t\t\t\t\tanimate(200, point => {\n\t\t\t\t\t\t\tif (point === 1) {\n\t\t\t\t\t\t\t\tdelete state[key];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstate[key] = {\n\t\t\t\t\t\t\t\t\telapsed: point\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgrid.invalidateCell(cell.col, cell.row);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tif (isPromise(ret)) {\n\t\t\t\t\t\tstate[blockKey] = true;\n\t\t\t\t\t\tret.then(() => {\n\t\t\t\t\t\t\tdelete state[blockKey];\n\t\t\t\t\t\t\tonChange();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonChange();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn [...bindCellClickAction(grid, col, util, {\n\t\t\t\taction,\n\t\t\t\tmouseOver: e => {\n\t\t\t\t\tif (this.disabled) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tstate.mouseActiveCell = {\n\t\t\t\t\t\tcol: e.col,\n\t\t\t\t\t\trow: e.row\n\t\t\t\t\t};\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tmouseOut: e => {\n\t\t\t\t\tdelete state.mouseActiveCell;\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t}\n\t\t\t}), ...bindCellKeyAction(grid, col, util, {\n\t\t\t\taction: e => {\n\t\t\t\t\tconst selrange = grid.selection.range;\n\t\t\t\t\tconst col = grid.selection.select.col;\n\t\t\t\t\tfor (let row = selrange.start.row; row <= selrange.end.row; row++) {\n\t\t\t\t\t\tif (!util.isTarget(col, row)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\taction({\n\t\t\t\t\t\t\tcol,\n\t\t\t\t\t\t\trow\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tacceptKeys: [KEY_ENTER, KEY_SPACE]\n\t\t\t})];\n\t\t}\n\t}\n\n\tmodule.exports = CheckEditor;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/Editor.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Editor.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst BaseAction = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\tclass Editor extends BaseAction {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._readOnly = option.readOnly;\n\t\t}\n\t\tget readOnly() {\n\t\t\treturn this._readOnly;\n\t\t}\n\t\tset readOnly(readOnly) {\n\t\t\tthis._readOnly = !!readOnly;\n\t\t}\n\t\tclone() {\n\t\t\treturn new Editor(this);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = Editor;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/InlineInputEditor.js\":\n/*!*********************************************!*\\\n  !*** ./columns/action/InlineInputEditor.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst BaseInputEditor = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\nconst InlineInputElement = __webpack_require__(/*! ./internal/InlineInputElement */ \"./columns/action/internal/InlineInputElement.js\");\nconst { INLINE_INPUT_EDITOR_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachInput(grid, cell, editor, value) {\n\tif (!grid[_]) {\n\t\tsetReadonly(grid, _, {});\n\t}\n\tif (!globalElement) {\n\t\tglobalElement = new InlineInputElement();\n\t}\n\tconst state = grid[_];\n\tif (!state.element) {\n\t\tstate.element = globalElement;\n\t\tbindGridCount++;\n\t\tgrid.addDisposable({\n\t\t\tdispose() {\n\t\t\t\tbindGridCount--;\n\t\t\t\tif (!bindGridCount) {\n\t\t\t\t\tglobalElement.dispose();\n\t\t\t\t\tglobalElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachInput(grid) {\n\tif (globalElement) {\n\t\tglobalElement.detach();\n\t}\n}\nfunction doChangeValue(grid) {\n\tif (globalElement) {\n\t\tglobalElement.doChangeValue();\n\t}\n}\n\nclass InlineInputEditor extends BaseInputEditor {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._classList = option.classList;\n\t\tthis._type = option.type;\n\t}\n\tget classList() {\n\t\treturn this._classList && (__webpack_provided_Array_dot_isArray(this._classList) ? this._classList : [this._classList]);\n\t}\n\tset classList(classList) {\n\t\tthis._classList = classList;\n\t}\n\tget type() {\n\t\treturn this._type;\n\t}\n\tset type(type) {\n\t\tthis._type = type;\n\t}\n\tclone() {\n\t\treturn new InlineInputEditor(this);\n\t}\n\tonInputCellInternal(grid, cell, inputValue) {\n\t\tattachInput(grid, cell, this, inputValue);\n\t}\n\tonOpenCellInternal(grid, cell) {\n\t\tgrid.doGetCellValue(cell.col, cell.row, value => {\n\t\t\tattachInput(grid, cell, this, value);\n\t\t});\n\t}\n\tonChangeSelectCellInternal(grid, cell, selected) {\n\t\tdoChangeValue(grid);\n\t\tdetachInput(grid);\n\t}\n\tonGridScrollInternal(grid) {\n\t\tdoChangeValue(grid);\n\t\tdetachInput(grid);\n\t}\n\tonSetInputAttrsInternal(grid, cell, input) {\n\t\tInlineInputElement.setInputAttrs(this, grid, input);\n\t}\n}\n\nmodule.exports = InlineInputEditor;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/InlineMenuEditor.js\":\n/*!********************************************!*\\\n  !*** ./columns/action/InlineMenuEditor.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst { normalize } = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\nconst Editor = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\nconst { EVENT_TYPE: {\n\t\tSELECTED_CELL,\n\t\tCLICK_CELL,\n\t\tKEYDOWN,\n\t\tSCROLL,\n\t\tMOUSEOVER_CELL,\n\t\tMOUSEOUT_CELL,\n\t\tMOUSEMOVE_CELL\n\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\nconst InlineMenuElement = __webpack_require__(/*! ./internal/InlineMenuElement */ \"./columns/action/internal/InlineMenuElement.js\");\nconst { INLINE_MENU_EDITOR_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachMenu(grid, cell, editor, value) {\n\tif (!grid[_]) {\n\t\tsetReadonly(grid, _, {});\n\t}\n\tif (!globalElement) {\n\t\tglobalElement = new InlineMenuElement();\n\t}\n\tconst state = grid[_];\n\tif (!state.element) {\n\t\tstate.element = globalElement;\n\t\tbindGridCount++;\n\t\tgrid.addDisposable({\n\t\t\tdispose() {\n\t\t\t\tbindGridCount--;\n\t\t\t\tif (!bindGridCount) {\n\t\t\t\t\tglobalElement.dispose();\n\t\t\t\t\tglobalElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachMenu(grid) {\n\tif (globalElement) {\n\t\tglobalElement.detach();\n\t}\n}\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass InlineMenuEditor extends Editor {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._classList = option.classList;\n\t\tthis._options = normalize(option.options);\n\t}\n\tdispose() {}\n\tget classList() {\n\t\treturn this._classList && (__webpack_provided_Array_dot_isArray(this._classList) ? this._classList : [this._classList]);\n\t}\n\tset classList(classList) {\n\t\tthis._classList = classList;\n\t}\n\tget options() {\n\t\treturn this._options;\n\t}\n\tset options(options) {\n\t\tthis._options = normalize(options);\n\t}\n\tclone() {\n\t\treturn new InlineMenuEditor(this);\n\t}\n\tbindGridEvent(grid, col, util) {\n\t\tconst open = cell => {\n\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.doGetCellValue(cell.col, cell.row, value => {\n\t\t\t\tattachMenu(grid, cell, this, value);\n\t\t\t});\n\t\t};\n\n\t\treturn [grid.listen(CLICK_CELL, cell => {\n\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\topen({\n\t\t\t\tcol: cell.col,\n\t\t\t\trow: cell.row\n\t\t\t});\n\t\t}), grid.listen(KEYDOWN, (keyCode, e) => {\n\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst sel = grid.selection.select;\n\t\t\tif (!util.isTarget(sel.col, sel.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\topen({\n\t\t\t\tcol: sel.col,\n\t\t\t\trow: sel.row\n\t\t\t});\n\t\t}), grid.listen(SELECTED_CELL, (cell, selected) => {\n\t\t\tdetachMenu(grid);\n\t\t}), grid.listen(SCROLL, () => {\n\t\t\tdetachMenu(grid);\n\t\t}),\n\n\t\t// mouse move\n\t\tgrid.listen(MOUSEOVER_CELL, e => {\n\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t}), grid.listen(MOUSEMOVE_CELL, e => {\n\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!grid.getElement().style.cursor) {\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t\t}\n\t\t}), grid.listen(MOUSEOUT_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = '';\n\t\t})];\n\t}\n}\n\nmodule.exports = InlineMenuEditor;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/SmallDialogInputEditor.js\":\n/*!**************************************************!*\\\n  !*** ./columns/action/SmallDialogInputEditor.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst SmallDialogInputElement = __webpack_require__(/*! ./internal/SmallDialogInputElement */ \"./columns/action/internal/SmallDialogInputElement.js\");\nconst { SMALL_DIALOG_INPUT_EDITOR_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachInput(grid, cell, editor, value) {\n\tif (!grid[_]) {\n\t\tsetReadonly(grid, _, {});\n\t}\n\tif (!globalElement) {\n\t\tglobalElement = new SmallDialogInputElement();\n\t}\n\tconst state = grid[_];\n\tif (!state.element) {\n\t\tstate.element = globalElement;\n\t\tbindGridCount++;\n\t\tgrid.addDisposable({\n\t\t\tdispose() {\n\t\t\t\tbindGridCount--;\n\t\t\t\tif (!bindGridCount) {\n\t\t\t\t\tglobalElement.dispose();\n\t\t\t\t\tglobalElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachInput(grid) {\n\tif (globalElement) {\n\t\tglobalElement.detach();\n\t}\n}\nconst BaseInputEditor = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\nclass SmallDialogInputEditor extends BaseInputEditor {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._helperText = option.helperText;\n\t\tthis._inputValidator = option.inputValidator;\n\t\tthis._validator = option.validator;\n\t\tthis._classList = option.classList;\n\t\tthis._type = option.type;\n\t}\n\tdispose() {\n\t\tthis._inputDialogManager.dispose();\n\t\tthis._inputDialogManager = null;\n\t}\n\tget classList() {\n\t\treturn this._classList && (__webpack_provided_Array_dot_isArray(this._classList) ? this._classList : [this._classList]);\n\t}\n\tset classList(classList) {\n\t\tthis._classList = classList;\n\t}\n\tget type() {\n\t\treturn this._type;\n\t}\n\tset type(type) {\n\t\tthis._type = type;\n\t}\n\tget helperText() {\n\t\treturn this._helperText;\n\t}\n\tget inputValidator() {\n\t\treturn this._inputValidator;\n\t}\n\tget validator() {\n\t\treturn this._validator;\n\t}\n\tclone() {\n\t\treturn new SmallDialogInputEditor(this);\n\t}\n\tonInputCellInternal(grid, cell, inputValue) {\n\t\tattachInput(grid, cell, this, inputValue);\n\t}\n\tonOpenCellInternal(grid, cell) {\n\t\tgrid.doGetCellValue(cell.col, cell.row, value => {\n\t\t\tattachInput(grid, cell, this, value);\n\t\t});\n\t}\n\tonChangeSelectCellInternal(grid, cell, selected) {\n\t\t// cancel input\n\t\tdetachInput();\n\t}\n\tonGridScrollInternal(grid) {\n\t\t// cancel input\n\t\tdetachInput();\n\t}\n\tonSetInputAttrsInternal(grid, cell, input) {\n\t\tSmallDialogInputElement.setInputAttrs(this, grid, input);\n\t}\n}\n\nmodule.exports = SmallDialogInputEditor;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/actionBind.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/actionBind.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst { isPromise, event: { cancel } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst { EVENT_TYPE: {\n\t\t\tCLICK_CELL,\n\t\t\tMOUSEOVER_CELL,\n\t\t\tMOUSEOUT_CELL,\n\t\t\tKEYDOWN\n\t\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\n\tconst KEY_ENTER = 13;\n\tfunction bindCellClickAction(grid, col, util, {\n\t\taction,\n\t\tmouseOver,\n\t\tmouseOut\n\t}) {\n\t\treturn [\n\t\t// click\n\t\tgrid.listen(CLICK_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\taction({\n\t\t\t\tcol: e.col,\n\t\t\t\trow: e.row\n\t\t\t});\n\t\t}),\n\t\t// mouse move\n\t\tgrid.listen(MOUSEOVER_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (mouseOver) {\n\t\t\t\tif (!mouseOver({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t})) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t}), grid.listen(MOUSEOUT_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (mouseOut) {\n\t\t\t\tmouseOut({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t});\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = '';\n\t\t})];\n\t}\n\tfunction bindCellKeyAction(grid, col, util, { action, acceptKeys = [] }) {\n\t\tacceptKeys = [...acceptKeys, KEY_ENTER];\n\t\treturn [\n\t\t// enter key down\n\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\n\t\t\tif (acceptKeys.indexOf(keyCode) === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst sel = grid.selection.select;\n\t\t\tif (!util.isTarget(sel.col, sel.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isPromise(grid.getRowRecord(sel.row))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\taction({\n\t\t\t\tcol: sel.col,\n\t\t\t\trow: sel.row\n\t\t\t});\n\t\t\tcancel(e);\n\t\t})];\n\t}\n\n\tmodule.exports = {\n\t\tbindCellClickAction,\n\t\tbindCellKeyAction\n\t};\n}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineInputElement.css\":\n/*!********************************************************!*\\\n  !*** ./columns/action/internal/InlineInputElement.css ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./InlineInputElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineInputElement.js\":\n/*!*******************************************************!*\\\n  !*** ./columns/action/internal/InlineInputElement.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst {\n\tevent: {\n\t\tgetKeyCode,\n\t\tcancel: cancelEvent\n\t}\n} = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement\n} = __webpack_require__(/*! ./dom */ \"./columns/action/internal/dom.js\");\nconst KEY_ENTER = 13;\n\nconst CLASSNAME = 'cheetah-grid__inline-input';\n\nfunction createInputElement() {\n\t__webpack_require__(/*! ./InlineInputElement.css */ \"./columns/action/internal/InlineInputElement.css\");\n\treturn createElement('input', { classList: CLASSNAME });\n}\n\nfunction setInputAttrs(editor, grid, input) {\n\tconst { classList, type } = editor;\n\tif (classList) {\n\t\tinput.classList.add(...classList);\n\t}\n\tinput.type = type || '';\n}\n\nclass InlineInputElement {\n\tstatic setInputAttrs(...args) {\n\t\tsetInputAttrs(...args);\n\t}\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tthis._input = createInputElement();\n\t\tthis._bindInputEvents();\n\t}\n\tdispose() {\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._input = null;\n\t\tthis._beforePropEditor = null;\n\t}\n\tattach(grid, editor, col, row, value) {\n\t\tconst input = this._input;\n\t\tconst handler = this._handler;\n\n\t\tif (this._beforePropEditor) {\n\t\t\tconst { classList } = this._beforePropEditor;\n\t\t\tif (classList) {\n\t\t\t\tinput.classList.remove(...classList);\n\t\t\t}\n\t\t}\n\n\t\tinput.style.font = grid.font || '16px sans-serif';\n\n\t\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\t\tinput.style.top = rect.top.toFixed() + 'px';\n\t\tinput.style.left = rect.left.toFixed() + 'px';\n\t\tinput.style.width = rect.width.toFixed() + 'px';\n\t\tinput.style.height = rect.height.toFixed() + 'px';\n\t\telement.appendChild(input);\n\n\t\tsetInputAttrs(editor, grid, input);\n\t\tinput.value = value;\n\n\t\tthis._activeData = { grid, col, row, editor };\n\t\tthis._beforePropEditor = editor;\n\n\t\tconst focus = () => {\n\t\t\tinput.focus();\n\n\t\t\tconst end = input.value.length;\n\t\t\ttry {\n\t\t\t\tif (typeof input.selectionStart !== 'undefined') {\n\t\t\t\t\tinput.selectionStart = end;\n\t\t\t\t\tinput.selectionEnd = end;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t//ignore\n\t\t\t}\n\t\t\tif (document.selection) {\n\t\t\t\tconst range = input.createTextRange();\n\t\t\t\trange.collapse();\n\t\t\t\trange.moveEnd('character', end);\n\t\t\t\trange.moveStart('character', end);\n\t\t\t\trange.select();\n\t\t\t}\n\t\t};\n\t\thandler.tryWithOffEvents(input, 'blur', () => {\n\t\t\tfocus();\n\t\t});\n\t}\n\tdetach() {\n\t\tif (this._isActive()) {\n\t\t\tconst { grid, col, row } = this._activeData;\n\t\t\tconst input = this._input;\n\t\t\tthis._handler.tryWithOffEvents(input, 'blur', () => {\n\t\t\t\tinput.parentElement.removeChild(input);\n\t\t\t});\n\t\t\tgrid.invalidateCell(col, row);\n\t\t}\n\t\tthis._activeData = null;\n\t}\n\tdoChangeValue() {\n\t\tif (!this._isActive()) {\n\t\t\treturn;\n\t\t}\n\t\tconst input = this._input;\n\t\tconst value = input.value;\n\t\tconst { grid, col, row } = this._activeData;\n\t\tgrid.doChangeValue(col, row, () => value);\n\t}\n\t_isActive() {\n\t\tconst input = this._input;\n\t\tif (!input || !input.parentElement) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._activeData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t_bindInputEvents() {\n\t\tconst handler = this._handler;\n\t\tconst input = this._input;\n\t\tconst stopPropagationOnly = e => e.stopPropagation(); // grid\n\t\thandler.on(input, 'click', stopPropagationOnly);\n\t\thandler.on(input, 'mousedown', stopPropagationOnly);\n\t\thandler.on(input, 'touchstart', stopPropagationOnly);\n\t\thandler.on(input, 'dblclick', stopPropagationOnly);\n\n\t\thandler.on(input, 'compositionstart', e => {\n\t\t\tinput.classList.add('composition');\n\t\t});\n\t\thandler.on(input, 'compositionend', e => {\n\t\t\tinput.classList.remove('composition');\n\t\t});\n\t\thandler.on(input, 'keydown', e => {\n\t\t\tif (input.classList.contains('composition')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (getKeyCode(e) === KEY_ENTER) {\n\t\t\t\tif (!this._isActive()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst { grid } = this._activeData;\n\n\t\t\t\tthis.doChangeValue();\n\t\t\t\tif (grid) {\n\t\t\t\t\tgrid.focus();\n\t\t\t\t}\n\t\t\t\tthis.detach();\n\t\t\t\tcancelEvent(e);\n\t\t\t}\n\t\t});\n\t\thandler.on(input, 'blur', e => {\n\t\t\tthis.doChangeValue();\n\t\t\tthis.detach();\n\t\t});\n\t}\n}\n\nmodule.exports = InlineInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineMenuElement.css\":\n/*!*******************************************************!*\\\n  !*** ./columns/action/internal/InlineMenuElement.css ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./InlineMenuElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineMenuElement.js\":\n/*!******************************************************!*\\\n  !*** ./columns/action/internal/InlineMenuElement.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst {\n\tisDef,\n\tevent: {\n\t\tgetKeyCode,\n\t\tcancel: cancelEvent\n\t}\n} = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement,\n\tappendHtml,\n\tempty,\n\tdisableFocus,\n\tisFocusable,\n\tfindPrevSiblingFocusable,\n\tfindNextSiblingFocusable\n} = __webpack_require__(/*! ./dom */ \"./columns/action/internal/dom.js\");\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ESC = 27;\n\nconst CLASSNAME = 'cheetah-grid__inline-menu';\nconst ITEM_CLASSNAME = CLASSNAME + '__menu-item';\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\nconst EMPTY_ITEM_CLASSNAME = ITEM_CLASSNAME + '--empty';\n\nfunction findItemParents(target) {\n\tlet el = target;\n\twhile (!el.classList.contains(ITEM_CLASSNAME)) {\n\t\tel = el.parentElement;\n\t\tif (!el || el.classList.contains(CLASSNAME)) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\treturn el;\n}\n\nfunction createMenuElement() {\n\t__webpack_require__(/*! ./InlineMenuElement.css */ \"./columns/action/internal/InlineMenuElement.css\");\n\treturn createElement('ul', { classList: CLASSNAME });\n}\nfunction attachElement(element, rect, menu) {\n\tmenu.style.top = rect.top.toFixed() + 'px';\n\tmenu.style.left = rect.left.toFixed() + 'px';\n\tmenu.style.width = rect.width.toFixed() + 'px';\n\tmenu.style['line-height'] = rect.height.toFixed() + 'px';\n\telement.appendChild(menu);\n}\n\nfunction optionToLi({ classList, caption, value, html }, index) {\n\tconst item = createElement('li', { classList: ITEM_CLASSNAME });\n\titem.tabIndex = 0;\n\titem.dataset.valueindex = index;\n\tif (classList) {\n\t\titem.classList.add(...(__webpack_provided_Array_dot_isArray(classList) ? classList : [classList]));\n\t}\n\n\tif (caption) {\n\t\tconst span = createElement('span', { text: caption });\n\t\titem.appendChild(span);\n\t} else if (html) {\n\t\tappendHtml(item, html);\n\t}\n\n\tif (value === '' || !isDef(value)) {\n\t\titem.classList.add(EMPTY_ITEM_CLASSNAME);\n\t}\n\n\treturn item;\n}\n\nfunction openMenu(grid, editor, col, row, value, menu) {\n\tconst { options, classList } = editor;\n\tmenu.classList.remove(SHOWN_CLASSNAME);\n\tmenu.classList.add(HIDDEN_CLASSNAME);\n\tempty(menu);\n\tmenu.style.font = grid.font || '16px sans-serif';\n\tlet emptyItemEl = null;\n\tlet valueItemEl = null;\n\n\toptions.forEach((option, i) => {\n\t\tconst item = optionToLi(option, i);\n\t\tmenu.appendChild(item);\n\t\tif (option.value === value) {\n\t\t\tvalueItemEl = item;\n\t\t\titem.dataset.select = true;\n\t\t}\n\t\tif (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\n\t\t\temptyItemEl = item;\n\t\t}\n\t});\n\tconst focusEl = valueItemEl || emptyItemEl || menu.children[0];\n\tif (classList) {\n\t\tmenu.classList.add(...classList);\n\t}\n\tconst children = Array.prototype.slice.call(menu.children, 0);\n\tconst focusIndex = children.indexOf(focusEl);\n\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\n\t// Cover the right line\n\trect.width++;\n\n\t// append for calculation\n\tattachElement(element, rect, menu);\n\n\t// Make the selection item at the middle\n\tlet offset = 0;\n\tlet allHeight = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst offsetHeight = children[i].offsetHeight;\n\t\tif (i < focusIndex) {\n\t\t\toffset += offsetHeight;\n\t\t}\n\t\tallHeight += offsetHeight;\n\t}\n\trect.offsetTop(-offset);\n\tmenu.style['transform-origin'] = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\n\tattachElement(element, rect, menu);\n\n\t// Control not to overflow the screen range\n\tconst menuClientRect = menu.getBoundingClientRect();\n\tconst scaleDiff = (allHeight - menuClientRect.height) / 2;\n\tconst orgMenuTop = menuClientRect.top - scaleDiff;\n\tlet menuTop = orgMenuTop;\n\tconst menuBottom = menuTop + allHeight;\n\tconst winBottom = window.innerHeight;\n\tconst winMargin = 20;\n\tif (menuBottom > winBottom - winMargin) {\n\t\tconst diff = menuBottom - winBottom + winMargin;\n\t\tmenuTop -= diff;\n\t}\n\tif (menuTop < 0 /*winTop*/ + winMargin) {\n\t\tmenuTop = winMargin;\n\t}\n\tif (menuTop !== orgMenuTop) {\n\t\trect.offsetTop(-(orgMenuTop - menuTop));\n\t\t// re update\n\t\tattachElement(element, rect, menu);\n\t}\n\n\tif (focusEl) {\n\t\tfocusEl.focus();\n\t}\n\tmenu.classList.remove(HIDDEN_CLASSNAME);\n\tmenu.classList.add(SHOWN_CLASSNAME);\n}\n\nfunction closeMenu(grid, col, row, menu, valueindex) {\n\tmenu.classList.remove(SHOWN_CLASSNAME);\n\tmenu.classList.add(HIDDEN_CLASSNAME);\n\tdisableFocus(menu);\n}\n\nclass InlineMenuElement {\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tthis._menu = createMenuElement();\n\t\tthis._bindMenuEvents();\n\t}\n\tdispose() {\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._menu = null;\n\t\tthis._beforePropEditor = null;\n\t}\n\tattach(grid, editor, col, row, value) {\n\t\tconst menu = this._menu;\n\n\t\tif (this._beforePropEditor) {\n\t\t\tconst { classList } = this._beforePropEditor;\n\t\t\tif (classList) {\n\t\t\t\tmenu.classList.remove(...classList);\n\t\t\t}\n\t\t}\n\n\t\topenMenu(grid, editor, col, row, value, menu);\n\t\tthis._activeData = { grid, col, row, editor };\n\t\tthis._beforePropEditor = editor;\n\t}\n\tdetach(gridFocus, valueindex) {\n\t\tif (this._isActive()) {\n\t\t\tconst { grid, col, row } = this._activeData;\n\t\t\tconst menu = this._menu;\n\t\t\tcloseMenu(grid, col, row, menu, valueindex);\n\n\t\t\tgrid.invalidateCell(col, row);\n\t\t\tif (gridFocus) {\n\t\t\t\tgrid.focus();\n\t\t\t}\n\t\t}\n\t\tthis._activeData = null;\n\t}\n\t_doChangeValue(valueindex) {\n\t\tif (!this._isActive()) {\n\t\t\treturn;\n\t\t}\n\t\tconst { grid, col, row, editor } = this._activeData;\n\t\tconst value = editor.options[valueindex].value;\n\t\tgrid.doChangeValue(col, row, () => value);\n\t}\n\t_isActive() {\n\t\tconst menu = this._menu;\n\t\tif (!menu || !menu.parentElement) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._activeData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t_bindMenuEvents() {\n\t\tconst handler = this._handler;\n\t\tconst menu = this._menu;\n\n\t\tconst stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\t\thandler.on(menu, 'mousedown', stopPropagationOnly);\n\t\thandler.on(menu, 'touchstart', stopPropagationOnly);\n\t\thandler.on(menu, 'dblclick', stopPropagationOnly);\n\n\t\thandler.on(menu, 'click', e => {\n\t\t\te.stopPropagation();\n\t\t\tconst item = findItemParents(e.target);\n\t\t\tif (!item) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst valueindex = item.dataset.valueindex;\n\t\t\tthis._doChangeValue(item.dataset.valueindex);\n\t\t\tthis.detach(true, valueindex);\n\t\t});\n\t\thandler.on(menu, 'keydown', e => {\n\t\t\tconst item = findItemParents(e.target);\n\t\t\tif (!item) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst keyCode = getKeyCode(e);\n\t\t\tif (keyCode === KEY_ENTER) {\n\t\t\t\tconst valueindex = item.dataset.valueindex;\n\t\t\t\tthis._doChangeValue(valueindex);\n\t\t\t\tthis.detach(true, valueindex);\n\t\t\t\tcancelEvent(e);\n\t\t\t} else if (keyCode === KEY_ESC) {\n\t\t\t\tthis.detach(true);\n\t\t\t\tcancelEvent(e);\n\t\t\t} else if (keyCode === KEY_UP) {\n\t\t\t\tconst n = findPrevSiblingFocusable(item);\n\t\t\t\tif (n) {\n\t\t\t\t\tn.focus();\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t}\n\t\t\t} else if (keyCode === KEY_DOWN) {\n\t\t\t\tconst n = findNextSiblingFocusable(item);\n\t\t\t\tif (n) {\n\t\t\t\t\tn.focus();\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t}\n\t\t\t} else if (keyCode === KEY_TAB) {\n\t\t\t\tif (!e.shiftKey) {\n\t\t\t\t\tif (!findNextSiblingFocusable(item)) {\n\t\t\t\t\t\tlet n = menu.querySelector('.' + ITEM_CLASSNAME);\n\t\t\t\t\t\tif (!isFocusable(n)) {\n\t\t\t\t\t\t\tn = findNextSiblingFocusable(n);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (n) {\n\t\t\t\t\t\t\tn.focus();\n\t\t\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!findPrevSiblingFocusable(item)) {\n\t\t\t\t\t\tconst items = menu.querySelectorAll('.' + ITEM_CLASSNAME);\n\t\t\t\t\t\tlet n = items[items.length - 1];\n\t\t\t\t\t\tif (!isFocusable(n)) {\n\t\t\t\t\t\t\tn = findPrevSiblingFocusable(n);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (n) {\n\t\t\t\t\t\t\tn.focus();\n\t\t\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = InlineMenuElement;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/internal/SmallDialogInputElement.css\":\n/*!*************************************************************!*\\\n  !*** ./columns/action/internal/SmallDialogInputElement.css ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./SmallDialogInputElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/SmallDialogInputElement.js\":\n/*!************************************************************!*\\\n  !*** ./columns/action/internal/SmallDialogInputElement.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst {\n\tevent: {\n\t\tgetKeyCode,\n\t\tcancel: cancelEvent\n\t}\n} = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement\n} = __webpack_require__(/*! ./dom */ \"./columns/action/internal/dom.js\");\n\nconst CLASSNAME = 'cheetah-grid__small-dialog-input';\nconst INPUT_CLASSNAME = CLASSNAME + '__input';\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\n\nconst KEY_ENTER = 13;\nconst KEY_ESC = 27;\n\nfunction _focus(input, handler) {\n\tconst focus = () => {\n\t\tinput.focus();\n\n\t\tconst end = input.value.length;\n\t\ttry {\n\t\t\tif (typeof input.selectionStart !== 'undefined') {\n\t\t\t\tinput.selectionStart = end;\n\t\t\t\tinput.selectionEnd = end;\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t//ignore\n\t\t}\n\t\tif (document.selection) {\n\t\t\tconst range = input.createTextRange();\n\t\t\trange.collapse();\n\t\t\trange.moveEnd('character', end);\n\t\t\trange.moveStart('character', end);\n\t\t\trange.select();\n\t\t}\n\t};\n\thandler.tryWithOffEvents(input, 'blur', () => {\n\t\tfocus();\n\t});\n}\n\nfunction createDialogElement() {\n\t__webpack_require__(/*! ./SmallDialogInputElement.css */ \"./columns/action/internal/SmallDialogInputElement.css\");\n\tconst element = createElement('div', { classList: [CLASSNAME, HIDDEN_CLASSNAME] });\n\tconst input = createElement('input', { classList: INPUT_CLASSNAME });\n\tinput.readonly = true;\n\tinput.tabIndex = -1;\n\telement.appendChild(input);\n\treturn element;\n}\n\nfunction bindProps(grid, dialog, input, editor) {\n\tconst { classList, helperText } = editor;\n\tif (classList) {\n\t\tdialog.classList.add(...classList);\n\t}\n\tif (helperText && typeof helperText !== 'function') {\n\t\tdialog.dataset.helperText = helperText;\n\t}\n\tsetInputAttrs(editor, grid, input);\n}\n\nfunction unbindProps(grid, dialog, input, editor) {\n\tconst { classList } = editor;\n\tif (classList) {\n\t\tdialog.classList.remove(...classList);\n\t}\n\tdelete dialog.dataset.helperText;\n\tinput.type = '';\n}\n\nfunction setInputAttrs(editor, grid, input) {\n\tconst { type } = editor;\n\tinput.type = type || '';\n}\n\nclass SmallDialogInputElement {\n\tstatic setInputAttrs(...args) {\n\t\tsetInputAttrs(...args);\n\t}\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tthis._dialog = createDialogElement();\n\t\tthis._input = this._dialog.querySelector('.' + INPUT_CLASSNAME);\n\t\tthis._bindDialogEvents();\n\t}\n\tdispose() {\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._dialog = null;\n\t\tthis._input = null;\n\t\tthis._beforePropEditor = null;\n\t}\n\tattach(grid, editor, col, row, value) {\n\t\tconst handler = this._handler;\n\t\tconst dialog = this._dialog;\n\t\tconst input = this._input;\n\n\t\tif (this._beforePropEditor) {\n\t\t\tunbindProps(grid, dialog, input, this._beforePropEditor);\n\t\t}\n\n\t\tdelete dialog.dataset.errorMessage;\n\t\tdialog.classList.remove(SHOWN_CLASSNAME);\n\t\tdialog.classList.add(HIDDEN_CLASSNAME);\n\t\tinput.readonly = false;\n\t\tinput.tabIndex = 0;\n\t\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\t\tdialog.style.top = rect.top.toFixed() + 'px';\n\t\tdialog.style.left = rect.left.toFixed() + 'px';\n\t\tdialog.style.width = rect.width.toFixed() + 'px';\n\t\tdialog.style.height = rect.height.toFixed() + 'px';\n\t\telement.appendChild(dialog);\n\n\t\tinput.value = value;\n\t\tinput.style.font = grid.font || '16px sans-serif';\n\t\tconst activeData = { grid, col, row, editor };\n\t\tthis._onInputValue(input, activeData);\n\t\t_focus(input, handler);\n\t\tdialog.classList.add(SHOWN_CLASSNAME);\n\t\tdialog.classList.remove(HIDDEN_CLASSNAME);\n\t\tinput.readonly = true;\n\n\t\tbindProps(grid, dialog, input, editor);\n\n\t\tthis._activeData = activeData;\n\t\tthis._beforePropEditor = editor;\n\t}\n\tdetach(gridFocus) {\n\t\tif (this._isActive()) {\n\t\t\tconst dialog = this._dialog;\n\t\t\tconst input = this._input;\n\n\t\t\tdialog.classList.remove(SHOWN_CLASSNAME);\n\t\t\tdialog.classList.add(HIDDEN_CLASSNAME);\n\t\t\tinput.readonly = false;\n\t\t\tinput.tabIndex = -1;\n\n\t\t\tconst { grid, col, row } = this._activeData;\n\n\t\t\tgrid.invalidateCell(col, row);\n\t\t\tif (gridFocus) {\n\t\t\t\tgrid.focus();\n\t\t\t}\n\t\t}\n\t\tthis._activeData = null;\n\t\tthis._beforeValue = null;\n\t}\n\t_doChangeValue() {\n\t\tif (!this._isActive()) {\n\t\t\treturn false;\n\t\t}\n\t\tconst input = this._input;\n\t\tconst value = input.value;\n\t\tif (!this._validate(value)) {\n\t\t\treturn false;\n\t\t}\n\t\tconst { grid, col, row } = this._activeData;\n\t\tgrid.doChangeValue(col, row, () => value);\n\t\treturn true;\n\t}\n\t_isActive() {\n\t\tconst dialog = this._dialog;\n\t\tif (!dialog || !dialog.parentElement) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._activeData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t_bindDialogEvents() {\n\t\tconst handler = this._handler;\n\t\tconst dialog = this._dialog;\n\t\tconst input = this._input;\n\t\tconst stopPropagationOnly = e => e.stopPropagation(); // grid\n\t\thandler.on(dialog, 'click', stopPropagationOnly);\n\t\thandler.on(dialog, 'dblclick', stopPropagationOnly);\n\t\thandler.on(dialog, 'mousedown', stopPropagationOnly);\n\t\thandler.on(dialog, 'touchstart', stopPropagationOnly);\n\n\t\thandler.on(input, 'compositionstart', e => {\n\t\t\tinput.classList.add('composition');\n\t\t});\n\t\thandler.on(input, 'compositionend', e => {\n\t\t\tinput.classList.remove('composition');\n\t\t\tthis._onInputValue(input);\n\t\t});\n\t\tconst onKeyupAndPress = e => {\n\t\t\tif (input.classList.contains('composition')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._onInputValue(input);\n\t\t};\n\t\thandler.on(input, 'keyup', onKeyupAndPress);\n\t\thandler.on(input, 'keypress', onKeyupAndPress);\n\t\thandler.on(input, 'keydown', e => {\n\t\t\tif (input.classList.contains('composition')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst keyCode = getKeyCode(e);\n\t\t\tif (keyCode === KEY_ESC) {\n\t\t\t\tthis.detach(true);\n\t\t\t\tcancelEvent(e);\n\t\t\t} else if (keyCode === KEY_ENTER) {\n\t\t\t\tif (this._doChangeValue()) {\n\t\t\t\t\tthis.detach(true);\n\t\t\t\t}\n\t\t\t\tcancelEvent(e);\n\t\t\t} else {\n\t\t\t\tthis._onInputValue(input);\n\t\t\t}\n\t\t});\n\t}\n\t_onInputValue(input, activeData) {\n\t\tconst before = this._beforeValue;\n\t\tconst value = input.value;\n\t\tif (before !== value) {\n\t\t\tthis._onInputValueChange(value, before, activeData);\n\t\t}\n\t\tthis._beforeValue = value;\n\t}\n\t_onInputValueChange(after, before, activeData) {\n\t\tactiveData = activeData || this._activeData;\n\t\tconst dialog = this._dialog;\n\t\tconst { grid, col, row, editor } = activeData;\n\t\tif (typeof editor.helperText === 'function') {\n\t\t\tconst helperText = editor.helperText(after, { grid, col, row });\n\t\t\tif (helperText) {\n\t\t\t\tdialog.dataset.helperText = helperText;\n\t\t\t} else {\n\t\t\t\tdelete dialog.dataset.helperText;\n\t\t\t}\n\t\t}\n\t\tif ('errorMessage' in dialog.dataset) {\n\t\t\tthis._validate(after, true);\n\t\t}\n\t}\n\t_validate(value, inputOnly) {\n\t\tconst dialog = this._dialog;\n\t\tconst { grid, col, row, editor } = this._activeData;\n\t\tlet message = null;\n\t\tif (editor.inputValidator) {\n\t\t\tmessage = editor.inputValidator(value, { grid, col, row });\n\t\t}\n\t\tif (!message && editor.validator && !inputOnly) {\n\t\t\tmessage = editor.validator(value, { grid, col, row });\n\t\t}\n\t\tif (message) {\n\t\t\tdialog.dataset.errorMessage = message;\n\t\t\treturn false;\n\t\t} else {\n\t\t\tdelete dialog.dataset.errorMessage;\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nmodule.exports = SmallDialogInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/dom.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/internal/dom.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { isDef } = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nfunction createElement(tagName, { classList, text, html } = {}) {\n\tconst element = document.createElement(tagName);\n\tif (classList) {\n\t\tif (__webpack_provided_Array_dot_isArray(classList)) {\n\t\t\telement.classList.add(...classList);\n\t\t} else {\n\t\t\telement.classList.add(classList);\n\t\t}\n\t}\n\tif (text) {\n\t\telement.textContent = text;\n\t} else if (html) {\n\t\telement.innerHTML = html;\n\t}\n\treturn element;\n}\n\nfunction empty(dom) {\n\tlet c;\n\twhile (c = dom.firstChild) {\n\t\tdom.removeChild(c);\n\t}\n}\nfunction isNode(arg) {\n\treturn !!(arg.nodeType && arg.nodeName);\n}\nfunction toNode(arg) {\n\tif (isNode(arg)) {\n\t\treturn arg;\n\t}\n\tconst dom = createElement('div', { html: arg });\n\treturn Array.prototype.slice.call(dom.childNodes);\n}\nfunction toNodeList(arg) {\n\tif (window.jQuery && arg instanceof window.jQuery) {\n\t\treturn Array.prototype.map.call(arg, a => a);\n\t}\n\tif (__webpack_provided_Array_dot_isArray(arg)) {\n\t\treturn arg.map(toNode);\n\t}\n\treturn [toNode(arg)];\n}\n\nfunction appendHtml(dom, inner) {\n\ttoNodeList(inner).forEach(node => {\n\t\tdom.appendChild(node);\n\t});\n}\n\nfunction disableFocus(el) {\n\tel.dataset.disableBeforeTabIndex = el.tabIndex;\n\tel.tabIndex = -1;\n\tArray.prototype.slice.call(el.children, 0).forEach(disableFocus);\n}\nfunction enableFocus(el) {\n\tif ('disableBeforeTabIndex' in el.dataset) {\n\t\tel.tabIndex = el.dataset.disableBeforeTabIndex;\n\t}\n\tArray.prototype.slice.call(el.children, 0).forEach(enableFocus);\n}\n\nfunction isFocusable(el) {\n\treturn isDef(el.tabIndex) && el.tabIndex > -1;\n}\nfunction findPrevSiblingFocusable(el) {\n\tlet n = el.previousSibling;\n\twhile (n && !isFocusable(n)) {\n\t\tn = n.previousSibling;\n\t}\n\treturn n;\n}\nfunction findNextSiblingFocusable(el) {\n\tlet n = el.nextSibling;\n\twhile (n && !isFocusable(n)) {\n\t\tn = n.nextSibling;\n\t}\n\treturn n;\n}\n\nmodule.exports = {\n\tcreateElement,\n\tempty,\n\tisNode,\n\ttoNode,\n\ttoNodeList,\n\tappendHtml,\n\tdisableFocus,\n\tenableFocus,\n\tisFocusable,\n\tfindPrevSiblingFocusable,\n\tfindNextSiblingFocusable\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/style.js\":\n/*!**************************!*\\\n  !*** ./columns/style.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./style/BaseStyle */ \"./columns/style/BaseStyle.js\");\n\tconst Style = __webpack_require__(/*! ./style/Style */ \"./columns/style/Style.js\");\n\tconst NumberStyle = __webpack_require__(/*! ./style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\tconst CheckStyle = __webpack_require__(/*! ./style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\tconst ButtonStyle = __webpack_require__(/*! ./style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\tconst ImageStyle = __webpack_require__(/*! ./style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\tconst IconStyle = __webpack_require__(/*! ./style/IconStyle */ \"./columns/style/IconStyle.js\");\n\tconst PercentCompleteBarStyle = __webpack_require__(/*! ./style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\n\t/**\r\n  * column styles\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns.style\r\n  * @memberof cheetahGrid.columns\r\n  */\n\tconst style = {\n\t\tget EVENT_TYPE() {\n\t\t\treturn BaseStyle.EVENT_TYPE;\n\t\t},\n\t\tget BaseStyle() {\n\t\t\treturn BaseStyle;\n\t\t},\n\t\tget Style() {\n\t\t\treturn Style;\n\t\t},\n\t\tget NumberStyle() {\n\t\t\treturn NumberStyle;\n\t\t},\n\t\tget CheckStyle() {\n\t\t\treturn CheckStyle;\n\t\t},\n\t\tget ButtonStyle() {\n\t\t\treturn ButtonStyle;\n\t\t},\n\t\tget ImageStyle() {\n\t\t\treturn ImageStyle;\n\t\t},\n\t\tget IconStyle() {\n\t\t\treturn IconStyle;\n\t\t},\n\t\tget PercentCompleteBarStyle() {\n\t\t\treturn PercentCompleteBarStyle;\n\t\t},\n\t\tof(columnStyle, record, StyleClass) {\n\t\t\tif (columnStyle) {\n\t\t\t\tif (columnStyle instanceof Style) {\n\t\t\t\t\treturn columnStyle;\n\t\t\t\t} else if (typeof columnStyle === 'function') {\n\t\t\t\t\treturn style.of(columnStyle(record), record, StyleClass);\n\t\t\t\t} else if (record && columnStyle in record) {\n\t\t\t\t\treturn style.of(record[columnStyle], record, StyleClass);\n\t\t\t\t}\n\t\t\t\treturn new StyleClass(columnStyle);\n\t\t\t} else {\n\t\t\t\treturn StyleClass.DEFAULT;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = style;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/BaseStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/BaseStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst EventTarget = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\n\tconst EVENT_TYPE = {\n\t\tCHANGE_STYLE: 'change_style'\n\t};\n\n\tlet defaultStyle;\n\tclass BaseStyle extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n\t\t}\n\t\tconstructor({\n\t\t\tbgColor\n\t\t} = {}) {\n\t\t\tsuper();\n\t\t\tthis._bgColor = bgColor;\n\t\t}\n\t\tget bgColor() {\n\t\t\treturn this._bgColor;\n\t\t}\n\t\tset bgColor(bgColor) {\n\t\t\tthis._bgColor = bgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tdoChangeStyle() {\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseStyle(this);\n\t\t}\n\t}\n\tmodule.exports = BaseStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/BranchGraphStyle.js\":\n/*!*******************************************!*\\\n  !*** ./columns/style/BranchGraphStyle.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst BaseStyle = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\nlet defaultStyle;\nfunction adj(style) {\n\tconst { textAlign = 'center' } = style;\n\tstyle.textAlign = textAlign;\n\treturn style;\n}\nconst DEFAULT_BRANCH_COLORS = (name, index) => {\n\tswitch (index % 3) {\n\t\tcase 0:\n\t\t\treturn '#979797';\n\t\tcase 1:\n\t\t\treturn '#008fb5';\n\t\tcase 2:\n\t\t\treturn '#f1c109';\n\t\tdefault:\n\t}\n\treturn '#979797';\n};\nclass BranchGraphStyle extends BaseStyle {\n\tstatic get DEFAULT() {\n\t\treturn defaultStyle ? defaultStyle : defaultStyle = new BranchGraphStyle();\n\t}\n\tconstructor(style = {}) {\n\t\tsuper(adj(style));\n\t\tthis._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\n\t\tthis._margin = style.margin || 4;\n\t\tthis._circleSize = style.circleSize || 16;\n\t\tthis._branchLineWidth = style.branchLineWidth || 4;\n\t\tthis._mergeStyle = style.mergeStyle === 'straight' ? 'straight' : 'bezier';\n\t}\n\tget branchColors() {\n\t\treturn this._branchColors;\n\t}\n\tset branchColors(branchColors) {\n\t\tthis._branchColors = branchColors;\n\t\tthis.doChangeStyle();\n\t}\n\tget margin() {\n\t\treturn this._margin;\n\t}\n\tset margin(margin) {\n\t\tthis._margin = margin;\n\t\tthis.doChangeStyle();\n\t}\n\tget circleSize() {\n\t\treturn this._circleSize;\n\t}\n\tset circleSize(circleSize) {\n\t\tthis._circleSize = circleSize;\n\t\tthis.doChangeStyle();\n\t}\n\tget branchLineWidth() {\n\t\treturn this._branchLineWidth;\n\t}\n\tset branchLineWidth(branchLineWidth) {\n\t\tthis._branchLineWidth = branchLineWidth;\n\t\tthis.doChangeStyle();\n\t}\n\tget mergeStyle() {\n\t\treturn this._mergeStyle;\n\t}\n\tset mergeStyle(mergeStyle) {\n\t\tthis._mergeStyle = mergeStyle;\n\t\tthis.doChangeStyle();\n\t}\n\tclone() {\n\t\treturn new BranchGraphStyle(this);\n\t}\n}\nmodule.exports = BranchGraphStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/ButtonStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/ButtonStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass ButtonStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new ButtonStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tconst {\n\t\t\t\tbuttonBgColor\n\t\t\t} = style;\n\t\t\tthis._buttonBgColor = buttonBgColor;\n\t\t}\n\t\tget buttonBgColor() {\n\t\t\treturn this._buttonBgColor;\n\t\t}\n\t\tset buttonBgColor(buttonBgColor) {\n\t\t\tthis._buttonBgColor = buttonBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new ButtonStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = ButtonStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/CheckStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/CheckStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst StdBaseStyle = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass CheckStyle extends StdBaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new CheckStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tconst {\n\t\t\t\tuncheckBgColor,\n\t\t\t\tcheckBgColor,\n\t\t\t\tborderColor\n\t\t\t} = style;\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\n\t\t\tthis._checkBgColor = checkBgColor;\n\t\t\tthis._borderColor = borderColor;\n\t\t}\n\t\tget uncheckBgColor() {\n\t\t\treturn this._uncheckBgColor;\n\t\t}\n\t\tset uncheckBgColor(uncheckBgColor) {\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget checkBgColor() {\n\t\t\treturn this._checkBgColor;\n\t\t}\n\t\tset checkBgColor(checkBgColor) {\n\t\t\tthis._checkBgColor = checkBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget borderColor() {\n\t\t\treturn this._borderColor;\n\t\t}\n\t\tset borderColor(borderColor) {\n\t\t\tthis._borderColor = borderColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new CheckStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = CheckStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/IconStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/IconStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass IconStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new IconStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t}\n\t\tclone() {\n\t\t\treturn new IconStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = IconStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/ImageStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/ImageStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst StdBaseStyle = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\tlet defaultStyle;\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tclass ImageStyle extends StdBaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new ImageStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tthis._imageSizing = style.imageSizing;\n\t\t\tthis._margin = style.margin || 4;\n\t\t}\n\t\tget imageSizing() {\n\t\t\treturn this._imageSizing;\n\t\t}\n\t\tset imageSizing(imageSizing) {\n\t\t\tthis._imageSizing = imageSizing;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget margin() {\n\t\t\treturn this._margin;\n\t\t}\n\t\tset margin(margin) {\n\t\t\tthis._margin = margin;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new ImageStyle(this);\n\t\t}\n\t}\n\tmodule.exports = ImageStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/NumberStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/NumberStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'right' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass NumberStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new NumberStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t}\n\t\tclone() {\n\t\t\treturn new NumberStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = NumberStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/PercentCompleteBarStyle.js\":\n/*!**************************************************!*\\\n  !*** ./columns/style/PercentCompleteBarStyle.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\tlet defaultStyle;\n\tconst DEFAULT_BAR_COLOR = num => {\n\t\tif (num > 80) {\n\t\t\treturn '#20a8d8';\n\t\t}\n\t\tif (num > 50) {\n\t\t\treturn '#4dbd74';\n\t\t}\n\t\tif (num > 20) {\n\t\t\treturn '#ffc107';\n\t\t}\n\t\treturn '#f86c6b';\n\t};\n\tclass PercentCompleteBarStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new PercentCompleteBarStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._barColor = style.barColor || DEFAULT_BAR_COLOR;\n\t\t\tthis._barBgColor = style.barBgColor || '#f0f3f5';\n\t\t\tthis._barHeight = style.barHeight || 3;\n\t\t}\n\t\tget barColor() {\n\t\t\treturn this._barColor;\n\t\t}\n\t\tset barColor(barColor) {\n\t\t\tthis._barColor = barColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget barBgColor() {\n\t\t\treturn this._barBgColor;\n\t\t}\n\t\tset barBgColor(barBgColor) {\n\t\t\tthis._barBgColor = barBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget barHeight() {\n\t\t\treturn this._barHeight;\n\t\t}\n\t\tset barHeight(barHeight) {\n\t\t\tthis._barHeight = barHeight;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new PercentCompleteBarStyle(this);\n\t\t}\n\t}\n\tmodule.exports = PercentCompleteBarStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/StdBaseStyle.js\":\n/*!***************************************!*\\\n  !*** ./columns/style/StdBaseStyle.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\n\n\tlet defaultStyle;\n\tclass StdBaseStyle extends BaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._textAlign = style.textAlign || 'left';\n\t\t\tthis._textBaseline = style.textBaseline || 'middle';\n\t\t}\n\t\tget textAlign() {\n\t\t\treturn this._textAlign;\n\t\t}\n\t\tset textAlign(textAlign) {\n\t\t\tthis._textAlign = textAlign;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget textBaseline() {\n\t\t\treturn this._textBaseline;\n\t\t}\n\t\tset textBaseline(textBaseline) {\n\t\t\tthis._textBaseline = textBaseline;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new StdBaseStyle(this);\n\t\t}\n\t}\n\tmodule.exports = StdBaseStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/Style.js\":\n/*!********************************!*\\\n  !*** ./columns/style/Style.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst StdBaseStyle = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\tlet defaultStyle;\n\tclass Style extends StdBaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new Style();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._color = style.color;\n\t\t\tthis._font = style.font;\n\t\t\tthis._padding = style.padding;\n\t\t}\n\t\tget color() {\n\t\t\treturn this._color;\n\t\t}\n\t\tset color(color) {\n\t\t\tthis._color = color;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget font() {\n\t\t\treturn this._font;\n\t\t}\n\t\tset font(font) {\n\t\t\tthis._font = font;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget padding() {\n\t\t\treturn this._padding;\n\t\t}\n\t\tset padding(padding) {\n\t\t\tthis._padding = padding;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new Style(this);\n\t\t}\n\t}\n\tmodule.exports = Style;\n}\n\n/***/ }),\n\n/***/ \"./columns/type.js\":\n/*!*************************!*\\\n  !*** ./columns/type.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Column = __webpack_require__(/*! ./type/Column */ \"./columns/type/Column.js\");\n\tconst NumberColumn = __webpack_require__(/*! ./type/NumberColumn */ \"./columns/type/NumberColumn.js\");\n\tconst CheckColumn = __webpack_require__(/*! ./type/CheckColumn */ \"./columns/type/CheckColumn.js\");\n\tconst ButtonColumn = __webpack_require__(/*! ./type/ButtonColumn */ \"./columns/type/ButtonColumn.js\");\n\tconst ImageColumn = __webpack_require__(/*! ./type/ImageColumn */ \"./columns/type/ImageColumn.js\");\n\tconst PercentCompleteBarColumn = __webpack_require__(/*! ./type/PercentCompleteBarColumn */ \"./columns/type/PercentCompleteBarColumn.js\");\n\tconst IconColumn = __webpack_require__(/*! ./type/IconColumn */ \"./columns/type/IconColumn.js\");\n\tconst BranchGraphColumn = __webpack_require__(/*! ./type/BranchGraphColumn */ \"./columns/type/BranchGraphColumn.js\");\n\tconst MenuColumn = __webpack_require__(/*! ./type/MenuColumn */ \"./columns/type/MenuColumn.js\");\n\n\t/**\r\n  * column types\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns.type\r\n  * @memberof cheetahGrid.columns\r\n  */\n\tconst type = {\n\t\tTYPES: {\n\t\t\tDEFAULT: new Column(),\n\t\t\tNUMBER: new NumberColumn(),\n\t\t\tCHECK: new CheckColumn(),\n\t\t\tBUTTON: new ButtonColumn(),\n\t\t\tIMAGE: new ImageColumn()\n\t\t},\n\t\tget Column() {\n\t\t\treturn Column;\n\t\t},\n\t\tget NumberColumn() {\n\t\t\treturn NumberColumn;\n\t\t},\n\t\tget CheckColumn() {\n\t\t\treturn CheckColumn;\n\t\t},\n\t\tget ButtonColumn() {\n\t\t\treturn ButtonColumn;\n\t\t},\n\t\tget ImageColumn() {\n\t\t\treturn ImageColumn;\n\t\t},\n\t\tget PercentCompleteBarColumn() {\n\t\t\treturn PercentCompleteBarColumn;\n\t\t},\n\t\tget IconColumn() {\n\t\t\treturn IconColumn;\n\t\t},\n\t\tget BranchGraphColumn() {\n\t\t\treturn BranchGraphColumn;\n\t\t},\n\t\tget MenuColumn() {\n\t\t\treturn MenuColumn;\n\t\t},\n\t\tof(columnType) {\n\t\t\tif (!columnType) {\n\t\t\t\treturn type.TYPES.DEFAULT;\n\t\t\t} else if (typeof columnType === 'string') {\n\t\t\t\treturn type.TYPES[columnType.toUpperCase()] || type.of(null);\n\t\t\t} else {\n\t\t\t\treturn columnType;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = type;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/BaseColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/BaseColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./columns/style.js\");\n\tconst { isPromise, isDef, obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst animate = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\tconst BaseStyle = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\tconst { COLUMN_FADEIN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tfunction isFadeinWhenCallbackInPromise(column, grid) {\n\t\tif (isDef(column._fadeinWhenCallbackInPromise)) {\n\t\t\treturn column._fadeinWhenCallbackInPromise;\n\t\t}\n\t\treturn !!grid.configure('fadeinWhenCallbackInPromise');\n\t}\n\n\tfunction getFadinState(grid) {\n\t\tif (!grid[COLUMN_FADEIN_STATE_ID]) {\n\t\t\tsetReadonly(grid, COLUMN_FADEIN_STATE_ID, {});\n\t\t}\n\t\treturn grid[COLUMN_FADEIN_STATE_ID];\n\t}\n\tfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\n\t\treturn point => {\n\t\t\tconst state = getFadinState(grid);\n\t\t\tconst stateKey = col + ':' + row;\n\t\t\tif (point === 1) {\n\t\t\t\tdelete state[stateKey];\n\t\t\t} else {\n\t\t\t\tstate[stateKey] = {\n\t\t\t\t\topacity: point\n\t\t\t\t};\n\t\t\t}\n\t\t\tdrawCellBase();\n\n\t\t\tdrawInternal();\n\n\t\t\tconst cellState = state[stateKey];\n\t\t\tif (cellState) {\n\t\t\t\t//\n\t\t\t\tconst ctx = context.getContext();\n\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\n\t\t\t\ttry {\n\t\t\t\t\tdrawCellBase();\n\t\t\t\t} finally {\n\t\t\t\t\tctx.globalAlpha = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\tconst fadinMgr = {\n\t\tanimate(grid, col, row, context, drawInternal, drawCellBase) {\n\t\t\t// fadein animation\n\t\t\tconst state = getFadinState(grid);\n\n\t\t\tconst activeFadeins = [_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)];\n\t\t\tstate.activeFadeins = activeFadeins;\n\n\t\t\tanimate(500, point => {\n\t\t\t\tactiveFadeins.forEach(f => f(point));\n\t\t\t\tif (point === 1) {\n\t\t\t\t\tdelete state.activeFadeins;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmargeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\n\t\t\tconst state = getFadinState(grid);\n\t\t\tif (state.activeFadeins) {\n\t\t\t\tstate.activeFadeins.push(_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase));\n\t\t\t} else {\n\t\t\t\tdrawInternal();\n\t\t\t}\n\t\t}\n\n\t};\n\n\tclass BaseColumn {\n\t\tconstructor(option = {}) {\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this); //\n\n\t\t\t//Promisecallback\n\t\t\tthis._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn BaseStyle;\n\t\t}\n\t\tonDrawCell(cellValue, info, context, grid) {\n\t\t\tconst { style, getRecord, drawCellBase } = info;\n\t\t\tdelete info.getRecord;\n\t\t\tdelete info.style;\n\t\t\tconst helper = grid.getGridCanvasHelper();\n\t\t\tdrawCellBase();\n\n\t\t\t//\n\t\t\tif (isPromise(cellValue)) {\n\t\t\t\tif (context.drawing) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst start = Date.now();\n\t\t\t\treturn cellValue.then(val => {\n\t\t\t\t\tconst currentContext = context.toCurrentContext();\n\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\n\t\t\t\t\tif (!drawRect) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst time = Date.now() - start;\n\n\t\t\t\t\tconst drawInternal = () => {\n\t\t\t\t\t\tconst currentContext = context.toCurrentContext();\n\t\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\n\t\t\t\t\t\tif (!drawRect) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.drawInternal(this.convertInternal(val), currentContext, styleContents.of(style, getRecord(), this.StyleClass), helper, grid, info);\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!isFadeinWhenCallbackInPromise(this, grid)) {\n\t\t\t\t\t\tdrawInternal(); //\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst { col, row } = context;\n\t\t\t\t\t\tif (time < 80) {\n\t\t\t\t\t\t\t//80msPromiseCallback\n\t\t\t\t\t\t\tfadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tfadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.drawInternal(this.convertInternal(cellValue), context, styleContents.of(style, getRecord(), this.StyleClass), helper, grid, info);\n\t\t\t\t//\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tconst stateKey = col + ':' + row;\n\t\t\t\tconst cellState = grid[COLUMN_FADEIN_STATE_ID] && grid[COLUMN_FADEIN_STATE_ID][stateKey];\n\t\t\t\tif (cellState) {\n\t\t\t\t\tconst ctx = context.getContext();\n\t\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdrawCellBase();\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tctx.globalAlpha = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseColumn(this);\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn isDef(value) ? value : '';\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = BaseColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/BranchGraphColumn.js\":\n/*!*******************************************!*\\\n  !*** ./columns/type/BranchGraphColumn.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { isDef, getOrApply, isPromise, obj: { isObject } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst BranchGraphStyle = __webpack_require__(/*! ../style/BranchGraphStyle */ \"./columns/style/BranchGraphStyle.js\");\nconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\nconst { BRANCH_GRAPH_COLUMN_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nfunction getAllColumnData(grid, col, callback) {\n\tconst dataSource = grid.dataSource;\n\tlet field = grid.getField(col);\n\tif (isObject(field) && field.get && field.set) {\n\t\tfield = field.get;\n\t}\n\tconst allData = [];\n\tlet promise;\n\tfor (let index = 0; index < dataSource.length; index++) {\n\t\tconst data = dataSource.getField(index, field);\n\t\tif (isPromise(data)) {\n\t\t\tconst dataIndex = allData.length;\n\t\t\tallData.push(data);\n\t\t\tif (!promise) {\n\t\t\t\tpromise = data.then(d => {\n\t\t\t\t\tallData[dataIndex] = d;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tpromise = promise.then(() => data).then(d => {\n\t\t\t\t\tallData[dataIndex] = d;\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tallData.push(data);\n\t\t}\n\t}\n\n\tif (promise) {\n\t\tpromise.then(() => callback(allData));\n\t} else {\n\t\tcallback(allData);\n\t}\n}\n\nclass BranchLine {\n\tconstructor({ fromIndex, toIndex, colorIndex, point }) {\n\t\tthis.fromIndex = fromIndex;\n\t\tthis.toIndex = toIndex;\n\t\tthis.colorIndex = colorIndex;\n\t\tthis.point = point;\n\t}\n}\nclass BranchPoint {\n\tconstructor({ index, commit = false, lines = [], tag }) {\n\t\tthis.index = index;\n\t\tthis.commit = commit;\n\t\tthis.lines = lines;\n\t\tthis.tag = tag;\n\t}\n\tstatic mergeLines(lines) {\n\t\tconst result = lines.filter(l => isDef(l.fromIndex) && isDef(l.toIndex));\n\n\t\tconst froms = lines.filter(l => isDef(l.fromIndex) && !isDef(l.toIndex));\n\t\tconst tos = lines.filter(l => !isDef(l.fromIndex) && isDef(l.toIndex));\n\n\t\tfroms.forEach(f => {\n\t\t\tfor (let i = 0; i < tos.length; i++) {\n\t\t\t\tconst t = tos[i];\n\t\t\t\tif (t.point) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (f.colorIndex === t.colorIndex) {\n\t\t\t\t\tf.toIndex = t.toIndex;\n\t\t\t\t\ttos.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(f);\n\t\t});\n\n\t\treturn result.concat(tos);\n\t}\n\tstatic merge(a, b) {\n\t\tif (!a) {\n\t\t\treturn b;\n\t\t}\n\t\treturn new BranchPoint({\n\t\t\tindex: a.index,\n\t\t\tcommit: a.commit || b.commit,\n\t\t\tlines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\n\t\t\ttag: a.tag || b.tag\n\t\t});\n\t}\n}\n\nfunction joinLine(timeline, branchIndex) {\n\tconst reverse = [...timeline].reverse();\n\tfor (let i = 0; i < reverse.length; i++) {\n\t\tconst f = reverse[i][branchIndex];\n\t\tif (f) {\n\t\t\tf.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\n\t\t\t\ttoIndex: branchIndex,\n\t\t\t\tcolorIndex: branchIndex\n\t\t\t})]));\n\n\t\t\tfor (let j = 0; j < i; j++) {\n\t\t\t\tconst tl = reverse[j];\n\t\t\t\ttl[branchIndex] = new BranchPoint({\n\t\t\t\t\tindex: branchIndex,\n\t\t\t\t\tlines: [new BranchLine({\n\t\t\t\t\t\tfromIndex: branchIndex,\n\t\t\t\t\t\ttoIndex: branchIndex,\n\t\t\t\t\t\tcolorIndex: branchIndex\n\t\t\t\t\t})]\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction branch({ timeline, branches }, from, to) {\n\tconst fromIndex = branches.indexOf(from);\n\tlet toIndex = branches.indexOf(to);\n\tif (toIndex < 0) {\n\t\ttoIndex = branches.length;\n\t\tbranches.push(to);\n\t}\n\n\tfunction findBranchRootIndex() {\n\t\tfor (let index = timeline.length - 1; index >= 0; index--) {\n\t\t\tconst tl = timeline[index];\n\t\t\tconst from = tl[fromIndex];\n\t\t\tif (from && from.commit) {\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tif (fromIndex < 0) {\n\t\treturn new BranchPoint({\n\t\t\tindex: toIndex\n\t\t});\n\t} else {\n\t\tconst fromTargetIndex = findBranchRootIndex();\n\t\tif (fromTargetIndex === -1) {\n\t\t\treturn null;\n\t\t}\n\t\tconst branchTargetFromIndex = fromTargetIndex + 1;\n\t\tconst branchPoint = new BranchPoint({\n\t\t\tindex: toIndex,\n\t\t\tlines: [new BranchLine({\n\t\t\t\tfromIndex,\n\t\t\t\tcolorIndex: toIndex\n\t\t\t})]\n\t\t});\n\t\tlet point;\n\t\tlet result;\n\t\tif (branchTargetFromIndex < timeline.length) {\n\t\t\tconst targetLine = timeline[branchTargetFromIndex];\n\t\t\tpoint = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\n\t\t} else {\n\t\t\tpoint = branchPoint;\n\t\t\tresult = branchPoint;\n\t\t}\n\t\tconst from = timeline[fromTargetIndex][fromIndex];\n\t\tfrom.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\n\t\t\ttoIndex,\n\t\t\tcolorIndex: toIndex,\n\t\t\tpoint\n\t\t})]));\n\t\treturn result;\n\t}\n}\n\nfunction commit({ timeline, branches }, name) {\n\tconst index = branches.indexOf(name);\n\tif (index < 0) {\n\t\treturn null;\n\t}\n\tconst result = new BranchPoint({\n\t\tindex,\n\t\tcommit: true\n\t});\n\n\tif (joinLine(timeline, index)) {\n\t\tresult.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\n\t\t\tfromIndex: index,\n\t\t\tcolorIndex: index\n\t\t})]));\n\t}\n\treturn result;\n}\n\nfunction commitTag({ timeline, branches }, name, tag) {\n\tlet index = branches.indexOf(name);\n\tif (index < 0) {\n\t\tindex = branches.length;\n\t\tbranches.push(name);\n\t}\n\treturn new BranchPoint({\n\t\tindex,\n\t\ttag\n\t});\n}\n\nfunction commitMerge({ timeline, branches }, from, to) {\n\tconst fromIndex = branches.indexOf(from);\n\tconst toIndex = branches.indexOf(to);\n\tif (toIndex < 0 || fromIndex < 0) {\n\t\treturn new BranchPoint({\n\t\t\tindex: toIndex,\n\t\t\tcommit: true\n\t\t});\n\t}\n\tconst result = new BranchPoint({\n\t\tindex: toIndex,\n\t\tcommit: true,\n\t\tlines: [new BranchLine({\n\t\t\tfromIndex,\n\t\t\tcolorIndex: fromIndex\n\t\t}), new BranchLine({\n\t\t\tfromIndex: toIndex,\n\t\t\tcolorIndex: toIndex\n\t\t})]\n\t});\n\tconst froms = [...timeline];\n\tconst fromTargetLine = froms.pop();\n\tif (fromTargetLine) {\n\t\tfromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\n\t\t\tindex: toIndex,\n\t\t\tlines: [new BranchLine({\n\t\t\t\ttoIndex,\n\t\t\t\tcolorIndex: fromIndex\n\t\t\t})]\n\t\t}));\n\t}\n\n\tjoinLine(froms, fromIndex);\n\n\tjoinLine(timeline, toIndex);\n\n\treturn result;\n}\n\nfunction calcCommand(info, command) {\n\tconst { timeline } = info;\n\tconst timelineData = [];\n\t// const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\n\tconst commands = __webpack_provided_Array_dot_isArray(command) ? command : [command];\n\tcommands.forEach(cmd => {\n\t\tif (!cmd) {\n\t\t\treturn;\n\t\t}\n\t\tlet point;\n\t\tif (cmd.command === 'branch') {\n\t\t\tconst from = isObject(cmd.branch) ? cmd.branch.from : null;\n\t\t\tconst to = isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\n\t\t\tpoint = branch(info, from, to);\n\t\t} else if (cmd.command === 'commit') {\n\t\t\tconst { branch } = cmd;\n\t\t\tpoint = commit(info, branch);\n\t\t} else if (cmd.command === 'merge') {\n\t\t\tconst from = cmd.branch.from;\n\t\t\tconst to = cmd.branch.to;\n\t\t\tpoint = commitMerge(info, from, to);\n\t\t} else if (cmd.command === 'tag') {\n\t\t\tconst { branch, tag } = cmd;\n\t\t\tpoint = commitTag(info, branch, tag);\n\t\t}\n\t\tif (point && point.index > -1) {\n\t\t\ttimelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\n\t\t}\n\t});\n\ttimeline.push(timelineData);\n}\n\nfunction calcBranchesInfo(start, grid, col) {\n\tconst result = {\n\t\tbranches: [],\n\t\ttimeline: []\n\t};\n\tgetAllColumnData(grid, col, data => {\n\t\tif (start !== 'top') {\n\t\t\tdata = [...data].reverse();\n\t\t}\n\t\tdata.forEach(command => {\n\t\t\tcalcCommand(result, command);\n\t\t});\n\t});\n\treturn result;\n}\n\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\n\tlet w = Math.max(width / branches.length + 1, 5);\n\ttimeline.forEach(tl => {\n\t\ttl.forEach((p, index) => {\n\t\t\tif (index <= 0) {\n\t\t\t\t// \n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (p.tag) {\n\t\t\t\tconst textWidth = ctx.measureText(p.tag).width;\n\t\t\t\tif (w * index + radius * 2 + 4 + textWidth > width) {\n\t\t\t\t\tw = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\tconst result = [];\n\tlet x = left;\n\tbranches.forEach(() => {\n\t\tresult.push(Math.ceil(x + radius));\n\t\tx += w;\n\t});\n\treturn result;\n}\n\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\n\tbranchXPoints, margin, branchColors, branchLineWidth, mergeStyle\n}, {\n\twidth, col, row, branches\n}) {\n\tif (isDef(upLineIndex) || isDef(downLineIndex)) {\n\t\tctx.strokeStyle = getOrApply(branchColors, branches[colorIndex], colorIndex);\n\t\tctx.lineWidth = branchLineWidth;\n\t\tctx.lineCap = 'round';\n\t\tctx.beginPath();\n\n\t\tif (isDef(upLineIndex)) {\n\t\t\tconst upX = branchXPoints[upLineIndex];\n\t\t\tconst upRect = grid.getCellRelativeRect(col, row - 1);\n\t\t\tconst upY = upRect.top + upRect.height / 2;\n\t\t\tctx.moveTo(upX, upY);\n\t\t\tif (mergeStyle === 'bezier') {\n\t\t\t\tctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(x, y);\n\t\t\t}\n\t\t} else {\n\t\t\tctx.moveTo(x, y);\n\t\t}\n\n\t\tif (isDef(downLineIndex)) {\n\t\t\tconst downX = branchXPoints[downLineIndex];\n\t\t\tconst downRect = grid.getCellRelativeRect(col, row + 1);\n\t\t\tconst downY = downRect.top + downRect.height / 2;\n\t\t\tif (mergeStyle === 'bezier') {\n\t\t\t\tctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(downX, downY);\n\t\t\t}\n\t\t}\n\n\t\tctx.stroke();\n\t}\n}\n\n/**\r\n * BranchGraphColumn<br>\r\n * <br>\r\n * # Data command<br>\r\n * ## mastar branch or orphan branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * </code></pre>\r\n * ## commit<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * </code></pre>\r\n * ## branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## merge<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## tag<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * </code></pre>\r\n *\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\nclass BranchGraphColumn extends BaseColumn {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._start = option.start || 'bottom';\n\t\tthis._cache = isDef(option.cache) ? option.cache : false;\n\t}\n\tget StyleClass() {\n\t\treturn BranchGraphStyle;\n\t}\n\tclearCache(grid) {\n\t\tdelete grid[_];\n\t}\n\tonDrawCell(cellValue, info, context, grid) {\n\t\tif (this._cache) {\n\t\t\tconst state = grid[_] || (grid[_] = {});\n\t\t\tconst { col } = context;\n\t\t\tif (!state[col]) {\n\t\t\t\tstate[col] = calcBranchesInfo(this._start, grid, col);\n\t\t\t}\n\t\t}\n\t\treturn super.onDrawCell(cellValue, info, context, grid);\n\t}\n\tclone() {\n\t\treturn new BranchGraphColumn(this);\n\t}\n\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\tconst { col, row } = context;\n\t\tconst { timeline, branches } = this._cache && grid[_] ? grid[_][col] : calcBranchesInfo(this._start, grid, col);\n\n\t\tconst { upLineIndexKey, downLineIndexKey } = this._start !== 'top' ? { upLineIndexKey: 'toIndex', downLineIndexKey: 'fromIndex' } : { upLineIndexKey: 'fromIndex', downLineIndexKey: 'toIndex' };\n\t\tconst data = this._start !== 'top' ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\n\n\t\tconst {\n\t\t\tbranchColors,\n\t\t\tbranchLineWidth,\n\t\t\tcircleSize,\n\t\t\tmergeStyle,\n\t\t\tmargin,\n\t\t\tbgColor\n\t\t} = style;\n\t\tif (bgColor) {\n\t\t\tdrawCellBase({\n\t\t\t\tbgColor\n\t\t\t});\n\t\t}\n\n\t\tconst rect = context.getRect();\n\t\tconst radius = circleSize / 2;\n\t\tconst width = rect.width - margin * 2;\n\n\t\thelper.drawWithClip(context, ctx => {\n\t\t\tctx.textAlign = 'left';\n\t\t\tctx.textBaseline = 'middle';\n\t\t\tconst branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\n\n\t\t\tconst y = rect.top + rect.height / 2;\n\n\t\t\t// draw join lines\n\t\t\tdata.map((point, index) => point ? point.lines.map(line => ({\n\t\t\t\tcolorIndex: line.colorIndex,\n\t\t\t\tupLineIndex: line[upLineIndexKey],\n\t\t\t\tdownLineIndex: line[downLineIndexKey],\n\t\t\t\tpointIndex: index\n\t\t\t})) : []).reduce((p, c) => p.concat(c), []). // flatMap\n\t\t\t// order of overlap\n\t\t\tsort((a, b) => b.colorIndex - a.colorIndex).forEach(line => {\n\t\t\t\tconst x = branchXPoints[line.pointIndex];\n\t\t\t\trenderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\n\t\t\t\t\tmargin,\n\t\t\t\t\tbranchXPoints,\n\t\t\t\t\tbranchLineWidth,\n\t\t\t\t\tbranchColors,\n\t\t\t\t\tmergeStyle\n\t\t\t\t}, {\n\t\t\t\t\twidth, col, row, branches\n\t\t\t\t});\n\t\t\t});\n\t\t\t// draw commit points\n\t\t\tdata.forEach((p, index) => {\n\t\t\t\tif (p && p.commit) {\n\t\t\t\t\tconst x = branchXPoints[index];\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2, true);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tctx.closePath();\n\t\t\t\t}\n\t\t\t});\n\t\t\t// draw tags\n\t\t\tdata.forEach((p, index) => {\n\t\t\t\tif (p && p.tag) {\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\n\t\t\t\t\tctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\nmodule.exports = BranchGraphColumn;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/type/ButtonColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/ButtonColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\tconst ButtonStyle = __webpack_require__(/*! ../style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\tconst { BUTTON_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\n\tclass ButtonColumn extends Column {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._caption = option.caption;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn ButtonStyle;\n\t\t}\n\t\tget caption() {\n\t\t\treturn this._caption;\n\t\t}\n\t\twithCaption(caption) {\n\t\t\tconst c = this.clone();\n\t\t\tc._caption = caption;\n\t\t\treturn c;\n\t\t}\n\t\tclone() {\n\t\t\treturn new ButtonColumn(this);\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn this._caption || value;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding } = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\thelper.testFontLoad(font, value, context);\n\t\t\tconst { col, row } = context;\n\t\t\tlet active = false;\n\t\t\tconst state = grid[BUTTON_COLUMN_STATE_ID];\n\t\t\tif (state) {\n\t\t\t\tif (state.mouseActiveCell && state.mouseActiveCell.col === col && state.mouseActiveCell.row === row) {\n\t\t\t\t\tactive = true;\n\t\t\t\t} else if (context.getSelectState().selected) {\n\t\t\t\t\tactive = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\thelper.button(value, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tbgColor: buttonBgColor,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\tpadding,\n\t\t\t\t\tshadow: active ? {\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.48)',\n\t\t\t\t\t\tblur: 6,\n\t\t\t\t\t\toffsetY: 3\n\t\t\t\t\t} : true,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tmodule.exports = ButtonColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/CheckColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/CheckColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst CheckStyle = __webpack_require__(/*! ../style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\tconst { CHECK_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tfunction toBoolean(val) {\n\t\tif (typeof val === 'string') {\n\t\t\tif (val === 'false') {\n\t\t\t\treturn false;\n\t\t\t} else if (val === 'off') {\n\t\t\t\treturn false;\n\t\t\t} else if (val.match(/^0+$/)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn val;\n\t}\n\n\tclass CheckColumn extends BaseColumn {\n\t\tget StyleClass() {\n\t\t\treturn CheckStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new CheckColumn(this);\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn toBoolean(value);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tborderColor,\n\t\t\t\tcheckBgColor,\n\t\t\t\tuncheckBgColor,\n\t\t\t\tbgColor\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst { col, row } = context;\n\t\t\tconst key = col + ':' + row;\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID] && grid[CHECK_COLUMN_STATE_ID][key];\n\n\t\t\tconst opt = {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tborderColor,\n\t\t\t\tcheckBgColor,\n\t\t\t\tuncheckBgColor\n\t\t\t};\n\t\t\tif (state) {\n\t\t\t\topt.animElapsedTime = state.elapsed;\n\t\t\t}\n\t\t\thelper.checkbox(value, context, opt);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tmodule.exports = CheckColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/Column.js\":\n/*!********************************!*\\\n  !*** ./columns/type/Column.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\n\tclass Column extends BaseColumn {\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tclone() {\n\t\t\treturn new Column(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\tbgColor,\n\t\t\t\tpadding\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\thelper.testFontLoad(font, value, context);\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\thelper.text(value, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons,\n\t\t\t\t\tpadding\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\tmodule.exports = Column;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/IconColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/IconColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst IconStyle = __webpack_require__(/*! ../style/IconStyle */ \"./columns/style/IconStyle.js\");\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\tconst icons = __webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\");\n\n\tfunction repeatArray(val, count) {\n\t\tif (count === Infinity) {\n\t\t\tcount = 0;\n\t\t}\n\t\tconst a = [];\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\ta.push(val);\n\t\t}\n\t\treturn a;\n\t}\n\n\tclass IconColumn extends Column {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._tagName = option.tagName || 'i';\n\t\t\tthis._className = option.className;\n\t\t\tthis._content = option.content;\n\t\t\tthis._name = option.name;\n\t\t\tthis._iconWidth = option.iconWidth;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn IconStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new IconColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {\n\t\t\tconst num = value - 0;\n\t\t\tif (!isNaN(num)) {\n\t\t\t\tconst icon = {};\n\t\t\t\ticons.iconPropKeys.forEach(k => {\n\t\t\t\t\ticon[k] = style[k];\n\t\t\t\t});\n\t\t\t\ticon.className = this._className;\n\t\t\t\ticon.tagName = this._tagName;\n\t\t\t\ticon.content = this._content;\n\t\t\t\ticon.name = this._name;\n\t\t\t\tif (this._iconWidth) {\n\t\t\t\t\ticon.width = this._iconWidth;\n\t\t\t\t}\n\n\t\t\t\tinfo.getIcon = () => repeatArray(icon, num);\n\t\t\t} else {\n\t\t\t\tinfo.getIcon = () => null;\n\t\t\t}\n\t\t\tsuper.drawInternal('', context, style, helper, grid, info);\n\t\t}\n\t}\n\tmodule.exports = IconColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/ImageColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/ImageColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst ImageStyle = __webpack_require__(/*! ../style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\tconst { getCacheOrLoad } = __webpack_require__(/*! ../../internal/imgs */ \"./internal/imgs.js\");\n\tconst { calcStartPosition } = __webpack_require__(/*! ../../internal/canvases */ \"./internal/canvases.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\n\tconst MAX_LRU_CACHE_SIZE = 50;\n\tfunction getImage(url) {\n\t\treturn getCacheOrLoad('ImageColumn', MAX_LRU_CACHE_SIZE, url);\n\t}\n\n\tfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\n\t\tlet newWidth = width;\n\t\tlet newHeight = height;\n\t\tif (newWidth > maxWidth) {\n\t\t\tnewWidth = maxWidth;\n\t\t\tnewHeight = newWidth * height / width;\n\t\t}\n\t\tif (newHeight > maxHeight) {\n\t\t\tnewHeight = maxHeight;\n\t\t\tnewWidth = newHeight * width / height;\n\t\t}\n\t\treturn {\n\t\t\twidth: newWidth,\n\t\t\theight: newHeight\n\t\t};\n\t}\n\n\tclass ImageColumn extends BaseColumn {\n\t\tget StyleClass() {\n\t\t\treturn ImageStyle;\n\t\t}\n\t\tonDrawCell(cellValue, info, context, grid) {\n\t\t\treturn super.onDrawCell(getImage(cellValue), info, context, grid);\n\t\t}\n\t\tclone() {\n\t\t\treturn new ImageColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tif (value) {\n\t\t\t\tconst {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tmargin,\n\t\t\t\t\tbgColor\n\t\t\t\t} = style;\n\t\t\t\tif (bgColor) {\n\t\t\t\t\tdrawCellBase({\n\t\t\t\t\t\tbgColor\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\thelper.drawWithClip(context, ctx => {\n\n\t\t\t\t\tctx.textAlign = textAlign;\n\t\t\t\t\tctx.textBaseline = textBaseline;\n\t\t\t\t\tconst rect = context.getRect();\n\t\t\t\t\tif (style.imageSizing === 'keep-aspect-ratio') {\n\t\t\t\t\t\tconst { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\n\t\t\t\t\t\tconst pos = calcStartPosition(ctx, rect, width, height, {\n\t\t\t\t\t\t\toffset: margin\n\t\t\t\t\t\t});\n\t\t\t\t\t\tctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tmodule.exports = ImageColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/MenuColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/MenuColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { normalize } = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\tconst { isDef } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst Style = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\n\tclass MenuColumn extends BaseColumn {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._options = normalize(option.options);\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tclone() {\n\t\t\treturn new MenuColumn(this);\n\t\t}\n\t\tget options() {\n\t\t\treturn this._options;\n\t\t}\n\t\twithOptions(options) {\n\t\t\tconst c = this.clone();\n\t\t\tc._options = normalize(options);\n\t\t\treturn c;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tfont,\n\t\t\t\tbgColor,\n\t\t\t\tpadding\n\t\t\t} = style;\n\t\t\tlet {\n\t\t\t\tcolor\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst text = this._convertInternal(value);\n\t\t\thelper.testFontLoad(font, text, context);\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\tconst basePadding = helper.toBoxPixelArray(padding || 0, context);\n\t\t\t\tconst textPadding = basePadding.slice(0);\n\t\t\t\ttextPadding[1] += 26; // icon padding\n\t\t\t\tconst iconPadding = basePadding.slice(0);\n\t\t\t\ticonPadding[1] += 8;\n\t\t\t\tif (!isDef(color) && (!isDef(value) || value === '')) {\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, .38)';\n\t\t\t\t}\n\t\t\t\thelper.text(text, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons,\n\t\t\t\t\tpadding: textPadding\n\t\t\t\t});\n\t\t\t\t// draw icon\n\t\t\t\thelper.text('', context, {\n\t\t\t\t\ttextAlign: 'right',\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons: [{\n\t\t\t\t\t\tpath: 'M0 2 5 7 10 2z',\n\t\t\t\t\t\twidth: 10,\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, .54)'\n\t\t\t\t\t}],\n\t\t\t\t\tpadding: iconPadding\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn value;\n\t\t}\n\t\t_convertInternal(value) {\n\t\t\tconst options = this._options;\n\t\t\tfor (let i = 0; i < options.length; i++) {\n\t\t\t\tconst option = options[i];\n\t\t\t\tif (option.value === value) {\n\t\t\t\t\tvalue = option.caption;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn super.convertInternal(value);\n\t\t}\n\t}\n\n\tmodule.exports = MenuColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/NumberColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/NumberColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\tconst NumberStyle = __webpack_require__(/*! ../style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\tlet defaultFotmat;\n\tclass NumberColumn extends Column {\n\t\tstatic get defaultFotmat() {\n\t\t\treturn defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\n\t\t}\n\t\tstatic set defaultFotmat(fmt) {\n\t\t\tdefaultFotmat = fmt;\n\t\t}\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._format = option.format;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn NumberStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new NumberColumn(this);\n\t\t}\n\t\tget format() {\n\t\t\treturn this._format;\n\t\t}\n\t\twithFormat(format) {\n\t\t\tconst c = this.clone();\n\t\t\tc._format = format;\n\t\t\treturn c;\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\tif (isNaN(value - 0)) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tconst format = this._format || NumberColumn.defaultFotmat;\n\t\t\treturn format.format(value - 0);\n\t\t}\n\t}\n\n\tmodule.exports = NumberColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/PercentCompleteBarColumn.js\":\n/*!**************************************************!*\\\n  !*** ./columns/type/PercentCompleteBarColumn.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst PercentCompleteBarStyle = __webpack_require__(/*! ../style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\tconst { getOrApply, str } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\n\tconst MARGIN = 2;\n\n\tclass PercentCompleteBarColumn extends Column {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._min = option.min || 0;\n\t\t\tthis._max = option.max || this._min + 100;\n\t\t\tthis._formatter = option.formatter || (v => v);\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn PercentCompleteBarStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new PercentCompleteBarColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {\n\t\t\tsuper.drawInternal(this._formatter(value), context, style, helper, grid, info);\n\t\t\tconst {\n\t\t\t\tbarColor,\n\t\t\t\tbarBgColor,\n\t\t\t\tbarHeight\n\t\t\t} = style;\n\n\t\t\tlet svalue = value + '';\n\t\t\tif (str.endsWith(svalue, '%')) {\n\t\t\t\tsvalue = svalue.substr(0, svalue.length - 1);\n\t\t\t}\n\t\t\tconst num = svalue - 0;\n\t\t\tconst rate = num < this._min ? 0 : num > this._max ? 1 : (num - this._min) / (this._max - this._min);\n\n\t\t\thelper.drawWithClip(context, ctx => {\n\t\t\t\tconst rect = context.getRect();\n\n\t\t\t\tconst barMaxWidth = rect.width - MARGIN * 2 - 1 /**/;\n\t\t\t\tconst barTop = rect.bottom - MARGIN - barHeight - 1 /**/;\n\t\t\t\tconst barLeft = rect.left + MARGIN;\n\t\t\t\tctx.fillStyle = getOrApply(barBgColor, rate * 100) || '#f0f3f5';\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(barLeft, barTop, barMaxWidth, barHeight);\n\t\t\t\tctx.fill();\n\n\t\t\t\tconst barSize = Math.min(barMaxWidth * rate, barMaxWidth);\n\t\t\t\tctx.fillStyle = getOrApply(barColor, rate * 100) || '#20a8d8';\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(barLeft, barTop, barSize, barHeight);\n\t\t\t\tctx.fill();\n\t\t\t});\n\t\t}\n\t}\n\tmodule.exports = PercentCompleteBarColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/columnUtils.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/columnUtils.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { isPromise } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst icons = __webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\");\n\n\tmodule.exports = {\n\t\tloadIcons(icon, context, helper, callback) {\n\t\t\tif (icon) {\n\t\t\t\tif (isPromise(icon)) {\n\t\t\t\t\ticon.then(i => {\n\t\t\t\t\t\tthis.loadIcon(i, context.toCurrentContext(), callback);\n\t\t\t\t\t});\n\t\t\t\t\ticon = null;\n\t\t\t\t} else {\n\t\t\t\t\tconst iconList = icons.toNormarizeArray(icon);\n\t\t\t\t\ticonList.forEach(i => {\n\t\t\t\t\t\thelper.testFontLoad(i.font, i.content, context);\n\t\t\t\t\t});\n\t\t\t\t\ticon = iconList;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcallback(icon, context);\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./core.js\":\n/*!*****************!*\\\n  !*** ./core.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst DrawGrid = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\n\t/**\r\n  * core modules\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.core\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tDrawGrid\n\t};\n}\n\n/***/ }),\n\n/***/ \"./core/DrawGrid.js\":\n/*!**************************!*\\\n  !*** ./core/DrawGrid.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst {\n\t\tisDef,\n\t\tbrowser,\n\t\tisDescendantElement,\n\t\tarray,\n\t\tisPromise,\n\t\tevent: {\n\t\t\tisTouchEvent,\n\t\t\tgetMouseButtons,\n\t\t\tgetKeyCode,\n\t\t\tcancel: cancelEvent\n\t\t}\n\t} = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\n\tconst EventTarget = __webpack_require__(/*! ./EventTarget */ \"./core/EventTarget.js\");\n\tconst Rect = __webpack_require__(/*! ../internal/Rect */ \"./internal/Rect.js\");\n\tconst Scrollable = __webpack_require__(/*! ../internal/Scrollable */ \"./internal/Scrollable.js\");\n\tconst EventHandler = __webpack_require__(/*! ../internal/EventHandler */ \"./internal/EventHandler.js\");\n\tconst NumberMap = __webpack_require__(/*! ../internal/NumberMap */ \"./internal/NumberMap.js\");\n\tconst style = __webpack_require__(/*! ../internal/style */ \"./internal/style.js\");\n\tconst calc = __webpack_require__(/*! ../internal/calc */ \"./internal/calc.js\");\n\tconst hiDPI = __webpack_require__(/*! ../internal/hiDPI */ \"./internal/hiDPI.js\");\n\t//protected symbol\n\tconst { PROTECTED_SYMBOL: _ } = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tfunction createRootElement() {\n\t\tconst element = document.createElement('div');\n\t\telement.classList.add('cheetah-grid');\n\t\treturn element;\n\t}\n\n\tconst KEY_END = 35;\n\tconst KEY_HOME = 36;\n\tconst KEY_LEFT = 37;\n\tconst KEY_UP = 38;\n\tconst KEY_RIGHT = 39;\n\tconst KEY_DOWN = 40;\n\tconst KEY_ALPHA_C = 67;\n\n\tconst EVENT_TYPE = {\n\t\tCLICK_CELL: 'click_cell',\n\t\tDBLCLICK_CELL: 'dblclick_cell',\n\t\tDBLTAP_CELL: 'dbltap_cell',\n\t\tMOUSEDOWN_CELL: 'mousedown_cell',\n\t\tMOUSEUP_CELL: 'mouseup_cell',\n\t\tSELECTED_CELL: 'selected_cell',\n\t\tKEYDOWN: 'keydown',\n\t\tMOUSEMOVE_CELL: 'mousemove_cell',\n\t\tMOUSEENTER_CELL: 'mouseenter_cell',\n\t\tMOUSELEAVE_CELL: 'mouseleave_cell',\n\t\tMOUSEOVER_CELL: 'mouseover_cell',\n\t\tMOUSEOUT_CELL: 'mouseout_cell',\n\t\tINPUT_CELL: 'input_cell',\n\t\tEDITABLEINPUT_CELL: 'editableinput_cell',\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL: 'modify_status_editableinput_cell',\n\t\tRESIZE_COLUMN: 'resize_column',\n\t\tSCROLL: 'scroll'\n\t};\n\n\t//private methods\n\tfunction _vibrate(e) {\n\t\tif (navigator.vibrate && isTouchEvent(e)) {\n\t\t\tnavigator.vibrate(300);\n\t\t}\n\t}\n\tfunction _getTargetRowAt(grid, absoluteY) {\n\t\tconst internal = grid.getTargetRowAtInternal(absoluteY);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tconst findBefore = (startRow, startBottom) => {\n\t\t\tlet bottom = startBottom;\n\t\t\tfor (let row = startRow; row >= 0; row--) {\n\t\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\t\tconst top = bottom - height;\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\trow\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbottom = top;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tconst findAfter = (startRow, startBottom) => {\n\t\t\tlet top = startBottom - _getRowHeight(grid, startRow);\n\t\t\tconst rowCount = grid[_].rowCount;\n\t\t\tfor (let row = startRow; row < rowCount; row++) {\n\t\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\t\tconst bottom = top + height;\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\trow\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\ttop = bottom;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tconst candRow = Math.min(Math.ceil(absoluteY / grid[_].defaultRowHeight), grid.rowCount - 1);\n\t\tconst bottom = _getRowsHeight(grid, 0, candRow);\n\t\tif (absoluteY >= bottom) {\n\t\t\treturn findAfter(candRow, bottom);\n\t\t} else {\n\t\t\treturn findBefore(candRow, bottom);\n\t\t}\n\t}\n\tfunction _getTargetColAt(grid, absoluteX) {\n\t\tlet left = 0;\n\t\tconst colCount = grid[_].colCount;\n\t\tfor (let col = 0; col < colCount; col++) {\n\t\t\tconst width = _getColWidth(grid, col);\n\t\t\tconst right = left + width;\n\t\t\tif (right > absoluteX) {\n\t\t\t\treturn {\n\t\t\t\t\tleft,\n\t\t\t\t\tcol\n\t\t\t\t};\n\t\t\t}\n\t\t\tleft = right;\n\t\t}\n\t\treturn null;\n\t}\n\tfunction _getTargetFrozenRowAt(grid, absoluteY) {\n\t\tif (!grid[_].frozenRowCount) {\n\t\t\treturn null;\n\t\t}\n\t\tlet top = grid[_].scroll.top;\n\t\tconst rowCount = grid[_].frozenRowCount;\n\t\tfor (let row = 0; row < rowCount; row++) {\n\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\tconst bottom = top + height;\n\t\t\tif (bottom > absoluteY) {\n\t\t\t\treturn {\n\t\t\t\t\ttop,\n\t\t\t\t\trow\n\t\t\t\t};\n\t\t\t}\n\t\t\ttop = bottom;\n\t\t}\n\t\treturn null;\n\t}\n\tfunction _getTargetFrozenColAt(grid, absoluteX) {\n\t\tif (!grid[_].frozenColCount) {\n\t\t\treturn null;\n\t\t}\n\t\tlet left = grid[_].scroll.left;\n\t\tconst colCount = grid[_].frozenColCount;\n\t\tfor (let col = 0; col < colCount; col++) {\n\t\t\tconst width = _getColWidth(grid, col);\n\t\t\tconst right = left + width;\n\t\t\tif (right > absoluteX) {\n\t\t\t\treturn {\n\t\t\t\t\tleft,\n\t\t\t\t\tcol\n\t\t\t\t};\n\t\t\t}\n\t\t\tleft = right;\n\t\t}\n\t\treturn null;\n\t}\n\tfunction _getFrozenRowsRect(grid) {\n\t\tif (!grid[_].frozenRowCount) {\n\t\t\treturn null;\n\t\t}\n\t\tconst top = grid[_].scroll.top;\n\t\tlet height = 0;\n\t\tconst rowCount = grid[_].frozenRowCount;\n\t\tfor (let row = 0; row < rowCount; row++) {\n\t\t\theight += _getRowHeight(grid, row);\n\t\t}\n\t\treturn new Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\n\t}\n\tfunction _getFrozenColsRect(grid) {\n\t\tif (!grid[_].frozenColCount) {\n\t\t\treturn null;\n\t\t}\n\t\tconst left = grid[_].scroll.left;\n\t\tlet width = 0;\n\t\tconst colCount = grid[_].frozenColCount;\n\t\tfor (let col = 0; col < colCount; col++) {\n\t\t\twidth += _getColWidth(grid, col);\n\t\t}\n\t\treturn new Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\n\t}\n\tfunction _isCellDrawing(grid, col, row) {\n\t\tif (!grid[_].drawCells[row]) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !!grid[_].drawCells[row][col];\n\t}\n\tfunction _putCellDrawing(grid, col, row, context) {\n\t\tif (!grid[_].drawCells[row]) {\n\t\t\tgrid[_].drawCells[row] = {};\n\t\t}\n\t\tgrid[_].drawCells[row][col] = context;\n\t}\n\tfunction _removeCellDrawing(grid, col, row) {\n\t\tif (!grid[_].drawCells[row]) {\n\t\t\treturn;\n\t\t}\n\t\tdelete grid[_].drawCells[row][col];\n\t\tif (Object.keys(grid[_].drawCells[row]).length === 0) {\n\t\t\tdelete grid[_].drawCells[row];\n\t\t}\n\t}\n\tfunction _drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft) {\n\t\tconst rect = new Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\n\n\t\tconst drawRect = Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\n\n\t\tif (drawRect.height > 0 && drawRect.width > 0) {\n\t\t\tctx.save();\n\t\t\tconst dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, _isCellDrawing(grid, col, row), grid[_].selection);\n\t\t\tconst p = grid.onDrawCell(col, row, dcContext);\n\t\t\tif (isPromise(p)) {\n\t\t\t\t//\n\t\t\t\t_putCellDrawing(grid, col, row, dcContext);\n\n\t\t\t\tconst pCol = col;\n\t\t\t\tdcContext._delayMode(grid, () => {\n\t\t\t\t\t_removeCellDrawing(grid, pCol, row);\n\t\t\t\t});\n\t\t\t\tp.then(() => {\n\t\t\t\t\tdcContext.terminate();\n\t\t\t\t});\n\t\t\t}\n\t\t\tctx.restore();\n\t\t}\n\t}\n\n\tfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop) {\n\t\tconst colCount = grid[_].colCount;\n\t\tconst drawOuter = (col, absoluteLeft) => {\n\t\t\t//\n\t\t\tif (col >= colCount - 1 && grid[_].canvas.width > absoluteLeft - visibleRect.left) {\n\t\t\t\tconst outerLeft = absoluteLeft - visibleRect.left;\n\t\t\t\tctx.save();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\n\t\t\t\tctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\n\t\t\t\tctx.fill();\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t};\n\n\t\tlet skipAbsoluteLeft = 0;\n\t\tif (initFrozenCol) {\n\t\t\tlet absoluteLeft = initFrozenCol.left;\n\t\t\tconst count = grid[_].frozenColCount;\n\t\t\tfor (let col = initFrozenCol.col; col < count; col++) {\n\t\t\t\tconst width = _getColWidth(grid, col);\n\n\t\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0);\n\n\t\t\t\tabsoluteLeft += width;\n\t\t\t\tif (drawRight <= absoluteLeft) {\n\t\t\t\t\t//\n\t\t\t\t\tdrawOuter(col, absoluteLeft);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tskipAbsoluteLeft = absoluteLeft;\n\t\t}\n\n\t\tlet absoluteLeft = initCol.left;\n\t\tfor (let col = initCol.col; col < colCount; col++) {\n\t\t\tconst width = _getColWidth(grid, col);\n\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft);\n\n\t\t\tabsoluteLeft += width;\n\t\t\tif (drawRight <= absoluteLeft) {\n\t\t\t\t//\n\t\t\t\tdrawOuter(col, absoluteLeft);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdrawOuter(colCount - 1, absoluteLeft);\n\t}\n\tfunction _invalidateRect(grid, drawRect) {\n\t\tconst visibleRect = _getVisibleRect(grid);\n\t\tconst rowCount = grid[_].rowCount;\n\t\tconst ctx = grid._getInitContext();\n\n\t\tconst initRow = _getTargetRowAt(grid, Math.max(visibleRect.top, drawRect.top)) || {\n\t\t\ttop: _getRowsHeight(grid, 0, rowCount - 1),\n\t\t\trow: rowCount\n\t\t};\n\t\tconst initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\n\t\t\tleft: _getColsWidth(grid, 0, grid[_].colCount - 1),\n\t\t\tcol: grid[_].colCount\n\t\t};\n\t\tconst drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\n\t\tconst drawRight = Math.min(visibleRect.right, drawRect.right);\n\n\t\tconst initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\n\t\tconst initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\n\n\t\tconst drawOuter = (row, absoluteTop) => {\n\t\t\t//\n\t\t\tif (row >= rowCount - 1 && grid[_].canvas.height > absoluteTop - visibleRect.top) {\n\t\t\t\tconst outerTop = absoluteTop - visibleRect.top;\n\t\t\t\tctx.save();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\n\t\t\t\tctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\n\t\t\t\tctx.fill();\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t};\n\n\t\tlet skipAbsoluteTop = 0;\n\t\tif (initFrozenRow) {\n\t\t\tlet absoluteTop = initFrozenRow.top;\n\t\t\tconst count = grid[_].frozenRowCount;\n\t\t\tfor (let row = initFrozenRow.row; row < count; row++) {\n\t\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\t\t_drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0);\n\t\t\t\tabsoluteTop += height;\n\t\t\t\tif (drawBottom <= absoluteTop) {\n\t\t\t\t\t//\n\t\t\t\t\tdrawOuter(row, absoluteTop);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tskipAbsoluteTop = absoluteTop;\n\t\t}\n\n\t\tlet absoluteTop = initRow.top;\n\t\tfor (let row = initRow.row; row < rowCount; row++) {\n\t\t\tconst height = _getRowHeight(grid, row);\n\n\t\t\t//\n\t\t\t_drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop);\n\n\t\t\tabsoluteTop += height;\n\t\t\tif (drawBottom <= absoluteTop) {\n\t\t\t\t//\n\t\t\t\tdrawOuter(row, absoluteTop);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdrawOuter(rowCount - 1, absoluteTop);\n\t}\n\n\tfunction _toPxWidth(grid, width) {\n\t\treturn Math.round(calc.toPx(width, grid[_].calcWidthContext));\n\t}\n\n\tfunction _getDefaultColPxWidth(grid) {\n\t\treturn _toPxWidth(grid, grid.defaultColWidth);\n\t}\n\n\tfunction _adjustColWidth(grid, col, orgWidth) {\n\t\tconst limit = grid[_].colWidthsLimit[col];\n\t\tif (!limit) {\n\t\t\treturn orgWidth;\n\t\t}\n\n\t\tif (limit.min) {\n\t\t\tconst min = _toPxWidth(grid, limit.min);\n\t\t\tif (min > orgWidth) {\n\t\t\t\treturn min;\n\t\t\t}\n\t\t}\n\t\tif (limit.max) {\n\t\t\tconst max = _toPxWidth(grid, limit.max);\n\t\t\tif (max < orgWidth) {\n\t\t\t\treturn max;\n\t\t\t}\n\t\t}\n\t\treturn orgWidth;\n\t}\n\n\tfunction _getColWidth(grid, col) {\n\t\tconst width = grid[_].colWidthsMap.get(col);\n\t\tif (width) {\n\t\t\treturn _adjustColWidth(grid, col, _toPxWidth(grid, width));\n\t\t}\n\t\treturn _getDefaultColPxWidth(grid);\n\t}\n\tfunction _setColWidth(grid, col, width) {\n\t\tgrid[_].colWidthsMap.put(col, width);\n\t}\n\tfunction _getColsWidth(grid, startCol, endCol) {\n\t\tconst colCount = endCol - startCol + 1;\n\t\tlet w = _getDefaultColPxWidth(grid) * colCount;\n\t\tgrid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\n\t\t});\n\t\treturn w;\n\t}\n\n\tfunction _getRowHeight(grid, row) {\n\t\tconst internal = grid.getRowHeightInternal(row);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tconst height = grid[_].rowHeightsMap.get(row);\n\t\tif (height) {\n\t\t\treturn height;\n\t\t}\n\t\treturn grid[_].defaultRowHeight;\n\t}\n\tfunction _setRowHeight(grid, row, height) {\n\t\tgrid[_].rowHeightsMap.put(row, height);\n\t}\n\tfunction _getRowsHeight(grid, startRow, endRow) {\n\t\tconst internal = grid.getRowsHeightInternal(startRow, endRow);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tconst rowCount = endRow - startRow + 1;\n\t\tlet h = grid[_].defaultRowHeight * rowCount;\n\t\tgrid[_].rowHeightsMap.each(startRow, endRow, height => {\n\t\t\th += height - grid[_].defaultRowHeight;\n\t\t});\n\t\treturn h;\n\t}\n\n\tfunction _getScrollWidth(grid) {\n\t\tlet w = _getDefaultColPxWidth(grid) * grid[_].colCount;\n\t\tgrid[_].colWidthsMap.eachAll((width, col) => {\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\n\t\t});\n\t\treturn w;\n\t}\n\tfunction _getScrollHeight(grid, row) {\n\t\tconst internal = grid.getScrollHeightInternal(row);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tlet h = grid[_].defaultRowHeight * grid[_].rowCount;\n\t\tgrid[_].rowHeightsMap.eachAll(height => {\n\t\t\th += height - grid[_].defaultRowHeight;\n\t\t});\n\t\treturn h;\n\t}\n\tfunction _onScroll(grid, e) {\n\t\tconst lastLeft = grid[_].scroll.left;\n\t\tconst lastTop = grid[_].scroll.top;\n\t\tconst moveX = grid[_].scrollable.scrollLeft - lastLeft;\n\t\tconst moveY = grid[_].scrollable.scrollTop - lastTop;\n\n\t\t//\n\t\tgrid[_].scroll = {\n\t\t\tleft: grid[_].scrollable.scrollLeft,\n\t\t\ttop: grid[_].scrollable.scrollTop\n\t\t};\n\t\tconst visibleRect = _getVisibleRect(grid);\n\t\tif (Math.abs(moveX) >= visibleRect.width || Math.abs(moveY) >= visibleRect.height) {\n\t\t\t//\n\t\t\t_invalidateRect(grid, visibleRect);\n\t\t} else {\n\t\t\t//\n\t\t\tgrid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\n\n\t\t\tif (moveX !== 0) {\n\t\t\t\t//\n\t\t\t\tconst redrawRect = visibleRect.copy();\n\t\t\t\tif (moveX < 0) {\n\t\t\t\t\tredrawRect.width = -moveX;\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tconst frozenRect = _getFrozenColsRect(grid);\n\t\t\t\t\t\tredrawRect.width += frozenRect.width;\n\t\t\t\t\t}\n\t\t\t\t} else if (moveX > 0) {\n\t\t\t\t\tredrawRect.left = redrawRect.right - moveX;\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t_invalidateRect(grid, redrawRect);\n\n\t\t\t\tif (moveX > 0) {\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenColsRect(grid));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (moveY !== 0) {\n\t\t\t\t//\n\t\t\t\tconst redrawRect = visibleRect.copy();\n\t\t\t\tif (moveY < 0) {\n\t\t\t\t\tredrawRect.height = -moveY;\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\n\t\t\t\t\t\tredrawRect.height += frozenRect.height;\n\t\t\t\t\t}\n\t\t\t\t} else if (moveY > 0) {\n\t\t\t\t\tredrawRect.top = redrawRect.bottom - moveY;\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t_invalidateRect(grid, redrawRect);\n\n\t\t\t\tif (moveY > 0) {\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenRowsRect(grid));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _onKeyDownMove(grid, e) {\n\t\tconst shiftKey = e.shiftKey;\n\t\tconst keyCode = getKeyCode(e);\n\t\tconst focusCell = shiftKey ? grid.selection._focus : grid.selection._sel;\n\t\tif (keyCode === KEY_LEFT) {\n\t\t\tconst col = grid.getMoveLeftColByKeyDownInternal(focusCell);\n\t\t\tif (col < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_UP) {\n\t\t\tconst row = grid.getMoveUpRowByKeyDownInternal(focusCell);\n\t\t\tif (row < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_RIGHT) {\n\t\t\tconst col = grid.getMoveRightColByKeyDownInternal(focusCell);\n\t\t\tif (grid.colCount <= col) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_DOWN) {\n\t\t\tconst row = grid.getMoveDownRowByKeyDownInternal(focusCell);\n\t\t\tif (grid.rowCount <= row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_HOME) {\n\t\t\tconst row = e.ctrlKey ? 0 : focusCell.row;\n\t\t\t_moveFocusCell(grid, 0, row, e.shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_END) {\n\t\t\tconst row = e.ctrlKey ? grid.rowCount - 1 : focusCell.row;\n\t\t\t_moveFocusCell(grid, grid.colCount - 1, row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t}\n\t}\n\tfunction _moveFocusCell(grid, col, row, shiftKey) {\n\t\tconst offset = grid.getOffsetInvalidateCells();\n\n\t\tfunction extendRange(range) {\n\t\t\tif (offset > 0) {\n\t\t\t\trange.start.col -= offset;\n\t\t\t\trange.start.row -= offset;\n\t\t\t\trange.end.col += offset;\n\t\t\t\trange.end.row += offset;\n\t\t\t}\n\t\t\treturn range;\n\t\t}\n\n\t\tconst beforeRange = extendRange(grid.selection.range);\n\t\tconst beforeRect = grid.getCellsRect(beforeRange.start.col, beforeRange.start.row, beforeRange.end.col, beforeRange.end.row);\n\n\t\tgrid.selection._setFocusCell(col, row, shiftKey);\n\t\tgrid.makeVisibleCell(col, row);\n\t\tgrid.focusCell(col, row);\n\n\t\tconst afterRange = extendRange(grid.selection.range);\n\t\tconst afterRect = grid.getCellsRect(afterRange.start.col, afterRange.start.row, afterRange.end.col, afterRange.end.row);\n\n\t\tif (afterRect.intersection(beforeRect)) {\n\t\t\tconst invalidateRect = Rect.max(afterRect, beforeRect);\n\t\t\t_invalidateRect(grid, invalidateRect);\n\t\t} else {\n\t\t\t_invalidateRect(grid, beforeRect);\n\t\t\t_invalidateRect(grid, afterRect);\n\t\t}\n\t}\n\tfunction _getMouseAbstractPoint(grid, e) {\n\t\tif (isTouchEvent(e)) {\n\t\t\te = e.changedTouches[0];\n\t\t}\n\t\tconst clientX = e.clientX || e.pageX + window.scrollX;\n\t\tconst clientY = e.clientY || e.pageY + window.scrollY;\n\t\tconst rect = grid[_].canvas.getBoundingClientRect();\n\t\tif (rect.right <= clientX) {\n\t\t\treturn null;\n\t\t}\n\t\tif (rect.bottom <= clientY) {\n\t\t\treturn null;\n\t\t}\n\t\tconst x = clientX - rect.left + grid[_].scroll.left;\n\t\tconst y = clientY - rect.top + grid[_].scroll.top;\n\t\treturn { x, y };\n\t}\n\n\tfunction _bindEvents(grid) {\n\t\tconst getCellEventArgsSet = e => {\n\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\n\t\t\tif (!abstractPos) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\t\t\tif (cell.col < 0 || cell.row < 0) {\n\t\t\t\treturn {\n\t\t\t\t\tabstractPos,\n\t\t\t\t\tcell\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst eventArgs = {\n\t\t\t\tcol: cell.col,\n\t\t\t\trow: cell.row,\n\t\t\t\tevent: e\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tabstractPos,\n\t\t\t\tcell,\n\t\t\t\teventArgs\n\t\t\t};\n\t\t};\n\t\tconst canResizeColumn = col => {\n\t\t\tconst limit = grid[_].colWidthsLimit[col];\n\t\t\tif (!limit || !limit.min || !limit.max) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn limit.max !== limit.min;\n\t\t};\n\t\tgrid[_].handler.on(grid[_].element, 'mousedown', e => {\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\n\t\t\tconst { abstractPos, eventArgs } = eventArgsSet;\n\t\t\tif (!abstractPos) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (eventArgs) {\n\t\t\t\tconst results = grid.fireListeners(EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\n\t\t\t\tif (array.findIndex(results, v => !v) >= 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (getMouseButtons(e) !== 1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n\t\t\t\t//\n\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\n\t\t\t} else {\n\t\t\t\t//\n\t\t\t\tgrid[_].cellSelector.start(e);\n\t\t\t}\n\t\t});\n\t\tlet doubleTapBefore = false;\n\t\tlet longTouchId = null;\n\t\tgrid[_].handler.on(grid[_].element, 'touchstart', e => {\n\n\t\t\tif (!doubleTapBefore) {\n\t\t\t\tdoubleTapBefore = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tdoubleTapBefore = false;\n\t\t\t\t}, 350);\n\t\t\t} else {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tconst { eventArgs } = getCellEventArgsSet(e);\n\t\t\t\tif (eventArgs) {\n\t\t\t\t\tconst cell = {\n\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t};\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.DBLTAP_CELL, cell);\n\t\t\t\t}\n\n\t\t\t\tdoubleTapBefore = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlongTouchId = setTimeout(() => {\n\t\t\t\t//\n\t\t\t\tlongTouchId = null;\n\t\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\n\t\t\t\tif (!abstractPos) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\n\t\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n\t\t\t\t\t//\n\t\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\n\t\t\t\t} else {\n\t\t\t\t\t//\n\t\t\t\t\tgrid[_].cellSelector.start(e);\n\t\t\t\t}\n\t\t\t}, 500);\n\t\t});\n\n\t\tfunction cancel(e) {\n\t\t\tif (longTouchId) {\n\t\t\t\tclearTimeout(longTouchId);\n\t\t\t\tlongTouchId = null;\n\t\t\t}\n\t\t}\n\t\tgrid[_].handler.on(grid[_].element, 'touchcancel', cancel);\n\t\tgrid[_].handler.on(grid[_].element, 'touchmove', cancel);\n\t\tgrid[_].handler.on(grid[_].element, 'touchend', e => {\n\t\t\tif (longTouchId) {\n\t\t\t\tclearTimeout(longTouchId);\n\t\t\t\tgrid[_].cellSelector.select(e);\n\t\t\t\tlongTouchId = null;\n\t\t\t}\n\t\t});\n\n\t\tlet isMouseover = false;\n\t\tlet mouseEnterCell = null;\n\t\tlet mouseOverCell = null;\n\t\tfunction onMouseenterCell(cell) {\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEENTER_CELL, cell);\n\t\t\tmouseEnterCell = cell;\n\t\t}\n\t\tfunction onMouseleaveCell() {\n\t\t\tconst beforeMouseCell = mouseEnterCell;\n\t\t\tmouseEnterCell = null;\n\t\t\tif (beforeMouseCell) {\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSELEAVE_CELL, {\n\t\t\t\t\tcol: beforeMouseCell.col,\n\t\t\t\t\trow: beforeMouseCell.row\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tfunction onMouseoverCell(cell) {\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOVER_CELL, cell);\n\t\t\tmouseOverCell = cell;\n\t\t}\n\t\tfunction onMouseoutCell() {\n\t\t\tconst beforeMouseCell = mouseOverCell;\n\t\t\tmouseOverCell = null;\n\t\t\tif (beforeMouseCell) {\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOUT_CELL, {\n\t\t\t\t\tcol: beforeMouseCell.col,\n\t\t\t\t\trow: beforeMouseCell.row\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tconst scrollElement = grid[_].scrollable.getElement();\n\t\tgrid[_].handler.on(scrollElement, 'mouseover', e => {\n\t\t\tisMouseover = true;\n\t\t});\n\t\tgrid[_].handler.on(scrollElement, 'mouseout', e => {\n\t\t\tisMouseover = false;\n\t\t\tonMouseoutCell();\n\t\t});\n\n\t\tgrid[_].handler.on(grid[_].element, 'mouseleave', e => {\n\t\t\tonMouseleaveCell();\n\t\t});\n\n\t\tgrid[_].handler.on(grid[_].element, 'mousemove', e => {\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\n\t\t\tconst { abstractPos, eventArgs } = eventArgsSet;\n\t\t\tif (eventArgs) {\n\t\t\t\tconst beforeMouseCell = mouseEnterCell;\n\t\t\t\tif (beforeMouseCell) {\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\t\t\t\t\tif (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\n\t\t\t\t\t\tonMouseoutCell();\n\t\t\t\t\t\tonMouseleaveCell();\n\t\t\t\t\t\tconst cell = {\n\t\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t\t};\n\t\t\t\t\t\tonMouseenterCell(cell);\n\t\t\t\t\t\tif (isMouseover) {\n\t\t\t\t\t\t\tonMouseoverCell(cell);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (isMouseover && !mouseOverCell) {\n\t\t\t\t\t\tonMouseoverCell({\n\t\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst cell = {\n\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t};\n\t\t\t\t\tonMouseenterCell(cell);\n\t\t\t\t\tif (isMouseover) {\n\t\t\t\t\t\tonMouseoverCell(cell);\n\t\t\t\t\t}\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tonMouseoutCell();\n\t\t\t\tonMouseleaveCell();\n\t\t\t}\n\t\t\tif (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst style = grid[_].element.style;\n\t\t\tif (!abstractPos) {\n\t\t\t\tif (style.cursor === 'col-resize') {\n\t\t\t\t\tstyle.cursor = '';\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n\t\t\t\tstyle.cursor = 'col-resize';\n\t\t\t} else {\n\t\t\t\tif (style.cursor === 'col-resize') {\n\t\t\t\t\tstyle.cursor = '';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tgrid[_].handler.on(grid[_].element, 'click', e => {\n\t\t\tif (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.CLICK_CELL)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { eventArgs } = getCellEventArgsSet(e);\n\t\t\tif (!eventArgs) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.fireListeners(EVENT_TYPE.CLICK_CELL, eventArgs);\n\t\t});\n\t\tgrid[_].handler.on(grid[_].element, 'dblclick', e => {\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.DBLCLICK_CELL)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { eventArgs } = getCellEventArgsSet(e);\n\t\t\tif (!eventArgs) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.fireListeners(EVENT_TYPE.DBLCLICK_CELL, eventArgs);\n\t\t});\n\t\tgrid[_].focusControl.listen('keydown', (keyCode, e) => {\n\t\t\tgrid.fireListeners(EVENT_TYPE.KEYDOWN, keyCode, e);\n\t\t});\n\t\tgrid[_].selection.listen(EVENT_TYPE.SELECTED_CELL, data => {\n\t\t\tgrid.fireListeners(EVENT_TYPE.SELECTED_CELL, {\n\t\t\t\tcol: data.col,\n\t\t\t\trow: data.row\n\t\t\t}, data.selected);\n\t\t});\n\n\t\tgrid[_].scrollable.onScroll(e => {\n\t\t\t_onScroll(grid, e);\n\t\t\tgrid.fireListeners(EVENT_TYPE.SCROLL, { event: e });\n\t\t});\n\t\tgrid[_].focusControl.onKeyDownMove(e => {\n\t\t\t_onKeyDownMove(grid, e);\n\t\t});\n\t\tgrid.listen('copydata', range => {\n\t\t\tlet copyValue = '';\n\t\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\t\tfor (let col = range.start.col; col <= range.end.col; col++) {\n\t\t\t\t\tconst copyCellValue = grid.getCopyCellValue(col, row);\n\t\t\t\t\tif (window.Promise && copyCellValue instanceof window.Promise) {\n\t\t\t\t\t\t//\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst strCellValue = '' + copyCellValue;\n\t\t\t\t\t\tif (strCellValue.match(/^\\[object .*\\]$/)) {\n\t\t\t\t\t\t\t//object \n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcopyValue += strCellValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (col < range.end.col) {\n\t\t\t\t\t\tcopyValue += '\\t';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcopyValue += '\\n';\n\t\t\t}\n\t\t\treturn copyValue;\n\t\t});\n\t\tgrid[_].focusControl.onCopy(e => array.find(grid.fireListeners('copydata', grid[_].selection.range), isDef));\n\t\tgrid[_].focusControl.onInput(value => {\n\t\t\tconst { col, row } = grid[_].selection.select;\n\t\t\tgrid.fireListeners(EVENT_TYPE.INPUT_CELL, { col, row, value });\n\t\t});\n\t\tgrid.bindEventsInternal();\n\t}\n\n\tfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\n\t\tif (grid[_].frozenRowCount <= 0) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst frozenRect = _getFrozenRowsRect(grid);\n\t\tif (!frozenRect.inPoint(abstractX, abstractY)) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst cell = grid.getCellAt(abstractX, abstractY);\n\t\tconst cellRect = grid.getCellRect(cell.col, cell.row);\n\t\tif (abstractX < cellRect.left + offset) {\n\t\t\treturn cell.col - 1;\n\t\t}\n\t\tif (cellRect.right - offset < abstractX) {\n\t\t\treturn cell.col;\n\t\t}\n\t\treturn -1;\n\t}\n\tfunction _getVisibleRect(grid) {\n\t\treturn new Rect(grid[_].scroll.left, grid[_].scroll.top, grid[_].canvas.width, grid[_].canvas.height);\n\t}\n\tfunction _getScrollableVisibleRect(grid) {\n\t\tlet frozenColsWidth = 0;\n\t\tif (grid[_].frozenColCount > 0) {\n\t\t\t//\n\t\t\tconst frozenRect = _getFrozenColsRect(grid);\n\t\t\tfrozenColsWidth = frozenRect.width;\n\t\t}\n\t\tlet frozenRowsHeight = 0;\n\t\tif (grid[_].frozenRowCount > 0) {\n\t\t\t//\n\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\n\t\t\tfrozenRowsHeight = frozenRect.height;\n\t\t}\n\t\treturn new Rect(grid[_].scroll.left + frozenColsWidth, grid[_].scroll.top + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\n\t}\n\n\tfunction _toRelativeRect(grid, absoluteRect) {\n\t\tconst rect = absoluteRect.copy();\n\t\tconst visibleRect = _getVisibleRect(grid);\n\t\trect.offsetLeft(-visibleRect.left);\n\t\trect.offsetTop(-visibleRect.top);\n\n\t\treturn rect;\n\t}\n\t//end private methods\n\t//\n\t//\n\t//\n\t//\n\n\t/**\r\n  * managing mouse down moving\r\n  * @private\r\n  */\n\tclass BaseMouseDownMover {\n\t\tconstructor(grid) {\n\t\t\tthis._grid = grid;\n\t\t\tthis._handler = new EventHandler();\n\t\t\tthis._events = {};\n\t\t\tthis._started = false;\n\t\t\tthis._moved = false;\n\t\t}\n\t\tmoving(e) {\n\t\t\treturn !!this._started;\n\t\t}\n\t\tlastMoving(e) {\n\t\t\t// mouseupclick\n\t\t\tif (this.moving(e)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst last = this._mouseEndPoint;\n\t\t\tif (!last) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst pt = _getMouseAbstractPoint(this._grid, e);\n\t\t\treturn pt.x === last.x && pt.y === last.y;\n\t\t}\n\t\t_bindMoveAndUp(e) {\n\t\t\tif (!isTouchEvent(e)) {\n\t\t\t\tthis._events.mousemove = this._handler.on(document.body, 'mousemove', e => this._mouseMove(e));\n\t\t\t\tthis._events.mouseup = this._handler.on(document.body, 'mouseup', e => this._mouseUp(e));\n\t\t\t} else {\n\t\t\t\tthis._events.touchmove = this._handler.on(document.body, 'touchmove', e => this._mouseMove(e), { passive: false });\n\t\t\t\tthis._events.touchend = this._handler.on(document.body, 'touchend', e => this._mouseUp(e));\n\t\t\t\tthis._events.touchcancel = this._handler.on(document.body, 'touchcancel', e => this._mouseUp(e));\n\t\t\t}\n\t\t\tthis._started = true;\n\t\t\tthis._moved = false;\n\t\t}\n\t\t_mouseMove(e) {\n\t\t\tif (!isTouchEvent(e)) {\n\t\t\t\tif (getMouseButtons(e) !== 1) {\n\t\t\t\t\tthis._mouseUp(e);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\n\n\t\t\tcancelEvent(e);\n\t\t}\n\t\t_moveInternal(e) {\n\t\t\t//protected\n\t\t}\n\t\t_mouseUp(e) {\n\t\t\tthis._handler.off(this._events.mousemove);\n\t\t\tthis._handler.off(this._events.touchmove);\n\t\t\tthis._handler.off(this._events.mouseup);\n\t\t\tthis._handler.off(this._events.touchend);\n\t\t\t// this._handler.off(this._events.mouseleave);\n\t\t\tthis._handler.off(this._events.touchcancel);\n\n\t\t\tthis._started = false;\n\n\t\t\tthis._upInternal(e);\n\n\t\t\t// mouseupclick\n\t\t\tif (this._moved) {\n\t\t\t\t//\n\t\t\t\tthis._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._mouseEndPoint = null;\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t\t_upInternal(e) {\n\t\t\t//protected\n\t\t}\n\t\tdispose() {\n\t\t\tthis._handler.dispose();\n\t\t}\n\t}\n\n\t/**\r\n  * managing cell selection operation with mouse\r\n  * @private\r\n  */\n\tclass CellSelector extends BaseMouseDownMover {\n\t\tstart(e) {\n\t\t\tconst cell = this._getTargetCell(e);\n\t\t\tif (!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\n\n\t\t\tthis._bindMoveAndUp(e);\n\n\t\t\tthis._cell = cell;\n\n\t\t\tcancelEvent(e);\n\t\t\t_vibrate(e);\n\t\t}\n\t\tselect(e) {\n\t\t\tconst cell = this._getTargetCell(e);\n\t\t\tif (!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\n\t\t\tthis._cell = cell;\n\t\t}\n\t\t_moveInternal(e) {\n\t\t\tconst cell = this._getTargetCell(e);\n\t\t\tif (!cell || this._cell.col === cell.col && this._cell.row === cell.row) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, true);\n\n\t\t\t//make visible\n\t\t\tconst makeVisibleCol = (() => {\n\t\t\t\tif (cell.col < this._cell.col && 0 < cell.col) {\n\t\t\t\t\t// move left\n\t\t\t\t\treturn cell.col - 1;\n\t\t\t\t} else if (this._cell.col < cell.col && cell.col + 1 < this._grid.colCount) {\n\t\t\t\t\t// move right\n\t\t\t\t\treturn cell.col + 1;\n\t\t\t\t}\n\t\t\t\treturn cell.col;\n\t\t\t})();\n\t\t\tconst makeVisibleRow = (() => {\n\t\t\t\tif (cell.row < this._cell.row && 0 < cell.row) {\n\t\t\t\t\t// move up\n\t\t\t\t\treturn cell.row - 1;\n\t\t\t\t} else if (this._cell.row < cell.row && cell.row + 1 < this._grid.rowCount) {\n\t\t\t\t\t// move down\n\t\t\t\t\treturn cell.row + 1;\n\t\t\t\t}\n\t\t\t\treturn cell.row;\n\t\t\t})();\n\t\t\tif (makeVisibleCol !== cell.col || makeVisibleRow !== cell.row) {\n\t\t\t\tthis._grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\n\t\t\t}\n\t\t\tthis._cell = cell;\n\t\t\treturn true;\n\t\t}\n\t\t_getTargetCell(e) {\n\t\t\tconst abstractPos = _getMouseAbstractPoint(this._grid, e);\n\t\t\tif (!abstractPos) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst cell = this._grid.getCellAt(abstractPos.x, abstractPos.y);\n\t\t\tif (cell.col < 0 || cell.row < 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn cell;\n\t\t}\n\t}\n\t/**\r\n  * managing row width changing operation with mouse\r\n  * @private\r\n  */\n\tclass ColumnResizer extends BaseMouseDownMover {\n\t\tconstructor(grid) {\n\t\t\tsuper(grid);\n\t\t\tthis._targetCol = -1;\n\t\t}\n\t\tstart(col, e) {\n\t\t\tlet pageX;\n\t\t\tif (!isTouchEvent(e)) {\n\t\t\t\tpageX = e.pageX;\n\t\t\t} else {\n\t\t\t\tpageX = e.changedTouches[0].pageX;\n\t\t\t}\n\n\t\t\tthis._x = pageX;\n\t\t\tthis._preX = 0;\n\n\t\t\tthis._bindMoveAndUp(e);\n\n\t\t\tthis._targetCol = col;\n\t\t\tthis._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\n\n\t\t\tcancelEvent(e);\n\t\t\t_vibrate(e);\n\t\t}\n\t\t_moveInternal(e) {\n\t\t\tconst pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\n\n\t\t\tconst x = pageX - this._x;\n\t\t\tconst moveX = x - this._preX;\n\t\t\tthis._preX = x;\n\t\t\tconst pre = this._grid.getColWidth(this._targetCol);\n\t\t\tlet afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\n\t\t\tif (afterSize < 10 && moveX < 0) {\n\t\t\t\tafterSize = 10;\n\t\t\t}\n\t\t\t_setColWidth(this._grid, this._targetCol, afterSize);\n\n\t\t\tconst rect = _getVisibleRect(this._grid);\n\t\t\trect.left = this._invalidateAbsoluteLeft;\n\t\t\t_invalidateRect(this._grid, rect);\n\n\t\t\tthis._grid.fireListeners(EVENT_TYPE.RESIZE_COLUMN, { col: this._targetCol });\n\n\t\t\treturn true;\n\t\t}\n\t\t_upInternal(e) {\n\t\t\tthis._grid.updateScroll();\n\t\t}\n\t}\n\n\tfunction setSafeInputValue(input, value) {\n\t\tconst type = input.type;\n\t\tinput.type = '';\n\t\tinput.value = value;\n\t\tif (type) {\n\t\t\tinput.type = type;\n\t\t}\n\t}\n\n\t/**\r\n  * Manage focus\r\n  * @private\r\n  */\n\tclass FocusControl extends EventTarget {\n\t\tconstructor(grid, parentElement, scrollable) {\n\t\t\tsuper();\n\t\t\tthis._grid = grid;\n\t\t\tthis._scrollable = scrollable;\n\t\t\tthis._handler = new EventHandler();\n\t\t\tthis._input = document.createElement('input');\n\t\t\tthis._input.classList.add('grid-focus-control');\n\t\t\tthis._input.readOnly = true;\n\t\t\tparentElement.appendChild(this._input);\n\n\t\t\tthis._handler.on(this._input, 'compositionstart', e => {\n\t\t\t\tthis._input.classList.add('composition');\n\t\t\t\tthis._isComposition = true;\n\t\t\t\tgrid.focus();\n\t\t\t});\n\t\t\tthis._handler.on(this._input, 'compositionend', e => {\n\t\t\t\tthis._isComposition = false;\n\t\t\t\tthis._input.classList.remove('composition');\n\t\t\t\tif (!this._input.readOnly) {\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t});\n\t\t\tthis._handler.on(this._input, 'keypress', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!this._input.readOnly && e.key && e.key.length === 1) {\n\t\t\t\t\tif (e.key === 'c' && (e.ctrlKey || e.metaKey)) {\n\t\t\t\t\t\t//copy! for Firefox\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.fireListeners('input', e.key);\n\t\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t});\n\t\t\tthis._handler.on(this._input, 'keydown', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst keyCode = getKeyCode(e);\n\t\t\t\tthis.fireListeners('keydown', keyCode, e);\n\n\t\t\t\tif (this._input.value) {\n\t\t\t\t\t// for Safari\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\n\t\t\t\t}\n\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t});\n\t\t\tthis._handler.on(document, 'keydown', e => {\n\t\t\t\tif (!browser.IE) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (e.target !== this._input) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst keyCode = getKeyCode(e);\n\t\t\t\tif (keyCode === KEY_ALPHA_C && e.ctrlKey) {\n\t\t\t\t\tsetSafeInputValue(this._input, 'dummy');\n\t\t\t\t\tthis._input.select();\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._handler.on(document, 'copy', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!isDescendantElement(parentElement, e.target)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t\tconst data = array.find(this.fireListeners('copy'), isDef);\n\t\t\t\tif (isDef(data)) {\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\tif (browser.IE) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', data); // IE\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', data); // Chrome, Firefox\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tonKeyDownMove(fn) {\n\t\t\tthis._handler.on(this._input, 'keydown', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst keyCode = getKeyCode(e);\n\t\t\t\tif (keyCode === KEY_LEFT || keyCode === KEY_UP || keyCode === KEY_RIGHT || keyCode === KEY_DOWN || keyCode === KEY_HOME || keyCode === KEY_END) {\n\t\t\t\t\tfn(e);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tonInput(fn) {\n\t\t\treturn this.listen('input', fn);\n\t\t}\n\t\tonCopy(fn) {\n\t\t\treturn this.listen('copy', fn);\n\t\t}\n\t\tfocus() {\n\t\t\t// this._input.value = '';\n\t\t\tthis._input.focus();\n\t\t}\n\t\tsetFocusRect(rect) {\n\t\t\tconst top = this._scrollable.calcTop(rect.top);\n\t\t\tthis._input.style.top = (top - style.getScrollBarSize()).toFixed() + 'px'; //position:relative IE position:relative\n\t\t\tthis._input.style.left = rect.left.toFixed() + 'px';\n\t\t\tthis._input.style.width = rect.width.toFixed() + 'px';\n\t\t\tthis._input.style.height = rect.height.toFixed() + 'px';\n\t\t}\n\t\tset editMode(editMode) {\n\t\t\tthis._input.readOnly = !editMode;\n\t\t}\n\t\tresetInputStatus() {\n\t\t\tconst el = this._input;\n\t\t\tconst composition = el.classList.contains('composition');\n\n\t\t\tconst atts = el.attributes;\n\t\t\tconst removeNames = [];\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\n\t\t\t\tconst att = atts[i];\n\t\t\t\tif (!this._inputStatus.hasOwnProperty(att.nodeName)) {\n\t\t\t\t\tremoveNames.push(att.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremoveNames.forEach(removeName => {\n\t\t\t\tel.removeAttribute(removeName);\n\t\t\t});\n\t\t\tfor (const name in this._inputStatus) {\n\t\t\t\tel.setAttribute(name, this._inputStatus[name]);\n\t\t\t}\n\t\t\tif (composition) {\n\t\t\t\tel.classList.add('composition');\n\t\t\t} else {\n\t\t\t\tel.classList.remove('composition');\n\t\t\t}\n\t\t}\n\t\tstoreInputStatus() {\n\t\t\tconst el = this._input;\n\t\t\tthis._inputStatus = {};\n\t\t\tconst atts = el.attributes;\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\n\t\t\t\tconst att = atts[i];\n\t\t\t\tthis._inputStatus[att.name] = att.value;\n\t\t\t}\n\t\t}\n\t\tsetDefaultInputStatus() {\n\t\t\tthis._input.style.font = this._grid.font || '16px sans-serif';\n\t\t}\n\t\tget editMode() {\n\t\t\treturn !this._input.readOnly;\n\t\t}\n\t\tget input() {\n\t\t\treturn this._input;\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t\tthis._handler.dispose();\n\t\t}\n\t}\n\n\t/**\r\n  * Selected area management\r\n  */\n\tclass Selection extends EventTarget {\n\t\tconstructor(grid) {\n\t\t\tsuper();\n\t\t\tthis._grid = grid;\n\n\t\t\tthis._sel = { col: 0, row: 0 };\n\t\t\tthis._focus = { col: 0, row: 0 };\n\n\t\t\tthis._start = { col: 0, row: 0 };\n\t\t\tthis._end = { col: 0, row: 0 };\n\t\t}\n\t\tget range() {\n\t\t\tconst startCol = Math.min(this._start.col, this._end.col);\n\t\t\tconst startRow = Math.min(this._start.row, this._end.row);\n\t\t\tconst endCol = Math.max(this._start.col, this._end.col);\n\t\t\tconst endRow = Math.max(this._start.row, this._end.row);\n\t\t\treturn {\n\t\t\t\tstart: {\n\t\t\t\t\tcol: startCol,\n\t\t\t\t\trow: startRow\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\tcol: endCol,\n\t\t\t\t\trow: endRow\n\t\t\t\t},\n\t\t\t\tinCell(col, row) {\n\t\t\t\t\treturn startCol <= col && col <= endCol && startRow <= row && row <= endRow;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tget select() {\n\t\t\treturn {\n\t\t\t\tcol: this._sel.col,\n\t\t\t\trow: this._sel.row\n\t\t\t};\n\t\t}\n\t\tset select(cell = {}) {\n\t\t\tthis._wrapFireSelectedEvent(() => {\n\t\t\t\tconst {\n\t\t\t\t\tcol = 0,\n\t\t\t\t\trow = 0\n\t\t\t\t} = cell;\n\t\t\t\tthis._setSelectCell(col, row);\n\t\t\t\tthis._setFocusCell(col, row, true);\n\t\t\t});\n\t\t}\n\t\t_setSelectCell(col, row) {\n\t\t\tthis._wrapFireSelectedEvent(() => {\n\t\t\t\tthis._sel = { col, row };\n\t\t\t\tthis._start = { col, row };\n\t\t\t});\n\t\t}\n\t\t_setFocusCell(col, row, keepSelect) {\n\t\t\tthis._wrapFireSelectedEvent(() => {\n\t\t\t\tif (!keepSelect) {\n\t\t\t\t\tthis._setSelectCell(col, row);\n\t\t\t\t}\n\t\t\t\tthis._focus = { col, row };\n\t\t\t\tthis._end = { col, row };\n\t\t\t});\n\t\t}\n\t\t_wrapFireSelectedEvent(callback) {\n\t\t\tif (this._isWraped) {\n\t\t\t\tcallback();\n\t\t\t} else {\n\t\t\t\tthis._isWraped = true;\n\t\t\t\ttry {\n\t\t\t\t\tconst before = {\n\t\t\t\t\t\tcol: this._sel.col,\n\t\t\t\t\t\trow: this._sel.row,\n\t\t\t\t\t\tselected: false\n\t\t\t\t\t};\n\t\t\t\t\tcallback();\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, before);\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, {\n\t\t\t\t\t\tcol: this._sel.col,\n\t\t\t\t\t\trow: this._sel.row,\n\t\t\t\t\t\tselected: true\n\t\t\t\t\t});\n\t\t\t\t} finally {\n\t\t\t\t\tthis._isWraped = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\r\n  * Context of cell drawing\r\n  */\n\tclass DrawCellContext {\n\t\t/**\r\n   * @private\r\n   */\n\t\tconstructor(col, row, ctx, rect, drawRect, drawing, selection) {\n\t\t\tthis._col = col;\n\t\t\tthis._row = row;\n\t\t\tthis._mode = 0;\n\t\t\tthis._ctx = ctx;\n\t\t\tthis._rect = rect;\n\t\t\tthis._drawRect = drawRect;\n\t\t\tthis._drawing = drawing;\n\t\t\tthis._selection = selection;\n\t\t}\n\t\tget drawing() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._drawing;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\tget row() {\n\t\t\treturn this._row;\n\t\t}\n\t\tget col() {\n\t\t\treturn this._col;\n\t\t}\n\t\t/**\r\n   * select status.\r\n   * @return {object} select status\r\n   */\n\t\tgetSelectState() {\n\t\t\tconst sel = this._selection.select;\n\t\t\treturn {\n\t\t\t\tselected: sel.col === this._col && sel.row === this._row,\n\t\t\t\tselection: this._selection.range.inCell(this._col, this._row)\n\t\t\t};\n\t\t}\n\t\t/**\r\n   * Canvas context.\r\n   * @return {CanvasRenderingContext2D} Canvas context.\r\n   */\n\t\tgetContext() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._ctx;\n\t\t\t} else {\n\t\t\t\treturn this._grid._getInitContext();\n\t\t\t}\n\t\t}\n\t\t/**\r\n   * Rectangle of cell.\r\n   * @return {Rect} rect Rectangle of cell.\r\n   */\n\t\tgetRect() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._rect;\n\t\t\t} else {\n\t\t\t\tif (this._rect) {\n\t\t\t\t\treturn this._rect;\n\t\t\t\t}\n\t\t\t\treturn this._grid.getCellRelativeRect(this._col, this._row);\n\t\t\t}\n\t\t}\n\t\tsetRect(rect) {\n\t\t\tthis._rect = rect;\n\t\t}\n\t\t/**\r\n   * Rectangle of Drawing range.\r\n   * @return {Rect} Rectangle of Drawing range.\r\n   */\n\t\tgetDrawRect() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._drawRect;\n\t\t\t} else {\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\n\t\t\t\treturn this._toRelativeDrawRect(absoluteRect);\n\t\t\t}\n\t\t}\n\t\t/**\r\n   * get Context of current state\r\n   * @return {DrawCellContext} current DrawCellContext.\r\n   */\n\t\ttoCurrentContext() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this;\n\t\t\t} else {\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\n\t\t\t\tconst rect = _toRelativeRect(this._grid, absoluteRect);\n\t\t\t\tconst drawRect = this._toRelativeDrawRect(absoluteRect);\n\t\t\t\tconst context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection);\n\t\t\t\t// toCurrentContext  toCurrentContext\n\t\t\t\tcontext.toCurrentContext = this.toCurrentContext.bind(this);\n\t\t\t\treturn context;\n\t\t\t}\n\t\t}\n\t\t_toRelativeDrawRect(absoluteRect) {\n\t\t\tconst visibleRect = _getVisibleRect(this._grid);\n\t\t\tlet rect = absoluteRect.copy();\n\t\t\tif (!rect.intersection(visibleRect)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst isFrozenCell = this._grid.isFrozenCell(this._col, this._row);\n\t\t\tif (this._grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\n\t\t\t\tconst fRect = this._grid.getCellRect(this._grid.frozenColCount - 1, this._row);\n\t\t\t\trect = Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\n\t\t\t}\n\t\t\tif (this._grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\n\t\t\t\tconst fRect = this._grid.getCellRect(this._col, this._grid.frozenRowCount - 1);\n\t\t\t\trect = Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\n\t\t\t}\n\n\t\t\tif (!rect.intersection(visibleRect)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\trect.offsetLeft(-visibleRect.left);\n\t\t\trect.offsetTop(-visibleRect.top);\n\n\t\t\treturn rect;\n\t\t}\n\t\t_delayMode(grid, onTerminate) {\n\t\t\tthis._mode = 1;\n\t\t\tthis._ctx = null;\n\t\t\tthis._rect = null;\n\t\t\tthis._drawRect = null;\n\t\t\tthis._grid = grid;\n\t\t\tthis._onTerminate = onTerminate;\n\t\t}\n\t\t/**\r\n   * terminate\r\n   * @return {void}\r\n   */\n\t\tterminate() {\n\t\t\tif (this._mode !== 0) {\n\t\t\t\tthis._onTerminate();\n\t\t\t}\n\t\t}\n\t}\n\t/**\r\n  * DrawGrid\r\n  * @classdesc cheetahGrid.core.DrawGrid\r\n  * @extends EventTarget\r\n  * @memberof cheetahGrid.core\r\n  */\n\tclass DrawGrid extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\t/**\r\n   * constructor\r\n   *\r\n   * <pre>\r\n   * Constructor options\r\n   * -----\r\n   * rowCount: grid row count.default 10\r\n   * colCount: grid col count.default 10\r\n   * frozenColCount: default 0\r\n   * frozenRowCount: default 0\r\n   * defaultRowHeight: default grid row height. default 40\r\n   * defaultColWidth: default grid col width. default 80\r\n   * parentElement: canvas parentElement\r\n   * font: default font\r\n   * underlayBackgroundColor: underlay background color\r\n   * -----\r\n   * </pre>\r\n   *\r\n   * @constructor\r\n   * @param  {Object} options Constructor options\r\n   */\n\t\tconstructor({\n\t\t\trowCount = 10,\n\t\t\tcolCount = 10,\n\t\t\tfrozenColCount = 0,\n\t\t\tfrozenRowCount = 0,\n\t\t\tdefaultRowHeight = 40,\n\t\t\tdefaultColWidth = 80,\n\t\t\tfont,\n\t\t\tunderlayBackgroundColor,\n\t\t\tparentElement\n\t\t} = {}) {\n\t\t\tsuper();\n\t\t\tthis[_] = {};\n\t\t\tstyle.initDocument();\n\t\t\tthis[_].element = createRootElement();\n\t\t\tthis[_].scrollable = new Scrollable();\n\t\t\tthis[_].handler = new EventHandler();\n\t\t\tthis[_].selection = new Selection(this);\n\t\t\tthis[_].focusControl = new FocusControl(this, this[_].scrollable.getElement(), this[_].scrollable);\n\n\t\t\tthis[_].canvas = hiDPI.transform(document.createElement('canvas'));\n\t\t\tthis[_].context = this[_].canvas.getContext('2d', { alpha: false });\n\n\t\t\tthis[_].rowCount = rowCount;\n\t\t\tthis[_].colCount = colCount;\n\t\t\tthis[_].frozenColCount = frozenColCount;\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\n\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\n\n\t\t\tthis[_].font = font;\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\n\n\t\t\t/////\n\t\t\tthis[_].rowHeightsMap = new NumberMap();\n\t\t\tthis[_].colWidthsMap = new NumberMap();\n\t\t\tthis[_].colWidthsLimit = {};\n\t\t\tthis[_].calcWidthContext = {\n\t\t\t\t_: this[_],\n\t\t\t\tget full() {\n\t\t\t\t\treturn this._.canvas.width;\n\t\t\t\t},\n\t\t\t\tget em() {\n\t\t\t\t\treturn this._.context.measureText('').width;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis[_].columnResizer = new ColumnResizer(this);\n\t\t\tthis[_].cellSelector = new CellSelector(this);\n\n\t\t\tthis[_].drawCells = {};\n\n\t\t\tthis[_].element.appendChild(this[_].canvas);\n\t\t\tthis[_].element.appendChild(this[_].scrollable.getElement());\n\t\t\tthis.updateScroll();\n\t\t\tif (parentElement) {\n\t\t\t\tparentElement.appendChild(this[_].element);\n\t\t\t\tthis.updateSize();\n\t\t\t} else {\n\t\t\t\tthis.updateSize();\n\t\t\t}\n\t\t\t_bindEvents(this);\n\t\t}\n\t\tgetElement() {\n\t\t\treturn this[_].element;\n\t\t}\n\t\tget canvas() {\n\t\t\treturn this[_].canvas;\n\t\t}\n\t\tfocus() {\n\t\t\tconst { col, row } = this[_].selection.select;\n\t\t\tthis.focusCell(col, row);\n\t\t}\n\t\tget selection() {\n\t\t\treturn this[_].selection;\n\t\t}\n\t\tget rowCount() {\n\t\t\treturn this[_].rowCount;\n\t\t}\n\t\tset rowCount(rowCount) {\n\t\t\tthis[_].rowCount = rowCount;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget colCount() {\n\t\t\treturn this[_].colCount;\n\t\t}\n\t\tset colCount(colCount) {\n\t\t\tthis[_].colCount = colCount;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget frozenColCount() {\n\t\t\treturn this[_].frozenColCount;\n\t\t}\n\t\tset frozenColCount(frozenColCount) {\n\t\t\tthis[_].frozenColCount = frozenColCount;\n\t\t}\n\t\tget frozenRowCount() {\n\t\t\treturn this[_].frozenRowCount;\n\t\t}\n\t\tset frozenRowCount(frozenRowCount) {\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\n\t\t}\n\t\tget defaultRowHeight() {\n\t\t\treturn this[_].rowCount;\n\t\t}\n\t\tset defaultRowHeight(defaultRowHeight) {\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget defaultColWidth() {\n\t\t\treturn this[_].defaultColWidth;\n\t\t}\n\t\tset defaultColWidth(defaultColWidth) {\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget font() {\n\t\t\treturn this[_].font;\n\t\t}\n\t\tset font(font) {\n\t\t\tthis[_].font = font;\n\t\t}\n\t\tget underlayBackgroundColor() {\n\t\t\treturn this[_].underlayBackgroundColor;\n\t\t}\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\n\t\t}\n\t\tconfigure(name, value) {\n\t\t\tconst cfg = this[_].config || (this[_].config = {});\n\t\t\tif (isDef(value)) {\n\t\t\t\tcfg[name] = value;\n\t\t\t}\n\t\t\treturn cfg[name];\n\t\t}\n\t\tupdateSize() {\n\t\t\t//\n\t\t\tthis[_].canvas.style.width = '';\n\t\t\tthis[_].canvas.style.height = '';\n\t\t\tconst width = Math.floor(this[_].canvas.offsetWidth ||\n\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetWidth - style.getScrollBarSize());\n\t\t\tconst height = Math.floor(this[_].canvas.offsetHeight ||\n\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetHeight - style.getScrollBarSize());\n\n\t\t\tthis[_].canvas.width = width;\n\t\t\tthis[_].canvas.height = height;\n\n\t\t\t//style\n\t\t\tthis[_].canvas.style.width = `${width}px`;\n\t\t\tthis[_].canvas.style.height = `${height}px`;\n\n\t\t\tconst sel = this[_].selection.select;\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\n\t\t}\n\t\tupdateScroll() {\n\t\t\tthis[_].scrollable.setScrollSize(_getScrollWidth(this), _getScrollHeight(this));\n\t\t\tthis[_].scroll = {\n\t\t\t\tleft: this[_].scrollable.scrollLeft,\n\t\t\t\ttop: this[_].scrollable.scrollTop\n\t\t\t};\n\t\t}\n\t\tgetRowHeight(row) {\n\t\t\treturn _getRowHeight(this, row);\n\t\t}\n\t\tsetRowHeight(row, height) {\n\t\t\t_setRowHeight(this, row, height);\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tgetColWidth(col) {\n\t\t\treturn _getColWidth(this, col);\n\t\t}\n\t\tsetColWidth(col, width) {\n\t\t\t_setColWidth(this, col, width);\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tgetMaxColWidth(col) {\n\t\t\tconst obj = this[_].colWidthsLimit[col];\n\t\t\treturn obj && obj.max || undefined;\n\t\t}\n\t\tsetMaxColWidth(col, maxwidth) {\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\t\t\tobj.max = maxwidth;\n\t\t}\n\t\tgetMinColWidth(col) {\n\t\t\tconst obj = this[_].colWidthsLimit[col];\n\t\t\treturn obj && obj.min || undefined;\n\t\t}\n\t\tsetMinColWidth(col, minwidth) {\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\t\t\tobj.min = minwidth;\n\t\t}\n\t\tgetCellRect(col, row) {\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\n\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, col - 1);\n\t\t\tconst width = _getColWidth(this, col);\n\t\t\tif (isFrozenCell && isFrozenCell.col) {\n\t\t\t\tabsoluteLeft += this[_].scroll.left;\n\t\t\t}\n\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, row - 1);\n\t\t\tconst height = _getRowHeight(this, row);\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\tabsoluteTop += this[_].scroll.top;\n\t\t\t}\n\t\t\treturn new Rect(absoluteLeft, absoluteTop, width, height);\n\t\t}\n\t\tgetCellRelativeRect(col, row) {\n\t\t\treturn _toRelativeRect(this, this.getCellRect(col, row));\n\t\t}\n\t\tgetCellsRect(startCol, startRow, endCol, endRow) {\n\t\t\tconst isFrozenStartCell = this.isFrozenCell(startCol, startRow);\n\t\t\tconst isFrozenEndCell = this.isFrozenCell(endCol, endRow);\n\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\t\t\tlet width = _getColsWidth(this, startCol, endCol);\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.col) {\n\t\t\t\tconst scrollLeft = this[_].scroll.left;\n\t\t\t\tabsoluteLeft += scrollLeft;\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.col) {\n\t\t\t\t\twidth -= scrollLeft;\n\t\t\t\t\twidth = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, startRow - 1);\n\t\t\tlet height = _getRowsHeight(this, startRow, endRow);\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.row) {\n\t\t\t\tconst scrollTop = this[_].scroll.top;\n\t\t\t\tabsoluteTop += scrollTop;\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.row) {\n\t\t\t\t\theight -= scrollTop;\n\t\t\t\t\theight = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new Rect(absoluteLeft, absoluteTop, width, height);\n\t\t}\n\t\tisFrozenCell(col, row) {\n\t\t\tconst isFrozenRow = this[_].frozenRowCount > 0 && row < this[_].frozenRowCount;\n\t\t\tconst isFrozenCol = this[_].frozenColCount > 0 && col < this[_].frozenColCount;\n\t\t\tif (isFrozenRow || isFrozenCol) {\n\t\t\t\treturn {\n\t\t\t\t\trow: isFrozenRow,\n\t\t\t\t\tcol: isFrozenCol\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tgetRowAt(absoluteY) {\n\t\t\tconst frozen = _getTargetFrozenRowAt(this, absoluteY);\n\t\t\tif (frozen) {\n\t\t\t\treturn frozen.row;\n\t\t\t}\n\t\t\tconst row = _getTargetRowAt(this, absoluteY);\n\t\t\treturn row ? row.row : -1;\n\t\t}\n\t\tgetColAt(absoluteX) {\n\t\t\tconst frozen = _getTargetFrozenColAt(this, absoluteX);\n\t\t\tif (frozen) {\n\t\t\t\treturn frozen.col;\n\t\t\t}\n\t\t\tconst col = _getTargetColAt(this, absoluteX);\n\t\t\treturn col ? col.col : -1;\n\t\t}\n\t\tgetCellAt(absoluteX, absoluteY) {\n\t\t\treturn {\n\t\t\t\trow: this.getRowAt(absoluteY),\n\t\t\t\tcol: this.getColAt(absoluteX)\n\t\t\t};\n\t\t}\n\t\tmakeVisibleCell(col, row) {\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\n\t\t\tif (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst rect = this.getCellRect(col, row);\n\t\t\tconst visibleRect = _getScrollableVisibleRect(this);\n\t\t\tif (visibleRect.contains(rect)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!isFrozenCell || !isFrozenCell.col) {\n\t\t\t\tif (rect.left < visibleRect.left) {\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.left - rect.left;\n\t\t\t\t} else if (visibleRect.right < rect.right) {\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.right - rect.right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isFrozenCell || !isFrozenCell.row) {\n\t\t\t\tif (rect.top < visibleRect.top) {\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.top - rect.top;\n\t\t\t\t} else if (visibleRect.bottom < rect.bottom) {\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfocusCell(col, row) {\n\t\t\tconst oldEditMode = this[_].focusControl.editMode;\n\t\t\tif (oldEditMode) {\n\t\t\t\tthis[_].focusControl.resetInputStatus();\n\t\t\t}\n\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(col, row));\n\n\t\t\tconst { col: selCol, row: selRow } = this[_].selection.select;\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.EDITABLEINPUT_CELL, { col: selCol, row: selRow });\n\n\t\t\tconst editMode = array.findIndex(results, v => !!v) >= 0;\n\t\t\tthis[_].focusControl.editMode = editMode;\n\n\t\t\tif (editMode) {\n\t\t\t\tthis[_].focusControl.storeInputStatus();\n\t\t\t\tthis[_].focusControl.setDefaultInputStatus();\n\t\t\t\tthis.fireListeners(EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, { col: selCol, row: selRow, input: this[_].focusControl.input });\n\t\t\t}\n\n\t\t\t// Failure occurs in IE if focus is not last\n\t\t\tthis[_].focusControl.focus();\n\t\t}\n\t\tinvalidateCell(col, row) {\n\t\t\tthis.invalidateGridRect(col, row);\n\t\t}\n\t\tinvalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\n\t\t\tconst offset = this.getOffsetInvalidateCells();\n\t\t\tif (offset > 0) {\n\t\t\t\tstartCol -= offset;\n\t\t\t\tstartRow -= offset;\n\t\t\t\tendCol += offset;\n\t\t\t\tendRow += offset;\n\t\t\t}\n\n\t\t\tconst visibleRect = _getVisibleRect(this);\n\t\t\tconst cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\n\t\t\tconst invalidateTarget = visibleRect.intersection(cellsRect);\n\t\t\tif (invalidateTarget) {\n\n\t\t\t\tif (this[_].frozenColCount > 0 && endCol >= this[_].frozenColCount) {\n\t\t\t\t\tconst frozenRect = _getFrozenColsRect(this);\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\n\t\t\t\t\t\tinvalidateTarget.left = Math.min(frozenRect.right - 1, frozenRect.right);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this[_].frozenRowCount > 0 && endRow >= this[_].frozenRowCount) {\n\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(this);\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\n\t\t\t\t\t\tinvalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_invalidateRect(this, invalidateTarget);\n\t\t\t}\n\t\t}\n\t\tinvalidate() {\n\t\t\tconst visibleRect = _getVisibleRect(this);\n\t\t\t_invalidateRect(this, visibleRect);\n\t\t}\n\t\t/**\r\n   * get cell value at copy action\r\n   * <p>\r\n   * Please implement\r\n   * </p>\r\n   *\r\n   * @protected\r\n   * @param  {number} col Column index of cell.\r\n   * @param  {number} row Row index of cell.\r\n   * @return {string}\r\n   */\n\t\tgetCopyCellValue(col, row) {}\n\t\t//Please implement get cell value!!\n\n\t\t/**\r\n   * Draw a cell\r\n   * <p>\r\n   * Please implement cell drawing.\r\n   * </p>\r\n   *\r\n   * @protected\r\n   * @param  {number} col Column index of cell.\r\n   * @param  {number} row Row index of cell.\r\n   * @param  {DrawCellContext} context context of cell drawing.\r\n   * @return {void}\r\n   */\n\t\tonDrawCell(col, row, context) {\n\t\t\t//Please implement cell drawing!!\n\t\t}\n\t\taddDisposable(disposable) {\n\t\t\tif (!disposable || !disposable.dispose || typeof disposable.dispose !== 'function') {\n\t\t\t\tthrow new Error('not disposable!');\n\t\t\t}\n\t\t\tconst disposables = this[_].disposables = this[_].disposables || [];\n\t\t\tdisposables.push(disposable);\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t\tthis[_].handler.dispose();\n\t\t\tthis[_].scrollable.dispose();\n\t\t\tthis[_].focusControl.dispose();\n\t\t\tthis[_].columnResizer.dispose();\n\t\t\tthis[_].cellSelector.dispose();\n\t\t\tif (this[_].disposables) {\n\t\t\t\tthis[_].disposables.forEach(disposable => disposable.dispose());\n\t\t\t\tthis[_].disposables = null;\n\t\t\t}\n\n\t\t\tconst parentElement = this[_].element.parentElement;\n\t\t\tif (parentElement) {\n\t\t\t\tparentElement.removeChild(this[_].element);\n\t\t\t}\n\t\t}\n\t\tgetAttachCellArea(col, row) {\n\t\t\treturn {\n\t\t\t\telement: this.getElement(),\n\t\t\t\trect: _toRelativeRect(this, this.getCellRect(col, row))\n\t\t\t};\n\t\t}\n\t\tbindEventsInternal() {\n\t\t\t//nop\n\t\t}\n\t\tgetTargetRowAtInternal(absoluteY) {\n\t\t\t// \n\t\t}\n\t\tgetRowsHeightInternal(startRow, endRow) {\n\t\t\t// \n\t\t}\n\t\tgetRowHeightInternal(row) {\n\t\t\t// \n\t\t}\n\t\tgetScrollHeightInternal(row) {\n\t\t\t// \n\t\t}\n\t\tgetMoveLeftColByKeyDownInternal({ col, row }) {\n\t\t\treturn col - 1;\n\t\t}\n\t\tgetMoveRightColByKeyDownInternal({ col, row }) {\n\t\t\treturn col + 1;\n\t\t}\n\t\tgetMoveUpRowByKeyDownInternal({ col, row }) {\n\t\t\treturn row - 1;\n\t\t}\n\t\tgetMoveDownRowByKeyDownInternal({ col, row }) {\n\t\t\treturn row + 1;\n\t\t}\n\t\tgetOffsetInvalidateCells() {\n\t\t\treturn 0;\n\t\t}\n\t\t_getInitContext() {\n\t\t\tconst ctx = this[_].context;\n\t\t\t//\n\t\t\tctx.fillStyle = 'white';\n\t\t\tctx.strokeStyle = 'black';\n\t\t\tctx.textAlign = 'left';\n\t\t\tctx.textBaseline = 'top';\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.font = this.font || '16px sans-serif';\n\t\t\treturn ctx;\n\t\t}\n\t}\n\n\tmodule.exports = DrawGrid;\n}\n\n/***/ }),\n\n/***/ \"./core/EventTarget.js\":\n/*!*****************************!*\\\n  !*** ./core/EventTarget.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { isDef, obj: { each } } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\t//private symbol\n\tconst { _ } = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\").get();\n\n\tlet nextId = 1;\n\t/**\r\n  * event target.\r\n  */\n\tclass EventTarget {\n\t\tconstructor() {\n\t\t\tthis[_] = {};\n\t\t\tthis[_].listeners = {};\n\t\t\tthis[_].listenerData = {};\n\t\t}\n\t\t/**\r\n   * Adds an event listener.\r\n   * @param  {string} type The event type id.\r\n   * @param  {function} listener Callback method.\r\n   * @return {number} unique id for the listener.\r\n   */\n\t\tlisten(type, listener) {\n\t\t\tconst list = this[_].listeners[type] || (this[_].listeners[type] = []);\n\t\t\tlist.push(listener);\n\n\t\t\tconst id = nextId++;\n\t\t\tthis[_].listenerData[id] = {\n\t\t\t\ttype,\n\t\t\t\tlistener,\n\t\t\t\tremove: () => {\n\t\t\t\t\tdelete this[_].listenerData[id];\n\t\t\t\t\tconst index = list.indexOf(listener);\n\t\t\t\t\tlist.splice(index, 1);\n\t\t\t\t\tif (!this[_].listeners[type].length) {\n\t\t\t\t\t\tdelete this[_].listeners[type];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn id;\n\t\t}\n\t\t/**\r\n   * Removes an event listener which was added with listen() by the id returned by listen().\r\n   * @param  {number} id the id returned by listen().\r\n   * @return {void}\r\n   */\n\t\tunlisten(id) {\n\t\t\tthis[_].listenerData[id].remove();\n\t\t}\n\t\taddEventListener(type, listener) {\n\t\t\tthis.listen(type, listener);\n\t\t}\n\t\tremoveEventListener(type, listener) {\n\t\t\teach(this[_].listenerData, (obj, id) => {\n\t\t\t\tif (obj.type === type && obj.listener === listener) {\n\t\t\t\t\tthis.unlisten(id);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thasListeners(type) {\n\t\t\treturn !!this[_].listeners[type];\n\t\t}\n\t\t/**\r\n   * Fires all registered listeners\r\n   * @param  {string}    type The type of the listeners to fire.\r\n   * @param  {...*} args fire arguments\r\n   * @return {*} the result of the last listener\r\n   */\n\t\tfireListeners(type, ...args) {\n\t\t\tconst list = this[_].listeners[type];\n\t\t\tif (!list) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn list.map(listener => listener.call(this, ...args)).filter(isDef);\n\t\t}\n\t\tdispose() {\n\t\t\tdelete this[_];\n\t\t}\n\t}\n\n\tmodule.exports = EventTarget;\n}\n\n/***/ }),\n\n/***/ \"./data.js\":\n/*!*****************!*\\\n  !*** ./data.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst DataSource = __webpack_require__(/*! ./data/DataSource */ \"./data/DataSource.js\");\n\tconst CachedDataSource = __webpack_require__(/*! ./data/CachedDataSource */ \"./data/CachedDataSource.js\");\n\n\t/**\r\n  * data modules\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.data\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tDataSource,\n\t\tCachedDataSource\n\t};\n}\n\n/***/ }),\n\n/***/ \"./data/CachedDataSource.js\":\n/*!**********************************!*\\\n  !*** ./data/CachedDataSource.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { getChainSafe } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\tconst DataSource = __webpack_require__(/*! ./DataSource */ \"./data/DataSource.js\");\n\n\tfunction _setFieldCache({ _fCache }, index, field, value) {\n\t\tconst recCache = _fCache[index] || (_fCache[index] = {});\n\t\trecCache[field] = value;\n\t}\n\t/**\r\n  * grid data source\r\n  *\r\n  * @classdesc cheetahGrid.data.CachedDataSource\r\n  * @extends cheetahGrid.data.DataSource\r\n  * @memberof cheetahGrid.data\r\n  */\n\tclass CachedDataSource extends DataSource {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn DataSource.EVENT_TYPE;\n\t\t}\n\t\tstatic ofArray(array) {\n\t\t\treturn new CachedDataSource({\n\t\t\t\tget: index => array[index],\n\t\t\t\tlength: array.length\n\t\t\t});\n\t\t}\n\t\tconstructor(opt = {}) {\n\t\t\tsuper(opt);\n\t\t\tthis._rCache = {};\n\t\t\tthis._fCache = {};\n\t\t}\n\t\tgetOriginal(index) {\n\t\t\tif (this._rCache && this._rCache[index]) {\n\t\t\t\treturn this._rCache[index];\n\t\t\t}\n\t\t\treturn super.getOriginal(index);\n\t\t}\n\t\tgetOriginalField(index, field) {\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\n\t\t\tif (cache) {\n\t\t\t\treturn cache;\n\t\t\t}\n\t\t\treturn super.getOriginalField(index, field);\n\t\t}\n\t\tsetOriginalField(index, field, value) {\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\n\t\t\tif (cache) {\n\t\t\t\t_setFieldCache(this, index, field, value);\n\t\t\t}\n\t\t\treturn super.setOriginalField(index, field, value);\n\t\t}\n\t\tclearCache() {\n\t\t\tif (this._rCache) {\n\t\t\t\tthis._rCache = {};\n\t\t\t}\n\t\t\tif (this._fCache) {\n\t\t\t\tthis._fCache = {};\n\t\t\t}\n\t\t}\n\t\tfieldPromiseCallBackInternal(index, field, val) {\n\t\t\t_setFieldCache(this, index, field, val);\n\t\t}\n\t\trecordPromiseCallBackInternal(index, val) {\n\t\t\tthis._rCache[index] = val;\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t}\n\t}\n\n\tmodule.exports = CachedDataSource;\n}\n\n/***/ }),\n\n/***/ \"./data/DataSource.js\":\n/*!****************************!*\\\n  !*** ./data/DataSource.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { array, isDef, isPromise, getOrApply, applyChainSafe, emptyFn } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\tconst sort = __webpack_require__(/*! ../internal/sort */ \"./internal/sort.js\");\n\tconst EventTarget = __webpack_require__(/*! ../core/EventTarget */ \"./core/EventTarget.js\");\n\n\tconst EVENT_TYPE = {\n\t\tUPDATE_LENGTH: 'update_length',\n\t\tUPDATED_LENGTH: 'updated_length',\n\t\tUPDATED_ORDER: 'updated_order'\n\t};\n\n\tfunction getValue(value, setPromiseBack) {\n\t\tvalue = getOrApply(value);\n\t\tif (isPromise(value)) {\n\t\t\tvalue = value.then(r => {\n\t\t\t\tif (!isPromise(r)) {\n\t\t\t\t\tsetPromiseBack(r);\n\t\t\t\t}\n\t\t\t\treturn getValue(r, setPromiseBack);\n\t\t\t});\n\t\t\t//\n\t\t\tsetPromiseBack(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction getField(record, field, setPromiseBack) {\n\t\tif (!isDef(record)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (isPromise(record)) {\n\t\t\treturn record.then(r => getField(r, field, setPromiseBack));\n\t\t}\n\t\tif (field in record) {\n\t\t\treturn getValue(record[field], setPromiseBack);\n\t\t}\n\t\tif (typeof field === 'function') {\n\t\t\treturn getValue(field(record), setPromiseBack);\n\t\t}\n\n\t\tconst ss = (field + '').split('.');\n\t\tif (ss.length <= 1) {\n\t\t\treturn getValue(record[field], setPromiseBack);\n\t\t}\n\t\treturn getValue(applyChainSafe(record, (val, name) => getField(val, name, emptyFn), ...ss), setPromiseBack);\n\t}\n\tfunction setField(record, field, value) {\n\t\tif (field in record) {\n\t\t\trecord[field] = value;\n\t\t} else if (typeof field === 'function') {\n\t\t\treturn field(record, value);\n\t\t} else if (typeof field === 'string') {\n\t\t\tconst ss = (field + '').split('.');\n\t\t\tlet obj = record;\n\t\t\tconst { length } = ss;\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst f = ss[i];\n\t\t\t\tif (i === length - 1) {\n\t\t\t\t\tobj[f] = value;\n\t\t\t\t} else {\n\t\t\t\t\tobj = obj[f] || (obj[f] = {});\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\trecord[field] = value;\n\t\t}\n\t\treturn true;\n\t}\n\tfunction _getIndex(dataSource, index) {\n\t\tif (!dataSource._sortedIndexMap) {\n\t\t\treturn index;\n\t\t}\n\t\tconst mapIndex = dataSource._sortedIndexMap[index];\n\t\treturn isDef(mapIndex) ? mapIndex : index;\n\t}\n\n\t/**\r\n  * grid data source\r\n  *\r\n  * @classdesc cheetahGrid.data.DataSource\r\n  * @extends EventTarget\r\n  * @memberof cheetahGrid.data\r\n  */\n\tclass DataSource extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\tstatic ofArray(array) {\n\t\t\treturn new DataSource({\n\t\t\t\tget: index => array[index],\n\t\t\t\tlength: array.length\n\t\t\t});\n\t\t}\n\t\tconstructor({ get, length = 0 } = {}) {\n\t\t\tsuper();\n\t\t\tthis._get = get;\n\t\t\tthis._length = length;\n\t\t\tthis._sortedIndexMap = false;\n\t\t}\n\t\tget(index) {\n\t\t\treturn this.getOriginal(_getIndex(this, index));\n\t\t}\n\t\tgetField(index, field) {\n\t\t\treturn this.getOriginalField(_getIndex(this, index), field);\n\t\t}\n\t\thasField(index, field) {\n\t\t\treturn this.hasOriginalField(_getIndex(this, index), field);\n\t\t}\n\t\tsetField(index, field, value) {\n\t\t\treturn this.setOriginalField(_getIndex(this, index), field, value);\n\t\t}\n\t\tsort(field, order) {\n\t\t\tconst sortedIndexMap = new Array(this._length);\n\n\t\t\tconst orderFn = order !== 'desc' ? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1 : (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\n\n\t\t\treturn sort.sortPromise(index => isDef(sortedIndexMap[index]) ? sortedIndexMap[index] : sortedIndexMap[index] = index, (index, rel) => {\n\t\t\t\tsortedIndexMap[index] = rel;\n\t\t\t}, this._length, orderFn, index => this.getOriginalField(index, field)).then(() => {\n\t\t\t\tthis._sortedIndexMap = sortedIndexMap;\n\t\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_ORDER);\n\t\t\t});\n\t\t}\n\t\tget length() {\n\t\t\treturn this._length;\n\t\t}\n\t\tset length(length) {\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\n\t\t\tif (array.findIndex(results, v => !v) >= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._length = length;\n\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t}\n\t\tgetOriginal(index) {\n\t\t\treturn getValue(this._get(index), val => {\n\t\t\t\tthis.recordPromiseCallBackInternal(index, val);\n\t\t\t});\n\t\t}\n\t\tgetOriginalField(index, field) {\n\t\t\tif (!isDef(field)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst record = this.getOriginal(index);\n\t\t\treturn getField(record, field, val => {\n\t\t\t\tthis.fieldPromiseCallBackInternal(index, field, val);\n\t\t\t});\n\t\t}\n\t\thasOriginalField(index, field) {\n\t\t\tif (!isDef(field)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (typeof field === 'function') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst record = this.getOriginal(index);\n\t\t\treturn field in record;\n\t\t}\n\t\tsetOriginalField(index, field, value) {\n\t\t\tif (!isDef(field)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst record = this.getOriginal(index);\n\t\t\treturn setField(record, field, value);\n\t\t}\n\t\tfieldPromiseCallBackInternal(index, field, val) {\n\t\t\t//\n\t\t}\n\t\trecordPromiseCallBackInternal(index, val) {\n\t\t\t//\n\t\t}\n\t}\n\tDataSource.EMPTY = new DataSource({\n\t\tlength: 0\n\t});\n\n\tmodule.exports = DataSource;\n}\n\n/***/ }),\n\n/***/ \"./element/Inline.js\":\n/*!***************************!*\\\n  !*** ./element/Inline.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { isDef } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\nclass Inline {\n\tconstructor(content) {\n\t\tthis._content = isDef(content) ? content : '';\n\t}\n\twidth({ ctx }) {\n\t\treturn ctx.measureText(this._content).width;\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn null;\n\t}\n\tcanDraw() {\n\t\treturn true;\n\t}\n\tonReady(fn) {}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\tcanvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\n\t\t\toffset: offset + 1,\n\t\t\tpadding: {\n\t\t\t\tleft: offsetLeft,\n\t\t\t\tright: offsetRight\n\t\t\t}\n\t\t});\n\t}\n}\nmodule.exports = Inline;\n\n/***/ }),\n\n/***/ \"./element/InlineDrawer.js\":\n/*!*********************************!*\\\n  !*** ./element/InlineDrawer.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nclass InlineDrawer extends Inline {\n\tconstructor({\n\t\tdraw,\n\t\twidth,\n\t\theight,\n\t\tcolor\n\t}) {\n\t\tsuper();\n\n\t\tthis._draw = draw;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._color = color;\n\t}\n\twidth({ ctx }) {\n\t\treturn this._width;\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn this._color;\n\t}\n\tcanDraw() {\n\t\treturn true;\n\t}\n\tonReady(callback) {}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\tthis._draw({\n\t\t\tctx,\n\t\t\tcanvashelper,\n\t\t\trect,\n\t\t\toffset,\n\t\t\toffsetLeft,\n\t\t\toffsetRight\n\t\t});\n\t}\n}\n\nmodule.exports = InlineDrawer;\n\n/***/ }),\n\n/***/ \"./element/InlineIcon.js\":\n/*!*******************************!*\\\n  !*** ./element/InlineIcon.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst fonts = __webpack_require__(/*! ../internal/fonts */ \"./internal/fonts.js\");\n\nclass InlineIcon extends Inline {\n\tconstructor(icon) {\n\t\tsuper();\n\t\tthis._icon = icon || {};\n\t}\n\twidth({ ctx }) {\n\t\tconst icon = this._icon;\n\t\tif (icon.width) {\n\t\t\treturn icon.width;\n\t\t}\n\t\tif (icon.font && fonts.check(icon.font, icon.content)) {\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.font = icon.font || ctx.font;\n\t\t\t\treturn ctx.measureText(icon.content).width;\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tfont() {\n\t\treturn this._icon.font;\n\t}\n\tcolor() {\n\t\treturn this._icon.color;\n\t}\n\tcanDraw() {\n\t\tconst icon = this._icon;\n\t\treturn icon.font ? fonts.check(icon.font, icon.content) : true;\n\t}\n\tonReady(callback) {\n\t\tconst icon = this._icon;\n\t\tif (icon.font && !fonts.check(icon.font, icon.content)) {\n\t\t\tfonts.load(icon.font, icon.content, callback);\n\t\t}\n\t}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\tconst icon = this._icon;\n\t\tif (icon.content) {\n\t\t\tcanvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\n\t\t\t\toffset: offset + 1,\n\t\t\t\tpadding: {\n\t\t\t\t\tleft: offsetLeft,\n\t\t\t\t\tright: offsetRight\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nmodule.exports = InlineIcon;\n\n/***/ }),\n\n/***/ \"./element/InlineImage.js\":\n/*!********************************!*\\\n  !*** ./element/InlineImage.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst { getCacheOrLoad } = __webpack_require__(/*! ../internal/imgs */ \"./internal/imgs.js\");\nconst { isPromise } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nclass InlineImage extends Inline {\n\tconstructor({\n\t\tsrc,\n\t\twidth,\n\t\theight,\n\t\timageLeft,\n\t\timageTop,\n\t\timageWidth,\n\t\timageHeight\n\t}) {\n\t\tsuper();\n\t\tthis._src = src;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._imageLeft = imageLeft;\n\t\tthis._imageTop = imageTop;\n\t\tthis._imageWidth = imageWidth;\n\t\tthis._imageHeight = imageHeight;\n\n\t\tthis._onloaded = [];\n\n\t\tthis._loaded = false;\n\t\tif (isPromise(src)) {\n\t\t\tsrc.then(s => {\n\t\t\t\tthis._src = s;\n\t\t\t\tthis._loadImage(s);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._loadImage(src);\n\t\t}\n\t}\n\t_loadImage(src) {\n\t\tconst img = this._inlineImg = getCacheOrLoad('InlineImage', 50, src);\n\t\tif (isPromise(img)) {\n\t\t\timg.then(i => {\n\t\t\t\tthis._loaded = true;\n\t\t\t\tthis._inlineImg = i;\n\n\t\t\t\tthis._onloaded.forEach(fn => fn());\n\t\t\t});\n\t\t} else {\n\t\t\tthis._loaded = true;\n\t\t}\n\t}\n\twidth({ ctx }) {\n\t\treturn this._width || (this._loaded ? this._inlineImg.width : 0);\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn null;\n\t}\n\tcanDraw() {\n\t\treturn this._loaded;\n\t}\n\tonReady(callback) {\n\t\tif (isPromise(this._src) || isPromise(this._inlineImg)) {\n\t\t\tthis._onloaded.push(() => callback());\n\t\t}\n\t}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\tconst img = this._inlineImg;\n\t\tcanvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\n\t\t\toffset: offset + 1,\n\t\t\tpadding: {\n\t\t\t\tleft: offsetLeft,\n\t\t\t\tright: offsetRight\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = InlineImage;\n\n/***/ }),\n\n/***/ \"./element/InlinePath2D.js\":\n/*!*********************************!*\\\n  !*** ./element/InlinePath2D.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst { calcStartPosition } = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\nconst path2DManager = __webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\");\n\nclass InlinePath2D extends Inline {\n\tconstructor({\n\t\tpath,\n\t\twidth,\n\t\theight,\n\t\tcolor\n\t}) {\n\t\tsuper();\n\t\t// IEPath2Dpolyfill\n\t\tthis._path = new path2DManager.Path2D(path);\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._color = color;\n\t}\n\twidth({ ctx }) {\n\t\treturn this._width;\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn this._color;\n\t}\n\tcanDraw() {\n\t\treturn true;\n\t}\n\tonReady(callback) {}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\toffset++;\n\t\tconst padding = {\n\t\t\tleft: offsetLeft,\n\t\t\tright: offsetRight\n\t\t};\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t//clip\n\t\t\tctx.clip();\n\n\t\t\t//\n\t\t\tconst pos = calcStartPosition(ctx, rect, this._width, this._height, {\n\t\t\t\toffset,\n\t\t\t\tpadding\n\t\t\t});\n\t\t\tctx.translate(pos.x, pos.y);\n\t\t\tctx.fill(this._path);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n}\n\nmodule.exports = InlinePath2D;\n\n/***/ }),\n\n/***/ \"./element/InlineSvg.js\":\n/*!******************************!*\\\n  !*** ./element/InlineSvg.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst InlineImage = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\nconst { isPromise } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nfunction buildSvgDataUrl(svg) {\n\tif (isPromise(svg)) {\n\t\treturn svg.then(buildSvgDataUrl);\n\t} else {\n\t\tconst data = typeof svg === 'string' ? svg : new XMLSerializer().serializeToString(svg);\n\t\tconst url = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(data); //svgbase64\n\t\treturn url;\n\t}\n}\nfunction getSvgElement(svg) {\n\tif (isPromise(svg)) {\n\t\treturn svg.then(getSvgElement);\n\t} else if (typeof svg === 'string') {\n\t\tconst parser = new DOMParser();\n\t\treturn parser.parseFromString(svg, 'image/svg+xml');\n\t} else {\n\t\treturn svg;\n\t}\n}\n\nclass InlineSvg extends InlineImage {\n\tconstructor({\n\t\tsvg,\n\t\twidth,\n\t\theight,\n\t\timageLeft,\n\t\timageTop,\n\t\timageWidth,\n\t\timageHeight\n\t}) {\n\t\tconst svgElem = getSvgElement(svg);\n\t\tconst elmWidth = svgElem.getAttribute ? svgElem.getAttribute('width') : null;\n\t\tconst elmHeight = svgElem.getAttribute ? svgElem.getAttribute('height') : null;\n\t\tsuper({\n\t\t\tsrc: buildSvgDataUrl(svg),\n\t\t\twidth: width || elmWidth,\n\t\t\theight: height || elmHeight,\n\t\t\timageWidth: elmWidth,\n\t\t\timageHeight: elmHeight\n\t\t});\n\t}\n}\n\nmodule.exports = InlineSvg;\n\n/***/ }),\n\n/***/ \"./element/inlines.js\":\n/*!****************************!*\\\n  !*** ./element/inlines.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst InlineIcon = __webpack_require__(/*! ./InlineIcon */ \"./element/InlineIcon.js\");\nconst InlineImage = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\nconst InlineSvg = __webpack_require__(/*! ./InlineSvg */ \"./element/InlineSvg.js\");\nconst InlineDrawer = __webpack_require__(/*! ./InlineDrawer */ \"./element/InlineDrawer.js\");\nconst InlinePath2D = __webpack_require__(/*! ./InlinePath2D */ \"./element/InlinePath2D.js\");\nconst { isDef } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\nconst { calcStartPosition } = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\nconst icons = __webpack_require__(/*! ../icons */ \"./icons.js\");\nconst path2DManager = __webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\");\n\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, {\n\toffset = 2,\n\tpadding\n} = {}) {\n\tconst rect = {\n\t\tleft,\n\t\ttop,\n\t\twidth,\n\t\theight,\n\t\tright: left + width,\n\t\tbottom: top + height\n\t};\n\tctx.save();\n\ttry {\n\t\tctx.beginPath();\n\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t//clip\n\t\tctx.clip();\n\n\t\t//\n\t\tconst pos = calcStartPosition(ctx, rect, drawWidth, drawHeight, {\n\t\t\toffset,\n\t\t\tpadding\n\t\t});\n\t\tpath2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\n\t} finally {\n\t\tctx.restore();\n\t}\n}\n\nmodule.exports = {\n\ticonOf(icon) {\n\t\tif (icon instanceof Inline) {\n\t\t\treturn icon;\n\t\t}\n\t\tif (!icon) {\n\t\t\treturn null;\n\t\t}\n\t\tif (icon.font && icon.content) {\n\t\t\treturn new InlineIcon(icon);\n\t\t}\n\t\tif (icon.src) {\n\t\t\treturn new InlineImage({\n\t\t\t\tsrc: icon.src,\n\t\t\t\twidth: icon.width,\n\t\t\t\theight: icon.width\n\t\t\t});\n\t\t}\n\t\tif (icon.svg) {\n\t\t\treturn new InlineSvg({\n\t\t\t\tsvg: icon.svg,\n\t\t\t\twidth: icon.width,\n\t\t\t\theight: icon.width\n\t\t\t});\n\t\t}\n\t\tif (icon.path) {\n\t\t\treturn new InlinePath2D({\n\t\t\t\tpath: icon.path,\n\t\t\t\twidth: icon.width,\n\t\t\t\theight: icon.width,\n\t\t\t\tcolor: icon.color\n\t\t\t});\n\t\t}\n\t\tconst regedIcons = icons.get();\n\t\tif (icon.name && regedIcons[icon.name]) {\n\t\t\tconst regedIcon = regedIcons[icon.name];\n\t\t\tconst width = icon.width || Math.max(regedIcon.width, regedIcon.height);\n\t\t\treturn new InlineDrawer({\n\t\t\t\tdraw({\n\t\t\t\t\tctx,\n\t\t\t\t\tcanvashelper,\n\t\t\t\t\trect,\n\t\t\t\t\toffset,\n\t\t\t\t\toffsetLeft,\n\t\t\t\t\toffsetRight\n\t\t\t\t}) {\n\t\t\t\t\tdrawRegisteredIcon(ctx, regedIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\n\t\t\t\t\t\toffset: offset + 1,\n\t\t\t\t\t\tpadding: {\n\t\t\t\t\t\t\tleft: offsetLeft,\n\t\t\t\t\t\t\tright: offsetRight\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\twidth,\n\t\t\t\theight: width,\n\t\t\t\tcolor: icon.color\n\t\t\t});\n\t\t}\n\t\treturn new InlineIcon(icon);\n\t},\n\tof(content) {\n\t\tif (!isDef(content)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (content instanceof Inline) {\n\t\t\treturn content;\n\t\t}\n\t\treturn new Inline(content);\n\t},\n\tbuildInlines(icons, inline) {\n\t\tconst result = [];\n\t\tif (icons) {\n\t\t\tresult.push(...icons.map(icon => this.iconOf(icon)).filter(e => !!e));\n\t\t}\n\t\tif (__webpack_provided_Array_dot_isArray(inline) && inline.filter(il => il instanceof Inline).length) {\n\t\t\tresult.push(...inline.map(il => this.of(il)).filter(e => !!e));\n\t\t} else {\n\t\t\tconst il = this.of(inline);\n\t\t\tif (il) {\n\t\t\t\tresult.push(il);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./header/style.js\":\n/*!*************************!*\\\n  !*** ./header/style.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./style/BaseStyle */ \"./header/style/BaseStyle.js\");\n\tconst Style = __webpack_require__(/*! ./style/Style */ \"./header/style/Style.js\");\n\n\tconst style = {\n\t\tget BaseStyle() {\n\t\t\treturn BaseStyle;\n\t\t},\n\t\tget Style() {\n\t\t\treturn Style;\n\t\t},\n\t\tof(columnStyle, StyleClass) {\n\t\t\tif (columnStyle) {\n\t\t\t\tif (columnStyle instanceof Style) {\n\t\t\t\t\treturn columnStyle;\n\t\t\t\t} else if (typeof columnStyle === 'function') {\n\t\t\t\t\treturn style.of(columnStyle(), StyleClass);\n\t\t\t\t}\n\t\t\t\treturn new StyleClass(columnStyle);\n\t\t\t} else {\n\t\t\t\treturn StyleClass.DEFAULT;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = style;\n}\n\n/***/ }),\n\n/***/ \"./header/style/BaseStyle.js\":\n/*!***********************************!*\\\n  !*** ./header/style/BaseStyle.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst EventTarget = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\n\tconst EVENT_TYPE = {\n\t\tCHANGE_STYLE: 'change_style'\n\t};\n\n\tlet defaultStyle;\n\tclass BaseStyle extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n\t\t}\n\t\tconstructor({\n\t\t\ttextAlign = 'left',\n\t\t\ttextBaseline = 'middle',\n\t\t\tbgColor\n\t\t} = {}) {\n\t\t\tsuper();\n\t\t\tthis._textAlign = textAlign;\n\t\t\tthis._textBaseline = textBaseline;\n\t\t\tthis._bgColor = bgColor;\n\t\t}\n\t\tget textAlign() {\n\t\t\treturn this._textAlign;\n\t\t}\n\t\tset textAlign(textAlign) {\n\t\t\tthis._textAlign = textAlign;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget textBaseline() {\n\t\t\treturn this._textBaseline;\n\t\t}\n\t\tset textBaseline(textBaseline) {\n\t\t\tthis._textBaseline = textBaseline;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget bgColor() {\n\t\t\treturn this._bgColor;\n\t\t}\n\t\tset bgColor(bgColor) {\n\t\t\tthis._bgColor = bgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tdoChangeStyle() {\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseStyle(this);\n\t\t}\n\t}\n\tmodule.exports = BaseStyle;\n}\n\n/***/ }),\n\n/***/ \"./header/style/Style.js\":\n/*!*******************************!*\\\n  !*** ./header/style/Style.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./BaseStyle */ \"./header/style/BaseStyle.js\");\n\tlet defaultStyle;\n\tclass Style extends BaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new Style();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._color = style.color;\n\t\t}\n\t\tget color() {\n\t\t\treturn this._color;\n\t\t}\n\t\tset color(color) {\n\t\t\tthis._color = color;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new Style(this);\n\t\t}\n\t}\n\tmodule.exports = Style;\n}\n\n/***/ }),\n\n/***/ \"./header/type.js\":\n/*!************************!*\\\n  !*** ./header/type.js ***!\n  \\************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Header = __webpack_require__(/*! ./type/Header */ \"./header/type/Header.js\");\n\tconst SortHeader = __webpack_require__(/*! ./type/SortHeader */ \"./header/type/SortHeader.js\");\n\n\tconst type = {\n\t\tcreate(headerCell) {\n\t\t\tif (headerCell.sort) {\n\t\t\t\treturn new SortHeader(headerCell);\n\t\t\t}\n\t\t\treturn new Header(headerCell);\n\t\t}\n\t};\n\tmodule.exports = type;\n}\n\n/***/ }),\n\n/***/ \"./header/type/BaseHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/BaseHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./header/style.js\");\n\tconst { Style } = styleContents;\n\n\tclass BaseHeader {\n\t\tconstructor(headerCell) {\n\t\t\tthis._headerCell = headerCell;\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this); //\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tonDrawCell(cellValue, info, context, grid) {\n\t\t\tconst { style, drawCellBase } = info;\n\t\t\tdelete info.getRecord;\n\t\t\tdelete info.style;\n\t\t\tconst helper = grid.getGridCanvasHelper();\n\t\t\tdrawCellBase();\n\t\t\t//\n\t\t\tthis.drawInternal(cellValue, context, styleContents.of(style, this.StyleClass), helper, grid, info);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {}\n\t\tbindGridEvent(grid) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = BaseHeader;\n}\n\n/***/ }),\n\n/***/ \"./header/type/Header.js\":\n/*!*******************************!*\\\n  !*** ./header/type/Header.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./header/style.js\");\n\tconst { Style } = styleContents;\n\tconst BaseHeader = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\n\tclass Header extends BaseHeader {\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\tbgColor\n\t\t\t} = style;\n\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thelper.text(value, context, {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont\n\t\t\t});\n\t\t}\n\t\tbindGridEvent(grid) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = Header;\n}\n\n/***/ }),\n\n/***/ \"./header/type/SortHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/SortHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./header/style.js\");\n\tconst { Style } = styleContents;\n\tconst BaseHeader = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\tconst { isDef } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst { EVENT_TYPE: {\n\t\t\tCLICK_CELL,\n\t\t\tMOUSEOVER_CELL,\n\t\t\tMOUSEOUT_CELL,\n\t\t\tMOUSEMOVE_CELL\n\t\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\n\n\tclass SortHeader extends BaseHeader {\n\t\tconstructor(headerCell) {\n\t\t\tsuper(headerCell);\n\t\t\tthis._sort = headerCell.sort;\n\t\t\tthis._range = headerCell.range;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline = 'middle',\n\t\t\t\tcolor,\n\t\t\t\tbgColor,\n\t\t\t\tfont\n\t\t\t} = style;\n\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst state = grid.sortState;\n\t\t\tlet order = undefined;\n\t\t\tif (this._range.isCellInRange(state.col, this._range.startRow)) {\n\t\t\t\torder = state.order;\n\t\t\t}\n\n\t\t\tconst ctx = context.getContext();\n\t\t\tconst arrowSize = ctx.measureText('').width * 1.2;\n\n\t\t\thelper.text(value, context, {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\ticons: [{\n\t\t\t\t\tname: isDef(order) ? order === 'asc' ? 'arrow_downward' : 'arrow_upward' : null,\n\t\t\t\t\twidth: arrowSize,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.38)'\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\t\t_executeSort(newState, grid) {\n\t\t\tif (typeof this._sort === 'function') {\n\t\t\t\tthis._sort(newState.order, newState.col, grid);\n\t\t\t} else {\n\t\t\t\tgrid.dataSource.sort(grid.getField(newState.col), newState.order);\n\t\t\t}\n\t\t}\n\t\tbindGridEvent(grid) {\n\t\t\treturn [grid.listen(CLICK_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst state = grid.sortState;\n\t\t\t\tlet newState;\n\t\t\t\tif (this._range.isCellInRange(state.col, e.row)) {\n\t\t\t\t\tnewState = {\n\t\t\t\t\t\tcol: this._range.startCol,\n\t\t\t\t\t\torder: state.order === 'asc' ? 'desc' : 'asc'\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tnewState = {\n\t\t\t\t\t\tcol: this._range.startCol,\n\t\t\t\t\t\torder: 'asc'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tgrid.sortState = newState;\n\t\t\t\tthis._executeSort(newState, grid);\n\t\t\t\tgrid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\n\t\t\t}),\n\t\t\t// mouse move\n\t\t\tgrid.listen(MOUSEOVER_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t\t}),\n\t\t\t//MOUSEENTER'col-resize'move\n\t\t\tgrid.listen(MOUSEMOVE_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!grid.getElement().style.cursor) {\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t\t\t}\n\t\t\t}), grid.listen(MOUSEOUT_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tgrid.getElement().style.cursor = '';\n\t\t\t})];\n\t\t}\n\t}\n\tmodule.exports = SortHeader;\n}\n\n/***/ }),\n\n/***/ \"./icons.js\":\n/*!******************!*\\\n  !*** ./icons.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint-disable camelcase*/\n\n\nconst { extend } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\nconst plugins = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\nconst builtins = {\n\tget arrow_upward() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\n\t},\n\tget arrow_downward() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\n\t},\n\tget edit() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/image/svg/production/ic_edit_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg\");\n\t},\n\tget add() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/content/svg/production/ic_add_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/content/svg/production/ic_add_48px.svg\");\n\t},\n\tget star() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg\");\n\t},\n\tget star_border() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\n\t},\n\tget star_half() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\n\t}\n};\n\nmodule.exports = {\n\tget() {\n\t\treturn extend(builtins, plugins);\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/EventHandler.js\":\n/*!**********************************!*\\\n  !*** ./internal/EventHandler.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { obj: { each } } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\tlet nextId = 1;\n\n\tclass EventHandler {\n\t\tconstructor() {\n\t\t\tthis._listeners = {};\n\t\t}\n\t\ton(target, type, listener, ...options) {\n\t\t\tif (target.addEventListener) {\n\t\t\t\ttarget.addEventListener(type, listener, ...options);\n\t\t\t}\n\t\t\tconst obj = {\n\t\t\t\ttarget, type, listener, options\n\t\t\t};\n\t\t\tconst id = nextId++;\n\t\t\tthis._listeners[id] = obj;\n\t\t\treturn id;\n\t\t}\n\t\ttryWithOffEvents(target, type, call) {\n\t\t\tconst list = [];\n\t\t\ttry {\n\t\t\t\teach(this._listeners, obj => {\n\t\t\t\t\tif (obj.target === target && obj.type === type) {\n\t\t\t\t\t\tif (obj.target.removeEventListener) {\n\t\t\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist.push(obj);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcall();\n\t\t\t} finally {\n\t\t\t\tlist.forEach(obj => {\n\t\t\t\t\tif (obj.target.addEventListener) {\n\t\t\t\t\t\tobj.target.addEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\toff(id) {\n\t\t\tif (!id) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst obj = this._listeners[id];\n\t\t\tif (!obj) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdelete this._listeners[id];\n\t\t\tif (obj.target.removeEventListener) {\n\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t}\n\t\t}\n\t\tfire(target, type, ...args) {\n\t\t\teach(this._listeners, obj => {\n\t\t\t\tif (obj.target === target && obj.type === type) {\n\t\t\t\t\tobj.listener.call(obj.target, ...args);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thasListener(target, type) {\n\t\t\tlet result = false;\n\t\t\teach(this._listeners, obj => {\n\t\t\t\tif (obj.target === target && obj.type === type) {\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\tclear() {\n\t\t\teach(this._listeners, obj => {\n\t\t\t\tif (obj.target.removeEventListener) {\n\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._listeners = {};\n\t\t}\n\t\tdispose() {\n\t\t\tthis.clear();\n\t\t\tthis._listeners = null;\n\t\t}\n\t}\n\n\tmodule.exports = EventHandler;\n}\n\n/***/ }),\n\n/***/ \"./internal/LRUCache.js\":\n/*!******************************!*\\\n  !*** ./internal/LRUCache.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nclass LRUCache {\n\tconstructor(cacheSize) {\n\t\tthis._list = [];\n\t\tthis._map = {};\n\t\tthis._cacheSize = cacheSize || 50;\n\t}\n\tget(key) {\n\t\tconst val = this._map[key];\n\t\tif (val) {\n\t\t\tconst idx = this._list.indexOf(key);\n\t\t\tthis._list.splice(idx, 1);\n\t\t\tthis._list.push(key);\n\t\t}\n\t\treturn val;\n\t}\n\tput(key, value) {\n\t\tif (this._map[key]) {\n\t\t\tconst idx = this._list.indexOf(key);\n\t\t\tthis._list.splice(idx, 1);\n\t\t}\n\t\tthis._map[key] = value;\n\t\tthis._list.push(key);\n\t\tif (this._list.length > this._cacheSize) {\n\t\t\tconst remKey = this._list.shift();\n\t\t\tdelete this._map[remKey];\n\t\t}\n\t}\n}\nmodule.exports = LRUCache;\n\n/***/ }),\n\n/***/ \"./internal/NumberMap.js\":\n/*!*******************************!*\\\n  !*** ./internal/NumberMap.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst indexFirst = (ary, elm) => {\n\t\tlet low = 0;\n\t\tlet high = ary.length - 1;\n\t\twhile (low <= high) {\n\t\t\tconst i = Math.floor((low + high) / 2);\n\t\t\tif (ary[i] === elm) {\n\t\t\t\treturn i;\n\t\t\t} else if (ary[i] > elm) {\n\t\t\t\thigh = i - 1;\n\t\t\t} else {\n\t\t\t\tlow = i + 1;\n\t\t\t}\n\t\t}\n\t\treturn high < 0 ? 0 : high;\n\t};\n\n\tclass NumberMap {\n\t\tconstructor() {\n\t\t\tthis._keys = [];\n\t\t\tthis._vals = {};\n\t\t\tthis._sorted = false;\n\t\t}\n\t\tput(key, value) {\n\t\t\tif (!(key in this._vals)) {\n\t\t\t\tthis._keys.push(key);\n\t\t\t\tthis._sorted = false;\n\t\t\t}\n\t\t\tthis._vals[key] = value;\n\t\t}\n\t\tget(key) {\n\t\t\treturn this._vals[key];\n\t\t}\n\t\teachAll(fn) {\n\t\t\tthis._keys.forEach(key => {\n\t\t\t\tfn(this.get(key), key);\n\t\t\t});\n\t\t}\n\t\teach(keyFrom, keyTo, fn) {\n\t\t\tconst { _keys: keys } = this;\n\t\t\tconst { length } = keys;\n\t\t\tif (!this._sorted) {\n\t\t\t\tkeys.sort((a, b) => {\n\t\t\t\t\tif (a < b) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (a > b) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\t\t\t\tthis._sorted = true;\n\t\t\t}\n\n\t\t\tfor (let i = indexFirst(keys, keyFrom); i < length; i++) {\n\t\t\t\tconst key = keys[i];\n\t\t\t\tif (keyFrom <= key && key <= keyTo) {\n\t\t\t\t\tfn(this.get(key), key);\n\t\t\t\t} else if (keyTo < key) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmodule.exports = NumberMap;\n}\n\n/***/ }),\n\n/***/ \"./internal/Rect.js\":\n/*!**************************!*\\\n  !*** ./internal/Rect.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tclass Rect {\n\t\tconstructor(left, top, width, height) {\n\t\t\tthis._left = left;\n\t\t\tthis._top = top;\n\t\t\tthis._width = width;\n\t\t\tthis._height = height;\n\t\t}\n\t\tstatic bounds(left, top, right, bottom) {\n\t\t\treturn new Rect(left, top, right - left, bottom - top);\n\t\t}\n\t\tstatic max(rect1, rect2) {\n\t\t\treturn Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\n\t\t}\n\t\tget left() {\n\t\t\treturn this._left;\n\t\t}\n\t\tset left(left) {\n\t\t\tconst right = this.right;\n\t\t\tthis._left = left;\n\t\t\tthis.right = right;\n\t\t}\n\t\tget top() {\n\t\t\treturn this._top;\n\t\t}\n\t\tset top(top) {\n\t\t\tconst bottom = this.bottom;\n\t\t\tthis._top = top;\n\t\t\tthis.bottom = bottom;\n\t\t}\n\t\tget width() {\n\t\t\treturn this._width;\n\t\t}\n\t\tset width(width) {\n\t\t\tthis._width = width;\n\t\t\tthis._right = undefined;\n\t\t}\n\t\tget height() {\n\t\t\treturn this._height;\n\t\t}\n\t\tset height(height) {\n\t\t\tthis._height = height;\n\t\t\tthis._bottom = undefined;\n\t\t}\n\t\tget right() {\n\t\t\treturn this._right !== undefined ? this._right : this._right = this.left + this.width;\n\t\t}\n\t\tset right(right) {\n\t\t\tthis._right = right;\n\t\t\tthis.width = right - this.left;\n\t\t}\n\t\tget bottom() {\n\t\t\treturn this._bottom !== undefined ? this._bottom : this._bottom = this.top + this.height;\n\t\t}\n\t\tset bottom(bottom) {\n\t\t\tthis._bottom = bottom;\n\t\t\tthis.height = bottom - this.top;\n\t\t}\n\t\toffsetLeft(offset) {\n\t\t\tthis._left += offset;\n\t\t\tthis._right = undefined;\n\t\t}\n\t\toffsetTop(offset) {\n\t\t\tthis._top += offset;\n\t\t\tthis._bottom = undefined;\n\t\t}\n\t\tcopy() {\n\t\t\treturn new Rect(this.left, this.top, this.width, this.height);\n\t\t}\n\t\tintersection(rect) {\n\t\t\tconst x0 = Math.max(this.left, rect.left);\n\t\t\tconst x1 = Math.min(this.left + this.width, rect.left + rect.width);\n\t\t\tif (x0 <= x1) {\n\t\t\t\tconst y0 = Math.max(this.top, rect.top);\n\t\t\t\tconst y1 = Math.min(this.top + this.height, rect.top + rect.height);\n\t\t\t\tif (y0 <= y1) {\n\t\t\t\t\treturn Rect.bounds(x0, y0, x1, y1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tcontains(another) {\n\t\t\treturn this.left <= another.left && this.left + this.width >= another.left + another.width && this.top <= another.top && this.top + this.height >= another.top + another.height;\n\t\t}\n\t\tinPoint(x, y) {\n\t\t\treturn this.left <= x && this.left + this.width >= x && this.top <= y && this.top + this.height >= y;\n\t\t}\n\t}\n\tmodule.exports = Rect;\n}\n\n/***/ }),\n\n/***/ \"./internal/Scrollable.js\":\n/*!********************************!*\\\n  !*** ./internal/Scrollable.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst EventHandler = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\n\tconst style = __webpack_require__(/*! ./style */ \"./internal/style.js\");\n\tconst { browser } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\n\tconst MAX_SCROLL = browser.heightLimit - 1000;\n\n\tfunction _update(scrollable) {\n\t\tlet domHeight;\n\t\tif (scrollable._height > MAX_SCROLL) {\n\t\t\tconst sbSize = style.getScrollBarSize();\n\t\t\tconst offsetHeight = scrollable._scrollable.offsetHeight;\n\t\t\tconst vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\n\t\t\tconst rScrollRange = scrollable._height - offsetHeight + sbSize;\n\t\t\tscrollable._p = vScrollRange / rScrollRange;\n\t\t\tdomHeight = MAX_SCROLL;\n\t\t} else {\n\t\t\tscrollable._p = 1;\n\t\t\tdomHeight = scrollable._height;\n\t\t}\n\n\t\tscrollable._endPointElement.style.top = domHeight.toFixed() + 'px';\n\t\tscrollable._endPointElement.style.left = scrollable._width.toFixed() + 'px';\n\t}\n\n\tclass Scrollable {\n\t\tconstructor() {\n\t\t\tthis._handler = new EventHandler();\n\n\t\t\tthis._scrollable = document.createElement('div');\n\t\t\tthis._scrollable.classList.add('grid-scrollable');\n\t\t\tthis._height = 0;\n\t\t\tthis._width = 0;\n\n\t\t\tthis._endPointElement = document.createElement('div');\n\t\t\tthis._endPointElement.classList.add('grid-scroll-end-point');\n\t\t\t_update(this);\n\t\t\tthis._scrollable.appendChild(this._endPointElement);\n\n\t\t\t// const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\n\t\t\t// this._handler.on(this._scrollable, mousewheelevt, (evt) => {\n\t\t\t// const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\n\t\t\t// const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\n\t\t\t// this.scrollTop += delta < 0 ? point : -point;\n\t\t\t// });\n\t\t}\n\t\tcalcTop(top) {\n\t\t\tconst relativeTop = top - this.scrollTop;\n\t\t\treturn this._scrollable.scrollTop + relativeTop;\n\t\t}\n\t\tgetElement() {\n\t\t\treturn this._scrollable;\n\t\t}\n\t\tsetScrollSize(width, height) {\n\t\t\tthis._width = width;\n\t\t\tthis._height = height;\n\t\t\t_update(this);\n\t\t}\n\t\tget scrollWidth() {\n\t\t\treturn this._width;\n\t\t}\n\t\tset scrollWidth(width) {\n\t\t\tthis._width = width;\n\t\t\t_update(this);\n\t\t}\n\t\tget scrollHeight() {\n\t\t\treturn this._height;\n\t\t}\n\t\tset scrollHeight(height) {\n\t\t\tthis._height = height;\n\t\t\t_update(this);\n\t\t}\n\t\tget scrollLeft() {\n\t\t\treturn Math.ceil(this._scrollable.scrollLeft);\n\t\t}\n\t\tset scrollLeft(scrollLeft) {\n\t\t\tthis._scrollable.scrollLeft = scrollLeft;\n\t\t}\n\t\tget scrollTop() {\n\t\t\treturn Math.ceil(this._scrollable.scrollTop / this._p);\n\t\t}\n\t\tset scrollTop(scrollTop) {\n\t\t\tthis._scrollable.scrollTop = scrollTop * this._p;\n\t\t}\n\t\tonScroll(fn) {\n\t\t\tthis._handler.on(this._scrollable, 'scroll', fn);\n\t\t}\n\t\tdispose() {\n\t\t\tthis._handler.dispose();\n\t\t}\n\t}\n\n\tmodule.exports = Scrollable;\n}\n\n/***/ }),\n\n/***/ \"./internal/animate.js\":\n/*!*****************************!*\\\n  !*** ./internal/animate.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tfunction cubicBezier(x2, y2, x3, y3) {\n\t\tlet step;\n\t\tconst err = 0.0001;\n\n\t\tx2 *= 3;\n\t\ty2 *= 3;\n\t\tx3 *= 3;\n\t\ty3 *= 3;\n\n\t\treturn function (t) {\n\t\t\tlet p, a, b, c, d, x, s;\n\t\t\tif (t < 0 || 1 < t) {\n\t\t\t\tthrow new Error(t);\n\t\t\t}\n\n\t\t\tp = step || t;\n\n\t\t\tdo {\n\t\t\t\ta = 1 - p;\n\t\t\t\tb = a * a;\n\t\t\t\tc = p * p;\n\t\t\t\td = c * p;\n\n\t\t\t\tx = x2 * b * p + x3 * a * c + d;\n\t\t\t\ts = t - x;\n\t\t\t\tp += s * 0.5;\n\t\t\t} while (err < Math.abs(s));\n\n\t\t\tstep = p;\n\t\t\treturn y2 * b * p + y3 * a * c + d;\n\t\t};\n\t}\n\tconst EASINGS = {\n\t\tlinear(p) {\n\t\t\treturn p;\n\t\t},\n\t\teaseIn: cubicBezier(0.420, 0.000, 1.000, 1.000),\n\t\teaseOut: cubicBezier(0.000, 0.000, 0.580, 1.000),\n\t\teaseInOut: cubicBezier(0.420, 0.000, 0.580, 1.000)\n\t};\n\n\tconst raf = window.requestAnimationFrame || setTimeout;\n\n\tfunction now() {\n\t\treturn Date.now();\n\t}\n\t/**\r\n  * <pre>\r\n  * Animates.\r\n  * </pre>\r\n  * @function\r\n  * @param {number} duration animation time.\r\n  * @param {function} step\r\n  * @param {function|string} easing\r\n  * @returns {object} Deferred object.\r\n  */\n\tmodule.exports = (duration, step, easing) => {\n\t\tconst startedAt = now();\n\n\t\tif (!easing) {\n\t\t\teasing = EASINGS.easeInOut;\n\t\t} else if (typeof easing === 'string') {\n\t\t\teasing = EASINGS[easing];\n\t\t}\n\n\t\tlet canceledFlg = false;\n\t\tconst createAnim = (resolve, reject) => {\n\t\t\tconst anim = () => {\n\t\t\t\tconst point = now() - startedAt;\n\t\t\t\tif (canceledFlg) {\n\t\t\t\t\t//cancel\n\t\t\t\t\tif (reject) {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t} else if (point >= duration) {\n\t\t\t\t\t//end\n\t\t\t\t\tstep(1);\n\t\t\t\t\tif (resolve) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstep(easing(point / duration));\n\n\t\t\t\t\traf(anim, 1);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn anim;\n\t\t};\n\t\tconst cancel = () => {\n\t\t\tcanceledFlg = true;\n\t\t};\n\t\tif (window.Promise) {\n\t\t\tconst result = new window.Promise((resolve, reject) => {\n\t\t\t\tconst anim = createAnim(resolve, reject);\n\t\t\t\tstep(0);\n\t\t\t\tanim();\n\t\t\t});\n\t\t\tresult.cancel = cancel;\n\t\t\treturn result;\n\t\t} else {\n\t\t\tconst anim = createAnim(() => {}, () => {});\n\t\t\tstep(0);\n\t\t\tanim();\n\t\t\treturn {\n\t\t\t\tcancel\n\t\t\t};\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/calc.js\":\n/*!**************************!*\\\n  !*** ./internal/calc.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction parse(calcStr) {\n\tfunction replacer(match, num, unit) {\n\t\tswitch (unit) {\n\t\t\tcase '%':\n\t\t\t\treturn `(${num} * this.full / 100)`;\n\t\t\tcase 'em':\n\t\t\t\treturn `(${num} * this.em)`;\n\t\t\tcase 'px':\n\t\t\t\treturn `(${num})`;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('calc error');\n\t\t}\n\t}\n\tconst script = calcStr.replace(/^calc\\((.*)\\)$/, '$1').replace(/(\\d+)([A-Za-z%]+)/g, replacer).replace(/(\\d*\\.\\d+)([A-Za-z%]+)/g, replacer);\n\treturn {\n\t\teval(context) {\n\t\t\treturn (() => {\n\t\t\t\tfunction calc(v) {\n\t\t\t\t\t// eslint-disable-line no-unused-vars\n\t\t\t\t\treturn v;\n\t\t\t\t}\n\t\t\t\treturn eval(script); // eslint-disable-line no-eval\n\t\t\t}).call(context);\n\t\t}\n\t};\n}\nfunction toPx(value, context) {\n\tif (/^calc\\(.*\\)$/.test(value)) {\n\t\treturn parse(value).eval(context);\n\t}\n\tif (/^[+-]?\\d+\\.?\\d*%$/.test(value)) {\n\t\treturn context.full * value.substr(0, value.length - 1) / 100;\n\t}\n\tif (/^[+-]?\\d+\\.?\\d*px$/.test(value)) {\n\t\treturn value.substr(0, value.length - 2) - 0;\n\t}\n\tif (/^[+-]?\\d+\\.?\\d*em$/.test(value)) {\n\t\treturn context.em * (value.substr(0, value.length - 2) - 0);\n\t}\n\treturn value - 0;\n}\n\nmodule.exports = {\n\tparse,\n\ttoPx(value, context) {\n\t\tif (typeof value === 'string') {\n\t\t\treturn toPx(value.trim(), context);\n\t\t}\n\t\treturn value - 0;\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/canvases.js\":\n/*!******************************!*\\\n  !*** ./internal/canvases.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tfunction calcBasePosition(ctx, rect, {\n\t\toffset = 0,\n\t\tpadding: {\n\t\t\tleft: paddingLeft = 0,\n\t\t\tright: paddingRight = 0\n\t\t} = {}\n\t} = {}) {\n\t\t// const textAlign = ctx.textAlign || 'left';\n\t\t// const textBaseline = ctx.textBaseline || 'middle';\n\t\t// ctx.textAlign = textAlign;\n\t\t// ctx.textBaseline = textBaseline;\n\n\t\t// let x = rect.left + offset + paddingLeft;\n\t\t// if (textAlign === 'right' || textAlign === 'end') {\n\t\t// \tx = rect.right - offset - paddingRight;\n\t\t// } else if (textAlign === 'center') {\n\t\t// \tx = rect.left + ((rect.width + paddingLeft - paddingRight) / 2);\n\t\t// }\n\t\t// let y = rect.top + offset;\n\t\t// if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n\t\t// \ty = rect.bottom - offset;\n\t\t// } else if (textBaseline === 'middle') {\n\t\t// \ty = rect.top + (rect.height / 2);\n\t\t// }\n\t\t// return {x, y};\n\t\treturn calcStartPosition(ctx, rect, 0, 0, {\n\t\t\toffset,\n\t\t\tpadding: {\n\t\t\t\tleft: paddingLeft,\n\t\t\t\tright: paddingRight\n\t\t\t}\n\t\t});\n\t}\n\tfunction calcStartPosition(ctx, rect, width, height, {\n\t\toffset = 0,\n\t\tpadding: {\n\t\t\tleft: paddingLeft = 0,\n\t\t\tright: paddingRight = 0\n\t\t} = {}\n\t} = {}) {\n\t\tconst textAlign = ctx.textAlign || 'left';\n\t\tconst textBaseline = ctx.textBaseline || 'middle';\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\n\t\tlet x = rect.left + offset + paddingLeft;\n\t\tif (textAlign === 'right' || textAlign === 'end') {\n\t\t\tx = rect.right - width - offset - paddingRight;\n\t\t} else if (textAlign === 'center') {\n\t\t\tx = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\n\t\t}\n\t\tlet y = rect.top + offset;\n\t\tif (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n\t\t\ty = rect.bottom - height - offset;\n\t\t} else if (textBaseline === 'middle') {\n\t\t\ty = rect.top + (rect.height - height) / 2;\n\t\t}\n\t\treturn { x, y };\n\t}\n\n\tmodule.exports = {\n\t\tcalcBasePosition,\n\t\tcalcStartPosition\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/color.js\":\n/*!***************************!*\\\n  !*** ./internal/color.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst rgbMap = {};\n\tfunction styleColorToRGB(color) {\n\t\tconst dummy = document.createElement('div');\n\t\tconst { style } = dummy;\n\t\tstyle.color = color;\n\t\tstyle.position = 'fixed';\n\t\tstyle.height = '1px';\n\t\tstyle.width = '1px';\n\t\tstyle.opacity = 0;\n\t\tdocument.body.appendChild(dummy);\n\t\tconst { color: styleColor } = document.defaultView.getComputedStyle(dummy, '');\n\t\tdocument.body.removeChild(dummy);\n\t\treturn colorToRGB0(styleColor);\n\t}\n\n\tfunction hexToNum(hex) {\n\t\treturn parseInt(hex, 16);\n\t}\n\tfunction createRGB(r, g, b, a = 1) {\n\t\treturn { r, g, b, a };\n\t}\n\tfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\n\t\treturn createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\n\t}\n\tfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2 }) {\n\t\treturn createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\n\t}\n\n\tfunction testRGB({ r, g, b, a }) {\n\t\treturn 0 <= r && r <= 255 && 0 <= g && g <= 255 && 0 <= b && b <= 255 && 0 <= a && a <= 1;\n\t}\n\tfunction rateToByte(r) {\n\t\treturn Math.ceil(r * 255 / 100);\n\t}\n\tfunction colorToRGB0(color) {\n\t\tif (color.match(/^#[0-9a-f]{3}$/i)) {\n\t\t\treturn tripleHexToRGB(color);\n\t\t}\n\t\tif (color.match(/^#[0-9a-f]{6}$/i)) {\n\t\t\treturn sextupleHexToRGB(color);\n\t\t}\n\t\tlet ret = color.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0);\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0, ret[4] - 0);\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\tret = color.match(/^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]));\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]), ret[7] - 0);\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tfunction colorToRGB(color) {\n\t\tif (typeof color !== 'string') {\n\t\t\treturn createRGB(0, 0, 0, 0);\n\t\t}\n\t\tcolor = color.toLowerCase().trim();\n\t\tif (rgbMap[color]) {\n\t\t\treturn rgbMap[color];\n\t\t}\n\t\treturn colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\n\t}\n\n\tmodule.exports = {\n\t\tcolorToRGB\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/com.js\":\n/*!*************************!*\\\n  !*** ./internal/com.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n\t'Array_isArray': window.Array.isArray\n};\n\n/***/ }),\n\n/***/ \"./internal/fonts.js\":\n/*!***************************!*\\\n  !*** ./internal/fonts.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst loads = {};\n\tconst legacy = !document.fonts;\n\tconst load = legacy ? function (font, testStr, callback) {\n\t\t//for legacy(IE)\n\t\tif (loads[font + ' @ ' + testStr]) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\t__webpack_require__(/*! ./legacy/fontwatch/FontWatchRunner */ \"./internal/legacy/fontwatch/FontWatchRunner.js\").load(font, testStr, () => {\n\t\t\tloads[font + ' @ ' + testStr] = true;\n\t\t\tcallback();\n\t\t}, () => {\n\t\t\tloads[font + ' @ ' + testStr] = true;\n\t\t\tcallback();\n\t\t});\n\t} : function (font, testStr, callback) {\n\t\tif (loads.all || loads[font]) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\tdocument.fonts.ready.then(() => {\n\t\t\tloads.all = true;\n\t\t});\n\t\tdocument.fonts.load(font).then(() => {\n\t\t\tloads[font] = true;\n\t\t\tcallback();\n\t\t});\n\t};\n\tconst check = legacy ? function (font, testStr) {\n\t\t//for legacy(IE)\n\t\tif (loads[font + ' @ ' + testStr]) {\n\t\t\treturn true;\n\t\t}\n\t\tload(font, testStr, () => {});\n\t\treturn false;\n\t} : function (font, testStr) {\n\t\tif (loads.all || loads[font]) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!document.fonts.check(font)) {\n\t\t\tload(font, testStr, () => {});\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tmodule.exports = {\n\t\tcheck,\n\t\tload\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/hiDPI.js\":\n/*!***************************!*\\\n  !*** ./internal/hiDPI.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst EventHandler = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\nconst handler = new EventHandler();\n\nlet ratio;\nfunction setRatio() {\n\tratio = Math.ceil(window.devicePixelRatio || 1);\n\tif (ratio > 1 && ratio % 2 !== 0) {\n\t\tratio += 1;\n\t}\n}\nsetRatio();\nhandler.on(window, 'resize', setRatio);\n\nmodule.exports = {\n\ttransform(canvas) {\n\t\tconst ctx = canvas.getContext('2d');\n\n\t\tconst getAttribute = canvas.getAttribute;\n\t\tcanvas.getAttribute = function (name, ...args) {\n\t\t\tlet result = getAttribute.call(this, name, ...args);\n\t\t\tif (name === 'width' || name === 'height') {\n\t\t\t\tresult /= ratio;\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t\tconst setAttribute = canvas.setAttribute;\n\t\tcanvas.setAttribute = function (name, val, ...args) {\n\t\t\tconst wh = name === 'width' || name === 'height';\n\t\t\tif (wh) {\n\t\t\t\tval *= ratio;\n\t\t\t}\n\t\t\tconst result = setAttribute.call(this, name, val, ...args);\n\t\t\tif (wh) {\n\t\t\t\tctx.scale(ratio, ratio);\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\n\t\tObject.defineProperty(canvas, 'width', {\n\t\t\tget() {\n\t\t\t\treturn canvas.getAttribute('width');\n\t\t\t},\n\t\t\tset: val => {\n\t\t\t\tcanvas.setAttribute('width', Math.floor(val));\n\t\t\t},\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true\n\t\t});\n\t\tObject.defineProperty(canvas, 'height', {\n\t\t\tget() {\n\t\t\t\treturn canvas.getAttribute('height');\n\t\t\t},\n\t\t\tset: val => {\n\t\t\t\tcanvas.setAttribute('height', Math.floor(val));\n\t\t\t},\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true\n\t\t});\n\t\tconst drawImage = ctx.drawImage;\n\t\tctx.drawImage = function (img, ...args) {\n\t\t\tif (img !== canvas || ratio === 1) {\n\t\t\t\treturn drawImage.call(this, img, ...args);\n\t\t\t}\n\t\t\tthis.save();\n\t\t\ttry {\n\t\t\t\tthis.scale(1 / ratio, 1 / ratio);\n\t\t\t\tif (args.length > 4) {\n\t\t\t\t\targs[4] = args[4] * ratio;\n\t\t\t\t\targs[5] = args[5] * ratio;\n\t\t\t\t} else {\n\t\t\t\t\targs[0] = args[0] * ratio;\n\t\t\t\t\targs[1] = args[1] * ratio;\n\t\t\t\t}\n\t\t\t\treturn drawImage.call(this, img, ...args);\n\t\t\t} finally {\n\t\t\t\tthis.restore();\n\t\t\t}\n\t\t};\n\n\t\treturn canvas;\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/icons.js\":\n/*!***************************!*\\\n  !*** ./internal/icons.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { isDef } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst ICON_PROP_KEYS = ['content', 'font', 'color', 'className', 'isLiga', 'width', 'src', 'svg', 'name', 'path'];\n\nfunction quote(name) {\n\tconst quoted = [];\n\tconst split = name.split(/,\\s*/);\n\tfor (let i = 0; i < split.length; i++) {\n\t\tconst part = split[i].replace(/['\"]/g, '');\n\t\tif (part.indexOf(' ') === -1 && !/^\\d/.test(part)) {\n\t\t\tquoted.push(part);\n\t\t} else {\n\t\t\tquoted.push('\\'' + part + '\\'');\n\t\t}\n\t}\n\treturn quoted.join(',');\n}\n\nconst doms = {};\nconst props = {};\n\nfunction getIconProps(tagName, className) {\n\tconst tagProps = props[tagName] || (props[tagName] = {});\n\tif (tagProps[className]) {\n\t\treturn tagProps[className];\n\t}\n\tconst dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\n\tdom.className = className;\n\tdocument.body.appendChild(dom);\n\ttry {\n\t\tconst beforeStyle = document.defaultView.getComputedStyle(dom, '::before');\n\t\tlet content = beforeStyle.getPropertyValue('content');\n\t\tif (content.length >= 3 && (content[0] === '\"' || content[0] === '\\'')) {\n\t\t\tif (content[0] === content[content.length - 1]) {\n\t\t\t\tcontent = content.substr(1, content.length - 2);\n\t\t\t}\n\t\t}\n\t\tlet font = beforeStyle.getPropertyValue('font');\n\t\tif (!font) {\n\t\t\tfont = beforeStyle.getPropertyValue('font-style') + ' ' + beforeStyle.getPropertyValue('font-variant') + ' ' + beforeStyle.getPropertyValue('font-weight') + ' ' + beforeStyle.getPropertyValue('font-size') + '/' + beforeStyle.getPropertyValue('line-height') + ' ' + quote(beforeStyle.getPropertyValue('font-family'));\n\t\t}\n\t\tconst color = beforeStyle.getPropertyValue('color');\n\t\tconst width = dom.clientWidth;\n\t\tconst isLiga = (beforeStyle.getPropertyValue('font-feature-settings') || '').indexOf('liga') > -1;\n\n\t\treturn tagProps[className] = {\n\t\t\tcontent,\n\t\t\tfont,\n\t\t\tcolor,\n\t\t\twidth,\n\t\t\tisLiga\n\t\t};\n\t} finally {\n\t\tdocument.body.removeChild(dom);\n\t}\n}\n\nfunction toPropArray(prop, count) {\n\tconst result = [];\n\tif (__webpack_provided_Array_dot_isArray(prop)) {\n\t\tresult.push(...prop);\n\t\tfor (let i = prop.length; i < count; i++) {\n\t\t\tresult.push(null);\n\t\t}\n\t} else {\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tresult.push(prop);\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction toSimpleArray(iconProps) {\n\tif (!iconProps) {\n\t\treturn iconProps;\n\t} else if (__webpack_provided_Array_dot_isArray(iconProps)) {\n\t\treturn iconProps;\n\t}\n\n\tconst workData = {};\n\n\tlet count = 0;\n\tICON_PROP_KEYS.forEach(k => {\n\t\tif (iconProps[k]) {\n\t\t\tif (__webpack_provided_Array_dot_isArray(iconProps[k])) {\n\t\t\t\tcount = Math.max(count, iconProps[k].length);\n\t\t\t} else {\n\t\t\t\tcount = Math.max(count, 1);\n\t\t\t}\n\t\t}\n\t});\n\n\tICON_PROP_KEYS.forEach(k => {\n\t\tworkData[k] = toPropArray(iconProps[k], count);\n\t});\n\n\tconst result = [];\n\tfor (let i = 0; i < count; i++) {\n\t\tconst data = {};\n\t\tICON_PROP_KEYS.forEach(k => {\n\t\t\tdata[k] = workData[k][i];\n\t\t});\n\t\tresult.push(data);\n\t}\n\treturn result;\n}\n\nfunction normarize(iconProps) {\n\tconst data = {};\n\tfor (const k in iconProps) {\n\t\tif (k === 'className') {\n\t\t\tcontinue;\n\t\t}\n\t\tdata[k] = iconProps[k];\n\t}\n\tif (iconProps.className) {\n\t\tconst prop = getIconProps(iconProps.tagName || 'i', iconProps.className);\n\t\tfor (const k in prop) {\n\t\t\tif (!isDef(iconProps[k])) {\n\t\t\t\tdata[k] = prop[k];\n\t\t\t}\n\t\t}\n\t}\n\treturn data;\n}\n\nmodule.exports = {\n\ttoNormarizeArray(iconProps) {\n\t\tconst icons = toSimpleArray(iconProps);\n\t\tif (!icons) {\n\t\t\treturn icons;\n\t\t}\n\t\treturn icons.map(icon => normarize(icon));\n\t},\n\tget iconPropKeys() {\n\t\treturn ICON_PROP_KEYS;\n\t},\n\tgetIconProps\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./internal/imgs.js\":\n/*!**************************!*\\\n  !*** ./internal/imgs.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { isPromise } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\nconst LRUCache = __webpack_require__(/*! ./LRUCache */ \"./internal/LRUCache.js\");\n\nconst allCache = {};\n\nfunction isDataUrl(url) {\n\treturn url.search(/^(data:)/) !== -1;\n}\n\nfunction loadImage(src) {\n\tif (!window.Promise) {\n\t\tconsole.error('Promise is not loaded. load Promise before this process.');\n\t\treturn {\n\t\t\tthen() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t};\n\t}\n\tconst img = new Image();\n\tconst result = new window.Promise(resolve => {\n\t\timg.onload = () => {\n\t\t\tresolve(img);\n\t\t};\n\t});\n\timg.onerror = e => {\n\t\tconst url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\n\t\tconsole.warn(`cannot load: ${url}`);\n\t\tthrow new Error(`IMAGE LOAD ERROR: ${url}`);\n\t};\n\timg.src = isDataUrl(src) ? src : `${src}?${Date.now()}`;\n\treturn result;\n}\n\nfunction getCacheOrLoad0(cache, src) {\n\tif (isPromise(src)) {\n\t\treturn src.then(u => getCacheOrLoad0(cache, u));\n\t}\n\tconst c = cache.get(src);\n\tif (c) {\n\t\treturn c;\n\t}\n\tconst result = loadImage(src).then(img => {\n\t\tcache.put(src, img);\n\t\treturn img;\n\t});\n\tcache.put(src, result);\n\treturn result;\n}\n\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\n\tconst cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache(cacheSize));\n\treturn getCacheOrLoad0(cache, src);\n}\n\nmodule.exports = {\n\tloadImage,\n\tgetCacheOrLoad\n};\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/Path2D.js\":\n/*!******************************************!*\\\n  !*** ./internal/legacy/canvas/Path2D.js ***!\n  \\******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst PathCommandsParser = __webpack_require__(/*! ./PathCommandsParser */ \"./internal/legacy/canvas/PathCommandsParser.js\");\nconst parser = new PathCommandsParser();\n\nclass Path2D {\n\tconstructor(arg) {\n\t\tthis._ops = [];\n\t\t['closePath', 'moveTo', 'lineTo', 'bezierCurveTo', 'quadraticCurveTo', 'arc', 'rect'].forEach(name => {\n\t\t\tthis[name] = (...args) => {\n\t\t\t\tthis._ops.push({ op: name, args });\n\t\t\t};\n\t\t});\n\t\tif (arg === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof arg === 'string') {\n\t\t\ttry {\n\t\t\t\tthis._ops = parser.parse(arg);\n\t\t\t} catch (e) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t} else if (arg.hasOwnProperty('_ops')) {\n\t\t\tthis._ops = [...this._ops];\n\t\t} else {\n\t\t\tthrow new Error(`Error: ${typeof arg} is not a valid argument to Path`);\n\t\t}\n\t}\n}\n\nconst CanvasRenderingContext2D = window.CanvasRenderingContext2D;\n\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\n\nCanvasRenderingContext2D.prototype.fill = function (...args) {\n\tif (args[0] instanceof Path2D) {\n\t\tconst path = args[0];\n\t\tthis.beginPath();\n\t\tpath._ops.forEach(op => {\n\t\t\tthis[op.op](...op.args);\n\t\t});\n\t\toriginalFill.apply(this, Array.prototype.slice.call(args, 1));\n\t} else {\n\t\toriginalFill.apply(this, args);\n\t}\n};\n\nmodule.exports = Path2D;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommands.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommands.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction mag(v) {\n\treturn Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n\nfunction dot(u, v) {\n\treturn u[0] * v[0] + u[1] * v[1];\n}\n\nfunction ratio(u, v) {\n\treturn dot(u, v) / (mag(u) * mag(v));\n}\n\nfunction clamp(value, min, max) {\n\treturn Math.min(Math.max(value, min), max);\n}\n\nfunction angle(u, v) {\n\tlet sign = 1.0;\n\tif (u[0] * v[1] - u[1] * v[0] < 0) {\n\t\tsign = -1.0;\n\t}\n\treturn sign * Math.acos(clamp(ratio(u, v)), -1, 1);\n}\n\nfunction rotClockwise(v, angle) {\n\tconst cost = Math.cos(angle);\n\tconst sint = Math.sin(angle);\n\treturn [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n}\n\nfunction rotCounterClockwise(v, angle) {\n\tconst cost = Math.cos(angle);\n\tconst sint = Math.sin(angle);\n\treturn [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n}\n\nfunction midPoint(u, v) {\n\treturn [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n}\n\nfunction meanVec(u, v) {\n\treturn [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n}\n\nfunction pointMul(u, v) {\n\treturn [u[0] * v[0], u[1] * v[1]];\n}\n\nfunction scale(c, v) {\n\treturn [c * v[0], c * v[1]];\n}\n\nfunction sum(u, v) {\n\treturn [u[0] + v[0], u[1] + v[1]];\n}\n// Convert an SVG elliptical arc to a series of canvas commands.\n//\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\n// rx, ry: radii of the ellipse.\n// phi: rotation of the ellipse.\n// fA: large arc flag.\n// fS: sweep flag.\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\n\t// Convert from endpoint to center parametrization, as detailed in:\n\t//   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\tif (rx === 0 || ry === 0) {\n\t\tctx.lineTo(x2, x1);\n\t\treturn;\n\t}\n\tphi = phi * (Math.PI / 180.0);\n\trx = Math.abs(rx);\n\try = Math.abs(ry);\n\tconst xPrime = rotClockwise(midPoint(x1, x2), phi); // F.6.5.1\n\tconst xPrime2 = pointMul(xPrime, xPrime);\n\tlet rx2 = Math.pow(rx, 2);\n\tlet ry2 = Math.pow(ry, 2);\n\n\tconst lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n\tif (lambda > 1) {\n\t\trx *= lambda;\n\t\try *= lambda;\n\t\trx2 = Math.pow(rx, 2);\n\t\try2 = Math.pow(ry, 2);\n\t}\n\tlet factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) / (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\n\tif (fA === fS) {\n\t\tfactor *= -1.0;\n\t}\n\tconst cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\n\tconst c = sum(rotCounterClockwise(cPrime, phi), meanVec(x1, x2)); // F.6.5.3\n\tconst x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\n\tconst x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\n\tconst theta = angle([1, 0], x1UnitVector); // F.6.5.5\n\tconst deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\n\tconst start = theta;\n\tconst end = theta + deltaTheta;\n\tctx.save();\n\tctx.translate(c[0], c[1]);\n\tctx.rotate(phi);\n\tctx.scale(rx, ry);\n\tctx.arc(0, 0, 1, start, end, 1 - fS);\n\tctx.restore();\n}\n\nclass PathCommands {\n\tconstructor(ctx) {\n\t\tlet lMx;\n\t\tlet lMy;\n\t\tlet lx = 0;\n\t\tlet ly = 0;\n\t\tlet reflected;\n\t\tlet lastCommand = '';\n\t\tfunction makeReflected() {\n\t\t\tif ('CcSsQqTt'.indexOf(lastCommand) < 0) {\n\t\t\t\treturn { x: lx, y: ly };\n\t\t\t}\n\t\t\treturn reflected;\n\t\t}\n\n\t\tthis.M = (px, py) => {\n\t\t\tctx.moveTo(px, py);\n\t\t\tlMx = px;\n\t\t\tlMy = py;\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\tlastCommand = 'M';\n\t\t\treturn this;\n\t\t};\n\t\tthis.m = (px, py) => this.M(px + lx, py + ly);\n\t\tthis.L = (px, py) => {\n\t\t\tctx.lineTo(px, py);\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\tlastCommand = 'L';\n\t\t\treturn this;\n\t\t};\n\t\tthis.l = (px, py) => this.L(px + lx, py + ly);\n\t\tthis.H = px => this.L(px, ly);\n\t\tthis.h = px => this.H(px + lx);\n\t\tthis.V = py => this.L(lx, py);\n\t\tthis.v = py => this.V(py + ly);\n\t\tthis.Z = () => {\n\t\t\tctx.closePath();\n\t\t\tlx = lMx;\n\t\t\tly = lMy;\n\t\t\tlastCommand = 'Z';\n\t\t\treturn this;\n\t\t};\n\t\tthis.z = () => this.Z();\n\t\t//C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\n\t\tthis.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\n\t\t\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\treflected = {\n\t\t\t\tx: 2 * px - cp2x,\n\t\t\t\ty: 2 * py - cp2y\n\t\t\t};\n\t\t\tlastCommand = 'C';\n\t\t\treturn this;\n\t\t};\n\t\tthis.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\n\t\t//S x2 y2, x y (or s dx2 dy2, dx dy)\n\t\tthis.S = (cpx, cpy, px, py) => {\n\t\t\tconst { x: cp1x, y: cp1y } = makeReflected(lastCommand);\n\t\t\treturn this.C(cp1x, cp1y, cpx, cpy, px, py);\n\t\t};\n\t\tthis.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\n\t\t//Q x1 y1, x y (or q dx1 dy1, dx dy)\n\t\tthis.Q = (cpx, cpy, px, py) => {\n\t\t\tctx.quadraticCurveTo(cpx, cpy, px, py);\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\treflected = {\n\t\t\t\tx: 2 * px - cpx,\n\t\t\t\ty: 2 * py - cpy\n\t\t\t};\n\t\t\tlastCommand = 'Q';\n\t\t\treturn this;\n\t\t};\n\t\tthis.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\n\t\t//T x y (or t dx dy)\n\t\tthis.T = (px, py) => {\n\t\t\tconst { x: cpx, y: cpy } = makeReflected();\n\t\t\treturn this.Q(cpx, cpy, px, py);\n\t\t};\n\t\tthis.t = (px, py) => this.T(px + lx, py + ly);\n\t\t//A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\t\tthis.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\n\t\t\tconst x1 = lx;\n\t\t\tconst y1 = ly;\n\n\t\t\tellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\n\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\tlastCommand = 'A';\n\t\t\treturn this;\n\t\t};\n\t\t//a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\n\t\tthis.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\n\t}\n}\n\nmodule.exports = PathCommands;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommandsParser.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommandsParser.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst PathCommands = __webpack_require__(/*! ./PathCommands */ \"./internal/legacy/canvas/PathCommands.js\");\n\nfunction pathTokens(d) {\n\tlet idx = 0;\n\treturn {\n\t\tnext() {\n\t\t\tlet s = '';\n\t\t\twhile (d.length > idx) {\n\t\t\t\tconst c = d[idx];\n\t\t\t\tidx++;\n\t\t\t\tif (' ,\\n\\r\\t'.indexOf(c) > -1) {\n\t\t\t\t\tif (s) {\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst type = '.+-1234567890'.indexOf(c) > -1 ? 'num' : 'str';\n\t\t\t\t\tif (type === 'str') {\n\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn c;\n\t\t\t\t\t}\n\t\t\t\t\tif ('-+'.indexOf(c) > -1) {\n\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (c === '.') {\n\t\t\t\t\t\tif (s.indexOf('.') > -1) {\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ts += c;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn s || null;\n\t\t}\n\t};\n}\n\nfunction command(builder, cmd, argsProvider) {\n\tif (cmd.toUpperCase() === 'M' || cmd.toUpperCase() === 'L' || cmd.toUpperCase() === 'T') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next());\n\t\treturn cmd === 'M' ? 'L' : cmd === 'm' ? 'l' : cmd;\n\t} else if (cmd.toUpperCase() === 'H' || cmd.toUpperCase() === 'V') {\n\t\tbuilder.command(cmd, argsProvider.next());\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'Z') {\n\t\tbuilder.command(cmd);\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'C') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'S' || cmd.toUpperCase() === 'Q') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'A') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n\t\treturn cmd;\n\t} else {\n\t\t// https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\n\t\tconsole.warn('unsupported:' + cmd);\n\t}\n\treturn null;\n}\n\nconst canvasOperations = window.CanvasRenderingContext2D ? Object.keys(window.CanvasRenderingContext2D.prototype) : ['save', 'restore', 'beginPath', 'closePath', 'moveTo', 'lineTo', 'bezierCurveTo', 'quadraticCurveTo', 'arc', 'arcTo', 'ellipse', 'rect', 'translate', 'rotate', 'scale'];\n\nclass PathCommandsParser {\n\tconstructor() {\n\t\tthis._commands = new PathCommands(this);\n\t\tcanvasOperations.forEach(op => {\n\t\t\tthis[op] = (...args) => {\n\t\t\t\tthis._ops.push({\n\t\t\t\t\top,\n\t\t\t\t\targs\n\t\t\t\t});\n\t\t\t};\n\t\t});\n\t}\n\tcommand(name, ...args) {\n\t\targs = args || [];\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\targs[i] = args[i] - 0;\n\t\t}\n\t\tthis._commands[name](...args);\n\t}\n\tparse(d) {\n\t\tconst ops = this._ops = [];\n\t\tconst tokens = pathTokens(d);\n\t\ttry {\n\t\t\tlet cmd;\n\t\t\tlet subsequentCommand;\n\t\t\twhile (cmd = tokens.next()) {\n\t\t\t\tif (!isNaN(cmd - 0)) {\n\t\t\t\t\tlet fst = true;\n\t\t\t\t\tconst argsProvider = {\n\t\t\t\t\t\tnext() {\n\t\t\t\t\t\t\tif (fst) {\n\t\t\t\t\t\t\t\tfst = false;\n\t\t\t\t\t\t\t\treturn cmd;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn tokens.next();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tsubsequentCommand = command(this, subsequentCommand, argsProvider);\n\t\t\t\t} else {\n\t\t\t\t\tsubsequentCommand = command(this, cmd, tokens);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log('Error: ' + d);\n\t\t\tthrow e;\n\t\t}\n\t\treturn ops;\n\t}\n}\n\nmodule.exports = PathCommandsParser;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontRuler.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontRuler.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//see https://github.com/typekit/webfontloader\n\nfunction computeStyle(font) {\n\treturn [{\n\t\tdisplay: 'block',\n\t\tposition: 'absolute',\n\t\ttop: '-9999px',\n\t\tleft: '-9999px',\n\t\twidth: 'auto',\n\t\theight: 'auto',\n\t\tmargin: '0',\n\t\tpadding: '0',\n\t\t'white-space': 'nowrap',\n\t\tfont\n\t}, {\n\t\t'font-variant': 'normal',\n\t\t'font-size': '300px',\n\t\t'font-style': 'normal',\n\t\t'font-weight': '400',\n\t\t'line-height': 'normal'\n\t}];\n}\n\nclass FontRuler {\n\tconstructor(font, testStr) {\n\t\tconst e = document.createElement('span');\n\t\te.setAttribute('aria-hidden', 'true');\n\t\te.textContent = testStr || 'BESbswy';\n\n\t\tcomputeStyle(font).forEach(style => {\n\t\t\tfor (const key in style) {\n\t\t\t\te.style[key] = style[key];\n\t\t\t}\n\t\t});\n\t\tdocument.body.appendChild(e);\n\t\tthis.el_ = e;\n\t}\n\tgetWidth() {\n\t\treturn this.el_.offsetWidth;\n\t}\n\tremove() {\n\t\tdocument.body.removeChild(this.el_);\n\t}\n}\n\nmodule.exports = FontRuler;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontWatchRunner.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontWatchRunner.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//see https://github.com/typekit/webfontloader\n\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\n\nconst FontRuler = __webpack_require__(/*! ./FontRuler */ \"./internal/legacy/fontwatch/FontRuler.js\");\n\nconst LastResortFonts = {\n\tSERIF: 'serif',\n\tSANS_SERIF: 'sans-serif'\n};\n\nconst watchRunners = {};\n\nclass FontWatchRunner {\n\tstatic load(font, testStr, activeCallback, inactiveCallback) {\n\t\tconst c = watchRunners[font] || (watchRunners[font] = {});\n\t\ttestStr = testStr + '';\n\t\tlet runner;\n\t\tif (c[testStr]) {\n\t\t\trunner = c[testStr];\n\t\t} else {\n\t\t\trunner = c[testStr] = new FontWatchRunner(font, testStr);\n\t\t}\n\t\trunner.then(activeCallback, inactiveCallback);\n\t}\n\tconstructor(font, testStr) {\n\t\tthis.activeCallbacks = [];\n\t\tthis.inactiveCallbacks = [];\n\t\tthis.status = null;\n\t\tthis.lastResortWidths_ = {};\n\n\t\tthis.fontRulerA_ = new FontRuler(font + ',' + LastResortFonts.SERIF, testStr);\n\t\tthis.fontRulerB_ = new FontRuler(font + ',' + LastResortFonts.SANS_SERIF, testStr);\n\t\tconst lastResortRulerA = new FontRuler('4px ' + LastResortFonts.SERIF, testStr);\n\t\tconst lastResortRulerB = new FontRuler('4px ' + LastResortFonts.SANS_SERIF, testStr);\n\n\t\t//start\n\t\tthis.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\n\t\tthis.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\n\n\t\tlastResortRulerA.remove();\n\t\tlastResortRulerB.remove();\n\n\t\tthis.started_ = Date.now();\n\n\t\tthis.check_();\n\t}\n\tthen(activeCallback, inactiveCallback) {\n\t\tif (this.status) {\n\t\t\tif (this.status !== 'ng') {\n\t\t\t\tactiveCallback();\n\t\t\t} else {\n\t\t\t\tinactiveCallback();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.activeCallbacks.push(activeCallback);\n\t\t\tthis.inactiveCallbacks.push(inactiveCallback);\n\t\t}\n\t}\n\tcheck_() {\n\t\tconst widthA = this.fontRulerA_.getWidth();\n\t\tconst widthB = this.fontRulerB_.getWidth();\n\n\t\tif (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\n\t\t\tif (Date.now() - this.started_ >= 3000) {\n\t\t\t\t// timeout\n\t\t\t\tif (this.isLastResortFont_(widthA, widthB)) {\n\t\t\t\t\tthis.finish_(this.activeCallbacks);\n\t\t\t\t\tthis.status = 'ok';\n\t\t\t\t} else {\n\t\t\t\t\tthis.finish_(this.inactiveCallbacks);\n\t\t\t\t\tthis.status = 'ng';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.check_();\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.finish_(this.activeCallbacks);\n\t\t\tthis.status = 'ok';\n\t\t}\n\t}\n\tisFallbackFont_(a, b) {\n\t\treturn this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\n\t}\n\twidthsMatchLastResortWidths_(a, b) {\n\t\tfor (const font in LastResortFonts) {\n\t\t\tif (LastResortFonts.hasOwnProperty(font)) {\n\t\t\t\tif (this.widthMatches_(a, LastResortFonts[font]) && this.widthMatches_(b, LastResortFonts[font])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\twidthMatches_(width, lastResortFont) {\n\t\treturn width === this.lastResortWidths_[lastResortFont];\n\t}\n\tisLastResortFont_(a, b) {\n\t\treturn hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\n\t}\n\tfinish_(callbacks) {\n\t\tsetTimeout(() => {\n\t\t\tthis.fontRulerA_.remove();\n\t\t\tthis.fontRulerB_.remove();\n\t\t\tcallbacks.forEach(cb => cb());\n\t\t}, 0);\n\t}\n}\n\nlet HAS_WEBKIT_FALLBACK_BUG = null;\nfunction hasWebKitFallbackBug() {\n\tif (HAS_WEBKIT_FALLBACK_BUG === null) {\n\t\tconst match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\n\n\t\tHAS_WEBKIT_FALLBACK_BUG = !!match && (parseInt(match[1], 10) < 536 || parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11);\n\t}\n\treturn HAS_WEBKIT_FALLBACK_BUG;\n}\n\nmodule.exports = FontWatchRunner;\n\n/***/ }),\n\n/***/ \"./internal/menu-items.js\":\n/*!********************************!*\\\n  !*** ./internal/menu-items.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nfunction normalize(options) {\n\tif (!options) {\n\t\treturn [];\n\t}\n\tif (__webpack_provided_Array_dot_isArray(options)) {\n\t\treturn options;\n\t}\n\tif (typeof options === 'string') {\n\t\treturn normalize(JSON.parse(options));\n\t}\n\tconst result = [];\n\tfor (const k in options) {\n\t\tresult.push({\n\t\t\tvalue: k,\n\t\t\tcaption: options[k]\n\t\t});\n\t}\n\treturn result;\n}\n\nmodule.exports = {\n\tnormalize\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./internal/path2DManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/path2DManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction getPath2D() {\n\t//return require('./legacy/canvas/Path2D');\n\treturn window.Path2D || __webpack_require__(/*! ./legacy/canvas/Path2D */ \"./internal/legacy/canvas/Path2D.js\");\n}\n\nmodule.exports = {\n\tfill(module, ctx, x, y, w, h) {\n\t\tctx.save();\n\t\ttry {\n\t\t\tconst { width, height } = module;\n\t\t\tconst { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = module;\n\t\t\tw = w || width;\n\t\t\th = h || height;\n\t\t\tconst xrate = w / width;\n\t\t\tconst yrate = h / (upsideDown ? -height : height);\n\t\t\tx = x || 0;\n\t\t\ty = upsideDown ? (y || 0) + -height * yrate : y || 0;\n\n\t\t\tctx.translate(x, y);\n\t\t\tctx.scale(xrate, yrate);\n\t\t\tif (offsetX !== 0 || offsetY !== 0) {\n\t\t\t\tctx.translate(offsetX, offsetY);\n\t\t\t}\n\t\t\tconst Path2D = getPath2D();\n\t\t\tmodule.path2d = module.path2d || new Path2D(module.d);\n\t\t\tctx.fill(module.path2d);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t},\n\tget Path2D() {\n\t\treturn getPath2D();\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/sort.js\":\n/*!**************************!*\\\n  !*** ./internal/sort.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { isPromise } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\n\tfunction wait(val) {\n\t\treturn val.then(v => {\n\t\t\tif (isPromise(v)) {\n\t\t\t\treturn wait(v);\n\t\t\t} else {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t});\n\t}\n\tfunction createArray(get, length) {\n\t\tconst array = new Array(length);\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tarray[i] = get(i);\n\t\t}\n\t\treturn array;\n\t}\n\tfunction createArrayPromise(get, getField, length) {\n\t\treturn new Promise(resolve => {\n\t\t\tconst plist = [];\n\t\t\tconst array = new Array(length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst data = get(i);\n\t\t\t\tconst record = {\n\t\t\t\t\tv: data,\n\t\t\t\t\tf: data\n\t\t\t\t};\n\t\t\t\tarray[i] = record;\n\t\t\t\tif (isPromise(data)) {\n\t\t\t\t\tplist.push(wait(data).then(v => {\n\t\t\t\t\t\trecord.v = v;\n\t\t\t\t\t\trecord.f = v;\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t\tPromise.all(plist).then(() => setArrayField(array, getField)).then(resolve);\n\t\t});\n\t}\n\tfunction setArrayField(array, getField) {\n\t\tif (!getField) {\n\t\t\treturn Promise.resolve(array);\n\t\t}\n\t\treturn new Promise(resolve => {\n\t\t\tconst length = array.length;\n\t\t\tconst plist = [];\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst record = array[i];\n\t\t\t\trecord.f = getField(record.v);\n\t\t\t\tif (isPromise(record.f)) {\n\t\t\t\t\tplist.push(wait(record.f).then(v => {\n\t\t\t\t\t\trecord.f = v;\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t\tPromise.all(plist).then(() => resolve(array));\n\t\t});\n\t}\n\tconst sort = {\n\t\tsort(get, set, length, compare, getField) {\n\t\t\tconst old = createArray(get, length);\n\t\t\tif (getField) {\n\t\t\t\told.sort((r1, r2) => compare(getField(r1), getField(r2)));\n\t\t\t} else {\n\t\t\t\told.sort(compare);\n\t\t\t}\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tset(i, old[i]);\n\t\t\t}\n\t\t},\n\t\tsortArray(array, compare) {\n\t\t\tArray.prototype.sort.call(array, compare);\n\t\t},\n\t\tsortPromise(get, set, length, compare, getField) {\n\t\t\tif (window.Promise) {\n\t\t\t\treturn createArrayPromise(get, getField, length).then(array => {\n\t\t\t\t\tarray.sort((r1, r2) => compare(r1.f, r2.f));\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\tset(i, array[i].v);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsort.sort(get, set, length, compare, getField);\n\t\t\t\tconst dummyPromise = {\n\t\t\t\t\tthen(fn) {\n\t\t\t\t\t\tfn();\n\t\t\t\t\t\treturn dummyPromise;\n\t\t\t\t\t},\n\t\t\t\t\tcatch() {\n\t\t\t\t\t\treturn dummyPromise;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn dummyPromise;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = sort;\n}\n\n/***/ }),\n\n/***/ \"./internal/style.css\":\n/*!****************************!*\\\n  !*** ./internal/style.css ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../node_modules/css-loader?minimize!./style.css */ \"../../node_modules/css-loader/index.js?minimize!./internal/style.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./internal/style.js\":\n/*!***************************!*\\\n  !*** ./internal/style.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tfunction getScrollBarWidth() {\n\t\tconst dummy = document.createElement('div');\n\t\tconst { style } = dummy;\n\t\tstyle.position = 'absolute';\n\t\tstyle.height = '9999px';\n\t\tstyle.width = 'calc(100vw - 100%)';\n\t\tstyle.opacity = 0;\n\t\tdummy.textContent = 'x';\n\t\tdocument.body.appendChild(dummy);\n\t\tconst { width } = document.defaultView.getComputedStyle(dummy, '');\n\t\tdocument.body.removeChild(dummy);\n\t\treturn parseInt(width, 10);\n\t}\n\n\tlet SCROLLBAR_SIZE;\n\tconst initDocument = () => {\n\t\t__webpack_require__(/*! ./style.css */ \"./internal/style.css\");\n\t\tSCROLLBAR_SIZE = getScrollBarWidth() || 10;\n\t\tconst style = document.createElement('style');\n\t\tstyle.setAttribute('type', 'text/css');\n\t\tstyle.setAttribute('data-name', 'cheetah-grid');\n\t\tstyle.innerHTML = `\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ${SCROLLBAR_SIZE}px;\n\theight: ${SCROLLBAR_SIZE}px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\n}\n\t\t`;\n\n\t\tdocument.head.appendChild(style);\n\t};\n\n\tconst style = {\n\t\tinitDocument() {\n\t\t\tstyle.initDocument = () => {};\n\t\t\tinitDocument();\n\t\t},\n\t\tgetScrollBarSize() {\n\t\t\treturn SCROLLBAR_SIZE;\n\t\t}\n\t};\n\n\tmodule.exports = style;\n}\n\n/***/ }),\n\n/***/ \"./internal/symbolManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/symbolManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Symbol = window.Symbol ? window.Symbol : (() => {\n\t\tlet nextId = 1;\n\t\treturn name => {\n\t\t\tconst id = nextId++;\n\t\t\tif (name) {\n\t\t\t\treturn ` $$$ ${name} - ${id} $$$ `;\n\t\t\t} else {\n\t\t\t\treturn ` $$$ ${id} $$$ `;\n\t\t\t}\n\t\t};\n\t})();\n\tconst mem = {};\n\n\tmodule.exports = {\n\t\tget(name) {\n\t\t\tif (name) {\n\t\t\t\treturn mem[name] ? mem[name] : mem[name] = Symbol(name);\n\t\t\t} else {\n\t\t\t\treturn Symbol();\n\t\t\t}\n\t\t},\n\t\tget PROTECTED_SYMBOL() {\n\t\t\treturn this.get('protected');\n\t\t},\n\t\tget CHECK_COLUMN_STATE_ID() {\n\t\t\treturn this.get('chkcol.stateID');\n\t\t},\n\t\tget BUTTON_COLUMN_STATE_ID() {\n\t\t\treturn this.get('btncol.stateID');\n\t\t},\n\t\tget COLUMN_FADEIN_STATE_ID() {\n\t\t\treturn this.get('col.fadein_stateID');\n\t\t},\n\t\tget BRANCH_GRAPH_COLUMN_STATE_ID() {\n\t\t\treturn this.get('branch_graph_col.stateID');\n\t\t},\n\t\tget SMALL_DIALOG_INPUT_EDITOR_STATE_ID() {\n\t\t\treturn this.get('small_dialog_input_editor.stateID');\n\t\t},\n\t\tget INLINE_INPUT_EDITOR_STATE_ID() {\n\t\t\treturn this.get('inline_input_editor.stateID');\n\t\t},\n\t\tget INLINE_MENU_EDITOR_STATE_ID() {\n\t\t\treturn this.get('inline_menu_editor.stateID');\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/utils.js\":\n/*!***************************!*\\\n  !*** ./internal/utils.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\n{\n\tlet arrayFind;\n\tlet arrayFindIndex;\n\tconst array = {\n\t\tget find() {\n\t\t\tif (arrayFind) {\n\t\t\t\treturn arrayFind;\n\t\t\t}\n\t\t\tif (Array.prototype.find) {\n\t\t\t\tarrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\n\t\t\t} else {\n\t\t\t\tarrayFind = (arr, predicate) => {\n\t\t\t\t\tconst index = array.findIndex(arr, predicate);\n\t\t\t\t\treturn index >= 0 ? arr[index] : undefined;\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn arrayFind;\n\t\t},\n\t\tget findIndex() {\n\t\t\tif (arrayFindIndex) {\n\t\t\t\treturn arrayFindIndex;\n\t\t\t}\n\t\t\tif (Array.prototype.findIndex) {\n\t\t\t\tarrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\n\t\t\t} else {\n\t\t\t\tarrayFindIndex = (arr, predicate) => {\n\t\t\t\t\tconst length = arr.length;\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\tconst value = arr[i];\n\t\t\t\t\t\tif (predicate(value, i, arr)) {\n\t\t\t\t\t\t\treturn i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn arrayFindIndex;\n\t\t}\n\t};\n\n\tfunction isDef(data) {\n\t\treturn data !== null && typeof data !== 'undefined';\n\t}\n\tconst ua = window.navigator.userAgent.toLowerCase();\n\tconst IE = ua.match(/(msie)/) || ua.match(/trident/);\n\tconst Chrome = ua.indexOf('chrome') > -1 && ua.indexOf('edge') === -1;\n\tconst Firefox = ua.indexOf('firefox') > -1;\n\n\tfunction setReadonly(obj, name, value) {\n\t\tObject.defineProperty(obj, name, {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue\n\t\t});\n\t}\n\n\tfunction each(obj, fn) {\n\t\tfor (const key in obj) {\n\t\t\tfn(obj[key], key, obj);\n\t\t}\n\t}\n\n\tfunction isObject(obj) {\n\t\treturn obj === Object(obj);\n\t}\n\n\tfunction extend(...args) {\n\t\tconst result = {};\n\t\targs.forEach(source => {\n\t\t\tfor (const key in source) {\n\t\t\t\tObject.defineProperty(result, key, {\n\t\t\t\t\tget() {\n\t\t\t\t\t\treturn source[key];\n\t\t\t\t\t},\n\t\t\t\t\tset(val) {\n\t\t\t\t\t\tsource[key] = val;\n\t\t\t\t\t},\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tenumerable: true\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\tfunction isDescendantElement(root, target) {\n\t\twhile (target.parentElement) {\n\t\t\tconst p = target.parentElement;\n\t\t\tif (root === p) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\ttarget = p;\n\t\t}\n\t\treturn false;\n\t}\n\tfunction applyChainSafe(obj, fn, ...names) {\n\t\tlet value = obj;\n\t\tfor (let i = 0; i < names.length && isDef(value); i++) {\n\t\t\tvalue = fn(value, names[i]);\n\t\t}\n\t\treturn value;\n\t}\n\tfunction getChainSafe(obj, ...names) {\n\t\treturn applyChainSafe(obj, (val, name) => val[name], ...names);\n\t}\n\tfunction getOrApply(value, ...args) {\n\t\tif (typeof value === 'function') {\n\t\t\treturn value(...args);\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t}\n\tfunction endsWith(str, searchString, position) {\n\t\tconst subjectString = str.toString();\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n\t\t\tposition = subjectString.length;\n\t\t}\n\t\tposition -= searchString.length;\n\t\tconst lastIndex = subjectString.lastIndexOf(searchString, position);\n\t\treturn lastIndex !== -1 && lastIndex === position;\n\t}\n\tconst isPromise = data => data && typeof data.then === 'function';\n\tfunction getMouseButtons(e) {\n\t\tif (isDef(e.buttons)) {\n\t\t\treturn e.buttons;\n\t\t}\n\t\t/*for legacy*/\n\t\tif (isDef(e.which)) {\n\t\t\tif (e.which === 3) {\n\t\t\t\t//right?\n\t\t\t\treturn 4;\n\t\t\t}\n\t\t\tif (e.which === 2) {\n\t\t\t\t//middle?\n\t\t\t\treturn 4;\n\t\t\t}\n\t\t\treturn e.which; //left or no\n\t\t}\n\n\t\tif (e.button === 0 || e.button === 1) {\n\t\t\treturn 1; //candidate left\n\t\t}\n\t\tif (e.button === 2) {\n\t\t\treturn 2; // right\n\t\t}\n\t\treturn 0; //no or middle?\n\t}\n\tfunction getKeyCode(e) {\n\t\treturn e.keyCode || e.which;\n\t}\n\tfunction isTouchEvent(e) {\n\t\treturn !!e.changedTouches;\n\t}\n\tfunction getIgnoreCase(obj, name) {\n\t\tif (obj[name]) {\n\t\t\treturn obj[name];\n\t\t}\n\t\tconst l = name.toLowerCase();\n\t\tif (obj[l]) {\n\t\t\treturn obj[l];\n\t\t}\n\t\tconst u = name.toLowerCase();\n\t\tif (obj[u]) {\n\t\t\treturn obj[u];\n\t\t}\n\t\tfor (const k in obj) {\n\t\t\tif (k.toLowerCase() === l) {\n\t\t\t\treturn obj[k];\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\tfunction cancel(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t}\n\n\tfunction toBoxArray(obj) {\n\t\tif (!__webpack_provided_Array_dot_isArray(obj)) {\n\t\t\treturn [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\n\t\t}\n\t\tif (obj.length === 3) {\n\t\t\treturn [obj[0] /*top*/, obj[1] /*right*/, obj[2] /*bottom*/, obj[1] /*left*/];\n\t\t}\n\t\tif (obj.length === 2) {\n\t\t\treturn [obj[0] /*top*/, obj[1] /*right*/, obj[0] /*bottom*/, obj[1] /*left*/];\n\t\t}\n\t\tif (obj.length === 1) {\n\t\t\treturn [obj[0] /*top*/, obj[0] /*right*/, obj[0] /*bottom*/, obj[0] /*left*/];\n\t\t}\n\t\treturn obj;\n\t}\n\n\t// Chrome 33554431\n\t// FireFox 17895588\n\t// IE 10737433\n\tmodule.exports = {\n\t\tisDef,\n\t\tbrowser: {\n\t\t\tIE,\n\t\t\tChrome,\n\t\t\tFirefox,\n\t\t\theightLimit: Chrome ? 33554431 : Firefox ? 17895588 : 10737433 // default IE limit\n\t\t},\n\t\textend,\n\t\tisDescendantElement,\n\t\tgetChainSafe,\n\t\tapplyChainSafe,\n\t\tgetOrApply,\n\t\tgetIgnoreCase,\n\t\tisPromise,\n\t\tarray,\n\t\tobj: {\n\t\t\tsetReadonly,\n\t\t\teach,\n\t\t\tisObject\n\t\t},\n\t\tstr: {\n\t\t\tendsWith\n\t\t},\n\t\tevent: {\n\t\t\tgetMouseButtons,\n\t\t\tgetKeyCode,\n\t\t\tisTouchEvent,\n\t\t\tcancel\n\t\t},\n\t\tstyle: {\n\t\t\ttoBoxArray\n\t\t},\n\t\temptyFn() {}\n\t};\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./main.js\":\n/*!*****************!*\\\n  !*** ./main.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst core = __webpack_require__(/*! ./core */ \"./core.js\");\n\tconst tools = __webpack_require__(/*! ./tools */ \"./tools.js\");\n\tconst columns = __webpack_require__(/*! ./columns */ \"./columns.js\");\n\tconst themes = __webpack_require__(/*! ./themes */ \"./themes.js\");\n\tconst data = __webpack_require__(/*! ./data */ \"./data.js\");\n\n\tconst ListGrid = __webpack_require__(/*! ./ListGrid */ \"./ListGrid.js\");\n\tconst GridCanvasHelper = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\n\tconst icons = __webpack_require__(/*! ./icons */ \"./icons.js\");\n\tconst register = __webpack_require__(/*! ./register */ \"./register.js\");\n\n\t/**\r\n  * Cheetah Grid\r\n  * @type {Object}\r\n  * @namespace cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tcore,\n\t\ttools,\n\n\t\t// impl Grids\n\t\tListGrid,\n\n\t\t// objects\n\t\tcolumns,\n\t\tthemes,\n\t\tdata,\n\n\t\t// helper\n\t\tGridCanvasHelper,\n\t\tget icons() {\n\t\t\treturn icons.get();\n\t\t},\n\n\t\t//plugin registers\n\t\tregister,\n\n\t\tget _internal() {\n\t\t\tconsole.warn('use internal!!');\n\t\t\treturn {\n\t\t\t\tcolor: __webpack_require__(/*! ./internal/color */ \"./internal/color.js\"),\n\t\t\t\tsort: __webpack_require__(/*! ./internal/sort */ \"./internal/sort.js\"),\n\t\t\t\tcalc: __webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\"),\n\t\t\t\tsymbolManager: __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\"),\n\t\t\t\tpath2DManager: __webpack_require__(/*! ./internal/path2DManager */ \"./internal/path2DManager.js\")\n\t\t\t};\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./plugins/icons.js\":\n/*!**************************!*\\\n  !*** ./plugins/icons.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {};\n\n/***/ }),\n\n/***/ \"./plugins/themes.js\":\n/*!***************************!*\\\n  !*** ./plugins/themes.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {};\n\n/***/ }),\n\n/***/ \"./register.js\":\n/*!*********************!*\\\n  !*** ./register.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst themePlugins = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\nconst iconPlugins = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\n\nfunction register(obj, name, value) {\n\tif (value) {\n\t\tconst old = obj[name];\n\t\tobj[name] = value;\n\t\treturn old;\n\t} else {\n\t\treturn obj[name];\n\t}\n}\nfunction registers(obj, values) {\n\tfor (const k in values) {\n\t\tobj[k] = values[k];\n\t}\n}\nmodule.exports = {\n\ttheme(name, theme) {\n\t\treturn register(themePlugins, name, theme);\n\t},\n\ticon(name, icon) {\n\t\treturn register(iconPlugins, name, icon);\n\t},\n\ticons(icons) {\n\t\tregisters(iconPlugins, icons);\n\t}\n};\n\n/***/ }),\n\n/***/ \"./themes.js\":\n/*!*******************!*\\\n  !*** ./themes.js ***!\n  \\*******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { extend, getIgnoreCase } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\tconst theme = __webpack_require__(/*! ./themes/theme */ \"./themes/theme.js\");\n\tconst plugins = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\n\tconst BASIC = theme.create(__webpack_require__(/*! ./themes/BASIC */ \"./themes/BASIC.js\"));\n\tconst MATERIAL_DESIGN = theme.create(__webpack_require__(/*! ./themes/MATERIAL_DESIGN */ \"./themes/MATERIAL_DESIGN.js\"));\n\n\tconst builtin = {\n\t\tBASIC,\n\t\tMATERIAL_DESIGN\n\t};\n\tlet defTheme = theme.create({});\n\t/**\r\n  * themes\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.themes\r\n  * @memberof cheetahGrid\r\n  */\n\tconst themes = {\n\t\tget default() {\n\t\t\treturn defTheme;\n\t\t},\n\t\tset default(defaultTheme) {\n\t\t\tdefTheme = defaultTheme;\n\t\t},\n\t\ttheme,\n\t\tof(value) {\n\t\t\tif (!value) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (typeof value === 'string') {\n\t\t\t\tconst t = getIgnoreCase(themes.choices, value);\n\t\t\t\tif (t) {\n\t\t\t\t\treturn t;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\t/**\r\n   * @namespace cheetahGrid.themes.choices\r\n   */\n\t\tget choices() {\n\t\t\treturn extend(builtin, plugins);\n\t\t}\n\t};\n\tmodule.exports = themes;\n}\n\n/***/ }),\n\n/***/ \"./themes/BASIC.js\":\n/*!*************************!*\\\n  !*** ./themes/BASIC.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint no-bitwise:0*/\n\n\nfunction DEFAULT_BG_COLOR(args) {\n\tconst {\n\t\trow,\n\t\tgrid: { frozenRowCount }\n\t} = args;\n\tif (!(row - frozenRowCount & 1)) {\n\t\treturn '#FFF';\n\t} else {\n\t\treturn '#F6F6F6';\n\t}\n}\nconst cacheLinearGradient = {};\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\n\tlet stop;\n\tconst stopsKey = [];\n\tfor (stop in colorStops) {\n\t\tstopsKey.push(`${stop}@${colorStops[stop]}`);\n\t}\n\tconst key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(',')}`;\n\tconst ret = cacheLinearGradient[key];\n\tif (ret) {\n\t\treturn ret;\n\t}\n\tconst grad = context.createLinearGradient(left, top, left, bottom);\n\tfor (stop in colorStops) {\n\t\tgrad.addColorStop(stop, colorStops[stop]);\n\t}\n\treturn cacheLinearGradient[key] = grad;\n}\nfunction FROZEN_ROWS_BG_COLOR(args) {\n\tconst {\n\t\tcol,\n\t\tgrid,\n\t\tgrid: { frozenRowCount },\n\t\tcontext\n\t} = args;\n\tconst { left, top } = grid.getCellRelativeRect(col, 0);\n\tconst { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\n\n\treturn getLinearGradient(context, left, top, left, bottom, { 0: '#FFF', 1: '#D3D3D3' });\n}\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\nmodule.exports = {\n\tcolor: '#000',\n\tdefaultBgColor: DEFAULT_BG_COLOR,\n\tfrozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\n\thiliteBorderColor: '#5E9ED6',\n\tselectionBgColor: '#CCE0FF',\n\tborderColor: '#000',\n\tcheckbox: {\n\t\tuncheckBgColor: '#FFF',\n\t\tcheckBgColor: 'rgb(76, 73, 72)'\n\t},\n\tbutton: {\n\t\tcolor: '#FFF',\n\t\tbgColor: '#2196F3'\n\t},\n\tunderlayBackgroundColor: '#F6F6F6'\n};\n\n/***/ }),\n\n/***/ \"./themes/MATERIAL_DESIGN.js\":\n/*!***********************************!*\\\n  !*** ./themes/MATERIAL_DESIGN.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint no-bitwise:0*/\n\n\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\n\tconst {\n\t\trow,\n\t\tgrid: { frozenRowCount }\n\t} = args;\n\tif (frozenRowCount - 1 === row) {\n\t\treturn ['#f2f2f2', '#f2f2f2', '#ccc7c7', '#f2f2f2'];\n\t} else {\n\t\treturn ['#f2f2f2'];\n\t}\n}\nfunction BORDER_COLOR(args) {\n\tconst {\n\t\tcol,\n\t\tgrid: { colCount }\n\t} = args;\n\tif (colCount - 1 === col) {\n\t\treturn ['#ccc7c7', '#f2f2f2', '#ccc7c7', null];\n\t} else {\n\t\treturn ['#ccc7c7', null];\n\t}\n}\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\nmodule.exports = {\n\tcolor: 'rgba(0, 0, 0, 0.87)',\n\tdefaultBgColor: '#FFF',\n\tfrozenRowsBgColor: '#FFF',\n\tfrozenRowsColor: 'rgba(0, 0, 0, 0.54)',\n\thiliteBorderColor: '#5E9ED6',\n\tselectionBgColor: '#CCE0FF',\n\tborderColor: BORDER_COLOR,\n\tfrozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\n\tcheckbox: {\n\t\tuncheckBgColor: '#FFF',\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\n\t\tborderColor: 'rgba(0, 0, 0, 0.26)'\n\t},\n\tbutton: {\n\t\tcolor: '#FFF',\n\t\tbgColor: '#2196F3'\n\t},\n\tunderlayBackgroundColor: '#FFF'\n};\n\n/***/ }),\n\n/***/ \"./themes/theme.js\":\n/*!*************************!*\\\n  !*** ./themes/theme.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint no-bitwise:0*/\n\n\n{\n\tconst { getChainSafe } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\tconst defaultTheme = __webpack_require__(/*! ./MATERIAL_DESIGN */ \"./themes/MATERIAL_DESIGN.js\");\n\n\tfunction getProp(obj, superObj, names, defNames) {\n\t\treturn getChainSafe(obj, ...names) || defNames && getChainSafe(obj, ...defNames) || getChainSafe(superObj, ...names);\n\t}\n\tfunction createTheme(obj = {}, superTheme = defaultTheme) {\n\t\treturn {\n\t\t\tget font() {\n\t\t\t\treturn getProp(obj, superTheme, ['font']);\n\t\t\t},\n\t\t\tget underlayBackgroundColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['underlayBackgroundColor']);\n\t\t\t},\n\t\t\t// color\n\t\t\tget color() {\n\t\t\t\treturn getProp(obj, superTheme, ['color']);\n\t\t\t},\n\t\t\tget frozenRowsColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsColor'], ['color']);\n\t\t\t},\n\t\t\t// background\n\t\t\tget defaultBgColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['defaultBgColor']);\n\t\t\t},\n\t\t\tget frozenRowsBgColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBgColor'], ['defaultBgColor']);\n\t\t\t},\n\t\t\tget selectionBgColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['selectionBgColor'], ['defaultBgColor']);\n\t\t\t},\n\t\t\t// border\n\t\t\tget borderColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['borderColor']);\n\t\t\t},\n\t\t\tget frozenRowsBorderColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBorderColor'], ['borderColor']);\n\t\t\t},\n\t\t\tget hiliteBorderColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['hiliteBorderColor'], ['borderColor']);\n\t\t\t},\n\t\t\tget checkbox() {\n\t\t\t\treturn this._checkbox || (this._checkbox = {\n\t\t\t\t\tget uncheckBgColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'uncheckBgColor'], ['defaultBgColor']);\n\t\t\t\t\t},\n\t\t\t\t\tget checkBgColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'checkBgColor'], ['defaultBgColor']);\n\t\t\t\t\t},\n\t\t\t\t\tget borderColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'borderColor'], ['borderColor']);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tget button() {\n\t\t\t\treturn this._button || (this._button = {\n\t\t\t\t\tget color() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'color'], ['color']);\n\t\t\t\t\t},\n\t\t\t\t\tget bgColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'bgColor'], ['defaultBgColor']);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\textends(obj) {\n\t\t\t\treturn createTheme(obj, this);\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\r\n  * theme object\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.themes.theme\r\n  * @memberof cheetahGrid.themes\r\n  */\n\tmodule.exports = {\n\t\tcreate(obj) {\n\t\t\treturn createTheme(obj);\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./tools.js\":\n/*!******************!*\\\n  !*** ./tools.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst canvashelper = __webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\");\n\n\t/**\r\n  * tools\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.tools\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tcanvashelper\n\t};\n}\n\n/***/ }),\n\n/***/ \"./tools/canvashelper.js\":\n/*!*******************************!*\\\n  !*** ./tools/canvashelper.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { calcBasePosition, calcStartPosition } = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\tconst { ceil, PI } = Math;\n\n\tfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\n\t\tfunction strokeRectLines(positions) {\n\t\t\tfor (let i = 0; i < borderColors.length; i++) {\n\t\t\t\tconst color = borderColors[i];\n\t\t\t\tconst preColor = borderColors[i - 1];\n\t\t\t\tif (color) {\n\t\t\t\t\tif (preColor !== color) {\n\t\t\t\t\t\tif (preColor) {\n\t\t\t\t\t\t\tctx.strokeStyle = preColor;\n\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst pos1 = positions[i];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(pos1.x, pos1.y);\n\t\t\t\t\t}\n\t\t\t\t\tconst pos2 = positions[i + 1];\n\t\t\t\t\tctx.lineTo(pos2.x, pos2.y);\n\t\t\t\t} else {\n\t\t\t\t\tif (preColor) {\n\t\t\t\t\t\tctx.strokeStyle = preColor;\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst preColor = borderColors[borderColors.length - 1];\n\t\t\tif (preColor) {\n\t\t\t\tctx.strokeStyle = preColor;\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\t\tif (borderColors[0] === borderColors[1] && borderColors[0] === borderColors[2] && borderColors[0] === borderColors[3]) {\n\t\t\tif (borderColors[0]) {\n\t\t\t\tctx.strokeStyle = borderColors[0];\n\t\t\t\tctx.strokeRect(left, top, width, height);\n\t\t\t}\n\t\t} else {\n\t\t\tstrokeRectLines([{ x: left, y: top }, { x: left + width, y: top }, { x: left + width, y: top + height }, { x: left, y: top + height }, { x: left, y: top }]);\n\t\t}\n\t}\n\tfunction roundRect(ctx, left, top, width, height, radius) {\n\t\tctx.beginPath();\n\t\tctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\n\t\tctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\n\t\tctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\n\t\tctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\n\t\tctx.closePath();\n\t}\n\tfunction fillRoundRect(ctx, left, top, width, height, radius) {\n\t\troundRect(ctx, left, top, width, height, radius);\n\t\tctx.fill();\n\t}\n\tfunction strokeRoundRect(ctx, left, top, width, height, radius) {\n\t\troundRect(ctx, left, top, width, height, radius);\n\t\tctx.stroke();\n\t}\n\tfunction fillTextRect(ctx, text, left, top, width, height, {\n\t\toffset = 2,\n\t\tpadding\n\t} = {}) {\n\t\tconst rect = {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tright: left + width,\n\t\t\tbottom: top + height\n\t\t};\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t//clip\n\t\t\tctx.clip();\n\n\t\t\t//\n\t\t\tconst pos = calcBasePosition(ctx, rect, {\n\t\t\t\toffset,\n\t\t\t\tpadding\n\t\t\t});\n\n\t\t\tctx.fillText(text, pos.x, pos.y);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\tfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, {\n\t\toffset = 2,\n\t\tpadding\n\t} = {}) {\n\t\tconst rect = {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tright: left + width,\n\t\t\tbottom: top + height\n\t\t};\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t//clip\n\t\t\tctx.clip();\n\n\t\t\t//\n\t\t\tconst pos = calcStartPosition(ctx, rect, destWidth, destHeight, {\n\t\t\t\toffset,\n\t\t\t\tpadding\n\t\t\t});\n\n\t\t\tctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\n\t/**\r\n  * Returns an object containing the width of the checkbox.\r\n  * @param  {CanvasRenderingContext2D} ctx canvas context\r\n  * @return {Object} Object containing the width of the checkbox\r\n  * @memberof cheetahGrid.tools.canvashelper\r\n  */\n\tfunction measureCheckbox(ctx) {\n\t\treturn {\n\t\t\twidth: ctx.measureText('').width\n\t\t};\n\t}\n\n\t/**\r\n  * draw Checkbox\r\n  * @param  {CanvasRenderingContext2D} ctx canvas context\r\n  * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n  * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n  * @param  {boolean|number} check checkbox check status\r\n  * @param  {object} option option\r\n  * @return {void}\r\n  * @memberof cheetahGrid.tools.canvashelper\r\n  */\n\tfunction drawCheckbox(ctx, x, y, check, {\n\t\tuncheckBgColor = '#FFF',\n\t\tcheckBgColor = 'rgb(76, 73, 72)',\n\t\tborderColor = '#000',\n\t\tboxSize = measureCheckbox(ctx).width\n\t} = {}) {\n\t\tconst checkPoint = typeof check === 'number' ? check > 1 ? 1 : check : 1;\n\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.fillStyle = check ? checkBgColor : uncheckBgColor;\n\n\t\t\tfillRoundRect(ctx, ceil(x) - 1, ceil(y) - 1, ceil(boxSize + 1), ceil(boxSize + 1), boxSize / 5);\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.strokeStyle = borderColor;\n\t\t\tstrokeRoundRect(ctx, ceil(x) - 0.5, ceil(y) - 0.5, ceil(boxSize), ceil(boxSize), boxSize / 5);\n\t\t\tif (check) {\n\t\t\t\tctx.lineWidth = ceil(boxSize / 10);\n\t\t\t\tctx.strokeStyle = uncheckBgColor;\n\t\t\t\tlet leftWidth = boxSize / 4;\n\t\t\t\tlet rightWidth = boxSize / 2 * 0.9;\n\t\t\t\tconst leftLeftPos = x + boxSize * 0.2;\n\t\t\t\tconst leftTopPos = y + boxSize / 2;\n\n\t\t\t\tif (checkPoint < 0.5) {\n\t\t\t\t\tleftWidth = leftWidth * (checkPoint * 2);\n\t\t\t\t}\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(leftLeftPos, leftTopPos);\n\t\t\t\tctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\n\t\t\t\tif (checkPoint > 0.5) {\n\t\t\t\t\tif (checkPoint < 1) {\n\t\t\t\t\t\trightWidth = rightWidth * ((checkPoint - 0.5) * 2);\n\t\t\t\t\t}\n\t\t\t\t\tctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\n\t\t\t\t}\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\tfunction drawButton(ctx, left, top, width, height, option = {}) {\n\t\tconst {\n\t\t\tbackgroundColor = '#FFF',\n\t\t\tbgColor = backgroundColor,\n\t\t\tradius = 4,\n\t\t\tshadow = {}\n\t\t} = option;\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.fillStyle = bgColor;\n\n\t\t\tif (shadow) {\n\t\t\t\tconst {\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, 0.24)',\n\t\t\t\t\tblur = 1,\n\t\t\t\t\toffsetX = 0,\n\t\t\t\t\toffsetY = 2,\n\t\t\t\t\toffset: {\n\t\t\t\t\t\tx: ox = offsetX,\n\t\t\t\t\t\ty: oy = offsetY\n\t\t\t\t\t} = {}\n\t\t\t\t} = shadow;\n\t\t\t\tctx.shadowColor = color;\n\t\t\t\tctx.shadowBlur = blur; //\n\t\t\t\tctx.shadowOffsetX = ox;\n\t\t\t\tctx.shadowOffsetY = oy;\n\t\t\t}\n\n\t\t\tfillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\n\t/**\r\n  * canvashelper\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.tools.canvashelper\r\n  * @memberof cheetahGrid.tools\r\n  */\n\tconst canvashelper = {\n\t\troundRect,\n\t\tfillRoundRect,\n\t\tstrokeRoundRect,\n\t\tdrawCheckbox,\n\t\tmeasureCheckbox,\n\t\tfillTextRect,\n\t\tdrawButton,\n\t\tdrawInlineImageRect,\n\t\tstrokeColorsRect\n\t};\n\n\tmodule.exports = canvashelper;\n}\n\n/***/ })\n\n/******/ });\n});\n}).call(typeof global !== \"undefined\" ? global : window);","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{padding:0;transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:padding 50ms ease-out,transform 50ms ease-out,box-shadow 50ms ease-out,opacity 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{padding:8px 0;transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:padding .15s ease-out,transform .15s ease-out,box-shadow .15s ease-out,opacity .15s ease-out}.cheetah-grid__inline-menu__menu-item{background-color:#fafafa;height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px 26px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-error-message]:after,.cheetah-grid__small-dialog-input[data-helper-text]:after{font-size:12px;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #dd2c00;box-shadow:0 1px 0 0 #dd2c00}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#dd2c00;text-align:left}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons\\content\\svg\\production\\ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons\\image\\svg\\production\\ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {calcStartPosition} = require('./internal/canvases');\r\n\tconst inlines = require('./element/inlines');\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\tconst themes = require('./themes');\r\n\tconst {colorToRGB} = require('./internal/color');\r\n\tconst Rect = require('./internal/Rect');\r\n\tconst {getChainSafe, getOrApply, style: {toBoxArray}} = require('./internal/utils');\r\n\tconst fonts = require('./internal/fonts');\r\n\tconst calc = require('./internal/calc');\r\n\r\n\tfunction invalidateCell(context, grid) {\r\n\t\tconst {col, row} = context;\r\n\t\tgrid.invalidateCell(col, row);\r\n\t}\r\n\tfunction getColor(color, col, row, grid, context) {\r\n\t\treturn getOrApply(color, {\r\n\t\t\tcol,\r\n\t\t\trow,\r\n\t\t\tgrid,\r\n\t\t\tcontext,\r\n\t\t});\r\n\t}\r\n\tfunction getThemeColor(grid, ...names) {\r\n\t\treturn getChainSafe(grid.theme, ...names) || getChainSafe(themes.default, ...names);\r\n\t}\r\n\tfunction testFontLoad(font, value, context, grid) {\r\n\t\tif (font) {\r\n\t\t\tif (!fonts.check(font, value)) {\r\n\t\t\t\tfonts.load(font, value, () => invalidateCell(context, grid));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction drawInlines(ctx, inlines, rect, offset, col, row, grid) {\r\n\t\tfunction drawInline(inline, offsetLeft, offsetRight) {\r\n\t\t\tif (inline.canDraw()) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n\t\t\t\t\tctx.font = inline.font() || ctx.font;\r\n\t\t\t\t\tinline.draw({\r\n\t\t\t\t\t\tctx,\r\n\t\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\t\trect,\r\n\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\t\toffsetRight,\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tinline.onReady(() => grid.invalidateCell(col, row));\r\n\t\t\t\t//noop\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (inlines.length === 1) {\r\n\t\t\t//1\r\n\t\t\tconst inline = inlines[0];\r\n\t\t\tdrawInline(inline, 0, 0);\r\n\t\t} else {\r\n\t\t\tconst inlineWidths = inlines.map((inline) => (inline.width({ctx}) || 0) - 0);\r\n\t\t\tlet offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n\r\n\t\t\tlet offsetLeft = 0;\r\n\t\t\tinlines.forEach((inline, index) => {\r\n\t\t\t\tconst inlineWidth = inlineWidths[index];\r\n\t\t\t\toffsetRight -= inlineWidth;\r\n\t\t\t\tdrawInline(inline, offsetLeft, offsetRight);\r\n\t\t\t\toffsetLeft += inlineWidth;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _inlineRect(grid, ctx, inline, rect, col, row,\r\n\t\t\t{\r\n\t\t\t\toffset,\r\n\t\t\t\tcolor,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons,\r\n\t\t\t} = {}) {\r\n\r\n\t\t//style\r\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tctx.font = font || ctx.font;\r\n\r\n\t\tconst actInlines = inlines.buildInlines(icons, inline);\r\n\t\tdrawInlines(ctx, actInlines, rect, offset, col, row, grid);\r\n\t}\r\n\r\n\r\n\tfunction drawCheckbox(ctx, rect, check, helper,\r\n\t\t\t{\r\n\t\t\t\tanimElapsedTime = 1,\r\n\t\t\t\tuncheckBgColor = helper.theme.checkbox.uncheckBgColor,\r\n\t\t\t\tcheckBgColor = helper.theme.checkbox.checkBgColor,\r\n\t\t\t\tborderColor = helper.theme.checkbox.borderColor,\r\n\t\t\t\ttextAlign = 'center',\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t} = {}) {\r\n\t\tconst boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tconst pos = calcStartPosition(ctx, rect, boxWidth + 1/*+1*/, boxWidth + 1/*+1*/);\r\n\t\tif (0 < animElapsedTime && animElapsedTime < 1) {\r\n\t\t\tconst uncheckBgRGB = colorToRGB(uncheckBgColor);\r\n\t\t\tconst checkBgRGB = colorToRGB(checkBgColor);\r\n\t\t\tconst checkRGB = (colorName) => {\r\n\t\t\t\tconst start = uncheckBgRGB[colorName];\r\n\t\t\t\tconst end = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = start - end;\r\n\t\t\t\treturn Math.ceil(start - diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tconst uncheckRGB = (colorName) => {\r\n\t\t\t\tconst end = uncheckBgRGB[colorName];\r\n\t\t\t\tconst start = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = end - start;\r\n\t\t\t\treturn Math.ceil(start + diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tuncheckBgColor = check ? uncheckBgColor : `rgb(${uncheckRGB('r')} , ${uncheckRGB('g')}, ${uncheckRGB('b')})`;\r\n\t\t\tcheckBgColor = `rgb(${checkRGB('r')} , ${checkRGB('g')}, ${checkRGB('b')})`;\r\n\t\t}\r\n\r\n\t\tcanvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n\t\t\tuncheckBgColor,\r\n\t\t\tcheckBgColor,\r\n\t\t\tborderColor,\r\n\t\t});\r\n\t}\r\n\r\n\tclass Theme {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t}\r\n\t\tgetThemeColor(...name) {\r\n\t\t\treturn getThemeColor(this._grid, ...name);\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn getThemeColor(this._grid, 'font');\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'underlayBackgroundColor');\r\n\t\t}\r\n\t\t// color\r\n\t\tget color() {\r\n\t\t\treturn getThemeColor(this._grid, 'color');\r\n\t\t}\r\n\t\tget frozenRowsColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsColor');\r\n\t\t}\r\n\t\t// background\r\n\t\tget defaultBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'defaultBgColor');\r\n\t\t}\r\n\t\tget frozenRowsBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBgColor');\r\n\t\t}\r\n\t\tget selectionBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'selectionBgColor');\r\n\t\t}\r\n\t\t// border\r\n\t\tget borderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'borderColor');\r\n\t\t}\r\n\t\tget frozenRowsBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBorderColor');\r\n\t\t}\r\n\t\tget hiliteBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'hiliteBorderColor');\r\n\t\t}\r\n\t\tget checkbox() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'uncheckBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'checkBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget borderColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'borderColor');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tget button() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._button || (this._button = {\r\n\t\t\t\tget color() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'color');\r\n\t\t\t\t},\r\n\t\t\t\tget bgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'bgColor');\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\r\n\tfunction strokeRect(ctx, color, left, top, width, height) {\r\n\t\tif (!Array.isArray(color)) {\r\n\t\t\tif (color) {\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst borderColors = toBoxArray(color);\r\n\t\t\tcanvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\tclass GridCanvasHelper {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._theme = new Theme(grid);\r\n\t\t}\r\n\t\tcreateCalculator(context) {\r\n\t\t\treturn {\r\n\t\t\t\tcalcWidth(width) {\r\n\t\t\t\t\treturn calc.toPx(width, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.width;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcalcHeight(height) {\r\n\t\t\t\t\treturn calc.toPx(height, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.height;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetColor(color, col, row, ctx) {\r\n\t\t\treturn getColor(color, col, row, this._grid, ctx);\r\n\t\t}\r\n\t\ttoBoxArray(obj) {\r\n\t\t\treturn toBoxArray(obj);\r\n\t\t}\r\n\t\ttoBoxPixelArray(value, context) {\r\n\t\t\tif (typeof value === 'string' || Array.isArray(value)) {\r\n\t\t\t\tconst calculator = this.createCalculator(context);\r\n\t\t\t\tconst box = toBoxArray(value);\r\n\t\t\t\treturn [\r\n\t\t\t\t\tcalculator.calcHeight(box[0]),\r\n\t\t\t\t\tcalculator.calcWidth(box[1]),\r\n\t\t\t\t\tcalculator.calcHeight(box[2]),\r\n\t\t\t\t\tcalculator.calcWidth(box[3]),\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn toBoxArray(value);\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this._theme;\r\n\t\t}\r\n\t\tdrawWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawBorderWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tlet clipLeft = drawRect.left;\r\n\t\t\t\tlet clipWidth = drawRect.width;\r\n\t\t\t\tif (drawRect.left === rect.left) {\r\n\t\t\t\t\tclipLeft += -1;\r\n\t\t\t\t\tclipWidth += 1;\r\n\t\t\t\t}\r\n\t\t\t\tlet clipTop = drawRect.top;\r\n\t\t\t\tlet clipHeight = drawRect.height;\r\n\t\t\t\tif (drawRect.top === rect.top) {\r\n\t\t\t\t\tclipTop += -1;\r\n\t\t\t\t\tclipHeight += 1;\r\n\t\t\t\t}\r\n\t\t\t\tctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\ttext(text, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tlet rect = context.getRect();\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\tcolor = this.theme.color;\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tif (padding) {\r\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\r\n\t\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\t\t\t\t\trect = new Rect(left, top, width, height);\r\n\t\t\t\t}\r\n\t\t\t\t_inlineRect(this._grid, ctx, text, rect, col, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillCell(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillCellWithState(context, option = {}) {\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\toption.fillColor = (() => {\r\n\t\t\t\tif (!state.selected && state.selection) {\r\n\t\t\t\t\treturn this.theme.selectionBgColor;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\t\treturn this.theme.frozenRowsBgColor;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn option.fillColor || this.theme.defaultBgColor;\r\n\t\t\t})();\r\n\r\n\t\t\tthis.fillCell(context, option);\r\n\t\t}\r\n\t\tborder(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tborderColor = this.theme.borderColor,\r\n\t\t\t\t\tlineWidth = 1,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tif (lineWidth === 1) {\r\n\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n\t\t\t\t} else if (lineWidth === 2) {\r\n\t\t\t\t\tctx.lineWidth = 2;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\t\t\tconst startOffset = (lineWidth / 2) - 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors,\r\n\t\t\t\t\t\t\trect.left + startOffset,\r\n\t\t\t\t\t\t\trect.top + startOffset,\r\n\t\t\t\t\t\t\trect.width - lineWidth + 1,\r\n\t\t\t\t\t\t\trect.height - lineWidth + 1\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tborderWithState(context, option = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\t//\r\n\t\t\tif (state.selected) {\r\n\t\t\t\toption.borderColor = this.theme.hiliteBorderColor;\r\n\t\t\t\toption.lineWidth = 2;\r\n\t\t\t\tthis.border(context, option);\r\n\t\t\t} else {\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\toption.borderColor = this.theme.frozenRowsBorderColor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toption.lineWidth = 1;\r\n\t\t\t\tthis.border(context, option);\r\n\r\n\t\t\t\t//\r\n\t\t\t\tconst sel = this._grid.selection.select;\r\n\t\t\t\tif (sel.col + 1 === col && sel.row === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (sel.col === col && sel.row + 1 === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckbox(check, context, option = {}) {\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tdrawCheckbox(ctx, context.getRect(), check, this, option);\r\n\t\t\t});\r\n\t\t}\r\n\t\tbutton(caption, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor = this.theme.button.bgColor,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor = this.theme.button.color,\r\n\t\t\t\t\ttextAlign = 'center',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tpadding = this.toBoxPixelArray(padding || rect.height / 8, context);\r\n\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\r\n\t\t\t\tcanvashelper.drawButton(ctx, left, top, width, height, {\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t\tradius: rect.height / 8,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t});\r\n\t\t\t\t_inlineRect(this._grid, ctx, caption, new Rect(left, top, width, height),\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\ttestFontLoad(font, value, context) {\r\n\t\t\treturn testFontLoad(font, value, context, this._grid);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = GridCanvasHelper;\r\n}","'use strict';\r\n{\r\n\tconst {extend, array: {find: arrayFind}, isDef, isPromise, obj: {isObject}} = require('./internal/utils');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\tconst columns = require('./columns');\r\n\tconst {BaseStyle} = columns.style;\r\n\tconst headerType = require('./header/type');\r\n\tconst {BaseStyle: HeaderBaseStyle} = require('./header/style');\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\tconst {DataSource, CachedDataSource} = require('./data');\r\n\tconst themes = require('./themes');\r\n\tconst icons = require('./internal/icons');\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('./internal/symbolManager');\r\n\r\n\tlet headerId = 0;\r\n\t//private methods\r\n\tfunction _getHeaderCellRange(grid, col, row) {\r\n\t\treturn grid[_].headerMap.getHeaderCellRange(col, row);\r\n\t}\r\n\tfunction _updateRect(grid, col, row, context) {\r\n\t\tconst rect = context.getRect();\r\n\t\tconst {\r\n\t\t\tstartCol,\r\n\t\t\tendCol,\r\n\t\t\tstartRow,\r\n\t\t\tendRow,\r\n\t\t} = _getHeaderCellRange(grid, col, row);\r\n\t\tfor (let c = col - 1; c >= startCol; c--) {\r\n\t\t\trect.left -= grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let c = col + 1; c <= endCol; c++) {\r\n\t\t\trect.right += grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let r = row - 1; r >= startRow; r--) {\r\n\t\t\trect.top -= grid.getRowHeight(r);\r\n\t\t}\r\n\t\tfor (let r = row + 1; r <= endRow; r++) {\r\n\t\t\trect.bottom += grid.getRowHeight(r);\r\n\t\t}\r\n\t\tcontext.setRect(rect);\r\n\t}\r\n\tfunction _getCellValue(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn grid[_].headerMap.getCell(col, row).caption;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.get;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, field, row);\r\n\t\t}\r\n\t}\r\n\tfunction _setCellValue(grid, col, row, value) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\t// nop\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.set;\r\n\t\t\t}\r\n\t\t\tif (grid.hasListeners(EVENT_TYPE.SET_VALUE)) {\r\n\t\t\t\tconst ret = grid.fireListeners(EVENT_TYPE.SET_VALUE, grid.getRowRecord(row), field, value);\r\n\t\t\t\tgrid[_].dataSource.clearCache();\r\n\t\t\t\treturn arrayFind(ret, isDef);\r\n\t\t\t} else {\r\n\t\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\t\tconst res = grid[_].dataSource.setField(index, field, value);\r\n\t\t\t\treturn isPromise(res) ? res : true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction _getCellIcon0(grid, icon, row) {\r\n\t\tif (!isDef(icon)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (Array.isArray(icon)) {\r\n\t\t\treturn icon.map((i) => _getCellIcon0(grid, i, row));\r\n\t\t}\r\n\t\tif (!isObject(icon)) {\r\n\t\t\treturn _getField(grid, icon, row);\r\n\t\t}\r\n\t\tconst retIcon = {};\r\n\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\tif (icon[k]) {\r\n\t\t\t\tconst f = _getField(grid, icon[k], row);\r\n\t\t\t\tif (isDef(f)) {\r\n\t\t\t\t\tretIcon[k] = f;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!_hasField(grid, icon[k], row)) {\r\n\t\t\t\t\t\tretIcon[k] = icon[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn retIcon;\r\n\t}\r\n\tfunction _getCellIcon(grid, col, row, name) {\r\n\t\tconst {[name]: icon} = grid[_].headerMap.columns[col];\r\n\t\treturn _getCellIcon0(grid, icon, row);\r\n\t}\r\n\tfunction _getField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.getField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _hasField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.hasField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _onDrawValue(grid, cellValue, context, {col, row}, style, draw) {\r\n\t\tconst helper = grid[_].gridCanvasHelper;\r\n\r\n\t\tconst drawCellBase = ({bgColor} = {}) => {\r\n\t\t\tconst fillOpt = {\r\n\t\t\t\tfillColor: bgColor,\r\n\t\t\t};\r\n\t\t\t//cell\r\n\t\t\thelper.fillCellWithState(context, fillOpt);\r\n\r\n\t\t\tif (context.col === grid.frozenColCount - 1) {\r\n\t\t\t\t//\r\n\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor\r\n\t\t\t\t\t\t: helper.theme.frozenRowsBorderColor;\r\n\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(borderColor, context.col, context.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.right - 2.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.right - 2.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (context.row < grid[_].headerMap.rowCount) {\r\n\t\t\t\t_headerBorderWithState(grid, helper, context);\r\n\t\t\t} else {\r\n\t\t\t\thelper.borderWithState(context);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconst info = {\r\n\t\t\tgetRecord: () => grid.getRowRecord(row),\r\n\t\t\tgetIcon: () => _getCellIcon(grid, col, row, 'icon'),\r\n\t\t\tstyle,\r\n\t\t\tdrawCellBase,\r\n\t\t};\r\n\r\n\t\treturn draw(cellValue, info, context, grid);\r\n\t}\r\n\tfunction _headerBorderWithState(grid, helper, context) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst sel = grid.selection.select;\r\n\t\tif (sel.row >= grid[_].headerMap.rowCount) {\r\n\t\t\t//\r\n\t\t\thelper.borderWithState(context);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst {id} = grid[_].headerMap.getCell(col, row);\r\n\r\n\t\tconst rect = context.getRect();\r\n\t\tconst option = {};\r\n\r\n\t\tconst {id: selId} = grid[_].headerMap.getCell(sel.col, sel.row);\r\n\t\t//\r\n\t\tif (selId === id) {\r\n\t\t\toption.borderColor = helper.theme.hiliteBorderColor;\r\n\t\t\toption.lineWidth = 2;\r\n\t\t\thelper.border(context, option);\r\n\t\t} else {\r\n\t\t\toption.lineWidth = 1;\r\n\t\t\t// header color\r\n\t\t\tconst isFrozenCell = grid.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\toption.borderColor = helper.theme.frozenRowsBorderColor;\r\n\t\t\t}\r\n\t\t\thelper.border(context, option);\r\n\r\n\t\t\t//\r\n\t\t\tif (col > 0 && grid[_].headerMap.getCell(col - 1, row).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (row > 0 &&\r\n\t\t\t\t\t\tgrid[_].headerMap.getCell(col, row - 1).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[0]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction _refreshHeader(grid) {\r\n\t\tif (grid[_].headerEvents) {\r\n\t\t\tgrid[_].headerEvents.forEach((id) => grid.unlisten(id));\r\n\t\t}\r\n\t\tgrid[_].headerMap = new HeaderMap(grid[_].header);\r\n\t\tgrid[_].headerEvents = [];\r\n\t\tgrid[_].headerMap.headerObjects.forEach((cell) => {\r\n\t\t\tconst ids = cell.headerType.bindGridEvent(grid);\r\n\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\tif (cell.style) {\r\n\t\t\t\tif (cell.style instanceof HeaderBaseStyle) {\r\n\t\t\t\t\tconst id = cell.style.listen(HeaderBaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].headerMap.columns.forEach((col, index) => {\r\n\t\t\tif (col.action) {\r\n\t\t\t\tconst ids = col.action.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.columnType) {\r\n\t\t\t\tconst ids = col.columnType.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.style) {\r\n\t\t\t\tif (col.style instanceof BaseStyle) {\r\n\t\t\t\t\tconst id = col.style.listen(columns.style.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid.colCount = grid[_].headerMap.columns.length;\r\n\t\t_refreshRowCount(grid);\r\n\t\tgrid.frozenRowCount = grid[_].headerMap.rowCount;\r\n\t\tfor (let col = 0; col < grid[_].headerMap.columns.length; col++) {\r\n\t\t\tconst column = grid[_].headerMap.columns[col];\r\n\t\t\tconst width = column.width;\r\n\t\t\tif (width && (width > 0 || typeof width === 'string')) {\r\n\t\t\t\tgrid.setColWidth(col, width);\r\n\t\t\t}\r\n\t\t\tconst minWidth = column.minWidth;\r\n\t\t\tif (minWidth && (minWidth > 0 || typeof minWidth === 'string')) {\r\n\t\t\t\tgrid.setMinColWidth(col, minWidth);\r\n\t\t\t}\r\n\t\t\tconst maxWidth = column.maxWidth;\r\n\t\t\tif (maxWidth && (maxWidth > 0 || typeof maxWidth === 'string')) {\r\n\t\t\t\tgrid.setMaxColWidth(col, maxWidth);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isArrayHeaderRowHeight = Array.isArray(grid[_].headerRowHeight);\r\n\t\tfor (let row = 0; row < grid[_].headerMap.rowCount; row++) {\r\n\t\t\tconst height = isArrayHeaderRowHeight ? grid[_].headerRowHeight[row] : grid[_].headerRowHeight;\r\n\t\t\tif (height && height > 0) {\r\n\t\t\t\tgrid.setRowHeight(row, height);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _refreshRowCount(grid) {\r\n\t\tgrid.rowCount = grid[_].dataSource.length + grid[_].headerMap.rowCount;\r\n\t}\r\n\tfunction _tryWithUpdateDataSource(grid, fn) {\r\n\t\tif (grid[_].dataSourceEventIds) {\r\n\t\t\tgrid[_].dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n\t\t}\r\n\r\n\t\tfn(grid);\r\n\r\n\t\tgrid[_].dataSourceEventIds = [\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n\t\t\t\t_refreshRowCount(grid);\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction _setRecords(grid, records = []) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tgrid[_].records = records;\r\n\t\t\tgrid[_].dataSource = CachedDataSource.ofArray(grid[_].records);\r\n\t\t});\r\n\t}\r\n\tfunction _setDataSource(grid, dataSource) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tif (dataSource) {\r\n\t\t\t\tif (dataSource instanceof DataSource) {\r\n\t\t\t\t\tgrid[_].dataSource = dataSource;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgrid[_].dataSource = new CachedDataSource(dataSource);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tgrid[_].dataSource = DataSource.EMPTY;\r\n\t\t\t}\r\n\t\t\tgrid[_].records = null;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction _getRowRecordIndex(grid, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn undefined;\r\n\t\t} else {\r\n\t\t\treturn row - grid[_].headerMap.rowCount;\r\n\t\t}\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\tclass HeaderMap {\r\n\t\tconstructor(header) {\r\n\t\t\tthis._columns = [];\r\n\t\t\tthis._headerCells = [];\r\n\t\t\tthis._headerObjects = [];\r\n\r\n\t\t\tthis._addHeaders(0, header, []);\r\n\t\t\tthis._setupHeaderType();\r\n\t\t}\r\n\t\tget columns() {\r\n\t\t\treturn this._columns;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this._headerCells.length;\r\n\t\t}\r\n\t\tget headerObjects() {\r\n\t\t\treturn this._headerObjects;\r\n\t\t}\r\n\t\tgetCell(col, row) {\r\n\t\t\treturn this._headerCells[row][col];\r\n\t\t}\r\n\t\tgetHeaderCellRangeById(id) {\r\n\t\t\tfor (let r = 0; r < this.rowCount; r++) {\r\n\t\t\t\tfor (let c = 0; c < this.columns.length; c++) {\r\n\t\t\t\t\tif (id === this.getCell(c, r).id) {\r\n\t\t\t\t\t\treturn this.getHeaderCellRange(c, r);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tgetHeaderCellRange(col, row) {\r\n\t\t\tconst result = {\r\n\t\t\t\tstartCol: col,\r\n\t\t\t\tstartRow: row,\r\n\t\t\t\tendCol: col,\r\n\t\t\t\tendRow: row,\r\n\t\t\t\tisCellInRange(col, row) {\r\n\t\t\t\t\treturn this.startCol <= col && col <= this.endCol &&\r\n\t\t\t\t\t\t\tthis.startRow <= row && row <= this.endRow;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst {id} = this.getCell(col, row);\r\n\t\t\tfor (let c = col - 1; c >= 0; c--) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let c = col + 1; c < this.columns.length; c++) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startRow = r;\r\n\t\t\t}\r\n\t\t\tfor (let r = row + 1; r < this.rowCount; r++) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endRow = r;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\t_addHeaders(row, header, roots) {\r\n\t\t\tconst rowCells = this._headerCells[row] || this._newRow(row);\r\n\t\t\theader.forEach((hd) => {\r\n\t\t\t\tconst col = this._columns.length;\r\n\t\t\t\tconst cell = {\r\n\t\t\t\t\tid: headerId++,\r\n\t\t\t\t\tcaption: hd.caption,\r\n\t\t\t\t\tstyle: hd.headerStyle,\r\n\t\t\t\t\tsort: hd.sort,\r\n\t\t\t\t};\r\n\t\t\t\tthis._headerObjects.push(cell);\r\n\t\t\t\trowCells[col] = cell;\r\n\t\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\t\tthis._headerCells[r][col] = roots[r];\r\n\t\t\t\t}\r\n\t\t\t\tif (hd.columns) {\r\n\t\t\t\t\tthis._addHeaders(row + 1, hd.columns, [...roots, cell]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._columns.push({\r\n\t\t\t\t\t\twidth: hd.width,\r\n\t\t\t\t\t\tminWidth: hd.minWidth,\r\n\t\t\t\t\t\tmaxWidth: hd.maxWidth,\r\n\t\t\t\t\t\tfield: hd.field,\r\n\t\t\t\t\t\ticon: hd.icon,\r\n\t\t\t\t\t\tcolumnType: columns.type.of(hd.columnType),\r\n\t\t\t\t\t\taction: columns.action.of(hd.action),\r\n\t\t\t\t\t\tstyle: hd.style,\r\n\t\t\t\t\t\tdefine: hd,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (let r = row + 1; r < this._headerCells.length; r++) {\r\n\t\t\t\t\t\tthis._headerCells[r][col] = cell;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setupHeaderType() {\r\n\t\t\tthis._headerObjects.forEach((cell) => {\r\n\t\t\t\tcell.range = this.getHeaderCellRangeById(cell.id);\r\n\t\t\t\tcell.headerType = headerType.create(cell);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_newRow(row) {\r\n\t\t\tconst newRow = this._headerCells[row] = [];\r\n\t\t\tif (!this._columns.length) {\r\n\t\t\t\treturn newRow;\r\n\t\t\t}\r\n\t\t\tconst prev = this._headerCells[row - 1];\r\n\t\t\tfor (let col = 0; col < prev.length; col++) {\r\n\t\t\t\tnewRow[col] = prev[col];\r\n\t\t\t}\r\n\t\t\treturn newRow;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction adjustListGridOption(options) {\r\n\t\tif (options) {\r\n\t\t\tdelete options.frozenRowCount;\r\n\t\t\tdelete options.colCount;\r\n\t\t\tdelete options.rowCount;\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\t\r\n\tconst EVENT_TYPE = extend(DrawGrid.EVENT_TYPE, {\r\n\t\tSET_VALUE: 'set_value',\r\n\t});\r\n\r\n\t/**\r\n\t * ListGrid\r\n\t * @classdesc cheetahGrid.ListGrid\r\n\t * @extends cheetahGrid.core.DrawGrid\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tclass ListGrid extends DrawGrid {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * header: see header property\r\n\t\t * records {array}: records data\r\n\t\t * dataSource {DataSource}: records data source\r\n\t\t * frozenColCount {number}: default 0\r\n\t\t * defaultRowHeight {number}: default grid row height. default 40\r\n\t\t * defaultColWidth {number}: default grid col width. default 80\r\n\t\t * borderColor: border color\r\n\t\t * parentElement {Element}: canvas parentElement\r\n\t\t * theme {object}: theme\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(options = {}) {\r\n\t\t\tsuper(adjustListGridOption(options));\r\n\t\t\tthis[_].header = options.header || [];\r\n\t\t\tthis[_].headerRowHeight = options.headerRowHeight || [];\r\n\t\t\tif (options.dataSource) {\r\n\t\t\t\t_setDataSource(this, options.dataSource);\r\n\t\t\t} else {\r\n\t\t\t\t_setRecords(this, options.records);\r\n\t\t\t}\r\n\t\t\t_refreshHeader(this);\r\n\t\t\tthis[_].sortState = {\r\n\t\t\t\tcol: -1,\r\n\t\t\t\torder: undefined,\r\n\t\t\t};\r\n\t\t\tthis[_].gridCanvasHelper = new GridCanvasHelper(this);\r\n\t\t\tthis[_].theme = themes.of(options.theme);\r\n\t\t\tthis.invalidate();\r\n\t\t\tthis[_].handler.on(window, 'resize', () => {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t\tthis.updateScroll();\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t});\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tget header() {\r\n\t\t\treturn this[_].header;\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * <pre>\r\n\t\t * column options\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * field: field name\r\n\t\t * width: column width\r\n\t\t * columnType: ColumnType\r\n\t\t * action: ColumnAction\r\n\t\t * style\r\n\t\t * -----\r\n\t\t *\r\n\t\t * multiline header\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * columns: columns define\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tset header(header) {\r\n\t\t\tthis[_].header = header;\r\n\t\t\t_refreshHeader(this);\r\n\t\t}\r\n\t\tget records() {\r\n\t\t\treturn this[_].records;\r\n\t\t}\r\n\t\tset records(records) {\r\n\t\t\t_setRecords(this, records);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget dataSource() {\r\n\t\t\treturn this[_].dataSource;\r\n\t\t}\r\n\t\tset dataSource(dataSource) {\r\n\t\t\t_setDataSource(this, dataSource);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this[_].theme;\r\n\t\t}\r\n\t\tset theme(theme) {\r\n\t\t\tthis[_].theme = themes.of(theme);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn super.font || this[_].gridCanvasHelper.theme.font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tsuper.font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tsuper.underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tget sortState() {\r\n\t\t\treturn this[_].sortState;\r\n\t\t}\r\n\t\tset sortState(sortState) {\r\n\t\t\tthis[_].sortState = sortState;\r\n\t\t}\r\n\t\tgetField(col) {\r\n\t\t\treturn this[_].headerMap.columns[col].field;\r\n\t\t}\r\n\t\tgetRowRecord(row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t} else {\r\n\t\t\t\treturn this[_].dataSource.get(_getRowRecordIndex(this, row));\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetGridCanvasHelper() {\r\n\t\t\treturn this[_].gridCanvasHelper;\r\n\t\t}\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol, startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tif (startCol !== col || startRow !== row) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn _getCellValue(this, col, row);\r\n\t\t}\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\tconst column = this[_].headerMap.columns[col];\r\n\r\n\t\t\tlet draw;\r\n\t\t\tlet style;\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst hd = this[_].headerMap.getCell(col, row);\r\n\t\t\t\tdraw = hd.headerType.onDrawCell;\r\n\t\t\t\tstyle = hd.style;\r\n\t\t\t\t_updateRect(this, col, row, context);\r\n\t\t\t} else {\r\n\t\t\t\tdraw = column.columnType.onDrawCell;\r\n\t\t\t\tstyle = column.style;\r\n\t\t\t}\r\n\t\t\tconst cellValue = _getCellValue(this, col, row);\r\n\t\t\treturn _onDrawValue(this, cellValue, context, {col, row}, style, draw);\r\n\t\t}\r\n\t\tdoGetCellValue(col, row, valueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst value = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(value)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvalueCallback(value);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tdoChangeValue(col, row, changeValueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst before = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(before)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tconst after = changeValueCallback(before);\r\n\t\t\t\tif (after === undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn _setCellValue(this, col, row, after);\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\tthis.listen(EVENT_TYPE.SELECTED_CELL, (cell, selected) => {\r\n\t\t\t\tif (cell.row < this[_].headerMap.rowCount) {\r\n\t\t\t\t\tconst {startCol, endCol, startRow, endRow} = _getHeaderCellRange(this, cell.col, cell.row);\r\n\t\t\t\t\tif (startCol !== endCol || startRow !== endRow) {\r\n\t\t\t\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = startCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveLeftColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = endCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveRightColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = startRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveUpRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = endRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveDownRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tgetColumnIndexByField(field) {\r\n\t\t\tfor (const columnIndex in this[_].headerMap.columns) {\r\n\t\t\t\tif (this[_].headerMap.columns[columnIndex].field === field) {\r\n\t\t\t\t\treturn columnIndex - 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfocusGridCell(field, index) {\r\n\t\t\tconst {\r\n\t\t\t\tstart: {col: startCol, row: startRow},\r\n\t\t\t\tend: {col: endCol, row: endRow}\r\n\t\t\t} = this.selection.range;\r\n\r\n\t\t\tconst newCol = this.getColumnIndexByField(field);\r\n\t\t\tconst newRow = index + this[_].headerMap.rowCount;\r\n\t\t\tthis.focusCell(newCol, newRow);\r\n\t\t\tthis.selection.select = {\r\n\t\t\t\tcol: newCol,\r\n\t\t\t\trow: newRow\r\n\t\t\t};\r\n\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\tthis.invalidateCell(newCol, newRow);\r\n\t\t}\r\n\t\tmakeVisibleGridCell(field, index) {\r\n\t\t\tthis.makeVisibleCell(this.getColumnIndexByField(field), index + this[_].headerMap.rowCount);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ListGrid;\r\n}","'use strict';\r\n{\r\n\tconst action = require('./columns/action');\r\n\tconst type = require('./columns/type');\r\n\tconst style = require('./columns/style');\r\n\r\n\t/**\r\n\t * columns\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\taction,\r\n\t\ttype,\r\n\t\tstyle,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst BaseAction = require('./action/BaseAction');\r\n\tconst Action = require('./action/Action');\r\n\tconst Editor = require('./action/Editor');\r\n\tconst CheckEditor = require('./action/CheckEditor');\r\n\tconst ButtonAction = require('./action/ButtonAction');\r\n\tconst SmallDialogInputEditor = require('./action/SmallDialogInputEditor');\r\n\tconst InlineInputEditor = require('./action/InlineInputEditor');\r\n\tconst InlineMenuEditor = require('./action/InlineMenuEditor');\r\n\r\n\tclass ImmutableCheckEditor extends CheckEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\tclass ImmutableInputEditor extends SmallDialogInputEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * column actions\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.action\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst action = {\r\n\t\tACTIONS: {\r\n\t\t\tCHECK: new ImmutableCheckEditor(),\r\n\t\t\tINPUT: new ImmutableInputEditor(),\r\n\t\t},\r\n\t\tget BaseAction() {\r\n\t\t\treturn BaseAction;\r\n\t\t},\r\n\t\tget Editor() {\r\n\t\t\treturn Editor;\r\n\t\t},\r\n\t\tget Action() {\r\n\t\t\treturn Action;\r\n\t\t},\r\n\t\tget CheckEditor() {\r\n\t\t\treturn CheckEditor;\r\n\t\t},\r\n\t\tget ButtonAction() {\r\n\t\t\treturn ButtonAction;\r\n\t\t},\r\n\t\tget SmallDialogInputEditor() {\r\n\t\t\treturn SmallDialogInputEditor;\r\n\t\t},\r\n\t\tget InlineInputEditor() {\r\n\t\t\treturn InlineInputEditor;\r\n\t\t},\r\n\t\tget InlineMenuEditor() {\r\n\t\t\treturn InlineMenuEditor;\r\n\t\t},\r\n\t\tof(columnAction) {\r\n\t\t\tif (!columnAction) {\r\n\t\t\t\treturn action.ACTIONS.DEFAULT;\r\n\t\t\t} else if (typeof columnAction === 'string') {\r\n\t\t\t\treturn action.ACTIONS[columnAction.toUpperCase()] || action.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnAction;\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\tmodule.exports = action;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\r\n\tconst BaseAction = require('./BaseAction');\r\n\r\n\tclass Action extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._action = option.action;\r\n\t\t}\r\n\t\tget action() {\r\n\t\t\treturn this._action;\r\n\t\t}\r\n\t\tset action(action) {\r\n\t\t\tthis._action = action;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Action(this);\r\n\t\t}\r\n\t\tgetState(grid) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst state = this.getState(grid);\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst record = grid.getRowRecord(cell.row);\r\n\t\t\t\tthis._action(record);\r\n\t\t\t};\r\n\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = Action;\r\n}","'use strict';\r\n{\r\n\t\r\n\r\n\tclass BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis._disabled = option.disabled;\r\n\t\t}\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tset disabled(disabled) {\r\n\t\t\tthis._disabled = !!disabled;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseAction(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseAction;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst Editor = require('./Editor');\r\n\tconst {EVENT_TYPE: {\r\n\t\tINPUT_CELL,\r\n\t\tEDITABLEINPUT_CELL,\r\n\t\tSELECTED_CELL,\r\n\t\tDBLCLICK_CELL,\r\n\t\tDBLTAP_CELL,\r\n\t\tKEYDOWN,\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\tSCROLL\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_F2 = 113;\r\n\r\n\tclass BaseInputEditor extends Editor {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseInputEditor(this);\r\n\t\t}\r\n\t\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonOpenCellInternal(grid, cell) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonGridScrollInternal(grid) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst open = (cell) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onOpenCellInternal(grid, cell);\r\n\t\t\t};\r\n\r\n\t\t\tconst input = (cell, value) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onInputCellInternal(grid, cell, value);\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(INPUT_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinput({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t}, e.value);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLCLICK_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLTAP_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\t\trow: sel.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SELECTED_CELL, (cell, selected) => {\r\n\t\t\t\t\tthis.onChangeSelectCellInternal(grid, cell, selected);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\t\tthis.onGridScrollInternal(grid);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.onSetInputAttrsInternal(grid, {\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t}, cell.input);\r\n\t\t\t\t}),\r\n\t\t\t\t\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = BaseInputEditor;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst Action = require('./Action');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tclass ButtonAction extends Action {\r\n\t\tgetState(grid) {\r\n\t\t\tif (!grid[BUTTON_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, BUTTON_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\treturn grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonAction;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}, isPromise} = require('../../internal/utils');\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\tconst animate = require('../../internal/animate');\r\n\r\n\tconst Editor = require('./Editor');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_SPACE = 32;\r\n\r\n\tfunction toggleValue(val) {\r\n\t\tif (typeof val === 'number') {\r\n\t\t\tif (val === 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t} else if (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn 'true';\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn 'on';\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)0$/, '$11');\r\n\t\t\t} else if (val === 'true') {\r\n\t\t\t\treturn 'false';\r\n\t\t\t} else if (val === 'on') {\r\n\t\t\t\treturn 'off';\r\n\t\t\t} else if (val.match(/^0*1$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)1$/, '$10');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !val;\r\n\t}\r\n\r\n\tclass CheckEditor extends Editor {\r\n\t\tclone() {\r\n\t\t\treturn new CheckEditor(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tif (!grid[CHECK_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, CHECK_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID];\r\n\t\t\t\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tconst key = cell.col + ':' + cell.row;\r\n\t\t\t\tconst blockKey = key + '::block';\r\n\t\t\t\tif (this.readOnly || this.disabled || state[blockKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst ret = grid.doChangeValue(cell.col, cell.row, toggleValue);\r\n\t\t\t\tif (ret) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst onChange = () => {\r\n\t\t\t\t\t\t// checkbox animation\r\n\t\t\t\t\t\tanimate(200, (point) => {\r\n\t\t\t\t\t\t\tif (point === 1) {\r\n\t\t\t\t\t\t\t\tdelete state[key];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstate[key] = {\r\n\t\t\t\t\t\t\t\t\telapsed: point,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgrid.invalidateCell(cell.col, cell.row);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (isPromise(ret)) {\r\n\t\t\t\t\t\tstate[blockKey] = true;\r\n\t\t\t\t\t\tret.then(() => {\r\n\t\t\t\t\t\t\tdelete state[blockKey];\r\n\t\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction: (e) => {\r\n\t\t\t\t\t\tconst selrange = grid.selection.range;\r\n\t\t\t\t\t\tconst col = grid.selection.select.col;\r\n\t\t\t\t\t\tfor (let row = selrange.start.row; row <= selrange.end.row; row++) {\r\n\t\t\t\t\t\t\tif (!util.isTarget(col, row)) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taction({\r\n\t\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tacceptKeys: [KEY_ENTER, KEY_SPACE],\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckEditor;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst BaseAction = require('./BaseAction');\r\n\tclass Editor extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._readOnly = option.readOnly;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t\tset readOnly(readOnly) {\r\n\t\t\tthis._readOnly = !!readOnly;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Editor(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Editor;\r\n}","'use strict';\r\n\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nconst InlineInputElement = require('./internal/InlineInputElement');\r\nconst {INLINE_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(grid) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach();\r\n\t}\r\n}\r\nfunction doChangeValue(grid) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.doChangeValue();\r\n\t}\r\n}\r\n\r\n\r\nclass InlineInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput(grid);\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput(grid);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tInlineInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputEditor;","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst {normalize} = require('../../internal/menu-items');\r\n\t\r\nconst Editor = require('./Editor');\r\nconst {EVENT_TYPE: {\r\n\tSELECTED_CELL,\r\n\tCLICK_CELL,\r\n\tKEYDOWN,\r\n\tSCROLL,\r\n\tMOUSEOVER_CELL,\r\n\tMOUSEOUT_CELL,\r\n\tMOUSEMOVE_CELL,\r\n}} = require('../../core/DrawGrid');\r\nconst InlineMenuElement = require('./internal/InlineMenuElement');\r\nconst {INLINE_MENU_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineMenuElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachMenu(grid) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach();\r\n\t}\r\n}\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\n\r\nclass InlineMenuEditor extends Editor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._options = normalize(option.options);\r\n\t}\r\n\tdispose() {\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget options() {\r\n\t\treturn this._options;\r\n\t}\r\n\tset options(options) {\r\n\t\tthis._options = normalize(options);\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineMenuEditor(this);\r\n\t}\r\n\tbindGridEvent(grid, col, util) {\r\n\t\tconst open = (cell) => {\r\n\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\t\tattachMenu(grid, cell, this, value);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn [\r\n\t\t\tgrid.listen(CLICK_CELL, (cell) => {\r\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\trow: cell.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SELECTED_CELL, (cell, selected) => {\r\n\t\t\t\tdetachMenu(grid);\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\tdetachMenu(grid);\r\n\t\t\t}),\r\n\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuEditor;","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\t\r\nconst SmallDialogInputElement = require('./internal/SmallDialogInputElement');\r\nconst {SMALL_DIALOG_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new SmallDialogInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(grid) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach();\r\n\t}\r\n}\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nclass SmallDialogInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._helperText = option.helperText;\r\n\t\tthis._inputValidator = option.inputValidator;\r\n\t\tthis._validator = option.validator;\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tdispose() {\r\n\t\tthis._inputDialogManager.dispose();\r\n\t\tthis._inputDialogManager = null;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tget helperText() {\r\n\t\treturn this._helperText;\r\n\t}\r\n\tget inputValidator() {\r\n\t\treturn this._inputValidator;\r\n\t}\r\n\tget validator() {\r\n\t\treturn this._validator;\r\n\t}\r\n\tclone() {\r\n\t\treturn new SmallDialogInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t// cancel input\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\t// cancel input\r\n\t\tdetachInput();\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tSmallDialogInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputEditor;","'use strict';\r\n{\r\n\t\r\n\tconst {isPromise, event: {cancel}} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tKEYDOWN,\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tfunction bindCellClickAction(grid, col, util, {\r\n\t\taction,\r\n\t\tmouseOver,\r\n\t\tmouseOut\r\n\t}) {\r\n\t\treturn [\r\n\t\t\t// click\r\n\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\trow: e.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOver) {\r\n\t\t\t\t\tif (!mouseOver({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t})) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOut) {\r\n\t\t\t\t\tmouseOut({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction bindCellKeyAction(grid, col, util, {action, acceptKeys = []}) {\r\n\t\tacceptKeys = [...acceptKeys, KEY_ENTER];\r\n\t\treturn [\r\n\t\t\t// enter key down\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (acceptKeys.indexOf(keyCode) === -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(sel.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t\tcancel(e);\r\n\t\t\t}),\r\n\r\n\t\t];\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tbindCellClickAction,\r\n\t\tbindCellKeyAction,\r\n\t};\r\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('./dom');\r\nconst KEY_ENTER = 13;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-input';\r\n\r\nfunction createInputElement() {\r\n\trequire('./InlineInputElement.css');\r\n\treturn createElement('input', {classList: CLASSNAME});\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {classList, type} = editor;\r\n\tif (classList) {\r\n\t\tinput.classList.add(...classList);\r\n\t}\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass InlineInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._input = createInputElement();\r\n\t\tthis._bindInputEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst input = this._input;\r\n\t\tconst handler = this._handler;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tinput.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tinput.style.top = rect.top.toFixed() + 'px';\r\n\t\tinput.style.left = rect.left.toFixed() + 'px';\r\n\t\tinput.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(input);\r\n\r\n\t\tsetInputAttrs(editor, grid, input);\r\n\t\tinput.value = value;\r\n\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\r\n\t\tconst focus = () => {\r\n\t\t\tinput.focus();\r\n\r\n\t\t\tconst end = input.value.length;\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t\t}\r\n\t\t\tif (document.selection) {\r\n\t\t\t\tconst range = input.createTextRange();\r\n\t\t\t\trange.collapse();\r\n\t\t\t\trange.moveEnd('character', end);\r\n\t\t\t\trange.moveStart('character', end);\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t};\r\n\t\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\tfocus();\r\n\t\t});\r\n\t}\r\n\tdetach() {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst input = this._input;\r\n\t\t\tthis._handler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\t\tinput.parentElement.removeChild(input);\r\n\t\t\t});\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\tdoChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst value = input.value;\r\n\t\tconst {grid, col, row} = this._activeData;\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst input = this._input;\r\n\t\tif (!input || !input.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindInputEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(input, 'click', stopPropagationOnly);\r\n\t\thandler.on(input, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(input, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(input, 'dblclick', stopPropagationOnly);\r\n\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (getKeyCode(e) === KEY_ENTER) {\r\n\t\t\t\tif (!this._isActive()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {grid} = this._activeData;\r\n\r\n\t\t\t\tthis.doChangeValue();\r\n\t\t\t\tif (grid) {\r\n\t\t\t\t\tgrid.focus();\r\n\t\t\t\t}\r\n\t\t\t\tthis.detach();\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\thandler.on(input, 'blur', (e) => {\r\n\t\t\tthis.doChangeValue();\r\n\t\t\tthis.detach();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tisDef,\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t}\r\n} = require('../../../internal/utils');\r\n\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n\tappendHtml,\r\n\tempty,\r\n\tdisableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n} = require('./dom');\r\n\t\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-menu';\r\nconst ITEM_CLASSNAME = CLASSNAME + '__menu-item';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\nconst EMPTY_ITEM_CLASSNAME = ITEM_CLASSNAME + '--empty';\r\n\r\nfunction findItemParents(target) {\r\n\tlet el = target;\r\n\twhile (!el.classList.contains(ITEM_CLASSNAME)) {\r\n\t\tel = el.parentElement;\r\n\t\tif (!el || el.classList.contains(CLASSNAME)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\treturn el;\r\n}\r\n\r\nfunction createMenuElement() {\r\n\trequire('./InlineMenuElement.css');\r\n\treturn createElement('ul', {classList: CLASSNAME});\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n\tmenu.style.top = rect.top.toFixed() + 'px';\r\n\tmenu.style.left = rect.left.toFixed() + 'px';\r\n\tmenu.style.width = rect.width.toFixed() + 'px';\r\n\tmenu.style['line-height'] = rect.height.toFixed() + 'px';\r\n\telement.appendChild(menu);\r\n}\r\n\r\nfunction optionToLi({classList, caption, value, html}, index) {\r\n\tconst item = createElement('li', {classList: ITEM_CLASSNAME});\r\n\titem.tabIndex = 0;\r\n\titem.dataset.valueindex = index;\r\n\tif (classList) {\r\n\t\titem.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n\t}\r\n\r\n\tif (caption) {\r\n\t\tconst span = createElement('span', {text: caption});\r\n\t\titem.appendChild(span);\r\n\t} else if (html) {\r\n\t\tappendHtml(item, html);\r\n\t}\r\n\r\n\tif (value === '' || !isDef(value)) {\r\n\t\titem.classList.add(EMPTY_ITEM_CLASSNAME);\r\n\t}\r\n\r\n\treturn item;\r\n}\r\n\r\nfunction openMenu(grid, editor, col, row, value, menu) {\r\n\tconst {options, classList} = editor;\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tempty(menu);\r\n\tmenu.style.font = grid.font || '16px sans-serif';\r\n\tlet emptyItemEl = null;\r\n\tlet valueItemEl = null;\r\n\t\t\r\n\toptions.forEach((option, i) => {\r\n\t\tconst item = optionToLi(option, i);\r\n\t\tmenu.appendChild(item);\r\n\t\tif (option.value === value) {\r\n\t\t\tvalueItemEl = item;\r\n\t\t\titem.dataset.select = true;\r\n\t\t}\r\n\t\tif (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n\t\t\temptyItemEl = item;\r\n\t\t}\r\n\t});\r\n\tconst focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n\tif (classList) {\r\n\t\tmenu.classList.add(...classList);\r\n\t}\r\n\tconst children = Array.prototype.slice.call(menu.children, 0);\r\n\tconst focusIndex = children.indexOf(focusEl);\r\n\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t// Cover the right line\r\n\trect.width++;\r\n\r\n\t// append for calculation\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Make the selection item at the middle\r\n\tlet offset = 0;\r\n\tlet allHeight = 0;\r\n\tfor (let i = 0; i < children.length; i++) {\r\n\t\tconst offsetHeight = children[i].offsetHeight;\r\n\t\tif (i < focusIndex) {\r\n\t\t\toffset += offsetHeight;\r\n\t\t}\r\n\t\tallHeight += offsetHeight;\r\n\t}\r\n\trect.offsetTop(-offset);\r\n\tmenu.style['transform-origin'] = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Control not to overflow the screen range\r\n\tconst menuClientRect = menu.getBoundingClientRect();\r\n\tconst scaleDiff = ((allHeight - menuClientRect.height) / 2);\r\n\tconst orgMenuTop = menuClientRect.top - scaleDiff;\r\n\tlet menuTop = orgMenuTop;\r\n\tconst menuBottom = menuTop + allHeight;\r\n\tconst winBottom = window.innerHeight;\r\n\tconst winMargin = 20;\r\n\tif (menuBottom > (winBottom - winMargin)) {\r\n\t\tconst diff = menuBottom - winBottom + winMargin;\r\n\t\tmenuTop -= diff;\r\n\t}\r\n\tif (menuTop < 0/*winTop*/ + winMargin) {\r\n\t\tmenuTop = winMargin;\r\n\t}\r\n\tif (menuTop !== orgMenuTop) {\r\n\t\trect.offsetTop(-(orgMenuTop - menuTop));\r\n\t\t// re update\r\n\t\tattachElement(element, rect, menu);\r\n\t}\r\n\t\t\r\n\tif (focusEl) {\r\n\t\tfocusEl.focus();\r\n\t}\r\n\tmenu.classList.remove(HIDDEN_CLASSNAME);\r\n\tmenu.classList.add(SHOWN_CLASSNAME);\r\n}\r\n\r\nfunction closeMenu(grid, col, row, menu, valueindex) {\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tdisableFocus(menu);\r\n}\r\n\r\nclass InlineMenuElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._menu = createMenuElement();\r\n\t\tthis._bindMenuEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._menu = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tmenu.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\topenMenu(grid, editor, col, row, value, menu);\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus, valueindex) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst menu = this._menu;\r\n\t\t\tcloseMenu(grid, col, row, menu, valueindex);\r\n\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\t_doChangeValue(valueindex) {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tconst value = editor.options[valueindex].value;\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst menu = this._menu;\r\n\t\tif (!menu || !menu.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindMenuEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\t\r\n\t\thandler.on(menu, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(menu, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(menu, 'dblclick', stopPropagationOnly);\r\n\r\n\t\thandler.on(menu, 'click', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\tthis._doChangeValue(item.dataset.valueindex);\r\n\t\t\tthis.detach(true, valueindex);\r\n\t\t});\r\n\t\thandler.on(menu, 'keydown', (e) => {\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\t\tthis._doChangeValue(valueindex);\r\n\t\t\t\tthis.detach(true, valueindex);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\t\tconst n = findPrevSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\t\tconst n = findNextSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_TAB) {\r\n\t\t\t\tif (!e.shiftKey) {\r\n\t\t\t\t\tif (!findNextSiblingFocusable(item)) {\r\n\t\t\t\t\t\tlet n = menu.querySelector('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findNextSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!findPrevSiblingFocusable(item)) {\r\n\t\t\t\t\t\tconst items = menu.querySelectorAll('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tlet n = items[items.length - 1];\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findPrevSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('./dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__small-dialog-input';\r\nconst INPUT_CLASSNAME = CLASSNAME + '__input';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\n\r\nfunction _focus(input, handler) {\r\n\tconst focus = () => {\r\n\t\tinput.focus();\r\n\r\n\t\tconst end = input.value.length;\r\n\t\ttry {\r\n\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t}\r\n\t\tif (document.selection) {\r\n\t\t\tconst range = input.createTextRange();\r\n\t\t\trange.collapse();\r\n\t\t\trange.moveEnd('character', end);\r\n\t\t\trange.moveStart('character', end);\r\n\t\t\trange.select();\r\n\t\t}\r\n\t};\r\n\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\tfocus();\r\n\t});\r\n}\r\n\r\nfunction createDialogElement() {\r\n\trequire('./SmallDialogInputElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst input = createElement('input', {classList: INPUT_CLASSNAME});\r\n\tinput.readonly = true;\r\n\tinput.tabIndex = -1;\r\n\telement.appendChild(input);\r\n\treturn element;\r\n}\r\n\r\nfunction bindProps(grid, dialog, input, editor) {\r\n\tconst {classList, helperText} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.add(...classList);\r\n\t}\r\n\tif (helperText && typeof helperText !== 'function') {\r\n\t\tdialog.dataset.helperText = helperText;\r\n\t}\r\n\tsetInputAttrs(editor, grid, input);\r\n}\r\n\r\nfunction unbindProps(grid, dialog, input, editor) {\r\n\tconst {classList} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.remove(...classList);\r\n\t}\r\n\tdelete dialog.dataset.helperText;\r\n\tinput.type = '';\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {type} = editor;\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass SmallDialogInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._dialog = createDialogElement();\r\n\t\tthis._input = this._dialog.querySelector('.' + INPUT_CLASSNAME);\r\n\t\tthis._bindDialogEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._dialog = null;\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tunbindProps(grid, dialog, input, this._beforePropEditor);\r\n\t\t}\r\n\r\n\t\tdelete dialog.dataset.errorMessage;\r\n\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = false;\r\n\t\tinput.tabIndex = 0;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tdialog.style.top = rect.top.toFixed() + 'px';\r\n\t\tdialog.style.left = rect.left.toFixed() + 'px';\r\n\t\tdialog.style.width = rect.width.toFixed() + 'px';\r\n\t\tdialog.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(dialog);\r\n\t\t\t\r\n\t\tinput.value = value;\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\t\tconst activeData = {grid, col, row, editor};\r\n\t\tthis._onInputValue(input, activeData);\r\n\t\t_focus(input, handler);\r\n\t\tdialog.classList.add(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.remove(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = true;\r\n\r\n\t\t\r\n\t\tbindProps(grid, dialog, input, editor);\r\n\r\n\t\tthis._activeData = activeData;\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst dialog = this._dialog;\r\n\t\t\tconst input = this._input;\r\n\r\n\t\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\t\tinput.readonly = false;\r\n\t\t\tinput.tabIndex = -1;\r\n\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t\tthis._beforeValue = null;\r\n\t}\r\n\t_doChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst value = input.value;\r\n\t\tif (!this._validate(value)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst {grid, col, row} = this._activeData;\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t\treturn true;\r\n\t}\r\n\t_isActive() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tif (!dialog || !dialog.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindDialogEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(dialog, 'click', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'dblclick', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'touchstart', stopPropagationOnly);\r\n\t\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t\tthis._onInputValue(input);\r\n\t\t});\r\n\t\tconst onKeyupAndPress = (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._onInputValue(input);\r\n\t\t};\r\n\t\thandler.on(input, 'keyup', onKeyupAndPress);\r\n\t\thandler.on(input, 'keypress', onKeyupAndPress);\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ENTER) {\r\n\t\t\t\tif (this._doChangeValue()) {\r\n\t\t\t\t\tthis.detach(true);\r\n\t\t\t\t}\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else {\r\n\t\t\t\tthis._onInputValue(input);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t_onInputValue(input, activeData) {\r\n\t\tconst before = this._beforeValue;\r\n\t\tconst value = input.value;\r\n\t\tif (before !== value) {\r\n\t\t\tthis._onInputValueChange(value, before, activeData);\r\n\t\t}\r\n\t\tthis._beforeValue = value;\r\n\t}\r\n\t_onInputValueChange(after, before, activeData) {\r\n\t\tactiveData = activeData || this._activeData;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst {grid, col, row, editor} = activeData;\r\n\t\tif (typeof editor.helperText === 'function') {\r\n\t\t\tconst helperText = editor.helperText(after, {grid, col, row});\r\n\t\t\tif (helperText) {\r\n\t\t\t\tdialog.dataset.helperText = helperText;\r\n\t\t\t} else {\r\n\t\t\t\tdelete dialog.dataset.helperText;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ('errorMessage' in dialog.dataset) {\r\n\t\t\tthis._validate(after, true);\r\n\t\t}\r\n\t}\r\n\t_validate(value, inputOnly) {\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tlet message = null;\r\n\t\tif (editor.inputValidator) {\r\n\t\t\tmessage = editor.inputValidator(value, {grid, col, row});\r\n\t\t}\r\n\t\tif (!message && editor.validator && !inputOnly) {\r\n\t\t\tmessage = editor.validator(value, {grid, col, row});\r\n\t\t}\r\n\t\tif (message) {\r\n\t\t\tdialog.dataset.errorMessage = message;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tdelete dialog.dataset.errorMessage;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputElement;","'use strict';\r\n\r\nconst {isDef} = require('../../../internal/utils');\r\n\r\nfunction createElement(tagName, {classList, text, html} = {}) {\r\n\tconst element = document.createElement(tagName);\r\n\tif (classList) {\r\n\t\tif (Array.isArray(classList)) {\r\n\t\t\telement.classList.add(...classList);\r\n\t\t} else {\r\n\t\t\telement.classList.add(classList);\r\n\t\t}\r\n\t}\r\n\tif (text) {\r\n\t\telement.textContent = text;\r\n\t} else if (html) {\r\n\t\telement.innerHTML = html;\r\n\t}\r\n\treturn element;\r\n}\r\n\r\nfunction empty(dom) {\r\n\tlet c;\r\n\twhile ((c = dom.firstChild)) {\r\n\t\tdom.removeChild(c);\r\n\t}\r\n}\r\nfunction isNode(arg) {\r\n\treturn !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n\tif (isNode(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\tconst dom = createElement('div', {html: arg});\r\n\treturn Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n\tif ((window.jQuery && arg instanceof window.jQuery)) {\r\n\t\treturn Array.prototype.map.call(arg, (a) => a);\r\n\t}\r\n\tif (Array.isArray(arg)) {\r\n\t\treturn arg.map(toNode);\r\n\t}\r\n\treturn [toNode(arg)];\r\n}\r\n\r\nfunction appendHtml(dom, inner) {\r\n\ttoNodeList(inner).forEach((node) => {\r\n\t\tdom.appendChild(node);\r\n\t});\r\n}\r\n\r\nfunction disableFocus(el) {\r\n\tel.dataset.disableBeforeTabIndex = el.tabIndex;\r\n\tel.tabIndex = -1;\r\n\tArray.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nfunction enableFocus(el) {\r\n\tif ('disableBeforeTabIndex' in el.dataset) {\r\n\t\tel.tabIndex = el.dataset.disableBeforeTabIndex;\r\n\t}\r\n\tArray.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\n\r\nfunction isFocusable(el) {\r\n\treturn isDef(el.tabIndex) && el.tabIndex > -1;\r\n}\r\nfunction findPrevSiblingFocusable(el) {\r\n\tlet n = el.previousSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.previousSibling;\r\n\t}\r\n\treturn n;\r\n}\r\nfunction findNextSiblingFocusable(el) {\r\n\tlet n = el.nextSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.nextSibling;\r\n\t}\r\n\treturn n;\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateElement,\r\n\tempty,\r\n\tisNode,\r\n\ttoNode,\r\n\ttoNodeList,\r\n\tappendHtml,\r\n\tdisableFocus,\r\n\tenableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n};","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\tconst NumberStyle = require('./style/NumberStyle');\r\n\tconst CheckStyle = require('./style/CheckStyle');\r\n\tconst ButtonStyle = require('./style/ButtonStyle');\r\n\tconst ImageStyle = require('./style/ImageStyle');\r\n\tconst IconStyle = require('./style/IconStyle');\r\n\tconst PercentCompleteBarStyle = require('./style/PercentCompleteBarStyle');\r\n\r\n\t/**\r\n\t * column styles\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.style\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst style = {\r\n\t\tget EVENT_TYPE() {\r\n\t\t\treturn BaseStyle.EVENT_TYPE;\r\n\t\t},\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tget NumberStyle() {\r\n\t\t\treturn NumberStyle;\r\n\t\t},\r\n\t\tget CheckStyle() {\r\n\t\t\treturn CheckStyle;\r\n\t\t},\r\n\t\tget ButtonStyle() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t},\r\n\t\tget ImageStyle() {\r\n\t\t\treturn ImageStyle;\r\n\t\t},\r\n\t\tget IconStyle() {\r\n\t\t\treturn IconStyle;\r\n\t\t},\r\n\t\tget PercentCompleteBarStyle() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t},\r\n\t\tof(columnStyle, record, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(record), record, StyleClass);\r\n\t\t\t\t} else if (record && columnStyle in record) {\r\n\t\t\t\t\treturn style.of(record[columnStyle], record, StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\nconst BaseStyle = require('./BaseStyle');\r\nlet defaultStyle;\r\nfunction adj(style) {\r\n\tconst {textAlign = 'center'} = style;\r\n\tstyle.textAlign = textAlign;\r\n\treturn style;\r\n}\r\nconst DEFAULT_BRANCH_COLORS = (name, index) => {\r\n\tswitch (index % 3) {\r\n\tcase 0:\r\n\t\treturn '#979797';\r\n\tcase 1:\r\n\t\treturn '#008fb5';\r\n\tcase 2:\r\n\t\treturn '#f1c109';\r\n\tdefault:\r\n\t}\r\n\treturn '#979797';\r\n};\r\nclass BranchGraphStyle extends BaseStyle {\r\n\tstatic get DEFAULT() {\r\n\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BranchGraphStyle());\r\n\t}\r\n\tconstructor(style = {}) {\r\n\t\tsuper(adj(style));\r\n\t\tthis._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n\t\tthis._margin = style.margin || 4;\r\n\t\tthis._circleSize = style.circleSize || 16;\r\n\t\tthis._branchLineWidth = style.branchLineWidth || 4;\r\n\t\tthis._mergeStyle = style.mergeStyle === 'straight' ? 'straight' : 'bezier';\r\n\t}\r\n\tget branchColors() {\r\n\t\treturn this._branchColors;\r\n\t}\r\n\tset branchColors(branchColors) {\r\n\t\tthis._branchColors = branchColors;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget margin() {\r\n\t\treturn this._margin;\r\n\t}\r\n\tset margin(margin) {\r\n\t\tthis._margin = margin;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget circleSize() {\r\n\t\treturn this._circleSize;\r\n\t}\r\n\tset circleSize(circleSize) {\r\n\t\tthis._circleSize = circleSize;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget branchLineWidth() {\r\n\t\treturn this._branchLineWidth;\r\n\t}\r\n\tset branchLineWidth(branchLineWidth) {\r\n\t\tthis._branchLineWidth = branchLineWidth;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget mergeStyle() {\r\n\t\treturn this._mergeStyle;\r\n\t}\r\n\tset mergeStyle(mergeStyle) {\r\n\t\tthis._mergeStyle = mergeStyle;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphStyle(this);\r\n\t}\r\n}\r\nmodule.exports = BranchGraphStyle;","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass ButtonStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tbuttonBgColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t}\r\n\t\tget buttonBgColor() {\r\n\t\t\treturn this._buttonBgColor;\r\n\t\t}\r\n\t\tset buttonBgColor(buttonBgColor) {\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = ButtonStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass CheckStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tborderColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t}\r\n\t\tget uncheckBgColor() {\r\n\t\t\treturn this._uncheckBgColor;\r\n\t\t}\r\n\t\tset uncheckBgColor(uncheckBgColor) {\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget checkBgColor() {\r\n\t\t\treturn this._checkBgColor;\r\n\t\t}\r\n\t\tset checkBgColor(checkBgColor) {\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget borderColor() {\r\n\t\t\treturn this._borderColor;\r\n\t\t}\r\n\t\tset borderColor(borderColor) {\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = CheckStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass IconStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = IconStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tclass ImageStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tthis._imageSizing = style.imageSizing;\r\n\t\t\tthis._margin = style.margin || 4;\r\n\t\t}\r\n\t\tget imageSizing() {\r\n\t\t\treturn this._imageSizing;\r\n\t\t}\r\n\t\tset imageSizing(imageSizing) {\r\n\t\t\tthis._imageSizing = imageSizing;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget margin() {\r\n\t\t\treturn this._margin;\r\n\t\t}\r\n\t\tset margin(margin) {\r\n\t\t\tthis._margin = margin;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'right'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass NumberStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = NumberStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\tlet defaultStyle;\r\n\tconst DEFAULT_BAR_COLOR = (num) => {\r\n\t\tif (num > 80) {\r\n\t\t\treturn '#20a8d8';\r\n\t\t}\r\n\t\tif (num > 50) {\r\n\t\t\treturn '#4dbd74';\r\n\t\t}\r\n\t\tif (num > 20) {\r\n\t\t\treturn '#ffc107';\r\n\t\t}\r\n\t\treturn '#f86c6b';\r\n\t};\r\n\tclass PercentCompleteBarStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new PercentCompleteBarStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n\t\t\tthis._barBgColor = style.barBgColor || '#f0f3f5';\r\n\t\t\tthis._barHeight = style.barHeight || 3;\r\n\t\t}\r\n\t\tget barColor() {\r\n\t\t\treturn this._barColor;\r\n\t\t}\r\n\t\tset barColor(barColor) {\r\n\t\t\tthis._barColor = barColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barBgColor() {\r\n\t\t\treturn this._barBgColor;\r\n\t\t}\r\n\t\tset barBgColor(barBgColor) {\r\n\t\t\tthis._barBgColor = barBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barHeight() {\r\n\t\t\treturn this._barHeight;\r\n\t\t}\r\n\t\tset barHeight(barHeight) {\r\n\t\t\tthis._barHeight = barHeight;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarStyle;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\r\n\tlet defaultStyle;\r\n\tclass StdBaseStyle extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._textAlign = style.textAlign || 'left';\r\n\t\t\tthis._textBaseline = style.textBaseline || 'middle';\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new StdBaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = StdBaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t\tthis._font = style.font;\r\n\t\t\tthis._padding = style.padding;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this._font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis._font = font;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget padding() {\r\n\t\t\treturn this._padding;\r\n\t\t}\r\n\t\tset padding(padding) {\r\n\t\t\tthis._padding = padding;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./type/Column');\r\n\tconst NumberColumn = require('./type/NumberColumn');\r\n\tconst CheckColumn = require('./type/CheckColumn');\r\n\tconst ButtonColumn = require('./type/ButtonColumn');\r\n\tconst ImageColumn = require('./type/ImageColumn');\r\n\tconst PercentCompleteBarColumn = require('./type/PercentCompleteBarColumn');\r\n\tconst IconColumn = require('./type/IconColumn');\r\n\tconst BranchGraphColumn = require('./type/BranchGraphColumn');\r\n\tconst MenuColumn = require('./type/MenuColumn');\r\n\r\n\t/**\r\n\t * column types\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.type\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst type = {\r\n\t\tTYPES: {\r\n\t\t\tDEFAULT: new Column(),\r\n\t\t\tNUMBER: new NumberColumn(),\r\n\t\t\tCHECK: new CheckColumn(),\r\n\t\t\tBUTTON: new ButtonColumn(),\r\n\t\t\tIMAGE: new ImageColumn(),\r\n\t\t},\r\n\t\tget Column() {\r\n\t\t\treturn Column;\r\n\t\t},\r\n\t\tget NumberColumn() {\r\n\t\t\treturn NumberColumn;\r\n\t\t},\r\n\t\tget CheckColumn() {\r\n\t\t\treturn CheckColumn;\r\n\t\t},\r\n\t\tget ButtonColumn() {\r\n\t\t\treturn ButtonColumn;\r\n\t\t},\r\n\t\tget ImageColumn() {\r\n\t\t\treturn ImageColumn;\r\n\t\t},\r\n\t\tget PercentCompleteBarColumn() {\r\n\t\t\treturn PercentCompleteBarColumn;\r\n\t\t},\r\n\t\tget IconColumn() {\r\n\t\t\treturn IconColumn;\r\n\t\t},\r\n\t\tget BranchGraphColumn() {\r\n\t\t\treturn BranchGraphColumn;\r\n\t\t},\r\n\t\tget MenuColumn() {\r\n\t\t\treturn MenuColumn;\r\n\t\t},\r\n\t\tof(columnType) {\r\n\t\t\tif (!columnType) {\r\n\t\t\t\treturn type.TYPES.DEFAULT;\r\n\t\t\t} else if (typeof columnType === 'string') {\r\n\t\t\t\treturn type.TYPES[columnType.toUpperCase()] || type.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnType;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {isPromise, isDef, obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst animate = require('../../internal/animate');\r\n\tconst BaseStyle = require('../style/Style');\r\n\tconst {COLUMN_FADEIN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\tfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n\t\tif (isDef(column._fadeinWhenCallbackInPromise)) {\r\n\t\t\treturn column._fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\treturn !!grid.configure('fadeinWhenCallbackInPromise');\r\n\t}\r\n\r\n\tfunction getFadinState(grid) {\r\n\t\tif (!grid[COLUMN_FADEIN_STATE_ID]) {\r\n\t\t\tsetReadonly(grid, COLUMN_FADEIN_STATE_ID, {});\r\n\t\t}\r\n\t\treturn grid[COLUMN_FADEIN_STATE_ID];\r\n\t}\r\n\tfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\treturn (point) => {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\tif (point === 1) {\r\n\t\t\t\tdelete state[stateKey];\r\n\t\t\t} else {\r\n\t\t\t\tstate[stateKey] = {\r\n\t\t\t\t\topacity: point,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\tdrawInternal();\r\n\r\n\t\t\tconst cellState = state[stateKey];\r\n\t\t\tif (cellState) {\r\n\t\t\t\t//\r\n\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst fadinMgr = {\r\n\t\tanimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\t// fadein animation\r\n\t\t\tconst state = getFadinState(grid);\r\n\r\n\t\t\tconst activeFadeins = [\r\n\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n\t\t\t];\r\n\t\t\tstate.activeFadeins = activeFadeins;\r\n\t\t\t\r\n\t\t\tanimate(500, (point) => {\r\n\t\t\t\tactiveFadeins.forEach((f) => f(point));\r\n\t\t\t\tif (point === 1) {\r\n\t\t\t\t\tdelete state.activeFadeins;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tmargeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tif (state.activeFadeins) {\r\n\t\t\t\tstate.activeFadeins.push(\r\n\t\t\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdrawInternal();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t};\r\n\r\n\tclass BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\r\n\t\t\t//Promisecallback\r\n\t\t\tthis._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn BaseStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, getRecord, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\t//\r\n\t\t\tif (isPromise(cellValue)) {\r\n\t\t\t\tif (context.drawing) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst start = Date.now();\r\n\t\t\t\treturn cellValue.then((val) => {\r\n\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst time = Date.now() - start;\r\n\r\n\t\t\t\t\tconst drawInternal = () => {\r\n\t\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\t\t\tthis.convertInternal(val),\r\n\t\t\t\t\t\t\t\tcurrentContext,\r\n\t\t\t\t\t\t\t\tstyleContents.of(style, getRecord(), this.StyleClass),\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n\t\t\t\t\t\tdrawInternal();//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst {col, row} = context;\r\n\t\t\t\t\t\tif (time < 80) {\r\n\t\t\t\t\t\t\t//80msPromiseCallback\r\n\t\t\t\t\t\t\tfadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\tfadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\tthis.convertInternal(cellValue),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tstyleContents.of(style, getRecord(), this.StyleClass),\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\t//\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\t\tconst cellState = grid[COLUMN_FADEIN_STATE_ID] && grid[COLUMN_FADEIN_STATE_ID][stateKey];\r\n\t\t\t\tif (cellState) {\r\n\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn isDef(value) ? value : '';\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseColumn;\r\n}","'use strict';\r\nconst {isDef, getOrApply, isPromise, obj: {isObject}} = require('../../internal/utils');\r\nconst BranchGraphStyle = require('../style/BranchGraphStyle');\r\nconst BaseColumn = require('./BaseColumn');\r\nconst {BRANCH_GRAPH_COLUMN_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nfunction getAllColumnData(grid, col, callback) {\r\n\tconst dataSource = grid.dataSource;\r\n\tlet field = grid.getField(col);\r\n\tif (isObject(field) && field.get && field.set) {\r\n\t\tfield = field.get;\r\n\t}\r\n\tconst allData = [];\r\n\tlet promise;\r\n\tfor (let index = 0; index < dataSource.length; index++) {\r\n\t\tconst data = dataSource.getField(index, field);\r\n\t\tif (isPromise(data)) {\r\n\t\t\tconst dataIndex = allData.length;\r\n\t\t\tallData.push(data);\r\n\t\t\tif (!promise) {\r\n\t\t\t\tpromise = data.then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tpromise = promise.then(() => data).then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallData.push(data);\r\n\t\t}\r\n\t}\r\n\r\n\tif (promise) {\r\n\t\tpromise.then(() => callback(allData));\r\n\t} else {\r\n\t\tcallback(allData);\r\n\t}\r\n}\r\n\r\nclass BranchLine {\r\n\tconstructor({fromIndex, toIndex, colorIndex, point}) {\r\n\t\tthis.fromIndex = fromIndex;\r\n\t\tthis.toIndex = toIndex;\r\n\t\tthis.colorIndex = colorIndex;\r\n\t\tthis.point = point;\r\n\t}\r\n}\r\nclass BranchPoint {\r\n\tconstructor({index, commit = false, lines = [], tag}) {\r\n\t\tthis.index = index;\r\n\t\tthis.commit = commit;\r\n\t\tthis.lines = lines;\r\n\t\tthis.tag = tag;\r\n\t}\r\n\tstatic mergeLines(lines) {\r\n\t\tconst result = lines.filter(((l) => isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\t\t\r\n\t\tconst froms = lines.filter(((l) => isDef(l.fromIndex) && !isDef(l.toIndex)));\r\n\t\tconst tos = lines.filter(((l) => !isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\r\n\t\tfroms.forEach((f) => {\r\n\t\t\tfor (let i = 0; i < tos.length; i++) {\r\n\t\t\t\tconst t = tos[i];\r\n\t\t\t\tif (t.point) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (f.colorIndex === t.colorIndex) {\r\n\t\t\t\t\tf.toIndex = t.toIndex;\r\n\t\t\t\t\ttos.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult.push(f);\r\n\t\t});\r\n\r\n\t\treturn result.concat(tos);\r\n\t}\r\n\tstatic merge(a, b) {\r\n\t\tif (!a) {\r\n\t\t\treturn b;\r\n\t\t}\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: a.index,\r\n\t\t\tcommit: a.commit || b.commit,\r\n\t\t\tlines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n\t\t\ttag: a.tag || b.tag\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction joinLine(timeline, branchIndex) {\r\n\tconst reverse = [...timeline].reverse();\r\n\tfor (let i = 0; i < reverse.length; i++) {\r\n\t\tconst f = reverse[i][branchIndex];\r\n\t\tif (f) {\r\n\t\t\tf.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\r\n\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\tcolorIndex: branchIndex,\r\n\t\t\t})]));\r\n\r\n\t\t\tfor (let j = 0; j < i; j++) {\r\n\t\t\t\tconst tl = reverse[j];\r\n\t\t\t\ttl[branchIndex] = new BranchPoint({\r\n\t\t\t\t\tindex: branchIndex,\r\n\t\t\t\t\tlines: [new BranchLine({\r\n\t\t\t\t\t\tfromIndex: branchIndex,\r\n\t\t\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\t\t\tcolorIndex: branchIndex\r\n\t\t\t\t\t})]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction branch({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tlet toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0) {\r\n\t\ttoIndex = branches.length;\r\n\t\tbranches.push(to);\r\n\t}\r\n\t\r\n\tfunction findBranchRootIndex() {\r\n\t\tfor (let index = timeline.length - 1; index >= 0; index--) {\r\n\t\t\tconst tl = timeline[index];\r\n\t\t\tconst from = tl[fromIndex];\r\n\t\t\tif (from && from.commit) {\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tif (fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t});\r\n\t} else {\r\n\t\tconst fromTargetIndex = findBranchRootIndex();\r\n\t\tif (fromTargetIndex === -1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst branchTargetFromIndex = fromTargetIndex + 1;\r\n\t\tconst branchPoint = new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})]\r\n\t\t});\r\n\t\tlet point;\r\n\t\tlet result;\r\n\t\tif (branchTargetFromIndex < timeline.length) {\r\n\t\t\tconst targetLine = timeline[branchTargetFromIndex];\r\n\t\t\tpoint = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n\t\t} else {\r\n\t\t\tpoint = branchPoint;\r\n\t\t\tresult = branchPoint;\r\n\t\t}\r\n\t\tconst from = timeline[fromTargetIndex][fromIndex];\r\n\t\tfrom.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\r\n\t\t\ttoIndex,\r\n\t\t\tcolorIndex: toIndex,\r\n\t\t\tpoint,\r\n\t\t})]));\r\n\t\treturn result;\r\n\t}\r\n\t\r\n}\r\n\r\nfunction commit({timeline, branches}, name) {\r\n\tconst index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\treturn null;\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex,\r\n\t\tcommit: true,\r\n\t});\r\n\t\t\r\n\tif (joinLine(timeline, index)) {\r\n\t\tresult.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\r\n\t\t\tfromIndex: index,\r\n\t\t\tcolorIndex: index\r\n\t\t})]));\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction commitTag({timeline, branches}, name, tag) {\r\n\tlet index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\tindex = branches.length;\r\n\t\tbranches.push(name);\r\n\t}\r\n\treturn new BranchPoint({\r\n\t\tindex,\r\n\t\ttag\r\n\t});\r\n}\r\n\r\nfunction commitMerge({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tconst toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0 || fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tcommit: true,\r\n\t\t});\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex: toIndex,\r\n\t\tcommit: true,\r\n\t\tlines: [\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t}),\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex: toIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})],\r\n\t});\r\n\tconst froms = [...timeline];\r\n\tconst fromTargetLine = froms.pop();\r\n\tif (fromTargetLine) {\r\n\t\tfromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\ttoIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t})]\r\n\t\t}));\r\n\t}\r\n\r\n\tjoinLine(froms, fromIndex);\r\n\r\n\tjoinLine(timeline, toIndex);\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction calcCommand(info, command) {\r\n\tconst {timeline} = info;\r\n\tconst timelineData = [];\r\n\t// const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n\tconst commands = Array.isArray(command) ? command : [command];\r\n\tcommands.forEach((cmd) => {\r\n\t\tif (!cmd) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet point;\r\n\t\tif (cmd.command === 'branch') {\r\n\t\t\tconst from = isObject(cmd.branch) ? cmd.branch.from : null;\r\n\t\t\tconst to = isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n\t\t\tpoint = branch(info, from, to);\r\n\t\t} else if (cmd.command === 'commit') {\r\n\t\t\tconst {branch} = cmd;\r\n\t\t\tpoint = commit(info, branch);\r\n\t\t} else if (cmd.command === 'merge') {\r\n\t\t\tconst from = cmd.branch.from;\r\n\t\t\tconst to = cmd.branch.to;\r\n\t\t\tpoint = commitMerge(info, from, to);\r\n\t\t} else if (cmd.command === 'tag') {\r\n\t\t\tconst {branch, tag} = cmd;\r\n\t\t\tpoint = commitTag(info, branch, tag);\r\n\t\t}\r\n\t\tif (point && point.index > -1) {\r\n\t\t\ttimelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n\t\t}\r\n\t});\r\n\ttimeline.push(timelineData);\r\n}\r\n\r\nfunction calcBranchesInfo(start, grid, col) {\r\n\tconst result = {\r\n\t\tbranches: [],\r\n\t\ttimeline: []\r\n\t};\r\n\tgetAllColumnData(grid, col, (data) => {\r\n\t\tif (start !== 'top') {\r\n\t\t\tdata = [...data].reverse();\r\n\t\t}\r\n\t\tdata.forEach((command) => {\r\n\t\t\tcalcCommand(result, command);\r\n\t\t});\r\n\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n\tlet w = Math.max(width / branches.length + 1, 5);\r\n\ttimeline.forEach((tl) => {\r\n\t\ttl.forEach((p, index) => {\r\n\t\t\tif (index <= 0) {\r\n\t\t\t\t// \r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (p.tag) {\r\n\t\t\t\tconst textWidth = ctx.measureText(p.tag).width;\r\n\t\t\t\tif (((w * index) + (radius * 2) + 4 + textWidth) > width) {\r\n\t\t\t\t\tw = Math.max((width - (radius * 2) - 4 - textWidth) / index, 5);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst result = [];\r\n\tlet x = left;\r\n\tbranches.forEach(() => {\r\n\t\tresult.push(Math.ceil(x + radius));\r\n\t\tx += w;\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\r\n\tbranchXPoints, margin, branchColors, branchLineWidth, mergeStyle\r\n}, {\r\n\twidth, col, row, branches\r\n}) {\r\n\tif (isDef(upLineIndex) || isDef(downLineIndex)) {\r\n\t\tctx.strokeStyle = getOrApply(branchColors, branches[colorIndex], colorIndex);\r\n\t\tctx.lineWidth = branchLineWidth;\r\n\t\tctx.lineCap = 'round';\r\n\t\tctx.beginPath();\r\n\r\n\r\n\t\tif (isDef(upLineIndex)) {\r\n\t\t\tconst upX = branchXPoints[upLineIndex];\r\n\t\t\tconst upRect = grid.getCellRelativeRect(col, row - 1);\r\n\t\t\tconst upY = upRect.top + upRect.height / 2;\r\n\t\t\tctx.moveTo(upX, upY);\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tupX, (y + upY) / 2,\r\n\t\t\t\t\t\tx, (y + upY) / 2,\r\n\t\t\t\t\t\tx, y\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t}\r\n\r\n\t\tif (isDef(downLineIndex)) {\r\n\t\t\tconst downX = branchXPoints[downLineIndex];\r\n\t\t\tconst downRect = grid.getCellRelativeRect(col, row + 1);\r\n\t\t\tconst downY = downRect.top + downRect.height / 2;\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tx, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, downY\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(downX, downY);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tctx.stroke();\r\n\t}\r\n}\r\n\r\n/**\r\n * BranchGraphColumn<br>\r\n * <br>\r\n * # Data command<br>\r\n * ## mastar branch or orphan branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * </code></pre>\r\n * ## commit<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * </code></pre>\r\n * ## branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## merge<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## tag<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * </code></pre>\r\n *\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._start = option.start || 'bottom';\r\n\t\tthis._cache = isDef(option.cache) ? option.cache : false;\r\n\t}\r\n\tget StyleClass() {\r\n\t\treturn BranchGraphStyle;\r\n\t}\r\n\tclearCache(grid) {\r\n\t\tdelete grid[_];\r\n\t}\r\n\tonDrawCell(cellValue, info, context, grid) {\r\n\t\tif (this._cache) {\r\n\t\t\tconst state = grid[_] || (grid[_] = {});\r\n\t\t\tconst {col} = context;\r\n\t\t\tif (!state[col]) {\r\n\t\t\t\tstate[col] = calcBranchesInfo(this._start, grid, col);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn super.onDrawCell(cellValue, info, context, grid);\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphColumn(this);\r\n\t}\r\n\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst {timeline, branches} = (this._cache && grid[_]) ? grid[_][col] : calcBranchesInfo(this._start, grid, col);\r\n\t\t\r\n\t\tconst {upLineIndexKey, downLineIndexKey} = this._start !== 'top' ? {upLineIndexKey: 'toIndex', downLineIndexKey: 'fromIndex'} : {upLineIndexKey: 'fromIndex', downLineIndexKey: 'toIndex'};\r\n\t\tconst data = this._start !== 'top' ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\r\n\r\n\t\tconst {\r\n\t\t\tbranchColors,\r\n\t\t\tbranchLineWidth,\r\n\t\t\tcircleSize,\r\n\t\t\tmergeStyle,\r\n\t\t\tmargin,\r\n\t\t\tbgColor,\r\n\t\t} = style;\r\n\t\tif (bgColor) {\r\n\t\t\tdrawCellBase({\r\n\t\t\t\tbgColor,\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tconst rect = context.getRect();\r\n\t\tconst radius = circleSize / 2;\r\n\t\tconst width = rect.width - margin * 2;\r\n\r\n\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'middle';\r\n\t\t\tconst branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n\t\t\t\r\n\t\t\tconst y = rect.top + rect.height / 2;\r\n\r\n\t\t\t// draw join lines\r\n\t\t\tdata.\r\n\t\t\t\tmap((point, index) => point ? point.lines.map((line) => ({\r\n\t\t\t\t\tcolorIndex: line.colorIndex,\r\n\t\t\t\t\tupLineIndex: line[upLineIndexKey],\r\n\t\t\t\t\tdownLineIndex: line[downLineIndexKey],\r\n\t\t\t\t\tpointIndex: index,\r\n\t\t\t\t})) : []).\r\n\t\t\t\treduce((p, c) => p.concat(c), []).// flatMap\r\n\t\t\t\t// order of overlap\r\n\t\t\t\tsort((a, b) => b.colorIndex - a.colorIndex).\r\n\t\t\t\tforEach((line) => {\r\n\t\t\t\t\tconst x = branchXPoints[line.pointIndex];\r\n\t\t\t\t\trenderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n\t\t\t\t\t\tmargin,\r\n\t\t\t\t\t\tbranchXPoints,\r\n\t\t\t\t\t\tbranchLineWidth,\r\n\t\t\t\t\t\tbranchColors,\r\n\t\t\t\t\t\tmergeStyle,\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\twidth, col, row, branches\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t// draw commit points\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.commit) {\r\n\t\t\t\t\tconst x = branchXPoints[index];\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// draw tags\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.tag) {\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\nmodule.exports = BranchGraphColumn;","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst ButtonStyle = require('../style/ButtonStyle');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tconst utils = require('./columnUtils');\r\n\t\r\n\r\n\tclass ButtonColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._caption = option.caption;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t}\r\n\t\tget caption() {\r\n\t\t\treturn this._caption;\r\n\t\t}\r\n\t\twithCaption(caption) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._caption = caption;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn this._caption || value;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tlet active = false;\r\n\t\t\tconst state = grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t\tif (state) {\r\n\t\t\t\tif (state.mouseActiveCell &&\r\n\t\t\t\t\tstate.mouseActiveCell.col === col &&\r\n\t\t\t\t\tstate.mouseActiveCell.row === row) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t} else if (context.getSelectState().selected) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.button(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tbgColor: buttonBgColor,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\tshadow: active ? {\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.48)',\r\n\t\t\t\t\t\tblur: 6,\r\n\t\t\t\t\t\toffsetY: 3,\r\n\t\t\t\t\t} : true,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonColumn;\r\n}","'use strict';\r\n{\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst CheckStyle = require('../style/CheckStyle');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\t\r\n\r\n\tfunction toBoolean(val) {\r\n\t\tif (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\r\n\tclass CheckColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn CheckStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn toBoolean(value);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tconst key = col + ':' + row;\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID] && grid[CHECK_COLUMN_STATE_ID][key];\r\n\t\t\t\r\n\t\t\tconst opt = {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t};\r\n\t\t\tif (state) {\r\n\t\t\t\topt.animElapsedTime = state.elapsed;\r\n\t\t\t}\r\n\t\t\thelper.checkbox(value, context, opt);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckColumn;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('../style/Style');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass Column extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Column(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.text(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Column;\r\n}","'use strict';\r\n{\r\n\tconst IconStyle = require('../style/IconStyle');\r\n\tconst Column = require('./Column');\r\n\tconst icons = require('../../internal/icons');\r\n\r\n\tfunction repeatArray(val, count) {\r\n\t\tif (count === Infinity) {\r\n\t\t\tcount = 0;\r\n\t\t}\r\n\t\tconst a = [];\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\ta.push(val);\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tclass IconColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._tagName = option.tagName || 'i';\r\n\t\t\tthis._className = option.className;\r\n\t\t\tthis._content = option.content;\r\n\t\t\tthis._name = option.name;\r\n\t\t\tthis._iconWidth = option.iconWidth;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn IconStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tconst num = value - 0;\r\n\t\t\tif (!isNaN(num)) {\r\n\t\t\t\tconst icon = {};\r\n\t\t\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\t\t\ticon[k] = style[k];\r\n\t\t\t\t});\r\n\t\t\t\ticon.className = this._className;\r\n\t\t\t\ticon.tagName = this._tagName;\r\n\t\t\t\ticon.content = this._content;\r\n\t\t\t\ticon.name = this._name;\r\n\t\t\t\tif (this._iconWidth) {\r\n\t\t\t\t\ticon.width = this._iconWidth;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tinfo.getIcon = () => repeatArray(icon, num);\r\n\t\t\t} else {\r\n\t\t\t\tinfo.getIcon = () => null;\r\n\t\t\t}\r\n\t\t\tsuper.drawInternal('', context, style, helper, grid, info);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = IconColumn;\r\n}","'use strict';\r\n{\r\n\tconst ImageStyle = require('../style/ImageStyle');\r\n\tconst {getCacheOrLoad} = require('../../internal/imgs');\r\n\tconst {calcStartPosition} = require('../../internal/canvases');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\r\n\tconst MAX_LRU_CACHE_SIZE = 50;\r\n\tfunction getImage(url) {\r\n\t\treturn getCacheOrLoad('ImageColumn', MAX_LRU_CACHE_SIZE, url);\r\n\t}\r\n\r\n\tfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n\t\tlet newWidth = width;\r\n\t\tlet newHeight = height;\r\n\t\tif (newWidth > maxWidth) {\r\n\t\t\tnewWidth = maxWidth;\r\n\t\t\tnewHeight = (newWidth * height) / width;\r\n\t\t}\r\n\t\tif (newHeight > maxHeight) {\r\n\t\t\tnewHeight = maxHeight;\r\n\t\t\tnewWidth = (newHeight * width) / height;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\twidth: newWidth,\r\n\t\t\theight: newHeight,\r\n\t\t};\r\n\t}\r\n\r\n\tclass ImageColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn ImageStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\treturn super.onDrawCell(getImage(cellValue), info, context, grid);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tif (value) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tmargin,\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t} = style;\r\n\t\t\t\tif (bgColor) {\r\n\t\t\t\t\tdrawCellBase({\r\n\t\t\t\t\t\tbgColor,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\tif (style.imageSizing === 'keep-aspect-ratio') {\r\n\t\t\t\t\t\tconst {width, height} = calcKeepAspectRatioSize(\r\n\t\t\t\t\t\t\t\tvalue.width, value.height,\r\n\t\t\t\t\t\t\t\trect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst pos = calcStartPosition(ctx, rect, width, height, {\r\n\t\t\t\t\t\t\toffset: margin,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\tpos.x, pos.y, width, height\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\trect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageColumn;\r\n}","'use strict';\r\n{\r\n\tconst {normalize} = require('../../internal/menu-items');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst Style = require('../style/Style');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass MenuColumn extends BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._options = normalize(option.options);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MenuColumn(this);\r\n\t\t}\r\n\t\tget options() {\r\n\t\t\treturn this._options;\r\n\t\t}\r\n\t\twithOptions(options) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._options = normalize(options);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tlet {\r\n\t\t\t\tcolor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst text = this._convertInternal(value);\r\n\t\t\thelper.testFontLoad(font, text, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\tconst basePadding = helper.toBoxPixelArray(padding || 0, context);\r\n\t\t\t\tconst textPadding = basePadding.slice(0);\r\n\t\t\t\ttextPadding[1] += 26;// icon padding\r\n\t\t\t\tconst iconPadding = basePadding.slice(0);\r\n\t\t\t\ticonPadding[1] += 8;\r\n\t\t\t\tif (!isDef(color) && (!isDef(value) || value === '')) {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, .38)';\r\n\t\t\t\t}\r\n\t\t\t\thelper.text(text, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding: textPadding,\r\n\t\t\t\t});\r\n\t\t\t\t// draw icon\r\n\t\t\t\thelper.text('', context, {\r\n\t\t\t\t\ttextAlign: 'right',\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons: [{\r\n\t\t\t\t\t\tpath: 'M0 2 5 7 10 2z',\r\n\t\t\t\t\t\twidth: 10,\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, .54)',\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tpadding: iconPadding,\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\t_convertInternal(value) {\r\n\t\t\tconst options = this._options;\r\n\t\t\tfor (let i = 0; i < options.length; i++) {\r\n\t\t\t\tconst option = options[i];\r\n\t\t\t\tif (option.value === value) {\r\n\t\t\t\t\tvalue = option.caption;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn super.convertInternal(value);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = MenuColumn;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst NumberStyle = require('../style/NumberStyle');\r\n\tlet defaultFotmat;\r\n\tclass NumberColumn extends Column {\r\n\t\tstatic get defaultFotmat() {\r\n\t\t\treturn defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n\t\t}\r\n\t\tstatic set defaultFotmat(fmt) {\r\n\t\t\tdefaultFotmat = fmt;\r\n\t\t}\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._format = option.format;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn NumberStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberColumn(this);\r\n\t\t}\r\n\t\tget format() {\r\n\t\t\treturn this._format;\r\n\t\t}\r\n\t\twithFormat(format) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._format = format;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\tif (isNaN(value - 0)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t\tconst format = this._format || NumberColumn.defaultFotmat;\r\n\t\t\treturn format.format(value - 0);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberColumn;\r\n}","'use strict';\r\n{\r\n\tconst PercentCompleteBarStyle = require('../style/PercentCompleteBarStyle');\r\n\tconst {getOrApply, str} = require('../../internal/utils');\r\n\tconst Column = require('./Column');\r\n\t\r\n\r\n\tconst MARGIN = 2;\r\n\r\n\tclass PercentCompleteBarColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._min = option.min || 0;\r\n\t\t\tthis._max = option.max || (this._min + 100);\r\n\t\t\tthis._formatter = option.formatter || ((v) => v);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tsuper.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n\t\t\tconst {\r\n\t\t\t\tbarColor,\r\n\t\t\t\tbarBgColor,\r\n\t\t\t\tbarHeight,\r\n\t\t\t} = style;\r\n\r\n\t\t\tlet svalue = value + '';\r\n\t\t\tif (str.endsWith(svalue, '%')) {\r\n\t\t\t\tsvalue = svalue.substr(0, svalue.length - 1);\r\n\t\t\t}\r\n\t\t\tconst num = svalue - 0;\r\n\t\t\tconst rate = num < this._min ? 0\r\n\t\t\t\t: num > this._max ? 1\r\n\t\t\t\t: (num - this._min) / (this._max - this._min);\r\n\t\t\t\r\n\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\t\tconst barMaxWidth = rect.width - MARGIN * 2 - 1/**/;\r\n\t\t\t\tconst barTop = rect.bottom - MARGIN - barHeight - 1/**/;\r\n\t\t\t\tconst barLeft = rect.left + MARGIN;\r\n\t\t\t\tctx.fillStyle = getOrApply(barBgColor, rate * 100) || '#f0f3f5';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n\t\t\t\tctx.fill();\r\n\r\n\r\n\t\t\t\tconst barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n\t\t\t\tctx.fillStyle = getOrApply(barColor, rate * 100) || '#20a8d8';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barSize, barHeight);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarColumn;\r\n}","'use strict';\r\n{\r\n\tconst {isPromise} = require('../../internal/utils');\r\n\tconst icons = require('../../internal/icons');\r\n\r\n\r\n\tmodule.exports = {\r\n\t\tloadIcons(icon, context, helper, callback) {\r\n\t\t\tif (icon) {\r\n\t\t\t\tif (isPromise(icon)) {\r\n\t\t\t\t\ticon.then((i) => {\r\n\t\t\t\t\t\tthis.loadIcon(i, context.toCurrentContext(), callback);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst iconList = icons.toNormarizeArray(icon);\r\n\t\t\t\t\ticonList.forEach((i) => {\r\n\t\t\t\t\t\thelper.testFontLoad(i.font, i.content, context);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = iconList;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcallback(icon, context);\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\r\n\t/**\r\n\t * core modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.core\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDrawGrid\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {\r\n\t\tisDef,\r\n\t\tbrowser,\r\n\t\tisDescendantElement,\r\n\t\tarray,\r\n\t\tisPromise,\r\n\t\tevent: {\r\n\t\t\tisTouchEvent,\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tcancel: cancelEvent,\r\n\t\t}\r\n\t} = require('../internal/utils');\r\n\t\r\n\tconst EventTarget = require('./EventTarget');\r\n\tconst Rect = require('../internal/Rect');\r\n\tconst Scrollable = require('../internal/Scrollable');\r\n\tconst EventHandler = require('../internal/EventHandler');\r\n\tconst NumberMap = require('../internal/NumberMap');\r\n\tconst style = require('../internal/style');\r\n\tconst calc = require('../internal/calc');\r\n\tconst hiDPI = require('../internal/hiDPI');\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('../internal/symbolManager');\r\n\r\n\tfunction createRootElement() {\r\n\t\tconst element = document.createElement('div');\r\n\t\telement.classList.add('cheetah-grid');\r\n\t\treturn element;\r\n\t}\r\n\r\n\tconst KEY_END = 35;\r\n\tconst KEY_HOME = 36;\r\n\tconst KEY_LEFT = 37;\r\n\tconst KEY_UP = 38;\r\n\tconst KEY_RIGHT = 39;\r\n\tconst KEY_DOWN = 40;\r\n\tconst KEY_ALPHA_C = 67;\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCLICK_CELL: 'click_cell',\r\n\t\tDBLCLICK_CELL: 'dblclick_cell',\r\n\t\tDBLTAP_CELL: 'dbltap_cell',\r\n\t\tMOUSEDOWN_CELL: 'mousedown_cell',\r\n\t\tMOUSEUP_CELL: 'mouseup_cell',\r\n\t\tSELECTED_CELL: 'selected_cell',\r\n\t\tKEYDOWN: 'keydown',\r\n\t\tMOUSEMOVE_CELL: 'mousemove_cell',\r\n\t\tMOUSEENTER_CELL: 'mouseenter_cell',\r\n\t\tMOUSELEAVE_CELL: 'mouseleave_cell',\r\n\t\tMOUSEOVER_CELL: 'mouseover_cell',\r\n\t\tMOUSEOUT_CELL: 'mouseout_cell',\r\n\t\tINPUT_CELL: 'input_cell',\r\n\t\tEDITABLEINPUT_CELL: 'editableinput_cell',\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL: 'modify_status_editableinput_cell',\r\n\t\tRESIZE_COLUMN: 'resize_column',\r\n\t\tSCROLL: 'scroll',\r\n\t};\r\n\r\n\t//private methods\r\n\tfunction _vibrate(e) {\r\n\t\tif (navigator.vibrate && isTouchEvent(e)) {\r\n\t\t\tnavigator.vibrate(300);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetRowAt(grid, absoluteY) {\r\n\t\tconst internal = grid.getTargetRowAtInternal(absoluteY);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst findBefore = (startRow, startBottom) => {\r\n\t\t\tlet bottom = startBottom;\r\n\t\t\tfor (let row = startRow; row >= 0; row--) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst top = bottom - height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tbottom = top;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst findAfter = (startRow, startBottom) => {\r\n\t\t\tlet top = startBottom - _getRowHeight(grid, startRow);\r\n\t\t\tconst rowCount = grid[_].rowCount;\r\n\t\t\tfor (let row = startRow; row < rowCount; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst bottom = top + height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\ttop = bottom;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst candRow = Math.min(Math.ceil(absoluteY / grid[_].defaultRowHeight), grid.rowCount - 1);\r\n\t\tconst bottom = _getRowsHeight(grid, 0, candRow);\r\n\t\tif (absoluteY >= bottom) {\r\n\t\t\treturn findAfter(candRow, bottom);\r\n\t\t} else {\r\n\t\t\treturn findBefore(candRow, bottom);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetColAt(grid, absoluteX) {\r\n\t\tlet left = 0;\r\n\t\tconst colCount = grid[_].colCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet top = grid[_].scroll.top;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\tconst bottom = top + height;\r\n\t\t\tif (bottom > absoluteY) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop,\r\n\t\t\t\t\trow,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\ttop = bottom;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet left = grid[_].scroll.left;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getFrozenRowsRect(grid) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst top = grid[_].scroll.top;\r\n\t\tlet height = 0;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\theight += _getRowHeight(grid, row);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\ttop,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\theight\r\n\t\t);\r\n\t}\r\n\tfunction _getFrozenColsRect(grid) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst left = grid[_].scroll.left;\r\n\t\tlet width = 0;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\twidth += _getColWidth(grid, col);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tleft,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\twidth,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _isCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn !!grid[_].drawCells[row][col];\r\n\t}\r\n\tfunction _putCellDrawing(grid, col, row, context) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\tgrid[_].drawCells[row] = {};\r\n\t\t}\r\n\t\tgrid[_].drawCells[row][col] = context;\r\n\t}\r\n\tfunction _removeCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdelete grid[_].drawCells[row][col];\r\n\t\tif (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n\t\t\tdelete grid[_].drawCells[row];\r\n\t\t}\r\n\t}\r\n\tfunction _drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\tskipAbsoluteTop, skipAbsoluteLeft) {\r\n\t\tconst rect = new Rect(\r\n\t\t\t\tabsoluteLeft - visibleRect.left,\r\n\t\t\t\tabsoluteTop - visibleRect.top,\r\n\t\t\t\twidth,\r\n\t\t\t\theight\r\n\t\t);\r\n\r\n\t\tconst drawRect = Rect.bounds(\r\n\t\t\t\tMath.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left,\r\n\t\t\t\tMath.max(absoluteTop, skipAbsoluteTop) - visibleRect.top,\r\n\t\t\t\trect.right,\r\n\t\t\t\trect.bottom\r\n\t\t);\r\n\r\n\t\tif (drawRect.height > 0 && drawRect.width > 0) {\r\n\t\t\tctx.save();\r\n\t\t\tconst dcContext = new DrawCellContext(\r\n\t\t\t\t\tcol, row,\r\n\t\t\t\t\tctx, rect, drawRect,\r\n\t\t\t\t\t_isCellDrawing(grid, col, row),\r\n\t\t\t\t\tgrid[_].selection\r\n\t\t\t);\r\n\t\t\tconst p = grid.onDrawCell(col, row, dcContext);\r\n\t\t\tif (isPromise(p)) {\r\n\t\t\t\t//\r\n\t\t\t\t_putCellDrawing(grid, col, row, dcContext);\r\n\r\n\t\t\t\tconst pCol = col;\r\n\t\t\t\tdcContext._delayMode(grid, () => {\r\n\t\t\t\t\t_removeCellDrawing(grid, pCol, row);\r\n\t\t\t\t});\r\n\t\t\t\tp.then(() => {\r\n\t\t\t\t\tdcContext.terminate();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _drawRow(grid, ctx, initFrozenCol, initCol,\r\n\t\t\tdrawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop) {\r\n\t\tconst colCount = grid[_].colCount;\r\n\t\tconst drawOuter = (col, absoluteLeft) => {\r\n\t\t\t//\r\n\t\t\tif (col >= (colCount - 1) && grid[_].canvas.width > (absoluteLeft - visibleRect.left)) {\r\n\t\t\t\tconst outerLeft = absoluteLeft - visibleRect.left;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteLeft = 0;\r\n\t\tif (initFrozenCol) {\r\n\t\t\tlet absoluteLeft = initFrozenCol.left;\r\n\t\t\tconst count = grid[_].frozenColCount;\r\n\t\t\tfor (let col = initFrozenCol.col; col < count; col++) {\r\n\t\t\t\tconst width = _getColWidth(grid, col);\r\n\r\n\t\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\t\tskipAbsoluteTop, 0);\r\n\t\t\t\t\t\r\n\t\t\t\tabsoluteLeft += width;\r\n\t\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteLeft = absoluteLeft;\r\n\t\t}\r\n\r\n\t\tlet absoluteLeft = initCol.left;\r\n\t\tfor (let col = initCol.col; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\tskipAbsoluteTop, skipAbsoluteLeft);\r\n\r\n\t\t\tabsoluteLeft += width;\r\n\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(colCount - 1, absoluteLeft);\r\n\r\n\t}\r\n\tfunction _invalidateRect(grid, drawRect) {\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tconst rowCount = grid[_].rowCount;\r\n\t\tconst ctx = grid._getInitContext();\r\n\r\n\t\tconst initRow = _getTargetRowAt(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n\t\t\ttop: _getRowsHeight(grid, 0, rowCount - 1),\r\n\t\t\trow: rowCount\r\n\t\t};\r\n\t\tconst initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n\t\t\tleft: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n\t\t\tcol: grid[_].colCount\r\n\t\t};\r\n\t\tconst drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n\t\tconst drawRight = Math.min(visibleRect.right, drawRect.right);\r\n\r\n\t\tconst initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n\t\tconst initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n\r\n\r\n\t\tconst drawOuter = (row, absoluteTop) => {\r\n\t\t\t//\r\n\t\t\tif (row >= (rowCount - 1) && grid[_].canvas.height > (absoluteTop - visibleRect.top)) {\r\n\t\t\t\tconst outerTop = absoluteTop - visibleRect.top;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteTop = 0;\r\n\t\tif (initFrozenRow) {\r\n\t\t\tlet absoluteTop = initFrozenRow.top;\r\n\t\t\tconst count = grid[_].frozenRowCount;\r\n\t\t\tfor (let row = initFrozenRow.row; row < count; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t_drawRow(grid,\r\n\t\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\t\trow, absoluteTop, height, visibleRect, 0\r\n\t\t\t\t);\r\n\t\t\t\tabsoluteTop += height;\r\n\t\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteTop = absoluteTop;\r\n\t\t}\r\n\r\n\t\tlet absoluteTop = initRow.top;\r\n\t\tfor (let row = initRow.row; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t\r\n\t\t\t//\r\n\t\t\t_drawRow(grid,\r\n\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\trow, absoluteTop, height, visibleRect, skipAbsoluteTop\r\n\t\t\t);\r\n\r\n\t\t\tabsoluteTop += height;\r\n\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(rowCount - 1, absoluteTop);\r\n\r\n\t}\r\n\r\n\tfunction _toPxWidth(grid, width) {\r\n\t\treturn Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n\t}\r\n\r\n\tfunction _getDefaultColPxWidth(grid) {\r\n\t\treturn _toPxWidth(grid, grid.defaultColWidth);\r\n\t}\r\n\r\n\tfunction _adjustColWidth(grid, col, orgWidth) {\r\n\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\tif (!limit) {\r\n\t\t\treturn orgWidth;\r\n\t\t}\r\n\t\t\r\n\t\tif (limit.min) {\r\n\t\t\tconst min = _toPxWidth(grid, limit.min);\r\n\t\t\tif (min > orgWidth) {\r\n\t\t\t\treturn min;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (limit.max) {\r\n\t\t\tconst max = _toPxWidth(grid, limit.max);\r\n\t\t\tif (max < orgWidth) {\r\n\t\t\t\treturn max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn orgWidth;\r\n\t}\r\n\r\n\tfunction _getColWidth(grid, col) {\r\n\t\tconst width = grid[_].colWidthsMap.get(col);\r\n\t\tif (width) {\r\n\t\t\treturn _adjustColWidth(grid, col, _toPxWidth(grid, width));\r\n\t\t}\r\n\t\treturn _getDefaultColPxWidth(grid);\r\n\t}\r\n\tfunction _setColWidth(grid, col, width) {\r\n\t\tgrid[_].colWidthsMap.put(col, width);\r\n\t}\r\n\tfunction _getColsWidth(grid, startCol, endCol) {\r\n\t\tconst colCount = endCol - startCol + 1;\r\n\t\tlet w = _getDefaultColPxWidth(grid) * colCount;\r\n\t\tgrid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\r\n\tfunction _getRowHeight(grid, row) {\r\n\t\tconst internal = grid.getRowHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst height = grid[_].rowHeightsMap.get(row);\r\n\t\tif (height) {\r\n\t\t\treturn height;\r\n\t\t}\r\n\t\treturn grid[_].defaultRowHeight;\r\n\t}\r\n\tfunction _setRowHeight(grid, row, height) {\r\n\t\tgrid[_].rowHeightsMap.put(row, height);\r\n\t}\r\n\tfunction _getRowsHeight(grid, startRow, endRow) {\r\n\t\tconst internal = grid.getRowsHeightInternal(startRow, endRow);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst rowCount = endRow - startRow + 1;\r\n\t\tlet h = grid[_].defaultRowHeight * rowCount;\r\n\t\tgrid[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\r\n\tfunction _getScrollWidth(grid) {\r\n\t\tlet w = _getDefaultColPxWidth(grid) * grid[_].colCount;\r\n\t\tgrid[_].colWidthsMap.eachAll((width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\tfunction _getScrollHeight(grid, row) {\r\n\t\tconst internal = grid.getScrollHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tlet h = grid[_].defaultRowHeight * grid[_].rowCount;\r\n\t\tgrid[_].rowHeightsMap.eachAll((height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\tfunction _onScroll(grid, e) {\r\n\t\tconst lastLeft = grid[_].scroll.left;\r\n\t\tconst lastTop = grid[_].scroll.top;\r\n\t\tconst moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n\t\tconst moveY = grid[_].scrollable.scrollTop - lastTop;\r\n\r\n\t\t//\r\n\t\tgrid[_].scroll = {\r\n\t\t\tleft: grid[_].scrollable.scrollLeft,\r\n\t\t\ttop: grid[_].scrollable.scrollTop,\r\n\t\t};\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tif ((Math.abs(moveX) >= visibleRect.width) || (Math.abs(moveY) >= visibleRect.height)) {\r\n\t\t\t//\r\n\t\t\t_invalidateRect(grid, visibleRect);\r\n\t\t} else {\r\n\t\t\t//\r\n\t\t\tgrid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n\r\n\t\t\t\t\r\n\t\t\tif (moveX !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveX < 0) {\r\n\t\t\t\t\tredrawRect.width = -moveX;\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\t\t\t\tredrawRect.width += frozenRect.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveX > 0) {\r\n\t\t\t\t\tredrawRect.left = redrawRect.right - moveX;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveX > 0) {\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenColsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (moveY !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveY < 0) {\r\n\t\t\t\t\tredrawRect.height = -moveY;\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\t\t\t\tredrawRect.height += frozenRect.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveY > 0) {\r\n\t\t\t\t\tredrawRect.top = redrawRect.bottom - moveY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveY > 0) {\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenRowsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _onKeyDownMove(grid, e) {\r\n\t\tconst shiftKey = e.shiftKey;\r\n\t\tconst keyCode = getKeyCode(e);\r\n\t\tconst focusCell = shiftKey ? grid.selection._focus : grid.selection._sel;\r\n\t\tif (keyCode === KEY_LEFT) {\r\n\t\t\tconst col = grid.getMoveLeftColByKeyDownInternal(focusCell);\r\n\t\t\tif (col < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\tconst row = grid.getMoveUpRowByKeyDownInternal(focusCell);\r\n\t\t\tif (row < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_RIGHT) {\r\n\t\t\tconst col = grid.getMoveRightColByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.colCount <= col) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\tconst row = grid.getMoveDownRowByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.rowCount <= row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_HOME) {\r\n\t\t\tconst row = e.ctrlKey ? 0 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, 0, row, e.shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_END) {\r\n\t\t\tconst row = e.ctrlKey ? grid.rowCount - 1 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, grid.colCount - 1, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t}\r\n\tfunction _moveFocusCell(grid, col, row, shiftKey) {\r\n\t\tconst offset = grid.getOffsetInvalidateCells();\r\n\r\n\t\tfunction extendRange(range) {\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\trange.start.col -= offset;\r\n\t\t\t\trange.start.row -= offset;\r\n\t\t\t\trange.end.col += offset;\r\n\t\t\t\trange.end.row += offset;\r\n\t\t\t}\r\n\t\t\treturn range;\r\n\t\t}\r\n\r\n\t\tconst beforeRange = extendRange(grid.selection.range);\r\n\t\tconst beforeRect = grid.getCellsRect(\r\n\t\t\t\tbeforeRange.start.col, beforeRange.start.row,\r\n\t\t\t\tbeforeRange.end.col, beforeRange.end.row\r\n\t\t);\r\n\r\n\t\tgrid.selection._setFocusCell(col, row, shiftKey);\r\n\t\tgrid.makeVisibleCell(col, row);\r\n\t\tgrid.focusCell(col, row);\r\n\t\t\t\r\n\t\tconst afterRange = extendRange(grid.selection.range);\r\n\t\tconst afterRect = grid.getCellsRect(\r\n\t\t\t\tafterRange.start.col, afterRange.start.row,\r\n\t\t\t\tafterRange.end.col, afterRange.end.row\r\n\t\t);\r\n\r\n\t\tif (afterRect.intersection(beforeRect)) {\r\n\t\t\tconst invalidateRect = Rect.max(afterRect, beforeRect);\r\n\t\t\t_invalidateRect(grid, invalidateRect);\r\n\t\t} else {\r\n\t\t\t_invalidateRect(grid, beforeRect);\r\n\t\t\t_invalidateRect(grid, afterRect);\r\n\t\t}\r\n\t}\r\n\tfunction _getMouseAbstractPoint(grid, e) {\r\n\t\tif (isTouchEvent(e)) {\r\n\t\t\te = e.changedTouches[0];\r\n\t\t}\r\n\t\tconst clientX = e.clientX || (e.pageX + window.scrollX);\r\n\t\tconst clientY = e.clientY || (e.pageY + window.scrollY);\r\n\t\tconst rect = grid[_].canvas.getBoundingClientRect();\r\n\t\tif (rect.right <= clientX) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (rect.bottom <= clientY) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst x = clientX - rect.left + grid[_].scroll.left;\r\n\t\tconst y = clientY - rect.top + grid[_].scroll.top;\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tfunction _bindEvents(grid) {\r\n\t\tconst getCellEventArgsSet = (e) => {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t\tconst cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tabstractPos,\r\n\t\t\t\t\tcell\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst eventArgs = {\r\n\t\t\t\tcol: cell.col,\r\n\t\t\t\trow: cell.row,\r\n\t\t\t\tevent: e,\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tabstractPos,\r\n\t\t\t\tcell,\r\n\t\t\t\teventArgs\r\n\t\t\t};\r\n\t\t};\r\n\t\tconst canResizeColumn = (col) => {\r\n\t\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\t\tif (!limit || !limit.min || !limit.max) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn limit.max !== limit.min;\r\n\t\t};\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousedown', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst results = grid.fireListeners(EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n\t\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t} else {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet doubleTapBefore = false;\r\n\t\tlet longTouchId = null;\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchstart', (e) => {\r\n\t\t\r\n\t\t\tif (!doubleTapBefore) {\r\n\t\t\t\tdoubleTapBefore = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdoubleTapBefore = false;\r\n\t\t\t\t}, 350);\r\n\t\t\t} else {\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\t\tif (eventArgs) {\r\n\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.DBLTAP_CELL, cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdoubleTapBefore = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlongTouchId = setTimeout(() => {\r\n\t\t\t\t//\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\t\tif (!abstractPos) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n\t\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t\t}\r\n\t\t\t}, 500);\r\n\t\t});\r\n\r\n\t\tfunction cancel(e) {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchcancel', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchmove', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchend', (e) => {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tgrid[_].cellSelector.select(e);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet isMouseover = false;\r\n\t\tlet mouseEnterCell = null;\r\n\t\tlet mouseOverCell = null;\r\n\t\tfunction onMouseenterCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEENTER_CELL, cell);\r\n\t\t\tmouseEnterCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseleaveCell() {\r\n\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\tmouseEnterCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSELEAVE_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction onMouseoverCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOVER_CELL, cell);\r\n\t\t\tmouseOverCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseoutCell() {\r\n\t\t\tconst beforeMouseCell = mouseOverCell;\r\n\t\t\tmouseOverCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOUT_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst scrollElement = grid[_].scrollable.getElement();\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseover', (e) => {\r\n\t\t\tisMouseover = true;\r\n\t\t});\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseout', (e) => {\r\n\t\t\tisMouseover = false;\r\n\t\t\tonMouseoutCell();\r\n\t\t});\r\n\r\n\t\tgrid[_].handler.on(grid[_].element, 'mouseleave', (e) => {\r\n\t\t\tonMouseleaveCell();\r\n\t\t});\r\n\t\t\t\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousemove', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\t\tif (beforeMouseCell) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t\tif (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\r\n\t\t\t\t\t\tonMouseoutCell();\r\n\t\t\t\t\t\tonMouseleaveCell();\r\n\t\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (isMouseover && !mouseOverCell) {\r\n\t\t\t\t\t\tonMouseoverCell({\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tonMouseoutCell();\r\n\t\t\t\tonMouseleaveCell();\r\n\t\t\t}\r\n\t\t\tif (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst style = grid[_].element.style;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\tstyle.cursor = 'col-resize';\r\n\t\t\t} else {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'click', (e) => {\r\n\t\t\tif (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.CLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.CLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'dblclick', (e) => {\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.DBLCLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].focusControl.listen('keydown', (keyCode, e) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.KEYDOWN, keyCode, e);\r\n\t\t});\r\n\t\tgrid[_].selection.listen(EVENT_TYPE.SELECTED_CELL, (data) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SELECTED_CELL, {\r\n\t\t\t\tcol: data.col,\r\n\t\t\t\trow: data.row,\r\n\t\t\t}, data.selected);\r\n\t\t});\r\n\r\n\t\tgrid[_].scrollable.onScroll((e) => {\r\n\t\t\t_onScroll(grid, e);\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SCROLL, {event: e});\r\n\t\t});\r\n\t\tgrid[_].focusControl.onKeyDownMove((e) => {\r\n\t\t\t_onKeyDownMove(grid, e);\r\n\t\t});\r\n\t\tgrid.listen('copydata', (range) => {\r\n\t\t\tlet copyValue = '';\r\n\t\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\r\n\t\t\t\tfor (let col = range.start.col; col <= range.end.col; col++) {\r\n\t\t\t\t\tconst copyCellValue = grid.getCopyCellValue(col, row);\r\n\t\t\t\t\tif (window.Promise && copyCellValue instanceof window.Promise) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst strCellValue = '' + copyCellValue;\r\n\t\t\t\t\t\tif (strCellValue.match(/^\\[object .*\\]$/)) {\r\n\t\t\t\t\t\t\t//object \r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcopyValue += strCellValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif (col < range.end.col) {\r\n\t\t\t\t\t\tcopyValue += '\\t';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopyValue += '\\n';\r\n\t\t\t}\r\n\t\t\treturn copyValue;\r\n\t\t});\r\n\t\tgrid[_].focusControl.onCopy((e) => array.find(grid.fireListeners('copydata', grid[_].selection.range), isDef));\r\n\t\tgrid[_].focusControl.onInput((value) => {\r\n\t\t\tconst {col, row} = grid[_].selection.select;\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.INPUT_CELL, {col, row, value});\r\n\t\t});\r\n\t\tgrid.bindEventsInternal();\r\n\t}\r\n\r\n\tfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n\t\tif (grid[_].frozenRowCount <= 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\tif (!frozenRect.inPoint(abstractX, abstractY)) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst cell = grid.getCellAt(abstractX, abstractY);\r\n\t\tconst cellRect = grid.getCellRect(cell.col, cell.row);\r\n\t\tif (abstractX < cellRect.left + offset) {\r\n\t\t\treturn cell.col - 1;\r\n\t\t}\r\n\t\tif (cellRect.right - offset < abstractX) {\r\n\t\t\treturn cell.col;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfunction _getVisibleRect(grid) {\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _getScrollableVisibleRect(grid) {\r\n\t\tlet frozenColsWidth = 0;\r\n\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\tfrozenColsWidth = frozenRect.width;\r\n\t\t}\r\n\t\tlet frozenRowsHeight = 0;\r\n\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\tfrozenRowsHeight = frozenRect.height;\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left + frozenColsWidth,\r\n\t\t\t\tgrid[_].scroll.top + frozenRowsHeight,\r\n\t\t\t\tgrid[_].canvas.width - frozenColsWidth,\r\n\t\t\t\tgrid[_].canvas.height - frozenRowsHeight\r\n\t\t);\r\n\t}\r\n\r\n\tfunction _toRelativeRect(grid, absoluteRect) {\r\n\t\tconst rect = absoluteRect.copy();\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\trect.offsetLeft(-visibleRect.left);\r\n\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\treturn rect;\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\t/**\r\n\t * managing mouse down moving\r\n\t * @private\r\n\t */\r\n\tclass BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._events = {};\r\n\t\t\tthis._started = false;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\tmoving(e) {\r\n\t\t\treturn !!this._started;\r\n\t\t}\r\n\t\tlastMoving(e) {\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this.moving(e)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst last = this._mouseEndPoint;\r\n\t\t\tif (!last) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst pt = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\treturn pt.x === last.x && pt.y === last.y;\r\n\t\t}\r\n\t\t_bindMoveAndUp(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tthis._events.mousemove = this._handler.on(document.body, 'mousemove', (e) => this._mouseMove(e));\r\n\t\t\t\tthis._events.mouseup = this._handler.on(document.body, 'mouseup', (e) => this._mouseUp(e));\r\n\t\t\t} else {\r\n\t\t\t\tthis._events.touchmove = this._handler.on(document.body, 'touchmove', (e) => this._mouseMove(e), {passive: false});\r\n\t\t\t\tthis._events.touchend = this._handler.on(document.body, 'touchend', (e) => this._mouseUp(e));\r\n\t\t\t\tthis._events.touchcancel = this._handler.on(document.body, 'touchcancel', (e) => this._mouseUp(e));\r\n\t\t\t}\r\n\t\t\tthis._started = true;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\t_mouseMove(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\t\tthis._mouseUp(e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._moved = this._moveInternal(e) || this._moved/*calculation on after*/;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\t_mouseUp(e) {\r\n\t\t\tthis._handler.off(this._events.mousemove);\r\n\t\t\tthis._handler.off(this._events.touchmove);\r\n\t\t\tthis._handler.off(this._events.mouseup);\r\n\t\t\tthis._handler.off(this._events.touchend);\r\n\t\t\t// this._handler.off(this._events.mouseleave);\r\n\t\t\tthis._handler.off(this._events.touchcancel);\r\n\r\n\t\t\tthis._started = false;\r\n\r\n\t\t\tthis._upInternal(e);\r\n\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this._moved) { //\r\n\t\t\t\tthis._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis._mouseEndPoint = null;\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * managing cell selection operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass CellSelector extends BaseMouseDownMover {\r\n\t\tstart(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._cell = cell;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\tselect(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\t\t\tthis._cell = cell;\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell || (this._cell.col === cell.col && this._cell.row === cell.row)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, true);\r\n\r\n\t\t\t//make visible\r\n\t\t\tconst makeVisibleCol = (() => {\r\n\t\t\t\tif (cell.col < this._cell.col && 0 < cell.col) {\r\n\t\t\t\t\t// move left\r\n\t\t\t\t\treturn cell.col - 1;\r\n\t\t\t\t} else if (this._cell.col < cell.col && cell.col + 1 < this._grid.colCount) {\r\n\t\t\t\t\t// move right\r\n\t\t\t\t\treturn cell.col + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.col;\r\n\t\t\t})();\r\n\t\t\tconst makeVisibleRow = (() => {\r\n\t\t\t\tif (cell.row < this._cell.row && 0 < cell.row) {\r\n\t\t\t\t\t// move up\r\n\t\t\t\t\treturn cell.row - 1;\r\n\t\t\t\t} else if (this._cell.row < cell.row && cell.row + 1 < this._grid.rowCount) {\r\n\t\t\t\t\t// move down\r\n\t\t\t\t\treturn cell.row + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.row;\r\n\t\t\t})();\r\n\t\t\tif (makeVisibleCol !== cell.col || makeVisibleRow !== cell.row) {\r\n\t\t\t\tthis._grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n\t\t\t}\r\n\t\t\tthis._cell = cell;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_getTargetCell(e) {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst cell = this._grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * managing row width changing operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass ColumnResizer extends BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper(grid);\r\n\t\t\tthis._targetCol = -1;\r\n\t\t}\r\n\t\tstart(col, e) {\r\n\t\t\tlet pageX;\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tpageX = e.pageX;\r\n\t\t\t} else {\r\n\t\t\t\tpageX = e.changedTouches[0].pageX;\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = pageX;\r\n\t\t\tthis._preX = 0;\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._targetCol = col;\r\n\t\t\tthis._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n\r\n\t\t\tconst x = pageX - this._x;\r\n\t\t\tconst moveX = x - this._preX;\r\n\t\t\tthis._preX = x;\r\n\t\t\tconst pre = this._grid.getColWidth(this._targetCol);\r\n\t\t\tlet afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n\t\t\tif (afterSize < 10 && moveX < 0) {\r\n\t\t\t\tafterSize = 10;\r\n\t\t\t}\r\n\t\t\t_setColWidth(this._grid, this._targetCol, afterSize);\r\n\r\n\t\t\tconst rect = _getVisibleRect(this._grid);\r\n\t\t\trect.left = this._invalidateAbsoluteLeft;\r\n\t\t\t_invalidateRect(this._grid, rect);\r\n\r\n\t\t\tthis._grid.fireListeners(EVENT_TYPE.RESIZE_COLUMN, {col: this._targetCol});\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\tthis._grid.updateScroll();\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setSafeInputValue(input, value) {\r\n\t\tconst type = input.type;\r\n\t\tinput.type = '';\r\n\t\tinput.value = value;\r\n\t\tif (type) {\r\n\t\t\tinput.type = type;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Manage focus\r\n\t * @private\r\n\t */\r\n\tclass FocusControl extends EventTarget {\r\n\t\tconstructor(grid, parentElement, scrollable) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._scrollable = scrollable;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._input = document.createElement('input');\r\n\t\t\tthis._input.classList.add('grid-focus-control');\r\n\t\t\tthis._input.readOnly = true;\r\n\t\t\tparentElement.appendChild(this._input);\r\n\r\n\t\t\tthis._handler.on(this._input, 'compositionstart', (e) => {\r\n\t\t\t\tthis._input.classList.add('composition');\r\n\t\t\t\tthis._isComposition = true;\r\n\t\t\t\tgrid.focus();\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'compositionend', (e) => {\r\n\t\t\t\tthis._isComposition = false;\r\n\t\t\t\tthis._input.classList.remove('composition');\r\n\t\t\t\tif (!this._input.readOnly) {\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keypress', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._input.readOnly && e.key && e.key.length === 1) {\r\n\t\t\t\t\tif (e.key === 'c' && (e.ctrlKey || e.metaKey)) {\r\n\t\t\t\t\t\t//copy! for Firefox\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.fireListeners('input', e.key);\r\n\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tthis.fireListeners('keydown', keyCode, e);\r\n\r\n\t\t\t\tif (this._input.value) {\r\n\t\t\t\t\t// for Safari\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(document, 'keydown', (e) => {\r\n\t\t\t\tif (!browser.IE) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.target !== this._input) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n\t\t\t\t\tsetSafeInputValue(this._input, 'dummy');\r\n\t\t\t\t\tthis._input.select();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._handler.on(document, 'copy', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!isDescendantElement(parentElement, e.target)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\tconst data = array.find(this.fireListeners('copy'), isDef);\r\n\t\t\t\tif (isDef(data)) {\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\tif (browser.IE) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', data); // IE\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', data); // Chrome, Firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonKeyDownMove(fn) {\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_LEFT ||\r\n\t\t\t\t\tkeyCode === KEY_UP ||\r\n\t\t\t\t\tkeyCode === KEY_RIGHT ||\r\n\t\t\t\t\tkeyCode === KEY_DOWN ||\r\n\t\t\t\t\tkeyCode === KEY_HOME ||\r\n\t\t\t\t\tkeyCode === KEY_END\r\n\t\t\t\t) {\r\n\t\t\t\t\tfn(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonInput(fn) {\r\n\t\t\treturn this.listen('input', fn);\r\n\t\t}\r\n\t\tonCopy(fn) {\r\n\t\t\treturn this.listen('copy', fn);\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\t// this._input.value = '';\r\n\t\t\tthis._input.focus();\r\n\t\t}\r\n\t\tsetFocusRect(rect) {\r\n\t\t\tconst top = this._scrollable.calcTop(rect.top);\r\n\t\t\tthis._input.style.top = (top - style.getScrollBarSize()).toFixed() + 'px';//position:relative IE position:relative\r\n\t\t\tthis._input.style.left = rect.left.toFixed() + 'px';\r\n\t\t\tthis._input.style.width = rect.width.toFixed() + 'px';\r\n\t\t\tthis._input.style.height = rect.height.toFixed() + 'px';\r\n\t\t}\r\n\t\tset editMode(editMode) {\r\n\t\t\tthis._input.readOnly = !editMode;\r\n\t\t}\r\n\t\tresetInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tconst composition = el.classList.contains('composition');\r\n\t\t\t\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tconst removeNames = [];\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tif (!this._inputStatus.hasOwnProperty(att.nodeName)) {\r\n\t\t\t\t\tremoveNames.push(att.name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tremoveNames.forEach((removeName) => {\r\n\t\t\t\tel.removeAttribute(removeName);\r\n\t\t\t});\r\n\t\t\tfor (const name in this._inputStatus) {\r\n\t\t\t\tel.setAttribute(name, this._inputStatus[name]);\r\n\t\t\t}\r\n\t\t\tif (composition) {\r\n\t\t\t\tel.classList.add('composition');\r\n\t\t\t} else {\r\n\t\t\t\tel.classList.remove('composition');\r\n\t\t\t}\r\n\t\t}\r\n\t\tstoreInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tthis._inputStatus = {};\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tthis._inputStatus[att.name] = att.value;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDefaultInputStatus() {\r\n\t\t\tthis._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t}\r\n\t\tget editMode() {\r\n\t\t\treturn !this._input.readOnly;\r\n\t\t}\r\n\t\tget input() {\r\n\t\t\treturn this._input;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Selected area management\r\n\t */\r\n\tclass Selection extends EventTarget {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\r\n\t\t\tthis._sel = {col: 0, row: 0};\r\n\t\t\tthis._focus = {col: 0, row: 0};\r\n\t\t\t\r\n\t\t\tthis._start = {col: 0, row: 0};\r\n\t\t\tthis._end = {col: 0, row: 0};\r\n\t\t}\r\n\t\tget range() {\r\n\t\t\tconst startCol = Math.min(this._start.col, this._end.col);\r\n\t\t\tconst startRow = Math.min(this._start.row, this._end.row);\r\n\t\t\tconst endCol = Math.max(this._start.col, this._end.col);\r\n\t\t\tconst endRow = Math.max(this._start.row, this._end.row);\r\n\t\t\treturn {\r\n\t\t\t\tstart: {\r\n\t\t\t\t\tcol: startCol,\r\n\t\t\t\t\trow: startRow,\r\n\t\t\t\t},\r\n\t\t\t\tend: {\r\n\t\t\t\t\tcol: endCol,\r\n\t\t\t\t\trow: endRow,\r\n\t\t\t\t},\r\n\t\t\t\tinCell(col, row) {\r\n\t\t\t\t\treturn startCol <= col && col <= endCol &&\r\n\t\t\t\t\t\tstartRow <= row && row <= endRow;\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\tget select() {\r\n\t\t\treturn {\r\n\t\t\t\tcol: this._sel.col,\r\n\t\t\t\trow: this._sel.row\r\n\t\t\t};\r\n\t\t}\r\n\t\tset select(cell = {}) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcol = 0,\r\n\t\t\t\t\trow = 0\r\n\t\t\t\t} = cell;\r\n\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\tthis._setFocusCell(col, row, true);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setSelectCell(col, row) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tthis._sel = {col, row};\r\n\t\t\t\tthis._start = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setFocusCell(col, row, keepSelect) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tif (!keepSelect) {\r\n\t\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\t}\r\n\t\t\t\tthis._focus = {col, row};\r\n\t\t\t\tthis._end = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_wrapFireSelectedEvent(callback) {\r\n\t\t\tif (this._isWraped) {\r\n\t\t\t\tcallback();\r\n\t\t\t} else {\r\n\t\t\t\tthis._isWraped = true;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst before = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: false,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, before);\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: true\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis._isWraped = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Context of cell drawing\r\n\t */\r\n\tclass DrawCellContext {\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tconstructor(col, row, ctx, rect, drawRect, drawing, selection) {\r\n\t\t\tthis._col = col;\r\n\t\t\tthis._row = row;\r\n\t\t\tthis._mode = 0;\r\n\t\t\tthis._ctx = ctx;\r\n\t\t\tthis._rect = rect;\r\n\t\t\tthis._drawRect = drawRect;\r\n\t\t\tthis._drawing = drawing;\r\n\t\t\tthis._selection = selection;\r\n\t\t}\r\n\t\tget drawing() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawing;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tget row() {\r\n\t\t\treturn this._row;\r\n\t\t}\r\n\t\tget col() {\r\n\t\t\treturn this._col;\r\n\t\t}\r\n\t\t/**\r\n\t\t * select status.\r\n\t\t * @return {object} select status\r\n\t\t */\r\n\t\tgetSelectState() {\r\n\t\t\tconst sel = this._selection.select;\r\n\t\t\treturn {\r\n\t\t\t\tselected: sel.col === this._col && sel.row === this._row,\r\n\t\t\t\tselection: this._selection.range.inCell(this._col, this._row),\r\n\t\t\t};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Canvas context.\r\n\t\t * @return {CanvasRenderingContext2D} Canvas context.\r\n\t\t */\r\n\t\tgetContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._ctx;\r\n\t\t\t} else {\r\n\t\t\t\treturn this._grid._getInitContext();\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of cell.\r\n\t\t * @return {Rect} rect Rectangle of cell.\r\n\t\t */\r\n\t\tgetRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._rect;\r\n\t\t\t} else {\r\n\t\t\t\tif (this._rect) {\r\n\t\t\t\t\treturn this._rect;\r\n\t\t\t\t}\r\n\t\t\t\treturn this._grid.getCellRelativeRect(this._col, this._row);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetRect(rect) {\r\n\t\t\tthis._rect = rect;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of Drawing range.\r\n\t\t * @return {Rect} Rectangle of Drawing range.\r\n\t\t */\r\n\t\tgetDrawRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawRect;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\treturn this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * get Context of current state\r\n\t\t * @return {DrawCellContext} current DrawCellContext.\r\n\t\t */\r\n\t\ttoCurrentContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\tconst rect = _toRelativeRect(this._grid, absoluteRect);\r\n\t\t\t\tconst drawRect = this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t\tconst context = new DrawCellContext(\r\n\t\t\t\t\t\tthis._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection\r\n\t\t\t\t);\r\n\t\t\t\t// toCurrentContext  toCurrentContext\r\n\t\t\t\tcontext.toCurrentContext = this.toCurrentContext.bind(this);\r\n\t\t\t\treturn context;\r\n\t\t\t}\r\n\t\t}\r\n\t\t_toRelativeDrawRect(absoluteRect) {\r\n\t\t\tconst visibleRect = _getVisibleRect(this._grid);\r\n\t\t\tlet rect = absoluteRect.copy();\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst isFrozenCell = this._grid.isFrozenCell(this._col, this._row);\r\n\t\t\tif (this._grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._grid.frozenColCount - 1, this._row);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\tMath.max(rect.left, fRect.right),\r\n\t\t\t\t\t\trect.top,\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this._grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._col, this._grid.frozenRowCount - 1);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\trect.left,\r\n\t\t\t\t\t\tMath.max(rect.top, fRect.bottom),\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\trect.offsetLeft(-visibleRect.left);\r\n\t\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\t\treturn rect;\r\n\t\t}\r\n\t\t_delayMode(grid, onTerminate) {\r\n\t\t\tthis._mode = 1;\r\n\t\t\tthis._ctx = null;\r\n\t\t\tthis._rect = null;\r\n\t\t\tthis._drawRect = null;\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._onTerminate = onTerminate;\r\n\t\t}\r\n\t\t/**\r\n\t\t * terminate\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tterminate() {\r\n\t\t\tif (this._mode !== 0) {\r\n\t\t\t\tthis._onTerminate();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * DrawGrid\r\n\t * @classdesc cheetahGrid.core.DrawGrid\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.core\r\n\t */\r\n\tclass DrawGrid extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * rowCount: grid row count.default 10\r\n\t\t * colCount: grid col count.default 10\r\n\t\t * frozenColCount: default 0\r\n\t\t * frozenRowCount: default 0\r\n\t\t * defaultRowHeight: default grid row height. default 40\r\n\t\t * defaultColWidth: default grid col width. default 80\r\n\t\t * parentElement: canvas parentElement\r\n\t\t * font: default font\r\n\t\t * underlayBackgroundColor: underlay background color\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\trowCount = 10,\r\n\t\t\t\t\tcolCount = 10,\r\n\t\t\t\t\tfrozenColCount = 0,\r\n\t\t\t\t\tfrozenRowCount = 0,\r\n\t\t\t\t\tdefaultRowHeight = 40,\r\n\t\t\t\t\tdefaultColWidth = 80,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tunderlayBackgroundColor,\r\n\t\t\t\t\tparentElement,\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis[_] = {};\r\n\t\t\tstyle.initDocument();\r\n\t\t\tthis[_].element = createRootElement();\r\n\t\t\tthis[_].scrollable = new Scrollable();\r\n\t\t\tthis[_].handler = new EventHandler();\r\n\t\t\tthis[_].selection = new Selection(this);\r\n\t\t\tthis[_].focusControl = new FocusControl(this, this[_].scrollable.getElement(), this[_].scrollable);\r\n\r\n\t\t\tthis[_].canvas = hiDPI.transform(document.createElement('canvas'));\r\n\t\t\tthis[_].context = this[_].canvas.getContext('2d', {alpha: false});\r\n\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\r\n\t\t\tthis[_].font = font;\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\r\n\t\t\t/////\r\n\t\t\tthis[_].rowHeightsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsLimit = {};\r\n\t\t\tthis[_].calcWidthContext = {\r\n\t\t\t\t_: this[_],\r\n\t\t\t\tget full() {\r\n\t\t\t\t\treturn this._.canvas.width;\r\n\t\t\t\t},\r\n\t\t\t\tget em() {\r\n\t\t\t\t\treturn this._.context.measureText('').width;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis[_].columnResizer = new ColumnResizer(this);\r\n\t\t\tthis[_].cellSelector = new CellSelector(this);\r\n\r\n\t\t\tthis[_].drawCells = {};\r\n\r\n\t\t\tthis[_].element.appendChild(this[_].canvas);\r\n\t\t\tthis[_].element.appendChild(this[_].scrollable.getElement());\r\n\t\t\tthis.updateScroll();\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.appendChild(this[_].element);\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t} else {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t}\r\n\t\t\t_bindEvents(this);\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this[_].element;\r\n\t\t}\r\n\t\tget canvas() {\r\n\t\t\treturn this[_].canvas;\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\tconst {col, row} = this[_].selection.select;\r\n\t\t\tthis.focusCell(col, row);\r\n\t\t}\r\n\t\tget selection() {\r\n\t\t\treturn this[_].selection;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset rowCount(rowCount) {\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget colCount() {\r\n\t\t\treturn this[_].colCount;\r\n\t\t}\r\n\t\tset colCount(colCount) {\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget frozenColCount() {\r\n\t\t\treturn this[_].frozenColCount;\r\n\t\t}\r\n\t\tset frozenColCount(frozenColCount) {\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t}\r\n\t\tget frozenRowCount() {\r\n\t\t\treturn this[_].frozenRowCount;\r\n\t\t}\r\n\t\tset frozenRowCount(frozenRowCount) {\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\t\t}\r\n\t\tget defaultRowHeight() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset defaultRowHeight(defaultRowHeight) {\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget defaultColWidth() {\r\n\t\t\treturn this[_].defaultColWidth;\r\n\t\t}\r\n\t\tset defaultColWidth(defaultColWidth) {\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this[_].font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis[_].font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn this[_].underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tconfigure(name, value) {\r\n\t\t\tconst cfg = this[_].config || (this[_].config = {});\r\n\t\t\tif (isDef(value)) {\r\n\t\t\t\tcfg[name] = value;\r\n\t\t\t}\r\n\t\t\treturn cfg[name];\r\n\t\t}\r\n\t\tupdateSize() {\r\n\t\t\t//\r\n\t\t\tthis[_].canvas.style.width = '';\r\n\t\t\tthis[_].canvas.style.height = '';\r\n\t\t\tconst width = Math.floor(this[_].canvas.offsetWidth ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetWidth - style.getScrollBarSize());\r\n\t\t\tconst height = Math.floor(this[_].canvas.offsetHeight ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetHeight - style.getScrollBarSize());\r\n\r\n\t\t\tthis[_].canvas.width = width;\r\n\t\t\tthis[_].canvas.height = height;\r\n\r\n\t\t\t//style\r\n\t\t\tthis[_].canvas.style.width = `${width}px`;\r\n\t\t\tthis[_].canvas.style.height = `${height}px`;\r\n\r\n\t\t\tconst sel = this[_].selection.select;\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\r\n\t\t}\r\n\t\tupdateScroll() {\r\n\t\t\tthis[_].scrollable.setScrollSize(_getScrollWidth(this), _getScrollHeight(this));\r\n\t\t\tthis[_].scroll = {\r\n\t\t\t\tleft: this[_].scrollable.scrollLeft,\r\n\t\t\t\ttop: this[_].scrollable.scrollTop,\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetRowHeight(row) {\r\n\t\t\treturn _getRowHeight(this, row);\r\n\t\t}\r\n\t\tsetRowHeight(row, height) {\r\n\t\t\t_setRowHeight(this, row, height);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetColWidth(col) {\r\n\t\t\treturn _getColWidth(this, col);\r\n\t\t}\r\n\t\tsetColWidth(col, width) {\r\n\t\t\t_setColWidth(this, col, width);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetMaxColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.max || undefined;\r\n\t\t}\r\n\t\tsetMaxColWidth(col, maxwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.max = maxwidth;\r\n\t\t}\r\n\t\tgetMinColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.min || undefined;\r\n\t\t}\r\n\t\tsetMinColWidth(col, minwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.min = minwidth;\r\n\t\t}\r\n\t\tgetCellRect(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n\t\t\tconst width = _getColWidth(this, col);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col) {\r\n\t\t\t\tabsoluteLeft += this[_].scroll.left;\r\n\t\t\t}\r\n\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, row - 1);\r\n\t\t\tconst height = _getRowHeight(this, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\tabsoluteTop += this[_].scroll.top;\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tgetCellRelativeRect(col, row) {\r\n\t\t\treturn _toRelativeRect(this, this.getCellRect(col, row));\r\n\t\t}\r\n\t\tgetCellsRect(startCol, startRow, endCol, endRow) {\r\n\t\t\tconst isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n\t\t\tconst isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n\t\t\tlet width = _getColsWidth(this, startCol, endCol);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.col) {\r\n\t\t\t\tconst scrollLeft = this[_].scroll.left;\r\n\t\t\t\tabsoluteLeft += scrollLeft;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n\t\t\t\t\twidth -= scrollLeft;\r\n\t\t\t\t\twidth = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, startRow - 1);\r\n\t\t\tlet height = _getRowsHeight(this, startRow, endRow);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.row) {\r\n\t\t\t\tconst scrollTop = this[_].scroll.top;\r\n\t\t\t\tabsoluteTop += scrollTop;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n\t\t\t\t\theight -= scrollTop;\r\n\t\t\t\t\theight = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tisFrozenCell(col, row) {\r\n\t\t\tconst isFrozenRow = this[_].frozenRowCount > 0 && row < this[_].frozenRowCount;\r\n\t\t\tconst isFrozenCol = this[_].frozenColCount > 0 && col < this[_].frozenColCount;\r\n\t\t\tif (isFrozenRow || isFrozenCol) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\trow: isFrozenRow,\r\n\t\t\t\t\tcol: isFrozenCol,\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetRowAt(absoluteY) {\r\n\t\t\tconst frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.row;\r\n\t\t\t}\r\n\t\t\tconst row = _getTargetRowAt(this, absoluteY);\r\n\t\t\treturn row ? row.row : -1;\r\n\r\n\t\t}\r\n\t\tgetColAt(absoluteX) {\r\n\t\t\tconst frozen = _getTargetFrozenColAt(this, absoluteX);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.col;\r\n\t\t\t}\r\n\t\t\tconst col = _getTargetColAt(this, absoluteX);\r\n\t\t\treturn col ? col.col : -1;\r\n\t\t}\r\n\t\tgetCellAt(absoluteX, absoluteY) {\r\n\t\t\treturn {\r\n\t\t\t\trow: this.getRowAt(absoluteY),\r\n\t\t\t\tcol: this.getColAt(absoluteX),\r\n\t\t\t};\r\n\t\t}\r\n\t\tmakeVisibleCell(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = this.getCellRect(col, row);\r\n\t\t\tconst visibleRect = _getScrollableVisibleRect(this);\r\n\t\t\tif (visibleRect.contains(rect)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.col) {\r\n\t\t\t\tif (rect.left < visibleRect.left) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n\t\t\t\t} else if (visibleRect.right < rect.right) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.row) {\r\n\t\t\t\tif (rect.top < visibleRect.top) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.top - rect.top;\r\n\t\t\t\t} else if (visibleRect.bottom < rect.bottom) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfocusCell(col, row) {\r\n\t\t\tconst oldEditMode = this[_].focusControl.editMode;\r\n\t\t\tif (oldEditMode) {\r\n\t\t\t\tthis[_].focusControl.resetInputStatus();\r\n\t\t\t}\r\n\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(col, row));\r\n\t\t\t\r\n\t\t\tconst {col: selCol, row: selRow} = this[_].selection.select;\r\n\t\t\tconst results = this.fireListeners(\r\n\t\t\t\t\tEVENT_TYPE.EDITABLEINPUT_CELL,\r\n\t\t\t\t\t{col: selCol, row: selRow}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tconst editMode = (array.findIndex(results, (v) => !!v) >= 0);\r\n\t\t\tthis[_].focusControl.editMode = editMode;\r\n\t\t\t\r\n\t\t\tif (editMode) {\r\n\t\t\t\tthis[_].focusControl.storeInputStatus();\r\n\t\t\t\tthis[_].focusControl.setDefaultInputStatus();\r\n\t\t\t\tthis.fireListeners(\r\n\t\t\t\t\t\tEVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\t\t\t\t\t{col: selCol, row: selRow, input: this[_].focusControl.input}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Failure occurs in IE if focus is not last\r\n\t\t\tthis[_].focusControl.focus();\r\n\t\t}\r\n\t\tinvalidateCell(col, row) {\r\n\t\t\tthis.invalidateGridRect(col, row);\r\n\t\t}\r\n\t\tinvalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n\t\t\tconst offset = this.getOffsetInvalidateCells();\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\tstartCol -= offset;\r\n\t\t\t\tstartRow -= offset;\r\n\t\t\t\tendCol += offset;\r\n\t\t\t\tendRow += offset;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\tconst cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n\t\t\tconst invalidateTarget = visibleRect.intersection(cellsRect);\r\n\t\t\tif (invalidateTarget) {\r\n\r\n\t\t\t\tif (this[_].frozenColCount > 0 && endCol >= this[_].frozenColCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenColsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.left = Math.min(frozenRect.right - 1, frozenRect.right);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this[_].frozenRowCount > 0 && endRow >= this[_].frozenRowCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_invalidateRect(this, invalidateTarget);\r\n\t\t\t}\r\n\t\t}\r\n\t\tinvalidate() {\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\t_invalidateRect(this, visibleRect);\r\n\t\t}\r\n\t\t/**\r\n\t\t * get cell value at copy action\r\n\t\t * <p>\r\n\t\t * Please implement\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\t//Please implement get cell value!!\r\n\t\t}\r\n\t\t/**\r\n\t\t * Draw a cell\r\n\t\t * <p>\r\n\t\t * Please implement cell drawing.\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @param  {DrawCellContext} context context of cell drawing.\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\t//Please implement cell drawing!!\r\n\t\t}\r\n\t\taddDisposable(disposable) {\r\n\t\t\tif (!disposable || !disposable.dispose || typeof disposable.dispose !== 'function') {\r\n\t\t\t\tthrow new Error('not disposable!');\r\n\t\t\t}\r\n\t\t\tconst disposables = this[_].disposables = this[_].disposables || [];\r\n\t\t\tdisposables.push(disposable);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis[_].handler.dispose();\r\n\t\t\tthis[_].scrollable.dispose();\r\n\t\t\tthis[_].focusControl.dispose();\r\n\t\t\tthis[_].columnResizer.dispose();\r\n\t\t\tthis[_].cellSelector.dispose();\r\n\t\t\tif (this[_].disposables) {\r\n\t\t\t\tthis[_].disposables.forEach((disposable) => disposable.dispose());\r\n\t\t\t\tthis[_].disposables = null;\r\n\t\t\t}\r\n\r\n\t\t\tconst parentElement = this[_].element.parentElement;\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.removeChild(this[_].element);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetAttachCellArea(col, row) {\r\n\t\t\treturn {\r\n\t\t\t\telement: this.getElement(),\r\n\t\t\t\trect: _toRelativeRect(this, this.getCellRect(col, row)),\r\n\t\t\t};\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\t//nop\r\n\t\t}\r\n\t\tgetTargetRowAtInternal(absoluteY) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowsHeightInternal(startRow, endRow) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetScrollHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col - 1;\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col + 1;\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row - 1;\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row + 1;\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t_getInitContext() {\r\n\t\t\tconst ctx = this[_].context;\r\n\t\t\t//\r\n\t\t\tctx.fillStyle = 'white';\r\n\t\t\tctx.strokeStyle = 'black';\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'top';\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.font = this.font || '16px sans-serif';\r\n\t\t\treturn ctx;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = DrawGrid;\r\n}","'use strict';\r\n{\r\n\tconst {isDef, obj: {each}} = require('../internal/utils');\r\n\t//private symbol\r\n\tconst {_} = require('../internal/symbolManager').get();\r\n\r\n\tlet nextId = 1;\r\n\t/**\r\n\t * event target.\r\n\t */\r\n\tclass EventTarget {\r\n\t\tconstructor() {\r\n\t\t\tthis[_] = {};\r\n\t\t\tthis[_].listeners = {};\r\n\t\t\tthis[_].listenerData = {};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Adds an event listener.\r\n\t\t * @param  {string} type The event type id.\r\n\t\t * @param  {function} listener Callback method.\r\n\t\t * @return {number} unique id for the listener.\r\n\t\t */\r\n\t\tlisten(type, listener) {\r\n\t\t\tconst list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n\t\t\tlist.push(listener);\r\n\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis[_].listenerData[id] = {\r\n\t\t\t\ttype,\r\n\t\t\t\tlistener,\r\n\t\t\t\tremove: () => {\r\n\t\t\t\t\tdelete this[_].listenerData[id];\r\n\t\t\t\t\tconst index = list.indexOf(listener);\r\n\t\t\t\t\tlist.splice(index, 1);\r\n\t\t\t\t\tif (!this[_].listeners[type].length) {\r\n\t\t\t\t\t\tdelete this[_].listeners[type];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\treturn id;\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Removes an event listener which was added with listen() by the id returned by listen().\r\n\t\t * @param  {number} id the id returned by listen().\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tunlisten(id) {\r\n\t\t\tthis[_].listenerData[id].remove();\r\n\t\t}\r\n\t\taddEventListener(type, listener) {\r\n\t\t\tthis.listen(type, listener);\r\n\t\t}\r\n\t\tremoveEventListener(type, listener) {\r\n\t\t\teach(this[_].listenerData, (obj, id) => {\r\n\t\t\t\tif (obj.type === type && obj.listener === listener) {\r\n\t\t\t\t\tthis.unlisten(id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListeners(type) {\r\n\t\t\treturn !!this[_].listeners[type];\r\n\t\t}\r\n\t\t/**\r\n\t\t * Fires all registered listeners\r\n\t\t * @param  {string}    type The type of the listeners to fire.\r\n\t\t * @param  {...*} args fire arguments\r\n\t\t * @return {*} the result of the last listener\r\n\t\t */\r\n\t\tfireListeners(type, ...args) {\r\n\t\t\tconst list = this[_].listeners[type];\r\n\t\t\tif (!list) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\treturn list.\r\n\t\t\t\tmap((listener) => listener.call(this, ...args)).\r\n\t\t\t\tfilter(isDef);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tdelete this[_];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventTarget;\r\n}","'use strict';\r\n{\r\n\tconst DataSource = require('./data/DataSource');\r\n\tconst CachedDataSource = require('./data/CachedDataSource');\r\n\t\r\n\r\n\t/**\r\n\t * data modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.data\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDataSource,\r\n\t\tCachedDataSource\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst DataSource = require('./DataSource');\r\n\r\n\tfunction _setFieldCache({_fCache}, index, field, value) {\r\n\t\tconst recCache = _fCache[index] || (_fCache[index] = {});\r\n\t\trecCache[field] = value;\r\n\t}\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.CachedDataSource\r\n\t * @extends cheetahGrid.data.DataSource\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass CachedDataSource extends DataSource {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn DataSource.EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new CachedDataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor(opt = {}) {\r\n\t\t\tsuper(opt);\r\n\t\t\tthis._rCache = {};\r\n\t\t\tthis._fCache = {};\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\tif (this._rCache && this._rCache[index]) {\r\n\t\t\t\treturn this._rCache[index];\r\n\t\t\t}\r\n\t\t\treturn super.getOriginal(index);\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\r\n\t\t\tif (cache) {\r\n\t\t\t\treturn cache;\r\n\t\t\t}\r\n\t\t\treturn super.getOriginalField(index, field);\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\r\n\t\t\tif (cache) {\r\n\t\t\t\t_setFieldCache(this, index, field, value);\r\n\t\t\t}\r\n\t\t\treturn super.setOriginalField(index, field, value);\r\n\t\t}\r\n\t\tclearCache() {\r\n\t\t\tif (this._rCache) {\r\n\t\t\t\tthis._rCache = {};\r\n\t\t\t}\r\n\t\t\tif (this._fCache) {\r\n\t\t\t\tthis._fCache = {};\r\n\t\t\t}\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t_setFieldCache(this, index, field, val);\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\tthis._rCache[index] = val;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CachedDataSource;\r\n}","'use strict';\r\n{\r\n\tconst {array, isDef, isPromise, getOrApply, applyChainSafe, emptyFn} = require('../internal/utils');\r\n\tconst sort = require('../internal/sort');\r\n\tconst EventTarget = require('../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tUPDATE_LENGTH: 'update_length',\r\n\t\tUPDATED_LENGTH: 'updated_length',\r\n\t\tUPDATED_ORDER: 'updated_order',\r\n\t};\r\n\r\n\tfunction getValue(value, setPromiseBack) {\r\n\t\tvalue = getOrApply(value);\r\n\t\tif (isPromise(value)) {\r\n\t\t\tvalue = value.then((r) => {\r\n\t\t\t\tif (!isPromise(r)) {\r\n\t\t\t\t\tsetPromiseBack(r);\r\n\t\t\t\t}\r\n\t\t\t\treturn getValue(r, setPromiseBack);\r\n\t\t\t});\r\n\t\t\t//\r\n\t\t\tsetPromiseBack(value);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tfunction getField(record, field, setPromiseBack) {\r\n\t\tif (!isDef(record)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (isPromise(record)) {\r\n\t\t\treturn record.then((r) => getField(r, field, setPromiseBack));\r\n\t\t}\r\n\t\tif (field in record) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\tif (typeof field === 'function') {\r\n\t\t\treturn getValue(field(record), setPromiseBack);\r\n\t\t}\r\n\r\n\t\tconst ss = (field + '').split('.');\r\n\t\tif (ss.length <= 1) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\treturn getValue(applyChainSafe(record, (val, name) => getField(val, name, emptyFn), ...ss), setPromiseBack);\r\n\t}\r\n\tfunction setField(record, field, value) {\r\n\t\tif (field in record) {\r\n\t\t\trecord[field] = value;\r\n\t\t} else if (typeof field === 'function') {\r\n\t\t\treturn field(record, value);\r\n\t\t} else if (typeof field === 'string') {\r\n\t\t\tconst ss = (field + '').split('.');\r\n\t\t\tlet obj = record;\r\n\t\t\tconst {length} = ss;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst f = ss[i];\r\n\t\t\t\tif (i === length - 1) {\r\n\t\t\t\t\tobj[f] = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj = obj[f] || (obj[f] = {});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\trecord[field] = value;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\tfunction _getIndex(dataSource, index) {\r\n\t\tif (!dataSource._sortedIndexMap) {\r\n\t\t\treturn index;\r\n\t\t}\r\n\t\tconst mapIndex = dataSource._sortedIndexMap[index];\r\n\t\treturn isDef(mapIndex) ? mapIndex : index;\r\n\t}\r\n\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.DataSource\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass DataSource extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new DataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor({get, length = 0} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._get = get;\r\n\t\t\tthis._length = length;\r\n\t\t\tthis._sortedIndexMap = false;\r\n\t\t}\r\n\t\tget(index) {\r\n\t\t\treturn this.getOriginal(_getIndex(this, index));\r\n\t\t}\r\n\t\tgetField(index, field) {\r\n\t\t\treturn this.getOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\thasField(index, field) {\r\n\t\t\treturn this.hasOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\tsetField(index, field, value) {\r\n\t\t\treturn this.setOriginalField(_getIndex(this, index), field, value);\r\n\t\t}\r\n\t\tsort(field, order) {\r\n\t\t\tconst sortedIndexMap = new Array(this._length);\r\n\r\n\t\t\tconst orderFn = order !== 'desc'\r\n\t\t\t\t? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1\r\n\t\t\t\t: (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\r\n\r\n\t\t\treturn sort.sortPromise(\r\n\t\t\t\t\t(index) => isDef(sortedIndexMap[index])\r\n\t\t\t\t\t\t? sortedIndexMap[index]\r\n\t\t\t\t\t\t: (sortedIndexMap[index] = index),\r\n\t\t\t\t\t(index, rel) => {\r\n\t\t\t\t\t\tsortedIndexMap[index] = rel;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis._length,\r\n\t\t\t\t\torderFn,\r\n\t\t\t\t\t(index) => this.getOriginalField(index, field)\r\n\t\t\t).then(() => {\r\n\t\t\t\tthis._sortedIndexMap = sortedIndexMap;\r\n\t\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n\t\t\t});\r\n\t\t}\r\n\t\tget length() {\r\n\t\t\treturn this._length;\r\n\t\t}\r\n\t\tset length(length) {\r\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._length = length;\r\n\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\treturn getValue(this._get(index), (val) => {\r\n\t\t\t\tthis.recordPromiseCallBackInternal(index, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn getField(record, field, (val) => {\r\n\t\t\t\tthis.fieldPromiseCallBackInternal(index, field, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\thasOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (typeof field === 'function') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn field in record;\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn setField(record, field, value);\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t}\r\n\tDataSource.EMPTY = new DataSource({\r\n\t\tlength: 0,\r\n\t});\r\n\r\n\tmodule.exports = DataSource;\r\n}","'use strict';\r\n\r\nconst {isDef} = require('../internal/utils');\r\nclass Inline {\r\n\tconstructor(content) {\r\n\t\tthis._content = isDef(content) ? content : '';\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn ctx.measureText(this._content).width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(fn) {\r\n\t\t\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight,\r\n\t}) {\r\n\t\tcanvashelper.fillTextRect(ctx, this._content,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t}\r\n}\r\nmodule.exports = Inline;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\n\r\nclass InlineDrawer extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tdraw,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._draw = draw;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t}) {\r\n\t\tthis._draw({\r\n\t\t\tctx,\r\n\t\t\tcanvashelper,\r\n\t\t\trect,\r\n\t\t\toffset,\r\n\t\t\toffsetLeft,\r\n\t\t\toffsetRight,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineDrawer;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst fonts = require('../internal/fonts');\r\n\r\nclass InlineIcon extends Inline {\r\n\tconstructor(icon) {\r\n\t\tsuper();\r\n\t\tthis._icon = icon || {};\r\n\t}\r\n\twidth({ctx}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.width) {\r\n\t\t\treturn icon.width;\r\n\t\t}\r\n\t\tif (icon.font && fonts.check(icon.font, icon.content)) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.font = icon.font || ctx.font;\r\n\t\t\t\treturn ctx.measureText(icon.content).width;\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfont() {\r\n\t\treturn this._icon.font;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._icon.color;\r\n\t}\r\n\tcanDraw() {\r\n\t\tconst icon = this._icon;\r\n\t\treturn icon.font ? fonts.check(icon.font, icon.content) : true;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.font && !fonts.check(icon.font, icon.content)) {\r\n\t\t\tfonts.load(icon.font, icon.content, callback);\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.content) {\r\n\t\t\tcanvashelper.fillTextRect(ctx, icon.content,\r\n\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineIcon;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {getCacheOrLoad} = require('../internal/imgs');\r\nconst {isPromise} = require('../internal/utils');\r\n\r\nclass InlineImage extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsrc,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\tthis._src = src;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._imageLeft = imageLeft;\r\n\t\tthis._imageTop = imageTop;\r\n\t\tthis._imageWidth = imageWidth;\r\n\t\tthis._imageHeight = imageHeight;\r\n\r\n\t\tthis._onloaded = [];\r\n\r\n\r\n\t\tthis._loaded = false;\r\n\t\tif (isPromise(src)) {\r\n\t\t\tsrc.then((s) => {\r\n\t\t\t\tthis._src = s;\r\n\t\t\t\tthis._loadImage(s);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loadImage(src);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t_loadImage(src) {\r\n\t\tconst img = this._inlineImg = getCacheOrLoad('InlineImage', 50, src);\r\n\t\tif (isPromise(img)) {\r\n\t\t\timg.then((i) => {\r\n\t\t\t\tthis._loaded = true;\r\n\t\t\t\tthis._inlineImg = i;\r\n\r\n\t\t\t\tthis._onloaded.forEach((fn) => fn());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loaded = true;\r\n\t\t}\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width || (this._loaded ? this._inlineImg.width : 0);\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn this._loaded;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tif (isPromise(this._src) || isPromise(this._inlineImg)) {\r\n\t\t\tthis._onloaded.push(() => callback());\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t}) {\r\n\t\tconst img = this._inlineImg;\r\n\t\tcanvashelper.drawInlineImageRect(ctx, img,\r\n\t\t\t\tthis._imageLeft || 0, this._imageTop || 0,\r\n\t\t\t\tthis._imageWidth || img.width, this._imageHeight || img.height,\r\n\t\t\t\tthis._width || img.width, this._height || img.height,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineImage;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nclass InlinePath2D extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tpath,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t// IEPath2Dpolyfill\r\n\t\tthis._path = new path2DManager.Path2D(path);\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight\r\n\t}) {\r\n\t\toffset++;\r\n\t\tconst padding = {\r\n\t\t\tleft: offsetLeft,\r\n\t\t\tright: offsetRight,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, this._width, this._height, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\tctx.translate(pos.x, pos.y);\r\n\t\t\tctx.fill(this._path);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlinePath2D;","'use strict';\r\n\r\nconst InlineImage = require('./InlineImage');\r\nconst {isPromise} = require('../internal/utils');\r\n\r\nfunction buildSvgDataUrl(svg) {\r\n\tif (isPromise(svg)) {\r\n\t\treturn svg.then(buildSvgDataUrl);\r\n\t} else {\r\n\t\tconst data = (typeof svg === 'string') ? svg : new XMLSerializer().serializeToString(svg);\r\n\t\tconst url = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(data); //svgbase64\r\n\t\treturn url;\r\n\t}\r\n}\r\nfunction getSvgElement(svg) {\r\n\tif (isPromise(svg)) {\r\n\t\treturn svg.then(getSvgElement);\r\n\t} else if (typeof svg === 'string') {\r\n\t\tconst parser = new DOMParser();\r\n\t\treturn parser.parseFromString(svg, 'image/svg+xml');\r\n\t} else {\r\n\t\treturn svg;\r\n\t}\r\n}\r\n\r\nclass InlineSvg extends InlineImage {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsvg,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tconst svgElem = getSvgElement(svg);\r\n\t\tconst elmWidth = svgElem.getAttribute ? svgElem.getAttribute('width') : null;\r\n\t\tconst elmHeight = svgElem.getAttribute ? svgElem.getAttribute('height') : null;\r\n\t\tsuper({\r\n\t\t\tsrc: buildSvgDataUrl(svg),\r\n\t\t\twidth: width || elmWidth,\r\n\t\t\theight: height || elmHeight,\r\n\t\t\timageWidth: elmWidth,\r\n\t\t\timageHeight: elmHeight,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineSvg;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst InlineIcon = require('./InlineIcon');\r\nconst InlineImage = require('./InlineImage');\r\nconst InlineSvg = require('./InlineSvg');\r\nconst InlineDrawer = require('./InlineDrawer');\r\nconst InlinePath2D = require('./InlinePath2D');\r\nconst {isDef} = require('../internal/utils');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst icons = require('../icons');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nfunction drawRegisteredIcon(ctx, icon,\r\n\t\tdrawWidth, drawHeight,\r\n\t\tleft, top, width, height,\r\n\t\t{\r\n\t\t\toffset = 2,\r\n\t\t\tpadding,\r\n\t\t} = {}) {\r\n\tconst rect = {\r\n\t\tleft,\r\n\t\ttop,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tright: left + width,\r\n\t\tbottom: top + height,\r\n\t};\r\n\tctx.save();\r\n\ttry {\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t//clip\r\n\t\tctx.clip();\r\n\r\n\t\t//\r\n\t\tconst pos = calcStartPosition(ctx, rect, drawWidth, drawHeight, {\r\n\t\t\toffset,\r\n\t\t\tpadding\r\n\t\t});\r\n\t\tpath2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n\t} finally {\r\n\t\tctx.restore();\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\ticonOf(icon) {\r\n\t\tif (icon instanceof Inline) {\r\n\t\t\treturn icon;\r\n\t\t}\r\n\t\tif (!icon) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (icon.font && icon.content) {\r\n\t\t\treturn new InlineIcon(icon);\r\n\t\t}\r\n\t\tif (icon.src) {\r\n\t\t\treturn new InlineImage({\r\n\t\t\t\tsrc: icon.src,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.svg) {\r\n\t\t\treturn new InlineSvg({\r\n\t\t\t\tsvg: icon.svg,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.path) {\r\n\t\t\treturn new InlinePath2D({\r\n\t\t\t\tpath: icon.path,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst regedIcons = icons.get();\r\n\t\tif (icon.name && regedIcons[icon.name]) {\r\n\t\t\tconst regedIcon = regedIcons[icon.name];\r\n\t\t\tconst width = icon.width || Math.max(regedIcon.width, regedIcon.height);\r\n\t\t\treturn new InlineDrawer({\r\n\t\t\t\tdraw({\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\trect,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\toffsetRight,\r\n\t\t\t\t}) {\r\n\t\t\t\t\tdrawRegisteredIcon(ctx, regedIcon,\r\n\t\t\t\t\t\t\twidth, width,\r\n\t\t\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\twidth,\r\n\t\t\t\theight: width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn new InlineIcon(icon);\r\n\t},\r\n\tof(content) {\r\n\t\tif (!isDef(content)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (content instanceof Inline) {\r\n\t\t\treturn content;\r\n\t\t}\r\n\t\treturn new Inline(content);\r\n\t},\r\n\tbuildInlines(icons, inline) {\r\n\t\tconst result = [];\r\n\t\tif (icons) {\r\n\t\t\tresult.push(...(icons.map((icon) => this.iconOf(icon)).filter((e) => !!e)));\r\n\t\t}\r\n\t\tif (Array.isArray(inline) && inline.filter((il) => il instanceof Inline).length) {\r\n\t\t\tresult.push(...(inline.map((il) => this.of(il)).filter((e) => !!e)));\r\n\t\t} else {\r\n\t\t\tconst il = this.of(inline);\r\n\t\t\tif (il) {\r\n\t\t\t\tresult.push(il);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\r\n\tconst style = {\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tof(columnStyle, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(), StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst Header = require('./type/Header');\r\n\tconst SortHeader = require('./type/SortHeader');\r\n\r\n\tconst type = {\r\n\t\tcreate(headerCell) {\r\n\t\t\tif (headerCell.sort) {\r\n\t\t\t\treturn new SortHeader(headerCell);\r\n\t\t\t}\r\n\t\t\treturn new Header(headerCell);\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\r\n\tclass BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tthis._headerCell = headerCell;\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\t\t\t//\r\n\t\t\tthis.drawInternal(\r\n\t\t\t\t\tcellValue,\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t\tstyleContents.of(style, this.StyleClass),\r\n\t\t\t\t\thelper,\r\n\t\t\t\t\tgrid,\r\n\t\t\t\t\tinfo\r\n\t\t\t);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseHeader;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\r\n\tclass Header extends BaseHeader {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t});\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Header;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tMOUSEMOVE_CELL,\r\n\t}} = require('../../core/DrawGrid');\r\n\r\n\tclass SortHeader extends BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tsuper(headerCell);\r\n\t\t\tthis._sort = headerCell.sort;\r\n\t\t\tthis._range = headerCell.range;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\tcolor,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tfont,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst state = grid.sortState;\r\n\t\t\tlet order = undefined;\r\n\t\t\tif (this._range.isCellInRange(state.col, this._range.startRow)) {\r\n\t\t\t\torder = state.order;\r\n\t\t\t}\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tconst arrowSize = ctx.measureText('').width * 1.2;\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons: [{\r\n\t\t\t\t\tname: isDef(order) ? (order === 'asc' ? 'arrow_downward' : 'arrow_upward') : null,\r\n\t\t\t\t\twidth: arrowSize,\r\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.38)',\r\n\t\t\t\t}],\r\n\t\t\t});\r\n\t\t}\r\n\t\t_executeSort(newState, grid) {\r\n\t\t\tif (typeof this._sort === 'function') {\r\n\t\t\t\tthis._sort(newState.order, newState.col, grid);\r\n\t\t\t} else {\r\n\t\t\t\tgrid.dataSource.sort(grid.getField(newState.col), newState.order);\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst state = grid.sortState;\r\n\t\t\t\t\tlet newState;\r\n\t\t\t\t\tif (this._range.isCellInRange(state.col, e.row)) {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: state.order === 'asc' ? 'desc' : 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.sortState = newState;\r\n\t\t\t\t\tthis._executeSort(newState, grid);\r\n\t\t\t\t\tgrid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n\t\t\t\t}),\r\n\t\t\t\t// mouse move\r\n\t\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}),\r\n\t\t\t\t//MOUSEENTER'col-resize'move\r\n\t\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t\t}),\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = SortHeader;\r\n}","/*eslint-disable camelcase*/\r\n'use strict';\r\n\r\nconst {extend} = require('./internal/utils');\r\nconst plugins = require('./plugins/icons');\r\nconst builtins = {\r\n\tget arrow_upward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg');\r\n\t},\r\n\tget arrow_downward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg');\r\n\t},\r\n\tget edit() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/image/svg/production/ic_edit_48px.svg');\r\n\t},\r\n\tget add() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/content/svg/production/ic_add_48px.svg');\r\n\t},\r\n\tget star() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg');\r\n\t},\r\n\tget star_border() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg');\r\n\t},\r\n\tget star_half() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg');\r\n\t},\r\n};\r\n\r\nmodule.exports = {\r\n\tget() {\r\n\t\treturn extend(builtins, plugins);\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst {obj: {each}} = require('./utils');\r\n\tlet nextId = 1;\r\n\r\n\tclass EventHandler {\r\n\t\tconstructor() {\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\ton(target, type, listener, ...options) {\r\n\t\t\tif (target.addEventListener) {\r\n\t\t\t\ttarget.addEventListener(type, listener, ...options);\r\n\t\t\t}\r\n\t\t\tconst obj = {\r\n\t\t\t\ttarget, type, listener, options\r\n\t\t\t};\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis._listeners[id] = obj;\r\n\t\t\treturn id;\r\n\t\t}\r\n\t\ttryWithOffEvents(target, type, call) {\r\n\t\t\tconst list = [];\r\n\t\t\ttry {\r\n\t\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlist.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcall();\r\n\t\t\t} finally {\r\n\t\t\t\tlist.forEach((obj) => {\r\n\t\t\t\t\tif (obj.target.addEventListener) {\r\n\t\t\t\t\t\tobj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\toff(id) {\r\n\t\t\tif (!id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst obj = this._listeners[id];\r\n\t\t\tif (!obj) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete this._listeners[id];\r\n\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfire(target, type, ...args) {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tobj.listener.call(obj.target, ...args);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListener(target, type) {\r\n\t\t\tlet result = false;\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tclear() {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis.clear();\r\n\t\t\tthis._listeners = null;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventHandler;\r\n}","'use strict';\r\n\r\nclass LRUCache {\r\n\tconstructor(cacheSize) {\r\n\t\tthis._list = [];\r\n\t\tthis._map = {};\r\n\t\tthis._cacheSize = cacheSize || 50;\r\n\t}\r\n\tget(key) {\r\n\t\tconst val = this._map[key];\r\n\t\tif (val) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t\tthis._list.push(key);\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\tput(key, value) {\r\n\t\tif (this._map[key]) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t}\r\n\t\tthis._map[key] = value;\r\n\t\tthis._list.push(key);\r\n\t\tif (this._list.length > this._cacheSize) {\r\n\t\t\tconst remKey = this._list.shift();\r\n\t\t\tdelete this._map[remKey];\r\n\t\t}\r\n\t}\r\n}\r\nmodule.exports = LRUCache;","'use strict';\r\n{\r\n\tconst indexFirst = (ary, elm) => {\r\n\t\tlet low = 0;\r\n\t\tlet high = ary.length - 1;\r\n\t\twhile (low <= high) {\r\n\t\t\tconst i = Math.floor((low + high) / 2);\r\n\t\t\tif (ary[i] === elm) {\r\n\t\t\t\treturn i;\r\n\t\t\t} else if (ary[i] > elm) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t} else {\r\n\t\t\t\tlow = i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn high < 0 ? 0 : high;\r\n\t};\r\n\r\n\r\n\tclass NumberMap {\r\n\t\tconstructor() {\r\n\t\t\tthis._keys = [];\r\n\t\t\tthis._vals = {};\r\n\t\t\tthis._sorted = false;\r\n\t\t}\r\n\t\tput(key, value) {\r\n\t\t\tif (!(key in this._vals)) {\r\n\t\t\t\tthis._keys.push(key);\r\n\t\t\t\tthis._sorted = false;\r\n\t\t\t}\r\n\t\t\tthis._vals[key] = value;\r\n\t\t}\r\n\t\tget(key) {\r\n\t\t\treturn this._vals[key];\r\n\t\t}\r\n\t\teachAll(fn) {\r\n\t\t\tthis._keys.forEach((key) => {\r\n\t\t\t\tfn(this.get(key), key);\r\n\t\t\t});\r\n\t\t}\r\n\t\teach(keyFrom, keyTo, fn) {\r\n\t\t\tconst {_keys: keys} = this;\r\n\t\t\tconst {length} = keys;\r\n\t\t\tif (!this._sorted) {\r\n\t\t\t\tkeys.sort((a, b) => {\r\n\t\t\t\t\tif (a < b) { return -1; }\r\n\t\t\t\t\tif (a > b) { return 1; }\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tthis._sorted = true;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n\t\t\t\tconst key = keys[i];\r\n\t\t\t\tif (keyFrom <= key && key <= keyTo) {\r\n\t\t\t\t\tfn(this.get(key), key);\r\n\t\t\t\t} else if (keyTo < key) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberMap;\r\n}","'use strict';\r\n{\r\n\tclass Rect {\r\n\t\tconstructor(left, top, width, height) {\r\n\t\t\tthis._left = left;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t}\r\n\t\tstatic bounds(left, top, right, bottom) {\r\n\t\t\treturn new Rect(left, top, right - left, bottom - top);\r\n\t\t}\r\n\t\tstatic max(rect1, rect2) {\r\n\t\t\treturn Rect.bounds(\r\n\t\t\t\t\tMath.min(rect1.left, rect2.left),\r\n\t\t\t\t\tMath.min(rect1.top, rect2.top),\r\n\t\t\t\t\tMath.max(rect1.right, rect2.right),\r\n\t\t\t\t\tMath.max(rect1.bottom, rect2.bottom)\r\n\t\t\t);\r\n\t\t}\r\n\t\tget left() {\r\n\t\t\treturn this._left;\r\n\t\t}\r\n\t\tset left(left) {\r\n\t\t\tconst right = this.right;\r\n\t\t\tthis._left = left;\r\n\t\t\tthis.right = right;\r\n\t\t}\r\n\t\tget top() {\r\n\t\t\treturn this._top;\r\n\t\t}\r\n\t\tset top(top) {\r\n\t\t\tconst bottom = this.bottom;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis.bottom = bottom;\r\n\t\t}\r\n\t\tget width() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset width(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\tget height() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset height(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tget right() {\r\n\t\t\treturn this._right !== undefined ? this._right : (this._right = this.left + this.width);\r\n\t\t}\r\n\t\tset right(right) {\r\n\t\t\tthis._right = right;\r\n\t\t\tthis.width = right - this.left;\r\n\t\t}\r\n\t\tget bottom() {\r\n\t\t\treturn this._bottom !== undefined ? this._bottom : (this._bottom = this.top + this.height);\r\n\t\t}\r\n\t\tset bottom(bottom) {\r\n\t\t\tthis._bottom = bottom;\r\n\t\t\tthis.height = bottom - this.top;\r\n\t\t}\r\n\t\toffsetLeft(offset) {\r\n\t\t\tthis._left += offset;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\toffsetTop(offset) {\r\n\t\t\tthis._top += offset;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tcopy() {\r\n\t\t\treturn new Rect(this.left, this.top, this.width, this.height);\r\n\t\t}\r\n\t\tintersection(rect) {\r\n\t\t\tconst x0 = Math.max(this.left, rect.left);\r\n\t\t\tconst x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n\t\t\tif (x0 <= x1) {\r\n\t\t\t\tconst y0 = Math.max(this.top, rect.top);\r\n\t\t\t\tconst y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n\t\t\t\tif (y0 <= y1) {\r\n\t\t\t\t\treturn Rect.bounds(x0, y0, x1, y1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tcontains(another) {\r\n\t\t\treturn this.left <= another.left &&\r\n\t\t\t\t\tthis.left + this.width >= another.left + another.width &&\r\n\t\t\t\t\tthis.top <= another.top &&\r\n\t\t\t\t\tthis.top + this.height >= another.top + another.height;\r\n\t\t}\r\n\t\tinPoint(x, y) {\r\n\t\t\treturn this.left <= x &&\r\n\t\t\t\t\tthis.left + this.width >= x &&\r\n\t\t\t\t\tthis.top <= y &&\r\n\t\t\t\t\tthis.top + this.height >= y;\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Rect;\r\n}","'use strict';\r\n{\r\n\tconst EventHandler = require('./EventHandler');\r\n\tconst style = require('./style');\r\n\tconst {browser} = require('./utils');\r\n\t\r\n\tconst MAX_SCROLL = browser.heightLimit - 1000;\r\n\r\n\tfunction _update(scrollable) {\r\n\t\tlet domHeight;\r\n\t\tif (scrollable._height > MAX_SCROLL) {\r\n\t\t\tconst sbSize = style.getScrollBarSize();\r\n\t\t\tconst offsetHeight = scrollable._scrollable.offsetHeight;\r\n\t\t\tconst vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n\t\t\tconst rScrollRange = scrollable._height - offsetHeight + sbSize;\r\n\t\t\tscrollable._p = vScrollRange / rScrollRange;\r\n\t\t\tdomHeight = MAX_SCROLL;\r\n\t\t} else {\r\n\t\t\tscrollable._p = 1;\r\n\t\t\tdomHeight = scrollable._height;\r\n\t\t}\r\n\r\n\t\tscrollable._endPointElement.style.top = domHeight.toFixed() + 'px';\r\n\t\tscrollable._endPointElement.style.left = scrollable._width.toFixed() + 'px';\r\n\t\t\r\n\t}\r\n\r\n\tclass Scrollable {\r\n\t\tconstructor() {\r\n\t\t\tthis._handler = new EventHandler();\r\n\r\n\t\t\tthis._scrollable = document.createElement('div');\r\n\t\t\tthis._scrollable.classList.add('grid-scrollable');\r\n\t\t\tthis._height = 0;\r\n\t\t\tthis._width = 0;\r\n\r\n\t\t\tthis._endPointElement = document.createElement('div');\r\n\t\t\tthis._endPointElement.classList.add('grid-scroll-end-point');\r\n\t\t\t_update(this);\r\n\t\t\tthis._scrollable.appendChild(this._endPointElement);\r\n\r\n\t\t\t// const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n\t\t\t// this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n\t\t\t// const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n\t\t\t// const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n\t\t\t// this.scrollTop += delta < 0 ? point : -point;\r\n\t\t\t// });\r\n\t\t}\r\n\t\tcalcTop(top) {\r\n\t\t\tconst relativeTop = top - this.scrollTop;\r\n\t\t\treturn this._scrollable.scrollTop + relativeTop;\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this._scrollable;\r\n\t\t}\r\n\t\tsetScrollSize(width, height) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollWidth() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset scrollWidth(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollHeight() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset scrollHeight(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollLeft() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollLeft);\r\n\t\t}\r\n\t\tset scrollLeft(scrollLeft) {\r\n\t\t\tthis._scrollable.scrollLeft = scrollLeft;\r\n\t\t}\r\n\t\tget scrollTop() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollTop / this._p);\r\n\t\t}\r\n\t\tset scrollTop(scrollTop) {\r\n\t\t\tthis._scrollable.scrollTop = scrollTop * this._p;\r\n\t\t}\r\n\t\tonScroll(fn) {\r\n\t\t\tthis._handler.on(this._scrollable, 'scroll', fn);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = Scrollable;\r\n}","'use strict';\r\n{\r\n\tfunction cubicBezier(x2, y2, x3, y3) {\r\n\t\tlet step;\r\n\t\tconst err = 0.0001;\r\n\r\n\t\tx2 *= 3;\r\n\t\ty2 *= 3;\r\n\t\tx3 *= 3;\r\n\t\ty3 *= 3;\r\n\t\t\t\r\n\t\treturn function(t) {\r\n\t\t\tlet p,\r\n\t\t\t\ta,\r\n\t\t\t\tb,\r\n\t\t\t\tc,\r\n\t\t\t\td,\r\n\t\t\t\tx,\r\n\t\t\t\ts;\r\n\t\t\tif (t < 0 || 1 < t) {\r\n\t\t\t\tthrow new Error(t);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tp = step || t;\r\n\r\n\t\t\tdo {\r\n\t\t\t\ta = 1 - p;\r\n\t\t\t\tb = a * a;\r\n\t\t\t\tc = p * p;\r\n\t\t\t\td = c * p;\r\n\t\t\t\t\t\r\n\t\t\t\tx = x2 * b * p + x3 * a * c + d;\r\n\t\t\t\ts = t - x;\r\n\t\t\t\tp += s * 0.5;\r\n\t\t\t} while (err < Math.abs(s));\r\n\r\n\t\t\tstep = p;\r\n\t\t\treturn\ty2 * b * p + y3 * a * c + d;\r\n\t\t};\r\n\t}\r\n\tconst EASINGS = {\r\n\t\tlinear(p) {\r\n\t\t\treturn p;\r\n\t\t},\r\n\t\teaseIn: cubicBezier(0.420, 0.000, 1.000, 1.000),\r\n\t\teaseOut: cubicBezier(0.000, 0.000, 0.580, 1.000),\r\n\t\teaseInOut: cubicBezier(0.420, 0.000, 0.580, 1.000),\r\n\t};\r\n\r\n\tconst raf = window.requestAnimationFrame || setTimeout;\r\n\t\r\n\tfunction now() {\r\n\t\treturn Date.now();\r\n\t}\r\n\t/**\r\n\t * <pre>\r\n\t * Animates.\r\n\t * </pre>\r\n\t * @function\r\n\t * @param {number} duration animation time.\r\n\t * @param {function} step\r\n\t * @param {function|string} easing\r\n\t * @returns {object} Deferred object.\r\n\t */\r\n\tmodule.exports = (duration, step, easing) => {\r\n\t\tconst startedAt = now();\r\n\r\n\t\tif (!easing) {\r\n\t\t\teasing = EASINGS.easeInOut;\r\n\t\t} else if (typeof easing === 'string') {\r\n\t\t\teasing = EASINGS[easing];\r\n\t\t}\r\n\r\n\t\tlet canceledFlg = false;\r\n\t\tconst createAnim = (resolve, reject) => {\r\n\t\t\tconst anim = () => {\r\n\t\t\t\tconst point = now() - startedAt;\r\n\t\t\t\tif (canceledFlg) {\r\n\t\t\t\t\t//cancel\r\n\t\t\t\t\tif (reject) { reject(); }\r\n\t\t\t\t} else if (point >= duration) {\r\n\t\t\t\t\t//end\r\n\t\t\t\t\tstep(1);\r\n\t\t\t\t\tif (resolve) { resolve(); }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstep(easing(point / duration));\r\n\r\n\t\t\t\t\traf(anim, 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn anim;\r\n\t\t};\r\n\t\tconst cancel = () => {\r\n\t\t\tcanceledFlg = true;\r\n\t\t};\r\n\t\tif (window.Promise) {\r\n\t\t\tconst result = new window.Promise((resolve, reject) => {\r\n\t\t\t\tconst anim = createAnim(resolve, reject);\r\n\t\t\t\tstep(0);\r\n\t\t\t\tanim();\r\n\t\t\t});\r\n\t\t\tresult.cancel = cancel;\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tconst anim = createAnim(() => {}, () => {});\r\n\t\t\tstep(0);\r\n\t\t\tanim();\r\n\t\t\treturn {\r\n\t\t\t\tcancel,\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n\r\nfunction parse(calcStr) {\r\n\tfunction replacer(match, num, unit) {\r\n\t\tswitch (unit) {\r\n\t\tcase '%':\r\n\t\t\treturn `(${num} * this.full / 100)`;\r\n\t\tcase 'em':\r\n\t\t\treturn `(${num} * this.em)`;\r\n\t\tcase 'px':\r\n\t\t\treturn `(${num})`;\r\n\t\tdefault:\r\n\t\t\tthrow new Error('calc error');\r\n\t\t}\r\n\t}\r\n\tconst script = calcStr.replace(/^calc\\((.*)\\)$/, '$1').\r\n\t\treplace(/(\\d+)([A-Za-z%]+)/g, replacer).\r\n\t\treplace(/(\\d*\\.\\d+)([A-Za-z%]+)/g, replacer);\r\n\treturn {\r\n\t\teval(context) {\r\n\t\t\treturn (() => {\r\n\t\t\t\tfunction calc(v) { // eslint-disable-line no-unused-vars\r\n\t\t\t\t\treturn v;\r\n\t\t\t\t}\r\n\t\t\t\treturn eval(script);// eslint-disable-line no-eval\r\n\t\t\t}).call(context);\r\n\t\t}\r\n\t};\r\n}\r\nfunction toPx(value, context) {\r\n\tif (/^calc\\(.*\\)$/.test(value)) {\r\n\t\treturn parse(value).eval(context);\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*%$/.test(value)) {\r\n\t\treturn context.full * value.substr(0, value.length - 1) / 100;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*px$/.test(value)) {\r\n\t\treturn value.substr(0, value.length - 2) - 0;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*em$/.test(value)) {\r\n\t\treturn context.em * (value.substr(0, value.length - 2) - 0);\r\n\t}\r\n\treturn value - 0;\r\n}\r\n\r\nmodule.exports = {\r\n\tparse,\r\n\ttoPx(value, context) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\treturn toPx(value.trim(), context);\r\n\t\t}\r\n\t\treturn value - 0;\r\n\t}\r\n};","'use strict';\r\n{\r\n\r\n\tfunction calcBasePosition(ctx, rect,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\t// const textAlign = ctx.textAlign || 'left';\r\n\t\t// const textBaseline = ctx.textBaseline || 'middle';\r\n\t\t// ctx.textAlign = textAlign;\r\n\t\t// ctx.textBaseline = textBaseline;\r\n\r\n\t\t// let x = rect.left + offset + paddingLeft;\r\n\t\t// if (textAlign === 'right' || textAlign === 'end') {\r\n\t\t// \tx = rect.right - offset - paddingRight;\r\n\t\t// } else if (textAlign === 'center') {\r\n\t\t// \tx = rect.left + ((rect.width + paddingLeft - paddingRight) / 2);\r\n\t\t// }\r\n\t\t// let y = rect.top + offset;\r\n\t\t// if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t// \ty = rect.bottom - offset;\r\n\t\t// } else if (textBaseline === 'middle') {\r\n\t\t// \ty = rect.top + (rect.height / 2);\r\n\t\t// }\r\n\t\t// return {x, y};\r\n\t\treturn calcStartPosition(ctx, rect, 0, 0, {\r\n\t\t\toffset,\r\n\t\t\tpadding: {\r\n\t\t\t\tleft: paddingLeft,\r\n\t\t\t\tright: paddingRight,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction calcStartPosition(ctx, rect, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\tconst textAlign = ctx.textAlign || 'left';\r\n\t\tconst textBaseline = ctx.textBaseline || 'middle';\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\r\n\t\tlet x = rect.left + offset + paddingLeft;\r\n\t\tif (textAlign === 'right' || textAlign === 'end') {\r\n\t\t\tx = rect.right - width - offset - paddingRight;\r\n\t\t} else if (textAlign === 'center') {\r\n\t\t\tx = rect.left + ((rect.width - width + paddingLeft - paddingRight) / 2);\r\n\t\t}\r\n\t\tlet y = rect.top + offset;\r\n\t\tif (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t\ty = rect.bottom - height - offset;\r\n\t\t} else if (textBaseline === 'middle') {\r\n\t\t\ty = rect.top + ((rect.height - height) / 2);\r\n\t\t}\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcalcBasePosition,\r\n\t\tcalcStartPosition,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst rgbMap = {};\r\n\tfunction styleColorToRGB(color) {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.color = color;\r\n\t\tstyle.position = 'fixed';\r\n\t\tstyle.height = '1px';\r\n\t\tstyle.width = '1px';\r\n\t\tstyle.opacity = 0;\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {color: styleColor} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn colorToRGB0(styleColor);\r\n\t}\r\n\r\n\tfunction hexToNum(hex) {\r\n\t\treturn parseInt(hex, 16);\r\n\t}\r\n\tfunction createRGB(r, g, b, a = 1) {\r\n\t\treturn {r, g, b, a};\r\n\t}\r\n\tfunction tripleHexToRGB({1: r, 2: g, 3: b}) {\r\n\t\treturn createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n\t}\r\n\tfunction sextupleHexToRGB({1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2}) {\r\n\t\treturn createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n\t}\r\n\t\r\n\tfunction testRGB({r, g, b, a}) {\r\n\t\treturn 0 <= r && r <= 255 &&\r\n\t\t0 <= g && g <= 255 &&\r\n\t\t0 <= b && b <= 255 &&\r\n\t\t0 <= a && a <= 1;\r\n\t}\r\n\tfunction rateToByte(r) {\r\n\t\treturn Math.ceil(r * 255 / 100);\r\n\t}\r\n\tfunction colorToRGB0(color) {\r\n\t\tif (color.match(/^#[0-9a-f]{3}$/i)) {\r\n\t\t\treturn tripleHexToRGB(color);\r\n\t\t}\r\n\t\tif (color.match(/^#[0-9a-f]{6}$/i)) {\r\n\t\t\treturn sextupleHexToRGB(color);\r\n\t\t}\r\n\t\tlet ret = color.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0, ret[4] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]));\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]), ret[7] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction colorToRGB(color) {\r\n\t\tif (typeof color !== 'string') {\r\n\t\t\treturn createRGB(0, 0, 0, 0);\r\n\t\t}\r\n\t\tcolor = color.toLowerCase().trim();\r\n\t\tif (rgbMap[color]) {\r\n\t\t\treturn rgbMap[color];\r\n\t\t}\r\n\t\treturn colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcolorToRGB\r\n\t};\r\n}","'use strict';\r\n\r\nmodule.exports = {\r\n\t'Array_isArray': window.Array.isArray\r\n};","'use strict';\r\n{\r\n\tconst loads = {};\r\n\tconst legacy = !document.fonts;\r\n\tconst load = legacy ? function(font, testStr, callback) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\trequire('./legacy/fontwatch/FontWatchRunner').load(font, testStr, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t}, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t} : function(font, testStr, callback) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdocument.fonts.ready.then(() => {\r\n\t\t\tloads.all = true;\r\n\t\t});\r\n\t\tdocument.fonts.load(font).then(() => {\r\n\t\t\tloads[font] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t};\r\n\tconst check = legacy ? function(font, testStr) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tload(font, testStr, () => {});\r\n\t\treturn false;\r\n\t} : function(font, testStr) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!document.fonts.check(font)) {\r\n\t\t\tload(font, testStr, () => {});\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t\r\n\tmodule.exports = {\r\n\t\tcheck,\r\n\t\tload\r\n\t};\r\n}","'use strict';\r\n\r\nconst EventHandler = require('./EventHandler');\r\nconst handler = new EventHandler();\r\n\r\nlet ratio;\r\nfunction setRatio() {\r\n\tratio = Math.ceil(window.devicePixelRatio || 1);\r\n\tif (ratio > 1 && (ratio % 2) !== 0) {\r\n\t\tratio += 1;\r\n\t}\r\n}\r\nsetRatio();\r\nhandler.on(window, 'resize', setRatio);\r\n\r\nmodule.exports = {\r\n\ttransform(canvas) {\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\tconst getAttribute = canvas.getAttribute;\r\n\t\tcanvas.getAttribute = function(name, ...args) {\r\n\t\t\tlet result = getAttribute.call(this, name, ...args);\r\n\t\t\tif (name === 'width' || name === 'height') {\r\n\t\t\t\tresult /= ratio;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t\tconst setAttribute = canvas.setAttribute;\r\n\t\tcanvas.setAttribute = function(name, val, ...args) {\r\n\t\t\tconst wh = name === 'width' || name === 'height';\r\n\t\t\tif (wh) {\r\n\t\t\t\tval *= ratio;\r\n\t\t\t}\r\n\t\t\tconst result = setAttribute.call(this, name, val, ...args);\r\n\t\t\tif (wh) {\r\n\t\t\t\tctx.scale(ratio, ratio);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tObject.defineProperty(canvas, 'width', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('width');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('width', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tObject.defineProperty(canvas, 'height', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('height');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('height', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tconst drawImage = ctx.drawImage;\r\n\t\tctx.drawImage = function(img, ...args) {\r\n\t\t\tif (img !== canvas || ratio === 1) {\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t}\r\n\t\t\tthis.save();\r\n\t\t\ttry {\r\n\t\t\t\tthis.scale(1 / ratio, 1 / ratio);\r\n\t\t\t\tif (args.length > 4) {\r\n\t\t\t\t\targs[4] = args[4] * ratio;\r\n\t\t\t\t\targs[5] = args[5] * ratio;\r\n\t\t\t\t} else {\r\n\t\t\t\t\targs[0] = args[0] * ratio;\r\n\t\t\t\t\targs[1] = args[1] * ratio;\r\n\t\t\t\t}\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn canvas;\r\n\t}\r\n};","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nconst ICON_PROP_KEYS = [\r\n\t'content',\r\n\t'font',\r\n\t'color',\r\n\t'className',\r\n\t'isLiga',\r\n\t'width',\r\n\t'src',\r\n\t'svg',\r\n\t'name',\r\n\t'path'\r\n];\r\n\r\nfunction quote(name) {\r\n\tconst quoted = [];\r\n\tconst split = name.split(/,\\s*/);\r\n\tfor (let i = 0; i < split.length; i++) {\r\n\t\tconst part = split[i].replace(/['\"]/g, '');\r\n\t\tif (part.indexOf(' ') === -1 && !(/^\\d/.test(part))) {\r\n\t\t\tquoted.push(part);\r\n\t\t} else {\r\n\t\t\tquoted.push('\\'' + part + '\\'');\r\n\t\t}\r\n\t}\r\n\treturn quoted.join(',');\r\n}\r\n\r\nconst doms = {};\r\nconst props = {};\r\n\r\nfunction getIconProps(tagName, className) {\r\n\tconst tagProps = props[tagName] || (props[tagName] = {});\r\n\tif (tagProps[className]) {\r\n\t\treturn tagProps[className];\r\n\t}\r\n\tconst dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n\tdom.className = className;\r\n\tdocument.body.appendChild(dom);\r\n\ttry {\r\n\t\tconst beforeStyle = document.defaultView.getComputedStyle(dom, '::before');\r\n\t\tlet content = beforeStyle.getPropertyValue('content');\r\n\t\tif (content.length >= 3 && (content[0] === '\"' || content[0] === '\\'')) {\r\n\t\t\tif (content[0] === content[content.length - 1]) {\r\n\t\t\t\tcontent = content.substr(1, content.length - 2);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet font = beforeStyle.getPropertyValue('font');\r\n\t\tif (!font) {\r\n\t\t\tfont = beforeStyle.getPropertyValue('font-style') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-variant') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-weight') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-size') + '/' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('line-height') + ' ' +\r\n\t\t\t\tquote(beforeStyle.getPropertyValue('font-family'));\r\n\t\t}\r\n\t\tconst color = beforeStyle.getPropertyValue('color');\r\n\t\tconst width = dom.clientWidth;\r\n\t\tconst isLiga = (beforeStyle.getPropertyValue('font-feature-settings') || '').indexOf('liga') > -1;\r\n\t\t\r\n\t\treturn (tagProps[className] = {\r\n\t\t\tcontent,\r\n\t\t\tfont,\r\n\t\t\tcolor,\r\n\t\t\twidth,\r\n\t\t\tisLiga,\r\n\t\t});\r\n\t} finally {\r\n\t\tdocument.body.removeChild(dom);\r\n\t}\r\n}\r\n\r\nfunction toPropArray(prop, count) {\r\n\tconst result = [];\r\n\tif (Array.isArray(prop)) {\r\n\t\tresult.push(...prop);\r\n\t\tfor (let i = prop.length; i < count; i++) {\r\n\t\t\tresult.push(null);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\tresult.push(prop);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction toSimpleArray(iconProps) {\r\n\tif (!iconProps) {\r\n\t\treturn iconProps;\r\n\t} else if (Array.isArray(iconProps)) {\r\n\t\treturn iconProps;\r\n\t}\r\n\r\n\tconst workData = {};\r\n\r\n\tlet count = 0;\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tif (iconProps[k]) {\r\n\t\t\tif (Array.isArray(iconProps[k])) {\r\n\t\t\t\tcount = Math.max(count, iconProps[k].length);\r\n\t\t\t} else {\r\n\t\t\t\tcount = Math.max(count, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tworkData[k] = toPropArray(iconProps[k], count);\r\n\t});\r\n\r\n\tconst result = [];\r\n\tfor (let i = 0; i < count; i++) {\r\n\t\tconst data = {};\r\n\t\tICON_PROP_KEYS.forEach((k) => {\r\n\t\t\tdata[k] = workData[k][i];\r\n\t\t});\r\n\t\tresult.push(data);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction normarize(iconProps) {\r\n\tconst data = {};\r\n\tfor (const k in iconProps) {\r\n\t\tif (k === 'className') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tdata[k] = iconProps[k];\r\n\t}\r\n\tif (iconProps.className) {\r\n\t\tconst prop = getIconProps(iconProps.tagName || 'i', iconProps.className);\r\n\t\tfor (const k in prop) {\r\n\t\t\tif (!isDef(iconProps[k])) {\r\n\t\t\t\tdata[k] = prop[k];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn data;\r\n}\r\n\r\nmodule.exports = {\r\n\ttoNormarizeArray(iconProps) {\r\n\t\tconst icons = toSimpleArray(iconProps);\r\n\t\tif (!icons) {\r\n\t\t\treturn icons;\r\n\t\t}\r\n\t\treturn icons.map((icon) => normarize(icon));\r\n\t},\r\n\tget iconPropKeys() {\r\n\t\treturn ICON_PROP_KEYS;\r\n\t},\r\n\tgetIconProps,\r\n};\r\n\r\n\r\n","'use strict';\r\n\r\nconst {isPromise} = require('./utils');\r\nconst LRUCache = require('./LRUCache');\r\n\r\nconst allCache = {};\r\n\r\nfunction isDataUrl(url) {\r\n\treturn url.search(/^(data:)/) !== -1;\r\n}\r\n\r\nfunction loadImage(src) {\r\n\tif (!window.Promise) {\r\n\t\tconsole.error('Promise is not loaded. load Promise before this process.');\r\n\t\treturn {\r\n\t\t\tthen() {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst img = new Image();\r\n\tconst result = new window.Promise((resolve) => {\r\n\t\timg.onload = () => {\r\n\t\t\tresolve(img);\r\n\t\t};\r\n\t});\r\n\timg.onerror = (e) => {\r\n\t\tconst url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\r\n\t\tconsole.warn(`cannot load: ${url}`);\r\n\t\tthrow new Error(`IMAGE LOAD ERROR: ${url}`);\r\n\t};\r\n\timg.src = isDataUrl(src) ? src : `${src}?${Date.now()}`;\r\n\treturn result;\r\n}\r\n\r\nfunction getCacheOrLoad0(cache, src) {\r\n\tif (isPromise(src)) {\r\n\t\treturn src.then((u) => getCacheOrLoad0(cache, u));\r\n\t}\r\n\tconst c = cache.get(src);\r\n\tif (c) {\r\n\t\treturn c;\r\n\t}\r\n\tconst result = loadImage(src).then((img) => {\r\n\t\tcache.put(src, img);\r\n\t\treturn img;\r\n\t});\r\n\tcache.put(src, result);\r\n\treturn result;\r\n}\r\n\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n\tconst cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache(cacheSize));\r\n\treturn getCacheOrLoad0(cache, src);\r\n}\r\n\r\nmodule.exports = {\r\n\tloadImage,\r\n\tgetCacheOrLoad,\r\n};\r\n","'use strict';\r\n\r\nconst PathCommandsParser = require('./PathCommandsParser');\r\nconst parser = new PathCommandsParser();\r\n\r\nclass Path2D {\r\n\tconstructor(arg) {\r\n\t\tthis._ops = [];\r\n\t\t[\r\n\t\t\t'closePath',\r\n\t\t\t'moveTo',\r\n\t\t\t'lineTo',\r\n\t\t\t'bezierCurveTo',\r\n\t\t\t'quadraticCurveTo',\r\n\t\t\t'arc',\r\n\t\t\t'rect'\r\n\t\t].forEach((name) => {\r\n\t\t\tthis[name] = (...args) => {\r\n\t\t\t\tthis._ops.push({op: name, args});\r\n\t\t\t};\r\n\t\t});\r\n\t\tif (arg === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (typeof arg === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tthis._ops = parser.parse(arg);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t} else if (arg.hasOwnProperty('_ops')) {\r\n\t\t\tthis._ops = [...this._ops];\r\n\t\t} else {\r\n\t\t\tthrow new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst CanvasRenderingContext2D = window.CanvasRenderingContext2D;\r\n\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n\r\nCanvasRenderingContext2D.prototype.fill = function(...args) {\r\n\tif (args[0] instanceof Path2D) {\r\n\t\tconst path = args[0];\r\n\t\tthis.beginPath();\r\n\t\tpath._ops.forEach((op) => {\r\n\t\t\tthis[op.op](...op.args);\r\n\t\t});\r\n\t\toriginalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n\t} else {\r\n\t\toriginalFill.apply(this, args);\r\n\t}\r\n};\r\n\r\nmodule.exports = Path2D;\r\n","'use strict';\r\n\r\nfunction mag(v) {\r\n\treturn Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\n    \r\nfunction dot(u, v) {\r\n\treturn (u[0] * v[0] + u[1] * v[1]);\r\n}\r\n    \r\nfunction ratio(u, v) {\r\n\treturn dot(u, v) / (mag(u) * mag(v));\r\n}\r\n\r\nfunction clamp(value, min, max) {\r\n\treturn Math.min(Math.max(value, min), max);\r\n}\r\n    \r\nfunction angle(u, v) {\r\n\tlet sign = 1.0;\r\n\tif ((u[0] * v[1] - u[1] * v[0]) < 0) {\r\n\t\tsign = -1.0;\r\n\t}\r\n\treturn sign * Math.acos(clamp(ratio(u, v)), -1, 1);\r\n}\r\n    \r\nfunction rotClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction rotCounterClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction midPoint(u, v) {\r\n\treturn [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\n    \r\nfunction meanVec(u, v) {\r\n\treturn [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\n    \r\nfunction pointMul(u, v) {\r\n\treturn [u[0] * v[0], u[1] * v[1]];\r\n}\r\n    \r\nfunction scale(c, v) {\r\n\treturn [c * v[0], c * v[1]];\r\n}\r\n    \r\nfunction sum(u, v) {\r\n\treturn [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n\t// Convert from endpoint to center parametrization, as detailed in:\r\n\t//   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n\tif (rx === 0 || ry === 0) {\r\n\t\tctx.lineTo(x2, x1);\r\n\t\treturn;\r\n\t}\r\n\tphi = phi * (Math.PI / 180.0);\r\n\trx = Math.abs(rx);\r\n\try = Math.abs(ry);\r\n\tconst xPrime = rotClockwise(midPoint(x1, x2), phi); // F.6.5.1\r\n\tconst xPrime2 = pointMul(xPrime, xPrime);\r\n\tlet rx2 = Math.pow(rx, 2);\r\n\tlet ry2 = Math.pow(ry, 2);\r\n    \r\n\tconst lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n\tif (lambda > 1) {\r\n\t\trx *= lambda;\r\n\t\try *= lambda;\r\n\t\trx2 = Math.pow(rx, 2);\r\n\t\try2 = Math.pow(ry, 2);\r\n\t}\r\n\tlet factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n\tif (fA === fS) {\r\n\t\tfactor *= -1.0;\r\n\t}\r\n\tconst cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\r\n\tconst c = sum(rotCounterClockwise(cPrime, phi), meanVec(x1, x2)); // F.6.5.3\r\n\tconst x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\r\n\tconst x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\r\n\tconst theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n\tconst deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n\tconst start = theta;\r\n\tconst end = theta + deltaTheta;\r\n\tctx.save();\r\n\tctx.translate(c[0], c[1]);\r\n\tctx.rotate(phi);\r\n\tctx.scale(rx, ry);\r\n\tctx.arc(0, 0, 1, start, end, 1 - fS);\r\n\tctx.restore();\r\n}\r\n\r\nclass PathCommands {\r\n\tconstructor(ctx) {\r\n\t\tlet lMx;\r\n\t\tlet lMy;\r\n\t\tlet lx = 0;\r\n\t\tlet ly = 0;\r\n\t\tlet reflected;\r\n\t\tlet lastCommand = '';\r\n\t\tfunction makeReflected() {\r\n\t\t\tif ('CcSsQqTt'.indexOf(lastCommand) < 0) {\r\n\t\t\t\treturn {x: lx, y: ly};\r\n\t\t\t}\r\n\t\t\treturn reflected;\r\n\t\t}\r\n\r\n\t\tthis.M = (px, py) => {\r\n\t\t\tctx.moveTo(px, py);\r\n\t\t\tlMx = px;\r\n\t\t\tlMy = py;\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'M';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.m = (px, py) => this.M(px + lx, py + ly);\r\n\t\tthis.L = (px, py) => {\r\n\t\t\tctx.lineTo(px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'L';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.l = (px, py) => this.L(px + lx, py + ly);\r\n\t\tthis.H = (px) => this.L(px, ly);\r\n\t\tthis.h = (px) => this.H(px + lx);\r\n\t\tthis.V = (py) => this.L(lx, py);\r\n\t\tthis.v = (py) => this.V(py + ly);\r\n\t\tthis.Z = () => {\r\n\t\t\tctx.closePath();\r\n\t\t\tlx = lMx;\r\n\t\t\tly = lMy;\r\n\t\t\tlastCommand = 'Z';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.z = () => this.Z();\r\n\t\t//C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n\t\tthis.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n\t\t\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cp2x,\r\n\t\t\t\ty: 2 * py - cp2y,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'C';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(\r\n\t\t\t\tcp1x + lx, cp1y + ly,\r\n\t\t\t\tcp2x + lx, cp2y + ly,\r\n\t\t\t\tpx + lx, py + ly\r\n\t\t);\r\n\t\t//S x2 y2, x y (or s dx2 dy2, dx dy)\r\n\t\tthis.S = (cpx, cpy, px, py) => {\r\n\t\t\tconst {x: cp1x, y: cp1y} = makeReflected(lastCommand);\r\n\t\t\treturn this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n\t\tthis.Q = (cpx, cpy, px, py) => {\r\n\t\t\tctx.quadraticCurveTo(cpx, cpy, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cpx,\r\n\t\t\t\ty: 2 * py - cpy,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'Q';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//T x y (or t dx dy)\r\n\t\tthis.T = (px, py) => {\r\n\t\t\tconst {x: cpx, y: cpy} = makeReflected();\r\n\t\t\treturn this.Q(cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.t = (px, py) => this.T(px + lx, py + ly);\r\n\t\t//A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n\t\tthis.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n\t\t\tconst x1 = lx;\r\n\t\t\tconst y1 = ly;\r\n\r\n\t\t\tellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'A';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t//a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n\t\tthis.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(\r\n\t\t\t\trx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n\t\t\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommands;","'use strict';\r\n\r\nconst PathCommands = require('./PathCommands');\r\n\r\nfunction pathTokens(d) {\r\n\tlet idx = 0;\r\n\treturn {\r\n\t\tnext() {\r\n\t\t\tlet s = '';\r\n\t\t\twhile (d.length > idx) {\r\n\t\t\t\tconst c = d[idx];\r\n\t\t\t\tidx++;\r\n\t\t\t\tif (' ,\\n\\r\\t'.indexOf(c) > -1) {\r\n\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst type = '.+-1234567890'.indexOf(c) > -1 ? 'num' : 'str';\r\n\t\t\t\t\tif (type === 'str') {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('-+'.indexOf(c) > -1) {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\tif (s.indexOf('.') > -1) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += c;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn s || null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction command(builder, cmd, argsProvider) {\r\n\tif (cmd.toUpperCase() === 'M' || cmd.toUpperCase() === 'L' || cmd.toUpperCase() === 'T') {\r\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next());\r\n\t\treturn cmd === 'M' ? 'L'\r\n\t\t\t: cmd === 'm' ? 'l'\r\n\t\t\t: cmd;\r\n\t} else if (cmd.toUpperCase() === 'H' || cmd.toUpperCase() === 'V') {\r\n\t\tbuilder.command(cmd, argsProvider.next());\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'Z') {\r\n\t\tbuilder.command(cmd);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'C') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'S' || cmd.toUpperCase() === 'Q') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'A') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else {\r\n\t\t// https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n\t\tconsole.warn('unsupported:' + cmd);\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nconst canvasOperations = window.CanvasRenderingContext2D ? Object.keys(window.CanvasRenderingContext2D.prototype) : [\r\n\t'save',\r\n\t'restore',\r\n\t'beginPath',\r\n\t'closePath',\r\n\t'moveTo',\r\n\t'lineTo',\r\n\t'bezierCurveTo',\r\n\t'quadraticCurveTo',\r\n\t'arc',\r\n\t'arcTo',\r\n\t'ellipse',\r\n\t'rect',\r\n\t'translate',\r\n\t'rotate',\r\n\t'scale',\r\n];\r\n\r\nclass PathCommandsParser {\r\n\tconstructor() {\r\n\t\tthis._commands = new PathCommands(this);\r\n\t\tcanvasOperations.forEach((op) => {\r\n\t\t\tthis[op] = (...args) => {\r\n\t\t\t\tthis._ops.push({\r\n\t\t\t\t\top,\r\n\t\t\t\t\targs,\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\tcommand(name, ...args) {\r\n\t\targs = args || [];\r\n\t\tfor (let i = 0; i < args.length; i++) {\r\n\t\t\targs[i] = args[i] - 0;\r\n\t\t}\r\n\t\tthis._commands[name](...(args));\r\n\t}\r\n\tparse(d) {\r\n\t\tconst ops = this._ops = [];\r\n\t\tconst tokens = pathTokens(d);\r\n\t\ttry {\r\n\t\t\tlet cmd;\r\n\t\t\tlet subsequentCommand;\r\n\t\t\twhile ((cmd = tokens.next())) {\r\n\t\t\t\tif (!isNaN(cmd - 0)) {\r\n\t\t\t\t\tlet fst = true;\r\n\t\t\t\t\tconst argsProvider = {\r\n\t\t\t\t\t\tnext() {\r\n\t\t\t\t\t\t\tif (fst) {\r\n\t\t\t\t\t\t\t\tfst = false;\r\n\t\t\t\t\t\t\t\treturn cmd;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn tokens.next();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tsubsequentCommand = command(this, subsequentCommand, argsProvider);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsubsequentCommand = command(this, cmd, tokens);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('Error: ' + d);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t\treturn ops;\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommandsParser;","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\nfunction computeStyle(font) {\r\n\treturn [{\r\n\t\tdisplay: 'block',\r\n\t\tposition: 'absolute',\r\n\t\ttop: '-9999px',\r\n\t\tleft: '-9999px',\r\n\t\twidth: 'auto',\r\n\t\theight: 'auto',\r\n\t\tmargin: '0',\r\n\t\tpadding: '0',\r\n\t\t'white-space': 'nowrap',\r\n\t\tfont,\r\n\t}, {\r\n\t\t'font-variant': 'normal',\r\n\t\t'font-size': '300px',\r\n\t\t'font-style': 'normal',\r\n\t\t'font-weight': '400',\r\n\t\t'line-height': 'normal',\r\n\t}];\r\n}\r\n\r\nclass FontRuler {\r\n\tconstructor(font, testStr) {\r\n\t\tconst e = document.createElement('span');\r\n\t\te.setAttribute('aria-hidden', 'true');\r\n\t\te.textContent = testStr || 'BESbswy';\r\n\r\n\t\tcomputeStyle(font).forEach((style) => {\r\n\t\t\tfor (const key in style) {\r\n\t\t\t\te.style[key] = style[key];\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.body.appendChild(e);\r\n\t\tthis.el_ = e;\r\n\t}\r\n\tgetWidth() {\r\n\t\treturn this.el_.offsetWidth;\r\n\t}\r\n\tremove() {\r\n\t\tdocument.body.removeChild(this.el_);\r\n\t}\r\n}\r\n\r\nmodule.exports = FontRuler;\r\n\r\n\r\n","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\n\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler = require('./FontRuler');\r\n\r\n\r\nconst LastResortFonts = {\r\n\tSERIF: 'serif',\r\n\tSANS_SERIF: 'sans-serif'\r\n};\r\n\r\n\r\nconst watchRunners = {};\r\n\r\nclass FontWatchRunner {\r\n\tstatic load(font, testStr, activeCallback, inactiveCallback) {\r\n\t\tconst c = watchRunners[font] || (watchRunners[font] = {});\r\n\t\ttestStr = testStr + '';\r\n\t\tlet runner;\r\n\t\tif (c[testStr]) {\r\n\t\t\trunner = c[testStr];\r\n\t\t} else {\r\n\t\t\trunner = (c[testStr] = new FontWatchRunner(font, testStr));\r\n\t\t}\r\n\t\trunner.then(activeCallback, inactiveCallback);\r\n\t}\r\n\tconstructor(font, testStr) {\r\n\t\tthis.activeCallbacks = [];\r\n\t\tthis.inactiveCallbacks = [];\r\n\t\tthis.status = null;\r\n\t\tthis.lastResortWidths_ = {};\r\n\r\n\t\tthis.fontRulerA_ = new FontRuler(font + ',' + LastResortFonts.SERIF, testStr);\r\n\t\tthis.fontRulerB_ = new FontRuler(font + ',' + LastResortFonts.SANS_SERIF, testStr);\r\n\t\tconst lastResortRulerA = new FontRuler('4px ' + LastResortFonts.SERIF, testStr);\r\n\t\tconst lastResortRulerB = new FontRuler('4px ' + LastResortFonts.SANS_SERIF, testStr);\r\n\r\n\t\t//start\r\n\t\tthis.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n\t\tthis.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\r\n\r\n\t\tlastResortRulerA.remove();\r\n\t\tlastResortRulerB.remove();\r\n\r\n\t\tthis.started_ = Date.now();\r\n\r\n\t\tthis.check_();\r\n\t}\r\n\tthen(activeCallback, inactiveCallback) {\r\n\t\tif (this.status) {\r\n\t\t\tif (this.status !== 'ng') {\r\n\t\t\t\tactiveCallback();\r\n\t\t\t} else {\r\n\t\t\t\tinactiveCallback();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.activeCallbacks.push(activeCallback);\r\n\t\t\tthis.inactiveCallbacks.push(inactiveCallback);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tcheck_() {\r\n\t\tconst widthA = this.fontRulerA_.getWidth();\r\n\t\tconst widthB = this.fontRulerB_.getWidth();\r\n\r\n\t\tif (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\tif (Date.now() - this.started_ >= 3000) { // timeout\r\n\t\t\t\tif (this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\t\t\tthis.status = 'ok';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.finish_(this.inactiveCallbacks);\r\n\t\t\t\t\tthis.status = 'ng';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.check_();\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\tthis.status = 'ok';\r\n\t\t}\r\n\t}\r\n\tisFallbackFont_(a, b) {\r\n\t\treturn this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\r\n\t}\r\n\twidthsMatchLastResortWidths_(a, b) {\r\n\t\tfor (const font in LastResortFonts) {\r\n\t\t\tif (LastResortFonts.hasOwnProperty(font)) {\r\n\t\t\t\tif (this.widthMatches_(a, LastResortFonts[font]) &&\r\n\t\t\t\t\t\tthis.widthMatches_(b, LastResortFonts[font])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\twidthMatches_(width, lastResortFont) {\r\n\t\treturn width === this.lastResortWidths_[lastResortFont];\r\n\t}\r\n\tisLastResortFont_(a, b) {\r\n\t\treturn hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n\t}\r\n\tfinish_(callbacks) {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.fontRulerA_.remove();\r\n\t\t\tthis.fontRulerB_.remove();\r\n\t\t\tcallbacks.forEach((cb) => cb());\r\n\t\t}, 0);\r\n\t}\r\n}\r\n\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n\tif (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n\t\tconst match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n\r\n\t\tHAS_WEBKIT_FALLBACK_BUG = !!match &&\r\n\t\t\t(parseInt(match[1], 10) < 536 ||\r\n\t\t\t(parseInt(match[1], 10) === 536 &&\r\n\t\t\tparseInt(match[2], 10) <= 11));\r\n\t}\r\n\treturn HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\n\r\nmodule.exports = FontWatchRunner;\r\n","'use strict';\r\n\r\nfunction normalize(options) {\r\n\tif (!options) {\r\n\t\treturn [];\r\n\t}\r\n\tif (Array.isArray(options)) {\r\n\t\treturn options;\r\n\t}\r\n\tif (typeof options === 'string') {\r\n\t\treturn normalize(JSON.parse(options));\r\n\t}\r\n\tconst result = [];\r\n\tfor (const k in options) {\r\n\t\tresult.push({\r\n\t\t\tvalue: k,\r\n\t\t\tcaption: options[k]\r\n\t\t});\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nmodule.exports = {\r\n\tnormalize,\r\n};\r\n","'use strict';\r\n\r\nfunction getPath2D() {\r\n\t//return require('./legacy/canvas/Path2D');\r\n\treturn window.Path2D || require('./legacy/canvas/Path2D');\r\n}\r\n\r\nmodule.exports = {\r\n\tfill(module, ctx, x, y, w, h) {\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tconst {width, height} = module;\r\n\t\t\tconst {ud: upsideDown, x: offsetX = 0, y: offsetY = 0} = module;\r\n\t\t\tw = w || width;\r\n\t\t\th = h || height;\r\n\t\t\tconst xrate = w / width;\r\n\t\t\tconst yrate = h / (upsideDown ? -height : height);\r\n\t\t\tx = x || 0;\r\n\t\t\ty = upsideDown ? ((y || 0) + (-height * yrate)) : (y || 0);\r\n\r\n\t\t\tctx.translate(x, y);\r\n\t\t\tctx.scale(xrate, yrate);\r\n\t\t\tif (offsetX !== 0 || offsetY !== 0) {\r\n\t\t\t\tctx.translate(offsetX, offsetY);\r\n\t\t\t}\r\n\t\t\tconst Path2D = getPath2D();\r\n\t\t\tmodule.path2d = module.path2d || (new Path2D(module.d));\r\n\t\t\tctx.fill(module.path2d);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\tget Path2D() {\r\n\t\treturn getPath2D();\r\n\t},\r\n};\r\n","'use strict';\r\n{\r\n\tconst {isPromise} = require('./utils');\r\n\r\n\tfunction wait(val) {\r\n\t\treturn val.then((v) => {\r\n\t\t\tif (isPromise(v)) {\r\n\t\t\t\treturn wait(v);\r\n\t\t\t} else {\r\n\t\t\t\treturn v;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction createArray(get, length) {\r\n\t\tconst array = new Array(length);\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tarray[i] = get(i);\r\n\t\t}\r\n\t\treturn array;\r\n\t}\r\n\tfunction createArrayPromise(get, getField, length) {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst plist = [];\r\n\t\t\tconst array = new Array(length);\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst data = get(i);\r\n\t\t\t\tconst record = {\r\n\t\t\t\t\tv: data,\r\n\t\t\t\t\tf: data\r\n\t\t\t\t};\r\n\t\t\t\tarray[i] = record;\r\n\t\t\t\tif (isPromise(data)) {\r\n\t\t\t\t\tplist.push(wait(data).then((v) => {\r\n\t\t\t\t\t\trecord.v = v;\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(\r\n\t\t\t\t\t() => setArrayField(array, getField)\r\n\t\t\t).then(resolve);\r\n\t\t});\r\n\t}\r\n\tfunction setArrayField(array, getField) {\r\n\t\tif (!getField) {\r\n\t\t\treturn Promise.resolve(array);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst length = array.length;\r\n\t\t\tconst plist = [];\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst record = array[i];\r\n\t\t\t\trecord.f = getField(record.v);\r\n\t\t\t\tif (isPromise(record.f)) {\r\n\t\t\t\t\tplist.push(wait(record.f).then((v) => {\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(() => resolve(array));\r\n\t\t});\r\n\t}\r\n\tconst sort = {\r\n\t\tsort(get, set, length, compare, getField) {\r\n\t\t\tconst old = createArray(get, length);\r\n\t\t\tif (getField) {\r\n\t\t\t\told.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n\t\t\t} else {\r\n\t\t\t\told.sort(compare);\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tset(i, old[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortArray(array, compare) {\r\n\t\t\tArray.prototype.sort.call(array, compare);\r\n\t\t},\r\n\t\tsortPromise(get, set, length, compare, getField) {\r\n\t\t\tif (window.Promise) {\r\n\t\t\t\treturn createArrayPromise(get, getField, length).then((array) => {\r\n\t\t\t\t\tarray.sort((r1, r2) => compare(r1.f, r2.f));\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tset(i, array[i].v);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsort.sort(get, set, length, compare, getField);\r\n\t\t\t\tconst dummyPromise = {\r\n\t\t\t\t\tthen(fn) {\r\n\t\t\t\t\t\tfn();\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcatch() {\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn dummyPromise;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = sort;\r\n}","\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\n{\r\n\tfunction getScrollBarWidth() {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.position = 'absolute';\r\n\t\tstyle.height = '9999px';\r\n\t\tstyle.width = 'calc(100vw - 100%)';\r\n\t\tstyle.opacity = 0;\r\n\t\tdummy.textContent = 'x';\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {width} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn parseInt(width, 10);\r\n\t}\r\n\r\n\tlet SCROLLBAR_SIZE;\r\n\tconst initDocument = () => {\r\n\t\trequire('./style.css');\r\n\t\tSCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n\t\tconst style = document.createElement('style');\r\n\t\tstyle.setAttribute('type', 'text/css');\r\n\t\tstyle.setAttribute('data-name', 'cheetah-grid');\r\n\t\tstyle.innerHTML =\r\n\t\t`\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n\r\n\t\tdocument.head.appendChild(style);\r\n\t};\r\n\r\n\tconst style = {\r\n\t\tinitDocument() {\r\n\t\t\tstyle.initDocument = () => {};\r\n\t\t\tinitDocument();\r\n\t\t},\r\n\t\tgetScrollBarSize() {\r\n\t\t\treturn SCROLLBAR_SIZE;\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst Symbol = window.Symbol ? window.Symbol : (() => {\r\n\t\tlet nextId = 1;\r\n\t\treturn (name) => {\r\n\t\t\tconst id = nextId++;\r\n\t\t\tif (name) {\r\n\t\t\t\treturn ` $$$ ${name} - ${id} $$$ `;\r\n\t\t\t} else {\r\n\t\t\t\treturn ` $$$ ${id} $$$ `;\r\n\t\t\t}\r\n\t\t};\r\n\t})();\r\n\tconst mem = {};\r\n\r\n\tmodule.exports = {\r\n\t\tget(name) {\r\n\t\t\tif (name) {\r\n\t\t\t\treturn mem[name] ? mem[name] : (mem[name] = Symbol(name));\r\n\t\t\t} else {\r\n\t\t\t\treturn Symbol();\r\n\t\t\t}\r\n\t\t},\r\n\t\tget PROTECTED_SYMBOL() {\r\n\t\t\treturn this.get('protected');\r\n\t\t},\r\n\t\tget CHECK_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('chkcol.stateID');\r\n\t\t},\r\n\t\tget BUTTON_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('btncol.stateID');\r\n\t\t},\r\n\t\tget COLUMN_FADEIN_STATE_ID() {\r\n\t\t\treturn this.get('col.fadein_stateID');\r\n\t\t},\r\n\t\tget BRANCH_GRAPH_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('branch_graph_col.stateID');\r\n\t\t},\r\n\t\tget SMALL_DIALOG_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('small_dialog_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_MENU_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_menu_editor.stateID');\r\n\t\t}\r\n\t};\r\n\r\n}","'use strict';\r\n{\r\n\tlet arrayFind;\r\n\tlet arrayFindIndex;\r\n\tconst array = {\r\n\t\tget find() {\r\n\t\t\tif (arrayFind) {\r\n\t\t\t\treturn arrayFind;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.find) {\r\n\t\t\t\tarrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFind = (arr, predicate) => {\r\n\t\t\t\t\tconst index = array.findIndex(arr, predicate);\r\n\t\t\t\t\treturn index >= 0 ? arr[index] : undefined;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFind;\r\n\t\t},\r\n\t\tget findIndex() {\r\n\t\t\tif (arrayFindIndex) {\r\n\t\t\t\treturn arrayFindIndex;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.findIndex) {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => {\r\n\t\t\t\t\tconst length = arr.length;\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tconst value = arr[i];\r\n\t\t\t\t\t\tif (predicate(value, i, arr)) {\r\n\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFindIndex;\r\n\t\t},\r\n\t};\r\n\t\r\n\tfunction isDef(data) {\r\n\t\treturn data !== null && typeof data !== 'undefined';\r\n\t}\r\n\tconst ua = window.navigator.userAgent.toLowerCase();\r\n\tconst IE = (ua.match(/(msie)/) || ua.match(/trident/));\r\n\tconst Chrome = (ua.indexOf('chrome') > -1) && (ua.indexOf('edge') === -1);\r\n\tconst Firefox = (ua.indexOf('firefox') > -1);\r\n\r\n\tfunction setReadonly(obj, name, value) {\r\n\t\tObject.defineProperty(obj, name, {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction each(obj, fn) {\r\n\t\tfor (const key in obj) {\r\n\t\t\tfn(obj[key], key, obj);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isObject(obj) {\r\n\t\treturn obj === Object(obj);\r\n\t}\r\n\r\n\tfunction extend(...args) {\r\n\t\tconst result = {};\r\n\t\targs.forEach((source) => {\r\n\t\t\tfor (const key in source) {\r\n\t\t\t\tObject.defineProperty(result, key, {\r\n\t\t\t\t\tget() {\r\n\t\t\t\t\t\treturn source[key];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tset(val) {\r\n\t\t\t\t\t\tsource[key] = val;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\tfunction isDescendantElement(root, target) {\r\n\t\twhile (target.parentElement) {\r\n\t\t\tconst p = target.parentElement;\r\n\t\t\tif (root === p) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\ttarget = p;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction applyChainSafe(obj, fn, ...names) {\r\n\t\tlet value = obj;\r\n\t\tfor (let i = 0; i < names.length && isDef(value); i++) {\r\n\t\t\tvalue = fn(value, names[i]);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tfunction getChainSafe(obj, ...names) {\r\n\t\treturn applyChainSafe(obj, (val, name) => val[name], ...names);\r\n\t}\r\n\tfunction getOrApply(value, ...args) {\r\n\t\tif (typeof value === 'function') {\r\n\t\t\treturn value(...args);\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\tfunction endsWith(str, searchString, position) {\r\n\t\tconst subjectString = str.toString();\r\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\r\n\t\t\tposition = subjectString.length;\r\n\t\t}\r\n\t\tposition -= searchString.length;\r\n\t\tconst lastIndex = subjectString.lastIndexOf(searchString, position);\r\n\t\treturn lastIndex !== -1 && lastIndex === position;\r\n\t}\r\n\tconst isPromise = (data) => data && typeof data.then === 'function';\r\n\tfunction getMouseButtons(e) {\r\n\t\tif (isDef(e.buttons)) {\r\n\t\t\treturn e.buttons;\r\n\t\t}\r\n\t\t/*for legacy*/\r\n\t\tif (isDef(e.which)) {\r\n\t\t\tif (e.which === 3) { //right?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\tif (e.which === 2) { //middle?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\treturn e.which;//left or no\r\n\t\t}\r\n\t\t\r\n\t\tif (e.button === 0 || e.button === 1) {\r\n\t\t\treturn 1;//candidate left\r\n\t\t}\r\n\t\tif (e.button === 2) {\r\n\t\t\treturn 2;// right\r\n\t\t}\r\n\t\treturn 0;//no or middle?\r\n\t}\r\n\tfunction getKeyCode(e) {\r\n\t\treturn e.keyCode || e.which;\r\n\t}\r\n\tfunction isTouchEvent(e) {\r\n\t\treturn !!e.changedTouches;\r\n\t}\r\n\tfunction getIgnoreCase(obj, name) {\r\n\t\tif (obj[name]) {\r\n\t\t\treturn obj[name];\r\n\t\t}\r\n\t\tconst l = name.toLowerCase();\r\n\t\tif (obj[l]) {\r\n\t\t\treturn obj[l];\r\n\t\t}\r\n\t\tconst u = name.toLowerCase();\r\n\t\tif (obj[u]) {\r\n\t\t\treturn obj[u];\r\n\t\t}\r\n\t\tfor (const k in obj) {\r\n\t\t\tif (k.toLowerCase() === l) {\r\n\t\t\t\treturn obj[k];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\tfunction cancel(e) {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\r\n\tfunction toBoxArray(obj) {\r\n\t\tif (!Array.isArray(obj)) {\r\n\t\t\treturn [obj/*top*/, obj/*right*/, obj/*bottom*/, obj/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 3) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[2]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 2) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[0]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 1) {\r\n\t\t\treturn [obj[0]/*top*/, obj[0]/*right*/, obj[0]/*bottom*/, obj[0]/*left*/];\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t// Chrome 33554431\r\n\t// FireFox 17895588\r\n\t// IE 10737433\r\n\tmodule.exports = {\r\n\t\tisDef,\r\n\t\tbrowser: {\r\n\t\t\tIE,\r\n\t\t\tChrome,\r\n\t\t\tFirefox,\r\n\t\t\theightLimit: Chrome ? 33554431\r\n\t\t\t: Firefox ? 17895588\r\n\t\t\t: 10737433 // default IE limit\r\n\t\t},\r\n\t\textend,\r\n\t\tisDescendantElement,\r\n\t\tgetChainSafe,\r\n\t\tapplyChainSafe,\r\n\t\tgetOrApply,\r\n\t\tgetIgnoreCase,\r\n\t\tisPromise,\r\n\t\tarray,\r\n\t\tobj: {\r\n\t\t\tsetReadonly,\r\n\t\t\teach,\r\n\t\t\tisObject,\r\n\t\t},\r\n\t\tstr: {\r\n\t\t\tendsWith\r\n\t\t},\r\n\t\tevent: {\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tisTouchEvent,\r\n\t\t\tcancel,\r\n\t\t},\r\n\t\tstyle: {\r\n\t\t\ttoBoxArray,\r\n\t\t},\r\n\t\temptyFn() {},\r\n\t};\r\n}","'use strict';\r\n\r\n{\r\n\tconst core = require('./core');\r\n\tconst tools = require('./tools');\r\n\tconst columns = require('./columns');\r\n\tconst themes = require('./themes');\r\n\tconst data = require('./data');\r\n\t\r\n\tconst ListGrid = require('./ListGrid');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\t\r\n\tconst icons = require('./icons');\r\n\tconst register = require('./register');\r\n\t\r\n\t/**\r\n\t * Cheetah Grid\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcore,\r\n\t\ttools,\r\n\r\n\t\t// impl Grids\r\n\t\tListGrid,\r\n\r\n\t\t// objects\r\n\t\tcolumns,\r\n\t\tthemes,\r\n\t\tdata,\r\n\r\n\t\t// helper\r\n\t\tGridCanvasHelper,\r\n\t\tget icons() {\r\n\t\t\treturn icons.get();\r\n\t\t},\r\n\r\n\t\t//plugin registers\r\n\t\tregister,\r\n\r\n\t\tget _internal() {\r\n\t\t\tconsole.warn('use internal!!');\r\n\t\t\treturn {\r\n\t\t\t\tcolor: require('./internal/color'),\r\n\t\t\t\tsort: require('./internal/sort'),\r\n\t\t\t\tcalc: require('./internal/calc'),\r\n\t\t\t\tsymbolManager: require('./internal/symbolManager'),\r\n\t\t\t\tpath2DManager: require('./internal/path2DManager'),\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n\r\nconst themePlugins = require('./plugins/themes');\r\nconst iconPlugins = require('./plugins/icons');\r\n\r\nfunction register(obj, name, value) {\r\n\tif (value) {\r\n\t\tconst old = obj[name];\r\n\t\tobj[name] = value;\r\n\t\treturn old;\r\n\t} else {\r\n\t\treturn obj[name];\r\n\t}\r\n}\r\nfunction registers(obj, values) {\r\n\tfor (const k in values) {\r\n\t\tobj[k] = values[k];\r\n\t}\r\n}\r\nmodule.exports = {\r\n\ttheme(name, theme) {\r\n\t\treturn register(themePlugins, name, theme);\r\n\t},\r\n\ticon(name, icon) {\r\n\t\treturn register(iconPlugins, name, icon);\r\n\t},\r\n\ticons(icons) {\r\n\t\tregisters(iconPlugins, icons);\r\n\t},\r\n};","'use strict';\r\n{\r\n\tconst {extend, getIgnoreCase} = require('./internal/utils');\r\n\tconst theme = require('./themes/theme');\r\n\tconst plugins = require('./plugins/themes');\r\n\tconst BASIC = theme.create(require('./themes/BASIC'));\r\n\tconst MATERIAL_DESIGN = theme.create(require('./themes/MATERIAL_DESIGN'));\r\n\r\n\tconst builtin = {\r\n\t\tBASIC,\r\n\t\tMATERIAL_DESIGN,\r\n\t};\r\n\tlet defTheme = theme.create({});\r\n\t/**\r\n\t * themes\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tconst themes = {\r\n\t\tget default() {\r\n\t\t\treturn defTheme;\r\n\t\t},\r\n\t\tset default(defaultTheme) {\r\n\t\t\tdefTheme = defaultTheme;\r\n\t\t},\r\n\t\ttheme,\r\n\t\tof(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (typeof value === 'string') {\r\n\t\t\t\tconst t = getIgnoreCase(themes.choices, value);\r\n\t\t\t\tif (t) {\r\n\t\t\t\t\treturn t;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @namespace cheetahGrid.themes.choices\r\n\t\t */\r\n\t\tget choices() {\r\n\t\t\treturn extend(builtin, plugins);\r\n\t\t},\r\n\t};\r\n\tmodule.exports = themes;\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\nfunction DEFAULT_BG_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (!((row - frozenRowCount) & 1)) {\r\n\t\treturn '#FFF';\r\n\t} else {\r\n\t\treturn '#F6F6F6';\r\n\t}\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n\tlet stop;\r\n\tconst stopsKey = [];\r\n\tfor (stop in colorStops) {\r\n\t\tstopsKey.push(`${stop}@${colorStops[stop]}`);\r\n\t}\r\n\tconst key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(',')}`;\r\n\tconst ret = cacheLinearGradient[key];\r\n\tif (ret) {\r\n\t\treturn ret;\r\n\t}\r\n\tconst grad = context.createLinearGradient(left, top, left, bottom);\r\n\tfor (stop in colorStops) {\r\n\t\tgrad.addColorStop(stop, colorStops[stop]);\r\n\t}\r\n\treturn (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid,\r\n\t\tgrid: {frozenRowCount},\r\n\t\tcontext\r\n\t} = args;\r\n\tconst {left, top} = grid.getCellRelativeRect(col, 0);\r\n\tconst {bottom} = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n\r\n\treturn getLinearGradient(context, left, top, left, bottom, {0: '#FFF', 1: '#D3D3D3'});\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: '#000',\r\n\tdefaultBgColor: DEFAULT_BG_COLOR,\r\n\tfrozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: '#000',\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#F6F6F6',\r\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (frozenRowCount - 1 === row) {\r\n\t\treturn ['#f2f2f2', '#f2f2f2', '#ccc7c7', '#f2f2f2'];\r\n\t} else {\r\n\t\treturn ['#f2f2f2'];\r\n\t}\r\n}\r\nfunction BORDER_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid: {colCount}\r\n\t} = args;\r\n\tif (colCount - 1 === col) {\r\n\t\treturn ['#ccc7c7', '#f2f2f2', '#ccc7c7', null];\r\n\t} else {\r\n\t\treturn ['#ccc7c7', null];\r\n\t}\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\tdefaultBgColor: '#FFF',\r\n\tfrozenRowsBgColor: '#FFF',\r\n\tfrozenRowsColor: 'rgba(0, 0, 0, 0.54)',\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: BORDER_COLOR,\r\n\tfrozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t\tborderColor: 'rgba(0, 0, 0, 0.26)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#FFF',\r\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst defaultTheme = require('./MATERIAL_DESIGN');\r\n\r\n\tfunction getProp(obj, superObj, names, defNames) {\r\n\t\treturn getChainSafe(obj, ...names) ||\r\n\t\t(defNames && getChainSafe(obj, ...defNames)) ||\r\n\t\tgetChainSafe(superObj, ...names);\r\n\t}\r\n\tfunction createTheme(obj = {}, superTheme = defaultTheme) {\r\n\t\treturn {\r\n\t\t\tget font() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['font']);\r\n\t\t\t},\r\n\t\t\tget underlayBackgroundColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['underlayBackgroundColor']);\r\n\t\t\t},\r\n\t\t\t// color\r\n\t\t\tget color() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['color']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsColor'], ['color']);\r\n\t\t\t},\r\n\t\t\t// background\r\n\t\t\tget defaultBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget selectionBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['selectionBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\t// border\r\n\t\t\tget borderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget hiliteBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['hiliteBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget checkbox() {\r\n\t\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'uncheckBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'checkBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget borderColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'borderColor'], ['borderColor']);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tget button() {\r\n\t\t\t\treturn this._button || (this._button = {\r\n\t\t\t\t\tget color() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'color'], ['color']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget bgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'bgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\textends(obj) {\r\n\t\t\t\treturn createTheme(obj, this);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * theme object\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes.theme\r\n\t * @memberof cheetahGrid.themes\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcreate(obj) {\r\n\t\t\treturn createTheme(obj);\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\r\n\t/**\r\n\t * tools\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcanvashelper,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {calcBasePosition, calcStartPosition} = require('../internal/canvases');\r\n\tconst {ceil, PI} = Math;\r\n\r\n\tfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n\t\tfunction strokeRectLines(positions) {\r\n\t\t\tfor (let i = 0; i < borderColors.length; i++) {\r\n\t\t\t\tconst color = borderColors[i];\r\n\t\t\t\tconst preColor = borderColors[i - 1];\r\n\t\t\t\tif (color) {\r\n\t\t\t\t\tif (preColor !== color) {\r\n\t\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst pos1 = positions[i];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(pos1.x, pos1.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst pos2 = positions[i + 1];\r\n\t\t\t\t\tctx.lineTo(pos2.x, pos2.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst preColor = borderColors[borderColors.length - 1];\r\n\t\t\tif (preColor) {\r\n\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (borderColors[0] === borderColors[1] &&\r\n\t\t\tborderColors[0] === borderColors[2] &&\r\n\t\t\tborderColors[0] === borderColors[3]) {\r\n\t\t\tif (borderColors[0]) {\r\n\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrokeRectLines([\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t\t{x: left + width, y: top},\r\n\t\t\t\t{x: left + width, y: top + height},\r\n\t\t\t\t{x: left, y: top + height},\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\tfunction roundRect(ctx, left, top, width, height, radius) {\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n\t\tctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n\t\tctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n\t\tctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n\t\tctx.closePath();\r\n\t}\r\n\tfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.fill();\r\n\t}\r\n\tfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.stroke();\r\n\t}\r\n\tfunction fillTextRect(ctx, text, left, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcBasePosition(ctx, rect, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.fillText(text, pos.x, pos.y);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawInlineImageRect(ctx, image,\r\n\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\tdestWidth, destHeight,\r\n\t\t\tleft, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, destWidth, destHeight, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.drawImage(image,\r\n\t\t\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\t\t\tpos.x, pos.y, destWidth, destHeight\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an object containing the width of the checkbox.\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @return {Object} Object containing the width of the checkbox\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction measureCheckbox(ctx) {\r\n\t\treturn {\r\n\t\t\twidth: ctx.measureText('').width\r\n\t\t};\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * draw Checkbox\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {boolean|number} check checkbox check status\r\n\t * @param  {object} option option\r\n\t * @return {void}\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction drawCheckbox(ctx, x, y, check,\r\n\t\t\t{\r\n\t\t\t\tuncheckBgColor = '#FFF',\r\n\t\t\t\tcheckBgColor = 'rgb(76, 73, 72)',\r\n\t\t\t\tborderColor = '#000',\r\n\t\t\t\tboxSize = measureCheckbox(ctx).width,\r\n\t\t\t} = {}) {\r\n\t\tconst checkPoint = typeof check === 'number' ? (check > 1 ? 1 : check) : 1;\r\n\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n\t\t\t\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 1,\r\n\t\t\t\t\tceil(y) - 1,\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.strokeStyle = borderColor;\r\n\t\t\tstrokeRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 0.5,\r\n\t\t\t\t\tceil(y) - 0.5,\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tif (check) {\r\n\t\t\t\tctx.lineWidth = ceil(boxSize / 10);\r\n\t\t\t\tctx.strokeStyle = uncheckBgColor;\r\n\t\t\t\tlet leftWidth = boxSize / 4;\r\n\t\t\t\tlet rightWidth = boxSize / 2 * 0.9;\r\n\t\t\t\tconst leftLeftPos = x + boxSize * 0.2;\r\n\t\t\t\tconst leftTopPos = y + boxSize / 2;\r\n\r\n\t\t\t\tif (checkPoint < 0.5) {\r\n\t\t\t\t\tleftWidth = leftWidth * (checkPoint * 2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(leftLeftPos, leftTopPos);\r\n\t\t\t\tctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n\t\t\t\tif (checkPoint > 0.5) {\r\n\t\t\t\t\tif (checkPoint < 1) {\r\n\t\t\t\t\t\trightWidth = rightWidth * ((checkPoint - 0.5) * 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n\t\tconst {\r\n\t\t\tbackgroundColor = '#FFF',\r\n\t\t\tbgColor = backgroundColor,\r\n\t\t\tradius = 4,\r\n\t\t\tshadow = {},\r\n\t\t} = option;\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = bgColor;\r\n\r\n\t\t\tif (shadow) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, 0.24)',\r\n\t\t\t\t\tblur = 1,\r\n\t\t\t\t\toffsetX = 0,\r\n\t\t\t\t\toffsetY = 2,\r\n\t\t\t\t\toffset: {\r\n\t\t\t\t\t\tx: ox = offsetX,\r\n\t\t\t\t\t\ty: oy = offsetY\r\n\t\t\t\t\t} = {},\r\n\t\t\t\t} = shadow;\r\n\t\t\t\tctx.shadowColor = color;\r\n\t\t\t\tctx.shadowBlur = blur; //\r\n\t\t\t\tctx.shadowOffsetX = ox;\r\n\t\t\t\tctx.shadowOffsetY = oy;\r\n\t\t\t}\r\n\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(left),\r\n\t\t\t\t\tceil(top),\r\n\t\t\t\t\tceil(width),\r\n\t\t\t\t\tceil(height),\r\n\t\t\t\t\tradius\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * canvashelper\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools.canvashelper\r\n\t * @memberof cheetahGrid.tools\r\n\t */\r\n\tconst canvashelper = {\r\n\t\troundRect,\r\n\t\tfillRoundRect,\r\n\t\tstrokeRoundRect,\r\n\t\tdrawCheckbox,\r\n\t\tmeasureCheckbox,\r\n\t\tfillTextRect,\r\n\t\tdrawButton,\r\n\t\tdrawInlineImageRect,\r\n\t\tstrokeColorsRect,\r\n\t};\r\n\r\n\r\n\tmodule.exports = canvashelper;\r\n}"],"sourceRoot":""}
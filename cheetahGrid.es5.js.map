{"version":3,"sources":["cheetahGrid.es5/cheetahGrid.es5.js","cheetahGrid.es5/webpack/universalModuleDefinition","cheetahGrid.es5/webpack/bootstrap","cheetahGrid.es5/./columns/action/internal/InlineInputElement.css","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.css","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.css","cheetahGrid.es5/./columns/message/internal/ErrorMessageElement.css","cheetahGrid.es5/./columns/message/internal/MessageElement.css","cheetahGrid.es5/./columns/message/internal/WarningMessageElement.css","cheetahGrid.es5/./internal/style.css","cheetahGrid.es5/node_modules/css-loader/lib/css-base.js","cheetahGrid.es5/node_modules/style-loader/lib/addStyles.js","cheetahGrid.es5/node_modules/style-loader/lib/urls.js","cheetahGrid.es5/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg","cheetahGrid.es5/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg","cheetahGrid.es5/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg","cheetahGrid.es5/./GridCanvasHelper.js","cheetahGrid.es5/./ListGrid.js","cheetahGrid.es5/./columns.js","cheetahGrid.es5/./columns/action.js","cheetahGrid.es5/./columns/action/Action.js","cheetahGrid.es5/./columns/action/BaseAction.js","cheetahGrid.es5/./columns/action/BaseInputEditor.js","cheetahGrid.es5/./columns/action/ButtonAction.js","cheetahGrid.es5/./columns/action/CheckEditor.js","cheetahGrid.es5/./columns/action/Editor.js","cheetahGrid.es5/./columns/action/InlineInputEditor.js","cheetahGrid.es5/./columns/action/InlineMenuEditor.js","cheetahGrid.es5/./columns/action/SmallDialogInputEditor.js","cheetahGrid.es5/./columns/action/actionBind.js","cheetahGrid.es5/./columns/action/internal/InlineInputElement.css*","cheetahGrid.es5/./columns/action/internal/InlineInputElement.js","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.css*","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.js","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.es5/./columns/message/BaseMessage.js","cheetahGrid.es5/./columns/message/ErrorMessage.js","cheetahGrid.es5/./columns/message/InfoMessage.js","cheetahGrid.es5/./columns/message/MessageHandler.js","cheetahGrid.es5/./columns/message/WarningMessage.js","cheetahGrid.es5/./columns/message/internal/ErrorMessageElement.css*","cheetahGrid.es5/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.es5/./columns/message/internal/MessageElement.css*","cheetahGrid.es5/./columns/message/internal/MessageElement.js","cheetahGrid.es5/./columns/message/internal/WarningMessageElement.css*","cheetahGrid.es5/./columns/message/internal/WarningMessageElement.js","cheetahGrid.es5/./columns/style.js","cheetahGrid.es5/./columns/style/BaseStyle.js","cheetahGrid.es5/./columns/style/BranchGraphStyle.js","cheetahGrid.es5/./columns/style/ButtonStyle.js","cheetahGrid.es5/./columns/style/CheckStyle.js","cheetahGrid.es5/./columns/style/IconStyle.js","cheetahGrid.es5/./columns/style/ImageStyle.js","cheetahGrid.es5/./columns/style/NumberStyle.js","cheetahGrid.es5/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.es5/./columns/style/StdBaseStyle.js","cheetahGrid.es5/./columns/style/Style.js","cheetahGrid.es5/./columns/type.js","cheetahGrid.es5/./columns/type/BaseColumn.js","cheetahGrid.es5/./columns/type/BranchGraphColumn.js","cheetahGrid.es5/./columns/type/ButtonColumn.js","cheetahGrid.es5/./columns/type/CheckColumn.js","cheetahGrid.es5/./columns/type/Column.js","cheetahGrid.es5/./columns/type/IconColumn.js","cheetahGrid.es5/./columns/type/ImageColumn.js","cheetahGrid.es5/./columns/type/MenuColumn.js","cheetahGrid.es5/./columns/type/NumberColumn.js","cheetahGrid.es5/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.es5/./columns/type/columnUtils.js","cheetahGrid.es5/./core.js","cheetahGrid.es5/./core/DrawGrid.js","cheetahGrid.es5/./core/EventTarget.js","cheetahGrid.es5/./data.js","cheetahGrid.es5/./data/CachedDataSource.js","cheetahGrid.es5/./data/DataSource.js","cheetahGrid.es5/./element/Inline.js","cheetahGrid.es5/./element/InlineDrawer.js","cheetahGrid.es5/./element/InlineIcon.js","cheetahGrid.es5/./element/InlineImage.js","cheetahGrid.es5/./element/InlinePath2D.js","cheetahGrid.es5/./element/InlineSvg.js","cheetahGrid.es5/./element/inlines.js","cheetahGrid.es5/./header/style.js","cheetahGrid.es5/./header/style/BaseStyle.js","cheetahGrid.es5/./header/style/Style.js","cheetahGrid.es5/./header/type.js","cheetahGrid.es5/./header/type/BaseHeader.js","cheetahGrid.es5/./header/type/Header.js","cheetahGrid.es5/./header/type/SortHeader.js","cheetahGrid.es5/./icons.js","cheetahGrid.es5/./internal/EventHandler.js","cheetahGrid.es5/./internal/LRUCache.js","cheetahGrid.es5/./internal/NumberMap.js","cheetahGrid.es5/./internal/Rect.js","cheetahGrid.es5/./internal/Scrollable.js","cheetahGrid.es5/./internal/animate.js","cheetahGrid.es5/./internal/calc.js","cheetahGrid.es5/./internal/canvases.js","cheetahGrid.es5/./internal/color.js","cheetahGrid.es5/./internal/com.js","cheetahGrid.es5/./internal/dom.js","cheetahGrid.es5/./internal/fonts.js","cheetahGrid.es5/./internal/hiDPI.js","cheetahGrid.es5/./internal/icons.js","cheetahGrid.es5/./internal/imgs.js","cheetahGrid.es5/./internal/legacy/canvas/Path2D.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommands.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.es5/./internal/menu-items.js","cheetahGrid.es5/./internal/path2DManager.js","cheetahGrid.es5/./internal/sort.js","cheetahGrid.es5/./internal/style.css*","cheetahGrid.es5/./internal/style.js","cheetahGrid.es5/./internal/symbolManager.js","cheetahGrid.es5/./internal/utils.js","cheetahGrid.es5/./list-grid/EVENT_TYPE.js","cheetahGrid.es5/./main.js","cheetahGrid.es5/./plugins/icons.js","cheetahGrid.es5/./plugins/themes.js","cheetahGrid.es5/./register.js","cheetahGrid.es5/./themes.js","cheetahGrid.es5/./themes/BASIC.js","cheetahGrid.es5/./themes/MATERIAL_DESIGN.js","cheetahGrid.es5/./themes/theme.js","cheetahGrid.es5/./tools.js","cheetahGrid.es5/./tools/canvashelper.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","window","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","push","useSourceMap","list","toString","map","item","content","cssWithMappingToString","join","mediaQuery","alreadyImportedModules","length","id","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","concat","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","stylesInDom","memoize","fn","memo","apply","arguments","isOldIE","document","all","atob","getTarget","target","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","options","DEBUG","Error","attrs","insertInto","insertAt","styles","listToStyles","addStylesToDom","update","newList","mayRemove","domStyle","refs","newStyles","j","parts","addStyle","base","css","media","part","insertStyleElement","style","lastStyleElementInsertedAtTop","insertBefore","firstChild","nextSibling","appendChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","type","addAttrs","createLinkElement","link","rel","el","keys","forEach","key","setAttribute","obj","remove","result","transform","styleIndex","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","updateStyle","newObj","replaceText","textStore","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","undefined","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","replace","fixedCss","fullMatch","origUrl","unquotedOrigUrl","trim","$1","test","newUrl","width","height","__webpack_provided_Array_dot_isArray","invalidateCell","context","grid","col","row","getColor","color","getOrApply","getThemeColor","names","getChainSafe","theme","themes","default","testFontLoad","font","fonts","check","load","drawInlines","ctx","inlines","rect","offset","drawInline","inline","offsetLeft","offsetRight","canDraw","save","fillStyle","draw","canvashelper","restore","onReady","inlineWidths","reduce","a","b","inlineWidth","_inlineRect","textAlign","textBaseline","icons","actInlines","buildInlines","drawCheckbox","helper","animElapsedTime","uncheckBgColor","checkbox","checkBgColor","borderColor","boxWidth","measureCheckbox","pos","calcStartPosition","uncheckBgRGB","colorToRGB","checkBgRGB","checkRGB","colorName","start","end","diff","Math","ceil","uncheckRGB","x","y","strokeRect","left","top","strokeStyle","borderColors","toBoxArray","strokeColorsRect","Rect","calc","Theme","constructor","_grid","_checkbox","_button","bgColor","GridCanvasHelper","_theme","calcWidth","toPx","full","getRect","em","getContext","measureText","calcHeight","calculator","createCalculator","box","drawRect","getDrawRect","beginPath","clip","clipLeft","clipWidth","clipTop","clipHeight","text","padding","isFrozenCell","frozenRowsColor","drawWithClip","toBoxPixelArray","fillText","fillColor","defaultBgColor","fill","option","getFillColorState","fillCell","fillRect","state","getSelectState","selected","selection","selectionBgColor","frozenRowsBgColor","lineWidth","drawBorderWithClip","startOffset","hiliteBorderColor","border","frozenRowsBorderColor","sel","select","moveTo","lineTo","bottom","stroke","right","caption","button","shadow","drawButton","radius","_getHeaderCellRange","_","headerMap","getHeaderCellRange","_updateRect","startCol","endCol","startRow","endRow","getColWidth","getRowHeight","setRect","_getCellValue","rowCount","getCell","field","columns","isObject","set","_getField","_setCellValue","_getRowRecordIndex","res","dataSource","setField","isPromise","_getCellMessage","message","_getCellIcon0","icon","isDef","retIcon","iconPropKeys","k","f","_hasField","_getCellIcon","getField","hasField","_onDrawValue","cellValue","gridCanvasHelper","drawCellBg","fillOpt","fillCellWithState","drawCellBorder","frozenColCount","frozenRowCount","_headerBorderWithState","borderWithState","drawCellBase","info","getRecord","getRowRecord","getIcon","getMessage","messageHandler","selId","_refreshHeader","headerEvents","unlisten","HeaderMap","header","headerObjects","cell","ids","headerType","bindGridEvent","HeaderBaseStyle","listen","EVENT_TYPE","CHANGE_STYLE","invalidate","action","isTarget","columnType","BaseStyle","colCount","_refreshRowCount","column","minWidth","maxWidth","setColWidth","setMinColWidth","setMaxColWidth","isArrayHeaderRowHeight","headerRowHeight","setRowHeight","_tryWithUpdateDataSource","dataSourceEventIds","handler","off","on","DataSource","UPDATED_LENGTH","UPDATED_ORDER","_setRecords","records","CachedDataSource","ofArray","_setDataSource","EMPTY","adjustListGridOption","then","DrawGrid","MessageHandler","PROTECTED_SYMBOL","headerId","_columns","_headerCells","_headerObjects","_addHeaders","_setupHeaderType","isCellInRange","roots","rowCells","_newRow","hd","headerStyle","sort","of","range","getHeaderCellRangeById","create","newRow","prev","ListGrid","sortState","order","updateSize","updateScroll","dispose","onDrawCell","valueCallback","changeValueCallback","after","ret","self","fireListeners","CHANGED_VALUE","record","SELECTED_CELL","invalidateGridRect","columnIndex","newCol","getColumnIndexByField","focusCell","makeVisibleCell","underlayBackgroundColor","BaseAction","Action","Editor","CheckEditor","ButtonAction","SmallDialogInputEditor","InlineInputEditor","InlineMenuEditor","ImmutableCheckEditor","_disabled","_readOnly","ImmutableInputEditor","ACTIONS","CHECK","INPUT","console","warn","columnAction","DEFAULT","toUpperCase","bindCellClickAction","bindCellKeyAction","_action","util","getState","disabled","mouseOver","mouseActiveCell","mouseOut","onChangeDisabledInternal","INPUT_CELL","EDITABLEINPUT_CELL","DBLCLICK_CELL","DBLTAP_CELL","KEYDOWN","MODIFY_STATUS_EDITABLEINPUT_CELL","SCROLL","KEY_ENTER","KEY_F2","BaseInputEditor","inputValue","input","open","readOnly","onOpenCellInternal","onInputCellInternal","event","preventDefault","stopPropagation","keyCode","onChangeSelectCellInternal","onGridScrollInternal","onSetInputAttrsInternal","setReadonly","BUTTON_COLUMN_STATE_ID","toggleValue","val","match","animate","CHECK_COLUMN_STATE_ID","KEY_SPACE","blockKey","doChangeValue","onChange","point","elapsed","selrange","acceptKeys","onChangeReadOnlyInternal","InlineInputElement","INLINE_INPUT_EDITOR_STATE_ID","globalElement","bindGridCount","attachInput","editor","element","addDisposable","attach","detachInput","gridFocus","detach","_classList","classList","_type","doGetCellValue","setInputAttrs","normalize","CLICK_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","MOUSEMOVE_CELL","InlineMenuElement","INLINE_MENU_EDITOR_STATE_ID","attachMenu","detachMenu","_options","cursor","SmallDialogInputElement","SMALL_DIALOG_INPUT_EDITOR_STATE_ID","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","_inputDialogManager","cancel","locals","getKeyCode","cancelEvent","EventHandler","CLASSNAME","createInputElement","add","_handler","_input","_bindInputEvents","_beforePropEditor","getAttachCellArea","toFixed","_activeData","focus","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","tryWithOffEvents","_isActive","parentElement","stopPropagationOnly","contains","appendHtml","empty","disableFocus","isFocusable","findPrevSiblingFocusable","findNextSiblingFocusable","KEY_TAB","KEY_UP","KEY_DOWN","KEY_ESC","ITEM_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","createMenuElement","attachElement","menu","optionToLi","html","tabIndex","dataset","valueindex","span","openMenu","emptyItemEl","valueItemEl","focusEl","children","Array","slice","focusIndex","allHeight","offsetHeight","offsetTop","menuClientRect","getBoundingClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","winMargin","closeMenu","_menu","_bindMenuEvents","_doChangeValue","shiftKey","items","querySelectorAll","INPUT_CLASSNAME","_focus","createDialogElement","readonly","bindProps","dialog","unbindProps","_dialog","_bindDialogEvents","errorMessage","activeData","_onInputValue","_beforeValue","_validate","onKeyupAndPress","_onInputValueChange","inputOnly","BaseMessage","detachMessageElement","_messageElement","createMessageElementInternal","messageElement","_getMessageElement","move","_detach","drawCellMessageInternal","ErrorMessageElement","RED_A100","ErrorMessage","boxRect","copy","fillRectWithState","MessageElement","GREY_L2","InfoMessage","WarningMessage","_messageInstances","_bindGridEvent","messageInstances","instance","_getMessageInstanceOfMessage","drawCellMessage","_attachInfo","attachMessageElement","_toMessageText","moveMessageElement","onSelectMessage","_attach","_move","_createMessageInstance","toLowerCase","Message","WarningMessageElement","DEEP_ORANGE_A100","MESSAGE_CLASSNAME","_rootElement","createrootElement","rootElement","_attachCell","textContent","frozenRect","offsetWidth","Style","NumberStyle","CheckStyle","ButtonStyle","ImageStyle","IconStyle","PercentCompleteBarStyle","columnStyle","StyleClass","EventTarget","defaultStyle","_bgColor","doChangeStyle","adj","DEFAULT_BRANCH_COLORS","BranchGraphStyle","_branchColors","branchColors","_margin","margin","_circleSize","circleSize","_branchLineWidth","branchLineWidth","_mergeStyle","mergeStyle","buttonBgColor","_buttonBgColor","StdBaseStyle","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","DEFAULT_BAR_COLOR","num","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","_textAlign","_textBaseline","_color","_font","_padding","Column","NumberColumn","CheckColumn","ButtonColumn","ImageColumn","PercentCompleteBarColumn","IconColumn","BranchGraphColumn","MenuColumn","TYPES","NUMBER","BUTTON","IMAGE","isFadeinWhenCallbackInPromise","_fadeinWhenCallbackInPromise","configure","getFadinState","COLUMN_FADEIN_STATE_ID","_generateFadinPointAction","drawInternal","stateKey","opacity","cellState","globalAlpha","styleContents","fadinMgr","activeFadeins","margeAnimate","BaseColumn","fadeinWhenCallbackInPromise","getGridCanvasHelper","drawing","Date","now","currentContext","toCurrentContext","time","actStyle","convertInternal","drawMessageInternal","BRANCH_GRAPH_COLUMN_STATE_ID","getAllColumnData","callback","allData","promise","dataIndex","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","t","mergeLines","joinLine","timeline","branchIndex","reverse","tl","branch","from","to","branches","findBranchRootIndex","fromTargetIndex","branchTargetFromIndex","branchPoint","targetLine","merge","commitTag","commitMerge","fromTargetLine","pop","calcCommand","command","timelineData","commands","cmd","calcBranchesInfo","calcBranchXPoints","w","max","textWidth","renderMerge","upLineIndex","downLineIndex","branchXPoints","lineCap","upX","upRect","getCellRelativeRect","upY","bezierCurveTo","downX","downRect","downY","_start","_cache","cache","upLineIndexKey","downLineIndexKey","line","pointIndex","arc","PI","closePath","utils","_caption","clone","active","loadIcons","blur","offsetY","toBoolean","opt","repeatArray","count","Infinity","_tagName","tagName","_className","className","_content","_name","_iconWidth","iconWidth","isNaN","getImage","url","getCacheOrLoad","MAX_LRU_CACHE_SIZE","calcKeepAspectRatioSize","maxHeight","newWidth","newHeight","drawImage","_convertInternal","basePadding","textPadding","iconPadding","path","defaultFotmat","Intl","NumberFormat","fmt","_format","format","str","MARGIN","_min","min","_max","_formatter","formatter","v","svalue","endsWith","substr","rate","barMaxWidth","barTop","barLeft","barSize","loadIcon","iconList","toNormarizeArray","createRootElement","_vibrate","navigator","vibrate","isTouchEvent","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startBottom","_getRowHeight","findAfter","candRow","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_isCellDrawing","drawCells","_putCellDrawing","_removeCellDrawing","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","bounds","dcContext","DrawCellContext","pCol","_delayMode","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","_invalidateRect","_getVisibleRect","_getInitContext","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_getDefaultColPxWidth","defaultColWidth","_adjustColWidth","orgWidth","limit","colWidthsLimit","colWidthsMap","_setColWidth","put","each","getRowHeightInternal","rowHeightsMap","_setRowHeight","getRowsHeightInternal","h","_getScrollWidth","eachAll","_getScrollHeight","getScrollHeightInternal","_onScroll","lastLeft","lastTop","moveX","scrollable","scrollLeft","moveY","scrollTop","abs","redrawRect","_onKeyDownMove","_sel","KEY_LEFT","getMoveLeftColByKeyDownInternal","_moveFocusCell","getMoveUpRowByKeyDownInternal","KEY_RIGHT","getMoveRightColByKeyDownInternal","getMoveDownRowByKeyDownInternal","KEY_HOME","ctrlKey","KEY_END","getOffsetInvalidateCells","extendRange","beforeRange","beforeRect","getCellsRect","_setFocusCell","afterRange","afterRect","intersection","invalidateRect","_getMouseAbstractPoint","changedTouches","clientX","pageX","scrollX","clientY","pageY","scrollY","_bindEvents","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","eventArgsSet","results","MOUSEDOWN_CELL","array","findIndex","getMouseButtons","resizeCol","_getResizeColAt","columnResizer","cellSelector","doubleTapBefore","longTouchId","setTimeout","defaultPrevented","clearTimeout","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","MOUSEENTER_CELL","onMouseleaveCell","beforeMouseCell","MOUSELEAVE_CELL","onMouseoverCell","onMouseoutCell","scrollElement","moving","lastMoving","hasListeners","focusControl","onScroll","onKeyDownMove","copyValue","copyCellValue","getCopyCellValue","Promise","strCellValue","onCopy","find","onInput","bindEventsInternal","abstractX","abstractY","inPoint","cellRect","getCellRect","_getScrollableVisibleRect","frozenColsWidth","frozenRowsHeight","_toRelativeRect","absoluteRect","setSafeInputValue","browser","isDescendantElement","Scrollable","NumberMap","hiDPI","KEY_ALPHA_C","MOUSEUP_CELL","RESIZE_COLUMN","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","mousemove","body","_mouseMove","mouseup","_mouseUp","touchmove","passive","touchend","touchcancel","_moveInternal","_upInternal","CellSelector","_getTargetCell","_bindMoveAndUp","_cell","makeVisibleCol","makeVisibleRow","ColumnResizer","_targetCol","_x","_preX","_invalidateAbsoluteLeft","pre","afterSize","FocusControl","_scrollable","_isComposition","metaKey","inputClear","IE","clipboardData","setData","calcTop","getScrollBarSize","composition","atts","attributes","removeNames","att","_inputStatus","nodeName","removeName","removeAttribute","editMode","Selection","_end","_wrapFireSelectedEvent","keepSelect","_setSelectCell","_isWraped","inCell","_layers","level","DrawLayer","addDraw","_level","_list","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_toRelativeDrawRect","fRect","onTerminate","_onTerminate","initDocument","alpha","cfg","config","floor","setFocusRect","setScrollSize","maxwidth","minwidth","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","frozen","getRowAt","getColAt","oldEditMode","resetInputStatus","selCol","selRow","storeInputStatus","setDefaultInputStatus","cellsRect","invalidateTarget","disposable","disposables","nextId","listeners","listenerData","listener","args","_setFieldCache","_fCache","recCache","_rCache","fCache","getValue","setPromiseBack","ss","split","applyChainSafe","emptyFn","_getIndex","_sortedIndexMap","mapIndex","UPDATE_LENGTH","_get","_length","getOriginal","getOriginalField","hasOriginalField","setOriginalField","sortedIndexMap","orderFn","v1","v2","sortPromise","recordPromiseCallBackInternal","fieldPromiseCallBackInternal","Inline","fillTextRect","InlineDrawer","_draw","_width","_height","InlineIcon","_icon","InlineImage","src","imageLeft","imageTop","imageWidth","imageHeight","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_onloaded","_loaded","_loadImage","img","_inlineImg","drawInlineImageRect","path2DManager","InlinePath2D","_path","Path2D","translate","buildSvgDataUrl","svg","XMLSerializer","serializeToString","getSvgElement","parser","DOMParser","parseFromString","InlineSvg","svgElem","elmWidth","getAttribute","elmHeight","drawRegisteredIcon","drawWidth","drawHeight","iconOf","regedIcons","regedIcon","il","Header","SortHeader","headerCell","BaseHeader","_headerCell","_sort","_range","arrowSize","newState","_executeSort","extend","plugins","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","_listeners","addEventListener","removeEventListener","clear","LRUCache","cacheSize","_map","_cacheSize","remKey","shift","indexFirst","ary","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","_left","_top","_right","_bottom","x0","x1","y0","y1","another","rect1","rect2","_update","domHeight","MAX_SCROLL","sbSize","vScrollRange","rScrollRange","_p","_endPointElement","heightLimit","relativeTop","cubicBezier","x2","y2","x3","y3","step","err","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","duration","easing","startedAt","canceledFlg","createAnim","resolve","reject","anim","parse","calcStr","replacer","unit","script","eval","calcBasePosition","paddingLeft","paddingRight","styleColorToRGB","dummy","position","defaultView","getComputedStyle","styleColor","colorToRGB0","hexToNum","hex","parseInt","createRGB","g","tripleHexToRGB","sextupleHexToRGB","r1","r2","g1","g2","b1","b2","testRGB","rateToByte","rgb","rgbMap","isArray","innerHTML","dom","isNode","arg","nodeType","toNode","toNodeList","jQuery","inner","node","disableBeforeTabIndex","enableFocus","previousSibling","loads","legacy","testStr","ready","ratio","setRatio","devicePixelRatio","wh","scale","ICON_PROP_KEYS","quote","quoted","doms","props","getIconProps","tagProps","beforeStyle","getPropertyValue","clientWidth","isLiga","toPropArray","prop","toSimpleArray","iconProps","workData","normarize","allCache","isDataUrl","search","loadImage","error","Image","onload","onerror","getCacheOrLoad0","cacheName","PathCommandsParser","_ops","op","CanvasRenderingContext2D","originalFill","mag","sqrt","pow","dot","u","clamp","angle","sign","acos","rotClockwise","cost","cos","sint","sin","rotCounterClockwise","midPoint","meanVec","pointMul","sum","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","xPrime2","rx2","ry2","lambda","factor","cPrime","x1UnitVector","x2UnitVector","theta","deltaTheta","rotate","PathCommands","lMx","lMy","lx","ly","reflected","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","quadraticCurveTo","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","pathTokens","next","builder","argsProvider","canvasOperations","_commands","ops","tokens","subsequentCommand","fst","log","computeStyle","display","FontRuler","el_","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","getWidth","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","lastResortFont","hasWebKitFallbackBug","widthsMatchLastResortWidths_","callbacks","cb","HAS_WEBKIT_FALLBACK_BUG","exec","userAgent","getPath2D","upsideDown","ud","offsetX","xrate","yrate","path2d","wait","createArray","createArrayPromise","plist","setArrayField","compare","old","sortArray","dummyPromise","catch","getScrollBarWidth","SCROLLBAR_SIZE","Symbol","mem","searchString","subjectString","isFinite","lastIndex","lastIndexOf","buttons","which","getIgnoreCase","arrayFind","arrayFindIndex","arr","predicate","ua","Chrome","Firefox","core","tools","register","_internal","symbolManager","themePlugins","iconPlugins","registers","values","BASIC","MATERIAL_DESIGN","builtin","defTheme","defaultTheme","choices","DEFAULT_BG_COLOR","cacheLinearGradient","getLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","FROZEN_ROWS_BG_COLOR","FROZEN_ROWS_BORDER_COLOR","BORDER_COLOR","getProp","superObj","defNames","createTheme","superTheme","extends","strokeRectLines","positions","preColor","pos1","pos2","roundRect","fillRoundRect","strokeRoundRect","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftWidth","rightWidth","leftLeftPos","leftTopPos","backgroundColor","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","global"],"mappings":"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","file":"cheetahGrid.es5.js","sourcesContent":["(function(){\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineInputElement.css\":\n/*!***********************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/action/internal/InlineInputElement.css ***!\n  \\***********************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineMenuElement.css\":\n/*!**********************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/action/internal/InlineMenuElement.css ***!\n  \\**********************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/SmallDialogInputElement.css\":\n/*!****************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/action/internal/SmallDialogInputElement.css ***!\n  \\****************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/ErrorMessageElement.css\":\n/*!*************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/message/internal/ErrorMessageElement.css ***!\n  \\*************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/MessageElement.css\":\n/*!********************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/message/internal/MessageElement.css ***!\n  \\********************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;user-select:none}.cheetah-grid__message-element--hidden{opacity:0;display:none}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}.cheetah-grid__message-element{border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element.helper-text--right-justified{text-align:right}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/WarningMessageElement.css\":\n/*!***************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/message/internal/WarningMessageElement.css ***!\n  \\***************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./internal/style.css\":\n/*!*******************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./internal/style.css ***!\n  \\*******************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/lib/css-base.js\":\n/*!*****************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader/lib/css-base.js ***!\n  \\*****************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n\n/***/ \"../../node_modules/style-loader/lib/addStyles.js\":\n/*!********************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/style-loader/lib/addStyles.js ***!\n  \\********************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(/*! ./urls */ \"../../node_modules/style-loader/lib/urls.js\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n\n/***/ \"../../node_modules/style-loader/lib/urls.js\":\n/*!***************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/style-loader/lib/urls.js ***!\n  \\***************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/content/svg/production/ic_add_48px.svg\":\n/*!*************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg ***!\n  \\*************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons\\content\\svg\\production\\ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg\":\n/*!************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg ***!\n  \\************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons\\image\\svg\\production\\ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\":\n/*!***************************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg ***!\n  \\***************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\":\n/*!*************************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg ***!\n  \\*************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg\":\n/*!*************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg ***!\n  \\*************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg\":\n/*!********************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg ***!\n  \\********************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg\":\n/*!******************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg ***!\n  \\******************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n\n/***/ \"./GridCanvasHelper.js\":\n/*!*****************************!*\\\n  !*** ./GridCanvasHelper.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {/*eslint no-bitwise:0*/\n\n\n{\n\tconst { calcStartPosition } = __webpack_require__(/*! ./internal/canvases */ \"./internal/canvases.js\");\n\tconst inlines = __webpack_require__(/*! ./element/inlines */ \"./element/inlines.js\");\n\tconst canvashelper = __webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\");\n\tconst themes = __webpack_require__(/*! ./themes */ \"./themes.js\");\n\tconst { colorToRGB } = __webpack_require__(/*! ./internal/color */ \"./internal/color.js\");\n\tconst Rect = __webpack_require__(/*! ./internal/Rect */ \"./internal/Rect.js\");\n\tconst { getChainSafe, getOrApply, style: { toBoxArray } } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\tconst fonts = __webpack_require__(/*! ./internal/fonts */ \"./internal/fonts.js\");\n\tconst calc = __webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\");\n\n\tfunction invalidateCell(context, grid) {\n\t\tconst { col, row } = context;\n\t\tgrid.invalidateCell(col, row);\n\t}\n\tfunction getColor(color, col, row, grid, context) {\n\t\treturn getOrApply(color, {\n\t\t\tcol,\n\t\t\trow,\n\t\t\tgrid,\n\t\t\tcontext\n\t\t});\n\t}\n\tfunction getThemeColor(grid, ...names) {\n\t\treturn getChainSafe(grid.theme, ...names) || getChainSafe(themes.default, ...names);\n\t}\n\tfunction testFontLoad(font, value, context, grid) {\n\t\tif (font) {\n\t\t\tif (!fonts.check(font, value)) {\n\t\t\t\tfonts.load(font, value, () => invalidateCell(context, grid));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction drawInlines(ctx, inlines, rect, offset, col, row, grid) {\n\t\tfunction drawInline(inline, offsetLeft, offsetRight) {\n\t\t\tif (inline.canDraw()) {\n\t\t\t\tctx.save();\n\t\t\t\ttry {\n\t\t\t\t\tctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\n\t\t\t\t\tctx.font = inline.font() || ctx.font;\n\t\t\t\t\tinline.draw({\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\tcanvashelper,\n\t\t\t\t\t\trect,\n\t\t\t\t\t\toffset,\n\t\t\t\t\t\toffsetLeft,\n\t\t\t\t\t\toffsetRight\n\t\t\t\t\t});\n\t\t\t\t} finally {\n\t\t\t\t\tctx.restore();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinline.onReady(() => grid.invalidateCell(col, row));\n\t\t\t\t//noop\n\t\t\t}\n\t\t}\n\t\tif (inlines.length === 1) {\n\t\t\t//1\n\t\t\tconst inline = inlines[0];\n\t\t\tdrawInline(inline, 0, 0);\n\t\t} else {\n\t\t\tconst inlineWidths = inlines.map(inline => (inline.width({ ctx }) || 0) - 0);\n\t\t\tlet offsetRight = inlineWidths.reduce((a, b) => a + b);\n\n\t\t\tlet offsetLeft = 0;\n\t\t\tinlines.forEach((inline, index) => {\n\t\t\t\tconst inlineWidth = inlineWidths[index];\n\t\t\t\toffsetRight -= inlineWidth;\n\t\t\t\tdrawInline(inline, offsetLeft, offsetRight);\n\t\t\t\toffsetLeft += inlineWidth;\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction _inlineRect(grid, ctx, inline, rect, col, row, {\n\t\toffset,\n\t\tcolor,\n\t\ttextAlign,\n\t\ttextBaseline,\n\t\tfont,\n\t\ticons\n\t} = {}) {\n\n\t\t//style\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\t\tctx.font = font || ctx.font;\n\n\t\tconst actInlines = inlines.buildInlines(icons, inline);\n\t\tdrawInlines(ctx, actInlines, rect, offset, col, row, grid);\n\t}\n\n\tfunction drawCheckbox(ctx, rect, check, helper, {\n\t\tanimElapsedTime = 1,\n\t\tuncheckBgColor = helper.theme.checkbox.uncheckBgColor,\n\t\tcheckBgColor = helper.theme.checkbox.checkBgColor,\n\t\tborderColor = helper.theme.checkbox.borderColor,\n\t\ttextAlign = 'center',\n\t\ttextBaseline = 'middle'\n\t} = {}) {\n\t\tconst boxWidth = canvashelper.measureCheckbox(ctx).width;\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\t\tconst pos = calcStartPosition(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/);\n\t\tif (0 < animElapsedTime && animElapsedTime < 1) {\n\t\t\tconst uncheckBgRGB = colorToRGB(uncheckBgColor);\n\t\t\tconst checkBgRGB = colorToRGB(checkBgColor);\n\t\t\tconst checkRGB = colorName => {\n\t\t\t\tconst start = uncheckBgRGB[colorName];\n\t\t\t\tconst end = checkBgRGB[colorName];\n\t\t\t\tif (animElapsedTime >= 1) {\n\t\t\t\t\treturn end;\n\t\t\t\t}\n\t\t\t\tconst diff = start - end;\n\t\t\t\treturn Math.ceil(start - diff * animElapsedTime);\n\t\t\t};\n\t\t\tconst uncheckRGB = colorName => {\n\t\t\t\tconst end = uncheckBgRGB[colorName];\n\t\t\t\tconst start = checkBgRGB[colorName];\n\t\t\t\tif (animElapsedTime >= 1) {\n\t\t\t\t\treturn end;\n\t\t\t\t}\n\t\t\t\tconst diff = end - start;\n\t\t\t\treturn Math.ceil(start + diff * animElapsedTime);\n\t\t\t};\n\t\t\tuncheckBgColor = check ? uncheckBgColor : `rgb(${uncheckRGB('r')} , ${uncheckRGB('g')}, ${uncheckRGB('b')})`;\n\t\t\tcheckBgColor = `rgb(${checkRGB('r')} , ${checkRGB('g')}, ${checkRGB('b')})`;\n\t\t}\n\n\t\tcanvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\n\t\t\tuncheckBgColor,\n\t\t\tcheckBgColor,\n\t\t\tborderColor\n\t\t});\n\t}\n\n\tclass Theme {\n\t\tconstructor(grid) {\n\t\t\tthis._grid = grid;\n\t\t}\n\t\tgetThemeColor(...name) {\n\t\t\treturn getThemeColor(this._grid, ...name);\n\t\t}\n\t\tget font() {\n\t\t\treturn getThemeColor(this._grid, 'font');\n\t\t}\n\t\tget underlayBackgroundColor() {\n\t\t\treturn getThemeColor(this._grid, 'underlayBackgroundColor');\n\t\t}\n\t\t// color\n\t\tget color() {\n\t\t\treturn getThemeColor(this._grid, 'color');\n\t\t}\n\t\tget frozenRowsColor() {\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsColor');\n\t\t}\n\t\t// background\n\t\tget defaultBgColor() {\n\t\t\treturn getThemeColor(this._grid, 'defaultBgColor');\n\t\t}\n\t\tget frozenRowsBgColor() {\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBgColor');\n\t\t}\n\t\tget selectionBgColor() {\n\t\t\treturn getThemeColor(this._grid, 'selectionBgColor');\n\t\t}\n\t\t// border\n\t\tget borderColor() {\n\t\t\treturn getThemeColor(this._grid, 'borderColor');\n\t\t}\n\t\tget frozenRowsBorderColor() {\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBorderColor');\n\t\t}\n\t\tget hiliteBorderColor() {\n\t\t\treturn getThemeColor(this._grid, 'hiliteBorderColor');\n\t\t}\n\t\tget checkbox() {\n\t\t\tconst grid = this._grid;\n\t\t\treturn this._checkbox || (this._checkbox = {\n\t\t\t\tget uncheckBgColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'uncheckBgColor');\n\t\t\t\t},\n\t\t\t\tget checkBgColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'checkBgColor');\n\t\t\t\t},\n\t\t\t\tget borderColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'borderColor');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tget button() {\n\t\t\tconst grid = this._grid;\n\t\t\treturn this._button || (this._button = {\n\t\t\t\tget color() {\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'color');\n\t\t\t\t},\n\t\t\t\tget bgColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'bgColor');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t}\n\n\tfunction strokeRect(ctx, color, left, top, width, height) {\n\t\tif (!__webpack_provided_Array_dot_isArray(color)) {\n\t\t\tif (color) {\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.strokeRect(left, top, width, height);\n\t\t\t}\n\t\t} else {\n\t\t\tconst borderColors = toBoxArray(color);\n\t\t\tcanvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\n\t\t}\n\t}\n\n\tclass GridCanvasHelper {\n\t\tconstructor(grid) {\n\t\t\tthis._grid = grid;\n\t\t\tthis._theme = new Theme(grid);\n\t\t}\n\t\tcreateCalculator(context) {\n\t\t\treturn {\n\t\t\t\tcalcWidth(width) {\n\t\t\t\t\treturn calc.toPx(width, {\n\t\t\t\t\t\tget full() {\n\t\t\t\t\t\t\tconst rect = context.getRect();\n\t\t\t\t\t\t\treturn rect.width;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget em() {\n\t\t\t\t\t\t\tconst ctx = context.getContext();\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcalcHeight(height) {\n\t\t\t\t\treturn calc.toPx(height, {\n\t\t\t\t\t\tget full() {\n\t\t\t\t\t\t\tconst rect = context.getRect();\n\t\t\t\t\t\t\treturn rect.height;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget em() {\n\t\t\t\t\t\t\tconst ctx = context.getContext();\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tgetColor(color, col, row, ctx) {\n\t\t\treturn getColor(color, col, row, this._grid, ctx);\n\t\t}\n\t\ttoBoxArray(obj) {\n\t\t\treturn toBoxArray(obj);\n\t\t}\n\t\ttoBoxPixelArray(value, context) {\n\t\t\tif (typeof value === 'string' || __webpack_provided_Array_dot_isArray(value)) {\n\t\t\t\tconst calculator = this.createCalculator(context);\n\t\t\t\tconst box = toBoxArray(value);\n\t\t\t\treturn [calculator.calcHeight(box[0]), calculator.calcWidth(box[1]), calculator.calcHeight(box[2]), calculator.calcWidth(box[3])];\n\t\t\t}\n\t\t\treturn toBoxArray(value);\n\t\t}\n\t\tget theme() {\n\t\t\treturn this._theme;\n\t\t}\n\t\tdrawWithClip(context, draw) {\n\t\t\tconst drawRect = context.getDrawRect();\n\t\t\tif (!drawRect) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst ctx = context.getContext();\n\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n\t\t\t\t//clip\n\t\t\t\tctx.clip();\n\n\t\t\t\tdraw(ctx);\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\tdrawBorderWithClip(context, draw) {\n\t\t\tconst drawRect = context.getDrawRect();\n\t\t\tif (!drawRect) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst rect = context.getRect();\n\t\t\tconst ctx = context.getContext();\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\t//clip\n\t\t\t\tctx.beginPath();\n\t\t\t\tlet clipLeft = drawRect.left;\n\t\t\t\tlet clipWidth = drawRect.width;\n\t\t\t\tif (drawRect.left === rect.left) {\n\t\t\t\t\tclipLeft += -1;\n\t\t\t\t\tclipWidth += 1;\n\t\t\t\t}\n\t\t\t\tlet clipTop = drawRect.top;\n\t\t\t\tlet clipHeight = drawRect.height;\n\t\t\t\tif (drawRect.top === rect.top) {\n\t\t\t\t\tclipTop += -1;\n\t\t\t\t\tclipHeight += 1;\n\t\t\t\t}\n\t\t\t\tctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\n\t\t\t\tctx.clip();\n\n\t\t\t\tdraw(ctx);\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\ttext(text, context, {\n\t\t\tpadding,\n\t\t\toffset = 2,\n\t\t\tcolor,\n\t\t\ttextAlign = 'left',\n\t\t\ttextBaseline = 'middle',\n\t\t\tfont,\n\t\t\ticons\n\t\t} = {}) {\n\t\t\tlet rect = context.getRect();\n\n\t\t\tconst { col, row } = context;\n\n\t\t\tif (!color) {\n\t\t\t\t({ color } = this.theme);\n\t\t\t\t// header color\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tif (padding) {\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\n\t\t\t\t\tconst left = rect.left + padding[3];\n\t\t\t\t\tconst top = rect.top + padding[0];\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\n\t\t\t\t\trect = new Rect(left, top, width, height);\n\t\t\t\t}\n\t\t\t\t_inlineRect(this._grid, ctx, text, rect, col, row, {\n\t\t\t\t\toffset,\n\t\t\t\t\tcolor,\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tfillText(text, x, y, context, {\n\t\t\tcolor,\n\t\t\ttextAlign = 'left',\n\t\t\ttextBaseline = 'top',\n\t\t\tfont\n\t\t} = {}) {\n\n\t\t\tconst { col, row } = context;\n\n\t\t\tif (!color) {\n\t\t\t\t({ color } = this.theme);\n\t\t\t\t// header color\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst ctx = context.getContext();\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.fillStyle = getColor(color, col, row, this._grid, ctx);\n\t\t\t\tctx.textAlign = textAlign;\n\t\t\t\tctx.textBaseline = textBaseline;\n\t\t\t\tctx.font = font || ctx.font;\n\t\t\t\tctx.fillText(text, x, y);\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\tfillCell(context, {\n\t\t\tfillColor = this.theme.defaultBgColor\n\t\t} = {}) {\n\t\t\tconst rect = context.getRect();\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t\tctx.fill();\n\t\t\t});\n\t\t}\n\t\tfillCellWithState(context, option = {}) {\n\t\t\toption.fillColor = this.getFillColorState(context, option);\n\t\t\tthis.fillCell(context, option);\n\t\t}\n\t\tfillRect(rect, context, {\n\t\t\tfillColor = this.theme.defaultBgColor\n\t\t} = {}) {\n\n\t\t\tconst ctx = context.getContext();\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t\tctx.fill();\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\tfillRectWithState(rect, context, option = {}) {\n\t\t\toption.fillColor = this.getFillColorState(context, option);\n\n\t\t\tthis.fillRect(rect, context, option);\n\t\t}\n\t\tgetFillColorState(context, option = {}) {\n\t\t\tconst state = context.getSelectState();\n\t\t\tconst { col, row } = context;\n\t\t\tif (!state.selected && state.selection) {\n\t\t\t\treturn this.theme.selectionBgColor;\n\t\t\t} else {\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\treturn this.theme.frozenRowsBgColor;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn option.fillColor || this.theme.defaultBgColor;\n\t\t}\n\t\tborder(context, {\n\t\t\tborderColor = this.theme.borderColor,\n\t\t\tlineWidth = 1\n\t\t} = {}) {\n\t\t\tconst rect = context.getRect();\n\n\t\t\tthis.drawBorderWithClip(context, ctx => {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tconst borderColors = getColor(borderColor, col, row, this._grid, ctx);\n\n\t\t\t\tif (lineWidth === 1) {\n\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\n\t\t\t\t} else if (lineWidth === 2) {\n\t\t\t\t\tctx.lineWidth = 2;\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\n\t\t\t\t} else {\n\t\t\t\t\tctx.lineWidth = lineWidth;\n\t\t\t\t\tconst startOffset = lineWidth / 2 - 1;\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tborderWithState(context, option = {}) {\n\t\t\tconst rect = context.getRect();\n\t\t\tconst state = context.getSelectState();\n\t\t\tconst { col, row } = context;\n\n\t\t\t//\n\t\t\tif (state.selected) {\n\t\t\t\toption.borderColor = this.theme.hiliteBorderColor;\n\t\t\t\toption.lineWidth = 2;\n\t\t\t\tthis.border(context, option);\n\t\t\t} else {\n\t\t\t\t// header color\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\toption.borderColor = this.theme.frozenRowsBorderColor;\n\t\t\t\t}\n\n\t\t\t\toption.lineWidth = 1;\n\t\t\t\tthis.border(context, option);\n\n\t\t\t\t//\n\t\t\t\tconst sel = this._grid.selection.select;\n\t\t\t\tif (sel.col + 1 === col && sel.row === row) {\n\t\t\t\t\t//\n\t\t\t\t\tthis.drawBorderWithClip(context, ctx => {\n\t\t\t\t\t\tconst borderColors = toBoxArray(getColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx));\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t});\n\t\t\t\t} else if (sel.col === col && sel.row + 1 === row) {\n\t\t\t\t\t//\n\t\t\t\t\tthis.drawBorderWithClip(context, ctx => {\n\t\t\t\t\t\tconst borderColors = toBoxArray(getColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx));\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcheckbox(check, context, option = {}) {\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tdrawCheckbox(ctx, context.getRect(), check, this, option);\n\t\t\t});\n\t\t}\n\t\tbutton(caption, context, {\n\t\t\tbgColor = this.theme.button.bgColor,\n\t\t\tpadding,\n\t\t\toffset = 2,\n\t\t\tcolor = this.theme.button.color,\n\t\t\ttextAlign = 'center',\n\t\t\ttextBaseline = 'middle',\n\t\t\tshadow,\n\t\t\tfont,\n\t\t\ticons\n\t\t} = {}) {\n\t\t\tconst rect = context.getRect();\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tpadding = this.toBoxPixelArray(padding || rect.height / 8, context);\n\t\t\t\tconst left = rect.left + padding[3];\n\t\t\t\tconst top = rect.top + padding[0];\n\t\t\t\tconst width = rect.width - padding[1] - padding[3];\n\t\t\t\tconst height = rect.height - padding[0] - padding[2];\n\n\t\t\t\tcanvashelper.drawButton(ctx, left, top, width, height, {\n\t\t\t\t\tbgColor,\n\t\t\t\t\tradius: rect.height / 8,\n\t\t\t\t\toffset,\n\t\t\t\t\tshadow\n\t\t\t\t});\n\t\t\t\t_inlineRect(this._grid, ctx, caption, new Rect(left, top, width, height), col, row, {\n\t\t\t\t\toffset,\n\t\t\t\t\tcolor,\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\ttestFontLoad(font, value, context) {\n\t\t\treturn testFontLoad(font, value, context, this._grid);\n\t\t}\n\t}\n\n\tmodule.exports = GridCanvasHelper;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./ListGrid.js\":\n/*!*********************!*\\\n  !*** ./ListGrid.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\n{\n\tconst { isDef, isPromise, then, obj: { isObject } } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\tconst GridCanvasHelper = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\tconst columns = __webpack_require__(/*! ./columns */ \"./columns.js\");\n\tconst { BaseStyle } = columns.style;\n\tconst headerType = __webpack_require__(/*! ./header/type */ \"./header/type.js\");\n\tconst { BaseStyle: HeaderBaseStyle } = __webpack_require__(/*! ./header/style */ \"./header/style.js\");\n\tconst DrawGrid = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\tconst { DataSource, CachedDataSource } = __webpack_require__(/*! ./data */ \"./data.js\");\n\tconst themes = __webpack_require__(/*! ./themes */ \"./themes.js\");\n\tconst icons = __webpack_require__(/*! ./internal/icons */ \"./internal/icons.js\");\n\tconst MessageHandler = __webpack_require__(/*! ./columns/message/MessageHandler */ \"./columns/message/MessageHandler.js\");\n\tconst EVENT_TYPE = __webpack_require__(/*! ./list-grid/EVENT_TYPE */ \"./list-grid/EVENT_TYPE.js\");\n\n\t//protected symbol\n\tconst { PROTECTED_SYMBOL: _ } = __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tlet headerId = 0;\n\t//private methods\n\tfunction _getHeaderCellRange(grid, col, row) {\n\t\treturn grid[_].headerMap.getHeaderCellRange(col, row);\n\t}\n\tfunction _updateRect(grid, col, row, context) {\n\t\tconst rect = context.getRect();\n\t\tconst {\n\t\t\tstartCol,\n\t\t\tendCol,\n\t\t\tstartRow,\n\t\t\tendRow\n\t\t} = _getHeaderCellRange(grid, col, row);\n\t\tfor (let c = col - 1; c >= startCol; c--) {\n\t\t\trect.left -= grid.getColWidth(c);\n\t\t}\n\t\tfor (let c = col + 1; c <= endCol; c++) {\n\t\t\trect.right += grid.getColWidth(c);\n\t\t}\n\t\tfor (let r = row - 1; r >= startRow; r--) {\n\t\t\trect.top -= grid.getRowHeight(r);\n\t\t}\n\t\tfor (let r = row + 1; r <= endRow; r++) {\n\t\t\trect.bottom += grid.getRowHeight(r);\n\t\t}\n\t\tcontext.setRect(rect);\n\t}\n\tfunction _getCellValue(grid, col, row) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn grid[_].headerMap.getCell(col, row).caption;\n\t\t} else {\n\t\t\tlet { field } = grid[_].headerMap.columns[col];\n\t\t\tif (isObject(field) && field.get && field.set) {\n\t\t\t\tfield = field.get;\n\t\t\t}\n\t\t\treturn _getField(grid, field, row);\n\t\t}\n\t}\n\tfunction _setCellValue(grid, col, row, value) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\t// nop\n\t\t\treturn false;\n\t\t} else {\n\t\t\tlet { field } = grid[_].headerMap.columns[col];\n\t\t\tif (isObject(field) && field.get && field.set) {\n\t\t\t\tfield = field.set;\n\t\t\t}\n\t\t\tconst index = _getRowRecordIndex(grid, row);\n\t\t\tconst res = grid[_].dataSource.setField(index, field, value);\n\t\t\treturn isPromise(res) ? res : true;\n\t\t}\n\t}\n\tfunction _getCellMessage(grid, col, row) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst { message } = grid[_].headerMap.columns[col];\n\t\t\tif (!message) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn _getField(grid, message, row);\n\t\t}\n\t}\n\tfunction _getCellIcon0(grid, icon, row) {\n\t\tif (!isDef(icon)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (__webpack_provided_Array_dot_isArray(icon)) {\n\t\t\treturn icon.map(i => _getCellIcon0(grid, i, row));\n\t\t}\n\t\tif (!isObject(icon)) {\n\t\t\treturn _getField(grid, icon, row);\n\t\t}\n\t\tconst retIcon = {};\n\t\ticons.iconPropKeys.forEach(k => {\n\t\t\tif (icon[k]) {\n\t\t\t\tconst f = _getField(grid, icon[k], row);\n\t\t\t\tif (isDef(f)) {\n\t\t\t\t\tretIcon[k] = f;\n\t\t\t\t} else {\n\t\t\t\t\tif (!_hasField(grid, icon[k], row)) {\n\t\t\t\t\t\tretIcon[k] = icon[k];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn retIcon;\n\t}\n\tfunction _getCellIcon(grid, col, row) {\n\t\tconst { icon } = grid[_].headerMap.columns[col];\n\t\treturn _getCellIcon0(grid, icon, row);\n\t}\n\tfunction _getField(grid, field, row) {\n\t\tif (!isDef(field)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst index = _getRowRecordIndex(grid, row);\n\t\t\treturn grid[_].dataSource.getField(index, field);\n\t\t}\n\t}\n\tfunction _hasField(grid, field, row) {\n\t\tif (!isDef(field)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tconst index = _getRowRecordIndex(grid, row);\n\t\t\treturn grid[_].dataSource.hasField(index, field);\n\t\t}\n\t}\n\tfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\n\t\tconst helper = grid[_].gridCanvasHelper;\n\n\t\tconst drawCellBg = ({ bgColor } = {}) => {\n\t\t\tconst fillOpt = {\n\t\t\t\tfillColor: bgColor\n\t\t\t};\n\t\t\t//cell\n\t\t\thelper.fillCellWithState(context, fillOpt);\n\t\t};\n\t\tconst drawCellBorder = () => {\n\n\t\t\tif (context.col === grid.frozenColCount - 1) {\n\t\t\t\t//\n\t\t\t\tconst rect = context.getRect();\n\t\t\t\thelper.drawWithClip(context, ctx => {\n\t\t\t\t\tconst borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor : helper.theme.frozenRowsBorderColor;\n\n\t\t\t\t\tconst borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\n\t\t\t\t\tif (borderColors[1]) {\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.right - 2.5, rect.top);\n\t\t\t\t\t\tctx.lineTo(rect.right - 2.5, rect.bottom);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (context.row < grid[_].headerMap.rowCount) {\n\t\t\t\t_headerBorderWithState(grid, helper, context);\n\t\t\t} else {\n\t\t\t\thelper.borderWithState(context);\n\t\t\t}\n\t\t};\n\n\t\tconst drawCellBase = ({ bgColor } = {}) => {\n\t\t\tdrawCellBg({ bgColor });\n\t\t\tdrawCellBorder();\n\t\t};\n\t\tconst info = {\n\t\t\tgetRecord: () => grid.getRowRecord(row),\n\t\t\tgetIcon: () => _getCellIcon(grid, col, row),\n\t\t\tgetMessage: () => _getCellMessage(grid, col, row),\n\t\t\tmessageHandler: grid[_].messageHandler,\n\t\t\tstyle,\n\t\t\tdrawCellBase,\n\t\t\tdrawCellBg,\n\t\t\tdrawCellBorder\n\t\t};\n\n\t\treturn draw(cellValue, info, context, grid);\n\t}\n\tfunction _headerBorderWithState(grid, helper, context) {\n\t\tconst { col, row } = context;\n\t\tconst sel = grid.selection.select;\n\t\tif (sel.row >= grid[_].headerMap.rowCount) {\n\t\t\t//\n\t\t\thelper.borderWithState(context);\n\t\t\treturn;\n\t\t}\n\n\t\tconst { id } = grid[_].headerMap.getCell(col, row);\n\n\t\tconst rect = context.getRect();\n\t\tconst option = {};\n\n\t\tconst { id: selId } = grid[_].headerMap.getCell(sel.col, sel.row);\n\t\t//\n\t\tif (selId === id) {\n\t\t\toption.borderColor = helper.theme.hiliteBorderColor;\n\t\t\toption.lineWidth = 2;\n\t\t\thelper.border(context, option);\n\t\t} else {\n\t\t\toption.lineWidth = 1;\n\t\t\t// header color\n\t\t\tconst isFrozenCell = grid.isFrozenCell(col, row);\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\toption.borderColor = helper.theme.frozenRowsBorderColor;\n\t\t\t}\n\t\t\thelper.border(context, option);\n\n\t\t\t//\n\t\t\tif (col > 0 && grid[_].headerMap.getCell(col - 1, row).id === selId) {\n\t\t\t\t//\n\t\t\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\t\t\tconst borderColors = helper.toBoxArray(helper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx));\n\t\t\t\t\tif (borderColors[1]) {\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (row > 0 && grid[_].headerMap.getCell(col, row - 1).id === selId) {\n\t\t\t\t//\n\t\t\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\t\t\tconst borderColors = helper.toBoxArray(helper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx));\n\t\t\t\t\tif (borderColors[0]) {\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tfunction _refreshHeader(grid) {\n\t\tif (grid[_].headerEvents) {\n\t\t\tgrid[_].headerEvents.forEach(id => grid.unlisten(id));\n\t\t}\n\t\tgrid[_].headerMap = new HeaderMap(grid[_].header);\n\t\tgrid[_].headerEvents = [];\n\t\tgrid[_].headerMap.headerObjects.forEach(cell => {\n\t\t\tconst ids = cell.headerType.bindGridEvent(grid);\n\t\t\tgrid[_].headerEvents.push(...ids);\n\t\t\tif (cell.style) {\n\t\t\t\tif (cell.style instanceof HeaderBaseStyle) {\n\t\t\t\t\tconst id = cell.style.listen(HeaderBaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n\t\t\t\t\t\tgrid.invalidate();\n\t\t\t\t\t});\n\t\t\t\t\tgrid[_].headerEvents.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tgrid[_].headerMap.columns.forEach((col, index) => {\n\t\t\tif (col.action) {\n\t\t\t\tconst ids = col.action.bindGridEvent(grid, index, {\n\t\t\t\t\tisTarget(col, row) {\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgrid[_].headerEvents.push(...ids);\n\t\t\t}\n\t\t\tif (col.columnType) {\n\t\t\t\tconst ids = col.columnType.bindGridEvent(grid, index, {\n\t\t\t\t\tisTarget(col, row) {\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgrid[_].headerEvents.push(...ids);\n\t\t\t}\n\t\t\tif (col.style) {\n\t\t\t\tif (col.style instanceof BaseStyle) {\n\t\t\t\t\tconst id = col.style.listen(columns.style.EVENT_TYPE.CHANGE_STYLE, () => {\n\t\t\t\t\t\tgrid.invalidate();\n\t\t\t\t\t});\n\t\t\t\t\tgrid[_].headerEvents.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tgrid.colCount = grid[_].headerMap.columns.length;\n\t\t_refreshRowCount(grid);\n\t\tgrid.frozenRowCount = grid[_].headerMap.rowCount;\n\t\tfor (let col = 0; col < grid[_].headerMap.columns.length; col++) {\n\t\t\tconst column = grid[_].headerMap.columns[col];\n\t\t\tconst { width, minWidth, maxWidth } = column;\n\t\t\tif (width && (width > 0 || typeof width === 'string')) {\n\t\t\t\tgrid.setColWidth(col, width);\n\t\t\t}\n\t\t\tif (minWidth && (minWidth > 0 || typeof minWidth === 'string')) {\n\t\t\t\tgrid.setMinColWidth(col, minWidth);\n\t\t\t}\n\t\t\tif (maxWidth && (maxWidth > 0 || typeof maxWidth === 'string')) {\n\t\t\t\tgrid.setMaxColWidth(col, maxWidth);\n\t\t\t}\n\t\t}\n\t\tconst isArrayHeaderRowHeight = __webpack_provided_Array_dot_isArray(grid[_].headerRowHeight);\n\t\tfor (let row = 0; row < grid[_].headerMap.rowCount; row++) {\n\t\t\tconst height = isArrayHeaderRowHeight ? grid[_].headerRowHeight[row] : grid[_].headerRowHeight;\n\t\t\tif (height && height > 0) {\n\t\t\t\tgrid.setRowHeight(row, height);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _refreshRowCount(grid) {\n\t\tgrid.rowCount = grid[_].dataSource.length + grid[_].headerMap.rowCount;\n\t}\n\tfunction _tryWithUpdateDataSource(grid, fn) {\n\t\tif (grid[_].dataSourceEventIds) {\n\t\t\tgrid[_].dataSourceEventIds.forEach(id => grid[_].handler.off(id));\n\t\t}\n\n\t\tfn(grid);\n\n\t\tgrid[_].dataSourceEventIds = [grid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\n\t\t\t_refreshRowCount(grid);\n\t\t\tgrid.invalidate();\n\t\t}), grid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n\t\t\tgrid.invalidate();\n\t\t})];\n\t}\n\tfunction _setRecords(grid, records = []) {\n\t\t_tryWithUpdateDataSource(grid, () => {\n\t\t\tgrid[_].records = records;\n\t\t\tgrid[_].dataSource = CachedDataSource.ofArray(grid[_].records);\n\t\t});\n\t}\n\tfunction _setDataSource(grid, dataSource) {\n\t\t_tryWithUpdateDataSource(grid, () => {\n\t\t\tif (dataSource) {\n\t\t\t\tif (dataSource instanceof DataSource) {\n\t\t\t\t\tgrid[_].dataSource = dataSource;\n\t\t\t\t} else {\n\t\t\t\t\tgrid[_].dataSource = new CachedDataSource(dataSource);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tgrid[_].dataSource = DataSource.EMPTY;\n\t\t\t}\n\t\t\tgrid[_].records = null;\n\t\t});\n\t}\n\n\tfunction _getRowRecordIndex(grid, row) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn row - grid[_].headerMap.rowCount;\n\t\t}\n\t}\n\t//end private methods\n\t//\n\t//\n\t//\n\n\tclass HeaderMap {\n\t\tconstructor(header) {\n\t\t\tthis._columns = [];\n\t\t\tthis._headerCells = [];\n\t\t\tthis._headerObjects = [];\n\n\t\t\tthis._addHeaders(0, header, []);\n\t\t\tthis._setupHeaderType();\n\t\t}\n\t\tget columns() {\n\t\t\treturn this._columns;\n\t\t}\n\t\tget rowCount() {\n\t\t\treturn this._headerCells.length;\n\t\t}\n\t\tget headerObjects() {\n\t\t\treturn this._headerObjects;\n\t\t}\n\t\tgetCell(col, row) {\n\t\t\treturn this._headerCells[row][col];\n\t\t}\n\t\tgetHeaderCellRangeById(id) {\n\t\t\tfor (let r = 0; r < this.rowCount; r++) {\n\t\t\t\tfor (let c = 0; c < this.columns.length; c++) {\n\t\t\t\t\tif (id === this.getCell(c, r).id) {\n\t\t\t\t\t\treturn this.getHeaderCellRange(c, r);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\tgetHeaderCellRange(col, row) {\n\t\t\tconst result = {\n\t\t\t\tstartCol: col,\n\t\t\t\tstartRow: row,\n\t\t\t\tendCol: col,\n\t\t\t\tendRow: row,\n\t\t\t\tisCellInRange(col, row) {\n\t\t\t\t\treturn this.startCol <= col && col <= this.endCol && this.startRow <= row && row <= this.endRow;\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst { id } = this.getCell(col, row);\n\t\t\tfor (let c = col - 1; c >= 0; c--) {\n\t\t\t\tif (id !== this.getCell(c, row).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.startCol = c;\n\t\t\t}\n\t\t\tfor (let c = col + 1; c < this.columns.length; c++) {\n\t\t\t\tif (id !== this.getCell(c, row).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.endCol = c;\n\t\t\t}\n\t\t\tfor (let r = row - 1; r >= 0; r--) {\n\t\t\t\tif (id !== this.getCell(col, r).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.startRow = r;\n\t\t\t}\n\t\t\tfor (let r = row + 1; r < this.rowCount; r++) {\n\t\t\t\tif (id !== this.getCell(col, r).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.endRow = r;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\t_addHeaders(row, header, roots) {\n\t\t\tconst rowCells = this._headerCells[row] || this._newRow(row);\n\t\t\theader.forEach(hd => {\n\t\t\t\tconst col = this._columns.length;\n\t\t\t\tconst cell = {\n\t\t\t\t\tid: headerId++,\n\t\t\t\t\tcaption: hd.caption,\n\t\t\t\t\tstyle: hd.headerStyle,\n\t\t\t\t\tsort: hd.sort\n\t\t\t\t};\n\t\t\t\tthis._headerObjects.push(cell);\n\t\t\t\trowCells[col] = cell;\n\t\t\t\tfor (let r = row - 1; r >= 0; r--) {\n\t\t\t\t\tthis._headerCells[r][col] = roots[r];\n\t\t\t\t}\n\t\t\t\tif (hd.columns) {\n\t\t\t\t\tthis._addHeaders(row + 1, hd.columns, [...roots, cell]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._columns.push({\n\t\t\t\t\t\twidth: hd.width,\n\t\t\t\t\t\tminWidth: hd.minWidth,\n\t\t\t\t\t\tmaxWidth: hd.maxWidth,\n\t\t\t\t\t\tfield: hd.field,\n\t\t\t\t\t\ticon: hd.icon,\n\t\t\t\t\t\tmessage: hd.message,\n\t\t\t\t\t\tcolumnType: columns.type.of(hd.columnType),\n\t\t\t\t\t\taction: columns.action.of(hd.action),\n\t\t\t\t\t\tstyle: hd.style,\n\t\t\t\t\t\tdefine: hd\n\t\t\t\t\t});\n\t\t\t\t\tfor (let r = row + 1; r < this._headerCells.length; r++) {\n\t\t\t\t\t\tthis._headerCells[r][col] = cell;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t_setupHeaderType() {\n\t\t\tthis._headerObjects.forEach(cell => {\n\t\t\t\tcell.range = this.getHeaderCellRangeById(cell.id);\n\t\t\t\tcell.headerType = headerType.create(cell);\n\t\t\t});\n\t\t}\n\t\t_newRow(row) {\n\t\t\tconst newRow = this._headerCells[row] = [];\n\t\t\tif (!this._columns.length) {\n\t\t\t\treturn newRow;\n\t\t\t}\n\t\t\tconst prev = this._headerCells[row - 1];\n\t\t\tfor (let col = 0; col < prev.length; col++) {\n\t\t\t\tnewRow[col] = prev[col];\n\t\t\t}\n\t\t\treturn newRow;\n\t\t}\n\t}\n\n\tfunction adjustListGridOption(options) {\n\t\tif (options) {\n\t\t\tdelete options.frozenRowCount;\n\t\t\tdelete options.colCount;\n\t\t\tdelete options.rowCount;\n\t\t}\n\t\treturn options;\n\t}\n\n\t/**\r\n  * ListGrid\r\n  * @classdesc cheetahGrid.ListGrid\r\n  * @extends cheetahGrid.core.DrawGrid\r\n  * @memberof cheetahGrid\r\n  */\n\tclass ListGrid extends DrawGrid {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\t/**\r\n   * constructor\r\n   *\r\n   * <pre>\r\n   * Constructor options\r\n   * -----\r\n   * header: see header property\r\n   * records {array}: records data\r\n   * dataSource {DataSource}: records data source\r\n   * frozenColCount {number}: default 0\r\n   * defaultRowHeight {number}: default grid row height. default 40\r\n   * defaultColWidth {number}: default grid col width. default 80\r\n   * borderColor: border color\r\n   * parentElement {Element}: canvas parentElement\r\n   * theme {object}: theme\r\n   * -----\r\n   * </pre>\r\n   *\r\n   * @constructor\r\n   * @param  {Object} options Constructor options\r\n   */\n\t\tconstructor(options = {}) {\n\t\t\tsuper(adjustListGridOption(options));\n\t\t\tthis[_].header = options.header || [];\n\t\t\tthis[_].headerRowHeight = options.headerRowHeight || [];\n\t\t\tif (options.dataSource) {\n\t\t\t\t_setDataSource(this, options.dataSource);\n\t\t\t} else {\n\t\t\t\t_setRecords(this, options.records);\n\t\t\t}\n\t\t\t_refreshHeader(this);\n\t\t\tthis[_].sortState = {\n\t\t\t\tcol: -1,\n\t\t\t\torder: undefined\n\t\t\t};\n\t\t\tthis[_].gridCanvasHelper = new GridCanvasHelper(this);\n\t\t\tthis[_].theme = themes.of(options.theme);\n\t\t\tthis[_].messageHandler = new MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\n\t\t\tthis.invalidate();\n\t\t\tthis[_].handler.on(window, 'resize', () => {\n\t\t\t\tthis.updateSize();\n\t\t\t\tthis.updateScroll();\n\t\t\t\tthis.invalidate();\n\t\t\t});\n\t\t}\n\t\tdispose() {\n\t\t\tthis[_].messageHandler.dispose();\n\t\t\tsuper.dispose();\n\t\t}\n\t\t/**\r\n   * header define\r\n   * @type {Array}\r\n   */\n\t\tget header() {\n\t\t\treturn this[_].header;\n\t\t}\n\t\t/**\r\n   * header define\r\n   * <pre>\r\n   * column options\r\n   * -----\r\n   * caption: header caption\r\n   * field: field name\r\n   * width: column width\r\n   * minWidth: column min width\r\n   * maxWidth: column max width\r\n   * icon: icon name\r\n   * message: message key name\r\n   * columnType: ColumnType\r\n   * action: ColumnAction\r\n   * style: ColumnStyle\r\n   * sort: define sort setting\r\n   * -----\r\n   *\r\n   * multiline header\r\n   * -----\r\n   * caption: header caption\r\n   * columns: columns define\r\n   * -----\r\n   * </pre>\r\n   *\r\n   * @type {Array}\r\n   */\n\t\tset header(header) {\n\t\t\tthis[_].header = header;\n\t\t\t_refreshHeader(this);\n\t\t}\n\t\tget records() {\n\t\t\treturn this[_].records;\n\t\t}\n\t\tset records(records) {\n\t\t\t_setRecords(this, records);\n\t\t\t_refreshRowCount(this);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tget dataSource() {\n\t\t\treturn this[_].dataSource;\n\t\t}\n\t\tset dataSource(dataSource) {\n\t\t\t_setDataSource(this, dataSource);\n\t\t\t_refreshRowCount(this);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tget theme() {\n\t\t\treturn this[_].theme;\n\t\t}\n\t\tset theme(theme) {\n\t\t\tthis[_].theme = themes.of(theme);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tget font() {\n\t\t\treturn super.font || this[_].gridCanvasHelper.theme.font;\n\t\t}\n\t\tset font(font) {\n\t\t\tsuper.font = font;\n\t\t}\n\t\tget underlayBackgroundColor() {\n\t\t\treturn super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\n\t\t}\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\n\t\t\tsuper.underlayBackgroundColor = underlayBackgroundColor;\n\t\t}\n\t\tget sortState() {\n\t\t\treturn this[_].sortState;\n\t\t}\n\t\tset sortState(sortState) {\n\t\t\tthis[_].sortState = sortState;\n\t\t}\n\t\tgetField(col) {\n\t\t\treturn this[_].headerMap.columns[col].field;\n\t\t}\n\t\tgetRowRecord(row) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\treturn undefined;\n\t\t\t} else {\n\t\t\t\treturn this[_].dataSource.get(_getRowRecordIndex(this, row));\n\t\t\t}\n\t\t}\n\t\tgetGridCanvasHelper() {\n\t\t\treturn this[_].gridCanvasHelper;\n\t\t}\n\t\tgetCopyCellValue(col, row) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { startCol, startRow } = _getHeaderCellRange(this, col, row);\n\t\t\t\tif (startCol !== col || startRow !== row) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _getCellValue(this, col, row);\n\t\t}\n\t\tonDrawCell(col, row, context) {\n\t\t\tconst column = this[_].headerMap.columns[col];\n\n\t\t\tlet draw;\n\t\t\tlet style;\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst hd = this[_].headerMap.getCell(col, row);\n\t\t\t\tdraw = hd.headerType.onDrawCell;\n\t\t\t\t({ style } = hd);\n\t\t\t\t_updateRect(this, col, row, context);\n\t\t\t} else {\n\t\t\t\tdraw = column.columnType.onDrawCell;\n\t\t\t\t({ style } = column);\n\t\t\t}\n\t\t\tconst cellValue = _getCellValue(this, col, row);\n\t\t\treturn _onDrawValue(this, cellValue, context, { col, row }, style, draw);\n\t\t}\n\t\tdoGetCellValue(col, row, valueCallback) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\t// nop\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tconst value = _getCellValue(this, col, row);\n\t\t\t\tif (isPromise(value)) {\n\t\t\t\t\t//\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvalueCallback(value);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tdoChangeValue(col, row, changeValueCallback) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\t// nop\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tconst before = _getCellValue(this, col, row);\n\t\t\t\tif (isPromise(before)) {\n\t\t\t\t\t//\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst after = changeValueCallback(before);\n\t\t\t\tif (after === undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn then(_setCellValue(this, col, row, after), ret => {\n\t\t\t\t\tif (ret) {\n\t\t\t\t\t\tconst { field } = this[_].headerMap.columns[col];\n\t\t\t\t\t\tconst self = this;\n\t\t\t\t\t\tthis.fireListeners(EVENT_TYPE.CHANGED_VALUE, {\n\t\t\t\t\t\t\tcol,\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tget record() {\n\t\t\t\t\t\t\t\treturn self.getRowRecord(row);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfield,\n\t\t\t\t\t\t\tvalue: after\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn ret;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tbindEventsInternal() {\n\t\t\tthis.listen(EVENT_TYPE.SELECTED_CELL, e => {\n\t\t\t\tif (e.row < this[_].headerMap.rowCount) {\n\t\t\t\t\tconst { startCol, endCol, startRow, endRow } = _getHeaderCellRange(this, e.col, e.row);\n\t\t\t\t\tif (startCol !== endCol || startRow !== endRow) {\n\t\t\t\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tgetMoveLeftColByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { startCol } = _getHeaderCellRange(this, col, row);\n\t\t\t\tcol = startCol;\n\t\t\t}\n\t\t\treturn super.getMoveLeftColByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetMoveRightColByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { endCol } = _getHeaderCellRange(this, col, row);\n\t\t\t\tcol = endCol;\n\t\t\t}\n\t\t\treturn super.getMoveRightColByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetMoveUpRowByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { startRow } = _getHeaderCellRange(this, col, row);\n\t\t\t\trow = startRow;\n\t\t\t}\n\t\t\treturn super.getMoveUpRowByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetMoveDownRowByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { endRow } = _getHeaderCellRange(this, col, row);\n\t\t\t\trow = endRow;\n\t\t\t}\n\t\t\treturn super.getMoveDownRowByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetOffsetInvalidateCells() {\n\t\t\treturn 1;\n\t\t}\n\t\tgetColumnIndexByField(field) {\n\t\t\tfor (const columnIndex in this[_].headerMap.columns) {\n\t\t\t\tif (this[_].headerMap.columns[columnIndex].field === field) {\n\t\t\t\t\treturn columnIndex - 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tfocusGridCell(field, index) {\n\t\t\tconst {\n\t\t\t\tstart: { col: startCol, row: startRow },\n\t\t\t\tend: { col: endCol, row: endRow }\n\t\t\t} = this.selection.range;\n\n\t\t\tconst newCol = this.getColumnIndexByField(field);\n\t\t\tconst newRow = index + this[_].headerMap.rowCount;\n\t\t\tthis.focusCell(newCol, newRow);\n\t\t\tthis.selection.select = {\n\t\t\t\tcol: newCol,\n\t\t\t\trow: newRow\n\t\t\t};\n\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\n\t\t\tthis.invalidateCell(newCol, newRow);\n\t\t}\n\t\tmakeVisibleGridCell(field, index) {\n\t\t\tthis.makeVisibleCell(this.getColumnIndexByField(field), index + this[_].headerMap.rowCount);\n\t\t}\n\t}\n\tmodule.exports = ListGrid;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns.js\":\n/*!********************!*\\\n  !*** ./columns.js ***!\n  \\********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst action = __webpack_require__(/*! ./columns/action */ \"./columns/action.js\");\n\tconst type = __webpack_require__(/*! ./columns/type */ \"./columns/type.js\");\n\tconst style = __webpack_require__(/*! ./columns/style */ \"./columns/style.js\");\n\n\t/**\r\n  * columns\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\taction,\n\t\ttype,\n\t\tstyle\n\t};\n}\n\n/***/ }),\n\n/***/ \"./columns/action.js\":\n/*!***************************!*\\\n  !*** ./columns/action.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseAction = __webpack_require__(/*! ./action/BaseAction */ \"./columns/action/BaseAction.js\");\n\tconst Action = __webpack_require__(/*! ./action/Action */ \"./columns/action/Action.js\");\n\tconst Editor = __webpack_require__(/*! ./action/Editor */ \"./columns/action/Editor.js\");\n\tconst CheckEditor = __webpack_require__(/*! ./action/CheckEditor */ \"./columns/action/CheckEditor.js\");\n\tconst ButtonAction = __webpack_require__(/*! ./action/ButtonAction */ \"./columns/action/ButtonAction.js\");\n\tconst SmallDialogInputEditor = __webpack_require__(/*! ./action/SmallDialogInputEditor */ \"./columns/action/SmallDialogInputEditor.js\");\n\tconst InlineInputEditor = __webpack_require__(/*! ./action/InlineInputEditor */ \"./columns/action/InlineInputEditor.js\");\n\tconst InlineMenuEditor = __webpack_require__(/*! ./action/InlineMenuEditor */ \"./columns/action/InlineMenuEditor.js\");\n\n\tclass ImmutableCheckEditor extends CheckEditor {\n\t\tget disabled() {\n\t\t\treturn this._disabled;\n\t\t}\n\t\tget readOnly() {\n\t\t\treturn this._readOnly;\n\t\t}\n\t}\n\tclass ImmutableInputEditor extends SmallDialogInputEditor {\n\t\tget disabled() {\n\t\t\treturn this._disabled;\n\t\t}\n\t\tget readOnly() {\n\t\t\treturn this._readOnly;\n\t\t}\n\t}\n\n\t/**\r\n  * column actions\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns.action\r\n  * @memberof cheetahGrid.columns\r\n  */\n\tconst action = {\n\t\tACTIONS: {\n\t\t\tCHECK: new ImmutableCheckEditor(),\n\t\t\tINPUT: new ImmutableInputEditor()\n\t\t},\n\t\tget BaseAction() {\n\t\t\treturn BaseAction;\n\t\t},\n\t\tget Editor() {\n\t\t\treturn Editor;\n\t\t},\n\t\tget Action() {\n\t\t\treturn Action;\n\t\t},\n\t\tget CheckEditor() {\n\t\t\treturn CheckEditor;\n\t\t},\n\t\tget ButtonAction() {\n\t\t\treturn ButtonAction;\n\t\t},\n\t\tget SmallDialogInputEditor() {\n\t\t\treturn SmallDialogInputEditor;\n\t\t},\n\t\tget InlineInputEditor() {\n\t\t\tconsole.warn('InlineInputEditor is an experiment stage');\n\t\t\treturn InlineInputEditor;\n\t\t},\n\t\tget InlineMenuEditor() {\n\t\t\treturn InlineMenuEditor;\n\t\t},\n\t\tof(columnAction) {\n\t\t\tif (!columnAction) {\n\t\t\t\treturn action.ACTIONS.DEFAULT;\n\t\t\t} else if (typeof columnAction === 'string') {\n\t\t\t\treturn action.ACTIONS[columnAction.toUpperCase()] || action.of(null);\n\t\t\t} else {\n\t\t\t\treturn columnAction;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = action;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/Action.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Action.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst { bindCellClickAction, bindCellKeyAction } = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\n\tconst BaseAction = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\n\tclass Action extends BaseAction {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._action = option.action;\n\t\t}\n\t\tget action() {\n\t\t\treturn this._action;\n\t\t}\n\t\tset action(action) {\n\t\t\tthis._action = action;\n\t\t}\n\t\tclone() {\n\t\t\treturn new Action(this);\n\t\t}\n\t\tgetState(grid) {\n\t\t\treturn {};\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\tconst state = this.getState(grid);\n\t\t\tconst action = cell => {\n\t\t\t\tif (this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = grid.getRowRecord(cell.row);\n\t\t\t\tthis._action(record);\n\t\t\t};\n\n\t\t\treturn [...bindCellClickAction(grid, col, util, {\n\t\t\t\taction,\n\t\t\t\tmouseOver: e => {\n\t\t\t\t\tif (this.disabled) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tstate.mouseActiveCell = {\n\t\t\t\t\t\tcol: e.col,\n\t\t\t\t\t\trow: e.row\n\t\t\t\t\t};\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tmouseOut: e => {\n\t\t\t\t\tdelete state.mouseActiveCell;\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t}\n\t\t\t}), ...bindCellKeyAction(grid, col, util, {\n\t\t\t\taction\n\t\t\t})];\n\t\t}\n\t}\n\n\tmodule.exports = Action;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/BaseAction.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/BaseAction.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tclass BaseAction {\n\t\tconstructor(option = {}) {\n\t\t\tthis._disabled = option.disabled;\n\t\t}\n\t\tget disabled() {\n\t\t\treturn this._disabled;\n\t\t}\n\t\tset disabled(disabled) {\n\t\t\tthis._disabled = !!disabled;\n\t\t\tthis.onChangeDisabledInternal();\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseAction(this);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t\tonChangeDisabledInternal() {}\n\t}\n\tmodule.exports = BaseAction;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/BaseInputEditor.js\":\n/*!*******************************************!*\\\n  !*** ./columns/action/BaseInputEditor.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst Editor = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\tconst { EVENT_TYPE: {\n\t\t\tINPUT_CELL,\n\t\t\tEDITABLEINPUT_CELL,\n\t\t\tSELECTED_CELL,\n\t\t\tDBLCLICK_CELL,\n\t\t\tDBLTAP_CELL,\n\t\t\tKEYDOWN,\n\t\t\tMODIFY_STATUS_EDITABLEINPUT_CELL,\n\t\t\tSCROLL\n\t\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\n\tconst KEY_ENTER = 13;\n\tconst KEY_F2 = 113;\n\n\tclass BaseInputEditor extends Editor {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseInputEditor(this);\n\t\t}\n\t\tonInputCellInternal(grid, cell, inputValue) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonOpenCellInternal(grid, cell) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonChangeSelectCellInternal(grid, cell, selected) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonSetInputAttrsInternal(grid, cell, input) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonGridScrollInternal(grid) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\tconst open = cell => {\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.onOpenCellInternal(grid, cell);\n\t\t\t};\n\n\t\t\tconst input = (cell, value) => {\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.onInputCellInternal(grid, cell, value);\n\t\t\t};\n\t\t\treturn [grid.listen(INPUT_CELL, e => {\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinput({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t}, e.value);\n\t\t\t}), grid.listen(DBLCLICK_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topen({\n\t\t\t\t\tcol: cell.col,\n\t\t\t\t\trow: cell.row\n\t\t\t\t});\n\t\t\t}), grid.listen(DBLTAP_CELL, e => {\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topen({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t});\n\n\t\t\t\te.event.preventDefault();\n\t\t\t\te.event.stopPropagation();\n\t\t\t}), grid.listen(KEYDOWN, (keyCode, e) => {\n\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst sel = grid.selection.select;\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topen({\n\t\t\t\t\tcol: sel.col,\n\t\t\t\t\trow: sel.row\n\t\t\t\t});\n\t\t\t}), grid.listen(SELECTED_CELL, e => {\n\t\t\t\tthis.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\n\t\t\t}), grid.listen(SCROLL, () => {\n\t\t\t\tthis.onGridScrollInternal(grid);\n\t\t\t}), grid.listen(EDITABLEINPUT_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}), grid.listen(MODIFY_STATUS_EDITABLEINPUT_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.onSetInputAttrsInternal(grid, {\n\t\t\t\t\tcol: cell.col,\n\t\t\t\t\trow: cell.row\n\t\t\t\t}, cell.input);\n\t\t\t})];\n\t\t}\n\t}\n\n\tmodule.exports = BaseInputEditor;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/ButtonAction.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/ButtonAction.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst Action = __webpack_require__(/*! ./Action */ \"./columns/action/Action.js\");\n\tconst { BUTTON_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\tclass ButtonAction extends Action {\n\t\tgetState(grid) {\n\t\t\tif (!grid[BUTTON_COLUMN_STATE_ID]) {\n\t\t\t\tsetReadonly(grid, BUTTON_COLUMN_STATE_ID, {});\n\t\t\t}\n\t\t\treturn grid[BUTTON_COLUMN_STATE_ID];\n\t\t}\n\t}\n\n\tmodule.exports = ButtonAction;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/CheckEditor.js\":\n/*!***************************************!*\\\n  !*** ./columns/action/CheckEditor.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { obj: { setReadonly }, isPromise } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst { bindCellClickAction, bindCellKeyAction } = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\tconst animate = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\n\tconst Editor = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\tconst { CHECK_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tconst KEY_ENTER = 13;\n\tconst KEY_SPACE = 32;\n\n\tfunction toggleValue(val) {\n\t\tif (typeof val === 'number') {\n\t\t\tif (val === 0) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t} else if (typeof val === 'string') {\n\t\t\tif (val === 'false') {\n\t\t\t\treturn 'true';\n\t\t\t} else if (val === 'off') {\n\t\t\t\treturn 'on';\n\t\t\t} else if (val.match(/^0+$/)) {\n\t\t\t\treturn val.replace(/^(0*)0$/, '$11');\n\t\t\t} else if (val === 'true') {\n\t\t\t\treturn 'false';\n\t\t\t} else if (val === 'on') {\n\t\t\t\treturn 'off';\n\t\t\t} else if (val.match(/^0*1$/)) {\n\t\t\t\treturn val.replace(/^(0*)1$/, '$10');\n\t\t\t}\n\t\t}\n\t\treturn !val;\n\t}\n\n\tclass CheckEditor extends Editor {\n\t\tclone() {\n\t\t\treturn new CheckEditor(this);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\tif (!grid[CHECK_COLUMN_STATE_ID]) {\n\t\t\t\tsetReadonly(grid, CHECK_COLUMN_STATE_ID, {});\n\t\t\t}\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID];\n\n\t\t\tconst action = cell => {\n\t\t\t\tconst key = cell.col + ':' + cell.row;\n\t\t\t\tconst blockKey = key + '::block';\n\t\t\t\tif (this.readOnly || this.disabled || state[blockKey]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst ret = grid.doChangeValue(cell.col, cell.row, toggleValue);\n\t\t\t\tif (ret) {\n\n\t\t\t\t\tconst onChange = () => {\n\t\t\t\t\t\t// checkbox animation\n\t\t\t\t\t\tanimate(200, point => {\n\t\t\t\t\t\t\tif (point === 1) {\n\t\t\t\t\t\t\t\tdelete state[key];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstate[key] = {\n\t\t\t\t\t\t\t\t\telapsed: point\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgrid.invalidateCell(cell.col, cell.row);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tif (isPromise(ret)) {\n\t\t\t\t\t\tstate[blockKey] = true;\n\t\t\t\t\t\tret.then(() => {\n\t\t\t\t\t\t\tdelete state[blockKey];\n\t\t\t\t\t\t\tonChange();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonChange();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn [...bindCellClickAction(grid, col, util, {\n\t\t\t\taction,\n\t\t\t\tmouseOver: e => {\n\t\t\t\t\tif (this.disabled) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tstate.mouseActiveCell = {\n\t\t\t\t\t\tcol: e.col,\n\t\t\t\t\t\trow: e.row\n\t\t\t\t\t};\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tmouseOut: e => {\n\t\t\t\t\tdelete state.mouseActiveCell;\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t}\n\t\t\t}), ...bindCellKeyAction(grid, col, util, {\n\t\t\t\taction: e => {\n\t\t\t\t\tconst selrange = grid.selection.range;\n\t\t\t\t\tconst col = grid.selection.select.col;\n\t\t\t\t\tfor (let row = selrange.start.row; row <= selrange.end.row; row++) {\n\t\t\t\t\t\tif (!util.isTarget(col, row)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\taction({\n\t\t\t\t\t\t\tcol,\n\t\t\t\t\t\t\trow\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tacceptKeys: [KEY_ENTER, KEY_SPACE]\n\t\t\t})];\n\t\t}\n\t}\n\n\tmodule.exports = CheckEditor;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/Editor.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Editor.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst BaseAction = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\tclass Editor extends BaseAction {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._readOnly = option.readOnly;\n\t\t}\n\t\tget readOnly() {\n\t\t\treturn this._readOnly;\n\t\t}\n\t\tset readOnly(readOnly) {\n\t\t\tthis._readOnly = !!readOnly;\n\t\t\tthis.onChangeReadOnlyInternal();\n\t\t}\n\t\tclone() {\n\t\t\treturn new Editor(this);\n\t\t}\n\t\tonChangeReadOnlyInternal() {}\n\t}\n\tmodule.exports = Editor;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/InlineInputEditor.js\":\n/*!*********************************************!*\\\n  !*** ./columns/action/InlineInputEditor.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst BaseInputEditor = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\nconst InlineInputElement = __webpack_require__(/*! ./internal/InlineInputElement */ \"./columns/action/internal/InlineInputElement.js\");\nconst { INLINE_INPUT_EDITOR_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachInput(grid, cell, editor, value) {\n\tif (!grid[_]) {\n\t\tsetReadonly(grid, _, {});\n\t}\n\tif (!globalElement) {\n\t\tglobalElement = new InlineInputElement();\n\t}\n\tconst state = grid[_];\n\tif (!state.element) {\n\t\tstate.element = globalElement;\n\t\tbindGridCount++;\n\t\tgrid.addDisposable({\n\t\t\tdispose() {\n\t\t\t\tbindGridCount--;\n\t\t\t\tif (!bindGridCount) {\n\t\t\t\t\tglobalElement.dispose();\n\t\t\t\t\tglobalElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachInput(gridFocus) {\n\tif (globalElement) {\n\t\tglobalElement.detach(gridFocus);\n\t}\n}\nfunction doChangeValue(grid) {\n\tif (globalElement) {\n\t\tglobalElement.doChangeValue();\n\t}\n}\n\nclass InlineInputEditor extends BaseInputEditor {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._classList = option.classList;\n\t\tthis._type = option.type;\n\t}\n\tget classList() {\n\t\treturn this._classList && (__webpack_provided_Array_dot_isArray(this._classList) ? this._classList : [this._classList]);\n\t}\n\tset classList(classList) {\n\t\tthis._classList = classList;\n\t}\n\tget type() {\n\t\treturn this._type;\n\t}\n\tset type(type) {\n\t\tthis._type = type;\n\t}\n\tclone() {\n\t\treturn new InlineInputEditor(this);\n\t}\n\tonInputCellInternal(grid, cell, inputValue) {\n\t\tattachInput(grid, cell, this, inputValue);\n\t}\n\tonOpenCellInternal(grid, cell) {\n\t\tgrid.doGetCellValue(cell.col, cell.row, value => {\n\t\t\tattachInput(grid, cell, this, value);\n\t\t});\n\t}\n\tonChangeSelectCellInternal(grid, cell, selected) {\n\t\tdoChangeValue(grid);\n\t\tdetachInput();\n\t}\n\tonGridScrollInternal(grid) {\n\t\tdoChangeValue(grid);\n\t\tdetachInput(true);\n\t}\n\tonChangeDisabledInternal() {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonChangeReadOnlyInternal() {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonSetInputAttrsInternal(grid, cell, input) {\n\t\tInlineInputElement.setInputAttrs(this, grid, input);\n\t}\n}\n\nmodule.exports = InlineInputEditor;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/InlineMenuEditor.js\":\n/*!********************************************!*\\\n  !*** ./columns/action/InlineMenuEditor.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst { normalize } = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\nconst Editor = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\nconst { EVENT_TYPE: {\n\t\tSELECTED_CELL,\n\t\tCLICK_CELL,\n\t\tKEYDOWN,\n\t\tSCROLL,\n\t\tMOUSEOVER_CELL,\n\t\tMOUSEOUT_CELL,\n\t\tMOUSEMOVE_CELL\n\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\nconst InlineMenuElement = __webpack_require__(/*! ./internal/InlineMenuElement */ \"./columns/action/internal/InlineMenuElement.js\");\nconst { INLINE_MENU_EDITOR_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachMenu(grid, cell, editor, value) {\n\tif (!grid[_]) {\n\t\tsetReadonly(grid, _, {});\n\t}\n\tif (!globalElement) {\n\t\tglobalElement = new InlineMenuElement();\n\t}\n\tconst state = grid[_];\n\tif (!state.element) {\n\t\tstate.element = globalElement;\n\t\tbindGridCount++;\n\t\tgrid.addDisposable({\n\t\t\tdispose() {\n\t\t\t\tbindGridCount--;\n\t\t\t\tif (!bindGridCount) {\n\t\t\t\t\tglobalElement.dispose();\n\t\t\t\t\tglobalElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachMenu(gridFocus) {\n\tif (globalElement) {\n\t\tglobalElement.detach(gridFocus);\n\t}\n}\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass InlineMenuEditor extends Editor {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._classList = option.classList;\n\t\tthis._options = normalize(option.options);\n\t}\n\tdispose() {}\n\tget classList() {\n\t\treturn this._classList && (__webpack_provided_Array_dot_isArray(this._classList) ? this._classList : [this._classList]);\n\t}\n\tset classList(classList) {\n\t\tthis._classList = classList;\n\t}\n\tget options() {\n\t\treturn this._options;\n\t}\n\tset options(options) {\n\t\tthis._options = normalize(options);\n\t}\n\tclone() {\n\t\treturn new InlineMenuEditor(this);\n\t}\n\tonChangeDisabledInternal() {\n\t\t// cancel input\n\t\tdetachMenu(true);\n\t}\n\tonChangeReadOnlyInternal() {\n\t\t// cancel input\n\t\tdetachMenu(true);\n\t}\n\tbindGridEvent(grid, col, util) {\n\t\tconst open = cell => {\n\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.doGetCellValue(cell.col, cell.row, value => {\n\t\t\t\tattachMenu(grid, cell, this, value);\n\t\t\t});\n\t\t};\n\n\t\treturn [grid.listen(CLICK_CELL, cell => {\n\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\topen({\n\t\t\t\tcol: cell.col,\n\t\t\t\trow: cell.row\n\t\t\t});\n\t\t}), grid.listen(KEYDOWN, (keyCode, e) => {\n\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst sel = grid.selection.select;\n\t\t\tif (!util.isTarget(sel.col, sel.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\topen({\n\t\t\t\tcol: sel.col,\n\t\t\t\trow: sel.row\n\t\t\t});\n\t\t}), grid.listen(SELECTED_CELL, e => {\n\t\t\tdetachMenu();\n\t\t}), grid.listen(SCROLL, () => {\n\t\t\tdetachMenu(true);\n\t\t}),\n\n\t\t// mouse move\n\t\tgrid.listen(MOUSEOVER_CELL, e => {\n\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t}), grid.listen(MOUSEMOVE_CELL, e => {\n\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!grid.getElement().style.cursor) {\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t\t}\n\t\t}), grid.listen(MOUSEOUT_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = '';\n\t\t})];\n\t}\n}\n\nmodule.exports = InlineMenuEditor;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/SmallDialogInputEditor.js\":\n/*!**************************************************!*\\\n  !*** ./columns/action/SmallDialogInputEditor.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst SmallDialogInputElement = __webpack_require__(/*! ./internal/SmallDialogInputElement */ \"./columns/action/internal/SmallDialogInputElement.js\");\nconst { SMALL_DIALOG_INPUT_EDITOR_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachInput(grid, cell, editor, value) {\n\tif (!grid[_]) {\n\t\tsetReadonly(grid, _, {});\n\t}\n\tif (!globalElement) {\n\t\tglobalElement = new SmallDialogInputElement();\n\t}\n\tconst state = grid[_];\n\tif (!state.element) {\n\t\tstate.element = globalElement;\n\t\tbindGridCount++;\n\t\tgrid.addDisposable({\n\t\t\tdispose() {\n\t\t\t\tbindGridCount--;\n\t\t\t\tif (!bindGridCount) {\n\t\t\t\t\tglobalElement.dispose();\n\t\t\t\t\tglobalElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachInput(gridFocus) {\n\tif (globalElement) {\n\t\tglobalElement.detach(gridFocus);\n\t}\n}\nconst BaseInputEditor = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\nclass SmallDialogInputEditor extends BaseInputEditor {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._helperText = option.helperText;\n\t\tthis._inputValidator = option.inputValidator;\n\t\tthis._validator = option.validator;\n\t\tthis._classList = option.classList;\n\t\tthis._type = option.type;\n\t}\n\tdispose() {\n\t\tthis._inputDialogManager.dispose();\n\t\tthis._inputDialogManager = null;\n\t}\n\tget classList() {\n\t\treturn this._classList && (__webpack_provided_Array_dot_isArray(this._classList) ? this._classList : [this._classList]);\n\t}\n\tset classList(classList) {\n\t\tthis._classList = classList;\n\t}\n\tget type() {\n\t\treturn this._type;\n\t}\n\tset type(type) {\n\t\tthis._type = type;\n\t}\n\tget helperText() {\n\t\treturn this._helperText;\n\t}\n\tget inputValidator() {\n\t\treturn this._inputValidator;\n\t}\n\tget validator() {\n\t\treturn this._validator;\n\t}\n\tclone() {\n\t\treturn new SmallDialogInputEditor(this);\n\t}\n\tonInputCellInternal(grid, cell, inputValue) {\n\t\tattachInput(grid, cell, this, inputValue);\n\t}\n\tonOpenCellInternal(grid, cell) {\n\t\tgrid.doGetCellValue(cell.col, cell.row, value => {\n\t\t\tattachInput(grid, cell, this, value);\n\t\t});\n\t}\n\tonChangeSelectCellInternal(grid, cell, selected) {\n\t\t// cancel input\n\t\tdetachInput();\n\t}\n\tonGridScrollInternal(grid) {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonChangeDisabledInternal() {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonChangeReadOnlyInternal() {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonSetInputAttrsInternal(grid, cell, input) {\n\t\tSmallDialogInputElement.setInputAttrs(this, grid, input);\n\t}\n}\n\nmodule.exports = SmallDialogInputEditor;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/actionBind.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/actionBind.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst { isPromise, event: { cancel } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst { EVENT_TYPE: {\n\t\t\tCLICK_CELL,\n\t\t\tMOUSEOVER_CELL,\n\t\t\tMOUSEOUT_CELL,\n\t\t\tKEYDOWN\n\t\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\n\tconst KEY_ENTER = 13;\n\tfunction bindCellClickAction(grid, col, util, {\n\t\taction,\n\t\tmouseOver,\n\t\tmouseOut\n\t}) {\n\t\treturn [\n\t\t// click\n\t\tgrid.listen(CLICK_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\taction({\n\t\t\t\tcol: e.col,\n\t\t\t\trow: e.row\n\t\t\t});\n\t\t}),\n\t\t// mouse move\n\t\tgrid.listen(MOUSEOVER_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (mouseOver) {\n\t\t\t\tif (!mouseOver({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t})) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t}), grid.listen(MOUSEOUT_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (mouseOut) {\n\t\t\t\tmouseOut({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t});\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = '';\n\t\t})];\n\t}\n\tfunction bindCellKeyAction(grid, col, util, { action, acceptKeys = [] }) {\n\t\tacceptKeys = [...acceptKeys, KEY_ENTER];\n\t\treturn [\n\t\t// enter key down\n\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\n\t\t\tif (acceptKeys.indexOf(keyCode) === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst sel = grid.selection.select;\n\t\t\tif (!util.isTarget(sel.col, sel.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isPromise(grid.getRowRecord(sel.row))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\taction({\n\t\t\t\tcol: sel.col,\n\t\t\t\trow: sel.row\n\t\t\t});\n\t\t\tcancel(e);\n\t\t})];\n\t}\n\n\tmodule.exports = {\n\t\tbindCellClickAction,\n\t\tbindCellKeyAction\n\t};\n}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineInputElement.css\":\n/*!********************************************************!*\\\n  !*** ./columns/action/internal/InlineInputElement.css ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./InlineInputElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineInputElement.js\":\n/*!*******************************************************!*\\\n  !*** ./columns/action/internal/InlineInputElement.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst {\n\tevent: {\n\t\tgetKeyCode,\n\t\tcancel: cancelEvent\n\t}\n} = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement\n} = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\nconst KEY_ENTER = 13;\n\nconst CLASSNAME = 'cheetah-grid__inline-input';\n\nfunction createInputElement() {\n\t__webpack_require__(/*! ./InlineInputElement.css */ \"./columns/action/internal/InlineInputElement.css\");\n\treturn createElement('input', { classList: CLASSNAME });\n}\n\nfunction setInputAttrs(editor, grid, input) {\n\tconst { classList, type } = editor;\n\tif (classList) {\n\t\tinput.classList.add(...classList);\n\t}\n\tinput.type = type || '';\n}\n\nclass InlineInputElement {\n\tstatic setInputAttrs(...args) {\n\t\tsetInputAttrs(...args);\n\t}\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tthis._input = createInputElement();\n\t\tthis._bindInputEvents();\n\t}\n\tdispose() {\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._input = null;\n\t\tthis._beforePropEditor = null;\n\t}\n\tattach(grid, editor, col, row, value) {\n\t\tconst input = this._input;\n\t\tconst handler = this._handler;\n\n\t\tif (this._beforePropEditor) {\n\t\t\tconst { classList } = this._beforePropEditor;\n\t\t\tif (classList) {\n\t\t\t\tinput.classList.remove(...classList);\n\t\t\t}\n\t\t}\n\n\t\tinput.style.font = grid.font || '16px sans-serif';\n\n\t\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\t\tinput.style.top = rect.top.toFixed() + 'px';\n\t\tinput.style.left = rect.left.toFixed() + 'px';\n\t\tinput.style.width = rect.width.toFixed() + 'px';\n\t\tinput.style.height = rect.height.toFixed() + 'px';\n\t\telement.appendChild(input);\n\n\t\tsetInputAttrs(editor, grid, input);\n\t\tinput.value = value;\n\n\t\tthis._activeData = { grid, col, row, editor };\n\t\tthis._beforePropEditor = editor;\n\n\t\tconst focus = () => {\n\t\t\tinput.focus();\n\n\t\t\tconst end = input.value.length;\n\t\t\ttry {\n\t\t\t\tif (typeof input.selectionStart !== 'undefined') {\n\t\t\t\t\tinput.selectionStart = end;\n\t\t\t\t\tinput.selectionEnd = end;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t//ignore\n\t\t\t}\n\t\t\tif (document.selection) {\n\t\t\t\tconst range = input.createTextRange();\n\t\t\t\trange.collapse();\n\t\t\t\trange.moveEnd('character', end);\n\t\t\t\trange.moveStart('character', end);\n\t\t\t\trange.select();\n\t\t\t}\n\t\t};\n\t\thandler.tryWithOffEvents(input, 'blur', () => {\n\t\t\tfocus();\n\t\t});\n\t}\n\tdetach(gridFocus) {\n\t\tif (this._isActive()) {\n\t\t\tconst { grid, col, row } = this._activeData;\n\t\t\tconst input = this._input;\n\t\t\tthis._handler.tryWithOffEvents(input, 'blur', () => {\n\t\t\t\tinput.parentElement.removeChild(input);\n\t\t\t});\n\t\t\tgrid.invalidateCell(col, row);\n\t\t\tif (gridFocus) {\n\t\t\t\tgrid.focus();\n\t\t\t}\n\t\t}\n\t\tthis._activeData = null;\n\t}\n\tdoChangeValue() {\n\t\tif (!this._isActive()) {\n\t\t\treturn;\n\t\t}\n\t\tconst input = this._input;\n\t\tconst { value } = input;\n\t\tconst { grid, col, row } = this._activeData;\n\t\tgrid.doChangeValue(col, row, () => value);\n\t}\n\t_isActive() {\n\t\tconst input = this._input;\n\t\tif (!input || !input.parentElement) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._activeData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t_bindInputEvents() {\n\t\tconst handler = this._handler;\n\t\tconst input = this._input;\n\t\tconst stopPropagationOnly = e => e.stopPropagation(); // grid\n\t\thandler.on(input, 'click', stopPropagationOnly);\n\t\thandler.on(input, 'mousedown', stopPropagationOnly);\n\t\thandler.on(input, 'touchstart', stopPropagationOnly);\n\t\thandler.on(input, 'dblclick', stopPropagationOnly);\n\n\t\thandler.on(input, 'compositionstart', e => {\n\t\t\tinput.classList.add('composition');\n\t\t});\n\t\thandler.on(input, 'compositionend', e => {\n\t\t\tinput.classList.remove('composition');\n\t\t});\n\t\thandler.on(input, 'keydown', e => {\n\t\t\tif (input.classList.contains('composition')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (getKeyCode(e) === KEY_ENTER) {\n\t\t\t\tif (!this._isActive()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst { grid } = this._activeData;\n\n\t\t\t\tthis.doChangeValue();\n\t\t\t\tif (grid) {\n\t\t\t\t\tgrid.focus();\n\t\t\t\t}\n\t\t\t\tthis.detach();\n\t\t\t\tcancelEvent(e);\n\t\t\t}\n\t\t});\n\t\thandler.on(input, 'blur', e => {\n\t\t\tthis.doChangeValue();\n\t\t\tthis.detach();\n\t\t});\n\t}\n}\n\nmodule.exports = InlineInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineMenuElement.css\":\n/*!*******************************************************!*\\\n  !*** ./columns/action/internal/InlineMenuElement.css ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./InlineMenuElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineMenuElement.js\":\n/*!******************************************************!*\\\n  !*** ./columns/action/internal/InlineMenuElement.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst {\n\tisDef,\n\tevent: {\n\t\tgetKeyCode,\n\t\tcancel: cancelEvent\n\t}\n} = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement,\n\tappendHtml,\n\tempty,\n\tdisableFocus,\n\tisFocusable,\n\tfindPrevSiblingFocusable,\n\tfindNextSiblingFocusable\n} = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ESC = 27;\n\nconst CLASSNAME = 'cheetah-grid__inline-menu';\nconst ITEM_CLASSNAME = CLASSNAME + '__menu-item';\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\nconst EMPTY_ITEM_CLASSNAME = ITEM_CLASSNAME + '--empty';\n\nfunction findItemParents(target) {\n\tlet el = target;\n\twhile (!el.classList.contains(ITEM_CLASSNAME)) {\n\t\tel = el.parentElement;\n\t\tif (!el || el.classList.contains(CLASSNAME)) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\treturn el;\n}\n\nfunction createMenuElement() {\n\t__webpack_require__(/*! ./InlineMenuElement.css */ \"./columns/action/internal/InlineMenuElement.css\");\n\treturn createElement('ul', { classList: CLASSNAME });\n}\nfunction attachElement(element, rect, menu) {\n\tmenu.style.top = rect.top.toFixed() + 'px';\n\tmenu.style.left = rect.left.toFixed() + 'px';\n\tmenu.style.width = rect.width.toFixed() + 'px';\n\tmenu.style['line-height'] = rect.height.toFixed() + 'px';\n\telement.appendChild(menu);\n}\n\nfunction optionToLi({ classList, caption, value, html }, index) {\n\tconst item = createElement('li', { classList: ITEM_CLASSNAME });\n\titem.tabIndex = 0;\n\titem.dataset.valueindex = index;\n\tif (classList) {\n\t\titem.classList.add(...(__webpack_provided_Array_dot_isArray(classList) ? classList : [classList]));\n\t}\n\n\tif (caption) {\n\t\tconst span = createElement('span', { text: caption });\n\t\titem.appendChild(span);\n\t} else if (html) {\n\t\tappendHtml(item, html);\n\t}\n\n\tif (value === '' || !isDef(value)) {\n\t\titem.classList.add(EMPTY_ITEM_CLASSNAME);\n\t}\n\n\treturn item;\n}\n\nfunction openMenu(grid, editor, col, row, value, menu) {\n\tconst { options, classList } = editor;\n\tmenu.classList.remove(SHOWN_CLASSNAME);\n\tmenu.classList.add(HIDDEN_CLASSNAME);\n\tempty(menu);\n\tmenu.style.font = grid.font || '16px sans-serif';\n\tlet emptyItemEl = null;\n\tlet valueItemEl = null;\n\n\toptions.forEach((option, i) => {\n\t\tconst item = optionToLi(option, i);\n\t\tmenu.appendChild(item);\n\t\tif (option.value === value) {\n\t\t\tvalueItemEl = item;\n\t\t\titem.dataset.select = true;\n\t\t}\n\t\tif (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\n\t\t\temptyItemEl = item;\n\t\t}\n\t});\n\tconst focusEl = valueItemEl || emptyItemEl || menu.children[0];\n\tif (classList) {\n\t\tmenu.classList.add(...classList);\n\t}\n\tconst children = Array.prototype.slice.call(menu.children, 0);\n\tconst focusIndex = children.indexOf(focusEl);\n\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\n\t// Cover the right line\n\trect.width++;\n\n\t// append for calculation\n\tattachElement(element, rect, menu);\n\n\t// Make the selection item at the middle\n\tlet offset = 0;\n\tlet allHeight = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst offsetHeight = children[i].offsetHeight;\n\t\tif (i < focusIndex) {\n\t\t\toffset += offsetHeight;\n\t\t}\n\t\tallHeight += offsetHeight;\n\t}\n\trect.offsetTop(-offset);\n\tmenu.style['transform-origin'] = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\n\tattachElement(element, rect, menu);\n\n\t// Control not to overflow the screen range\n\tconst menuClientRect = menu.getBoundingClientRect();\n\tconst scaleDiff = (allHeight - menuClientRect.height) / 2;\n\tconst orgMenuTop = menuClientRect.top - scaleDiff;\n\tlet menuTop = orgMenuTop;\n\tconst menuBottom = menuTop + allHeight;\n\tconst winBottom = window.innerHeight;\n\tconst winMargin = 20;\n\tif (menuBottom > winBottom - winMargin) {\n\t\tconst diff = menuBottom - winBottom + winMargin;\n\t\tmenuTop -= diff;\n\t}\n\tif (menuTop < 0 /*winTop*/ + winMargin) {\n\t\tmenuTop = winMargin;\n\t}\n\tif (menuTop !== orgMenuTop) {\n\t\trect.offsetTop(-(orgMenuTop - menuTop));\n\t\t// re update\n\t\tattachElement(element, rect, menu);\n\t}\n\n\tif (focusEl) {\n\t\tfocusEl.focus();\n\t}\n\tmenu.classList.remove(HIDDEN_CLASSNAME);\n\tmenu.classList.add(SHOWN_CLASSNAME);\n}\n\nfunction closeMenu(grid, col, row, menu) {\n\tmenu.classList.remove(SHOWN_CLASSNAME);\n\tmenu.classList.add(HIDDEN_CLASSNAME);\n\tdisableFocus(menu);\n}\n\nclass InlineMenuElement {\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tthis._menu = createMenuElement();\n\t\tthis._bindMenuEvents();\n\t}\n\tdispose() {\n\t\tconst menu = this._menu;\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._menu = null;\n\t\tthis._beforePropEditor = null;\n\t\tif (menu.parentElement) {\n\t\t\tmenu.parentElement.removeChild(menu);\n\t\t}\n\t}\n\tattach(grid, editor, col, row, value) {\n\t\tconst menu = this._menu;\n\n\t\tif (this._beforePropEditor) {\n\t\t\tconst { classList } = this._beforePropEditor;\n\t\t\tif (classList) {\n\t\t\t\tmenu.classList.remove(...classList);\n\t\t\t}\n\t\t}\n\n\t\topenMenu(grid, editor, col, row, value, menu);\n\t\tthis._activeData = { grid, col, row, editor };\n\t\tthis._beforePropEditor = editor;\n\t}\n\tdetach(gridFocus) {\n\t\tif (this._isActive()) {\n\t\t\tconst { grid, col, row } = this._activeData;\n\t\t\tconst menu = this._menu;\n\t\t\tcloseMenu(grid, col, row, menu);\n\n\t\t\tgrid.invalidateCell(col, row);\n\t\t\tif (gridFocus) {\n\t\t\t\tgrid.focus();\n\t\t\t}\n\t\t}\n\t\tthis._activeData = null;\n\t}\n\t_doChangeValue(valueindex) {\n\t\tif (!this._isActive()) {\n\t\t\treturn;\n\t\t}\n\t\tconst { grid, col, row, editor } = this._activeData;\n\t\tconst { value } = editor.options[valueindex];\n\t\tgrid.doChangeValue(col, row, () => value);\n\t}\n\t_isActive() {\n\t\tconst menu = this._menu;\n\t\tif (!menu || !menu.parentElement) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._activeData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t_bindMenuEvents() {\n\t\tconst handler = this._handler;\n\t\tconst menu = this._menu;\n\n\t\tconst stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\t\thandler.on(menu, 'mousedown', stopPropagationOnly);\n\t\thandler.on(menu, 'touchstart', stopPropagationOnly);\n\t\thandler.on(menu, 'dblclick', stopPropagationOnly);\n\n\t\thandler.on(menu, 'click', e => {\n\t\t\te.stopPropagation();\n\t\t\tconst item = findItemParents(e.target);\n\t\t\tif (!item) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst valueindex = item.dataset.valueindex;\n\t\t\tthis._doChangeValue(item.dataset.valueindex);\n\t\t\tthis.detach(true);\n\t\t});\n\t\thandler.on(menu, 'keydown', e => {\n\t\t\tconst item = findItemParents(e.target);\n\t\t\tif (!item) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst keyCode = getKeyCode(e);\n\t\t\tif (keyCode === KEY_ENTER) {\n\t\t\t\tconst valueindex = item.dataset.valueindex;\n\t\t\t\tthis._doChangeValue(valueindex);\n\t\t\t\tthis.detach(true);\n\t\t\t\tcancelEvent(e);\n\t\t\t} else if (keyCode === KEY_ESC) {\n\t\t\t\tthis.detach(true);\n\t\t\t\tcancelEvent(e);\n\t\t\t} else if (keyCode === KEY_UP) {\n\t\t\t\tconst n = findPrevSiblingFocusable(item);\n\t\t\t\tif (n) {\n\t\t\t\t\tn.focus();\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t}\n\t\t\t} else if (keyCode === KEY_DOWN) {\n\t\t\t\tconst n = findNextSiblingFocusable(item);\n\t\t\t\tif (n) {\n\t\t\t\t\tn.focus();\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t}\n\t\t\t} else if (keyCode === KEY_TAB) {\n\t\t\t\tif (!e.shiftKey) {\n\t\t\t\t\tif (!findNextSiblingFocusable(item)) {\n\t\t\t\t\t\tlet n = menu.querySelector('.' + ITEM_CLASSNAME);\n\t\t\t\t\t\tif (!isFocusable(n)) {\n\t\t\t\t\t\t\tn = findNextSiblingFocusable(n);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (n) {\n\t\t\t\t\t\t\tn.focus();\n\t\t\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!findPrevSiblingFocusable(item)) {\n\t\t\t\t\t\tconst items = menu.querySelectorAll('.' + ITEM_CLASSNAME);\n\t\t\t\t\t\tlet n = items[items.length - 1];\n\t\t\t\t\t\tif (!isFocusable(n)) {\n\t\t\t\t\t\t\tn = findPrevSiblingFocusable(n);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (n) {\n\t\t\t\t\t\t\tn.focus();\n\t\t\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = InlineMenuElement;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/internal/SmallDialogInputElement.css\":\n/*!*************************************************************!*\\\n  !*** ./columns/action/internal/SmallDialogInputElement.css ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./SmallDialogInputElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/SmallDialogInputElement.js\":\n/*!************************************************************!*\\\n  !*** ./columns/action/internal/SmallDialogInputElement.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst {\n\tevent: {\n\t\tgetKeyCode,\n\t\tcancel: cancelEvent\n\t},\n\tthen\n} = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement\n} = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = 'cheetah-grid__small-dialog-input';\nconst INPUT_CLASSNAME = CLASSNAME + '__input';\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\n\nconst KEY_ENTER = 13;\nconst KEY_ESC = 27;\n\nfunction _focus(input, handler) {\n\tconst focus = () => {\n\t\tinput.focus();\n\n\t\tconst end = input.value.length;\n\t\ttry {\n\t\t\tif (typeof input.selectionStart !== 'undefined') {\n\t\t\t\tinput.selectionStart = end;\n\t\t\t\tinput.selectionEnd = end;\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t//ignore\n\t\t}\n\t\tif (document.selection) {\n\t\t\tconst range = input.createTextRange();\n\t\t\trange.collapse();\n\t\t\trange.moveEnd('character', end);\n\t\t\trange.moveStart('character', end);\n\t\t\trange.select();\n\t\t}\n\t};\n\thandler.tryWithOffEvents(input, 'blur', () => {\n\t\tfocus();\n\t});\n}\n\nfunction createDialogElement() {\n\t__webpack_require__(/*! ./SmallDialogInputElement.css */ \"./columns/action/internal/SmallDialogInputElement.css\");\n\tconst element = createElement('div', { classList: [CLASSNAME, HIDDEN_CLASSNAME] });\n\tconst input = createElement('input', { classList: INPUT_CLASSNAME });\n\tinput.readonly = true;\n\tinput.tabIndex = -1;\n\telement.appendChild(input);\n\treturn element;\n}\n\nfunction bindProps(grid, dialog, input, editor) {\n\tconst { classList, helperText } = editor;\n\tif (classList) {\n\t\tdialog.classList.add(...classList);\n\t}\n\tif (helperText && typeof helperText !== 'function') {\n\t\tdialog.dataset.helperText = helperText;\n\t}\n\tsetInputAttrs(editor, grid, input);\n}\n\nfunction unbindProps(grid, dialog, input, editor) {\n\tconst { classList } = editor;\n\tif (classList) {\n\t\tdialog.classList.remove(...classList);\n\t}\n\tdelete dialog.dataset.helperText;\n\tinput.type = '';\n}\n\nfunction setInputAttrs(editor, grid, input) {\n\tconst { type } = editor;\n\tinput.type = type || '';\n}\n\nclass SmallDialogInputElement {\n\tstatic setInputAttrs(...args) {\n\t\tsetInputAttrs(...args);\n\t}\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tthis._dialog = createDialogElement();\n\t\tthis._input = this._dialog.querySelector('.' + INPUT_CLASSNAME);\n\t\tthis._bindDialogEvents();\n\t}\n\tdispose() {\n\t\tconst dialog = this._dialog;\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._dialog = null;\n\t\tthis._input = null;\n\t\tthis._beforePropEditor = null;\n\t\tif (dialog.parentElement) {\n\t\t\tdialog.parentElement.removeChild(dialog);\n\t\t}\n\t}\n\tattach(grid, editor, col, row, value) {\n\t\tconst handler = this._handler;\n\t\tconst dialog = this._dialog;\n\t\tconst input = this._input;\n\n\t\tif (this._beforePropEditor) {\n\t\t\tunbindProps(grid, dialog, input, this._beforePropEditor);\n\t\t}\n\n\t\tdelete dialog.dataset.errorMessage;\n\t\tdialog.classList.remove(SHOWN_CLASSNAME);\n\t\tdialog.classList.add(HIDDEN_CLASSNAME);\n\t\tinput.readonly = false;\n\t\tinput.tabIndex = 0;\n\t\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\t\tdialog.style.top = rect.top.toFixed() + 'px';\n\t\tdialog.style.left = rect.left.toFixed() + 'px';\n\t\tdialog.style.width = rect.width.toFixed() + 'px';\n\t\tinput.style.height = rect.height.toFixed() + 'px';\n\t\telement.appendChild(dialog);\n\n\t\tinput.value = value;\n\t\tinput.style.font = grid.font || '16px sans-serif';\n\t\tconst activeData = { grid, col, row, editor };\n\t\tthis._onInputValue(input, activeData);\n\t\t_focus(input, handler);\n\t\tdialog.classList.add(SHOWN_CLASSNAME);\n\t\tdialog.classList.remove(HIDDEN_CLASSNAME);\n\t\tinput.readonly = true;\n\n\t\tbindProps(grid, dialog, input, editor);\n\n\t\tthis._activeData = activeData;\n\t\tthis._beforePropEditor = editor;\n\t}\n\tdetach(gridFocus) {\n\t\tif (this._isActive()) {\n\t\t\tconst dialog = this._dialog;\n\t\t\tconst input = this._input;\n\n\t\t\tdialog.classList.remove(SHOWN_CLASSNAME);\n\t\t\tdialog.classList.add(HIDDEN_CLASSNAME);\n\t\t\tinput.readonly = false;\n\t\t\tinput.tabIndex = -1;\n\n\t\t\tconst { grid, col, row } = this._activeData;\n\n\t\t\tgrid.invalidateCell(col, row);\n\t\t\tif (gridFocus) {\n\t\t\t\tgrid.focus();\n\t\t\t}\n\t\t}\n\t\tthis._activeData = null;\n\t\tthis._beforeValue = null;\n\t}\n\t_doChangeValue() {\n\t\tif (!this._isActive()) {\n\t\t\treturn false;\n\t\t}\n\t\tconst input = this._input;\n\t\tconst { value } = input;\n\t\treturn then(this._validate(value), res => {\n\t\t\tif (res && value === input.value) {\n\t\t\t\tconst { grid, col, row } = this._activeData;\n\t\t\t\tgrid.doChangeValue(col, row, () => value);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\t_isActive() {\n\t\tconst dialog = this._dialog;\n\t\tif (!dialog || !dialog.parentElement) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._activeData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t_bindDialogEvents() {\n\t\tconst handler = this._handler;\n\t\tconst dialog = this._dialog;\n\t\tconst input = this._input;\n\t\tconst stopPropagationOnly = e => e.stopPropagation(); // grid\n\t\thandler.on(dialog, 'click', stopPropagationOnly);\n\t\thandler.on(dialog, 'dblclick', stopPropagationOnly);\n\t\thandler.on(dialog, 'mousedown', stopPropagationOnly);\n\t\thandler.on(dialog, 'touchstart', stopPropagationOnly);\n\n\t\thandler.on(input, 'compositionstart', e => {\n\t\t\tinput.classList.add('composition');\n\t\t});\n\t\thandler.on(input, 'compositionend', e => {\n\t\t\tinput.classList.remove('composition');\n\t\t\tthis._onInputValue(input);\n\t\t});\n\t\tconst onKeyupAndPress = e => {\n\t\t\tif (input.classList.contains('composition')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._onInputValue(input);\n\t\t};\n\t\thandler.on(input, 'keyup', onKeyupAndPress);\n\t\thandler.on(input, 'keypress', onKeyupAndPress);\n\t\thandler.on(input, 'keydown', e => {\n\t\t\tif (input.classList.contains('composition')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst keyCode = getKeyCode(e);\n\t\t\tif (keyCode === KEY_ESC) {\n\t\t\t\tthis.detach(true);\n\t\t\t\tcancelEvent(e);\n\t\t\t} else if (keyCode === KEY_ENTER) {\n\t\t\t\tconst input = this._input;\n\t\t\t\tconst { value } = input;\n\t\t\t\tthen(this._doChangeValue(), r => {\n\t\t\t\t\tif (r && value === input.value) {\n\t\t\t\t\t\tthis.detach(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcancelEvent(e);\n\t\t\t} else {\n\t\t\t\tthis._onInputValue(input);\n\t\t\t}\n\t\t});\n\t}\n\t_onInputValue(input, activeData) {\n\t\tconst before = this._beforeValue;\n\t\tconst { value } = input;\n\t\tif (before !== value) {\n\t\t\tthis._onInputValueChange(value, before, activeData);\n\t\t}\n\t\tthis._beforeValue = value;\n\t}\n\t_onInputValueChange(after, before, activeData) {\n\t\tactiveData = activeData || this._activeData;\n\t\tconst dialog = this._dialog;\n\t\tconst { grid, col, row, editor } = activeData;\n\t\tif (typeof editor.helperText === 'function') {\n\t\t\tconst helperText = editor.helperText(after, { grid, col, row });\n\t\t\tif (helperText) {\n\t\t\t\tdialog.dataset.helperText = helperText;\n\t\t\t} else {\n\t\t\t\tdelete dialog.dataset.helperText;\n\t\t\t}\n\t\t}\n\t\tif ('errorMessage' in dialog.dataset) {\n\t\t\tthis._validate(after, true);\n\t\t}\n\t}\n\t_validate(value, inputOnly) {\n\t\tconst dialog = this._dialog;\n\t\tconst input = this._input;\n\t\tconst { grid, col, row, editor } = this._activeData;\n\t\tlet message = null;\n\t\tif (editor.inputValidator) {\n\t\t\tmessage = editor.inputValidator(value, { grid, col, row });\n\t\t}\n\t\treturn then(message, message => {\n\t\t\tif (!message && editor.validator && !inputOnly) {\n\t\t\t\tmessage = editor.validator(value, { grid, col, row });\n\t\t\t}\n\t\t\treturn then(message, message => {\n\t\t\t\tif (message && value === input.value) {\n\t\t\t\t\tdialog.dataset.errorMessage = message;\n\t\t\t\t} else {\n\t\t\t\t\tdelete dialog.dataset.errorMessage;\n\t\t\t\t}\n\t\t\t\treturn !message;\n\t\t\t});\n\t\t});\n\t}\n}\n\nmodule.exports = SmallDialogInputElement;\n\n/***/ }),\n\n/***/ \"./columns/message/BaseMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/BaseMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nclass BaseMessage {\n\tconstructor(grid) {\n\t\tthis._grid = grid;\n\t}\n\tdispose() {\n\t\tthis.detachMessageElement();\n\t\tif (this._messageElement) {\n\t\t\tthis._messageElement.dispose();\n\t\t}\n\t\tthis._messageElement = null;\n\t}\n\t_getMessageElement() {\n\t\treturn this._messageElement || (this._messageElement = this.createMessageElementInternal());\n\t}\n\tcreateMessageElementInternal() {}\n\tdrawCellMessageInternal(message, context, style, helper, info) {}\n\tattachMessageElement(col, row, message) {\n\t\tconst messageElement = this._getMessageElement();\n\t\tmessageElement.attach(this._grid, col, row, message);\n\t}\n\tmoveMessageElement(col, row) {\n\t\tconst messageElement = this._getMessageElement();\n\t\tmessageElement.move(this._grid, col, row);\n\t}\n\tdetachMessageElement() {\n\t\tconst messageElement = this._getMessageElement();\n\t\tmessageElement._detach();\n\t}\n\tdrawCellMessage(message, context, style, helper, info) {\n\t\tthis.drawCellMessageInternal(message, context, style, helper, info);\n\t}\n}\n\nmodule.exports = BaseMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/ErrorMessage.js\":\n/*!*****************************************!*\\\n  !*** ./columns/message/ErrorMessage.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Rect = __webpack_require__(/*! ../../internal/Rect */ \"./internal/Rect.js\");\nconst BaseMessage = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\nconst ErrorMessageElement = __webpack_require__(/*! ./internal/ErrorMessageElement */ \"./columns/message/internal/ErrorMessageElement.js\");\n\nconst RED_A100 = '#ff8a80';\n// const RED_A400 = '#FF1744';\n\nclass ErrorMessage extends BaseMessage {\n\tcreateMessageElementInternal() {\n\t\treturn new ErrorMessageElement();\n\t}\n\tdrawCellMessageInternal(message, context, style, helper, info) {\n\t\tconst { bgColor } = style;\n\n\t\tconst { selected } = context.getSelectState();\n\n\t\tconst rect = context.getRect();\n\n\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\tif (!selected) {\n\t\t\t\t// draw box\n\t\t\t\tctx.fillStyle = RED_A100;\n\t\t\t\tconst boxRect = rect.copy();\n\t\t\t\tboxRect.left = boxRect.right - 24;\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\n\n\t\t\t\t// draw exclamation mark\n\t\t\t\tconst fillColor = bgColor;\n\t\t\t\tconst height = 20;\n\t\t\t\tconst width = height / 5;\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3), context, { fillColor });\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5), context, { fillColor });\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = ErrorMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/InfoMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/InfoMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst BaseMessage = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\nconst MessageElement = __webpack_require__(/*! ./internal/MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst Rect = __webpack_require__(/*! ../../internal/Rect */ \"./internal/Rect.js\");\n\nconst GREY_L2 = '#e0e0e0';\n// const GREY_L1 = '#bdbdbd';\n\nclass InfoMessage extends BaseMessage {\n\tcreateMessageElementInternal() {\n\t\treturn new MessageElement();\n\t}\n\tdrawCellMessageInternal(message, context, style, helper, info) {\n\t\tconst { bgColor } = style;\n\n\t\tconst { selected } = context.getSelectState();\n\n\t\tconst rect = context.getRect();\n\n\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\tif (!selected) {\n\t\t\t\t// draw box\n\t\t\t\tctx.fillStyle = GREY_L2;\n\t\t\t\tconst boxRect = rect.copy();\n\t\t\t\tboxRect.left = boxRect.right - 24;\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\n\n\t\t\t\t// draw exclamation mark\n\t\t\t\tconst fillColor = bgColor;\n\t\t\t\tconst height = 20;\n\t\t\t\tconst width = height / 5;\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5), context, { fillColor });\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 2, width, height / 5 * 3), context, { fillColor });\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = InfoMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/MessageHandler.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/MessageHandler.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { isPromise } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst {\n\tSELECTED_CELL,\n\tSCROLL,\n\tCHANGED_VALUE\n} = __webpack_require__(/*! ../../list-grid/EVENT_TYPE */ \"./list-grid/EVENT_TYPE.js\");\nconst ErrorMessage = __webpack_require__(/*! ./ErrorMessage */ \"./columns/message/ErrorMessage.js\");\nconst WarningMessage = __webpack_require__(/*! ./WarningMessage */ \"./columns/message/WarningMessage.js\");\nconst InfoMessage = __webpack_require__(/*! ./InfoMessage */ \"./columns/message/InfoMessage.js\");\n\nclass MessageHandler {\n\tconstructor(grid, getMessage) {\n\t\tthis._grid = grid;\n\t\tthis._messageInstances = {};\n\t\tthis._bindGridEvent(grid, getMessage);\n\t}\n\tdispose() {\n\t\tconst messageInstances = this._messageInstances;\n\t\tfor (const k in messageInstances) {\n\t\t\tmessageInstances[k].dispose();\n\t\t}\n\t\tthis._messageInstances = null;\n\t}\n\tdrawCellMessage(message, context, style, helper, info) {\n\n\t\tif (!message || isPromise(message)) {\n\t\t\treturn;\n\t\t}\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\n\t\tinstance.drawCellMessage(message, context, style, helper, info);\n\t}\n\t_attach(col, row, message) {\n\t\tconst info = this._attachInfo;\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\n\t\tif (info && info.instance !== instance) {\n\t\t\tinfo.instance.detachMessageElement();\n\t\t}\n\t\tinstance.attachMessageElement(col, row, this._toMessageText(message));\n\t\tthis._attachInfo = { col, row, instance };\n\t}\n\t_move(col, row) {\n\t\tconst info = this._attachInfo;\n\t\tif (!info || info.col !== col || info.row !== row) {\n\t\t\treturn;\n\t\t}\n\t\tconst { instance } = info;\n\t\tinstance.moveMessageElement(col, row);\n\t}\n\t_detach() {\n\t\tconst info = this._attachInfo;\n\t\tif (!info) {\n\t\t\treturn;\n\t\t}\n\t\tconst { instance } = info;\n\t\tinstance.detachMessageElement();\n\t\tthis._attachInfo = null;\n\t}\n\t_bindGridEvent(grid, getMessage) {\n\t\tconst onSelectMessage = sel => {\n\t\t\tconst message = getMessage(sel.col, sel.row);\n\t\t\tif (!message || isPromise(message)) {\n\t\t\t\tthis._detach();\n\t\t\t} else {\n\t\t\t\tthis._attach(sel.col, sel.row, message);\n\t\t\t}\n\t\t};\n\t\tgrid.listen(SELECTED_CELL, e => {\n\t\t\tif (!e.selected) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.before.col === e.col && e.before.row === e.row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonSelectMessage(e);\n\t\t});\n\t\tgrid.listen(SCROLL, () => {\n\t\t\tconst sel = grid.selection.select;\n\t\t\tthis._move(sel.col, sel.row);\n\t\t});\n\t\tgrid.listen(CHANGED_VALUE, e => {\n\t\t\tconst sel = grid.selection.select;\n\t\t\tif (sel.col !== e.col || sel.row !== e.row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonSelectMessage(e);\n\t\t});\n\t}\n\t_getMessageInstanceOfMessage(message) {\n\t\tmessage = message || '';\n\t\tif (typeof message === 'string') {\n\t\t\treturn this._createMessageInstance('error', ErrorMessage);\n\t\t}\n\t\tconst type = ('' + message.type).toLowerCase();\n\t\tif (type === 'info') {\n\t\t\treturn this._createMessageInstance('info', InfoMessage);\n\t\t} else if (type === 'warning') {\n\t\t\treturn this._createMessageInstance('warning', WarningMessage);\n\t\t}\n\t\treturn this._createMessageInstance('error', ErrorMessage);\n\t}\n\t_toMessageText(message) {\n\t\tmessage = message || '';\n\t\tif (typeof message === 'string') {\n\t\t\treturn message;\n\t\t}\n\t\tif (message.message) {\n\t\t\treturn message.message;\n\t\t}\n\t\treturn '' + message;\n\t}\n\t_createMessageInstance(name, Message) {\n\t\tconst messageInstances = this._messageInstances;\n\t\treturn messageInstances[name] || (messageInstances[name] = new Message(this._grid));\n\t}\n}\n\nmodule.exports = MessageHandler;\n\n/***/ }),\n\n/***/ \"./columns/message/WarningMessage.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/WarningMessage.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Rect = __webpack_require__(/*! ../../internal/Rect */ \"./internal/Rect.js\");\nconst BaseMessage = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\nconst WarningMessageElement = __webpack_require__(/*! ./internal/WarningMessageElement */ \"./columns/message/internal/WarningMessageElement.js\");\n\nconst DEEP_ORANGE_A100 = '#ff9e80';\n\nclass WarningMessage extends BaseMessage {\n\tcreateMessageElementInternal() {\n\t\treturn new WarningMessageElement();\n\t}\n\tdrawCellMessageInternal(message, context, style, helper, info) {\n\t\tconst { bgColor } = style;\n\n\t\tconst { selected } = context.getSelectState();\n\n\t\tconst rect = context.getRect();\n\n\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\tif (!selected) {\n\t\t\t\t// draw box\n\t\t\t\tctx.fillStyle = DEEP_ORANGE_A100;\n\t\t\t\tconst boxRect = rect.copy();\n\t\t\t\tboxRect.left = boxRect.right - 24;\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\n\n\t\t\t\t// draw exclamation mark\n\t\t\t\tconst fillColor = bgColor;\n\t\t\t\tconst height = 20;\n\t\t\t\tconst width = height / 5;\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3), context, { fillColor });\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5), context, { fillColor });\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = WarningMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/ErrorMessageElement.css\":\n/*!**********************************************************!*\\\n  !*** ./columns/message/internal/ErrorMessageElement.css ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./ErrorMessageElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/ErrorMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/message/internal/ErrorMessageElement.js\":\n/*!*********************************************************!*\\\n  !*** ./columns/message/internal/ErrorMessageElement.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst MessageElement = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = 'cheetah-grid__error-message-element';\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\n\nclass ErrorMessageElement extends MessageElement {\n\tconstructor() {\n\t\tsuper();\n\t\t__webpack_require__(/*! ./ErrorMessageElement.css */ \"./columns/message/internal/ErrorMessageElement.css\");\n\t\tthis._rootElement.classList.add(CLASSNAME);\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\n\t}\n}\n\nmodule.exports = ErrorMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/MessageElement.css\":\n/*!*****************************************************!*\\\n  !*** ./columns/message/internal/MessageElement.css ***!\n  \\*****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./MessageElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/MessageElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/message/internal/MessageElement.js\":\n/*!****************************************************!*\\\n  !*** ./columns/message/internal/MessageElement.js ***!\n  \\****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement\n} = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = 'cheetah-grid__message-element';\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\n\nfunction createrootElement() {\n\t__webpack_require__(/*! ./MessageElement.css */ \"./columns/message/internal/MessageElement.css\");\n\tconst element = createElement('div', { classList: [CLASSNAME, HIDDEN_CLASSNAME] });\n\tconst message = createElement('span', { classList: [MESSAGE_CLASSNAME] });\n\telement.appendChild(message);\n\treturn element;\n}\n\nclass MessageElement {\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tconst rootElement = this._rootElement = createrootElement();\n\t\tthis._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\n\t}\n\tdispose() {\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._rootElement = null;\n\t\tthis._messageElement = null;\n\t}\n\tattach(grid, col, row, message) {\n\t\tconst rootElement = this._rootElement;\n\t\tconst messageElement = this._messageElement;\n\n\t\trootElement.classList.remove(SHOWN_CLASSNAME);\n\t\trootElement.classList.add(HIDDEN_CLASSNAME);\n\n\t\tif (this._attachCell(grid, col, row)) {\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\n\n\t\t\tmessageElement.textContent = message;\n\t\t} else {\n\t\t\tthis._detach();\n\t\t}\n\t}\n\tmove(grid, col, row) {\n\t\tconst rootElement = this._rootElement;\n\t\tif (this._attachCell(grid, col, row)) {\n\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\n\t\t} else {\n\t\t\tthis._detach();\n\t\t}\n\t}\n\tdetach() {\n\t\tthis._detach();\n\t}\n\t_detach() {\n\t\tconst rootElement = this._rootElement;\n\t\tif (rootElement.parentElement) {\n\t\t\trootElement.parentElement.removeChild(rootElement);\n\t\t\trootElement.classList.remove(SHOWN_CLASSNAME);\n\t\t\trootElement.classList.add(HIDDEN_CLASSNAME);\n\t\t}\n\t}\n\t_attachCell(grid, col, row) {\n\t\tconst rootElement = this._rootElement;\n\t\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\n\t\tconst { bottom: top, left, width } = rect;\n\t\tconst { frozenRowCount, frozenColCount } = grid;\n\t\tif (row >= frozenRowCount && frozenRowCount > 0) {\n\t\t\tconst { rect: frozenRect } = grid.getAttachCellArea(col, frozenRowCount - 1);\n\t\t\tif (top < frozenRect.bottom) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tif (top < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (col >= frozenColCount && frozenColCount > 0) {\n\t\t\tconst { rect: frozenRect } = grid.getAttachCellArea(frozenColCount - 1, row);\n\t\t\tif (left < frozenRect.right) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tif (left < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tconst { offsetHeight, offsetWidth } = element;\n\t\tif (offsetHeight < top) {\n\t\t\treturn false;\n\t\t}\n\t\tif (offsetWidth < left) {\n\t\t\treturn false;\n\t\t}\n\n\t\trootElement.style.top = top.toFixed() + 'px';\n\t\trootElement.style.left = left.toFixed() + 'px';\n\t\trootElement.style.width = width.toFixed() + 'px';\n\t\tif (rootElement.parentElement !== element) {\n\t\t\telement.appendChild(rootElement);\n\t\t}\n\t\treturn true;\n\t}\n}\n\nmodule.exports = MessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/WarningMessageElement.css\":\n/*!************************************************************!*\\\n  !*** ./columns/message/internal/WarningMessageElement.css ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./WarningMessageElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/WarningMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/message/internal/WarningMessageElement.js\":\n/*!***********************************************************!*\\\n  !*** ./columns/message/internal/WarningMessageElement.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst MessageElement = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = 'cheetah-grid__warning-message-element';\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\n\nclass WarningMessageElement extends MessageElement {\n\tconstructor() {\n\t\tsuper();\n\t\t__webpack_require__(/*! ./WarningMessageElement.css */ \"./columns/message/internal/WarningMessageElement.css\");\n\t\tthis._rootElement.classList.add(CLASSNAME);\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\n\t}\n}\n\nmodule.exports = WarningMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/style.js\":\n/*!**************************!*\\\n  !*** ./columns/style.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./style/BaseStyle */ \"./columns/style/BaseStyle.js\");\n\tconst Style = __webpack_require__(/*! ./style/Style */ \"./columns/style/Style.js\");\n\tconst NumberStyle = __webpack_require__(/*! ./style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\tconst CheckStyle = __webpack_require__(/*! ./style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\tconst ButtonStyle = __webpack_require__(/*! ./style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\tconst ImageStyle = __webpack_require__(/*! ./style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\tconst IconStyle = __webpack_require__(/*! ./style/IconStyle */ \"./columns/style/IconStyle.js\");\n\tconst PercentCompleteBarStyle = __webpack_require__(/*! ./style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\n\t/**\r\n  * column styles\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns.style\r\n  * @memberof cheetahGrid.columns\r\n  */\n\tconst style = {\n\t\tget EVENT_TYPE() {\n\t\t\treturn BaseStyle.EVENT_TYPE;\n\t\t},\n\t\tget BaseStyle() {\n\t\t\treturn BaseStyle;\n\t\t},\n\t\tget Style() {\n\t\t\treturn Style;\n\t\t},\n\t\tget NumberStyle() {\n\t\t\treturn NumberStyle;\n\t\t},\n\t\tget CheckStyle() {\n\t\t\treturn CheckStyle;\n\t\t},\n\t\tget ButtonStyle() {\n\t\t\treturn ButtonStyle;\n\t\t},\n\t\tget ImageStyle() {\n\t\t\treturn ImageStyle;\n\t\t},\n\t\tget IconStyle() {\n\t\t\treturn IconStyle;\n\t\t},\n\t\tget PercentCompleteBarStyle() {\n\t\t\treturn PercentCompleteBarStyle;\n\t\t},\n\t\tof(columnStyle, record, StyleClass) {\n\t\t\tif (columnStyle) {\n\t\t\t\tif (columnStyle instanceof Style) {\n\t\t\t\t\treturn columnStyle;\n\t\t\t\t} else if (typeof columnStyle === 'function') {\n\t\t\t\t\treturn style.of(columnStyle(record), record, StyleClass);\n\t\t\t\t} else if (record && columnStyle in record) {\n\t\t\t\t\treturn style.of(record[columnStyle], record, StyleClass);\n\t\t\t\t}\n\t\t\t\treturn new StyleClass(columnStyle);\n\t\t\t} else {\n\t\t\t\treturn StyleClass.DEFAULT;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = style;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/BaseStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/BaseStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst EventTarget = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\n\tconst EVENT_TYPE = {\n\t\tCHANGE_STYLE: 'change_style'\n\t};\n\n\tlet defaultStyle;\n\tclass BaseStyle extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n\t\t}\n\t\tconstructor({\n\t\t\tbgColor\n\t\t} = {}) {\n\t\t\tsuper();\n\t\t\tthis._bgColor = bgColor;\n\t\t}\n\t\tget bgColor() {\n\t\t\treturn this._bgColor;\n\t\t}\n\t\tset bgColor(bgColor) {\n\t\t\tthis._bgColor = bgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tdoChangeStyle() {\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseStyle(this);\n\t\t}\n\t}\n\tmodule.exports = BaseStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/BranchGraphStyle.js\":\n/*!*******************************************!*\\\n  !*** ./columns/style/BranchGraphStyle.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst BaseStyle = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\nlet defaultStyle;\nfunction adj(style) {\n\tconst { textAlign = 'center' } = style;\n\tstyle.textAlign = textAlign;\n\treturn style;\n}\nconst DEFAULT_BRANCH_COLORS = (name, index) => {\n\tswitch (index % 3) {\n\t\tcase 0:\n\t\t\treturn '#979797';\n\t\tcase 1:\n\t\t\treturn '#008fb5';\n\t\tcase 2:\n\t\t\treturn '#f1c109';\n\t\tdefault:\n\t}\n\treturn '#979797';\n};\nclass BranchGraphStyle extends BaseStyle {\n\tstatic get DEFAULT() {\n\t\treturn defaultStyle ? defaultStyle : defaultStyle = new BranchGraphStyle();\n\t}\n\tconstructor(style = {}) {\n\t\tsuper(adj(style));\n\t\tthis._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\n\t\tthis._margin = style.margin || 4;\n\t\tthis._circleSize = style.circleSize || 16;\n\t\tthis._branchLineWidth = style.branchLineWidth || 4;\n\t\tthis._mergeStyle = style.mergeStyle === 'straight' ? 'straight' : 'bezier';\n\t}\n\tget branchColors() {\n\t\treturn this._branchColors;\n\t}\n\tset branchColors(branchColors) {\n\t\tthis._branchColors = branchColors;\n\t\tthis.doChangeStyle();\n\t}\n\tget margin() {\n\t\treturn this._margin;\n\t}\n\tset margin(margin) {\n\t\tthis._margin = margin;\n\t\tthis.doChangeStyle();\n\t}\n\tget circleSize() {\n\t\treturn this._circleSize;\n\t}\n\tset circleSize(circleSize) {\n\t\tthis._circleSize = circleSize;\n\t\tthis.doChangeStyle();\n\t}\n\tget branchLineWidth() {\n\t\treturn this._branchLineWidth;\n\t}\n\tset branchLineWidth(branchLineWidth) {\n\t\tthis._branchLineWidth = branchLineWidth;\n\t\tthis.doChangeStyle();\n\t}\n\tget mergeStyle() {\n\t\treturn this._mergeStyle;\n\t}\n\tset mergeStyle(mergeStyle) {\n\t\tthis._mergeStyle = mergeStyle;\n\t\tthis.doChangeStyle();\n\t}\n\tclone() {\n\t\treturn new BranchGraphStyle(this);\n\t}\n}\nmodule.exports = BranchGraphStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/ButtonStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/ButtonStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass ButtonStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new ButtonStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tconst {\n\t\t\t\tbuttonBgColor\n\t\t\t} = style;\n\t\t\tthis._buttonBgColor = buttonBgColor;\n\t\t}\n\t\tget buttonBgColor() {\n\t\t\treturn this._buttonBgColor;\n\t\t}\n\t\tset buttonBgColor(buttonBgColor) {\n\t\t\tthis._buttonBgColor = buttonBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new ButtonStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = ButtonStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/CheckStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/CheckStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst StdBaseStyle = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass CheckStyle extends StdBaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new CheckStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tconst {\n\t\t\t\tuncheckBgColor,\n\t\t\t\tcheckBgColor,\n\t\t\t\tborderColor\n\t\t\t} = style;\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\n\t\t\tthis._checkBgColor = checkBgColor;\n\t\t\tthis._borderColor = borderColor;\n\t\t}\n\t\tget uncheckBgColor() {\n\t\t\treturn this._uncheckBgColor;\n\t\t}\n\t\tset uncheckBgColor(uncheckBgColor) {\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget checkBgColor() {\n\t\t\treturn this._checkBgColor;\n\t\t}\n\t\tset checkBgColor(checkBgColor) {\n\t\t\tthis._checkBgColor = checkBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget borderColor() {\n\t\t\treturn this._borderColor;\n\t\t}\n\t\tset borderColor(borderColor) {\n\t\t\tthis._borderColor = borderColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new CheckStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = CheckStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/IconStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/IconStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass IconStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new IconStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t}\n\t\tclone() {\n\t\t\treturn new IconStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = IconStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/ImageStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/ImageStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst StdBaseStyle = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\tlet defaultStyle;\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tclass ImageStyle extends StdBaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new ImageStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tthis._imageSizing = style.imageSizing;\n\t\t\tthis._margin = style.margin || 4;\n\t\t}\n\t\tget imageSizing() {\n\t\t\treturn this._imageSizing;\n\t\t}\n\t\tset imageSizing(imageSizing) {\n\t\t\tthis._imageSizing = imageSizing;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget margin() {\n\t\t\treturn this._margin;\n\t\t}\n\t\tset margin(margin) {\n\t\t\tthis._margin = margin;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new ImageStyle(this);\n\t\t}\n\t}\n\tmodule.exports = ImageStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/NumberStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/NumberStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'right' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass NumberStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new NumberStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t}\n\t\tclone() {\n\t\t\treturn new NumberStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = NumberStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/PercentCompleteBarStyle.js\":\n/*!**************************************************!*\\\n  !*** ./columns/style/PercentCompleteBarStyle.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\tlet defaultStyle;\n\tconst DEFAULT_BAR_COLOR = num => {\n\t\tif (num > 80) {\n\t\t\treturn '#20a8d8';\n\t\t}\n\t\tif (num > 50) {\n\t\t\treturn '#4dbd74';\n\t\t}\n\t\tif (num > 20) {\n\t\t\treturn '#ffc107';\n\t\t}\n\t\treturn '#f86c6b';\n\t};\n\tclass PercentCompleteBarStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new PercentCompleteBarStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._barColor = style.barColor || DEFAULT_BAR_COLOR;\n\t\t\tthis._barBgColor = style.barBgColor || '#f0f3f5';\n\t\t\tthis._barHeight = style.barHeight || 3;\n\t\t}\n\t\tget barColor() {\n\t\t\treturn this._barColor;\n\t\t}\n\t\tset barColor(barColor) {\n\t\t\tthis._barColor = barColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget barBgColor() {\n\t\t\treturn this._barBgColor;\n\t\t}\n\t\tset barBgColor(barBgColor) {\n\t\t\tthis._barBgColor = barBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget barHeight() {\n\t\t\treturn this._barHeight;\n\t\t}\n\t\tset barHeight(barHeight) {\n\t\t\tthis._barHeight = barHeight;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new PercentCompleteBarStyle(this);\n\t\t}\n\t}\n\tmodule.exports = PercentCompleteBarStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/StdBaseStyle.js\":\n/*!***************************************!*\\\n  !*** ./columns/style/StdBaseStyle.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\n\n\tlet defaultStyle;\n\tclass StdBaseStyle extends BaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._textAlign = style.textAlign || 'left';\n\t\t\tthis._textBaseline = style.textBaseline || 'middle';\n\t\t}\n\t\tget textAlign() {\n\t\t\treturn this._textAlign;\n\t\t}\n\t\tset textAlign(textAlign) {\n\t\t\tthis._textAlign = textAlign;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget textBaseline() {\n\t\t\treturn this._textBaseline;\n\t\t}\n\t\tset textBaseline(textBaseline) {\n\t\t\tthis._textBaseline = textBaseline;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new StdBaseStyle(this);\n\t\t}\n\t}\n\tmodule.exports = StdBaseStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/Style.js\":\n/*!********************************!*\\\n  !*** ./columns/style/Style.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst StdBaseStyle = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\tlet defaultStyle;\n\tclass Style extends StdBaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new Style();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._color = style.color;\n\t\t\tthis._font = style.font;\n\t\t\tthis._padding = style.padding;\n\t\t}\n\t\tget color() {\n\t\t\treturn this._color;\n\t\t}\n\t\tset color(color) {\n\t\t\tthis._color = color;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget font() {\n\t\t\treturn this._font;\n\t\t}\n\t\tset font(font) {\n\t\t\tthis._font = font;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget padding() {\n\t\t\treturn this._padding;\n\t\t}\n\t\tset padding(padding) {\n\t\t\tthis._padding = padding;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new Style(this);\n\t\t}\n\t}\n\tmodule.exports = Style;\n}\n\n/***/ }),\n\n/***/ \"./columns/type.js\":\n/*!*************************!*\\\n  !*** ./columns/type.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Column = __webpack_require__(/*! ./type/Column */ \"./columns/type/Column.js\");\n\tconst NumberColumn = __webpack_require__(/*! ./type/NumberColumn */ \"./columns/type/NumberColumn.js\");\n\tconst CheckColumn = __webpack_require__(/*! ./type/CheckColumn */ \"./columns/type/CheckColumn.js\");\n\tconst ButtonColumn = __webpack_require__(/*! ./type/ButtonColumn */ \"./columns/type/ButtonColumn.js\");\n\tconst ImageColumn = __webpack_require__(/*! ./type/ImageColumn */ \"./columns/type/ImageColumn.js\");\n\tconst PercentCompleteBarColumn = __webpack_require__(/*! ./type/PercentCompleteBarColumn */ \"./columns/type/PercentCompleteBarColumn.js\");\n\tconst IconColumn = __webpack_require__(/*! ./type/IconColumn */ \"./columns/type/IconColumn.js\");\n\tconst BranchGraphColumn = __webpack_require__(/*! ./type/BranchGraphColumn */ \"./columns/type/BranchGraphColumn.js\");\n\tconst MenuColumn = __webpack_require__(/*! ./type/MenuColumn */ \"./columns/type/MenuColumn.js\");\n\n\t/**\r\n  * column types\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns.type\r\n  * @memberof cheetahGrid.columns\r\n  */\n\tconst type = {\n\t\tTYPES: {\n\t\t\tDEFAULT: new Column(),\n\t\t\tNUMBER: new NumberColumn(),\n\t\t\tCHECK: new CheckColumn(),\n\t\t\tBUTTON: new ButtonColumn(),\n\t\t\tIMAGE: new ImageColumn()\n\t\t},\n\t\tget Column() {\n\t\t\treturn Column;\n\t\t},\n\t\tget NumberColumn() {\n\t\t\treturn NumberColumn;\n\t\t},\n\t\tget CheckColumn() {\n\t\t\treturn CheckColumn;\n\t\t},\n\t\tget ButtonColumn() {\n\t\t\treturn ButtonColumn;\n\t\t},\n\t\tget ImageColumn() {\n\t\t\treturn ImageColumn;\n\t\t},\n\t\tget PercentCompleteBarColumn() {\n\t\t\treturn PercentCompleteBarColumn;\n\t\t},\n\t\tget IconColumn() {\n\t\t\treturn IconColumn;\n\t\t},\n\t\tget BranchGraphColumn() {\n\t\t\treturn BranchGraphColumn;\n\t\t},\n\t\tget MenuColumn() {\n\t\t\treturn MenuColumn;\n\t\t},\n\t\tof(columnType) {\n\t\t\tif (!columnType) {\n\t\t\t\treturn type.TYPES.DEFAULT;\n\t\t\t} else if (typeof columnType === 'string') {\n\t\t\t\treturn type.TYPES[columnType.toUpperCase()] || type.of(null);\n\t\t\t} else {\n\t\t\t\treturn columnType;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = type;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/BaseColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/BaseColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./columns/style.js\");\n\tconst { isPromise, isDef, obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst animate = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\tconst BaseStyle = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\tconst { COLUMN_FADEIN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tfunction isFadeinWhenCallbackInPromise(column, grid) {\n\t\tif (isDef(column._fadeinWhenCallbackInPromise)) {\n\t\t\treturn column._fadeinWhenCallbackInPromise;\n\t\t}\n\t\treturn !!grid.configure('fadeinWhenCallbackInPromise');\n\t}\n\n\tfunction getFadinState(grid) {\n\t\tif (!grid[COLUMN_FADEIN_STATE_ID]) {\n\t\t\tsetReadonly(grid, COLUMN_FADEIN_STATE_ID, {});\n\t\t}\n\t\treturn grid[COLUMN_FADEIN_STATE_ID];\n\t}\n\tfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\n\t\treturn point => {\n\t\t\tconst state = getFadinState(grid);\n\t\t\tconst stateKey = col + ':' + row;\n\t\t\tif (point === 1) {\n\t\t\t\tdelete state[stateKey];\n\t\t\t} else {\n\t\t\t\tstate[stateKey] = {\n\t\t\t\t\topacity: point\n\t\t\t\t};\n\t\t\t}\n\t\t\tdrawCellBase();\n\n\t\t\tdrawInternal();\n\n\t\t\tconst cellState = state[stateKey];\n\t\t\tif (cellState) {\n\t\t\t\t//\n\t\t\t\tconst ctx = context.getContext();\n\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\n\t\t\t\ttry {\n\t\t\t\t\tdrawCellBase();\n\t\t\t\t} finally {\n\t\t\t\t\tctx.globalAlpha = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\tconst fadinMgr = {\n\t\tanimate(grid, col, row, context, drawInternal, drawCellBase) {\n\t\t\t// fadein animation\n\t\t\tconst state = getFadinState(grid);\n\n\t\t\tconst activeFadeins = [_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)];\n\t\t\tstate.activeFadeins = activeFadeins;\n\n\t\t\tanimate(500, point => {\n\t\t\t\tactiveFadeins.forEach(f => f(point));\n\t\t\t\tif (point === 1) {\n\t\t\t\t\tdelete state.activeFadeins;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmargeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\n\t\t\tconst state = getFadinState(grid);\n\t\t\tif (state.activeFadeins) {\n\t\t\t\tstate.activeFadeins.push(_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase));\n\t\t\t} else {\n\t\t\t\tdrawInternal();\n\t\t\t}\n\t\t}\n\n\t};\n\n\tclass BaseColumn {\n\t\tconstructor(option = {}) {\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this); //\n\n\t\t\t//Promisecallback\n\t\t\tthis._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn BaseStyle;\n\t\t}\n\t\tonDrawCell(cellValue, info, context, grid) {\n\t\t\tconst { style, getRecord, drawCellBase } = info;\n\t\t\tdelete info.getRecord;\n\t\t\tdelete info.style;\n\t\t\tconst helper = grid.getGridCanvasHelper();\n\t\t\tdrawCellBase();\n\n\t\t\t//\n\t\t\tif (isPromise(cellValue)) {\n\t\t\t\tif (context.drawing) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst start = Date.now();\n\t\t\t\treturn cellValue.then(val => {\n\t\t\t\t\tconst currentContext = context.toCurrentContext();\n\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\n\t\t\t\t\tif (!drawRect) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst time = Date.now() - start;\n\n\t\t\t\t\tconst drawInternal = () => {\n\t\t\t\t\t\tconst currentContext = context.toCurrentContext();\n\t\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\n\t\t\t\t\t\tif (!drawRect) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\n\t\t\t\t\t\tthis.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\n\t\t\t\t\t\tthis.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!isFadeinWhenCallbackInPromise(this, grid)) {\n\t\t\t\t\t\tdrawInternal(); //\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst { col, row } = context;\n\t\t\t\t\t\tif (time < 80) {\n\t\t\t\t\t\t\t//80msPromiseCallback\n\t\t\t\t\t\t\tfadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tfadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\n\t\t\t\tthis.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\n\t\t\t\tthis.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\n\t\t\t\t//\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tconst stateKey = col + ':' + row;\n\t\t\t\tconst cellState = grid[COLUMN_FADEIN_STATE_ID] && grid[COLUMN_FADEIN_STATE_ID][stateKey];\n\t\t\t\tif (cellState) {\n\t\t\t\t\tconst ctx = context.getContext();\n\t\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdrawCellBase();\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tctx.globalAlpha = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseColumn(this);\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn isDef(value) ? value : '';\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {}\n\t\tdrawMessageInternal(message, context, style, helper, grid, info) {\n\t\t\tinfo.messageHandler.drawCellMessage(message, context, style, helper, info);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = BaseColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/BranchGraphColumn.js\":\n/*!*******************************************!*\\\n  !*** ./columns/type/BranchGraphColumn.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { isDef, getOrApply, isPromise, obj: { isObject } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst BranchGraphStyle = __webpack_require__(/*! ../style/BranchGraphStyle */ \"./columns/style/BranchGraphStyle.js\");\nconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\nconst { BRANCH_GRAPH_COLUMN_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nfunction getAllColumnData(grid, col, callback) {\n\tconst dataSource = grid.dataSource;\n\tlet field = grid.getField(col);\n\tif (isObject(field) && field.get && field.set) {\n\t\tfield = field.get;\n\t}\n\tconst allData = [];\n\tlet promise;\n\tfor (let index = 0; index < dataSource.length; index++) {\n\t\tconst data = dataSource.getField(index, field);\n\t\tif (isPromise(data)) {\n\t\t\tconst dataIndex = allData.length;\n\t\t\tallData.push(data);\n\t\t\tif (!promise) {\n\t\t\t\tpromise = data.then(d => {\n\t\t\t\t\tallData[dataIndex] = d;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tpromise = promise.then(() => data).then(d => {\n\t\t\t\t\tallData[dataIndex] = d;\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tallData.push(data);\n\t\t}\n\t}\n\n\tif (promise) {\n\t\tpromise.then(() => callback(allData));\n\t} else {\n\t\tcallback(allData);\n\t}\n}\n\nclass BranchLine {\n\tconstructor({ fromIndex, toIndex, colorIndex, point }) {\n\t\tthis.fromIndex = fromIndex;\n\t\tthis.toIndex = toIndex;\n\t\tthis.colorIndex = colorIndex;\n\t\tthis.point = point;\n\t}\n}\nclass BranchPoint {\n\tconstructor({ index, commit = false, lines = [], tag }) {\n\t\tthis.index = index;\n\t\tthis.commit = commit;\n\t\tthis.lines = lines;\n\t\tthis.tag = tag;\n\t}\n\tstatic mergeLines(lines) {\n\t\tconst result = lines.filter(l => isDef(l.fromIndex) && isDef(l.toIndex));\n\n\t\tconst froms = lines.filter(l => isDef(l.fromIndex) && !isDef(l.toIndex));\n\t\tconst tos = lines.filter(l => !isDef(l.fromIndex) && isDef(l.toIndex));\n\n\t\tfroms.forEach(f => {\n\t\t\tfor (let i = 0; i < tos.length; i++) {\n\t\t\t\tconst t = tos[i];\n\t\t\t\tif (t.point) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (f.colorIndex === t.colorIndex) {\n\t\t\t\t\tf.toIndex = t.toIndex;\n\t\t\t\t\ttos.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(f);\n\t\t});\n\n\t\treturn result.concat(tos);\n\t}\n\tstatic merge(a, b) {\n\t\tif (!a) {\n\t\t\treturn b;\n\t\t}\n\t\treturn new BranchPoint({\n\t\t\tindex: a.index,\n\t\t\tcommit: a.commit || b.commit,\n\t\t\tlines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\n\t\t\ttag: a.tag || b.tag\n\t\t});\n\t}\n}\n\nfunction joinLine(timeline, branchIndex) {\n\tconst reverse = [...timeline].reverse();\n\tfor (let i = 0; i < reverse.length; i++) {\n\t\tconst f = reverse[i][branchIndex];\n\t\tif (f) {\n\t\t\tf.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\n\t\t\t\ttoIndex: branchIndex,\n\t\t\t\tcolorIndex: branchIndex\n\t\t\t})]));\n\n\t\t\tfor (let j = 0; j < i; j++) {\n\t\t\t\tconst tl = reverse[j];\n\t\t\t\ttl[branchIndex] = new BranchPoint({\n\t\t\t\t\tindex: branchIndex,\n\t\t\t\t\tlines: [new BranchLine({\n\t\t\t\t\t\tfromIndex: branchIndex,\n\t\t\t\t\t\ttoIndex: branchIndex,\n\t\t\t\t\t\tcolorIndex: branchIndex\n\t\t\t\t\t})]\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction branch({ timeline, branches }, from, to) {\n\tconst fromIndex = branches.indexOf(from);\n\tlet toIndex = branches.indexOf(to);\n\tif (toIndex < 0) {\n\t\ttoIndex = branches.length;\n\t\tbranches.push(to);\n\t}\n\n\tfunction findBranchRootIndex() {\n\t\tfor (let index = timeline.length - 1; index >= 0; index--) {\n\t\t\tconst tl = timeline[index];\n\t\t\tconst from = tl[fromIndex];\n\t\t\tif (from && from.commit) {\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tif (fromIndex < 0) {\n\t\treturn new BranchPoint({\n\t\t\tindex: toIndex\n\t\t});\n\t} else {\n\t\tconst fromTargetIndex = findBranchRootIndex();\n\t\tif (fromTargetIndex === -1) {\n\t\t\treturn null;\n\t\t}\n\t\tconst branchTargetFromIndex = fromTargetIndex + 1;\n\t\tconst branchPoint = new BranchPoint({\n\t\t\tindex: toIndex,\n\t\t\tlines: [new BranchLine({\n\t\t\t\tfromIndex,\n\t\t\t\tcolorIndex: toIndex\n\t\t\t})]\n\t\t});\n\t\tlet point;\n\t\tlet result;\n\t\tif (branchTargetFromIndex < timeline.length) {\n\t\t\tconst targetLine = timeline[branchTargetFromIndex];\n\t\t\tpoint = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\n\t\t} else {\n\t\t\tpoint = branchPoint;\n\t\t\tresult = branchPoint;\n\t\t}\n\t\tconst from = timeline[fromTargetIndex][fromIndex];\n\t\tfrom.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\n\t\t\ttoIndex,\n\t\t\tcolorIndex: toIndex,\n\t\t\tpoint\n\t\t})]));\n\t\treturn result;\n\t}\n}\n\nfunction commit({ timeline, branches }, name) {\n\tconst index = branches.indexOf(name);\n\tif (index < 0) {\n\t\treturn null;\n\t}\n\tconst result = new BranchPoint({\n\t\tindex,\n\t\tcommit: true\n\t});\n\n\tif (joinLine(timeline, index)) {\n\t\tresult.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\n\t\t\tfromIndex: index,\n\t\t\tcolorIndex: index\n\t\t})]));\n\t}\n\treturn result;\n}\n\nfunction commitTag({ timeline, branches }, name, tag) {\n\tlet index = branches.indexOf(name);\n\tif (index < 0) {\n\t\tindex = branches.length;\n\t\tbranches.push(name);\n\t}\n\treturn new BranchPoint({\n\t\tindex,\n\t\ttag\n\t});\n}\n\nfunction commitMerge({ timeline, branches }, from, to) {\n\tconst fromIndex = branches.indexOf(from);\n\tconst toIndex = branches.indexOf(to);\n\tif (toIndex < 0 || fromIndex < 0) {\n\t\treturn new BranchPoint({\n\t\t\tindex: toIndex,\n\t\t\tcommit: true\n\t\t});\n\t}\n\tconst result = new BranchPoint({\n\t\tindex: toIndex,\n\t\tcommit: true,\n\t\tlines: [new BranchLine({\n\t\t\tfromIndex,\n\t\t\tcolorIndex: fromIndex\n\t\t}), new BranchLine({\n\t\t\tfromIndex: toIndex,\n\t\t\tcolorIndex: toIndex\n\t\t})]\n\t});\n\tconst froms = [...timeline];\n\tconst fromTargetLine = froms.pop();\n\tif (fromTargetLine) {\n\t\tfromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\n\t\t\tindex: toIndex,\n\t\t\tlines: [new BranchLine({\n\t\t\t\ttoIndex,\n\t\t\t\tcolorIndex: fromIndex\n\t\t\t})]\n\t\t}));\n\t}\n\n\tjoinLine(froms, fromIndex);\n\n\tjoinLine(timeline, toIndex);\n\n\treturn result;\n}\n\nfunction calcCommand(info, command) {\n\tconst { timeline } = info;\n\tconst timelineData = [];\n\t// const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\n\tconst commands = __webpack_provided_Array_dot_isArray(command) ? command : [command];\n\tcommands.forEach(cmd => {\n\t\tif (!cmd) {\n\t\t\treturn;\n\t\t}\n\t\tlet point;\n\t\tif (cmd.command === 'branch') {\n\t\t\tconst from = isObject(cmd.branch) ? cmd.branch.from : null;\n\t\t\tconst to = isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\n\t\t\tpoint = branch(info, from, to);\n\t\t} else if (cmd.command === 'commit') {\n\t\t\tconst { branch } = cmd;\n\t\t\tpoint = commit(info, branch);\n\t\t} else if (cmd.command === 'merge') {\n\t\t\tconst { from, to } = cmd.branch;\n\t\t\tpoint = commitMerge(info, from, to);\n\t\t} else if (cmd.command === 'tag') {\n\t\t\tconst { branch, tag } = cmd;\n\t\t\tpoint = commitTag(info, branch, tag);\n\t\t}\n\t\tif (point && point.index > -1) {\n\t\t\ttimelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\n\t\t}\n\t});\n\ttimeline.push(timelineData);\n}\n\nfunction calcBranchesInfo(start, grid, col) {\n\tconst result = {\n\t\tbranches: [],\n\t\ttimeline: []\n\t};\n\tgetAllColumnData(grid, col, data => {\n\t\tif (start !== 'top') {\n\t\t\tdata = [...data].reverse();\n\t\t}\n\t\tdata.forEach(command => {\n\t\t\tcalcCommand(result, command);\n\t\t});\n\t});\n\treturn result;\n}\n\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\n\tlet w = Math.max(width / branches.length + 1, 5);\n\ttimeline.forEach(tl => {\n\t\ttl.forEach((p, index) => {\n\t\t\tif (index <= 0) {\n\t\t\t\t// \n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (p.tag) {\n\t\t\t\tconst textWidth = ctx.measureText(p.tag).width;\n\t\t\t\tif (w * index + radius * 2 + 4 + textWidth > width) {\n\t\t\t\t\tw = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\tconst result = [];\n\tlet x = left;\n\tbranches.forEach(() => {\n\t\tresult.push(Math.ceil(x + radius));\n\t\tx += w;\n\t});\n\treturn result;\n}\n\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\n\tbranchXPoints, margin, branchColors, branchLineWidth, mergeStyle\n}, {\n\twidth, col, row, branches\n}) {\n\tif (isDef(upLineIndex) || isDef(downLineIndex)) {\n\t\tctx.strokeStyle = getOrApply(branchColors, branches[colorIndex], colorIndex);\n\t\tctx.lineWidth = branchLineWidth;\n\t\tctx.lineCap = 'round';\n\t\tctx.beginPath();\n\n\t\tif (isDef(upLineIndex)) {\n\t\t\tconst upX = branchXPoints[upLineIndex];\n\t\t\tconst upRect = grid.getCellRelativeRect(col, row - 1);\n\t\t\tconst upY = upRect.top + upRect.height / 2;\n\t\t\tctx.moveTo(upX, upY);\n\t\t\tif (mergeStyle === 'bezier') {\n\t\t\t\tctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(x, y);\n\t\t\t}\n\t\t} else {\n\t\t\tctx.moveTo(x, y);\n\t\t}\n\n\t\tif (isDef(downLineIndex)) {\n\t\t\tconst downX = branchXPoints[downLineIndex];\n\t\t\tconst downRect = grid.getCellRelativeRect(col, row + 1);\n\t\t\tconst downY = downRect.top + downRect.height / 2;\n\t\t\tif (mergeStyle === 'bezier') {\n\t\t\t\tctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(downX, downY);\n\t\t\t}\n\t\t}\n\n\t\tctx.stroke();\n\t}\n}\n\n/**\r\n * BranchGraphColumn<br>\r\n * <br>\r\n * # Data command<br>\r\n * ## mastar branch or orphan branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * </code></pre>\r\n * ## commit<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * </code></pre>\r\n * ## branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## merge<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## tag<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * </code></pre>\r\n *\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\nclass BranchGraphColumn extends BaseColumn {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._start = option.start || 'bottom';\n\t\tthis._cache = isDef(option.cache) ? option.cache : false;\n\t}\n\tget StyleClass() {\n\t\treturn BranchGraphStyle;\n\t}\n\tclearCache(grid) {\n\t\tdelete grid[_];\n\t}\n\tonDrawCell(cellValue, info, context, grid) {\n\t\tif (this._cache) {\n\t\t\tconst state = grid[_] || (grid[_] = {});\n\t\t\tconst { col } = context;\n\t\t\tif (!state[col]) {\n\t\t\t\tstate[col] = calcBranchesInfo(this._start, grid, col);\n\t\t\t}\n\t\t}\n\t\treturn super.onDrawCell(cellValue, info, context, grid);\n\t}\n\tclone() {\n\t\treturn new BranchGraphColumn(this);\n\t}\n\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\tconst { col, row } = context;\n\t\tconst { timeline, branches } = this._cache && grid[_] ? grid[_][col] : calcBranchesInfo(this._start, grid, col);\n\n\t\tconst { upLineIndexKey, downLineIndexKey } = this._start !== 'top' ? { upLineIndexKey: 'toIndex', downLineIndexKey: 'fromIndex' } : { upLineIndexKey: 'fromIndex', downLineIndexKey: 'toIndex' };\n\t\tconst data = this._start !== 'top' ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\n\n\t\tconst {\n\t\t\tbranchColors,\n\t\t\tbranchLineWidth,\n\t\t\tcircleSize,\n\t\t\tmergeStyle,\n\t\t\tmargin,\n\t\t\tbgColor\n\t\t} = style;\n\t\tif (bgColor) {\n\t\t\tdrawCellBase({\n\t\t\t\tbgColor\n\t\t\t});\n\t\t}\n\n\t\tconst rect = context.getRect();\n\t\tconst radius = circleSize / 2;\n\t\tconst width = rect.width - margin * 2;\n\n\t\thelper.drawWithClip(context, ctx => {\n\t\t\tctx.textAlign = 'left';\n\t\t\tctx.textBaseline = 'middle';\n\t\t\tconst branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\n\n\t\t\tconst y = rect.top + rect.height / 2;\n\n\t\t\t// draw join lines\n\t\t\tdata.map((point, index) => point ? point.lines.map(line => ({\n\t\t\t\tcolorIndex: line.colorIndex,\n\t\t\t\tupLineIndex: line[upLineIndexKey],\n\t\t\t\tdownLineIndex: line[downLineIndexKey],\n\t\t\t\tpointIndex: index\n\t\t\t})) : []).reduce((p, c) => p.concat(c), []). // flatMap\n\t\t\t// order of overlap\n\t\t\tsort((a, b) => b.colorIndex - a.colorIndex).forEach(line => {\n\t\t\t\tconst x = branchXPoints[line.pointIndex];\n\t\t\t\trenderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\n\t\t\t\t\tmargin,\n\t\t\t\t\tbranchXPoints,\n\t\t\t\t\tbranchLineWidth,\n\t\t\t\t\tbranchColors,\n\t\t\t\t\tmergeStyle\n\t\t\t\t}, {\n\t\t\t\t\twidth, col, row, branches\n\t\t\t\t});\n\t\t\t});\n\t\t\t// draw commit points\n\t\t\tdata.forEach((p, index) => {\n\t\t\t\tif (p && p.commit) {\n\t\t\t\t\tconst x = branchXPoints[index];\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2, true);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tctx.closePath();\n\t\t\t\t}\n\t\t\t});\n\t\t\t// draw tags\n\t\t\tdata.forEach((p, index) => {\n\t\t\t\tif (p && p.tag) {\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\n\t\t\t\t\tctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\nmodule.exports = BranchGraphColumn;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/type/ButtonColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/ButtonColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\tconst ButtonStyle = __webpack_require__(/*! ../style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\tconst { BUTTON_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\n\tclass ButtonColumn extends Column {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._caption = option.caption;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn ButtonStyle;\n\t\t}\n\t\tget caption() {\n\t\t\treturn this._caption;\n\t\t}\n\t\twithCaption(caption) {\n\t\t\tconst c = this.clone();\n\t\t\tc._caption = caption;\n\t\t\treturn c;\n\t\t}\n\t\tclone() {\n\t\t\treturn new ButtonColumn(this);\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn this._caption || value;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding } = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\thelper.testFontLoad(font, value, context);\n\t\t\tconst { col, row } = context;\n\t\t\tlet active = false;\n\t\t\tconst state = grid[BUTTON_COLUMN_STATE_ID];\n\t\t\tif (state) {\n\t\t\t\tif (state.mouseActiveCell && state.mouseActiveCell.col === col && state.mouseActiveCell.row === row) {\n\t\t\t\t\tactive = true;\n\t\t\t\t} else if (context.getSelectState().selected) {\n\t\t\t\t\tactive = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\thelper.button(value, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tbgColor: buttonBgColor,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\tpadding,\n\t\t\t\t\tshadow: active ? {\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.48)',\n\t\t\t\t\t\tblur: 6,\n\t\t\t\t\t\toffsetY: 3\n\t\t\t\t\t} : true,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tmodule.exports = ButtonColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/CheckColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/CheckColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst CheckStyle = __webpack_require__(/*! ../style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\tconst { CHECK_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tfunction toBoolean(val) {\n\t\tif (typeof val === 'string') {\n\t\t\tif (val === 'false') {\n\t\t\t\treturn false;\n\t\t\t} else if (val === 'off') {\n\t\t\t\treturn false;\n\t\t\t} else if (val.match(/^0+$/)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn val;\n\t}\n\n\tclass CheckColumn extends BaseColumn {\n\t\tget StyleClass() {\n\t\t\treturn CheckStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new CheckColumn(this);\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn toBoolean(value);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tborderColor,\n\t\t\t\tcheckBgColor,\n\t\t\t\tuncheckBgColor,\n\t\t\t\tbgColor\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst { col, row } = context;\n\t\t\tconst key = col + ':' + row;\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID] && grid[CHECK_COLUMN_STATE_ID][key];\n\n\t\t\tconst opt = {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tborderColor,\n\t\t\t\tcheckBgColor,\n\t\t\t\tuncheckBgColor\n\t\t\t};\n\t\t\tif (state) {\n\t\t\t\topt.animElapsedTime = state.elapsed;\n\t\t\t}\n\t\t\thelper.checkbox(value, context, opt);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tmodule.exports = CheckColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/Column.js\":\n/*!********************************!*\\\n  !*** ./columns/type/Column.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\n\tclass Column extends BaseColumn {\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tclone() {\n\t\t\treturn new Column(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\tbgColor,\n\t\t\t\tpadding\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\thelper.testFontLoad(font, value, context);\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\thelper.text(value, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons,\n\t\t\t\t\tpadding\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\tmodule.exports = Column;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/IconColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/IconColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst IconStyle = __webpack_require__(/*! ../style/IconStyle */ \"./columns/style/IconStyle.js\");\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\tconst icons = __webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\");\n\n\tfunction repeatArray(val, count) {\n\t\tif (count === Infinity) {\n\t\t\tcount = 0;\n\t\t}\n\t\tconst a = [];\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\ta.push(val);\n\t\t}\n\t\treturn a;\n\t}\n\n\tclass IconColumn extends Column {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._tagName = option.tagName || 'i';\n\t\t\tthis._className = option.className;\n\t\t\tthis._content = option.content;\n\t\t\tthis._name = option.name;\n\t\t\tthis._iconWidth = option.iconWidth;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn IconStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new IconColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {\n\t\t\tconst num = value - 0;\n\t\t\tif (!isNaN(num)) {\n\t\t\t\tconst icon = {};\n\t\t\t\ticons.iconPropKeys.forEach(k => {\n\t\t\t\t\ticon[k] = style[k];\n\t\t\t\t});\n\t\t\t\ticon.className = this._className;\n\t\t\t\ticon.tagName = this._tagName;\n\t\t\t\ticon.content = this._content;\n\t\t\t\ticon.name = this._name;\n\t\t\t\tif (this._iconWidth) {\n\t\t\t\t\ticon.width = this._iconWidth;\n\t\t\t\t}\n\n\t\t\t\tinfo.getIcon = () => repeatArray(icon, num);\n\t\t\t} else {\n\t\t\t\tinfo.getIcon = () => null;\n\t\t\t}\n\t\t\tsuper.drawInternal('', context, style, helper, grid, info);\n\t\t}\n\t}\n\tmodule.exports = IconColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/ImageColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/ImageColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst ImageStyle = __webpack_require__(/*! ../style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\tconst { getCacheOrLoad } = __webpack_require__(/*! ../../internal/imgs */ \"./internal/imgs.js\");\n\tconst { calcStartPosition } = __webpack_require__(/*! ../../internal/canvases */ \"./internal/canvases.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\n\tconst MAX_LRU_CACHE_SIZE = 50;\n\tfunction getImage(url) {\n\t\treturn getCacheOrLoad('ImageColumn', MAX_LRU_CACHE_SIZE, url);\n\t}\n\n\tfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\n\t\tlet newWidth = width;\n\t\tlet newHeight = height;\n\t\tif (newWidth > maxWidth) {\n\t\t\tnewWidth = maxWidth;\n\t\t\tnewHeight = newWidth * height / width;\n\t\t}\n\t\tif (newHeight > maxHeight) {\n\t\t\tnewHeight = maxHeight;\n\t\t\tnewWidth = newHeight * width / height;\n\t\t}\n\t\treturn {\n\t\t\twidth: newWidth,\n\t\t\theight: newHeight\n\t\t};\n\t}\n\n\tclass ImageColumn extends BaseColumn {\n\t\tget StyleClass() {\n\t\t\treturn ImageStyle;\n\t\t}\n\t\tonDrawCell(cellValue, info, context, grid) {\n\t\t\treturn super.onDrawCell(getImage(cellValue), info, context, grid);\n\t\t}\n\t\tclone() {\n\t\t\treturn new ImageColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tif (value) {\n\t\t\t\tconst {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tmargin,\n\t\t\t\t\tbgColor\n\t\t\t\t} = style;\n\t\t\t\tif (bgColor) {\n\t\t\t\t\tdrawCellBase({\n\t\t\t\t\t\tbgColor\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\thelper.drawWithClip(context, ctx => {\n\n\t\t\t\t\tctx.textAlign = textAlign;\n\t\t\t\t\tctx.textBaseline = textBaseline;\n\t\t\t\t\tconst rect = context.getRect();\n\t\t\t\t\tif (style.imageSizing === 'keep-aspect-ratio') {\n\t\t\t\t\t\tconst { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\n\t\t\t\t\t\tconst pos = calcStartPosition(ctx, rect, width, height, {\n\t\t\t\t\t\t\toffset: margin\n\t\t\t\t\t\t});\n\t\t\t\t\t\tctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tmodule.exports = ImageColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/MenuColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/MenuColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { normalize } = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\tconst { isDef } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst Style = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\n\tclass MenuColumn extends BaseColumn {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._options = normalize(option.options);\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tclone() {\n\t\t\treturn new MenuColumn(this);\n\t\t}\n\t\tget options() {\n\t\t\treturn this._options;\n\t\t}\n\t\twithOptions(options) {\n\t\t\tconst c = this.clone();\n\t\t\tc._options = normalize(options);\n\t\t\treturn c;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tfont,\n\t\t\t\tbgColor,\n\t\t\t\tpadding\n\t\t\t} = style;\n\t\t\tlet {\n\t\t\t\tcolor\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst text = this._convertInternal(value);\n\t\t\thelper.testFontLoad(font, text, context);\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\tconst basePadding = helper.toBoxPixelArray(padding || 0, context);\n\t\t\t\tconst textPadding = basePadding.slice(0);\n\t\t\t\ttextPadding[1] += 26; // icon padding\n\t\t\t\tconst iconPadding = basePadding.slice(0);\n\t\t\t\ticonPadding[1] += 8;\n\t\t\t\tif (!isDef(color) && (!isDef(value) || value === '')) {\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, .38)';\n\t\t\t\t}\n\t\t\t\thelper.text(text, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons,\n\t\t\t\t\tpadding: textPadding\n\t\t\t\t});\n\t\t\t\t// draw icon\n\t\t\t\thelper.text('', context, {\n\t\t\t\t\ttextAlign: 'right',\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons: [{\n\t\t\t\t\t\tpath: 'M0 2 5 7 10 2z',\n\t\t\t\t\t\twidth: 10,\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, .54)'\n\t\t\t\t\t}],\n\t\t\t\t\tpadding: iconPadding\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn value;\n\t\t}\n\t\t_convertInternal(value) {\n\t\t\tconst options = this._options;\n\t\t\tfor (let i = 0; i < options.length; i++) {\n\t\t\t\tconst option = options[i];\n\t\t\t\tif (option.value === value) {\n\t\t\t\t\tvalue = option.caption;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn super.convertInternal(value);\n\t\t}\n\t}\n\n\tmodule.exports = MenuColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/NumberColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/NumberColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\tconst NumberStyle = __webpack_require__(/*! ../style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\tlet defaultFotmat;\n\tclass NumberColumn extends Column {\n\t\tstatic get defaultFotmat() {\n\t\t\treturn defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\n\t\t}\n\t\tstatic set defaultFotmat(fmt) {\n\t\t\tdefaultFotmat = fmt;\n\t\t}\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._format = option.format;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn NumberStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new NumberColumn(this);\n\t\t}\n\t\tget format() {\n\t\t\treturn this._format;\n\t\t}\n\t\twithFormat(format) {\n\t\t\tconst c = this.clone();\n\t\t\tc._format = format;\n\t\t\treturn c;\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\tif (isNaN(value - 0)) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tconst format = this._format || NumberColumn.defaultFotmat;\n\t\t\treturn format.format(value - 0);\n\t\t}\n\t}\n\n\tmodule.exports = NumberColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/PercentCompleteBarColumn.js\":\n/*!**************************************************!*\\\n  !*** ./columns/type/PercentCompleteBarColumn.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst PercentCompleteBarStyle = __webpack_require__(/*! ../style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\tconst { getOrApply, str } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\n\tconst MARGIN = 2;\n\n\tclass PercentCompleteBarColumn extends Column {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._min = option.min || 0;\n\t\t\tthis._max = option.max || this._min + 100;\n\t\t\tthis._formatter = option.formatter || (v => v);\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn PercentCompleteBarStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new PercentCompleteBarColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {\n\t\t\tsuper.drawInternal(this._formatter(value), context, style, helper, grid, info);\n\t\t\tconst {\n\t\t\t\tbarColor,\n\t\t\t\tbarBgColor,\n\t\t\t\tbarHeight\n\t\t\t} = style;\n\n\t\t\tlet svalue = value + '';\n\t\t\tif (str.endsWith(svalue, '%')) {\n\t\t\t\tsvalue = svalue.substr(0, svalue.length - 1);\n\t\t\t}\n\t\t\tconst num = svalue - 0;\n\t\t\tconst rate = num < this._min ? 0 : num > this._max ? 1 : (num - this._min) / (this._max - this._min);\n\n\t\t\thelper.drawWithClip(context, ctx => {\n\t\t\t\tconst rect = context.getRect();\n\n\t\t\t\tconst barMaxWidth = rect.width - MARGIN * 2 - 1 /**/;\n\t\t\t\tconst barTop = rect.bottom - MARGIN - barHeight - 1 /**/;\n\t\t\t\tconst barLeft = rect.left + MARGIN;\n\t\t\t\tctx.fillStyle = getOrApply(barBgColor, rate * 100) || '#f0f3f5';\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(barLeft, barTop, barMaxWidth, barHeight);\n\t\t\t\tctx.fill();\n\n\t\t\t\tconst barSize = Math.min(barMaxWidth * rate, barMaxWidth);\n\t\t\t\tctx.fillStyle = getOrApply(barColor, rate * 100) || '#20a8d8';\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(barLeft, barTop, barSize, barHeight);\n\t\t\t\tctx.fill();\n\t\t\t});\n\t\t}\n\t}\n\tmodule.exports = PercentCompleteBarColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/columnUtils.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/columnUtils.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { isPromise } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst icons = __webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\");\n\tmodule.exports = {\n\t\tloadIcons(icon, context, helper, callback) {\n\t\t\tif (icon) {\n\t\t\t\tif (isPromise(icon)) {\n\t\t\t\t\ticon.then(i => {\n\t\t\t\t\t\tthis.loadIcon(i, context.toCurrentContext(), callback);\n\t\t\t\t\t});\n\t\t\t\t\ticon = null;\n\t\t\t\t} else {\n\t\t\t\t\tconst iconList = icons.toNormarizeArray(icon);\n\t\t\t\t\ticonList.forEach(i => {\n\t\t\t\t\t\thelper.testFontLoad(i.font, i.content, context);\n\t\t\t\t\t});\n\t\t\t\t\ticon = iconList;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcallback(icon, context);\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./core.js\":\n/*!*****************!*\\\n  !*** ./core.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst DrawGrid = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\n\t/**\r\n  * core modules\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.core\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tDrawGrid\n\t};\n}\n\n/***/ }),\n\n/***/ \"./core/DrawGrid.js\":\n/*!**************************!*\\\n  !*** ./core/DrawGrid.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst {\n\t\tisDef,\n\t\tbrowser,\n\t\tisDescendantElement,\n\t\tarray,\n\t\tisPromise,\n\t\tevent: {\n\t\t\tisTouchEvent,\n\t\t\tgetMouseButtons,\n\t\t\tgetKeyCode,\n\t\t\tcancel: cancelEvent\n\t\t}\n\t} = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\n\tconst EventTarget = __webpack_require__(/*! ./EventTarget */ \"./core/EventTarget.js\");\n\tconst Rect = __webpack_require__(/*! ../internal/Rect */ \"./internal/Rect.js\");\n\tconst Scrollable = __webpack_require__(/*! ../internal/Scrollable */ \"./internal/Scrollable.js\");\n\tconst EventHandler = __webpack_require__(/*! ../internal/EventHandler */ \"./internal/EventHandler.js\");\n\tconst NumberMap = __webpack_require__(/*! ../internal/NumberMap */ \"./internal/NumberMap.js\");\n\tconst style = __webpack_require__(/*! ../internal/style */ \"./internal/style.js\");\n\tconst calc = __webpack_require__(/*! ../internal/calc */ \"./internal/calc.js\");\n\tconst hiDPI = __webpack_require__(/*! ../internal/hiDPI */ \"./internal/hiDPI.js\");\n\t//protected symbol\n\tconst { PROTECTED_SYMBOL: _ } = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tfunction createRootElement() {\n\t\tconst element = document.createElement('div');\n\t\telement.classList.add('cheetah-grid');\n\t\treturn element;\n\t}\n\n\tconst KEY_END = 35;\n\tconst KEY_HOME = 36;\n\tconst KEY_LEFT = 37;\n\tconst KEY_UP = 38;\n\tconst KEY_RIGHT = 39;\n\tconst KEY_DOWN = 40;\n\tconst KEY_ALPHA_C = 67;\n\n\tconst EVENT_TYPE = {\n\t\tCLICK_CELL: 'click_cell',\n\t\tDBLCLICK_CELL: 'dblclick_cell',\n\t\tDBLTAP_CELL: 'dbltap_cell',\n\t\tMOUSEDOWN_CELL: 'mousedown_cell',\n\t\tMOUSEUP_CELL: 'mouseup_cell',\n\t\tSELECTED_CELL: 'selected_cell',\n\t\tKEYDOWN: 'keydown',\n\t\tMOUSEMOVE_CELL: 'mousemove_cell',\n\t\tMOUSEENTER_CELL: 'mouseenter_cell',\n\t\tMOUSELEAVE_CELL: 'mouseleave_cell',\n\t\tMOUSEOVER_CELL: 'mouseover_cell',\n\t\tMOUSEOUT_CELL: 'mouseout_cell',\n\t\tINPUT_CELL: 'input_cell',\n\t\tEDITABLEINPUT_CELL: 'editableinput_cell',\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL: 'modify_status_editableinput_cell',\n\t\tRESIZE_COLUMN: 'resize_column',\n\t\tSCROLL: 'scroll'\n\t};\n\n\t//private methods\n\tfunction _vibrate(e) {\n\t\tif (navigator.vibrate && isTouchEvent(e)) {\n\t\t\tnavigator.vibrate(50);\n\t\t}\n\t}\n\tfunction _getTargetRowAt(grid, absoluteY) {\n\t\tconst internal = grid.getTargetRowAtInternal(absoluteY);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tconst findBefore = (startRow, startBottom) => {\n\t\t\tlet bottom = startBottom;\n\t\t\tfor (let row = startRow; row >= 0; row--) {\n\t\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\t\tconst top = bottom - height;\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\trow\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbottom = top;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tconst findAfter = (startRow, startBottom) => {\n\t\t\tlet top = startBottom - _getRowHeight(grid, startRow);\n\t\t\tconst { rowCount } = grid[_];\n\t\t\tfor (let row = startRow; row < rowCount; row++) {\n\t\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\t\tconst bottom = top + height;\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\trow\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\ttop = bottom;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tconst candRow = Math.min(Math.ceil(absoluteY / grid[_].defaultRowHeight), grid.rowCount - 1);\n\t\tconst bottom = _getRowsHeight(grid, 0, candRow);\n\t\tif (absoluteY >= bottom) {\n\t\t\treturn findAfter(candRow, bottom);\n\t\t} else {\n\t\t\treturn findBefore(candRow, bottom);\n\t\t}\n\t}\n\tfunction _getTargetColAt(grid, absoluteX) {\n\t\tlet left = 0;\n\t\tconst { colCount } = grid[_];\n\t\tfor (let col = 0; col < colCount; col++) {\n\t\t\tconst width = _getColWidth(grid, col);\n\t\t\tconst right = left + width;\n\t\t\tif (right > absoluteX) {\n\t\t\t\treturn {\n\t\t\t\t\tleft,\n\t\t\t\t\tcol\n\t\t\t\t};\n\t\t\t}\n\t\t\tleft = right;\n\t\t}\n\t\treturn null;\n\t}\n\tfunction _getTargetFrozenRowAt(grid, absoluteY) {\n\t\tif (!grid[_].frozenRowCount) {\n\t\t\treturn null;\n\t\t}\n\t\tlet { top } = grid[_].scroll;\n\t\tconst rowCount = grid[_].frozenRowCount;\n\t\tfor (let row = 0; row < rowCount; row++) {\n\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\tconst bottom = top + height;\n\t\t\tif (bottom > absoluteY) {\n\t\t\t\treturn {\n\t\t\t\t\ttop,\n\t\t\t\t\trow\n\t\t\t\t};\n\t\t\t}\n\t\t\ttop = bottom;\n\t\t}\n\t\treturn null;\n\t}\n\tfunction _getTargetFrozenColAt(grid, absoluteX) {\n\t\tif (!grid[_].frozenColCount) {\n\t\t\treturn null;\n\t\t}\n\t\tlet { left } = grid[_].scroll;\n\t\tconst colCount = grid[_].frozenColCount;\n\t\tfor (let col = 0; col < colCount; col++) {\n\t\t\tconst width = _getColWidth(grid, col);\n\t\t\tconst right = left + width;\n\t\t\tif (right > absoluteX) {\n\t\t\t\treturn {\n\t\t\t\t\tleft,\n\t\t\t\t\tcol\n\t\t\t\t};\n\t\t\t}\n\t\t\tleft = right;\n\t\t}\n\t\treturn null;\n\t}\n\tfunction _getFrozenRowsRect(grid) {\n\t\tif (!grid[_].frozenRowCount) {\n\t\t\treturn null;\n\t\t}\n\t\tconst { top } = grid[_].scroll;\n\t\tlet height = 0;\n\t\tconst rowCount = grid[_].frozenRowCount;\n\t\tfor (let row = 0; row < rowCount; row++) {\n\t\t\theight += _getRowHeight(grid, row);\n\t\t}\n\t\treturn new Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\n\t}\n\tfunction _getFrozenColsRect(grid) {\n\t\tif (!grid[_].frozenColCount) {\n\t\t\treturn null;\n\t\t}\n\t\tconst { left } = grid[_].scroll;\n\t\tlet width = 0;\n\t\tconst colCount = grid[_].frozenColCount;\n\t\tfor (let col = 0; col < colCount; col++) {\n\t\t\twidth += _getColWidth(grid, col);\n\t\t}\n\t\treturn new Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\n\t}\n\tfunction _isCellDrawing(grid, col, row) {\n\t\tif (!grid[_].drawCells[row]) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !!grid[_].drawCells[row][col];\n\t}\n\tfunction _putCellDrawing(grid, col, row, context) {\n\t\tif (!grid[_].drawCells[row]) {\n\t\t\tgrid[_].drawCells[row] = {};\n\t\t}\n\t\tgrid[_].drawCells[row][col] = context;\n\t}\n\tfunction _removeCellDrawing(grid, col, row) {\n\t\tif (!grid[_].drawCells[row]) {\n\t\t\treturn;\n\t\t}\n\t\tdelete grid[_].drawCells[row][col];\n\t\tif (Object.keys(grid[_].drawCells[row]).length === 0) {\n\t\t\tdelete grid[_].drawCells[row];\n\t\t}\n\t}\n\tfunction _drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\n\t\tconst rect = new Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\n\n\t\tconst drawRect = Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\n\n\t\tif (drawRect.height > 0 && drawRect.width > 0) {\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tconst dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, _isCellDrawing(grid, col, row), grid[_].selection, drawLayers);\n\t\t\t\tconst p = grid.onDrawCell(col, row, dcContext);\n\t\t\t\tif (isPromise(p)) {\n\t\t\t\t\t//\n\t\t\t\t\t_putCellDrawing(grid, col, row, dcContext);\n\n\t\t\t\t\tconst pCol = col;\n\t\t\t\t\tdcContext._delayMode(grid, () => {\n\t\t\t\t\t\t_removeCellDrawing(grid, pCol, row);\n\t\t\t\t\t});\n\t\t\t\t\tp.then(() => {\n\t\t\t\t\t\tdcContext.terminate();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\n\t\tconst { colCount } = grid[_];\n\t\tconst drawOuter = (col, absoluteLeft) => {\n\t\t\t//\n\t\t\tif (col >= colCount - 1 && grid[_].canvas.width > absoluteLeft - visibleRect.left) {\n\t\t\t\tconst outerLeft = absoluteLeft - visibleRect.left;\n\t\t\t\tctx.save();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\n\t\t\t\tctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\n\t\t\t\tctx.fill();\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t};\n\n\t\tlet skipAbsoluteLeft = 0;\n\t\tif (initFrozenCol) {\n\t\t\tlet absoluteLeft = initFrozenCol.left;\n\t\t\tconst count = grid[_].frozenColCount;\n\t\t\tfor (let { col } = initFrozenCol; col < count; col++) {\n\t\t\t\tconst width = _getColWidth(grid, col);\n\n\t\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\n\n\t\t\t\tabsoluteLeft += width;\n\t\t\t\tif (drawRight <= absoluteLeft) {\n\t\t\t\t\t//\n\t\t\t\t\tdrawOuter(col, absoluteLeft);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tskipAbsoluteLeft = absoluteLeft;\n\t\t}\n\n\t\tlet absoluteLeft = initCol.left;\n\t\tfor (let { col } = initCol; col < colCount; col++) {\n\t\t\tconst width = _getColWidth(grid, col);\n\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\n\n\t\t\tabsoluteLeft += width;\n\t\t\tif (drawRight <= absoluteLeft) {\n\t\t\t\t//\n\t\t\t\tdrawOuter(col, absoluteLeft);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdrawOuter(colCount - 1, absoluteLeft);\n\t}\n\tfunction _invalidateRect(grid, drawRect) {\n\t\tconst visibleRect = _getVisibleRect(grid);\n\t\tconst { rowCount } = grid[_];\n\t\tconst ctx = grid._getInitContext();\n\n\t\tconst initRow = _getTargetRowAt(grid, Math.max(visibleRect.top, drawRect.top)) || {\n\t\t\ttop: _getRowsHeight(grid, 0, rowCount - 1),\n\t\t\trow: rowCount\n\t\t};\n\t\tconst initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\n\t\t\tleft: _getColsWidth(grid, 0, grid[_].colCount - 1),\n\t\t\tcol: grid[_].colCount\n\t\t};\n\t\tconst drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\n\t\tconst drawRight = Math.min(visibleRect.right, drawRect.right);\n\n\t\tconst initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\n\t\tconst initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\n\n\t\tconst drawLayers = new DrawLayers();\n\n\t\tconst drawOuter = (row, absoluteTop) => {\n\t\t\t//\n\t\t\tif (row >= rowCount - 1 && grid[_].canvas.height > absoluteTop - visibleRect.top) {\n\t\t\t\tconst outerTop = absoluteTop - visibleRect.top;\n\t\t\t\tctx.save();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\n\t\t\t\tctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\n\t\t\t\tctx.fill();\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t};\n\n\t\tlet skipAbsoluteTop = 0;\n\t\tif (initFrozenRow) {\n\t\t\tlet absoluteTop = initFrozenRow.top;\n\t\t\tconst count = grid[_].frozenRowCount;\n\t\t\tfor (let { row } = initFrozenRow; row < count; row++) {\n\t\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\t\t_drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\n\t\t\t\tabsoluteTop += height;\n\t\t\t\tif (drawBottom <= absoluteTop) {\n\t\t\t\t\t//\n\t\t\t\t\tdrawOuter(row, absoluteTop);\n\t\t\t\t\tdrawLayers.draw(ctx);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tskipAbsoluteTop = absoluteTop;\n\t\t}\n\n\t\tlet absoluteTop = initRow.top;\n\t\tfor (let { row } = initRow; row < rowCount; row++) {\n\t\t\tconst height = _getRowHeight(grid, row);\n\n\t\t\t//\n\t\t\t_drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\n\n\t\t\tabsoluteTop += height;\n\t\t\tif (drawBottom <= absoluteTop) {\n\t\t\t\t//\n\t\t\t\tdrawOuter(row, absoluteTop);\n\t\t\t\tdrawLayers.draw(ctx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdrawOuter(rowCount - 1, absoluteTop);\n\n\t\tdrawLayers.draw(ctx);\n\t}\n\n\tfunction _toPxWidth(grid, width) {\n\t\treturn Math.round(calc.toPx(width, grid[_].calcWidthContext));\n\t}\n\n\tfunction _getDefaultColPxWidth(grid) {\n\t\treturn _toPxWidth(grid, grid.defaultColWidth);\n\t}\n\n\tfunction _adjustColWidth(grid, col, orgWidth) {\n\t\tconst limit = grid[_].colWidthsLimit[col];\n\t\tif (!limit) {\n\t\t\treturn orgWidth;\n\t\t}\n\n\t\tif (limit.min) {\n\t\t\tconst min = _toPxWidth(grid, limit.min);\n\t\t\tif (min > orgWidth) {\n\t\t\t\treturn min;\n\t\t\t}\n\t\t}\n\t\tif (limit.max) {\n\t\t\tconst max = _toPxWidth(grid, limit.max);\n\t\t\tif (max < orgWidth) {\n\t\t\t\treturn max;\n\t\t\t}\n\t\t}\n\t\treturn orgWidth;\n\t}\n\n\tfunction _getColWidth(grid, col) {\n\t\tconst width = grid[_].colWidthsMap.get(col);\n\t\tif (width) {\n\t\t\treturn _adjustColWidth(grid, col, _toPxWidth(grid, width));\n\t\t}\n\t\treturn _getDefaultColPxWidth(grid);\n\t}\n\tfunction _setColWidth(grid, col, width) {\n\t\tgrid[_].colWidthsMap.put(col, width);\n\t}\n\tfunction _getColsWidth(grid, startCol, endCol) {\n\t\tconst colCount = endCol - startCol + 1;\n\t\tlet w = _getDefaultColPxWidth(grid) * colCount;\n\t\tgrid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\n\t\t});\n\t\treturn w;\n\t}\n\n\tfunction _getRowHeight(grid, row) {\n\t\tconst internal = grid.getRowHeightInternal(row);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tconst height = grid[_].rowHeightsMap.get(row);\n\t\tif (height) {\n\t\t\treturn height;\n\t\t}\n\t\treturn grid[_].defaultRowHeight;\n\t}\n\tfunction _setRowHeight(grid, row, height) {\n\t\tgrid[_].rowHeightsMap.put(row, height);\n\t}\n\tfunction _getRowsHeight(grid, startRow, endRow) {\n\t\tconst internal = grid.getRowsHeightInternal(startRow, endRow);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tconst rowCount = endRow - startRow + 1;\n\t\tlet h = grid[_].defaultRowHeight * rowCount;\n\t\tgrid[_].rowHeightsMap.each(startRow, endRow, height => {\n\t\t\th += height - grid[_].defaultRowHeight;\n\t\t});\n\t\treturn h;\n\t}\n\n\tfunction _getScrollWidth(grid) {\n\t\tlet w = _getDefaultColPxWidth(grid) * grid[_].colCount;\n\t\tgrid[_].colWidthsMap.eachAll((width, col) => {\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\n\t\t});\n\t\treturn w;\n\t}\n\tfunction _getScrollHeight(grid, row) {\n\t\tconst internal = grid.getScrollHeightInternal(row);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tlet h = grid[_].defaultRowHeight * grid[_].rowCount;\n\t\tgrid[_].rowHeightsMap.eachAll(height => {\n\t\t\th += height - grid[_].defaultRowHeight;\n\t\t});\n\t\treturn h;\n\t}\n\tfunction _onScroll(grid, e) {\n\t\tconst lastLeft = grid[_].scroll.left;\n\t\tconst lastTop = grid[_].scroll.top;\n\t\tconst moveX = grid[_].scrollable.scrollLeft - lastLeft;\n\t\tconst moveY = grid[_].scrollable.scrollTop - lastTop;\n\n\t\t//\n\t\tgrid[_].scroll = {\n\t\t\tleft: grid[_].scrollable.scrollLeft,\n\t\t\ttop: grid[_].scrollable.scrollTop\n\t\t};\n\t\tconst visibleRect = _getVisibleRect(grid);\n\t\tif (Math.abs(moveX) >= visibleRect.width || Math.abs(moveY) >= visibleRect.height) {\n\t\t\t//\n\t\t\t_invalidateRect(grid, visibleRect);\n\t\t} else {\n\t\t\t//\n\t\t\tgrid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\n\n\t\t\tif (moveX !== 0) {\n\t\t\t\t//\n\t\t\t\tconst redrawRect = visibleRect.copy();\n\t\t\t\tif (moveX < 0) {\n\t\t\t\t\tredrawRect.width = -moveX;\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tconst frozenRect = _getFrozenColsRect(grid);\n\t\t\t\t\t\tredrawRect.width += frozenRect.width;\n\t\t\t\t\t}\n\t\t\t\t} else if (moveX > 0) {\n\t\t\t\t\tredrawRect.left = redrawRect.right - moveX;\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t_invalidateRect(grid, redrawRect);\n\n\t\t\t\tif (moveX > 0) {\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenColsRect(grid));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (moveY !== 0) {\n\t\t\t\t//\n\t\t\t\tconst redrawRect = visibleRect.copy();\n\t\t\t\tif (moveY < 0) {\n\t\t\t\t\tredrawRect.height = -moveY;\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\n\t\t\t\t\t\tredrawRect.height += frozenRect.height;\n\t\t\t\t\t}\n\t\t\t\t} else if (moveY > 0) {\n\t\t\t\t\tredrawRect.top = redrawRect.bottom - moveY;\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t_invalidateRect(grid, redrawRect);\n\n\t\t\t\tif (moveY > 0) {\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenRowsRect(grid));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _onKeyDownMove(grid, e) {\n\t\tconst { shiftKey } = e;\n\t\tconst keyCode = getKeyCode(e);\n\t\tconst focusCell = shiftKey ? grid.selection._focus : grid.selection._sel;\n\t\tif (keyCode === KEY_LEFT) {\n\t\t\tconst col = grid.getMoveLeftColByKeyDownInternal(focusCell);\n\t\t\tif (col < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_UP) {\n\t\t\tconst row = grid.getMoveUpRowByKeyDownInternal(focusCell);\n\t\t\tif (row < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_RIGHT) {\n\t\t\tconst col = grid.getMoveRightColByKeyDownInternal(focusCell);\n\t\t\tif (grid.colCount <= col) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_DOWN) {\n\t\t\tconst row = grid.getMoveDownRowByKeyDownInternal(focusCell);\n\t\t\tif (grid.rowCount <= row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_HOME) {\n\t\t\tconst row = e.ctrlKey ? 0 : focusCell.row;\n\t\t\t_moveFocusCell(grid, 0, row, e.shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_END) {\n\t\t\tconst row = e.ctrlKey ? grid.rowCount - 1 : focusCell.row;\n\t\t\t_moveFocusCell(grid, grid.colCount - 1, row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t}\n\t}\n\tfunction _moveFocusCell(grid, col, row, shiftKey) {\n\t\tconst offset = grid.getOffsetInvalidateCells();\n\n\t\tfunction extendRange(range) {\n\t\t\tif (offset > 0) {\n\t\t\t\trange.start.col -= offset;\n\t\t\t\trange.start.row -= offset;\n\t\t\t\trange.end.col += offset;\n\t\t\t\trange.end.row += offset;\n\t\t\t}\n\t\t\treturn range;\n\t\t}\n\n\t\tconst beforeRange = extendRange(grid.selection.range);\n\t\tconst beforeRect = grid.getCellsRect(beforeRange.start.col, beforeRange.start.row, beforeRange.end.col, beforeRange.end.row);\n\n\t\tgrid.selection._setFocusCell(col, row, shiftKey);\n\t\tgrid.makeVisibleCell(col, row);\n\t\tgrid.focusCell(col, row);\n\n\t\tconst afterRange = extendRange(grid.selection.range);\n\t\tconst afterRect = grid.getCellsRect(afterRange.start.col, afterRange.start.row, afterRange.end.col, afterRange.end.row);\n\n\t\tif (afterRect.intersection(beforeRect)) {\n\t\t\tconst invalidateRect = Rect.max(afterRect, beforeRect);\n\t\t\t_invalidateRect(grid, invalidateRect);\n\t\t} else {\n\t\t\t_invalidateRect(grid, beforeRect);\n\t\t\t_invalidateRect(grid, afterRect);\n\t\t}\n\t}\n\tfunction _getMouseAbstractPoint(grid, e) {\n\t\tif (isTouchEvent(e)) {\n\t\t\te = e.changedTouches[0];\n\t\t}\n\t\tconst clientX = e.clientX || e.pageX + window.scrollX;\n\t\tconst clientY = e.clientY || e.pageY + window.scrollY;\n\t\tconst rect = grid[_].canvas.getBoundingClientRect();\n\t\tif (rect.right <= clientX) {\n\t\t\treturn null;\n\t\t}\n\t\tif (rect.bottom <= clientY) {\n\t\t\treturn null;\n\t\t}\n\t\tconst x = clientX - rect.left + grid[_].scroll.left;\n\t\tconst y = clientY - rect.top + grid[_].scroll.top;\n\t\treturn { x, y };\n\t}\n\n\tfunction _bindEvents(grid) {\n\t\tconst getCellEventArgsSet = e => {\n\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\n\t\t\tif (!abstractPos) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\t\t\tif (cell.col < 0 || cell.row < 0) {\n\t\t\t\treturn {\n\t\t\t\t\tabstractPos,\n\t\t\t\t\tcell\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst eventArgs = {\n\t\t\t\tcol: cell.col,\n\t\t\t\trow: cell.row,\n\t\t\t\tevent: e\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tabstractPos,\n\t\t\t\tcell,\n\t\t\t\teventArgs\n\t\t\t};\n\t\t};\n\t\tconst canResizeColumn = col => {\n\t\t\tconst limit = grid[_].colWidthsLimit[col];\n\t\t\tif (!limit || !limit.min || !limit.max) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn limit.max !== limit.min;\n\t\t};\n\t\tgrid[_].handler.on(grid[_].element, 'mousedown', e => {\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\n\t\t\tconst { abstractPos, eventArgs } = eventArgsSet;\n\t\t\tif (!abstractPos) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (eventArgs) {\n\t\t\t\tconst results = grid.fireListeners(EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\n\t\t\t\tif (array.findIndex(results, v => !v) >= 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (getMouseButtons(e) !== 1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n\t\t\t\t//\n\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\n\t\t\t} else {\n\t\t\t\t//\n\t\t\t\tgrid[_].cellSelector.start(e);\n\t\t\t}\n\t\t});\n\t\tlet doubleTapBefore = null;\n\t\tlet longTouchId = null;\n\t\tgrid[_].handler.on(grid[_].element, 'touchstart', e => {\n\n\t\t\tif (!doubleTapBefore) {\n\t\t\t\tdoubleTapBefore = getCellEventArgsSet(e).eventArgs;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tdoubleTapBefore = null;\n\t\t\t\t}, 350);\n\t\t\t} else {\n\t\t\t\tconst { eventArgs } = getCellEventArgsSet(e);\n\t\t\t\tif (eventArgs && eventArgs.col === doubleTapBefore.col && eventArgs.row === doubleTapBefore.row) {\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.DBLTAP_CELL, eventArgs);\n\t\t\t\t}\n\n\t\t\t\tdoubleTapBefore = null;\n\n\t\t\t\tif (e.defaultPrevented) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlongTouchId = setTimeout(() => {\n\t\t\t\t//\n\t\t\t\tlongTouchId = null;\n\t\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\n\t\t\t\tif (!abstractPos) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\n\t\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n\t\t\t\t\t//\n\t\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\n\t\t\t\t} else {\n\t\t\t\t\t//\n\t\t\t\t\tgrid[_].cellSelector.start(e);\n\t\t\t\t}\n\t\t\t}, 500);\n\t\t});\n\n\t\tfunction cancel(e) {\n\t\t\tif (longTouchId) {\n\t\t\t\tclearTimeout(longTouchId);\n\t\t\t\tlongTouchId = null;\n\t\t\t}\n\t\t}\n\t\tgrid[_].handler.on(grid[_].element, 'touchcancel', cancel);\n\t\tgrid[_].handler.on(grid[_].element, 'touchmove', cancel);\n\t\tgrid[_].handler.on(grid[_].element, 'touchend', e => {\n\t\t\tif (longTouchId) {\n\t\t\t\tclearTimeout(longTouchId);\n\t\t\t\tgrid[_].cellSelector.select(e);\n\t\t\t\tlongTouchId = null;\n\t\t\t}\n\t\t});\n\n\t\tlet isMouseover = false;\n\t\tlet mouseEnterCell = null;\n\t\tlet mouseOverCell = null;\n\t\tfunction onMouseenterCell(cell) {\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEENTER_CELL, cell);\n\t\t\tmouseEnterCell = cell;\n\t\t}\n\t\tfunction onMouseleaveCell() {\n\t\t\tconst beforeMouseCell = mouseEnterCell;\n\t\t\tmouseEnterCell = null;\n\t\t\tif (beforeMouseCell) {\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSELEAVE_CELL, {\n\t\t\t\t\tcol: beforeMouseCell.col,\n\t\t\t\t\trow: beforeMouseCell.row\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tfunction onMouseoverCell(cell) {\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOVER_CELL, cell);\n\t\t\tmouseOverCell = cell;\n\t\t}\n\t\tfunction onMouseoutCell() {\n\t\t\tconst beforeMouseCell = mouseOverCell;\n\t\t\tmouseOverCell = null;\n\t\t\tif (beforeMouseCell) {\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOUT_CELL, {\n\t\t\t\t\tcol: beforeMouseCell.col,\n\t\t\t\t\trow: beforeMouseCell.row\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tconst scrollElement = grid[_].scrollable.getElement();\n\t\tgrid[_].handler.on(scrollElement, 'mouseover', e => {\n\t\t\tisMouseover = true;\n\t\t});\n\t\tgrid[_].handler.on(scrollElement, 'mouseout', e => {\n\t\t\tisMouseover = false;\n\t\t\tonMouseoutCell();\n\t\t});\n\n\t\tgrid[_].handler.on(grid[_].element, 'mouseleave', e => {\n\t\t\tonMouseleaveCell();\n\t\t});\n\n\t\tgrid[_].handler.on(grid[_].element, 'mousemove', e => {\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\n\t\t\tconst { abstractPos, eventArgs } = eventArgsSet;\n\t\t\tif (eventArgs) {\n\t\t\t\tconst beforeMouseCell = mouseEnterCell;\n\t\t\t\tif (beforeMouseCell) {\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\t\t\t\t\tif (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\n\t\t\t\t\t\tonMouseoutCell();\n\t\t\t\t\t\tonMouseleaveCell();\n\t\t\t\t\t\tconst cell = {\n\t\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t\t};\n\t\t\t\t\t\tonMouseenterCell(cell);\n\t\t\t\t\t\tif (isMouseover) {\n\t\t\t\t\t\t\tonMouseoverCell(cell);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (isMouseover && !mouseOverCell) {\n\t\t\t\t\t\tonMouseoverCell({\n\t\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst cell = {\n\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t};\n\t\t\t\t\tonMouseenterCell(cell);\n\t\t\t\t\tif (isMouseover) {\n\t\t\t\t\t\tonMouseoverCell(cell);\n\t\t\t\t\t}\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tonMouseoutCell();\n\t\t\t\tonMouseleaveCell();\n\t\t\t}\n\t\t\tif (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { style } = grid[_].element;\n\t\t\tif (!abstractPos) {\n\t\t\t\tif (style.cursor === 'col-resize') {\n\t\t\t\t\tstyle.cursor = '';\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n\t\t\t\tstyle.cursor = 'col-resize';\n\t\t\t} else {\n\t\t\t\tif (style.cursor === 'col-resize') {\n\t\t\t\t\tstyle.cursor = '';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tgrid[_].handler.on(grid[_].element, 'click', e => {\n\t\t\tif (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.CLICK_CELL)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { eventArgs } = getCellEventArgsSet(e);\n\t\t\tif (!eventArgs) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.fireListeners(EVENT_TYPE.CLICK_CELL, eventArgs);\n\t\t});\n\t\tgrid[_].handler.on(grid[_].element, 'dblclick', e => {\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.DBLCLICK_CELL)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { eventArgs } = getCellEventArgsSet(e);\n\t\t\tif (!eventArgs) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.fireListeners(EVENT_TYPE.DBLCLICK_CELL, eventArgs);\n\t\t});\n\t\tgrid[_].focusControl.listen('keydown', (keyCode, e) => {\n\t\t\tgrid.fireListeners(EVENT_TYPE.KEYDOWN, keyCode, e);\n\t\t});\n\t\tgrid[_].selection.listen(EVENT_TYPE.SELECTED_CELL, data => {\n\t\t\tgrid.fireListeners(EVENT_TYPE.SELECTED_CELL, data, data.selected);\n\t\t});\n\n\t\tgrid[_].scrollable.onScroll(e => {\n\t\t\t_onScroll(grid, e);\n\t\t\tgrid.fireListeners(EVENT_TYPE.SCROLL, { event: e });\n\t\t});\n\t\tgrid[_].focusControl.onKeyDownMove(e => {\n\t\t\t_onKeyDownMove(grid, e);\n\t\t});\n\t\tgrid.listen('copydata', range => {\n\t\t\tlet copyValue = '';\n\t\t\tfor (let { row } = range.start; row <= range.end.row; row++) {\n\t\t\t\tfor (let { col } = range.start; col <= range.end.col; col++) {\n\t\t\t\t\tconst copyCellValue = grid.getCopyCellValue(col, row);\n\t\t\t\t\tif (window.Promise && copyCellValue instanceof window.Promise) {\n\t\t\t\t\t\t//\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst strCellValue = '' + copyCellValue;\n\t\t\t\t\t\tif (strCellValue.match(/^\\[object .*\\]$/)) {\n\t\t\t\t\t\t\t//object \n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcopyValue += strCellValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (col < range.end.col) {\n\t\t\t\t\t\tcopyValue += '\\t';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcopyValue += '\\n';\n\t\t\t}\n\t\t\treturn copyValue;\n\t\t});\n\t\tgrid[_].focusControl.onCopy(e => array.find(grid.fireListeners('copydata', grid[_].selection.range), isDef));\n\t\tgrid[_].focusControl.onInput(value => {\n\t\t\tconst { col, row } = grid[_].selection.select;\n\t\t\tgrid.fireListeners(EVENT_TYPE.INPUT_CELL, { col, row, value });\n\t\t});\n\t\tgrid.bindEventsInternal();\n\t}\n\n\tfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\n\t\tif (grid[_].frozenRowCount <= 0) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst frozenRect = _getFrozenRowsRect(grid);\n\t\tif (!frozenRect.inPoint(abstractX, abstractY)) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst cell = grid.getCellAt(abstractX, abstractY);\n\t\tconst cellRect = grid.getCellRect(cell.col, cell.row);\n\t\tif (abstractX < cellRect.left + offset) {\n\t\t\treturn cell.col - 1;\n\t\t}\n\t\tif (cellRect.right - offset < abstractX) {\n\t\t\treturn cell.col;\n\t\t}\n\t\treturn -1;\n\t}\n\tfunction _getVisibleRect(grid) {\n\t\treturn new Rect(grid[_].scroll.left, grid[_].scroll.top, grid[_].canvas.width, grid[_].canvas.height);\n\t}\n\tfunction _getScrollableVisibleRect(grid) {\n\t\tlet frozenColsWidth = 0;\n\t\tif (grid[_].frozenColCount > 0) {\n\t\t\t//\n\t\t\tconst frozenRect = _getFrozenColsRect(grid);\n\t\t\tfrozenColsWidth = frozenRect.width;\n\t\t}\n\t\tlet frozenRowsHeight = 0;\n\t\tif (grid[_].frozenRowCount > 0) {\n\t\t\t//\n\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\n\t\t\tfrozenRowsHeight = frozenRect.height;\n\t\t}\n\t\treturn new Rect(grid[_].scroll.left + frozenColsWidth, grid[_].scroll.top + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\n\t}\n\n\tfunction _toRelativeRect(grid, absoluteRect) {\n\t\tconst rect = absoluteRect.copy();\n\t\tconst visibleRect = _getVisibleRect(grid);\n\t\trect.offsetLeft(-visibleRect.left);\n\t\trect.offsetTop(-visibleRect.top);\n\n\t\treturn rect;\n\t}\n\t//end private methods\n\t//\n\t//\n\t//\n\t//\n\n\t/**\r\n  * managing mouse down moving\r\n  * @private\r\n  */\n\tclass BaseMouseDownMover {\n\t\tconstructor(grid) {\n\t\t\tthis._grid = grid;\n\t\t\tthis._handler = new EventHandler();\n\t\t\tthis._events = {};\n\t\t\tthis._started = false;\n\t\t\tthis._moved = false;\n\t\t}\n\t\tmoving(e) {\n\t\t\treturn !!this._started;\n\t\t}\n\t\tlastMoving(e) {\n\t\t\t// mouseupclick\n\t\t\tif (this.moving(e)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst last = this._mouseEndPoint;\n\t\t\tif (!last) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst pt = _getMouseAbstractPoint(this._grid, e);\n\t\t\treturn pt.x === last.x && pt.y === last.y;\n\t\t}\n\t\t_bindMoveAndUp(e) {\n\t\t\tif (!isTouchEvent(e)) {\n\t\t\t\tthis._events.mousemove = this._handler.on(document.body, 'mousemove', e => this._mouseMove(e));\n\t\t\t\tthis._events.mouseup = this._handler.on(document.body, 'mouseup', e => this._mouseUp(e));\n\t\t\t} else {\n\t\t\t\tthis._events.touchmove = this._handler.on(document.body, 'touchmove', e => this._mouseMove(e), { passive: false });\n\t\t\t\tthis._events.touchend = this._handler.on(document.body, 'touchend', e => this._mouseUp(e));\n\t\t\t\tthis._events.touchcancel = this._handler.on(document.body, 'touchcancel', e => this._mouseUp(e));\n\t\t\t}\n\t\t\tthis._started = true;\n\t\t\tthis._moved = false;\n\t\t}\n\t\t_mouseMove(e) {\n\t\t\tif (!isTouchEvent(e)) {\n\t\t\t\tif (getMouseButtons(e) !== 1) {\n\t\t\t\t\tthis._mouseUp(e);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\n\n\t\t\tcancelEvent(e);\n\t\t}\n\t\t_moveInternal(e) {\n\t\t\t//protected\n\t\t}\n\t\t_mouseUp(e) {\n\t\t\tthis._handler.off(this._events.mousemove);\n\t\t\tthis._handler.off(this._events.touchmove);\n\t\t\tthis._handler.off(this._events.mouseup);\n\t\t\tthis._handler.off(this._events.touchend);\n\t\t\t// this._handler.off(this._events.mouseleave);\n\t\t\tthis._handler.off(this._events.touchcancel);\n\n\t\t\tthis._started = false;\n\n\t\t\tthis._upInternal(e);\n\n\t\t\t// mouseupclick\n\t\t\tif (this._moved) {\n\t\t\t\t//\n\t\t\t\tthis._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._mouseEndPoint = null;\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t\t_upInternal(e) {\n\t\t\t//protected\n\t\t}\n\t\tdispose() {\n\t\t\tthis._handler.dispose();\n\t\t}\n\t}\n\n\t/**\r\n  * managing cell selection operation with mouse\r\n  * @private\r\n  */\n\tclass CellSelector extends BaseMouseDownMover {\n\t\tstart(e) {\n\t\t\tconst cell = this._getTargetCell(e);\n\t\t\tif (!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\n\n\t\t\tthis._bindMoveAndUp(e);\n\n\t\t\tthis._cell = cell;\n\n\t\t\tcancelEvent(e);\n\t\t\t_vibrate(e);\n\t\t}\n\t\tselect(e) {\n\t\t\tconst cell = this._getTargetCell(e);\n\t\t\tif (!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\n\t\t\tthis._cell = cell;\n\t\t}\n\t\t_moveInternal(e) {\n\t\t\tconst cell = this._getTargetCell(e);\n\t\t\tif (!cell || this._cell.col === cell.col && this._cell.row === cell.row) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, true);\n\n\t\t\t//make visible\n\t\t\tconst makeVisibleCol = (() => {\n\t\t\t\tif (cell.col < this._cell.col && 0 < cell.col) {\n\t\t\t\t\t// move left\n\t\t\t\t\treturn cell.col - 1;\n\t\t\t\t} else if (this._cell.col < cell.col && cell.col + 1 < this._grid.colCount) {\n\t\t\t\t\t// move right\n\t\t\t\t\treturn cell.col + 1;\n\t\t\t\t}\n\t\t\t\treturn cell.col;\n\t\t\t})();\n\t\t\tconst makeVisibleRow = (() => {\n\t\t\t\tif (cell.row < this._cell.row && 0 < cell.row) {\n\t\t\t\t\t// move up\n\t\t\t\t\treturn cell.row - 1;\n\t\t\t\t} else if (this._cell.row < cell.row && cell.row + 1 < this._grid.rowCount) {\n\t\t\t\t\t// move down\n\t\t\t\t\treturn cell.row + 1;\n\t\t\t\t}\n\t\t\t\treturn cell.row;\n\t\t\t})();\n\t\t\tif (makeVisibleCol !== cell.col || makeVisibleRow !== cell.row) {\n\t\t\t\tthis._grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\n\t\t\t}\n\t\t\tthis._cell = cell;\n\t\t\treturn true;\n\t\t}\n\t\t_getTargetCell(e) {\n\t\t\tconst abstractPos = _getMouseAbstractPoint(this._grid, e);\n\t\t\tif (!abstractPos) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst cell = this._grid.getCellAt(abstractPos.x, abstractPos.y);\n\t\t\tif (cell.col < 0 || cell.row < 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn cell;\n\t\t}\n\t}\n\t/**\r\n  * managing row width changing operation with mouse\r\n  * @private\r\n  */\n\tclass ColumnResizer extends BaseMouseDownMover {\n\t\tconstructor(grid) {\n\t\t\tsuper(grid);\n\t\t\tthis._targetCol = -1;\n\t\t}\n\t\tstart(col, e) {\n\t\t\tlet pageX;\n\t\t\tif (!isTouchEvent(e)) {\n\t\t\t\t({ pageX } = e);\n\t\t\t} else {\n\t\t\t\t({ pageX } = e.changedTouches[0]);\n\t\t\t}\n\n\t\t\tthis._x = pageX;\n\t\t\tthis._preX = 0;\n\n\t\t\tthis._bindMoveAndUp(e);\n\n\t\t\tthis._targetCol = col;\n\t\t\tthis._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\n\n\t\t\tcancelEvent(e);\n\t\t\t_vibrate(e);\n\t\t}\n\t\t_moveInternal(e) {\n\t\t\tconst pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\n\n\t\t\tconst x = pageX - this._x;\n\t\t\tconst moveX = x - this._preX;\n\t\t\tthis._preX = x;\n\t\t\tconst pre = this._grid.getColWidth(this._targetCol);\n\t\t\tlet afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\n\t\t\tif (afterSize < 10 && moveX < 0) {\n\t\t\t\tafterSize = 10;\n\t\t\t}\n\t\t\t_setColWidth(this._grid, this._targetCol, afterSize);\n\n\t\t\tconst rect = _getVisibleRect(this._grid);\n\t\t\trect.left = this._invalidateAbsoluteLeft;\n\t\t\t_invalidateRect(this._grid, rect);\n\n\t\t\tthis._grid.fireListeners(EVENT_TYPE.RESIZE_COLUMN, { col: this._targetCol });\n\n\t\t\treturn true;\n\t\t}\n\t\t_upInternal(e) {\n\t\t\tthis._grid.updateScroll();\n\t\t}\n\t}\n\n\tfunction setSafeInputValue(input, value) {\n\t\tconst { type } = input;\n\t\tinput.type = '';\n\t\tinput.value = value;\n\t\tif (type) {\n\t\t\tinput.type = type;\n\t\t}\n\t}\n\n\t/**\r\n  * Manage focus\r\n  * @private\r\n  */\n\tclass FocusControl extends EventTarget {\n\t\tconstructor(grid, parentElement, scrollable) {\n\t\t\tsuper();\n\t\t\tthis._grid = grid;\n\t\t\tthis._scrollable = scrollable;\n\t\t\tthis._handler = new EventHandler();\n\t\t\tthis._input = document.createElement('input');\n\t\t\tthis._input.classList.add('grid-focus-control');\n\t\t\tthis._input.readOnly = true;\n\t\t\tparentElement.appendChild(this._input);\n\n\t\t\tthis._handler.on(this._input, 'compositionstart', e => {\n\t\t\t\tthis._input.classList.add('composition');\n\t\t\t\tthis._input.style.font = this._grid.font || '16px sans-serif';\n\t\t\t\tthis._isComposition = true;\n\t\t\t\tgrid.focus();\n\t\t\t});\n\t\t\tthis._handler.on(this._input, 'compositionend', e => {\n\t\t\t\tthis._isComposition = false;\n\t\t\t\tthis._input.classList.remove('composition');\n\t\t\t\tthis._input.style.font = '';\n\t\t\t\tif (!this._input.readOnly) {\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t});\n\t\t\tthis._handler.on(this._input, 'keypress', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!this._input.readOnly && e.key && e.key.length === 1) {\n\t\t\t\t\tif (e.key === 'c' && (e.ctrlKey || e.metaKey)) {\n\t\t\t\t\t\t//copy! for Firefox\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.fireListeners('input', e.key);\n\t\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t});\n\t\t\tthis._handler.on(this._input, 'keydown', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst keyCode = getKeyCode(e);\n\t\t\t\tthis.fireListeners('keydown', keyCode, e);\n\n\t\t\t\tif (!this._input.readOnly && this._input.value) {\n\t\t\t\t\t// for Safari\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\n\t\t\t\t}\n\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t});\n\t\t\tconst inputClear = e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t};\n\n\t\t\tthis._handler.on(this._input, 'input', inputClear);\n\t\t\tthis._handler.on(this._input, 'keyup', inputClear);\n\t\t\tthis._handler.on(document, 'keydown', e => {\n\t\t\t\tif (!browser.IE) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (e.target !== this._input) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst keyCode = getKeyCode(e);\n\t\t\t\tif (keyCode === KEY_ALPHA_C && e.ctrlKey) {\n\t\t\t\t\tsetSafeInputValue(this._input, 'dummy');\n\t\t\t\t\tthis._input.select();\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._handler.on(document, 'copy', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!isDescendantElement(parentElement, e.target)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t\tconst data = array.find(this.fireListeners('copy'), isDef);\n\t\t\t\tif (isDef(data)) {\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\tif (browser.IE) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', data); // IE\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', data); // Chrome, Firefox\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tonKeyDownMove(fn) {\n\t\t\tthis._handler.on(this._input, 'keydown', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst keyCode = getKeyCode(e);\n\t\t\t\tif (keyCode === KEY_LEFT || keyCode === KEY_UP || keyCode === KEY_RIGHT || keyCode === KEY_DOWN || keyCode === KEY_HOME || keyCode === KEY_END) {\n\t\t\t\t\tfn(e);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tonInput(fn) {\n\t\t\treturn this.listen('input', fn);\n\t\t}\n\t\tonCopy(fn) {\n\t\t\treturn this.listen('copy', fn);\n\t\t}\n\t\tfocus() {\n\t\t\t// this._input.value = '';\n\t\t\tthis._input.focus();\n\t\t}\n\t\tsetFocusRect(rect) {\n\t\t\tconst top = this._scrollable.calcTop(rect.top);\n\t\t\tthis._input.style.top = (top - style.getScrollBarSize()).toFixed() + 'px'; //position:relative IE position:relative\n\t\t\tthis._input.style.left = rect.left.toFixed() + 'px';\n\t\t\tthis._input.style.width = rect.width.toFixed() + 'px';\n\t\t\tthis._input.style.height = rect.height.toFixed() + 'px';\n\t\t}\n\t\tset editMode(editMode) {\n\t\t\tthis._input.readOnly = !editMode;\n\t\t}\n\t\tresetInputStatus() {\n\t\t\tconst el = this._input;\n\t\t\tconst composition = el.classList.contains('composition');\n\n\t\t\tconst atts = el.attributes;\n\t\t\tconst removeNames = [];\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\n\t\t\t\tconst att = atts[i];\n\t\t\t\tif (!this._inputStatus.hasOwnProperty(att.nodeName)) {\n\t\t\t\t\tremoveNames.push(att.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremoveNames.forEach(removeName => {\n\t\t\t\tel.removeAttribute(removeName);\n\t\t\t});\n\t\t\tfor (const name in this._inputStatus) {\n\t\t\t\tel.setAttribute(name, this._inputStatus[name]);\n\t\t\t}\n\t\t\tif (composition) {\n\t\t\t\tel.classList.add('composition');\n\t\t\t\tel.style.font = this._grid.font || '16px sans-serif';\n\t\t\t} else {\n\t\t\t\tel.classList.remove('composition');\n\t\t\t}\n\t\t}\n\t\tstoreInputStatus() {\n\t\t\tconst el = this._input;\n\t\t\tthis._inputStatus = {};\n\t\t\tconst atts = el.attributes;\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\n\t\t\t\tconst att = atts[i];\n\t\t\t\tthis._inputStatus[att.name] = att.value;\n\t\t\t}\n\t\t}\n\t\tsetDefaultInputStatus() {\n\t\t\t// \n\t\t\t// this._input.style.font = this._grid.font || '16px sans-serif';\n\t\t}\n\t\tget editMode() {\n\t\t\treturn !this._input.readOnly;\n\t\t}\n\t\tget input() {\n\t\t\treturn this._input;\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t\tthis._handler.dispose();\n\t\t}\n\t}\n\n\t/**\r\n  * Selected area management\r\n  */\n\tclass Selection extends EventTarget {\n\t\tconstructor(grid) {\n\t\t\tsuper();\n\t\t\tthis._grid = grid;\n\n\t\t\tthis._sel = { col: 0, row: 0 };\n\t\t\tthis._focus = { col: 0, row: 0 };\n\n\t\t\tthis._start = { col: 0, row: 0 };\n\t\t\tthis._end = { col: 0, row: 0 };\n\t\t}\n\t\tget range() {\n\t\t\tconst startCol = Math.min(this._start.col, this._end.col);\n\t\t\tconst startRow = Math.min(this._start.row, this._end.row);\n\t\t\tconst endCol = Math.max(this._start.col, this._end.col);\n\t\t\tconst endRow = Math.max(this._start.row, this._end.row);\n\t\t\treturn {\n\t\t\t\tstart: {\n\t\t\t\t\tcol: startCol,\n\t\t\t\t\trow: startRow\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\tcol: endCol,\n\t\t\t\t\trow: endRow\n\t\t\t\t},\n\t\t\t\tinCell(col, row) {\n\t\t\t\t\treturn startCol <= col && col <= endCol && startRow <= row && row <= endRow;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tget select() {\n\t\t\treturn {\n\t\t\t\tcol: this._sel.col,\n\t\t\t\trow: this._sel.row\n\t\t\t};\n\t\t}\n\t\tset select(cell = {}) {\n\t\t\tthis._wrapFireSelectedEvent(() => {\n\t\t\t\tconst {\n\t\t\t\t\tcol = 0,\n\t\t\t\t\trow = 0\n\t\t\t\t} = cell;\n\t\t\t\tthis._setSelectCell(col, row);\n\t\t\t\tthis._setFocusCell(col, row, true);\n\t\t\t});\n\t\t}\n\t\t_setSelectCell(col, row) {\n\t\t\tthis._wrapFireSelectedEvent(() => {\n\t\t\t\tthis._sel = { col, row };\n\t\t\t\tthis._start = { col, row };\n\t\t\t});\n\t\t}\n\t\t_setFocusCell(col, row, keepSelect) {\n\t\t\tthis._wrapFireSelectedEvent(() => {\n\t\t\t\tif (!keepSelect) {\n\t\t\t\t\tthis._setSelectCell(col, row);\n\t\t\t\t}\n\t\t\t\tthis._focus = { col, row };\n\t\t\t\tthis._end = { col, row };\n\t\t\t});\n\t\t}\n\t\t_wrapFireSelectedEvent(callback) {\n\t\t\tif (this._isWraped) {\n\t\t\t\tcallback();\n\t\t\t} else {\n\t\t\t\tthis._isWraped = true;\n\t\t\t\ttry {\n\t\t\t\t\tconst before = {\n\t\t\t\t\t\tcol: this._sel.col,\n\t\t\t\t\t\trow: this._sel.row,\n\t\t\t\t\t\tselected: false\n\t\t\t\t\t};\n\t\t\t\t\tcallback();\n\t\t\t\t\tconst after = {\n\t\t\t\t\t\tcol: this._sel.col,\n\t\t\t\t\t\trow: this._sel.row,\n\t\t\t\t\t\tselected: true,\n\t\t\t\t\t\tbefore: {\n\t\t\t\t\t\t\tcol: before.col,\n\t\t\t\t\t\t\trow: before.row\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tbefore.after = {\n\t\t\t\t\t\tcol: after.col,\n\t\t\t\t\t\trow: after.row\n\t\t\t\t\t};\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, before);\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, after);\n\t\t\t\t} finally {\n\t\t\t\t\tthis._isWraped = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\r\n  * This class manages the drawing process for each layer\r\n  */\n\tclass DrawLayers {\n\t\tconstructor() {\n\t\t\tthis._layers = {};\n\t\t}\n\t\taddDraw(level, fn) {\n\t\t\tconst l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\n\t\t\tl.addDraw(fn);\n\t\t}\n\t\tdraw(ctx) {\n\t\t\tconst list = [];\n\t\t\tfor (const k in this._layers) {\n\t\t\t\tlist.push(this._layers[k]);\n\t\t\t}\n\t\t\tlist.sort((a, b) => a.level - b.level);\n\t\t\tlist.forEach(l => l.draw(ctx));\n\t\t}\n\t}\n\tclass DrawLayer {\n\t\tconstructor(level) {\n\t\t\tthis._level = level;\n\t\t\tthis._list = [];\n\t\t}\n\t\tget level() {\n\t\t\treturn this._level;\n\t\t}\n\t\taddDraw(fn) {\n\t\t\tthis._list.push(fn);\n\t\t}\n\t\tdraw(ctx) {\n\t\t\tthis._list.forEach(fn => {\n\t\t\t\tctx.save();\n\t\t\t\ttry {\n\t\t\t\t\tfn(ctx);\n\t\t\t\t} finally {\n\t\t\t\t\tctx.restore();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t/**\r\n  * Context of cell drawing\r\n  */\n\tclass DrawCellContext {\n\t\t/**\r\n   * @private\r\n   */\n\t\tconstructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\n\t\t\tthis._col = col;\n\t\t\tthis._row = row;\n\t\t\tthis._mode = 0;\n\t\t\tthis._ctx = ctx;\n\t\t\tthis._rect = rect;\n\t\t\tthis._drawRect = drawRect;\n\t\t\tthis._drawing = drawing;\n\t\t\tthis._selection = selection;\n\t\t\tthis._drawLayers = drawLayers;\n\t\t}\n\t\tget drawing() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._drawing;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\tget row() {\n\t\t\treturn this._row;\n\t\t}\n\t\tget col() {\n\t\t\treturn this._col;\n\t\t}\n\t\t/**\r\n   * select status.\r\n   * @return {object} select status\r\n   */\n\t\tgetSelectState() {\n\t\t\tconst sel = this._selection.select;\n\t\t\treturn {\n\t\t\t\tselected: sel.col === this._col && sel.row === this._row,\n\t\t\t\tselection: this._selection.range.inCell(this._col, this._row)\n\t\t\t};\n\t\t}\n\t\t/**\r\n   * Canvas context.\r\n   * @return {CanvasRenderingContext2D} Canvas context.\r\n   */\n\t\tgetContext() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._ctx;\n\t\t\t} else {\n\t\t\t\treturn this._grid._getInitContext();\n\t\t\t}\n\t\t}\n\t\t/**\r\n   * Rectangle of cell.\r\n   * @return {Rect} rect Rectangle of cell.\r\n   */\n\t\tgetRect() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._rect;\n\t\t\t} else {\n\t\t\t\tif (this._rect) {\n\t\t\t\t\treturn this._rect;\n\t\t\t\t}\n\t\t\t\treturn this._grid.getCellRelativeRect(this._col, this._row);\n\t\t\t}\n\t\t}\n\t\tsetRect(rect) {\n\t\t\tthis._rect = rect;\n\t\t}\n\t\t/**\r\n   * Rectangle of Drawing range.\r\n   * @return {Rect} Rectangle of Drawing range.\r\n   */\n\t\tgetDrawRect() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._drawRect;\n\t\t\t} else {\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\n\t\t\t\treturn this._toRelativeDrawRect(absoluteRect);\n\t\t\t}\n\t\t}\n\t\t/**\r\n   * get Context of current state\r\n   * @return {DrawCellContext} current DrawCellContext.\r\n   */\n\t\ttoCurrentContext() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this;\n\t\t\t} else {\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\n\t\t\t\tconst rect = _toRelativeRect(this._grid, absoluteRect);\n\t\t\t\tconst drawRect = this._toRelativeDrawRect(absoluteRect);\n\t\t\t\tconst context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\n\t\t\t\t// toCurrentContext  toCurrentContext\n\t\t\t\tcontext.toCurrentContext = this.toCurrentContext.bind(this);\n\t\t\t\treturn context;\n\t\t\t}\n\t\t}\n\t\taddLayerDraw(level, fn) {\n\t\t\tthis._drawLayers.addDraw(level, fn);\n\t\t}\n\t\t_toRelativeDrawRect(absoluteRect) {\n\t\t\tconst visibleRect = _getVisibleRect(this._grid);\n\t\t\tlet rect = absoluteRect.copy();\n\t\t\tif (!rect.intersection(visibleRect)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst isFrozenCell = this._grid.isFrozenCell(this._col, this._row);\n\t\t\tif (this._grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\n\t\t\t\tconst fRect = this._grid.getCellRect(this._grid.frozenColCount - 1, this._row);\n\t\t\t\trect = Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\n\t\t\t}\n\t\t\tif (this._grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\n\t\t\t\tconst fRect = this._grid.getCellRect(this._col, this._grid.frozenRowCount - 1);\n\t\t\t\trect = Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\n\t\t\t}\n\n\t\t\tif (!rect.intersection(visibleRect)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\trect.offsetLeft(-visibleRect.left);\n\t\t\trect.offsetTop(-visibleRect.top);\n\n\t\t\treturn rect;\n\t\t}\n\t\t_delayMode(grid, onTerminate) {\n\t\t\tthis._mode = 1;\n\t\t\tthis._ctx = null;\n\t\t\tthis._rect = null;\n\t\t\tthis._drawRect = null;\n\t\t\tthis._grid = grid;\n\t\t\tthis._onTerminate = onTerminate;\n\t\t}\n\t\t/**\r\n   * terminate\r\n   * @return {void}\r\n   */\n\t\tterminate() {\n\t\t\tif (this._mode !== 0) {\n\t\t\t\tthis._onTerminate();\n\t\t\t}\n\t\t}\n\t}\n\t/**\r\n  * DrawGrid\r\n  * @classdesc cheetahGrid.core.DrawGrid\r\n  * @extends EventTarget\r\n  * @memberof cheetahGrid.core\r\n  */\n\tclass DrawGrid extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\t/**\r\n   * constructor\r\n   *\r\n   * <pre>\r\n   * Constructor options\r\n   * -----\r\n   * rowCount: grid row count.default 10\r\n   * colCount: grid col count.default 10\r\n   * frozenColCount: default 0\r\n   * frozenRowCount: default 0\r\n   * defaultRowHeight: default grid row height. default 40\r\n   * defaultColWidth: default grid col width. default 80\r\n   * parentElement: canvas parentElement\r\n   * font: default font\r\n   * underlayBackgroundColor: underlay background color\r\n   * -----\r\n   * </pre>\r\n   *\r\n   * @constructor\r\n   * @param  {Object} options Constructor options\r\n   */\n\t\tconstructor({\n\t\t\trowCount = 10,\n\t\t\tcolCount = 10,\n\t\t\tfrozenColCount = 0,\n\t\t\tfrozenRowCount = 0,\n\t\t\tdefaultRowHeight = 40,\n\t\t\tdefaultColWidth = 80,\n\t\t\tfont,\n\t\t\tunderlayBackgroundColor,\n\t\t\tparentElement\n\t\t} = {}) {\n\t\t\tsuper();\n\t\t\tthis[_] = {};\n\t\t\tstyle.initDocument();\n\t\t\tthis[_].element = createRootElement();\n\t\t\tthis[_].scrollable = new Scrollable();\n\t\t\tthis[_].handler = new EventHandler();\n\t\t\tthis[_].selection = new Selection(this);\n\t\t\tthis[_].focusControl = new FocusControl(this, this[_].scrollable.getElement(), this[_].scrollable);\n\n\t\t\tthis[_].canvas = hiDPI.transform(document.createElement('canvas'));\n\t\t\tthis[_].context = this[_].canvas.getContext('2d', { alpha: false });\n\n\t\t\tthis[_].rowCount = rowCount;\n\t\t\tthis[_].colCount = colCount;\n\t\t\tthis[_].frozenColCount = frozenColCount;\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\n\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\n\n\t\t\tthis[_].font = font;\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\n\n\t\t\t/////\n\t\t\tthis[_].rowHeightsMap = new NumberMap();\n\t\t\tthis[_].colWidthsMap = new NumberMap();\n\t\t\tthis[_].colWidthsLimit = {};\n\t\t\tthis[_].calcWidthContext = {\n\t\t\t\t_: this[_],\n\t\t\t\tget full() {\n\t\t\t\t\treturn this._.canvas.width;\n\t\t\t\t},\n\t\t\t\tget em() {\n\t\t\t\t\treturn this._.context.measureText('').width;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis[_].columnResizer = new ColumnResizer(this);\n\t\t\tthis[_].cellSelector = new CellSelector(this);\n\n\t\t\tthis[_].drawCells = {};\n\n\t\t\tthis[_].element.appendChild(this[_].canvas);\n\t\t\tthis[_].element.appendChild(this[_].scrollable.getElement());\n\t\t\tthis.updateScroll();\n\t\t\tif (parentElement) {\n\t\t\t\tparentElement.appendChild(this[_].element);\n\t\t\t\tthis.updateSize();\n\t\t\t} else {\n\t\t\t\tthis.updateSize();\n\t\t\t}\n\t\t\t_bindEvents(this);\n\t\t}\n\t\tgetElement() {\n\t\t\treturn this[_].element;\n\t\t}\n\t\tget canvas() {\n\t\t\treturn this[_].canvas;\n\t\t}\n\t\tfocus() {\n\t\t\tconst { col, row } = this[_].selection.select;\n\t\t\tthis.focusCell(col, row);\n\t\t}\n\t\tget selection() {\n\t\t\treturn this[_].selection;\n\t\t}\n\t\tget rowCount() {\n\t\t\treturn this[_].rowCount;\n\t\t}\n\t\tset rowCount(rowCount) {\n\t\t\tthis[_].rowCount = rowCount;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget colCount() {\n\t\t\treturn this[_].colCount;\n\t\t}\n\t\tset colCount(colCount) {\n\t\t\tthis[_].colCount = colCount;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget frozenColCount() {\n\t\t\treturn this[_].frozenColCount;\n\t\t}\n\t\tset frozenColCount(frozenColCount) {\n\t\t\tthis[_].frozenColCount = frozenColCount;\n\t\t}\n\t\tget frozenRowCount() {\n\t\t\treturn this[_].frozenRowCount;\n\t\t}\n\t\tset frozenRowCount(frozenRowCount) {\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\n\t\t}\n\t\tget defaultRowHeight() {\n\t\t\treturn this[_].rowCount;\n\t\t}\n\t\tset defaultRowHeight(defaultRowHeight) {\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget defaultColWidth() {\n\t\t\treturn this[_].defaultColWidth;\n\t\t}\n\t\tset defaultColWidth(defaultColWidth) {\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget font() {\n\t\t\treturn this[_].font;\n\t\t}\n\t\tset font(font) {\n\t\t\tthis[_].font = font;\n\t\t}\n\t\tget underlayBackgroundColor() {\n\t\t\treturn this[_].underlayBackgroundColor;\n\t\t}\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\n\t\t}\n\t\tconfigure(name, value) {\n\t\t\tconst cfg = this[_].config || (this[_].config = {});\n\t\t\tif (isDef(value)) {\n\t\t\t\tcfg[name] = value;\n\t\t\t}\n\t\t\treturn cfg[name];\n\t\t}\n\t\tupdateSize() {\n\t\t\t//\n\t\t\tthis[_].canvas.style.width = '';\n\t\t\tthis[_].canvas.style.height = '';\n\t\t\tconst width = Math.floor(this[_].canvas.offsetWidth ||\n\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetWidth - style.getScrollBarSize());\n\t\t\tconst height = Math.floor(this[_].canvas.offsetHeight ||\n\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetHeight - style.getScrollBarSize());\n\n\t\t\tthis[_].canvas.width = width;\n\t\t\tthis[_].canvas.height = height;\n\n\t\t\t//style\n\t\t\tthis[_].canvas.style.width = `${width}px`;\n\t\t\tthis[_].canvas.style.height = `${height}px`;\n\n\t\t\tconst sel = this[_].selection.select;\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\n\t\t}\n\t\tupdateScroll() {\n\t\t\tthis[_].scrollable.setScrollSize(_getScrollWidth(this), _getScrollHeight(this));\n\t\t\tthis[_].scroll = {\n\t\t\t\tleft: this[_].scrollable.scrollLeft,\n\t\t\t\ttop: this[_].scrollable.scrollTop\n\t\t\t};\n\t\t}\n\t\tgetRowHeight(row) {\n\t\t\treturn _getRowHeight(this, row);\n\t\t}\n\t\tsetRowHeight(row, height) {\n\t\t\t_setRowHeight(this, row, height);\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tgetColWidth(col) {\n\t\t\treturn _getColWidth(this, col);\n\t\t}\n\t\tsetColWidth(col, width) {\n\t\t\t_setColWidth(this, col, width);\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tgetMaxColWidth(col) {\n\t\t\tconst obj = this[_].colWidthsLimit[col];\n\t\t\treturn obj && obj.max || undefined;\n\t\t}\n\t\tsetMaxColWidth(col, maxwidth) {\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\t\t\tobj.max = maxwidth;\n\t\t}\n\t\tgetMinColWidth(col) {\n\t\t\tconst obj = this[_].colWidthsLimit[col];\n\t\t\treturn obj && obj.min || undefined;\n\t\t}\n\t\tsetMinColWidth(col, minwidth) {\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\t\t\tobj.min = minwidth;\n\t\t}\n\t\tgetCellRect(col, row) {\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\n\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, col - 1);\n\t\t\tconst width = _getColWidth(this, col);\n\t\t\tif (isFrozenCell && isFrozenCell.col) {\n\t\t\t\tabsoluteLeft += this[_].scroll.left;\n\t\t\t}\n\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, row - 1);\n\t\t\tconst height = _getRowHeight(this, row);\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\tabsoluteTop += this[_].scroll.top;\n\t\t\t}\n\t\t\treturn new Rect(absoluteLeft, absoluteTop, width, height);\n\t\t}\n\t\tgetCellRelativeRect(col, row) {\n\t\t\treturn _toRelativeRect(this, this.getCellRect(col, row));\n\t\t}\n\t\tgetCellsRect(startCol, startRow, endCol, endRow) {\n\t\t\tconst isFrozenStartCell = this.isFrozenCell(startCol, startRow);\n\t\t\tconst isFrozenEndCell = this.isFrozenCell(endCol, endRow);\n\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\t\t\tlet width = _getColsWidth(this, startCol, endCol);\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.col) {\n\t\t\t\tconst scrollLeft = this[_].scroll.left;\n\t\t\t\tabsoluteLeft += scrollLeft;\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.col) {\n\t\t\t\t\twidth -= scrollLeft;\n\t\t\t\t\twidth = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, startRow - 1);\n\t\t\tlet height = _getRowsHeight(this, startRow, endRow);\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.row) {\n\t\t\t\tconst scrollTop = this[_].scroll.top;\n\t\t\t\tabsoluteTop += scrollTop;\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.row) {\n\t\t\t\t\theight -= scrollTop;\n\t\t\t\t\theight = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new Rect(absoluteLeft, absoluteTop, width, height);\n\t\t}\n\t\tisFrozenCell(col, row) {\n\t\t\tconst isFrozenRow = this[_].frozenRowCount > 0 && row < this[_].frozenRowCount;\n\t\t\tconst isFrozenCol = this[_].frozenColCount > 0 && col < this[_].frozenColCount;\n\t\t\tif (isFrozenRow || isFrozenCol) {\n\t\t\t\treturn {\n\t\t\t\t\trow: isFrozenRow,\n\t\t\t\t\tcol: isFrozenCol\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tgetRowAt(absoluteY) {\n\t\t\tconst frozen = _getTargetFrozenRowAt(this, absoluteY);\n\t\t\tif (frozen) {\n\t\t\t\treturn frozen.row;\n\t\t\t}\n\t\t\tconst row = _getTargetRowAt(this, absoluteY);\n\t\t\treturn row ? row.row : -1;\n\t\t}\n\t\tgetColAt(absoluteX) {\n\t\t\tconst frozen = _getTargetFrozenColAt(this, absoluteX);\n\t\t\tif (frozen) {\n\t\t\t\treturn frozen.col;\n\t\t\t}\n\t\t\tconst col = _getTargetColAt(this, absoluteX);\n\t\t\treturn col ? col.col : -1;\n\t\t}\n\t\tgetCellAt(absoluteX, absoluteY) {\n\t\t\treturn {\n\t\t\t\trow: this.getRowAt(absoluteY),\n\t\t\t\tcol: this.getColAt(absoluteX)\n\t\t\t};\n\t\t}\n\t\tmakeVisibleCell(col, row) {\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\n\t\t\tif (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst rect = this.getCellRect(col, row);\n\t\t\tconst visibleRect = _getScrollableVisibleRect(this);\n\t\t\tif (visibleRect.contains(rect)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!isFrozenCell || !isFrozenCell.col) {\n\t\t\t\tif (rect.left < visibleRect.left) {\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.left - rect.left;\n\t\t\t\t} else if (visibleRect.right < rect.right) {\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.right - rect.right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isFrozenCell || !isFrozenCell.row) {\n\t\t\t\tif (rect.top < visibleRect.top) {\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.top - rect.top;\n\t\t\t\t} else if (visibleRect.bottom < rect.bottom) {\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfocusCell(col, row) {\n\t\t\tconst oldEditMode = this[_].focusControl.editMode;\n\t\t\tif (oldEditMode) {\n\t\t\t\tthis[_].focusControl.resetInputStatus();\n\t\t\t}\n\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(col, row));\n\n\t\t\tconst { col: selCol, row: selRow } = this[_].selection.select;\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.EDITABLEINPUT_CELL, { col: selCol, row: selRow });\n\n\t\t\tconst editMode = array.findIndex(results, v => !!v) >= 0;\n\t\t\tthis[_].focusControl.editMode = editMode;\n\n\t\t\tif (editMode) {\n\t\t\t\tthis[_].focusControl.storeInputStatus();\n\t\t\t\tthis[_].focusControl.setDefaultInputStatus();\n\t\t\t\tthis.fireListeners(EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, { col: selCol, row: selRow, input: this[_].focusControl.input });\n\t\t\t}\n\n\t\t\t// Failure occurs in IE if focus is not last\n\t\t\tthis[_].focusControl.focus();\n\t\t}\n\t\tinvalidateCell(col, row) {\n\t\t\tthis.invalidateGridRect(col, row);\n\t\t}\n\t\tinvalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\n\t\t\tconst offset = this.getOffsetInvalidateCells();\n\t\t\tif (offset > 0) {\n\t\t\t\tstartCol -= offset;\n\t\t\t\tstartRow -= offset;\n\t\t\t\tendCol += offset;\n\t\t\t\tendRow += offset;\n\t\t\t}\n\n\t\t\tconst visibleRect = _getVisibleRect(this);\n\t\t\tconst cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\n\t\t\tconst invalidateTarget = visibleRect.intersection(cellsRect);\n\t\t\tif (invalidateTarget) {\n\n\t\t\t\tif (this[_].frozenColCount > 0 && endCol >= this[_].frozenColCount) {\n\t\t\t\t\tconst frozenRect = _getFrozenColsRect(this);\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\n\t\t\t\t\t\tinvalidateTarget.left = Math.min(frozenRect.right - 1, frozenRect.right);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this[_].frozenRowCount > 0 && endRow >= this[_].frozenRowCount) {\n\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(this);\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\n\t\t\t\t\t\tinvalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_invalidateRect(this, invalidateTarget);\n\t\t\t}\n\t\t}\n\t\tinvalidate() {\n\t\t\tconst visibleRect = _getVisibleRect(this);\n\t\t\t_invalidateRect(this, visibleRect);\n\t\t}\n\t\t/**\r\n   * get cell value at copy action\r\n   * <p>\r\n   * Please implement\r\n   * </p>\r\n   *\r\n   * @protected\r\n   * @param  {number} col Column index of cell.\r\n   * @param  {number} row Row index of cell.\r\n   * @return {string}\r\n   */\n\t\tgetCopyCellValue(col, row) {}\n\t\t//Please implement get cell value!!\n\n\t\t/**\r\n   * Draw a cell\r\n   * <p>\r\n   * Please implement cell drawing.\r\n   * </p>\r\n   *\r\n   * @protected\r\n   * @param  {number} col Column index of cell.\r\n   * @param  {number} row Row index of cell.\r\n   * @param  {DrawCellContext} context context of cell drawing.\r\n   * @return {void}\r\n   */\n\t\tonDrawCell(col, row, context) {\n\t\t\t//Please implement cell drawing!!\n\t\t}\n\t\taddDisposable(disposable) {\n\t\t\tif (!disposable || !disposable.dispose || typeof disposable.dispose !== 'function') {\n\t\t\t\tthrow new Error('not disposable!');\n\t\t\t}\n\t\t\tconst disposables = this[_].disposables = this[_].disposables || [];\n\t\t\tdisposables.push(disposable);\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t\tthis[_].handler.dispose();\n\t\t\tthis[_].scrollable.dispose();\n\t\t\tthis[_].focusControl.dispose();\n\t\t\tthis[_].columnResizer.dispose();\n\t\t\tthis[_].cellSelector.dispose();\n\t\t\tif (this[_].disposables) {\n\t\t\t\tthis[_].disposables.forEach(disposable => disposable.dispose());\n\t\t\t\tthis[_].disposables = null;\n\t\t\t}\n\n\t\t\tconst { parentElement } = this[_].element;\n\t\t\tif (parentElement) {\n\t\t\t\tparentElement.removeChild(this[_].element);\n\t\t\t}\n\t\t}\n\t\tgetAttachCellArea(col, row) {\n\t\t\treturn {\n\t\t\t\telement: this.getElement(),\n\t\t\t\trect: _toRelativeRect(this, this.getCellRect(col, row))\n\t\t\t};\n\t\t}\n\t\tbindEventsInternal() {\n\t\t\t//nop\n\t\t}\n\t\tgetTargetRowAtInternal(absoluteY) {\n\t\t\t// \n\t\t}\n\t\tgetRowsHeightInternal(startRow, endRow) {\n\t\t\t// \n\t\t}\n\t\tgetRowHeightInternal(row) {\n\t\t\t// \n\t\t}\n\t\tgetScrollHeightInternal(row) {\n\t\t\t// \n\t\t}\n\t\tgetMoveLeftColByKeyDownInternal({ col, row }) {\n\t\t\treturn col - 1;\n\t\t}\n\t\tgetMoveRightColByKeyDownInternal({ col, row }) {\n\t\t\treturn col + 1;\n\t\t}\n\t\tgetMoveUpRowByKeyDownInternal({ col, row }) {\n\t\t\treturn row - 1;\n\t\t}\n\t\tgetMoveDownRowByKeyDownInternal({ col, row }) {\n\t\t\treturn row + 1;\n\t\t}\n\t\tgetOffsetInvalidateCells() {\n\t\t\treturn 0;\n\t\t}\n\t\t_getInitContext() {\n\t\t\tconst ctx = this[_].context;\n\t\t\t//\n\t\t\tctx.fillStyle = 'white';\n\t\t\tctx.strokeStyle = 'black';\n\t\t\tctx.textAlign = 'left';\n\t\t\tctx.textBaseline = 'top';\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.font = this.font || '16px sans-serif';\n\t\t\treturn ctx;\n\t\t}\n\t}\n\n\tmodule.exports = DrawGrid;\n}\n\n/***/ }),\n\n/***/ \"./core/EventTarget.js\":\n/*!*****************************!*\\\n  !*** ./core/EventTarget.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { isDef, obj: { each } } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\t//private symbol\n\tconst { _ } = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\").get();\n\n\tlet nextId = 1;\n\t/**\r\n  * event target.\r\n  */\n\tclass EventTarget {\n\t\tconstructor() {\n\t\t\tthis[_] = {};\n\t\t\tthis[_].listeners = {};\n\t\t\tthis[_].listenerData = {};\n\t\t}\n\t\t/**\r\n   * Adds an event listener.\r\n   * @param  {string} type The event type id.\r\n   * @param  {function} listener Callback method.\r\n   * @return {number} unique id for the listener.\r\n   */\n\t\tlisten(type, listener) {\n\t\t\tconst list = this[_].listeners[type] || (this[_].listeners[type] = []);\n\t\t\tlist.push(listener);\n\n\t\t\tconst id = nextId++;\n\t\t\tthis[_].listenerData[id] = {\n\t\t\t\ttype,\n\t\t\t\tlistener,\n\t\t\t\tremove: () => {\n\t\t\t\t\tdelete this[_].listenerData[id];\n\t\t\t\t\tconst index = list.indexOf(listener);\n\t\t\t\t\tlist.splice(index, 1);\n\t\t\t\t\tif (!this[_].listeners[type].length) {\n\t\t\t\t\t\tdelete this[_].listeners[type];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn id;\n\t\t}\n\t\t/**\r\n   * Removes an event listener which was added with listen() by the id returned by listen().\r\n   * @param  {number} id the id returned by listen().\r\n   * @return {void}\r\n   */\n\t\tunlisten(id) {\n\t\t\tthis[_].listenerData[id].remove();\n\t\t}\n\t\taddEventListener(type, listener) {\n\t\t\tthis.listen(type, listener);\n\t\t}\n\t\tremoveEventListener(type, listener) {\n\t\t\teach(this[_].listenerData, (obj, id) => {\n\t\t\t\tif (obj.type === type && obj.listener === listener) {\n\t\t\t\t\tthis.unlisten(id);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thasListeners(type) {\n\t\t\treturn !!this[_].listeners[type];\n\t\t}\n\t\t/**\r\n   * Fires all registered listeners\r\n   * @param  {string}    type The type of the listeners to fire.\r\n   * @param  {...*} args fire arguments\r\n   * @return {*} the result of the last listener\r\n   */\n\t\tfireListeners(type, ...args) {\n\t\t\tconst list = this[_].listeners[type];\n\t\t\tif (!list) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn list.map(listener => listener.call(this, ...args)).filter(isDef);\n\t\t}\n\t\tdispose() {\n\t\t\tdelete this[_];\n\t\t}\n\t}\n\n\tmodule.exports = EventTarget;\n}\n\n/***/ }),\n\n/***/ \"./data.js\":\n/*!*****************!*\\\n  !*** ./data.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst DataSource = __webpack_require__(/*! ./data/DataSource */ \"./data/DataSource.js\");\n\tconst CachedDataSource = __webpack_require__(/*! ./data/CachedDataSource */ \"./data/CachedDataSource.js\");\n\n\t/**\r\n  * data modules\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.data\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tDataSource,\n\t\tCachedDataSource\n\t};\n}\n\n/***/ }),\n\n/***/ \"./data/CachedDataSource.js\":\n/*!**********************************!*\\\n  !*** ./data/CachedDataSource.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { getChainSafe } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\tconst DataSource = __webpack_require__(/*! ./DataSource */ \"./data/DataSource.js\");\n\n\tfunction _setFieldCache({ _fCache }, index, field, value) {\n\t\tconst recCache = _fCache[index] || (_fCache[index] = {});\n\t\trecCache[field] = value;\n\t}\n\t/**\r\n  * grid data source\r\n  *\r\n  * @classdesc cheetahGrid.data.CachedDataSource\r\n  * @extends cheetahGrid.data.DataSource\r\n  * @memberof cheetahGrid.data\r\n  */\n\tclass CachedDataSource extends DataSource {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn DataSource.EVENT_TYPE;\n\t\t}\n\t\tstatic ofArray(array) {\n\t\t\treturn new CachedDataSource({\n\t\t\t\tget: index => array[index],\n\t\t\t\tlength: array.length\n\t\t\t});\n\t\t}\n\t\tconstructor(opt = {}) {\n\t\t\tsuper(opt);\n\t\t\tthis._rCache = {};\n\t\t\tthis._fCache = {};\n\t\t}\n\t\tgetOriginal(index) {\n\t\t\tif (this._rCache && this._rCache[index]) {\n\t\t\t\treturn this._rCache[index];\n\t\t\t}\n\t\t\treturn super.getOriginal(index);\n\t\t}\n\t\tgetOriginalField(index, field) {\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\n\t\t\tif (cache) {\n\t\t\t\treturn cache;\n\t\t\t}\n\t\t\treturn super.getOriginalField(index, field);\n\t\t}\n\t\tsetOriginalField(index, field, value) {\n\t\t\tconst fCache = this._fCache;\n\t\t\tif (fCache && fCache[index]) {\n\t\t\t\tdelete fCache[index]; // clear row cache\n\t\t\t}\n\t\t\treturn super.setOriginalField(index, field, value);\n\t\t}\n\t\tclearCache() {\n\t\t\tif (this._rCache) {\n\t\t\t\tthis._rCache = {};\n\t\t\t}\n\t\t\tif (this._fCache) {\n\t\t\t\tthis._fCache = {};\n\t\t\t}\n\t\t}\n\t\tfieldPromiseCallBackInternal(index, field, val) {\n\t\t\t_setFieldCache(this, index, field, val);\n\t\t}\n\t\trecordPromiseCallBackInternal(index, val) {\n\t\t\tthis._rCache[index] = val;\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t}\n\t}\n\n\tmodule.exports = CachedDataSource;\n}\n\n/***/ }),\n\n/***/ \"./data/DataSource.js\":\n/*!****************************!*\\\n  !*** ./data/DataSource.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { array, isDef, isPromise, getOrApply, applyChainSafe, emptyFn } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\tconst sort = __webpack_require__(/*! ../internal/sort */ \"./internal/sort.js\");\n\tconst EventTarget = __webpack_require__(/*! ../core/EventTarget */ \"./core/EventTarget.js\");\n\n\tconst EVENT_TYPE = {\n\t\tUPDATE_LENGTH: 'update_length',\n\t\tUPDATED_LENGTH: 'updated_length',\n\t\tUPDATED_ORDER: 'updated_order'\n\t};\n\n\tfunction getValue(value, setPromiseBack) {\n\t\tvalue = getOrApply(value);\n\t\tif (isPromise(value)) {\n\t\t\tvalue = value.then(r => {\n\t\t\t\tif (!isPromise(r)) {\n\t\t\t\t\tsetPromiseBack(r);\n\t\t\t\t}\n\t\t\t\treturn getValue(r, setPromiseBack);\n\t\t\t});\n\t\t\t//\n\t\t\tsetPromiseBack(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction getField(record, field, setPromiseBack) {\n\t\tif (!isDef(record)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (isPromise(record)) {\n\t\t\treturn record.then(r => getField(r, field, setPromiseBack));\n\t\t}\n\t\tif (field in record) {\n\t\t\treturn getValue(record[field], setPromiseBack);\n\t\t}\n\t\tif (typeof field === 'function') {\n\t\t\treturn getValue(field(record), setPromiseBack);\n\t\t}\n\n\t\tconst ss = (field + '').split('.');\n\t\tif (ss.length <= 1) {\n\t\t\treturn getValue(record[field], setPromiseBack);\n\t\t}\n\t\treturn getValue(applyChainSafe(record, (val, name) => getField(val, name, emptyFn), ...ss), setPromiseBack);\n\t}\n\tfunction setField(record, field, value) {\n\t\tif (field in record) {\n\t\t\trecord[field] = value;\n\t\t} else if (typeof field === 'function') {\n\t\t\treturn field(record, value);\n\t\t} else if (typeof field === 'string') {\n\t\t\tconst ss = (field + '').split('.');\n\t\t\tlet obj = record;\n\t\t\tconst { length } = ss;\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst f = ss[i];\n\t\t\t\tif (i === length - 1) {\n\t\t\t\t\tobj[f] = value;\n\t\t\t\t} else {\n\t\t\t\t\tobj = obj[f] || (obj[f] = {});\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\trecord[field] = value;\n\t\t}\n\t\treturn true;\n\t}\n\tfunction _getIndex(dataSource, index) {\n\t\tif (!dataSource._sortedIndexMap) {\n\t\t\treturn index;\n\t\t}\n\t\tconst mapIndex = dataSource._sortedIndexMap[index];\n\t\treturn isDef(mapIndex) ? mapIndex : index;\n\t}\n\n\t/**\r\n  * grid data source\r\n  *\r\n  * @classdesc cheetahGrid.data.DataSource\r\n  * @extends EventTarget\r\n  * @memberof cheetahGrid.data\r\n  */\n\tclass DataSource extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\tstatic ofArray(array) {\n\t\t\treturn new DataSource({\n\t\t\t\tget: index => array[index],\n\t\t\t\tlength: array.length\n\t\t\t});\n\t\t}\n\t\tconstructor({ get, length = 0 } = {}) {\n\t\t\tsuper();\n\t\t\tthis._get = get;\n\t\t\tthis._length = length;\n\t\t\tthis._sortedIndexMap = false;\n\t\t}\n\t\tget(index) {\n\t\t\treturn this.getOriginal(_getIndex(this, index));\n\t\t}\n\t\tgetField(index, field) {\n\t\t\treturn this.getOriginalField(_getIndex(this, index), field);\n\t\t}\n\t\thasField(index, field) {\n\t\t\treturn this.hasOriginalField(_getIndex(this, index), field);\n\t\t}\n\t\tsetField(index, field, value) {\n\t\t\treturn this.setOriginalField(_getIndex(this, index), field, value);\n\t\t}\n\t\tsort(field, order) {\n\t\t\tconst sortedIndexMap = new Array(this._length);\n\n\t\t\tconst orderFn = order !== 'desc' ? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1 : (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\n\n\t\t\treturn sort.sortPromise(index => isDef(sortedIndexMap[index]) ? sortedIndexMap[index] : sortedIndexMap[index] = index, (index, rel) => {\n\t\t\t\tsortedIndexMap[index] = rel;\n\t\t\t}, this._length, orderFn, index => this.getOriginalField(index, field)).then(() => {\n\t\t\t\tthis._sortedIndexMap = sortedIndexMap;\n\t\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_ORDER);\n\t\t\t});\n\t\t}\n\t\tget length() {\n\t\t\treturn this._length;\n\t\t}\n\t\tset length(length) {\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\n\t\t\tif (array.findIndex(results, v => !v) >= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._length = length;\n\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t}\n\t\tgetOriginal(index) {\n\t\t\treturn getValue(this._get(index), val => {\n\t\t\t\tthis.recordPromiseCallBackInternal(index, val);\n\t\t\t});\n\t\t}\n\t\tgetOriginalField(index, field) {\n\t\t\tif (!isDef(field)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst record = this.getOriginal(index);\n\t\t\treturn getField(record, field, val => {\n\t\t\t\tthis.fieldPromiseCallBackInternal(index, field, val);\n\t\t\t});\n\t\t}\n\t\thasOriginalField(index, field) {\n\t\t\tif (!isDef(field)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (typeof field === 'function') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst record = this.getOriginal(index);\n\t\t\treturn field in record;\n\t\t}\n\t\tsetOriginalField(index, field, value) {\n\t\t\tif (!isDef(field)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst record = this.getOriginal(index);\n\t\t\treturn setField(record, field, value);\n\t\t}\n\t\tfieldPromiseCallBackInternal(index, field, val) {\n\t\t\t//\n\t\t}\n\t\trecordPromiseCallBackInternal(index, val) {\n\t\t\t//\n\t\t}\n\t}\n\tDataSource.EMPTY = new DataSource({\n\t\tlength: 0\n\t});\n\n\tmodule.exports = DataSource;\n}\n\n/***/ }),\n\n/***/ \"./element/Inline.js\":\n/*!***************************!*\\\n  !*** ./element/Inline.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { isDef } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\nclass Inline {\n\tconstructor(content) {\n\t\tthis._content = isDef(content) ? content : '';\n\t}\n\twidth({ ctx }) {\n\t\treturn ctx.measureText(this._content).width;\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn null;\n\t}\n\tcanDraw() {\n\t\treturn true;\n\t}\n\tonReady(fn) {}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\tcanvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\n\t\t\toffset: offset + 1,\n\t\t\tpadding: {\n\t\t\t\tleft: offsetLeft,\n\t\t\t\tright: offsetRight\n\t\t\t}\n\t\t});\n\t}\n}\nmodule.exports = Inline;\n\n/***/ }),\n\n/***/ \"./element/InlineDrawer.js\":\n/*!*********************************!*\\\n  !*** ./element/InlineDrawer.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nclass InlineDrawer extends Inline {\n\tconstructor({\n\t\tdraw,\n\t\twidth,\n\t\theight,\n\t\tcolor\n\t}) {\n\t\tsuper();\n\n\t\tthis._draw = draw;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._color = color;\n\t}\n\twidth({ ctx }) {\n\t\treturn this._width;\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn this._color;\n\t}\n\tcanDraw() {\n\t\treturn true;\n\t}\n\tonReady(callback) {}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\tthis._draw({\n\t\t\tctx,\n\t\t\tcanvashelper,\n\t\t\trect,\n\t\t\toffset,\n\t\t\toffsetLeft,\n\t\t\toffsetRight\n\t\t});\n\t}\n}\n\nmodule.exports = InlineDrawer;\n\n/***/ }),\n\n/***/ \"./element/InlineIcon.js\":\n/*!*******************************!*\\\n  !*** ./element/InlineIcon.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst fonts = __webpack_require__(/*! ../internal/fonts */ \"./internal/fonts.js\");\n\nclass InlineIcon extends Inline {\n\tconstructor(icon) {\n\t\tsuper();\n\t\tthis._icon = icon || {};\n\t}\n\twidth({ ctx }) {\n\t\tconst icon = this._icon;\n\t\tif (icon.width) {\n\t\t\treturn icon.width;\n\t\t}\n\t\tif (icon.font && fonts.check(icon.font, icon.content)) {\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.font = icon.font || ctx.font;\n\t\t\t\treturn ctx.measureText(icon.content).width;\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tfont() {\n\t\treturn this._icon.font;\n\t}\n\tcolor() {\n\t\treturn this._icon.color;\n\t}\n\tcanDraw() {\n\t\tconst icon = this._icon;\n\t\treturn icon.font ? fonts.check(icon.font, icon.content) : true;\n\t}\n\tonReady(callback) {\n\t\tconst icon = this._icon;\n\t\tif (icon.font && !fonts.check(icon.font, icon.content)) {\n\t\t\tfonts.load(icon.font, icon.content, callback);\n\t\t}\n\t}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\tconst icon = this._icon;\n\t\tif (icon.content) {\n\t\t\tcanvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\n\t\t\t\toffset: offset + 1,\n\t\t\t\tpadding: {\n\t\t\t\t\tleft: offsetLeft,\n\t\t\t\t\tright: offsetRight\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nmodule.exports = InlineIcon;\n\n/***/ }),\n\n/***/ \"./element/InlineImage.js\":\n/*!********************************!*\\\n  !*** ./element/InlineImage.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst { getCacheOrLoad } = __webpack_require__(/*! ../internal/imgs */ \"./internal/imgs.js\");\nconst { isPromise } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nclass InlineImage extends Inline {\n\tconstructor({\n\t\tsrc,\n\t\twidth,\n\t\theight,\n\t\timageLeft,\n\t\timageTop,\n\t\timageWidth,\n\t\timageHeight\n\t}) {\n\t\tsuper();\n\t\tthis._src = src;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._imageLeft = imageLeft;\n\t\tthis._imageTop = imageTop;\n\t\tthis._imageWidth = imageWidth;\n\t\tthis._imageHeight = imageHeight;\n\n\t\tthis._onloaded = [];\n\n\t\tthis._loaded = false;\n\t\tif (isPromise(src)) {\n\t\t\tsrc.then(s => {\n\t\t\t\tthis._src = s;\n\t\t\t\tthis._loadImage(s);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._loadImage(src);\n\t\t}\n\t}\n\t_loadImage(src) {\n\t\tconst img = this._inlineImg = getCacheOrLoad('InlineImage', 50, src);\n\t\tif (isPromise(img)) {\n\t\t\timg.then(i => {\n\t\t\t\tthis._loaded = true;\n\t\t\t\tthis._inlineImg = i;\n\n\t\t\t\tthis._onloaded.forEach(fn => fn());\n\t\t\t});\n\t\t} else {\n\t\t\tthis._loaded = true;\n\t\t}\n\t}\n\twidth({ ctx }) {\n\t\treturn this._width || (this._loaded ? this._inlineImg.width : 0);\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn null;\n\t}\n\tcanDraw() {\n\t\treturn this._loaded;\n\t}\n\tonReady(callback) {\n\t\tif (isPromise(this._src) || isPromise(this._inlineImg)) {\n\t\t\tthis._onloaded.push(() => callback());\n\t\t}\n\t}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\tconst img = this._inlineImg;\n\t\tcanvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\n\t\t\toffset: offset + 1,\n\t\t\tpadding: {\n\t\t\t\tleft: offsetLeft,\n\t\t\t\tright: offsetRight\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = InlineImage;\n\n/***/ }),\n\n/***/ \"./element/InlinePath2D.js\":\n/*!*********************************!*\\\n  !*** ./element/InlinePath2D.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst { calcStartPosition } = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\nconst path2DManager = __webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\");\n\nclass InlinePath2D extends Inline {\n\tconstructor({\n\t\tpath,\n\t\twidth,\n\t\theight,\n\t\tcolor\n\t}) {\n\t\tsuper();\n\t\t// IEPath2Dpolyfill\n\t\tthis._path = new path2DManager.Path2D(path);\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._color = color;\n\t}\n\twidth({ ctx }) {\n\t\treturn this._width;\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn this._color;\n\t}\n\tcanDraw() {\n\t\treturn true;\n\t}\n\tonReady(callback) {}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight\n\t}) {\n\t\toffset++;\n\t\tconst padding = {\n\t\t\tleft: offsetLeft,\n\t\t\tright: offsetRight\n\t\t};\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t//clip\n\t\t\tctx.clip();\n\n\t\t\t//\n\t\t\tconst pos = calcStartPosition(ctx, rect, this._width, this._height, {\n\t\t\t\toffset,\n\t\t\t\tpadding\n\t\t\t});\n\t\t\tctx.translate(pos.x, pos.y);\n\t\t\tctx.fill(this._path);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n}\n\nmodule.exports = InlinePath2D;\n\n/***/ }),\n\n/***/ \"./element/InlineSvg.js\":\n/*!******************************!*\\\n  !*** ./element/InlineSvg.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst InlineImage = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\nconst { then } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nfunction buildSvgDataUrl(svg) {\n\tconst data = typeof svg === 'string' ? svg : new XMLSerializer().serializeToString(svg);\n\tconst url = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(data); //svgbase64\n\treturn url;\n}\nfunction getSvgElement(svg) {\n\tif (typeof svg === 'string') {\n\t\tconst parser = new DOMParser();\n\t\treturn parser.parseFromString(svg, 'image/svg+xml');\n\t} else {\n\t\treturn svg;\n\t}\n}\n\nclass InlineSvg extends InlineImage {\n\tconstructor({\n\t\tsvg,\n\t\twidth,\n\t\theight,\n\t\timageLeft,\n\t\timageTop,\n\t\timageWidth,\n\t\timageHeight\n\t}) {\n\t\tconst svgElem = then(svg, getSvgElement);\n\t\tconst elmWidth = svgElem.getAttribute ? svgElem.getAttribute('width') : null;\n\t\tconst elmHeight = svgElem.getAttribute ? svgElem.getAttribute('height') : null;\n\t\tsuper({\n\t\t\tsrc: then(svg, buildSvgDataUrl),\n\t\t\twidth: width || elmWidth,\n\t\t\theight: height || elmHeight,\n\t\t\timageWidth: elmWidth,\n\t\t\timageHeight: elmHeight\n\t\t});\n\t}\n}\n\nmodule.exports = InlineSvg;\n\n/***/ }),\n\n/***/ \"./element/inlines.js\":\n/*!****************************!*\\\n  !*** ./element/inlines.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst InlineIcon = __webpack_require__(/*! ./InlineIcon */ \"./element/InlineIcon.js\");\nconst InlineImage = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\nconst InlineSvg = __webpack_require__(/*! ./InlineSvg */ \"./element/InlineSvg.js\");\nconst InlineDrawer = __webpack_require__(/*! ./InlineDrawer */ \"./element/InlineDrawer.js\");\nconst InlinePath2D = __webpack_require__(/*! ./InlinePath2D */ \"./element/InlinePath2D.js\");\nconst { isDef } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\nconst { calcStartPosition } = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\nconst icons = __webpack_require__(/*! ../icons */ \"./icons.js\");\nconst path2DManager = __webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\");\n\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, {\n\toffset = 2,\n\tpadding\n} = {}) {\n\tconst rect = {\n\t\tleft,\n\t\ttop,\n\t\twidth,\n\t\theight,\n\t\tright: left + width,\n\t\tbottom: top + height\n\t};\n\tctx.save();\n\ttry {\n\t\tctx.beginPath();\n\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t//clip\n\t\tctx.clip();\n\n\t\t//\n\t\tconst pos = calcStartPosition(ctx, rect, drawWidth, drawHeight, {\n\t\t\toffset,\n\t\t\tpadding\n\t\t});\n\t\tpath2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\n\t} finally {\n\t\tctx.restore();\n\t}\n}\n\nmodule.exports = {\n\ticonOf(icon) {\n\t\tif (icon instanceof Inline) {\n\t\t\treturn icon;\n\t\t}\n\t\tif (!icon) {\n\t\t\treturn null;\n\t\t}\n\t\tif (icon.font && icon.content) {\n\t\t\treturn new InlineIcon(icon);\n\t\t}\n\t\tif (icon.src) {\n\t\t\treturn new InlineImage({\n\t\t\t\tsrc: icon.src,\n\t\t\t\twidth: icon.width,\n\t\t\t\theight: icon.width\n\t\t\t});\n\t\t}\n\t\tif (icon.svg) {\n\t\t\treturn new InlineSvg({\n\t\t\t\tsvg: icon.svg,\n\t\t\t\twidth: icon.width,\n\t\t\t\theight: icon.width\n\t\t\t});\n\t\t}\n\t\tif (icon.path) {\n\t\t\treturn new InlinePath2D({\n\t\t\t\tpath: icon.path,\n\t\t\t\twidth: icon.width,\n\t\t\t\theight: icon.width,\n\t\t\t\tcolor: icon.color\n\t\t\t});\n\t\t}\n\t\tconst regedIcons = icons.get();\n\t\tif (icon.name && regedIcons[icon.name]) {\n\t\t\tconst regedIcon = regedIcons[icon.name];\n\t\t\tconst width = icon.width || Math.max(regedIcon.width, regedIcon.height);\n\t\t\treturn new InlineDrawer({\n\t\t\t\tdraw({\n\t\t\t\t\tctx,\n\t\t\t\t\tcanvashelper,\n\t\t\t\t\trect,\n\t\t\t\t\toffset,\n\t\t\t\t\toffsetLeft,\n\t\t\t\t\toffsetRight\n\t\t\t\t}) {\n\t\t\t\t\tdrawRegisteredIcon(ctx, regedIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\n\t\t\t\t\t\toffset: offset + 1,\n\t\t\t\t\t\tpadding: {\n\t\t\t\t\t\t\tleft: offsetLeft,\n\t\t\t\t\t\t\tright: offsetRight\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\twidth,\n\t\t\t\theight: width,\n\t\t\t\tcolor: icon.color\n\t\t\t});\n\t\t}\n\t\treturn new InlineIcon(icon);\n\t},\n\tof(content) {\n\t\tif (!isDef(content)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (content instanceof Inline) {\n\t\t\treturn content;\n\t\t}\n\t\treturn new Inline(content);\n\t},\n\tbuildInlines(icons, inline) {\n\t\tconst result = [];\n\t\tif (icons) {\n\t\t\tresult.push(...icons.map(icon => this.iconOf(icon)).filter(e => !!e));\n\t\t}\n\t\tif (__webpack_provided_Array_dot_isArray(inline) && inline.filter(il => il instanceof Inline).length) {\n\t\t\tresult.push(...inline.map(il => this.of(il)).filter(e => !!e));\n\t\t} else {\n\t\t\tconst il = this.of(inline);\n\t\t\tif (il) {\n\t\t\t\tresult.push(il);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./header/style.js\":\n/*!*************************!*\\\n  !*** ./header/style.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./style/BaseStyle */ \"./header/style/BaseStyle.js\");\n\tconst Style = __webpack_require__(/*! ./style/Style */ \"./header/style/Style.js\");\n\n\tconst style = {\n\t\tget BaseStyle() {\n\t\t\treturn BaseStyle;\n\t\t},\n\t\tget Style() {\n\t\t\treturn Style;\n\t\t},\n\t\tof(columnStyle, StyleClass) {\n\t\t\tif (columnStyle) {\n\t\t\t\tif (columnStyle instanceof Style) {\n\t\t\t\t\treturn columnStyle;\n\t\t\t\t} else if (typeof columnStyle === 'function') {\n\t\t\t\t\treturn style.of(columnStyle(), StyleClass);\n\t\t\t\t}\n\t\t\t\treturn new StyleClass(columnStyle);\n\t\t\t} else {\n\t\t\t\treturn StyleClass.DEFAULT;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = style;\n}\n\n/***/ }),\n\n/***/ \"./header/style/BaseStyle.js\":\n/*!***********************************!*\\\n  !*** ./header/style/BaseStyle.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst EventTarget = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\n\tconst EVENT_TYPE = {\n\t\tCHANGE_STYLE: 'change_style'\n\t};\n\n\tlet defaultStyle;\n\tclass BaseStyle extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n\t\t}\n\t\tconstructor({\n\t\t\ttextAlign = 'left',\n\t\t\ttextBaseline = 'middle',\n\t\t\tbgColor\n\t\t} = {}) {\n\t\t\tsuper();\n\t\t\tthis._textAlign = textAlign;\n\t\t\tthis._textBaseline = textBaseline;\n\t\t\tthis._bgColor = bgColor;\n\t\t}\n\t\tget textAlign() {\n\t\t\treturn this._textAlign;\n\t\t}\n\t\tset textAlign(textAlign) {\n\t\t\tthis._textAlign = textAlign;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget textBaseline() {\n\t\t\treturn this._textBaseline;\n\t\t}\n\t\tset textBaseline(textBaseline) {\n\t\t\tthis._textBaseline = textBaseline;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget bgColor() {\n\t\t\treturn this._bgColor;\n\t\t}\n\t\tset bgColor(bgColor) {\n\t\t\tthis._bgColor = bgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tdoChangeStyle() {\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseStyle(this);\n\t\t}\n\t}\n\tmodule.exports = BaseStyle;\n}\n\n/***/ }),\n\n/***/ \"./header/style/Style.js\":\n/*!*******************************!*\\\n  !*** ./header/style/Style.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./BaseStyle */ \"./header/style/BaseStyle.js\");\n\tlet defaultStyle;\n\tclass Style extends BaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new Style();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._color = style.color;\n\t\t}\n\t\tget color() {\n\t\t\treturn this._color;\n\t\t}\n\t\tset color(color) {\n\t\t\tthis._color = color;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new Style(this);\n\t\t}\n\t}\n\tmodule.exports = Style;\n}\n\n/***/ }),\n\n/***/ \"./header/type.js\":\n/*!************************!*\\\n  !*** ./header/type.js ***!\n  \\************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Header = __webpack_require__(/*! ./type/Header */ \"./header/type/Header.js\");\n\tconst SortHeader = __webpack_require__(/*! ./type/SortHeader */ \"./header/type/SortHeader.js\");\n\n\tconst type = {\n\t\tcreate(headerCell) {\n\t\t\tif (headerCell.sort) {\n\t\t\t\treturn new SortHeader(headerCell);\n\t\t\t}\n\t\t\treturn new Header(headerCell);\n\t\t}\n\t};\n\tmodule.exports = type;\n}\n\n/***/ }),\n\n/***/ \"./header/type/BaseHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/BaseHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./header/style.js\");\n\tconst { Style } = styleContents;\n\n\tclass BaseHeader {\n\t\tconstructor(headerCell) {\n\t\t\tthis._headerCell = headerCell;\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this); //\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tonDrawCell(cellValue, info, context, grid) {\n\t\t\tconst { style, drawCellBase } = info;\n\t\t\tdelete info.getRecord;\n\t\t\tdelete info.style;\n\t\t\tconst helper = grid.getGridCanvasHelper();\n\t\t\tdrawCellBase();\n\t\t\t//\n\t\t\tthis.drawInternal(cellValue, context, styleContents.of(style, this.StyleClass), helper, grid, info);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {}\n\t\tbindGridEvent(grid) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = BaseHeader;\n}\n\n/***/ }),\n\n/***/ \"./header/type/Header.js\":\n/*!*******************************!*\\\n  !*** ./header/type/Header.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./header/style.js\");\n\tconst { Style } = styleContents;\n\tconst BaseHeader = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\n\tclass Header extends BaseHeader {\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\tbgColor\n\t\t\t} = style;\n\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thelper.text(value, context, {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont\n\t\t\t});\n\t\t}\n\t\tbindGridEvent(grid) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = Header;\n}\n\n/***/ }),\n\n/***/ \"./header/type/SortHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/SortHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./header/style.js\");\n\tconst { Style } = styleContents;\n\tconst BaseHeader = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\tconst { isDef } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst { EVENT_TYPE: {\n\t\t\tCLICK_CELL,\n\t\t\tMOUSEOVER_CELL,\n\t\t\tMOUSEOUT_CELL,\n\t\t\tMOUSEMOVE_CELL\n\t\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\n\n\tclass SortHeader extends BaseHeader {\n\t\tconstructor(headerCell) {\n\t\t\tsuper(headerCell);\n\t\t\tthis._sort = headerCell.sort;\n\t\t\tthis._range = headerCell.range;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline = 'middle',\n\t\t\t\tcolor,\n\t\t\t\tbgColor,\n\t\t\t\tfont\n\t\t\t} = style;\n\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst state = grid.sortState;\n\t\t\tlet order = undefined;\n\t\t\tif (this._range.isCellInRange(state.col, this._range.startRow)) {\n\t\t\t\torder = state.order;\n\t\t\t}\n\n\t\t\tconst ctx = context.getContext();\n\t\t\tconst arrowSize = ctx.measureText('').width * 1.2;\n\n\t\t\thelper.text(value, context, {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\ticons: [{\n\t\t\t\t\tname: isDef(order) ? order === 'asc' ? 'arrow_downward' : 'arrow_upward' : null,\n\t\t\t\t\twidth: arrowSize,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.38)'\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\t\t_executeSort(newState, grid) {\n\t\t\tif (typeof this._sort === 'function') {\n\t\t\t\tthis._sort(newState.order, newState.col, grid);\n\t\t\t} else {\n\t\t\t\tgrid.dataSource.sort(grid.getField(newState.col), newState.order);\n\t\t\t}\n\t\t}\n\t\tbindGridEvent(grid) {\n\t\t\treturn [grid.listen(CLICK_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst state = grid.sortState;\n\t\t\t\tlet newState;\n\t\t\t\tif (this._range.isCellInRange(state.col, e.row)) {\n\t\t\t\t\tnewState = {\n\t\t\t\t\t\tcol: this._range.startCol,\n\t\t\t\t\t\torder: state.order === 'asc' ? 'desc' : 'asc'\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tnewState = {\n\t\t\t\t\t\tcol: this._range.startCol,\n\t\t\t\t\t\torder: 'asc'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tgrid.sortState = newState;\n\t\t\t\tthis._executeSort(newState, grid);\n\t\t\t\tgrid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\n\t\t\t}),\n\t\t\t// mouse move\n\t\t\tgrid.listen(MOUSEOVER_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t\t}),\n\t\t\t//MOUSEENTER'col-resize'move\n\t\t\tgrid.listen(MOUSEMOVE_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!grid.getElement().style.cursor) {\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t\t\t}\n\t\t\t}), grid.listen(MOUSEOUT_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tgrid.getElement().style.cursor = '';\n\t\t\t})];\n\t\t}\n\t}\n\tmodule.exports = SortHeader;\n}\n\n/***/ }),\n\n/***/ \"./icons.js\":\n/*!******************!*\\\n  !*** ./icons.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint-disable camelcase*/\n\n\nconst { extend } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\nconst plugins = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\nconst builtins = {\n\tget arrow_upward() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\n\t},\n\tget arrow_downward() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\n\t},\n\tget edit() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/image/svg/production/ic_edit_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg\");\n\t},\n\tget add() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/content/svg/production/ic_add_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/content/svg/production/ic_add_48px.svg\");\n\t},\n\tget star() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg\");\n\t},\n\tget star_border() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\n\t},\n\tget star_half() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\n\t}\n};\n\nmodule.exports = {\n\tget() {\n\t\treturn extend(builtins, plugins);\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/EventHandler.js\":\n/*!**********************************!*\\\n  !*** ./internal/EventHandler.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { obj: { each } } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\tlet nextId = 1;\n\n\tclass EventHandler {\n\t\tconstructor() {\n\t\t\tthis._listeners = {};\n\t\t}\n\t\ton(target, type, listener, ...options) {\n\t\t\tif (target.addEventListener) {\n\t\t\t\ttarget.addEventListener(type, listener, ...options);\n\t\t\t}\n\t\t\tconst obj = {\n\t\t\t\ttarget, type, listener, options\n\t\t\t};\n\t\t\tconst id = nextId++;\n\t\t\tthis._listeners[id] = obj;\n\t\t\treturn id;\n\t\t}\n\t\ttryWithOffEvents(target, type, call) {\n\t\t\tconst list = [];\n\t\t\ttry {\n\t\t\t\teach(this._listeners, obj => {\n\t\t\t\t\tif (obj.target === target && obj.type === type) {\n\t\t\t\t\t\tif (obj.target.removeEventListener) {\n\t\t\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist.push(obj);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcall();\n\t\t\t} finally {\n\t\t\t\tlist.forEach(obj => {\n\t\t\t\t\tif (obj.target.addEventListener) {\n\t\t\t\t\t\tobj.target.addEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\toff(id) {\n\t\t\tif (!id) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst obj = this._listeners[id];\n\t\t\tif (!obj) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdelete this._listeners[id];\n\t\t\tif (obj.target.removeEventListener) {\n\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t}\n\t\t}\n\t\tfire(target, type, ...args) {\n\t\t\teach(this._listeners, obj => {\n\t\t\t\tif (obj.target === target && obj.type === type) {\n\t\t\t\t\tobj.listener.call(obj.target, ...args);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thasListener(target, type) {\n\t\t\tlet result = false;\n\t\t\teach(this._listeners, obj => {\n\t\t\t\tif (obj.target === target && obj.type === type) {\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\tclear() {\n\t\t\teach(this._listeners, obj => {\n\t\t\t\tif (obj.target.removeEventListener) {\n\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._listeners = {};\n\t\t}\n\t\tdispose() {\n\t\t\tthis.clear();\n\t\t\tthis._listeners = null;\n\t\t}\n\t}\n\n\tmodule.exports = EventHandler;\n}\n\n/***/ }),\n\n/***/ \"./internal/LRUCache.js\":\n/*!******************************!*\\\n  !*** ./internal/LRUCache.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nclass LRUCache {\n\tconstructor(cacheSize) {\n\t\tthis._list = [];\n\t\tthis._map = {};\n\t\tthis._cacheSize = cacheSize || 50;\n\t}\n\tget(key) {\n\t\tconst val = this._map[key];\n\t\tif (val) {\n\t\t\tconst idx = this._list.indexOf(key);\n\t\t\tthis._list.splice(idx, 1);\n\t\t\tthis._list.push(key);\n\t\t}\n\t\treturn val;\n\t}\n\tput(key, value) {\n\t\tif (this._map[key]) {\n\t\t\tconst idx = this._list.indexOf(key);\n\t\t\tthis._list.splice(idx, 1);\n\t\t}\n\t\tthis._map[key] = value;\n\t\tthis._list.push(key);\n\t\tif (this._list.length > this._cacheSize) {\n\t\t\tconst remKey = this._list.shift();\n\t\t\tdelete this._map[remKey];\n\t\t}\n\t}\n}\nmodule.exports = LRUCache;\n\n/***/ }),\n\n/***/ \"./internal/NumberMap.js\":\n/*!*******************************!*\\\n  !*** ./internal/NumberMap.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst indexFirst = (ary, elm) => {\n\t\tlet low = 0;\n\t\tlet high = ary.length - 1;\n\t\twhile (low <= high) {\n\t\t\tconst i = Math.floor((low + high) / 2);\n\t\t\tif (ary[i] === elm) {\n\t\t\t\treturn i;\n\t\t\t} else if (ary[i] > elm) {\n\t\t\t\thigh = i - 1;\n\t\t\t} else {\n\t\t\t\tlow = i + 1;\n\t\t\t}\n\t\t}\n\t\treturn high < 0 ? 0 : high;\n\t};\n\n\tclass NumberMap {\n\t\tconstructor() {\n\t\t\tthis._keys = [];\n\t\t\tthis._vals = {};\n\t\t\tthis._sorted = false;\n\t\t}\n\t\tput(key, value) {\n\t\t\tif (!(key in this._vals)) {\n\t\t\t\tthis._keys.push(key);\n\t\t\t\tthis._sorted = false;\n\t\t\t}\n\t\t\tthis._vals[key] = value;\n\t\t}\n\t\tget(key) {\n\t\t\treturn this._vals[key];\n\t\t}\n\t\teachAll(fn) {\n\t\t\tthis._keys.forEach(key => {\n\t\t\t\tfn(this.get(key), key);\n\t\t\t});\n\t\t}\n\t\teach(keyFrom, keyTo, fn) {\n\t\t\tconst { _keys: keys } = this;\n\t\t\tconst { length } = keys;\n\t\t\tif (!this._sorted) {\n\t\t\t\tkeys.sort((a, b) => {\n\t\t\t\t\tif (a < b) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (a > b) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\t\t\t\tthis._sorted = true;\n\t\t\t}\n\n\t\t\tfor (let i = indexFirst(keys, keyFrom); i < length; i++) {\n\t\t\t\tconst key = keys[i];\n\t\t\t\tif (keyFrom <= key && key <= keyTo) {\n\t\t\t\t\tfn(this.get(key), key);\n\t\t\t\t} else if (keyTo < key) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmodule.exports = NumberMap;\n}\n\n/***/ }),\n\n/***/ \"./internal/Rect.js\":\n/*!**************************!*\\\n  !*** ./internal/Rect.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tclass Rect {\n\t\tconstructor(left, top, width, height) {\n\t\t\tthis._left = left;\n\t\t\tthis._top = top;\n\t\t\tthis._width = width;\n\t\t\tthis._height = height;\n\t\t}\n\t\tstatic bounds(left, top, right, bottom) {\n\t\t\treturn new Rect(left, top, right - left, bottom - top);\n\t\t}\n\t\tstatic max(rect1, rect2) {\n\t\t\treturn Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\n\t\t}\n\t\tget left() {\n\t\t\treturn this._left;\n\t\t}\n\t\tset left(left) {\n\t\t\tconst { right } = this;\n\t\t\tthis._left = left;\n\t\t\tthis.right = right;\n\t\t}\n\t\tget top() {\n\t\t\treturn this._top;\n\t\t}\n\t\tset top(top) {\n\t\t\tconst { bottom } = this;\n\t\t\tthis._top = top;\n\t\t\tthis.bottom = bottom;\n\t\t}\n\t\tget width() {\n\t\t\treturn this._width;\n\t\t}\n\t\tset width(width) {\n\t\t\tthis._width = width;\n\t\t\tthis._right = undefined;\n\t\t}\n\t\tget height() {\n\t\t\treturn this._height;\n\t\t}\n\t\tset height(height) {\n\t\t\tthis._height = height;\n\t\t\tthis._bottom = undefined;\n\t\t}\n\t\tget right() {\n\t\t\treturn this._right !== undefined ? this._right : this._right = this.left + this.width;\n\t\t}\n\t\tset right(right) {\n\t\t\tthis._right = right;\n\t\t\tthis.width = right - this.left;\n\t\t}\n\t\tget bottom() {\n\t\t\treturn this._bottom !== undefined ? this._bottom : this._bottom = this.top + this.height;\n\t\t}\n\t\tset bottom(bottom) {\n\t\t\tthis._bottom = bottom;\n\t\t\tthis.height = bottom - this.top;\n\t\t}\n\t\toffsetLeft(offset) {\n\t\t\tthis._left += offset;\n\t\t\tthis._right = undefined;\n\t\t}\n\t\toffsetTop(offset) {\n\t\t\tthis._top += offset;\n\t\t\tthis._bottom = undefined;\n\t\t}\n\t\tcopy() {\n\t\t\treturn new Rect(this.left, this.top, this.width, this.height);\n\t\t}\n\t\tintersection(rect) {\n\t\t\tconst x0 = Math.max(this.left, rect.left);\n\t\t\tconst x1 = Math.min(this.left + this.width, rect.left + rect.width);\n\t\t\tif (x0 <= x1) {\n\t\t\t\tconst y0 = Math.max(this.top, rect.top);\n\t\t\t\tconst y1 = Math.min(this.top + this.height, rect.top + rect.height);\n\t\t\t\tif (y0 <= y1) {\n\t\t\t\t\treturn Rect.bounds(x0, y0, x1, y1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tcontains(another) {\n\t\t\treturn this.left <= another.left && this.left + this.width >= another.left + another.width && this.top <= another.top && this.top + this.height >= another.top + another.height;\n\t\t}\n\t\tinPoint(x, y) {\n\t\t\treturn this.left <= x && this.left + this.width >= x && this.top <= y && this.top + this.height >= y;\n\t\t}\n\t}\n\tmodule.exports = Rect;\n}\n\n/***/ }),\n\n/***/ \"./internal/Scrollable.js\":\n/*!********************************!*\\\n  !*** ./internal/Scrollable.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst EventHandler = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\n\tconst style = __webpack_require__(/*! ./style */ \"./internal/style.js\");\n\tconst { browser } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\n\tconst MAX_SCROLL = browser.heightLimit - 1000;\n\n\tfunction _update(scrollable) {\n\t\tlet domHeight;\n\t\tif (scrollable._height > MAX_SCROLL) {\n\t\t\tconst sbSize = style.getScrollBarSize();\n\t\t\tconst offsetHeight = scrollable._scrollable.offsetHeight;\n\t\t\tconst vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\n\t\t\tconst rScrollRange = scrollable._height - offsetHeight + sbSize;\n\t\t\tscrollable._p = vScrollRange / rScrollRange;\n\t\t\tdomHeight = MAX_SCROLL;\n\t\t} else {\n\t\t\tscrollable._p = 1;\n\t\t\tdomHeight = scrollable._height;\n\t\t}\n\n\t\tscrollable._endPointElement.style.top = domHeight.toFixed() + 'px';\n\t\tscrollable._endPointElement.style.left = scrollable._width.toFixed() + 'px';\n\t}\n\n\tclass Scrollable {\n\t\tconstructor() {\n\t\t\tthis._handler = new EventHandler();\n\n\t\t\tthis._scrollable = document.createElement('div');\n\t\t\tthis._scrollable.classList.add('grid-scrollable');\n\t\t\tthis._height = 0;\n\t\t\tthis._width = 0;\n\n\t\t\tthis._endPointElement = document.createElement('div');\n\t\t\tthis._endPointElement.classList.add('grid-scroll-end-point');\n\t\t\t_update(this);\n\t\t\tthis._scrollable.appendChild(this._endPointElement);\n\n\t\t\t// const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\n\t\t\t// this._handler.on(this._scrollable, mousewheelevt, (evt) => {\n\t\t\t// const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\n\t\t\t// const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\n\t\t\t// this.scrollTop += delta < 0 ? point : -point;\n\t\t\t// });\n\t\t}\n\t\tcalcTop(top) {\n\t\t\tconst relativeTop = top - this.scrollTop;\n\t\t\treturn this._scrollable.scrollTop + relativeTop;\n\t\t}\n\t\tgetElement() {\n\t\t\treturn this._scrollable;\n\t\t}\n\t\tsetScrollSize(width, height) {\n\t\t\tthis._width = width;\n\t\t\tthis._height = height;\n\t\t\t_update(this);\n\t\t}\n\t\tget scrollWidth() {\n\t\t\treturn this._width;\n\t\t}\n\t\tset scrollWidth(width) {\n\t\t\tthis._width = width;\n\t\t\t_update(this);\n\t\t}\n\t\tget scrollHeight() {\n\t\t\treturn this._height;\n\t\t}\n\t\tset scrollHeight(height) {\n\t\t\tthis._height = height;\n\t\t\t_update(this);\n\t\t}\n\t\tget scrollLeft() {\n\t\t\treturn Math.ceil(this._scrollable.scrollLeft);\n\t\t}\n\t\tset scrollLeft(scrollLeft) {\n\t\t\tthis._scrollable.scrollLeft = scrollLeft;\n\t\t}\n\t\tget scrollTop() {\n\t\t\treturn Math.ceil(this._scrollable.scrollTop / this._p);\n\t\t}\n\t\tset scrollTop(scrollTop) {\n\t\t\tthis._scrollable.scrollTop = scrollTop * this._p;\n\t\t}\n\t\tonScroll(fn) {\n\t\t\tthis._handler.on(this._scrollable, 'scroll', fn);\n\t\t}\n\t\tdispose() {\n\t\t\tthis._handler.dispose();\n\t\t}\n\t}\n\n\tmodule.exports = Scrollable;\n}\n\n/***/ }),\n\n/***/ \"./internal/animate.js\":\n/*!*****************************!*\\\n  !*** ./internal/animate.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tfunction cubicBezier(x2, y2, x3, y3) {\n\t\tlet step;\n\t\tconst err = 0.0001;\n\n\t\tx2 *= 3;\n\t\ty2 *= 3;\n\t\tx3 *= 3;\n\t\ty3 *= 3;\n\n\t\treturn function (t) {\n\t\t\tlet p, a, b, c, d, x, s;\n\t\t\tif (t < 0 || 1 < t) {\n\t\t\t\tthrow new Error(t);\n\t\t\t}\n\n\t\t\tp = step || t;\n\n\t\t\tdo {\n\t\t\t\ta = 1 - p;\n\t\t\t\tb = a * a;\n\t\t\t\tc = p * p;\n\t\t\t\td = c * p;\n\n\t\t\t\tx = x2 * b * p + x3 * a * c + d;\n\t\t\t\ts = t - x;\n\t\t\t\tp += s * 0.5;\n\t\t\t} while (err < Math.abs(s));\n\n\t\t\tstep = p;\n\t\t\treturn y2 * b * p + y3 * a * c + d;\n\t\t};\n\t}\n\tconst EASINGS = {\n\t\tlinear(p) {\n\t\t\treturn p;\n\t\t},\n\t\teaseIn: cubicBezier(0.420, 0.000, 1.000, 1.000),\n\t\teaseOut: cubicBezier(0.000, 0.000, 0.580, 1.000),\n\t\teaseInOut: cubicBezier(0.420, 0.000, 0.580, 1.000)\n\t};\n\n\tconst raf = window.requestAnimationFrame || setTimeout;\n\n\tfunction now() {\n\t\treturn Date.now();\n\t}\n\t/**\r\n  * <pre>\r\n  * Animates.\r\n  * </pre>\r\n  * @function\r\n  * @param {number} duration animation time.\r\n  * @param {function} step\r\n  * @param {function|string} easing\r\n  * @returns {object} Deferred object.\r\n  */\n\tmodule.exports = (duration, step, easing) => {\n\t\tconst startedAt = now();\n\n\t\tif (!easing) {\n\t\t\teasing = EASINGS.easeInOut;\n\t\t} else if (typeof easing === 'string') {\n\t\t\teasing = EASINGS[easing];\n\t\t}\n\n\t\tlet canceledFlg = false;\n\t\tconst createAnim = (resolve, reject) => {\n\t\t\tconst anim = () => {\n\t\t\t\tconst point = now() - startedAt;\n\t\t\t\tif (canceledFlg) {\n\t\t\t\t\t//cancel\n\t\t\t\t\tif (reject) {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t} else if (point >= duration) {\n\t\t\t\t\t//end\n\t\t\t\t\tstep(1);\n\t\t\t\t\tif (resolve) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstep(easing(point / duration));\n\n\t\t\t\t\traf(anim, 1);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn anim;\n\t\t};\n\t\tconst cancel = () => {\n\t\t\tcanceledFlg = true;\n\t\t};\n\t\tif (window.Promise) {\n\t\t\tconst result = new window.Promise((resolve, reject) => {\n\t\t\t\tconst anim = createAnim(resolve, reject);\n\t\t\t\tstep(0);\n\t\t\t\tanim();\n\t\t\t});\n\t\t\tresult.cancel = cancel;\n\t\t\treturn result;\n\t\t} else {\n\t\t\tconst anim = createAnim(() => {}, () => {});\n\t\t\tstep(0);\n\t\t\tanim();\n\t\t\treturn {\n\t\t\t\tcancel\n\t\t\t};\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/calc.js\":\n/*!**************************!*\\\n  !*** ./internal/calc.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction parse(calcStr) {\n\tfunction replacer(match, num, unit) {\n\t\tswitch (unit) {\n\t\t\tcase '%':\n\t\t\t\treturn `(${num} * this.full / 100)`;\n\t\t\tcase 'em':\n\t\t\t\treturn `(${num} * this.em)`;\n\t\t\tcase 'px':\n\t\t\t\treturn `(${num})`;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('calc error');\n\t\t}\n\t}\n\tconst script = calcStr.replace(/^calc\\((.*)\\)$/, '$1').replace(/(\\d+)([A-Za-z%]+)/g, replacer).replace(/(\\d*\\.\\d+)([A-Za-z%]+)/g, replacer);\n\treturn {\n\t\teval(context) {\n\t\t\treturn (() => {\n\t\t\t\tfunction calc(v) {\n\t\t\t\t\t// eslint-disable-line no-unused-vars\n\t\t\t\t\treturn v;\n\t\t\t\t}\n\t\t\t\treturn eval(script); // eslint-disable-line no-eval\n\t\t\t}).call(context);\n\t\t}\n\t};\n}\nfunction toPx(value, context) {\n\tif (/^calc\\(.*\\)$/.test(value)) {\n\t\treturn parse(value).eval(context);\n\t}\n\tif (/^[+-]?\\d+\\.?\\d*%$/.test(value)) {\n\t\treturn context.full * value.substr(0, value.length - 1) / 100;\n\t}\n\tif (/^[+-]?\\d+\\.?\\d*px$/.test(value)) {\n\t\treturn value.substr(0, value.length - 2) - 0;\n\t}\n\tif (/^[+-]?\\d+\\.?\\d*em$/.test(value)) {\n\t\treturn context.em * (value.substr(0, value.length - 2) - 0);\n\t}\n\treturn value - 0;\n}\n\nmodule.exports = {\n\tparse,\n\ttoPx(value, context) {\n\t\tif (typeof value === 'string') {\n\t\t\treturn toPx(value.trim(), context);\n\t\t}\n\t\treturn value - 0;\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/canvases.js\":\n/*!******************************!*\\\n  !*** ./internal/canvases.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tfunction calcBasePosition(ctx, rect, {\n\t\toffset = 0,\n\t\tpadding: {\n\t\t\tleft: paddingLeft = 0,\n\t\t\tright: paddingRight = 0\n\t\t} = {}\n\t} = {}) {\n\t\t// const textAlign = ctx.textAlign || 'left';\n\t\t// const textBaseline = ctx.textBaseline || 'middle';\n\t\t// ctx.textAlign = textAlign;\n\t\t// ctx.textBaseline = textBaseline;\n\n\t\t// let x = rect.left + offset + paddingLeft;\n\t\t// if (textAlign === 'right' || textAlign === 'end') {\n\t\t// \tx = rect.right - offset - paddingRight;\n\t\t// } else if (textAlign === 'center') {\n\t\t// \tx = rect.left + ((rect.width + paddingLeft - paddingRight) / 2);\n\t\t// }\n\t\t// let y = rect.top + offset;\n\t\t// if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n\t\t// \ty = rect.bottom - offset;\n\t\t// } else if (textBaseline === 'middle') {\n\t\t// \ty = rect.top + (rect.height / 2);\n\t\t// }\n\t\t// return {x, y};\n\t\treturn calcStartPosition(ctx, rect, 0, 0, {\n\t\t\toffset,\n\t\t\tpadding: {\n\t\t\t\tleft: paddingLeft,\n\t\t\t\tright: paddingRight\n\t\t\t}\n\t\t});\n\t}\n\tfunction calcStartPosition(ctx, rect, width, height, {\n\t\toffset = 0,\n\t\tpadding: {\n\t\t\tleft: paddingLeft = 0,\n\t\t\tright: paddingRight = 0\n\t\t} = {}\n\t} = {}) {\n\t\tconst textAlign = ctx.textAlign || 'left';\n\t\tconst textBaseline = ctx.textBaseline || 'middle';\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\n\t\tlet x = rect.left + offset + paddingLeft;\n\t\tif (textAlign === 'right' || textAlign === 'end') {\n\t\t\tx = rect.right - width - offset - paddingRight;\n\t\t} else if (textAlign === 'center') {\n\t\t\tx = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\n\t\t}\n\t\tlet y = rect.top + offset;\n\t\tif (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n\t\t\ty = rect.bottom - height - offset;\n\t\t} else if (textBaseline === 'middle') {\n\t\t\ty = rect.top + (rect.height - height) / 2;\n\t\t}\n\t\treturn { x, y };\n\t}\n\n\tmodule.exports = {\n\t\tcalcBasePosition,\n\t\tcalcStartPosition\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/color.js\":\n/*!***************************!*\\\n  !*** ./internal/color.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst rgbMap = {};\n\tfunction styleColorToRGB(color) {\n\t\tconst dummy = document.createElement('div');\n\t\tconst { style } = dummy;\n\t\tstyle.color = color;\n\t\tstyle.position = 'fixed';\n\t\tstyle.height = '1px';\n\t\tstyle.width = '1px';\n\t\tstyle.opacity = 0;\n\t\tdocument.body.appendChild(dummy);\n\t\tconst { color: styleColor } = document.defaultView.getComputedStyle(dummy, '');\n\t\tdocument.body.removeChild(dummy);\n\t\treturn colorToRGB0(styleColor);\n\t}\n\n\tfunction hexToNum(hex) {\n\t\treturn parseInt(hex, 16);\n\t}\n\tfunction createRGB(r, g, b, a = 1) {\n\t\treturn { r, g, b, a };\n\t}\n\tfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\n\t\treturn createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\n\t}\n\tfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2 }) {\n\t\treturn createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\n\t}\n\n\tfunction testRGB({ r, g, b, a }) {\n\t\treturn 0 <= r && r <= 255 && 0 <= g && g <= 255 && 0 <= b && b <= 255 && 0 <= a && a <= 1;\n\t}\n\tfunction rateToByte(r) {\n\t\treturn Math.ceil(r * 255 / 100);\n\t}\n\tfunction colorToRGB0(color) {\n\t\tif (color.match(/^#[0-9a-f]{3}$/i)) {\n\t\t\treturn tripleHexToRGB(color);\n\t\t}\n\t\tif (color.match(/^#[0-9a-f]{6}$/i)) {\n\t\t\treturn sextupleHexToRGB(color);\n\t\t}\n\t\tlet ret = color.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0);\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0, ret[4] - 0);\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\tret = color.match(/^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]));\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]), ret[7] - 0);\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tfunction colorToRGB(color) {\n\t\tif (typeof color !== 'string') {\n\t\t\treturn createRGB(0, 0, 0, 0);\n\t\t}\n\t\tcolor = color.toLowerCase().trim();\n\t\tif (rgbMap[color]) {\n\t\t\treturn rgbMap[color];\n\t\t}\n\t\treturn colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\n\t}\n\n\tmodule.exports = {\n\t\tcolorToRGB\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/com.js\":\n/*!*************************!*\\\n  !*** ./internal/com.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n\t'Array_isArray': window.Array.isArray\n};\n\n/***/ }),\n\n/***/ \"./internal/dom.js\":\n/*!*************************!*\\\n  !*** ./internal/dom.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { isDef } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction createElement(tagName, { classList, text, html } = {}) {\n\tconst element = document.createElement(tagName);\n\tif (classList) {\n\t\tif (__webpack_provided_Array_dot_isArray(classList)) {\n\t\t\telement.classList.add(...classList);\n\t\t} else {\n\t\t\telement.classList.add(classList);\n\t\t}\n\t}\n\tif (text) {\n\t\telement.textContent = text;\n\t} else if (html) {\n\t\telement.innerHTML = html;\n\t}\n\treturn element;\n}\n\nfunction empty(dom) {\n\tlet c;\n\twhile (c = dom.firstChild) {\n\t\tdom.removeChild(c);\n\t}\n}\nfunction isNode(arg) {\n\treturn !!(arg.nodeType && arg.nodeName);\n}\nfunction toNode(arg) {\n\tif (isNode(arg)) {\n\t\treturn arg;\n\t}\n\tconst dom = createElement('div', { html: arg });\n\treturn Array.prototype.slice.call(dom.childNodes);\n}\nfunction toNodeList(arg) {\n\tif (window.jQuery && arg instanceof window.jQuery) {\n\t\treturn Array.prototype.map.call(arg, a => a);\n\t}\n\tif (__webpack_provided_Array_dot_isArray(arg)) {\n\t\treturn arg.map(toNode);\n\t}\n\treturn [toNode(arg)];\n}\n\nfunction appendHtml(dom, inner) {\n\ttoNodeList(inner).forEach(node => {\n\t\tdom.appendChild(node);\n\t});\n}\n\nfunction disableFocus(el) {\n\tel.dataset.disableBeforeTabIndex = el.tabIndex;\n\tel.tabIndex = -1;\n\tArray.prototype.slice.call(el.children, 0).forEach(disableFocus);\n}\nfunction enableFocus(el) {\n\tif ('disableBeforeTabIndex' in el.dataset) {\n\t\tel.tabIndex = el.dataset.disableBeforeTabIndex;\n\t}\n\tArray.prototype.slice.call(el.children, 0).forEach(enableFocus);\n}\n\nfunction isFocusable(el) {\n\treturn isDef(el.tabIndex) && el.tabIndex > -1;\n}\nfunction findPrevSiblingFocusable(el) {\n\tlet n = el.previousSibling;\n\twhile (n && !isFocusable(n)) {\n\t\tn = n.previousSibling;\n\t}\n\treturn n;\n}\nfunction findNextSiblingFocusable(el) {\n\tlet n = el.nextSibling;\n\twhile (n && !isFocusable(n)) {\n\t\tn = n.nextSibling;\n\t}\n\treturn n;\n}\n\nmodule.exports = {\n\tcreateElement,\n\tempty,\n\tisNode,\n\ttoNode,\n\ttoNodeList,\n\tappendHtml,\n\tdisableFocus,\n\tenableFocus,\n\tisFocusable,\n\tfindPrevSiblingFocusable,\n\tfindNextSiblingFocusable\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./internal/fonts.js\":\n/*!***************************!*\\\n  !*** ./internal/fonts.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst loads = {};\n\tconst legacy = !document.fonts;\n\tconst load = legacy ? function (font, testStr, callback) {\n\t\t//for legacy(IE)\n\t\tif (loads[font + ' @ ' + testStr]) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\t__webpack_require__(/*! ./legacy/fontwatch/FontWatchRunner */ \"./internal/legacy/fontwatch/FontWatchRunner.js\").load(font, testStr, () => {\n\t\t\tloads[font + ' @ ' + testStr] = true;\n\t\t\tcallback();\n\t\t}, () => {\n\t\t\tloads[font + ' @ ' + testStr] = true;\n\t\t\tcallback();\n\t\t});\n\t} : function (font, testStr, callback) {\n\t\tif (loads.all || loads[font]) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\tdocument.fonts.ready.then(() => {\n\t\t\tloads.all = true;\n\t\t});\n\t\tdocument.fonts.load(font).then(() => {\n\t\t\tloads[font] = true;\n\t\t\tcallback();\n\t\t});\n\t};\n\tconst check = legacy ? function (font, testStr) {\n\t\t//for legacy(IE)\n\t\tif (loads[font + ' @ ' + testStr]) {\n\t\t\treturn true;\n\t\t}\n\t\tload(font, testStr, () => {});\n\t\treturn false;\n\t} : function (font, testStr) {\n\t\tif (loads.all || loads[font]) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!document.fonts.check(font)) {\n\t\t\tload(font, testStr, () => {});\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tmodule.exports = {\n\t\tcheck,\n\t\tload\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/hiDPI.js\":\n/*!***************************!*\\\n  !*** ./internal/hiDPI.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst EventHandler = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\nconst handler = new EventHandler();\n\nlet ratio;\nfunction setRatio() {\n\tratio = Math.ceil(window.devicePixelRatio || 1);\n\tif (ratio > 1 && ratio % 2 !== 0) {\n\t\tratio += 1;\n\t}\n}\nsetRatio();\nhandler.on(window, 'resize', setRatio);\n\nmodule.exports = {\n\ttransform(canvas) {\n\t\tconst ctx = canvas.getContext('2d');\n\n\t\tconst getAttribute = canvas.getAttribute;\n\t\tcanvas.getAttribute = function (name, ...args) {\n\t\t\tlet result = getAttribute.call(this, name, ...args);\n\t\t\tif (name === 'width' || name === 'height') {\n\t\t\t\tresult /= ratio;\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t\tconst setAttribute = canvas.setAttribute;\n\t\tcanvas.setAttribute = function (name, val, ...args) {\n\t\t\tconst wh = name === 'width' || name === 'height';\n\t\t\tif (wh) {\n\t\t\t\tval *= ratio;\n\t\t\t}\n\t\t\tconst result = setAttribute.call(this, name, val, ...args);\n\t\t\tif (wh) {\n\t\t\t\tctx.scale(ratio, ratio);\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\n\t\tObject.defineProperty(canvas, 'width', {\n\t\t\tget() {\n\t\t\t\treturn canvas.getAttribute('width');\n\t\t\t},\n\t\t\tset: val => {\n\t\t\t\tcanvas.setAttribute('width', Math.floor(val));\n\t\t\t},\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true\n\t\t});\n\t\tObject.defineProperty(canvas, 'height', {\n\t\t\tget() {\n\t\t\t\treturn canvas.getAttribute('height');\n\t\t\t},\n\t\t\tset: val => {\n\t\t\t\tcanvas.setAttribute('height', Math.floor(val));\n\t\t\t},\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true\n\t\t});\n\t\tconst drawImage = ctx.drawImage;\n\t\tctx.drawImage = function (img, ...args) {\n\t\t\tif (img !== canvas || ratio === 1) {\n\t\t\t\treturn drawImage.call(this, img, ...args);\n\t\t\t}\n\t\t\tthis.save();\n\t\t\ttry {\n\t\t\t\tthis.scale(1 / ratio, 1 / ratio);\n\t\t\t\tif (args.length > 4) {\n\t\t\t\t\targs[4] = args[4] * ratio;\n\t\t\t\t\targs[5] = args[5] * ratio;\n\t\t\t\t} else {\n\t\t\t\t\targs[0] = args[0] * ratio;\n\t\t\t\t\targs[1] = args[1] * ratio;\n\t\t\t\t}\n\t\t\t\treturn drawImage.call(this, img, ...args);\n\t\t\t} finally {\n\t\t\t\tthis.restore();\n\t\t\t}\n\t\t};\n\n\t\treturn canvas;\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/icons.js\":\n/*!***************************!*\\\n  !*** ./internal/icons.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { isDef } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst ICON_PROP_KEYS = ['content', 'font', 'color', 'className', 'isLiga', 'width', 'src', 'svg', 'name', 'path'];\n\nfunction quote(name) {\n\tconst quoted = [];\n\tconst split = name.split(/,\\s*/);\n\tfor (let i = 0; i < split.length; i++) {\n\t\tconst part = split[i].replace(/['\"]/g, '');\n\t\tif (part.indexOf(' ') === -1 && !/^\\d/.test(part)) {\n\t\t\tquoted.push(part);\n\t\t} else {\n\t\t\tquoted.push('\\'' + part + '\\'');\n\t\t}\n\t}\n\treturn quoted.join(',');\n}\n\nconst doms = {};\nconst props = {};\n\nfunction getIconProps(tagName, className) {\n\tconst tagProps = props[tagName] || (props[tagName] = {});\n\tif (tagProps[className]) {\n\t\treturn tagProps[className];\n\t}\n\tconst dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\n\tdom.className = className;\n\tdocument.body.appendChild(dom);\n\ttry {\n\t\tconst beforeStyle = document.defaultView.getComputedStyle(dom, '::before');\n\t\tlet content = beforeStyle.getPropertyValue('content');\n\t\tif (content.length >= 3 && (content[0] === '\"' || content[0] === '\\'')) {\n\t\t\tif (content[0] === content[content.length - 1]) {\n\t\t\t\tcontent = content.substr(1, content.length - 2);\n\t\t\t}\n\t\t}\n\t\tlet font = beforeStyle.getPropertyValue('font');\n\t\tif (!font) {\n\t\t\tfont = beforeStyle.getPropertyValue('font-style') + ' ' + beforeStyle.getPropertyValue('font-variant') + ' ' + beforeStyle.getPropertyValue('font-weight') + ' ' + beforeStyle.getPropertyValue('font-size') + '/' + beforeStyle.getPropertyValue('line-height') + ' ' + quote(beforeStyle.getPropertyValue('font-family'));\n\t\t}\n\t\tconst color = beforeStyle.getPropertyValue('color');\n\t\tconst width = dom.clientWidth;\n\t\tconst isLiga = (beforeStyle.getPropertyValue('font-feature-settings') || '').indexOf('liga') > -1;\n\n\t\treturn tagProps[className] = {\n\t\t\tcontent,\n\t\t\tfont,\n\t\t\tcolor,\n\t\t\twidth,\n\t\t\tisLiga\n\t\t};\n\t} finally {\n\t\tdocument.body.removeChild(dom);\n\t}\n}\n\nfunction toPropArray(prop, count) {\n\tconst result = [];\n\tif (__webpack_provided_Array_dot_isArray(prop)) {\n\t\tresult.push(...prop);\n\t\tfor (let i = prop.length; i < count; i++) {\n\t\t\tresult.push(null);\n\t\t}\n\t} else {\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tresult.push(prop);\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction toSimpleArray(iconProps) {\n\tif (!iconProps) {\n\t\treturn iconProps;\n\t} else if (__webpack_provided_Array_dot_isArray(iconProps)) {\n\t\treturn iconProps;\n\t}\n\n\tconst workData = {};\n\n\tlet count = 0;\n\tICON_PROP_KEYS.forEach(k => {\n\t\tif (iconProps[k]) {\n\t\t\tif (__webpack_provided_Array_dot_isArray(iconProps[k])) {\n\t\t\t\tcount = Math.max(count, iconProps[k].length);\n\t\t\t} else {\n\t\t\t\tcount = Math.max(count, 1);\n\t\t\t}\n\t\t}\n\t});\n\n\tICON_PROP_KEYS.forEach(k => {\n\t\tworkData[k] = toPropArray(iconProps[k], count);\n\t});\n\n\tconst result = [];\n\tfor (let i = 0; i < count; i++) {\n\t\tconst data = {};\n\t\tICON_PROP_KEYS.forEach(k => {\n\t\t\tdata[k] = workData[k][i];\n\t\t});\n\t\tresult.push(data);\n\t}\n\treturn result;\n}\n\nfunction normarize(iconProps) {\n\tconst data = {};\n\tfor (const k in iconProps) {\n\t\tif (k === 'className') {\n\t\t\tcontinue;\n\t\t}\n\t\tdata[k] = iconProps[k];\n\t}\n\tif (iconProps.className) {\n\t\tconst prop = getIconProps(iconProps.tagName || 'i', iconProps.className);\n\t\tfor (const k in prop) {\n\t\t\tif (!isDef(iconProps[k])) {\n\t\t\t\tdata[k] = prop[k];\n\t\t\t}\n\t\t}\n\t}\n\treturn data;\n}\n\nmodule.exports = {\n\ttoNormarizeArray(iconProps) {\n\t\tconst icons = toSimpleArray(iconProps);\n\t\tif (!icons) {\n\t\t\treturn icons;\n\t\t}\n\t\treturn icons.map(icon => normarize(icon));\n\t},\n\tget iconPropKeys() {\n\t\treturn ICON_PROP_KEYS;\n\t},\n\tgetIconProps\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./internal/imgs.js\":\n/*!**************************!*\\\n  !*** ./internal/imgs.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { then } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\nconst LRUCache = __webpack_require__(/*! ./LRUCache */ \"./internal/LRUCache.js\");\n\nconst allCache = {};\n\nfunction isDataUrl(url) {\n\treturn url.search(/^(data:)/) !== -1;\n}\n\nfunction loadImage(src) {\n\tif (!window.Promise) {\n\t\tconsole.error('Promise is not loaded. load Promise before this process.');\n\t\treturn {\n\t\t\tthen() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t};\n\t}\n\tconst img = new Image();\n\tconst result = new window.Promise(resolve => {\n\t\timg.onload = () => {\n\t\t\tresolve(img);\n\t\t};\n\t});\n\timg.onerror = e => {\n\t\tconst url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\n\t\tconsole.warn(`cannot load: ${url}`);\n\t\tthrow new Error(`IMAGE LOAD ERROR: ${url}`);\n\t};\n\timg.src = isDataUrl(src) ? src : `${src}?${Date.now()}`;\n\treturn result;\n}\n\nfunction getCacheOrLoad0(cache, src) {\n\treturn then(src, src => {\n\t\tconst c = cache.get(src);\n\t\tif (c) {\n\t\t\treturn c;\n\t\t}\n\t\tconst result = loadImage(src).then(img => {\n\t\t\tcache.put(src, img);\n\t\t\treturn img;\n\t\t});\n\t\tcache.put(src, result);\n\t\treturn result;\n\t});\n}\n\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\n\tconst cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache(cacheSize));\n\treturn getCacheOrLoad0(cache, src);\n}\n\nmodule.exports = {\n\tloadImage,\n\tgetCacheOrLoad\n};\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/Path2D.js\":\n/*!******************************************!*\\\n  !*** ./internal/legacy/canvas/Path2D.js ***!\n  \\******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst PathCommandsParser = __webpack_require__(/*! ./PathCommandsParser */ \"./internal/legacy/canvas/PathCommandsParser.js\");\nconst parser = new PathCommandsParser();\n\nclass Path2D {\n\tconstructor(arg) {\n\t\tthis._ops = [];\n\t\t['closePath', 'moveTo', 'lineTo', 'bezierCurveTo', 'quadraticCurveTo', 'arc', 'rect'].forEach(name => {\n\t\t\tthis[name] = (...args) => {\n\t\t\t\tthis._ops.push({ op: name, args });\n\t\t\t};\n\t\t});\n\t\tif (arg === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof arg === 'string') {\n\t\t\ttry {\n\t\t\t\tthis._ops = parser.parse(arg);\n\t\t\t} catch (e) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t} else if (arg.hasOwnProperty('_ops')) {\n\t\t\tthis._ops = [...this._ops];\n\t\t} else {\n\t\t\tthrow new Error(`Error: ${typeof arg} is not a valid argument to Path`);\n\t\t}\n\t}\n}\n\nconst CanvasRenderingContext2D = window.CanvasRenderingContext2D;\n\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\n\nCanvasRenderingContext2D.prototype.fill = function (...args) {\n\tif (args[0] instanceof Path2D) {\n\t\tconst path = args[0];\n\t\tthis.beginPath();\n\t\tpath._ops.forEach(op => {\n\t\t\tthis[op.op](...op.args);\n\t\t});\n\t\toriginalFill.apply(this, Array.prototype.slice.call(args, 1));\n\t} else {\n\t\toriginalFill.apply(this, args);\n\t}\n};\n\nmodule.exports = Path2D;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommands.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommands.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction mag(v) {\n\treturn Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n\nfunction dot(u, v) {\n\treturn u[0] * v[0] + u[1] * v[1];\n}\n\nfunction ratio(u, v) {\n\treturn dot(u, v) / (mag(u) * mag(v));\n}\n\nfunction clamp(value, min, max) {\n\treturn Math.min(Math.max(value, min), max);\n}\n\nfunction angle(u, v) {\n\tlet sign = 1.0;\n\tif (u[0] * v[1] - u[1] * v[0] < 0) {\n\t\tsign = -1.0;\n\t}\n\treturn sign * Math.acos(clamp(ratio(u, v)), -1, 1);\n}\n\nfunction rotClockwise(v, angle) {\n\tconst cost = Math.cos(angle);\n\tconst sint = Math.sin(angle);\n\treturn [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n}\n\nfunction rotCounterClockwise(v, angle) {\n\tconst cost = Math.cos(angle);\n\tconst sint = Math.sin(angle);\n\treturn [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n}\n\nfunction midPoint(u, v) {\n\treturn [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n}\n\nfunction meanVec(u, v) {\n\treturn [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n}\n\nfunction pointMul(u, v) {\n\treturn [u[0] * v[0], u[1] * v[1]];\n}\n\nfunction scale(c, v) {\n\treturn [c * v[0], c * v[1]];\n}\n\nfunction sum(u, v) {\n\treturn [u[0] + v[0], u[1] + v[1]];\n}\n// Convert an SVG elliptical arc to a series of canvas commands.\n//\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\n// rx, ry: radii of the ellipse.\n// phi: rotation of the ellipse.\n// fA: large arc flag.\n// fS: sweep flag.\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\n\t// Convert from endpoint to center parametrization, as detailed in:\n\t//   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\tif (rx === 0 || ry === 0) {\n\t\tctx.lineTo(x2, x1);\n\t\treturn;\n\t}\n\tphi = phi * (Math.PI / 180.0);\n\trx = Math.abs(rx);\n\try = Math.abs(ry);\n\tconst xPrime = rotClockwise(midPoint(x1, x2), phi); // F.6.5.1\n\tconst xPrime2 = pointMul(xPrime, xPrime);\n\tlet rx2 = Math.pow(rx, 2);\n\tlet ry2 = Math.pow(ry, 2);\n\n\tconst lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n\tif (lambda > 1) {\n\t\trx *= lambda;\n\t\try *= lambda;\n\t\trx2 = Math.pow(rx, 2);\n\t\try2 = Math.pow(ry, 2);\n\t}\n\tlet factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) / (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\n\tif (fA === fS) {\n\t\tfactor *= -1.0;\n\t}\n\tconst cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\n\tconst c = sum(rotCounterClockwise(cPrime, phi), meanVec(x1, x2)); // F.6.5.3\n\tconst x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\n\tconst x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\n\tconst theta = angle([1, 0], x1UnitVector); // F.6.5.5\n\tconst deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\n\tconst start = theta;\n\tconst end = theta + deltaTheta;\n\tctx.save();\n\tctx.translate(c[0], c[1]);\n\tctx.rotate(phi);\n\tctx.scale(rx, ry);\n\tctx.arc(0, 0, 1, start, end, 1 - fS);\n\tctx.restore();\n}\n\nclass PathCommands {\n\tconstructor(ctx) {\n\t\tlet lMx;\n\t\tlet lMy;\n\t\tlet lx = 0;\n\t\tlet ly = 0;\n\t\tlet reflected;\n\t\tlet lastCommand = '';\n\t\tfunction makeReflected() {\n\t\t\tif ('CcSsQqTt'.indexOf(lastCommand) < 0) {\n\t\t\t\treturn { x: lx, y: ly };\n\t\t\t}\n\t\t\treturn reflected;\n\t\t}\n\n\t\tthis.M = (px, py) => {\n\t\t\tctx.moveTo(px, py);\n\t\t\tlMx = px;\n\t\t\tlMy = py;\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\tlastCommand = 'M';\n\t\t\treturn this;\n\t\t};\n\t\tthis.m = (px, py) => this.M(px + lx, py + ly);\n\t\tthis.L = (px, py) => {\n\t\t\tctx.lineTo(px, py);\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\tlastCommand = 'L';\n\t\t\treturn this;\n\t\t};\n\t\tthis.l = (px, py) => this.L(px + lx, py + ly);\n\t\tthis.H = px => this.L(px, ly);\n\t\tthis.h = px => this.H(px + lx);\n\t\tthis.V = py => this.L(lx, py);\n\t\tthis.v = py => this.V(py + ly);\n\t\tthis.Z = () => {\n\t\t\tctx.closePath();\n\t\t\tlx = lMx;\n\t\t\tly = lMy;\n\t\t\tlastCommand = 'Z';\n\t\t\treturn this;\n\t\t};\n\t\tthis.z = () => this.Z();\n\t\t//C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\n\t\tthis.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\n\t\t\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\treflected = {\n\t\t\t\tx: 2 * px - cp2x,\n\t\t\t\ty: 2 * py - cp2y\n\t\t\t};\n\t\t\tlastCommand = 'C';\n\t\t\treturn this;\n\t\t};\n\t\tthis.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\n\t\t//S x2 y2, x y (or s dx2 dy2, dx dy)\n\t\tthis.S = (cpx, cpy, px, py) => {\n\t\t\tconst { x: cp1x, y: cp1y } = makeReflected(lastCommand);\n\t\t\treturn this.C(cp1x, cp1y, cpx, cpy, px, py);\n\t\t};\n\t\tthis.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\n\t\t//Q x1 y1, x y (or q dx1 dy1, dx dy)\n\t\tthis.Q = (cpx, cpy, px, py) => {\n\t\t\tctx.quadraticCurveTo(cpx, cpy, px, py);\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\treflected = {\n\t\t\t\tx: 2 * px - cpx,\n\t\t\t\ty: 2 * py - cpy\n\t\t\t};\n\t\t\tlastCommand = 'Q';\n\t\t\treturn this;\n\t\t};\n\t\tthis.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\n\t\t//T x y (or t dx dy)\n\t\tthis.T = (px, py) => {\n\t\t\tconst { x: cpx, y: cpy } = makeReflected();\n\t\t\treturn this.Q(cpx, cpy, px, py);\n\t\t};\n\t\tthis.t = (px, py) => this.T(px + lx, py + ly);\n\t\t//A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\t\tthis.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\n\t\t\tconst x1 = lx;\n\t\t\tconst y1 = ly;\n\n\t\t\tellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\n\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\tlastCommand = 'A';\n\t\t\treturn this;\n\t\t};\n\t\t//a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\n\t\tthis.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\n\t}\n}\n\nmodule.exports = PathCommands;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommandsParser.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommandsParser.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst PathCommands = __webpack_require__(/*! ./PathCommands */ \"./internal/legacy/canvas/PathCommands.js\");\n\nfunction pathTokens(d) {\n\tlet idx = 0;\n\treturn {\n\t\tnext() {\n\t\t\tlet s = '';\n\t\t\twhile (d.length > idx) {\n\t\t\t\tconst c = d[idx];\n\t\t\t\tidx++;\n\t\t\t\tif (' ,\\n\\r\\t'.indexOf(c) > -1) {\n\t\t\t\t\tif (s) {\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst type = '.+-1234567890'.indexOf(c) > -1 ? 'num' : 'str';\n\t\t\t\t\tif (type === 'str') {\n\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn c;\n\t\t\t\t\t}\n\t\t\t\t\tif ('-+'.indexOf(c) > -1) {\n\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (c === '.') {\n\t\t\t\t\t\tif (s.indexOf('.') > -1) {\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ts += c;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn s || null;\n\t\t}\n\t};\n}\n\nfunction command(builder, cmd, argsProvider) {\n\tif (cmd.toUpperCase() === 'M' || cmd.toUpperCase() === 'L' || cmd.toUpperCase() === 'T') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next());\n\t\treturn cmd === 'M' ? 'L' : cmd === 'm' ? 'l' : cmd;\n\t} else if (cmd.toUpperCase() === 'H' || cmd.toUpperCase() === 'V') {\n\t\tbuilder.command(cmd, argsProvider.next());\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'Z') {\n\t\tbuilder.command(cmd);\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'C') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'S' || cmd.toUpperCase() === 'Q') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'A') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n\t\treturn cmd;\n\t} else {\n\t\t// https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\n\t\tconsole.warn('unsupported:' + cmd);\n\t}\n\treturn null;\n}\n\nconst canvasOperations = window.CanvasRenderingContext2D ? Object.keys(window.CanvasRenderingContext2D.prototype) : ['save', 'restore', 'beginPath', 'closePath', 'moveTo', 'lineTo', 'bezierCurveTo', 'quadraticCurveTo', 'arc', 'arcTo', 'ellipse', 'rect', 'translate', 'rotate', 'scale'];\n\nclass PathCommandsParser {\n\tconstructor() {\n\t\tthis._commands = new PathCommands(this);\n\t\tcanvasOperations.forEach(op => {\n\t\t\tthis[op] = (...args) => {\n\t\t\t\tthis._ops.push({\n\t\t\t\t\top,\n\t\t\t\t\targs\n\t\t\t\t});\n\t\t\t};\n\t\t});\n\t}\n\tcommand(name, ...args) {\n\t\targs = args || [];\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\targs[i] = args[i] - 0;\n\t\t}\n\t\tthis._commands[name](...args);\n\t}\n\tparse(d) {\n\t\tconst ops = this._ops = [];\n\t\tconst tokens = pathTokens(d);\n\t\ttry {\n\t\t\tlet cmd;\n\t\t\tlet subsequentCommand;\n\t\t\twhile (cmd = tokens.next()) {\n\t\t\t\tif (!isNaN(cmd - 0)) {\n\t\t\t\t\tlet fst = true;\n\t\t\t\t\tconst argsProvider = {\n\t\t\t\t\t\tnext() {\n\t\t\t\t\t\t\tif (fst) {\n\t\t\t\t\t\t\t\tfst = false;\n\t\t\t\t\t\t\t\treturn cmd;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn tokens.next();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tsubsequentCommand = command(this, subsequentCommand, argsProvider);\n\t\t\t\t} else {\n\t\t\t\t\tsubsequentCommand = command(this, cmd, tokens);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log('Error: ' + d);\n\t\t\tthrow e;\n\t\t}\n\t\treturn ops;\n\t}\n}\n\nmodule.exports = PathCommandsParser;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontRuler.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontRuler.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//see https://github.com/typekit/webfontloader\n\nfunction computeStyle(font) {\n\treturn [{\n\t\tdisplay: 'block',\n\t\tposition: 'absolute',\n\t\ttop: '-9999px',\n\t\tleft: '-9999px',\n\t\twidth: 'auto',\n\t\theight: 'auto',\n\t\tmargin: '0',\n\t\tpadding: '0',\n\t\t'white-space': 'nowrap',\n\t\tfont\n\t}, {\n\t\t'font-variant': 'normal',\n\t\t'font-size': '300px',\n\t\t'font-style': 'normal',\n\t\t'font-weight': '400',\n\t\t'line-height': 'normal'\n\t}];\n}\n\nclass FontRuler {\n\tconstructor(font, testStr) {\n\t\tconst e = document.createElement('span');\n\t\te.setAttribute('aria-hidden', 'true');\n\t\te.textContent = testStr || 'BESbswy';\n\n\t\tcomputeStyle(font).forEach(style => {\n\t\t\tfor (const key in style) {\n\t\t\t\te.style[key] = style[key];\n\t\t\t}\n\t\t});\n\t\tdocument.body.appendChild(e);\n\t\tthis.el_ = e;\n\t}\n\tgetWidth() {\n\t\treturn this.el_.offsetWidth;\n\t}\n\tremove() {\n\t\tdocument.body.removeChild(this.el_);\n\t}\n}\n\nmodule.exports = FontRuler;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontWatchRunner.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontWatchRunner.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//see https://github.com/typekit/webfontloader\n\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\n\nconst FontRuler = __webpack_require__(/*! ./FontRuler */ \"./internal/legacy/fontwatch/FontRuler.js\");\n\nconst LastResortFonts = {\n\tSERIF: 'serif',\n\tSANS_SERIF: 'sans-serif'\n};\n\nconst watchRunners = {};\n\nclass FontWatchRunner {\n\tstatic load(font, testStr, activeCallback, inactiveCallback) {\n\t\tconst c = watchRunners[font] || (watchRunners[font] = {});\n\t\ttestStr = testStr + '';\n\t\tlet runner;\n\t\tif (c[testStr]) {\n\t\t\trunner = c[testStr];\n\t\t} else {\n\t\t\trunner = c[testStr] = new FontWatchRunner(font, testStr);\n\t\t}\n\t\trunner.then(activeCallback, inactiveCallback);\n\t}\n\tconstructor(font, testStr) {\n\t\tthis.activeCallbacks = [];\n\t\tthis.inactiveCallbacks = [];\n\t\tthis.status = null;\n\t\tthis.lastResortWidths_ = {};\n\n\t\tthis.fontRulerA_ = new FontRuler(font + ',' + LastResortFonts.SERIF, testStr);\n\t\tthis.fontRulerB_ = new FontRuler(font + ',' + LastResortFonts.SANS_SERIF, testStr);\n\t\tconst lastResortRulerA = new FontRuler('4px ' + LastResortFonts.SERIF, testStr);\n\t\tconst lastResortRulerB = new FontRuler('4px ' + LastResortFonts.SANS_SERIF, testStr);\n\n\t\t//start\n\t\tthis.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\n\t\tthis.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\n\n\t\tlastResortRulerA.remove();\n\t\tlastResortRulerB.remove();\n\n\t\tthis.started_ = Date.now();\n\n\t\tthis.check_();\n\t}\n\tthen(activeCallback, inactiveCallback) {\n\t\tif (this.status) {\n\t\t\tif (this.status !== 'ng') {\n\t\t\t\tactiveCallback();\n\t\t\t} else {\n\t\t\t\tinactiveCallback();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.activeCallbacks.push(activeCallback);\n\t\t\tthis.inactiveCallbacks.push(inactiveCallback);\n\t\t}\n\t}\n\tcheck_() {\n\t\tconst widthA = this.fontRulerA_.getWidth();\n\t\tconst widthB = this.fontRulerB_.getWidth();\n\n\t\tif (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\n\t\t\tif (Date.now() - this.started_ >= 3000) {\n\t\t\t\t// timeout\n\t\t\t\tif (this.isLastResortFont_(widthA, widthB)) {\n\t\t\t\t\tthis.finish_(this.activeCallbacks);\n\t\t\t\t\tthis.status = 'ok';\n\t\t\t\t} else {\n\t\t\t\t\tthis.finish_(this.inactiveCallbacks);\n\t\t\t\t\tthis.status = 'ng';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.check_();\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.finish_(this.activeCallbacks);\n\t\t\tthis.status = 'ok';\n\t\t}\n\t}\n\tisFallbackFont_(a, b) {\n\t\treturn this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\n\t}\n\twidthsMatchLastResortWidths_(a, b) {\n\t\tfor (const font in LastResortFonts) {\n\t\t\tif (LastResortFonts.hasOwnProperty(font)) {\n\t\t\t\tif (this.widthMatches_(a, LastResortFonts[font]) && this.widthMatches_(b, LastResortFonts[font])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\twidthMatches_(width, lastResortFont) {\n\t\treturn width === this.lastResortWidths_[lastResortFont];\n\t}\n\tisLastResortFont_(a, b) {\n\t\treturn hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\n\t}\n\tfinish_(callbacks) {\n\t\tsetTimeout(() => {\n\t\t\tthis.fontRulerA_.remove();\n\t\t\tthis.fontRulerB_.remove();\n\t\t\tcallbacks.forEach(cb => cb());\n\t\t}, 0);\n\t}\n}\n\nlet HAS_WEBKIT_FALLBACK_BUG = null;\nfunction hasWebKitFallbackBug() {\n\tif (HAS_WEBKIT_FALLBACK_BUG === null) {\n\t\tconst match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\n\n\t\tHAS_WEBKIT_FALLBACK_BUG = !!match && (parseInt(match[1], 10) < 536 || parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11);\n\t}\n\treturn HAS_WEBKIT_FALLBACK_BUG;\n}\n\nmodule.exports = FontWatchRunner;\n\n/***/ }),\n\n/***/ \"./internal/menu-items.js\":\n/*!********************************!*\\\n  !*** ./internal/menu-items.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nfunction normalize(options) {\n\tif (!options) {\n\t\treturn [];\n\t}\n\tif (__webpack_provided_Array_dot_isArray(options)) {\n\t\treturn options;\n\t}\n\tif (typeof options === 'string') {\n\t\treturn normalize(JSON.parse(options));\n\t}\n\tconst result = [];\n\tfor (const k in options) {\n\t\tresult.push({\n\t\t\tvalue: k,\n\t\t\tcaption: options[k]\n\t\t});\n\t}\n\treturn result;\n}\n\nmodule.exports = {\n\tnormalize\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./internal/path2DManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/path2DManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction getPath2D() {\n\t//return require('./legacy/canvas/Path2D');\n\treturn window.Path2D || __webpack_require__(/*! ./legacy/canvas/Path2D */ \"./internal/legacy/canvas/Path2D.js\");\n}\n\nmodule.exports = {\n\tfill(module, ctx, x, y, w, h) {\n\t\tctx.save();\n\t\ttry {\n\t\t\tconst { width, height } = module;\n\t\t\tconst { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = module;\n\t\t\tw = w || width;\n\t\t\th = h || height;\n\t\t\tconst xrate = w / width;\n\t\t\tconst yrate = h / (upsideDown ? -height : height);\n\t\t\tx = x || 0;\n\t\t\ty = upsideDown ? (y || 0) + -height * yrate : y || 0;\n\n\t\t\tctx.translate(x, y);\n\t\t\tctx.scale(xrate, yrate);\n\t\t\tif (offsetX !== 0 || offsetY !== 0) {\n\t\t\t\tctx.translate(offsetX, offsetY);\n\t\t\t}\n\t\t\tconst Path2D = getPath2D();\n\t\t\tmodule.path2d = module.path2d || new Path2D(module.d);\n\t\t\tctx.fill(module.path2d);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t},\n\tget Path2D() {\n\t\treturn getPath2D();\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/sort.js\":\n/*!**************************!*\\\n  !*** ./internal/sort.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { isPromise } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\n\tfunction wait(val) {\n\t\treturn val.then(v => {\n\t\t\tif (isPromise(v)) {\n\t\t\t\treturn wait(v);\n\t\t\t} else {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t});\n\t}\n\tfunction createArray(get, length) {\n\t\tconst array = new Array(length);\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tarray[i] = get(i);\n\t\t}\n\t\treturn array;\n\t}\n\tfunction createArrayPromise(get, getField, length) {\n\t\treturn new Promise(resolve => {\n\t\t\tconst plist = [];\n\t\t\tconst array = new Array(length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst data = get(i);\n\t\t\t\tconst record = {\n\t\t\t\t\tv: data,\n\t\t\t\t\tf: data\n\t\t\t\t};\n\t\t\t\tarray[i] = record;\n\t\t\t\tif (isPromise(data)) {\n\t\t\t\t\tplist.push(wait(data).then(v => {\n\t\t\t\t\t\trecord.v = v;\n\t\t\t\t\t\trecord.f = v;\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t\tPromise.all(plist).then(() => setArrayField(array, getField)).then(resolve);\n\t\t});\n\t}\n\tfunction setArrayField(array, getField) {\n\t\tif (!getField) {\n\t\t\treturn Promise.resolve(array);\n\t\t}\n\t\treturn new Promise(resolve => {\n\t\t\tconst length = array.length;\n\t\t\tconst plist = [];\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst record = array[i];\n\t\t\t\trecord.f = getField(record.v);\n\t\t\t\tif (isPromise(record.f)) {\n\t\t\t\t\tplist.push(wait(record.f).then(v => {\n\t\t\t\t\t\trecord.f = v;\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t\tPromise.all(plist).then(() => resolve(array));\n\t\t});\n\t}\n\tconst sort = {\n\t\tsort(get, set, length, compare, getField) {\n\t\t\tconst old = createArray(get, length);\n\t\t\tif (getField) {\n\t\t\t\told.sort((r1, r2) => compare(getField(r1), getField(r2)));\n\t\t\t} else {\n\t\t\t\told.sort(compare);\n\t\t\t}\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tset(i, old[i]);\n\t\t\t}\n\t\t},\n\t\tsortArray(array, compare) {\n\t\t\tArray.prototype.sort.call(array, compare);\n\t\t},\n\t\tsortPromise(get, set, length, compare, getField) {\n\t\t\tif (window.Promise) {\n\t\t\t\treturn createArrayPromise(get, getField, length).then(array => {\n\t\t\t\t\tarray.sort((r1, r2) => compare(r1.f, r2.f));\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\tset(i, array[i].v);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsort.sort(get, set, length, compare, getField);\n\t\t\t\tconst dummyPromise = {\n\t\t\t\t\tthen(fn) {\n\t\t\t\t\t\tfn();\n\t\t\t\t\t\treturn dummyPromise;\n\t\t\t\t\t},\n\t\t\t\t\tcatch() {\n\t\t\t\t\t\treturn dummyPromise;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn dummyPromise;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = sort;\n}\n\n/***/ }),\n\n/***/ \"./internal/style.css\":\n/*!****************************!*\\\n  !*** ./internal/style.css ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../node_modules/css-loader?minimize!./style.css */ \"../../node_modules/css-loader/index.js?minimize!./internal/style.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./internal/style.js\":\n/*!***************************!*\\\n  !*** ./internal/style.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tfunction getScrollBarWidth() {\n\t\tconst dummy = document.createElement('div');\n\t\tconst { style } = dummy;\n\t\tstyle.position = 'absolute';\n\t\tstyle.height = '9999px';\n\t\tstyle.width = 'calc(100vw - 100%)';\n\t\tstyle.opacity = 0;\n\t\tdummy.textContent = 'x';\n\t\tdocument.body.appendChild(dummy);\n\t\tconst { width } = document.defaultView.getComputedStyle(dummy, '');\n\t\tdocument.body.removeChild(dummy);\n\t\treturn parseInt(width, 10);\n\t}\n\n\tlet SCROLLBAR_SIZE;\n\tconst initDocument = () => {\n\t\t__webpack_require__(/*! ./style.css */ \"./internal/style.css\");\n\t\tSCROLLBAR_SIZE = getScrollBarWidth() || 10;\n\t\tconst style = document.createElement('style');\n\t\tstyle.setAttribute('type', 'text/css');\n\t\tstyle.setAttribute('data-name', 'cheetah-grid');\n\t\tstyle.innerHTML = `\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ${SCROLLBAR_SIZE}px;\n\theight: ${SCROLLBAR_SIZE}px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\n}\n\t\t`;\n\n\t\tdocument.head.appendChild(style);\n\t};\n\n\tconst style = {\n\t\tinitDocument() {\n\t\t\tstyle.initDocument = () => {};\n\t\t\tinitDocument();\n\t\t},\n\t\tgetScrollBarSize() {\n\t\t\treturn SCROLLBAR_SIZE;\n\t\t}\n\t};\n\n\tmodule.exports = style;\n}\n\n/***/ }),\n\n/***/ \"./internal/symbolManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/symbolManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Symbol = window.Symbol ? window.Symbol : (() => {\n\t\tlet nextId = 1;\n\t\treturn name => {\n\t\t\tconst id = nextId++;\n\t\t\tif (name) {\n\t\t\t\treturn ` $$$ ${name} - ${id} $$$ `;\n\t\t\t} else {\n\t\t\t\treturn ` $$$ ${id} $$$ `;\n\t\t\t}\n\t\t};\n\t})();\n\tconst mem = {};\n\n\tmodule.exports = {\n\t\tget(name) {\n\t\t\tif (name) {\n\t\t\t\treturn mem[name] ? mem[name] : mem[name] = Symbol(name);\n\t\t\t} else {\n\t\t\t\treturn Symbol();\n\t\t\t}\n\t\t},\n\t\tget PROTECTED_SYMBOL() {\n\t\t\treturn this.get('protected');\n\t\t},\n\t\tget CHECK_COLUMN_STATE_ID() {\n\t\t\treturn this.get('chkcol.stateID');\n\t\t},\n\t\tget BUTTON_COLUMN_STATE_ID() {\n\t\t\treturn this.get('btncol.stateID');\n\t\t},\n\t\tget COLUMN_FADEIN_STATE_ID() {\n\t\t\treturn this.get('col.fadein_stateID');\n\t\t},\n\t\tget BRANCH_GRAPH_COLUMN_STATE_ID() {\n\t\t\treturn this.get('branch_graph_col.stateID');\n\t\t},\n\t\tget SMALL_DIALOG_INPUT_EDITOR_STATE_ID() {\n\t\t\treturn this.get('small_dialog_input_editor.stateID');\n\t\t},\n\t\tget INLINE_INPUT_EDITOR_STATE_ID() {\n\t\t\treturn this.get('inline_input_editor.stateID');\n\t\t},\n\t\tget INLINE_MENU_EDITOR_STATE_ID() {\n\t\t\treturn this.get('inline_menu_editor.stateID');\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/utils.js\":\n/*!***************************!*\\\n  !*** ./internal/utils.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\n{\n\tlet arrayFind;\n\tlet arrayFindIndex;\n\tconst array = {\n\t\tget find() {\n\t\t\tif (arrayFind) {\n\t\t\t\treturn arrayFind;\n\t\t\t}\n\t\t\tif (Array.prototype.find) {\n\t\t\t\tarrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\n\t\t\t} else {\n\t\t\t\tarrayFind = (arr, predicate) => {\n\t\t\t\t\tconst index = array.findIndex(arr, predicate);\n\t\t\t\t\treturn index >= 0 ? arr[index] : undefined;\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn arrayFind;\n\t\t},\n\t\tget findIndex() {\n\t\t\tif (arrayFindIndex) {\n\t\t\t\treturn arrayFindIndex;\n\t\t\t}\n\t\t\tif (Array.prototype.findIndex) {\n\t\t\t\tarrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\n\t\t\t} else {\n\t\t\t\tarrayFindIndex = (arr, predicate) => {\n\t\t\t\t\tconst length = arr.length;\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\tconst value = arr[i];\n\t\t\t\t\t\tif (predicate(value, i, arr)) {\n\t\t\t\t\t\t\treturn i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn arrayFindIndex;\n\t\t}\n\t};\n\n\tfunction isDef(data) {\n\t\treturn data !== null && typeof data !== 'undefined';\n\t}\n\tconst ua = window.navigator.userAgent.toLowerCase();\n\tconst IE = ua.match(/(msie)/) || ua.match(/trident/);\n\tconst Chrome = ua.indexOf('chrome') > -1 && ua.indexOf('edge') === -1;\n\tconst Firefox = ua.indexOf('firefox') > -1;\n\n\tfunction setReadonly(obj, name, value) {\n\t\tObject.defineProperty(obj, name, {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue\n\t\t});\n\t}\n\n\tfunction each(obj, fn) {\n\t\tfor (const key in obj) {\n\t\t\tfn(obj[key], key, obj);\n\t\t}\n\t}\n\n\tfunction isObject(obj) {\n\t\treturn obj === Object(obj);\n\t}\n\n\tfunction extend(...args) {\n\t\tconst result = {};\n\t\targs.forEach(source => {\n\t\t\tfor (const key in source) {\n\t\t\t\tObject.defineProperty(result, key, {\n\t\t\t\t\tget() {\n\t\t\t\t\t\treturn source[key];\n\t\t\t\t\t},\n\t\t\t\t\tset(val) {\n\t\t\t\t\t\tsource[key] = val;\n\t\t\t\t\t},\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tenumerable: true\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\tfunction isDescendantElement(root, target) {\n\t\twhile (target.parentElement) {\n\t\t\tconst p = target.parentElement;\n\t\t\tif (root === p) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\ttarget = p;\n\t\t}\n\t\treturn false;\n\t}\n\tfunction applyChainSafe(obj, fn, ...names) {\n\t\tlet value = obj;\n\t\tfor (let i = 0; i < names.length && isDef(value); i++) {\n\t\t\tvalue = fn(value, names[i]);\n\t\t}\n\t\treturn value;\n\t}\n\tfunction getChainSafe(obj, ...names) {\n\t\treturn applyChainSafe(obj, (val, name) => val[name], ...names);\n\t}\n\tfunction getOrApply(value, ...args) {\n\t\tif (typeof value === 'function') {\n\t\t\treturn value(...args);\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t}\n\tfunction endsWith(str, searchString, position) {\n\t\tconst subjectString = str.toString();\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n\t\t\tposition = subjectString.length;\n\t\t}\n\t\tposition -= searchString.length;\n\t\tconst lastIndex = subjectString.lastIndexOf(searchString, position);\n\t\treturn lastIndex !== -1 && lastIndex === position;\n\t}\n\tconst isPromise = data => data && typeof data.then === 'function';\n\tconst then = (result, callback) => isPromise(result) ? result.then(r => callback(r)) : callback(result);\n\tfunction getMouseButtons(e) {\n\t\tif (isDef(e.buttons)) {\n\t\t\treturn e.buttons;\n\t\t}\n\t\t/*for legacy*/\n\t\tif (isDef(e.which)) {\n\t\t\tif (e.which === 3) {\n\t\t\t\t//right?\n\t\t\t\treturn 4;\n\t\t\t}\n\t\t\tif (e.which === 2) {\n\t\t\t\t//middle?\n\t\t\t\treturn 4;\n\t\t\t}\n\t\t\treturn e.which; //left or no\n\t\t}\n\n\t\tif (e.button === 0 || e.button === 1) {\n\t\t\treturn 1; //candidate left\n\t\t}\n\t\tif (e.button === 2) {\n\t\t\treturn 2; // right\n\t\t}\n\t\treturn 0; //no or middle?\n\t}\n\tfunction getKeyCode(e) {\n\t\treturn e.keyCode || e.which;\n\t}\n\tfunction isTouchEvent(e) {\n\t\treturn !!e.changedTouches;\n\t}\n\tfunction getIgnoreCase(obj, name) {\n\t\tif (obj[name]) {\n\t\t\treturn obj[name];\n\t\t}\n\t\tconst l = name.toLowerCase();\n\t\tif (obj[l]) {\n\t\t\treturn obj[l];\n\t\t}\n\t\tconst u = name.toLowerCase();\n\t\tif (obj[u]) {\n\t\t\treturn obj[u];\n\t\t}\n\t\tfor (const k in obj) {\n\t\t\tif (k.toLowerCase() === l) {\n\t\t\t\treturn obj[k];\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\tfunction cancel(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t}\n\n\tfunction toBoxArray(obj) {\n\t\tif (!__webpack_provided_Array_dot_isArray(obj)) {\n\t\t\treturn [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\n\t\t}\n\t\tif (obj.length === 3) {\n\t\t\treturn [obj[0] /*top*/, obj[1] /*right*/, obj[2] /*bottom*/, obj[1] /*left*/];\n\t\t}\n\t\tif (obj.length === 2) {\n\t\t\treturn [obj[0] /*top*/, obj[1] /*right*/, obj[0] /*bottom*/, obj[1] /*left*/];\n\t\t}\n\t\tif (obj.length === 1) {\n\t\t\treturn [obj[0] /*top*/, obj[0] /*right*/, obj[0] /*bottom*/, obj[0] /*left*/];\n\t\t}\n\t\treturn obj;\n\t}\n\n\t// Chrome 33554431\n\t// FireFox 17895588\n\t// IE 10737433\n\tmodule.exports = {\n\t\tisDef,\n\t\tbrowser: {\n\t\t\tIE,\n\t\t\tChrome,\n\t\t\tFirefox,\n\t\t\theightLimit: Chrome ? 33554431 : Firefox ? 17895588 : 10737433 // default IE limit\n\t\t},\n\t\textend,\n\t\tisDescendantElement,\n\t\tgetChainSafe,\n\t\tapplyChainSafe,\n\t\tgetOrApply,\n\t\tgetIgnoreCase,\n\t\tisPromise,\n\t\tthen,\n\t\tarray,\n\t\tobj: {\n\t\t\tsetReadonly,\n\t\t\teach,\n\t\t\tisObject\n\t\t},\n\t\tstr: {\n\t\t\tendsWith\n\t\t},\n\t\tevent: {\n\t\t\tgetMouseButtons,\n\t\t\tgetKeyCode,\n\t\t\tisTouchEvent,\n\t\t\tcancel\n\t\t},\n\t\tstyle: {\n\t\t\ttoBoxArray\n\t\t},\n\t\temptyFn() {}\n\t};\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./list-grid/EVENT_TYPE.js\":\n/*!*********************************!*\\\n  !*** ./list-grid/EVENT_TYPE.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { extend } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\nconst DrawGrid = __webpack_require__(/*! ../core/DrawGrid */ \"./core/DrawGrid.js\");\nconst EVENT_TYPE = extend(DrawGrid.EVENT_TYPE, {\n\tCHANGED_VALUE: 'changed_value'\n});\nmodule.exports = EVENT_TYPE;\n\n/***/ }),\n\n/***/ \"./main.js\":\n/*!*****************!*\\\n  !*** ./main.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst core = __webpack_require__(/*! ./core */ \"./core.js\");\n\tconst tools = __webpack_require__(/*! ./tools */ \"./tools.js\");\n\tconst columns = __webpack_require__(/*! ./columns */ \"./columns.js\");\n\tconst themes = __webpack_require__(/*! ./themes */ \"./themes.js\");\n\tconst data = __webpack_require__(/*! ./data */ \"./data.js\");\n\n\tconst ListGrid = __webpack_require__(/*! ./ListGrid */ \"./ListGrid.js\");\n\tconst GridCanvasHelper = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\n\tconst icons = __webpack_require__(/*! ./icons */ \"./icons.js\");\n\tconst register = __webpack_require__(/*! ./register */ \"./register.js\");\n\n\t/**\r\n  * Cheetah Grid\r\n  * @type {Object}\r\n  * @namespace cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tcore,\n\t\ttools,\n\n\t\t// impl Grids\n\t\tListGrid,\n\n\t\t// objects\n\t\tcolumns,\n\t\tthemes,\n\t\tdata,\n\n\t\t// helper\n\t\tGridCanvasHelper,\n\t\tget icons() {\n\t\t\treturn icons.get();\n\t\t},\n\n\t\t//plugin registers\n\t\tregister,\n\n\t\tget _internal() {\n\t\t\tconsole.warn('use internal!!');\n\t\t\treturn {\n\t\t\t\tcolor: __webpack_require__(/*! ./internal/color */ \"./internal/color.js\"),\n\t\t\t\tsort: __webpack_require__(/*! ./internal/sort */ \"./internal/sort.js\"),\n\t\t\t\tcalc: __webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\"),\n\t\t\t\tsymbolManager: __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\"),\n\t\t\t\tpath2DManager: __webpack_require__(/*! ./internal/path2DManager */ \"./internal/path2DManager.js\")\n\t\t\t};\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./plugins/icons.js\":\n/*!**************************!*\\\n  !*** ./plugins/icons.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {};\n\n/***/ }),\n\n/***/ \"./plugins/themes.js\":\n/*!***************************!*\\\n  !*** ./plugins/themes.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {};\n\n/***/ }),\n\n/***/ \"./register.js\":\n/*!*********************!*\\\n  !*** ./register.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst themePlugins = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\nconst iconPlugins = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\n\nfunction register(obj, name, value) {\n\tif (value) {\n\t\tconst old = obj[name];\n\t\tobj[name] = value;\n\t\treturn old;\n\t} else {\n\t\treturn obj[name];\n\t}\n}\nfunction registers(obj, values) {\n\tfor (const k in values) {\n\t\tobj[k] = values[k];\n\t}\n}\nmodule.exports = {\n\ttheme(name, theme) {\n\t\treturn register(themePlugins, name, theme);\n\t},\n\ticon(name, icon) {\n\t\treturn register(iconPlugins, name, icon);\n\t},\n\ticons(icons) {\n\t\tregisters(iconPlugins, icons);\n\t}\n};\n\n/***/ }),\n\n/***/ \"./themes.js\":\n/*!*******************!*\\\n  !*** ./themes.js ***!\n  \\*******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { extend, getIgnoreCase } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\tconst theme = __webpack_require__(/*! ./themes/theme */ \"./themes/theme.js\");\n\tconst plugins = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\n\tconst BASIC = theme.create(__webpack_require__(/*! ./themes/BASIC */ \"./themes/BASIC.js\"));\n\tconst MATERIAL_DESIGN = theme.create(__webpack_require__(/*! ./themes/MATERIAL_DESIGN */ \"./themes/MATERIAL_DESIGN.js\"));\n\n\tconst builtin = {\n\t\tBASIC,\n\t\tMATERIAL_DESIGN\n\t};\n\tlet defTheme = theme.create({});\n\t/**\r\n  * themes\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.themes\r\n  * @memberof cheetahGrid\r\n  */\n\tconst themes = {\n\t\tget default() {\n\t\t\treturn defTheme;\n\t\t},\n\t\tset default(defaultTheme) {\n\t\t\tdefTheme = defaultTheme;\n\t\t},\n\t\ttheme,\n\t\tof(value) {\n\t\t\tif (!value) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (typeof value === 'string') {\n\t\t\t\tconst t = getIgnoreCase(themes.choices, value);\n\t\t\t\tif (t) {\n\t\t\t\t\treturn t;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\t/**\r\n   * @namespace cheetahGrid.themes.choices\r\n   */\n\t\tget choices() {\n\t\t\treturn extend(builtin, plugins);\n\t\t}\n\t};\n\tmodule.exports = themes;\n}\n\n/***/ }),\n\n/***/ \"./themes/BASIC.js\":\n/*!*************************!*\\\n  !*** ./themes/BASIC.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint no-bitwise:0*/\n\n\nfunction DEFAULT_BG_COLOR(args) {\n\tconst {\n\t\trow,\n\t\tgrid: { frozenRowCount }\n\t} = args;\n\tif (!(row - frozenRowCount & 1)) {\n\t\treturn '#FFF';\n\t} else {\n\t\treturn '#F6F6F6';\n\t}\n}\nconst cacheLinearGradient = {};\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\n\tlet stop;\n\tconst stopsKey = [];\n\tfor (stop in colorStops) {\n\t\tstopsKey.push(`${stop}@${colorStops[stop]}`);\n\t}\n\tconst key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(',')}`;\n\tconst ret = cacheLinearGradient[key];\n\tif (ret) {\n\t\treturn ret;\n\t}\n\tconst grad = context.createLinearGradient(left, top, left, bottom);\n\tfor (stop in colorStops) {\n\t\tgrad.addColorStop(stop, colorStops[stop]);\n\t}\n\treturn cacheLinearGradient[key] = grad;\n}\nfunction FROZEN_ROWS_BG_COLOR(args) {\n\tconst {\n\t\tcol,\n\t\tgrid,\n\t\tgrid: { frozenRowCount },\n\t\tcontext\n\t} = args;\n\tconst { left, top } = grid.getCellRelativeRect(col, 0);\n\tconst { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\n\n\treturn getLinearGradient(context, left, top, left, bottom, { 0: '#FFF', 1: '#D3D3D3' });\n}\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\nmodule.exports = {\n\tcolor: '#000',\n\tdefaultBgColor: DEFAULT_BG_COLOR,\n\tfrozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\n\thiliteBorderColor: '#5E9ED6',\n\tselectionBgColor: '#CCE0FF',\n\tborderColor: '#000',\n\tcheckbox: {\n\t\tuncheckBgColor: '#FFF',\n\t\tcheckBgColor: 'rgb(76, 73, 72)'\n\t},\n\tbutton: {\n\t\tcolor: '#FFF',\n\t\tbgColor: '#2196F3'\n\t},\n\tunderlayBackgroundColor: '#F6F6F6'\n};\n\n/***/ }),\n\n/***/ \"./themes/MATERIAL_DESIGN.js\":\n/*!***********************************!*\\\n  !*** ./themes/MATERIAL_DESIGN.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint no-bitwise:0*/\n\n\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\n\tconst {\n\t\trow,\n\t\tgrid: { frozenRowCount }\n\t} = args;\n\tif (frozenRowCount - 1 === row) {\n\t\treturn ['#f2f2f2', '#f2f2f2', '#ccc7c7', '#f2f2f2'];\n\t} else {\n\t\treturn ['#f2f2f2'];\n\t}\n}\nfunction BORDER_COLOR(args) {\n\tconst {\n\t\tcol,\n\t\tgrid: { colCount }\n\t} = args;\n\tif (colCount - 1 === col) {\n\t\treturn ['#ccc7c7', '#f2f2f2', '#ccc7c7', null];\n\t} else {\n\t\treturn ['#ccc7c7', null];\n\t}\n}\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\nmodule.exports = {\n\tcolor: 'rgba(0, 0, 0, 0.87)',\n\tdefaultBgColor: '#FFF',\n\tfrozenRowsBgColor: '#FFF',\n\tfrozenRowsColor: 'rgba(0, 0, 0, 0.54)',\n\thiliteBorderColor: '#5E9ED6',\n\tselectionBgColor: '#CCE0FF',\n\tborderColor: BORDER_COLOR,\n\tfrozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\n\tcheckbox: {\n\t\tuncheckBgColor: '#FFF',\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\n\t\tborderColor: 'rgba(0, 0, 0, 0.26)'\n\t},\n\tbutton: {\n\t\tcolor: '#FFF',\n\t\tbgColor: '#2196F3'\n\t},\n\tunderlayBackgroundColor: '#FFF'\n};\n\n/***/ }),\n\n/***/ \"./themes/theme.js\":\n/*!*************************!*\\\n  !*** ./themes/theme.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint no-bitwise:0*/\n\n\n{\n\tconst { getChainSafe } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\tconst defaultTheme = __webpack_require__(/*! ./MATERIAL_DESIGN */ \"./themes/MATERIAL_DESIGN.js\");\n\n\tfunction getProp(obj, superObj, names, defNames) {\n\t\treturn getChainSafe(obj, ...names) || defNames && getChainSafe(obj, ...defNames) || getChainSafe(superObj, ...names);\n\t}\n\tfunction createTheme(obj = {}, superTheme = defaultTheme) {\n\t\treturn {\n\t\t\tget font() {\n\t\t\t\treturn getProp(obj, superTheme, ['font']);\n\t\t\t},\n\t\t\tget underlayBackgroundColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['underlayBackgroundColor']);\n\t\t\t},\n\t\t\t// color\n\t\t\tget color() {\n\t\t\t\treturn getProp(obj, superTheme, ['color']);\n\t\t\t},\n\t\t\tget frozenRowsColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsColor'], ['color']);\n\t\t\t},\n\t\t\t// background\n\t\t\tget defaultBgColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['defaultBgColor']);\n\t\t\t},\n\t\t\tget frozenRowsBgColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBgColor'], ['defaultBgColor']);\n\t\t\t},\n\t\t\tget selectionBgColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['selectionBgColor'], ['defaultBgColor']);\n\t\t\t},\n\t\t\t// border\n\t\t\tget borderColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['borderColor']);\n\t\t\t},\n\t\t\tget frozenRowsBorderColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBorderColor'], ['borderColor']);\n\t\t\t},\n\t\t\tget hiliteBorderColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['hiliteBorderColor'], ['borderColor']);\n\t\t\t},\n\t\t\tget checkbox() {\n\t\t\t\treturn this._checkbox || (this._checkbox = {\n\t\t\t\t\tget uncheckBgColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'uncheckBgColor'], ['defaultBgColor']);\n\t\t\t\t\t},\n\t\t\t\t\tget checkBgColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'checkBgColor'], ['defaultBgColor']);\n\t\t\t\t\t},\n\t\t\t\t\tget borderColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'borderColor'], ['borderColor']);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tget button() {\n\t\t\t\treturn this._button || (this._button = {\n\t\t\t\t\tget color() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'color'], ['color']);\n\t\t\t\t\t},\n\t\t\t\t\tget bgColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'bgColor'], ['defaultBgColor']);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\textends(obj) {\n\t\t\t\treturn createTheme(obj, this);\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\r\n  * theme object\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.themes.theme\r\n  * @memberof cheetahGrid.themes\r\n  */\n\tmodule.exports = {\n\t\tcreate(obj) {\n\t\t\treturn createTheme(obj);\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./tools.js\":\n/*!******************!*\\\n  !*** ./tools.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst canvashelper = __webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\");\n\n\t/**\r\n  * tools\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.tools\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tcanvashelper\n\t};\n}\n\n/***/ }),\n\n/***/ \"./tools/canvashelper.js\":\n/*!*******************************!*\\\n  !*** ./tools/canvashelper.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { calcBasePosition, calcStartPosition } = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\tconst { ceil, PI } = Math;\n\n\tfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\n\t\tfunction strokeRectLines(positions) {\n\t\t\tfor (let i = 0; i < borderColors.length; i++) {\n\t\t\t\tconst color = borderColors[i];\n\t\t\t\tconst preColor = borderColors[i - 1];\n\t\t\t\tif (color) {\n\t\t\t\t\tif (preColor !== color) {\n\t\t\t\t\t\tif (preColor) {\n\t\t\t\t\t\t\tctx.strokeStyle = preColor;\n\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst pos1 = positions[i];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(pos1.x, pos1.y);\n\t\t\t\t\t}\n\t\t\t\t\tconst pos2 = positions[i + 1];\n\t\t\t\t\tctx.lineTo(pos2.x, pos2.y);\n\t\t\t\t} else {\n\t\t\t\t\tif (preColor) {\n\t\t\t\t\t\tctx.strokeStyle = preColor;\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst preColor = borderColors[borderColors.length - 1];\n\t\t\tif (preColor) {\n\t\t\t\tctx.strokeStyle = preColor;\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\t\tif (borderColors[0] === borderColors[1] && borderColors[0] === borderColors[2] && borderColors[0] === borderColors[3]) {\n\t\t\tif (borderColors[0]) {\n\t\t\t\tctx.strokeStyle = borderColors[0];\n\t\t\t\tctx.strokeRect(left, top, width, height);\n\t\t\t}\n\t\t} else {\n\t\t\tstrokeRectLines([{ x: left, y: top }, { x: left + width, y: top }, { x: left + width, y: top + height }, { x: left, y: top + height }, { x: left, y: top }]);\n\t\t}\n\t}\n\tfunction roundRect(ctx, left, top, width, height, radius) {\n\t\tctx.beginPath();\n\t\tctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\n\t\tctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\n\t\tctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\n\t\tctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\n\t\tctx.closePath();\n\t}\n\tfunction fillRoundRect(ctx, left, top, width, height, radius) {\n\t\troundRect(ctx, left, top, width, height, radius);\n\t\tctx.fill();\n\t}\n\tfunction strokeRoundRect(ctx, left, top, width, height, radius) {\n\t\troundRect(ctx, left, top, width, height, radius);\n\t\tctx.stroke();\n\t}\n\tfunction fillTextRect(ctx, text, left, top, width, height, {\n\t\toffset = 2,\n\t\tpadding\n\t} = {}) {\n\t\tconst rect = {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tright: left + width,\n\t\t\tbottom: top + height\n\t\t};\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t//clip\n\t\t\tctx.clip();\n\n\t\t\t//\n\t\t\tconst pos = calcBasePosition(ctx, rect, {\n\t\t\t\toffset,\n\t\t\t\tpadding\n\t\t\t});\n\n\t\t\tctx.fillText(text, pos.x, pos.y);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\tfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, {\n\t\toffset = 2,\n\t\tpadding\n\t} = {}) {\n\t\tconst rect = {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tright: left + width,\n\t\t\tbottom: top + height\n\t\t};\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t//clip\n\t\t\tctx.clip();\n\n\t\t\t//\n\t\t\tconst pos = calcStartPosition(ctx, rect, destWidth, destHeight, {\n\t\t\t\toffset,\n\t\t\t\tpadding\n\t\t\t});\n\n\t\t\tctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\n\t/**\r\n  * Returns an object containing the width of the checkbox.\r\n  * @param  {CanvasRenderingContext2D} ctx canvas context\r\n  * @return {Object} Object containing the width of the checkbox\r\n  * @memberof cheetahGrid.tools.canvashelper\r\n  */\n\tfunction measureCheckbox(ctx) {\n\t\treturn {\n\t\t\twidth: ctx.measureText('').width\n\t\t};\n\t}\n\n\t/**\r\n  * draw Checkbox\r\n  * @param  {CanvasRenderingContext2D} ctx canvas context\r\n  * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n  * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n  * @param  {boolean|number} check checkbox check status\r\n  * @param  {object} option option\r\n  * @return {void}\r\n  * @memberof cheetahGrid.tools.canvashelper\r\n  */\n\tfunction drawCheckbox(ctx, x, y, check, {\n\t\tuncheckBgColor = '#FFF',\n\t\tcheckBgColor = 'rgb(76, 73, 72)',\n\t\tborderColor = '#000',\n\t\tboxSize = measureCheckbox(ctx).width\n\t} = {}) {\n\t\tconst checkPoint = typeof check === 'number' ? check > 1 ? 1 : check : 1;\n\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.fillStyle = check ? checkBgColor : uncheckBgColor;\n\n\t\t\tfillRoundRect(ctx, ceil(x) - 1, ceil(y) - 1, ceil(boxSize + 1), ceil(boxSize + 1), boxSize / 5);\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.strokeStyle = borderColor;\n\t\t\tstrokeRoundRect(ctx, ceil(x) - 0.5, ceil(y) - 0.5, ceil(boxSize), ceil(boxSize), boxSize / 5);\n\t\t\tif (check) {\n\t\t\t\tctx.lineWidth = ceil(boxSize / 10);\n\t\t\t\tctx.strokeStyle = uncheckBgColor;\n\t\t\t\tlet leftWidth = boxSize / 4;\n\t\t\t\tlet rightWidth = boxSize / 2 * 0.9;\n\t\t\t\tconst leftLeftPos = x + boxSize * 0.2;\n\t\t\t\tconst leftTopPos = y + boxSize / 2;\n\n\t\t\t\tif (checkPoint < 0.5) {\n\t\t\t\t\tleftWidth = leftWidth * (checkPoint * 2);\n\t\t\t\t}\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(leftLeftPos, leftTopPos);\n\t\t\t\tctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\n\t\t\t\tif (checkPoint > 0.5) {\n\t\t\t\t\tif (checkPoint < 1) {\n\t\t\t\t\t\trightWidth = rightWidth * ((checkPoint - 0.5) * 2);\n\t\t\t\t\t}\n\t\t\t\t\tctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\n\t\t\t\t}\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\tfunction drawButton(ctx, left, top, width, height, option = {}) {\n\t\tconst {\n\t\t\tbackgroundColor = '#FFF',\n\t\t\tbgColor = backgroundColor,\n\t\t\tradius = 4,\n\t\t\tshadow = {}\n\t\t} = option;\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.fillStyle = bgColor;\n\n\t\t\tif (shadow) {\n\t\t\t\tconst {\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, 0.24)',\n\t\t\t\t\tblur = 1,\n\t\t\t\t\toffsetX = 0,\n\t\t\t\t\toffsetY = 2,\n\t\t\t\t\toffset: {\n\t\t\t\t\t\tx: ox = offsetX,\n\t\t\t\t\t\ty: oy = offsetY\n\t\t\t\t\t} = {}\n\t\t\t\t} = shadow;\n\t\t\t\tctx.shadowColor = color;\n\t\t\t\tctx.shadowBlur = blur; //\n\t\t\t\tctx.shadowOffsetX = ox;\n\t\t\t\tctx.shadowOffsetY = oy;\n\t\t\t}\n\n\t\t\tfillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\n\t/**\r\n  * canvashelper\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.tools.canvashelper\r\n  * @memberof cheetahGrid.tools\r\n  */\n\tconst canvashelper = {\n\t\troundRect,\n\t\tfillRoundRect,\n\t\tstrokeRoundRect,\n\t\tdrawCheckbox,\n\t\tmeasureCheckbox,\n\t\tfillTextRect,\n\t\tdrawButton,\n\t\tdrawInlineImageRect,\n\t\tstrokeColorsRect\n\t};\n\n\tmodule.exports = canvashelper;\n}\n\n/***/ })\n\n/******/ });\n});\n}).call(typeof global !== \"undefined\" ? global : window);","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;user-select:none}.cheetah-grid__message-element--hidden{opacity:0;display:none}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}.cheetah-grid__message-element{border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element.helper-text--right-justified{text-align:right}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons\\content\\svg\\production\\ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons\\image\\svg\\production\\ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {calcStartPosition} = require('./internal/canvases');\r\n\tconst inlines = require('./element/inlines');\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\tconst themes = require('./themes');\r\n\tconst {colorToRGB} = require('./internal/color');\r\n\tconst Rect = require('./internal/Rect');\r\n\tconst {getChainSafe, getOrApply, style: {toBoxArray}} = require('./internal/utils');\r\n\tconst fonts = require('./internal/fonts');\r\n\tconst calc = require('./internal/calc');\r\n\r\n\tfunction invalidateCell(context, grid) {\r\n\t\tconst {col, row} = context;\r\n\t\tgrid.invalidateCell(col, row);\r\n\t}\r\n\tfunction getColor(color, col, row, grid, context) {\r\n\t\treturn getOrApply(color, {\r\n\t\t\tcol,\r\n\t\t\trow,\r\n\t\t\tgrid,\r\n\t\t\tcontext,\r\n\t\t});\r\n\t}\r\n\tfunction getThemeColor(grid, ...names) {\r\n\t\treturn getChainSafe(grid.theme, ...names) || getChainSafe(themes.default, ...names);\r\n\t}\r\n\tfunction testFontLoad(font, value, context, grid) {\r\n\t\tif (font) {\r\n\t\t\tif (!fonts.check(font, value)) {\r\n\t\t\t\tfonts.load(font, value, () => invalidateCell(context, grid));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction drawInlines(ctx, inlines, rect, offset, col, row, grid) {\r\n\t\tfunction drawInline(inline, offsetLeft, offsetRight) {\r\n\t\t\tif (inline.canDraw()) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n\t\t\t\t\tctx.font = inline.font() || ctx.font;\r\n\t\t\t\t\tinline.draw({\r\n\t\t\t\t\t\tctx,\r\n\t\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\t\trect,\r\n\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\t\toffsetRight,\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tinline.onReady(() => grid.invalidateCell(col, row));\r\n\t\t\t\t//noop\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (inlines.length === 1) {\r\n\t\t\t//1\r\n\t\t\tconst inline = inlines[0];\r\n\t\t\tdrawInline(inline, 0, 0);\r\n\t\t} else {\r\n\t\t\tconst inlineWidths = inlines.map((inline) => (inline.width({ctx}) || 0) - 0);\r\n\t\t\tlet offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n\r\n\t\t\tlet offsetLeft = 0;\r\n\t\t\tinlines.forEach((inline, index) => {\r\n\t\t\t\tconst inlineWidth = inlineWidths[index];\r\n\t\t\t\toffsetRight -= inlineWidth;\r\n\t\t\t\tdrawInline(inline, offsetLeft, offsetRight);\r\n\t\t\t\toffsetLeft += inlineWidth;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _inlineRect(grid, ctx, inline, rect, col, row,\r\n\t\t\t{\r\n\t\t\t\toffset,\r\n\t\t\t\tcolor,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons,\r\n\t\t\t} = {}) {\r\n\r\n\t\t//style\r\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tctx.font = font || ctx.font;\r\n\r\n\t\tconst actInlines = inlines.buildInlines(icons, inline);\r\n\t\tdrawInlines(ctx, actInlines, rect, offset, col, row, grid);\r\n\t}\r\n\r\n\r\n\tfunction drawCheckbox(ctx, rect, check, helper,\r\n\t\t\t{\r\n\t\t\t\tanimElapsedTime = 1,\r\n\t\t\t\tuncheckBgColor = helper.theme.checkbox.uncheckBgColor,\r\n\t\t\t\tcheckBgColor = helper.theme.checkbox.checkBgColor,\r\n\t\t\t\tborderColor = helper.theme.checkbox.borderColor,\r\n\t\t\t\ttextAlign = 'center',\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t} = {}) {\r\n\t\tconst boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tconst pos = calcStartPosition(ctx, rect, boxWidth + 1/*+1*/, boxWidth + 1/*+1*/);\r\n\t\tif (0 < animElapsedTime && animElapsedTime < 1) {\r\n\t\t\tconst uncheckBgRGB = colorToRGB(uncheckBgColor);\r\n\t\t\tconst checkBgRGB = colorToRGB(checkBgColor);\r\n\t\t\tconst checkRGB = (colorName) => {\r\n\t\t\t\tconst start = uncheckBgRGB[colorName];\r\n\t\t\t\tconst end = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = start - end;\r\n\t\t\t\treturn Math.ceil(start - diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tconst uncheckRGB = (colorName) => {\r\n\t\t\t\tconst end = uncheckBgRGB[colorName];\r\n\t\t\t\tconst start = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = end - start;\r\n\t\t\t\treturn Math.ceil(start + diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tuncheckBgColor = check ? uncheckBgColor : `rgb(${uncheckRGB('r')} , ${uncheckRGB('g')}, ${uncheckRGB('b')})`;\r\n\t\t\tcheckBgColor = `rgb(${checkRGB('r')} , ${checkRGB('g')}, ${checkRGB('b')})`;\r\n\t\t}\r\n\r\n\t\tcanvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n\t\t\tuncheckBgColor,\r\n\t\t\tcheckBgColor,\r\n\t\t\tborderColor,\r\n\t\t});\r\n\t}\r\n\r\n\tclass Theme {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t}\r\n\t\tgetThemeColor(...name) {\r\n\t\t\treturn getThemeColor(this._grid, ...name);\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn getThemeColor(this._grid, 'font');\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'underlayBackgroundColor');\r\n\t\t}\r\n\t\t// color\r\n\t\tget color() {\r\n\t\t\treturn getThemeColor(this._grid, 'color');\r\n\t\t}\r\n\t\tget frozenRowsColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsColor');\r\n\t\t}\r\n\t\t// background\r\n\t\tget defaultBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'defaultBgColor');\r\n\t\t}\r\n\t\tget frozenRowsBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBgColor');\r\n\t\t}\r\n\t\tget selectionBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'selectionBgColor');\r\n\t\t}\r\n\t\t// border\r\n\t\tget borderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'borderColor');\r\n\t\t}\r\n\t\tget frozenRowsBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBorderColor');\r\n\t\t}\r\n\t\tget hiliteBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'hiliteBorderColor');\r\n\t\t}\r\n\t\tget checkbox() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'uncheckBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'checkBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget borderColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'borderColor');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tget button() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._button || (this._button = {\r\n\t\t\t\tget color() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'color');\r\n\t\t\t\t},\r\n\t\t\t\tget bgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'bgColor');\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\r\n\tfunction strokeRect(ctx, color, left, top, width, height) {\r\n\t\tif (!Array.isArray(color)) {\r\n\t\t\tif (color) {\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst borderColors = toBoxArray(color);\r\n\t\t\tcanvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\tclass GridCanvasHelper {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._theme = new Theme(grid);\r\n\t\t}\r\n\t\tcreateCalculator(context) {\r\n\t\t\treturn {\r\n\t\t\t\tcalcWidth(width) {\r\n\t\t\t\t\treturn calc.toPx(width, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.width;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcalcHeight(height) {\r\n\t\t\t\t\treturn calc.toPx(height, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.height;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetColor(color, col, row, ctx) {\r\n\t\t\treturn getColor(color, col, row, this._grid, ctx);\r\n\t\t}\r\n\t\ttoBoxArray(obj) {\r\n\t\t\treturn toBoxArray(obj);\r\n\t\t}\r\n\t\ttoBoxPixelArray(value, context) {\r\n\t\t\tif (typeof value === 'string' || Array.isArray(value)) {\r\n\t\t\t\tconst calculator = this.createCalculator(context);\r\n\t\t\t\tconst box = toBoxArray(value);\r\n\t\t\t\treturn [\r\n\t\t\t\t\tcalculator.calcHeight(box[0]),\r\n\t\t\t\t\tcalculator.calcWidth(box[1]),\r\n\t\t\t\t\tcalculator.calcHeight(box[2]),\r\n\t\t\t\t\tcalculator.calcWidth(box[3]),\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn toBoxArray(value);\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this._theme;\r\n\t\t}\r\n\t\tdrawWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawBorderWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tlet clipLeft = drawRect.left;\r\n\t\t\t\tlet clipWidth = drawRect.width;\r\n\t\t\t\tif (drawRect.left === rect.left) {\r\n\t\t\t\t\tclipLeft += -1;\r\n\t\t\t\t\tclipWidth += 1;\r\n\t\t\t\t}\r\n\t\t\t\tlet clipTop = drawRect.top;\r\n\t\t\t\tlet clipHeight = drawRect.height;\r\n\t\t\t\tif (drawRect.top === rect.top) {\r\n\t\t\t\t\tclipTop += -1;\r\n\t\t\t\t\tclipHeight += 1;\r\n\t\t\t\t}\r\n\t\t\t\tctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\ttext(text, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tlet rect = context.getRect();\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tif (padding) {\r\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\r\n\t\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\t\t\t\t\trect = new Rect(left, top, width, height);\r\n\t\t\t\t}\r\n\t\t\t\t_inlineRect(this._grid, ctx, text, rect, col, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillText(text, x, y, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'top',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\tctx.fillText(text, x, y);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfillCell(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillCellWithState(context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\t\t\tthis.fillCell(context, option);\r\n\t\t}\r\n\t\tfillRect(rect, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfillRectWithState(rect, context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\r\n\t\t\tthis.fillRect(rect, context, option);\r\n\t\t}\r\n\t\tgetFillColorState(context, option = {}) {\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tif (!state.selected && state.selection) {\r\n\t\t\t\treturn this.theme.selectionBgColor;\r\n\t\t\t} else {\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\treturn this.theme.frozenRowsBgColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn option.fillColor || this.theme.defaultBgColor;\r\n\t\t}\r\n\t\tborder(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tborderColor = this.theme.borderColor,\r\n\t\t\t\t\tlineWidth = 1,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tif (lineWidth === 1) {\r\n\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n\t\t\t\t} else if (lineWidth === 2) {\r\n\t\t\t\t\tctx.lineWidth = 2;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\t\t\tconst startOffset = (lineWidth / 2) - 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors,\r\n\t\t\t\t\t\t\trect.left + startOffset,\r\n\t\t\t\t\t\t\trect.top + startOffset,\r\n\t\t\t\t\t\t\trect.width - lineWidth + 1,\r\n\t\t\t\t\t\t\trect.height - lineWidth + 1\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tborderWithState(context, option = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\t//\r\n\t\t\tif (state.selected) {\r\n\t\t\t\toption.borderColor = this.theme.hiliteBorderColor;\r\n\t\t\t\toption.lineWidth = 2;\r\n\t\t\t\tthis.border(context, option);\r\n\t\t\t} else {\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\toption.borderColor = this.theme.frozenRowsBorderColor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toption.lineWidth = 1;\r\n\t\t\t\tthis.border(context, option);\r\n\r\n\t\t\t\t//\r\n\t\t\t\tconst sel = this._grid.selection.select;\r\n\t\t\t\tif (sel.col + 1 === col && sel.row === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (sel.col === col && sel.row + 1 === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckbox(check, context, option = {}) {\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tdrawCheckbox(ctx, context.getRect(), check, this, option);\r\n\t\t\t});\r\n\t\t}\r\n\t\tbutton(caption, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor = this.theme.button.bgColor,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor = this.theme.button.color,\r\n\t\t\t\t\ttextAlign = 'center',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tpadding = this.toBoxPixelArray(padding || rect.height / 8, context);\r\n\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\r\n\t\t\t\tcanvashelper.drawButton(ctx, left, top, width, height, {\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t\tradius: rect.height / 8,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t});\r\n\t\t\t\t_inlineRect(this._grid, ctx, caption, new Rect(left, top, width, height),\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\ttestFontLoad(font, value, context) {\r\n\t\t\treturn testFontLoad(font, value, context, this._grid);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = GridCanvasHelper;\r\n}","'use strict';\r\n{\r\n\tconst {isDef, isPromise, then, obj: {isObject}} = require('./internal/utils');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\tconst columns = require('./columns');\r\n\tconst {BaseStyle} = columns.style;\r\n\tconst headerType = require('./header/type');\r\n\tconst {BaseStyle: HeaderBaseStyle} = require('./header/style');\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\tconst {DataSource, CachedDataSource} = require('./data');\r\n\tconst themes = require('./themes');\r\n\tconst icons = require('./internal/icons');\r\n\tconst MessageHandler = require('./columns/message/MessageHandler');\r\n\tconst EVENT_TYPE = require('./list-grid/EVENT_TYPE');\r\n\t\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('./internal/symbolManager');\r\n\r\n\tlet headerId = 0;\r\n\t//private methods\r\n\tfunction _getHeaderCellRange(grid, col, row) {\r\n\t\treturn grid[_].headerMap.getHeaderCellRange(col, row);\r\n\t}\r\n\tfunction _updateRect(grid, col, row, context) {\r\n\t\tconst rect = context.getRect();\r\n\t\tconst {\r\n\t\t\tstartCol,\r\n\t\t\tendCol,\r\n\t\t\tstartRow,\r\n\t\t\tendRow,\r\n\t\t} = _getHeaderCellRange(grid, col, row);\r\n\t\tfor (let c = col - 1; c >= startCol; c--) {\r\n\t\t\trect.left -= grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let c = col + 1; c <= endCol; c++) {\r\n\t\t\trect.right += grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let r = row - 1; r >= startRow; r--) {\r\n\t\t\trect.top -= grid.getRowHeight(r);\r\n\t\t}\r\n\t\tfor (let r = row + 1; r <= endRow; r++) {\r\n\t\t\trect.bottom += grid.getRowHeight(r);\r\n\t\t}\r\n\t\tcontext.setRect(rect);\r\n\t}\r\n\tfunction _getCellValue(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn grid[_].headerMap.getCell(col, row).caption;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.get;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, field, row);\r\n\t\t}\r\n\t}\r\n\tfunction _setCellValue(grid, col, row, value) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\t// nop\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.set;\r\n\t\t\t}\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\tconst res = grid[_].dataSource.setField(index, field, value);\r\n\t\t\treturn isPromise(res) ? res : true;\r\n\t\t}\r\n\t}\r\n\tfunction _getCellMessage(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst {message} = grid[_].headerMap.columns[col];\r\n\t\t\tif (!message) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, message, row);\r\n\t\t}\r\n\t}\r\n\tfunction _getCellIcon0(grid, icon, row) {\r\n\t\tif (!isDef(icon)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (Array.isArray(icon)) {\r\n\t\t\treturn icon.map((i) => _getCellIcon0(grid, i, row));\r\n\t\t}\r\n\t\tif (!isObject(icon)) {\r\n\t\t\treturn _getField(grid, icon, row);\r\n\t\t}\r\n\t\tconst retIcon = {};\r\n\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\tif (icon[k]) {\r\n\t\t\t\tconst f = _getField(grid, icon[k], row);\r\n\t\t\t\tif (isDef(f)) {\r\n\t\t\t\t\tretIcon[k] = f;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!_hasField(grid, icon[k], row)) {\r\n\t\t\t\t\t\tretIcon[k] = icon[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn retIcon;\r\n\t}\r\n\tfunction _getCellIcon(grid, col, row) {\r\n\t\tconst {icon} = grid[_].headerMap.columns[col];\r\n\t\treturn _getCellIcon0(grid, icon, row);\r\n\t}\r\n\tfunction _getField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.getField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _hasField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.hasField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _onDrawValue(grid, cellValue, context, {col, row}, style, draw) {\r\n\t\tconst helper = grid[_].gridCanvasHelper;\r\n\r\n\t\tconst drawCellBg = ({bgColor} = {}) => {\r\n\t\t\tconst fillOpt = {\r\n\t\t\t\tfillColor: bgColor,\r\n\t\t\t};\r\n\t\t\t//cell\r\n\t\t\thelper.fillCellWithState(context, fillOpt);\r\n\t\t};\r\n\t\tconst drawCellBorder = () => {\r\n\r\n\t\t\tif (context.col === grid.frozenColCount - 1) {\r\n\t\t\t\t//\r\n\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor\r\n\t\t\t\t\t\t: helper.theme.frozenRowsBorderColor;\r\n\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(borderColor, context.col, context.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.right - 2.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.right - 2.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (context.row < grid[_].headerMap.rowCount) {\r\n\t\t\t\t_headerBorderWithState(grid, helper, context);\r\n\t\t\t} else {\r\n\t\t\t\thelper.borderWithState(context);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tconst drawCellBase = ({bgColor} = {}) => {\r\n\t\t\tdrawCellBg({bgColor});\r\n\t\t\tdrawCellBorder();\r\n\t\t};\r\n\t\tconst info = {\r\n\t\t\tgetRecord: () => grid.getRowRecord(row),\r\n\t\t\tgetIcon: () => _getCellIcon(grid, col, row),\r\n\t\t\tgetMessage: () => _getCellMessage(grid, col, row),\r\n\t\t\tmessageHandler: grid[_].messageHandler,\r\n\t\t\tstyle,\r\n\t\t\tdrawCellBase,\r\n\t\t\tdrawCellBg,\r\n\t\t\tdrawCellBorder,\r\n\t\t};\r\n\r\n\t\treturn draw(cellValue, info, context, grid);\r\n\t}\r\n\tfunction _headerBorderWithState(grid, helper, context) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst sel = grid.selection.select;\r\n\t\tif (sel.row >= grid[_].headerMap.rowCount) {\r\n\t\t\t//\r\n\t\t\thelper.borderWithState(context);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst {id} = grid[_].headerMap.getCell(col, row);\r\n\r\n\t\tconst rect = context.getRect();\r\n\t\tconst option = {};\r\n\r\n\t\tconst {id: selId} = grid[_].headerMap.getCell(sel.col, sel.row);\r\n\t\t//\r\n\t\tif (selId === id) {\r\n\t\t\toption.borderColor = helper.theme.hiliteBorderColor;\r\n\t\t\toption.lineWidth = 2;\r\n\t\t\thelper.border(context, option);\r\n\t\t} else {\r\n\t\t\toption.lineWidth = 1;\r\n\t\t\t// header color\r\n\t\t\tconst isFrozenCell = grid.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\toption.borderColor = helper.theme.frozenRowsBorderColor;\r\n\t\t\t}\r\n\t\t\thelper.border(context, option);\r\n\r\n\t\t\t//\r\n\t\t\tif (col > 0 && grid[_].headerMap.getCell(col - 1, row).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (row > 0 &&\r\n\t\t\t\t\t\tgrid[_].headerMap.getCell(col, row - 1).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[0]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction _refreshHeader(grid) {\r\n\t\tif (grid[_].headerEvents) {\r\n\t\t\tgrid[_].headerEvents.forEach((id) => grid.unlisten(id));\r\n\t\t}\r\n\t\tgrid[_].headerMap = new HeaderMap(grid[_].header);\r\n\t\tgrid[_].headerEvents = [];\r\n\t\tgrid[_].headerMap.headerObjects.forEach((cell) => {\r\n\t\t\tconst ids = cell.headerType.bindGridEvent(grid);\r\n\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\tif (cell.style) {\r\n\t\t\t\tif (cell.style instanceof HeaderBaseStyle) {\r\n\t\t\t\t\tconst id = cell.style.listen(HeaderBaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].headerMap.columns.forEach((col, index) => {\r\n\t\t\tif (col.action) {\r\n\t\t\t\tconst ids = col.action.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.columnType) {\r\n\t\t\t\tconst ids = col.columnType.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.style) {\r\n\t\t\t\tif (col.style instanceof BaseStyle) {\r\n\t\t\t\t\tconst id = col.style.listen(columns.style.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid.colCount = grid[_].headerMap.columns.length;\r\n\t\t_refreshRowCount(grid);\r\n\t\tgrid.frozenRowCount = grid[_].headerMap.rowCount;\r\n\t\tfor (let col = 0; col < grid[_].headerMap.columns.length; col++) {\r\n\t\t\tconst column = grid[_].headerMap.columns[col];\r\n\t\t\tconst {width, minWidth, maxWidth} = column;\r\n\t\t\tif (width && (width > 0 || typeof width === 'string')) {\r\n\t\t\t\tgrid.setColWidth(col, width);\r\n\t\t\t}\r\n\t\t\tif (minWidth && (minWidth > 0 || typeof minWidth === 'string')) {\r\n\t\t\t\tgrid.setMinColWidth(col, minWidth);\r\n\t\t\t}\r\n\t\t\tif (maxWidth && (maxWidth > 0 || typeof maxWidth === 'string')) {\r\n\t\t\t\tgrid.setMaxColWidth(col, maxWidth);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isArrayHeaderRowHeight = Array.isArray(grid[_].headerRowHeight);\r\n\t\tfor (let row = 0; row < grid[_].headerMap.rowCount; row++) {\r\n\t\t\tconst height = isArrayHeaderRowHeight ? grid[_].headerRowHeight[row] : grid[_].headerRowHeight;\r\n\t\t\tif (height && height > 0) {\r\n\t\t\t\tgrid.setRowHeight(row, height);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _refreshRowCount(grid) {\r\n\t\tgrid.rowCount = grid[_].dataSource.length + grid[_].headerMap.rowCount;\r\n\t}\r\n\tfunction _tryWithUpdateDataSource(grid, fn) {\r\n\t\tif (grid[_].dataSourceEventIds) {\r\n\t\t\tgrid[_].dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n\t\t}\r\n\r\n\t\tfn(grid);\r\n\r\n\t\tgrid[_].dataSourceEventIds = [\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n\t\t\t\t_refreshRowCount(grid);\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction _setRecords(grid, records = []) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tgrid[_].records = records;\r\n\t\t\tgrid[_].dataSource = CachedDataSource.ofArray(grid[_].records);\r\n\t\t});\r\n\t}\r\n\tfunction _setDataSource(grid, dataSource) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tif (dataSource) {\r\n\t\t\t\tif (dataSource instanceof DataSource) {\r\n\t\t\t\t\tgrid[_].dataSource = dataSource;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgrid[_].dataSource = new CachedDataSource(dataSource);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tgrid[_].dataSource = DataSource.EMPTY;\r\n\t\t\t}\r\n\t\t\tgrid[_].records = null;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction _getRowRecordIndex(grid, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn undefined;\r\n\t\t} else {\r\n\t\t\treturn row - grid[_].headerMap.rowCount;\r\n\t\t}\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\tclass HeaderMap {\r\n\t\tconstructor(header) {\r\n\t\t\tthis._columns = [];\r\n\t\t\tthis._headerCells = [];\r\n\t\t\tthis._headerObjects = [];\r\n\r\n\t\t\tthis._addHeaders(0, header, []);\r\n\t\t\tthis._setupHeaderType();\r\n\t\t}\r\n\t\tget columns() {\r\n\t\t\treturn this._columns;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this._headerCells.length;\r\n\t\t}\r\n\t\tget headerObjects() {\r\n\t\t\treturn this._headerObjects;\r\n\t\t}\r\n\t\tgetCell(col, row) {\r\n\t\t\treturn this._headerCells[row][col];\r\n\t\t}\r\n\t\tgetHeaderCellRangeById(id) {\r\n\t\t\tfor (let r = 0; r < this.rowCount; r++) {\r\n\t\t\t\tfor (let c = 0; c < this.columns.length; c++) {\r\n\t\t\t\t\tif (id === this.getCell(c, r).id) {\r\n\t\t\t\t\t\treturn this.getHeaderCellRange(c, r);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tgetHeaderCellRange(col, row) {\r\n\t\t\tconst result = {\r\n\t\t\t\tstartCol: col,\r\n\t\t\t\tstartRow: row,\r\n\t\t\t\tendCol: col,\r\n\t\t\t\tendRow: row,\r\n\t\t\t\tisCellInRange(col, row) {\r\n\t\t\t\t\treturn this.startCol <= col && col <= this.endCol &&\r\n\t\t\t\t\t\t\tthis.startRow <= row && row <= this.endRow;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst {id} = this.getCell(col, row);\r\n\t\t\tfor (let c = col - 1; c >= 0; c--) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let c = col + 1; c < this.columns.length; c++) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startRow = r;\r\n\t\t\t}\r\n\t\t\tfor (let r = row + 1; r < this.rowCount; r++) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endRow = r;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\t_addHeaders(row, header, roots) {\r\n\t\t\tconst rowCells = this._headerCells[row] || this._newRow(row);\r\n\t\t\theader.forEach((hd) => {\r\n\t\t\t\tconst col = this._columns.length;\r\n\t\t\t\tconst cell = {\r\n\t\t\t\t\tid: headerId++,\r\n\t\t\t\t\tcaption: hd.caption,\r\n\t\t\t\t\tstyle: hd.headerStyle,\r\n\t\t\t\t\tsort: hd.sort,\r\n\t\t\t\t};\r\n\t\t\t\tthis._headerObjects.push(cell);\r\n\t\t\t\trowCells[col] = cell;\r\n\t\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\t\tthis._headerCells[r][col] = roots[r];\r\n\t\t\t\t}\r\n\t\t\t\tif (hd.columns) {\r\n\t\t\t\t\tthis._addHeaders(row + 1, hd.columns, [...roots, cell]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._columns.push({\r\n\t\t\t\t\t\twidth: hd.width,\r\n\t\t\t\t\t\tminWidth: hd.minWidth,\r\n\t\t\t\t\t\tmaxWidth: hd.maxWidth,\r\n\t\t\t\t\t\tfield: hd.field,\r\n\t\t\t\t\t\ticon: hd.icon,\r\n\t\t\t\t\t\tmessage: hd.message,\r\n\t\t\t\t\t\tcolumnType: columns.type.of(hd.columnType),\r\n\t\t\t\t\t\taction: columns.action.of(hd.action),\r\n\t\t\t\t\t\tstyle: hd.style,\r\n\t\t\t\t\t\tdefine: hd,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (let r = row + 1; r < this._headerCells.length; r++) {\r\n\t\t\t\t\t\tthis._headerCells[r][col] = cell;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setupHeaderType() {\r\n\t\t\tthis._headerObjects.forEach((cell) => {\r\n\t\t\t\tcell.range = this.getHeaderCellRangeById(cell.id);\r\n\t\t\t\tcell.headerType = headerType.create(cell);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_newRow(row) {\r\n\t\t\tconst newRow = this._headerCells[row] = [];\r\n\t\t\tif (!this._columns.length) {\r\n\t\t\t\treturn newRow;\r\n\t\t\t}\r\n\t\t\tconst prev = this._headerCells[row - 1];\r\n\t\t\tfor (let col = 0; col < prev.length; col++) {\r\n\t\t\t\tnewRow[col] = prev[col];\r\n\t\t\t}\r\n\t\t\treturn newRow;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction adjustListGridOption(options) {\r\n\t\tif (options) {\r\n\t\t\tdelete options.frozenRowCount;\r\n\t\t\tdelete options.colCount;\r\n\t\t\tdelete options.rowCount;\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\t\r\n\t/**\r\n\t * ListGrid\r\n\t * @classdesc cheetahGrid.ListGrid\r\n\t * @extends cheetahGrid.core.DrawGrid\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tclass ListGrid extends DrawGrid {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * header: see header property\r\n\t\t * records {array}: records data\r\n\t\t * dataSource {DataSource}: records data source\r\n\t\t * frozenColCount {number}: default 0\r\n\t\t * defaultRowHeight {number}: default grid row height. default 40\r\n\t\t * defaultColWidth {number}: default grid col width. default 80\r\n\t\t * borderColor: border color\r\n\t\t * parentElement {Element}: canvas parentElement\r\n\t\t * theme {object}: theme\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(options = {}) {\r\n\t\t\tsuper(adjustListGridOption(options));\r\n\t\t\tthis[_].header = options.header || [];\r\n\t\t\tthis[_].headerRowHeight = options.headerRowHeight || [];\r\n\t\t\tif (options.dataSource) {\r\n\t\t\t\t_setDataSource(this, options.dataSource);\r\n\t\t\t} else {\r\n\t\t\t\t_setRecords(this, options.records);\r\n\t\t\t}\r\n\t\t\t_refreshHeader(this);\r\n\t\t\tthis[_].sortState = {\r\n\t\t\t\tcol: -1,\r\n\t\t\t\torder: undefined,\r\n\t\t\t};\r\n\t\t\tthis[_].gridCanvasHelper = new GridCanvasHelper(this);\r\n\t\t\tthis[_].theme = themes.of(options.theme);\r\n\t\t\tthis[_].messageHandler = new MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n\t\t\tthis.invalidate();\r\n\t\t\tthis[_].handler.on(window, 'resize', () => {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t\tthis.updateScroll();\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t});\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis[_].messageHandler.dispose();\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tget header() {\r\n\t\t\treturn this[_].header;\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * <pre>\r\n\t\t * column options\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * field: field name\r\n\t\t * width: column width\r\n\t\t * minWidth: column min width\r\n\t\t * maxWidth: column max width\r\n\t\t * icon: icon name\r\n\t\t * message: message key name\r\n\t\t * columnType: ColumnType\r\n\t\t * action: ColumnAction\r\n\t\t * style: ColumnStyle\r\n\t\t * sort: define sort setting\r\n\t\t * -----\r\n\t\t *\r\n\t\t * multiline header\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * columns: columns define\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tset header(header) {\r\n\t\t\tthis[_].header = header;\r\n\t\t\t_refreshHeader(this);\r\n\t\t}\r\n\t\tget records() {\r\n\t\t\treturn this[_].records;\r\n\t\t}\r\n\t\tset records(records) {\r\n\t\t\t_setRecords(this, records);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget dataSource() {\r\n\t\t\treturn this[_].dataSource;\r\n\t\t}\r\n\t\tset dataSource(dataSource) {\r\n\t\t\t_setDataSource(this, dataSource);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this[_].theme;\r\n\t\t}\r\n\t\tset theme(theme) {\r\n\t\t\tthis[_].theme = themes.of(theme);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn super.font || this[_].gridCanvasHelper.theme.font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tsuper.font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tsuper.underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tget sortState() {\r\n\t\t\treturn this[_].sortState;\r\n\t\t}\r\n\t\tset sortState(sortState) {\r\n\t\t\tthis[_].sortState = sortState;\r\n\t\t}\r\n\t\tgetField(col) {\r\n\t\t\treturn this[_].headerMap.columns[col].field;\r\n\t\t}\r\n\t\tgetRowRecord(row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t} else {\r\n\t\t\t\treturn this[_].dataSource.get(_getRowRecordIndex(this, row));\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetGridCanvasHelper() {\r\n\t\t\treturn this[_].gridCanvasHelper;\r\n\t\t}\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol, startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tif (startCol !== col || startRow !== row) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn _getCellValue(this, col, row);\r\n\t\t}\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\tconst column = this[_].headerMap.columns[col];\r\n\r\n\t\t\tlet draw;\r\n\t\t\tlet style;\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst hd = this[_].headerMap.getCell(col, row);\r\n\t\t\t\tdraw = hd.headerType.onDrawCell;\r\n\t\t\t\t({style} = hd);\r\n\t\t\t\t_updateRect(this, col, row, context);\r\n\t\t\t} else {\r\n\t\t\t\tdraw = column.columnType.onDrawCell;\r\n\t\t\t\t({style} = column);\r\n\t\t\t}\r\n\t\t\tconst cellValue = _getCellValue(this, col, row);\r\n\t\t\treturn _onDrawValue(this, cellValue, context, {col, row}, style, draw);\r\n\t\t}\r\n\t\tdoGetCellValue(col, row, valueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst value = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(value)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvalueCallback(value);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tdoChangeValue(col, row, changeValueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst before = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(before)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tconst after = changeValueCallback(before);\r\n\t\t\t\tif (after === undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn then(_setCellValue(this, col, row, after), (ret) => {\r\n\t\t\t\t\tif (ret) {\r\n\t\t\t\t\t\tconst {field} = this[_].headerMap.columns[col];\r\n\t\t\t\t\t\tconst self = this;\r\n\t\t\t\t\t\tthis.fireListeners(EVENT_TYPE.CHANGED_VALUE, {\r\n\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\tget record() {\r\n\t\t\t\t\t\t\t\treturn self.getRowRecord(row);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfield,\r\n\t\t\t\t\t\t\tvalue: after,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\tthis.listen(EVENT_TYPE.SELECTED_CELL, (e) => {\r\n\t\t\t\tif (e.row < this[_].headerMap.rowCount) {\r\n\t\t\t\t\tconst {startCol, endCol, startRow, endRow} = _getHeaderCellRange(this, e.col, e.row);\r\n\t\t\t\t\tif (startCol !== endCol || startRow !== endRow) {\r\n\t\t\t\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = startCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveLeftColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = endCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveRightColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = startRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveUpRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = endRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveDownRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tgetColumnIndexByField(field) {\r\n\t\t\tfor (const columnIndex in this[_].headerMap.columns) {\r\n\t\t\t\tif (this[_].headerMap.columns[columnIndex].field === field) {\r\n\t\t\t\t\treturn columnIndex - 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfocusGridCell(field, index) {\r\n\t\t\tconst {\r\n\t\t\t\tstart: {col: startCol, row: startRow},\r\n\t\t\t\tend: {col: endCol, row: endRow}\r\n\t\t\t} = this.selection.range;\r\n\r\n\t\t\tconst newCol = this.getColumnIndexByField(field);\r\n\t\t\tconst newRow = index + this[_].headerMap.rowCount;\r\n\t\t\tthis.focusCell(newCol, newRow);\r\n\t\t\tthis.selection.select = {\r\n\t\t\t\tcol: newCol,\r\n\t\t\t\trow: newRow\r\n\t\t\t};\r\n\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\tthis.invalidateCell(newCol, newRow);\r\n\t\t}\r\n\t\tmakeVisibleGridCell(field, index) {\r\n\t\t\tthis.makeVisibleCell(this.getColumnIndexByField(field), index + this[_].headerMap.rowCount);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ListGrid;\r\n}","'use strict';\r\n{\r\n\tconst action = require('./columns/action');\r\n\tconst type = require('./columns/type');\r\n\tconst style = require('./columns/style');\r\n\r\n\t/**\r\n\t * columns\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\taction,\r\n\t\ttype,\r\n\t\tstyle,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst BaseAction = require('./action/BaseAction');\r\n\tconst Action = require('./action/Action');\r\n\tconst Editor = require('./action/Editor');\r\n\tconst CheckEditor = require('./action/CheckEditor');\r\n\tconst ButtonAction = require('./action/ButtonAction');\r\n\tconst SmallDialogInputEditor = require('./action/SmallDialogInputEditor');\r\n\tconst InlineInputEditor = require('./action/InlineInputEditor');\r\n\tconst InlineMenuEditor = require('./action/InlineMenuEditor');\r\n\r\n\tclass ImmutableCheckEditor extends CheckEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\tclass ImmutableInputEditor extends SmallDialogInputEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * column actions\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.action\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst action = {\r\n\t\tACTIONS: {\r\n\t\t\tCHECK: new ImmutableCheckEditor(),\r\n\t\t\tINPUT: new ImmutableInputEditor(),\r\n\t\t},\r\n\t\tget BaseAction() {\r\n\t\t\treturn BaseAction;\r\n\t\t},\r\n\t\tget Editor() {\r\n\t\t\treturn Editor;\r\n\t\t},\r\n\t\tget Action() {\r\n\t\t\treturn Action;\r\n\t\t},\r\n\t\tget CheckEditor() {\r\n\t\t\treturn CheckEditor;\r\n\t\t},\r\n\t\tget ButtonAction() {\r\n\t\t\treturn ButtonAction;\r\n\t\t},\r\n\t\tget SmallDialogInputEditor() {\r\n\t\t\treturn SmallDialogInputEditor;\r\n\t\t},\r\n\t\tget InlineInputEditor() {\r\n\t\t\tconsole.warn('InlineInputEditor is an experiment stage');\r\n\t\t\treturn InlineInputEditor;\r\n\t\t},\r\n\t\tget InlineMenuEditor() {\r\n\t\t\treturn InlineMenuEditor;\r\n\t\t},\r\n\t\tof(columnAction) {\r\n\t\t\tif (!columnAction) {\r\n\t\t\t\treturn action.ACTIONS.DEFAULT;\r\n\t\t\t} else if (typeof columnAction === 'string') {\r\n\t\t\t\treturn action.ACTIONS[columnAction.toUpperCase()] || action.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnAction;\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\tmodule.exports = action;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\r\n\tconst BaseAction = require('./BaseAction');\r\n\r\n\tclass Action extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._action = option.action;\r\n\t\t}\r\n\t\tget action() {\r\n\t\t\treturn this._action;\r\n\t\t}\r\n\t\tset action(action) {\r\n\t\t\tthis._action = action;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Action(this);\r\n\t\t}\r\n\t\tgetState(grid) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst state = this.getState(grid);\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst record = grid.getRowRecord(cell.row);\r\n\t\t\t\tthis._action(record);\r\n\t\t\t};\r\n\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = Action;\r\n}","'use strict';\r\n{\r\n\t\r\n\r\n\tclass BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis._disabled = option.disabled;\r\n\t\t}\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tset disabled(disabled) {\r\n\t\t\tthis._disabled = !!disabled;\r\n\t\t\tthis.onChangeDisabledInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseAction(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tonChangeDisabledInternal() {}\r\n\t}\r\n\tmodule.exports = BaseAction;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst Editor = require('./Editor');\r\n\tconst {EVENT_TYPE: {\r\n\t\tINPUT_CELL,\r\n\t\tEDITABLEINPUT_CELL,\r\n\t\tSELECTED_CELL,\r\n\t\tDBLCLICK_CELL,\r\n\t\tDBLTAP_CELL,\r\n\t\tKEYDOWN,\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\tSCROLL\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_F2 = 113;\r\n\r\n\tclass BaseInputEditor extends Editor {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseInputEditor(this);\r\n\t\t}\r\n\t\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonOpenCellInternal(grid, cell) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonGridScrollInternal(grid) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst open = (cell) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onOpenCellInternal(grid, cell);\r\n\t\t\t};\r\n\r\n\t\t\tconst input = (cell, value) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onInputCellInternal(grid, cell, value);\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(INPUT_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinput({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t}, e.value);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLCLICK_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLTAP_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\te.event.preventDefault();\r\n\t\t\t\t\te.event.stopPropagation();\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\t\trow: sel.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\t\tthis.onChangeSelectCellInternal(grid, {col: e.col, row: e.row}, e.selected);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\t\tthis.onGridScrollInternal(grid);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.onSetInputAttrsInternal(grid, {\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t}, cell.input);\r\n\t\t\t\t}),\r\n\t\t\t\t\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = BaseInputEditor;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst Action = require('./Action');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tclass ButtonAction extends Action {\r\n\t\tgetState(grid) {\r\n\t\t\tif (!grid[BUTTON_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, BUTTON_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\treturn grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonAction;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}, isPromise} = require('../../internal/utils');\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\tconst animate = require('../../internal/animate');\r\n\r\n\tconst Editor = require('./Editor');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_SPACE = 32;\r\n\r\n\tfunction toggleValue(val) {\r\n\t\tif (typeof val === 'number') {\r\n\t\t\tif (val === 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t} else if (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn 'true';\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn 'on';\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)0$/, '$11');\r\n\t\t\t} else if (val === 'true') {\r\n\t\t\t\treturn 'false';\r\n\t\t\t} else if (val === 'on') {\r\n\t\t\t\treturn 'off';\r\n\t\t\t} else if (val.match(/^0*1$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)1$/, '$10');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !val;\r\n\t}\r\n\r\n\tclass CheckEditor extends Editor {\r\n\t\tclone() {\r\n\t\t\treturn new CheckEditor(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tif (!grid[CHECK_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, CHECK_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID];\r\n\t\t\t\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tconst key = cell.col + ':' + cell.row;\r\n\t\t\t\tconst blockKey = key + '::block';\r\n\t\t\t\tif (this.readOnly || this.disabled || state[blockKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst ret = grid.doChangeValue(cell.col, cell.row, toggleValue);\r\n\t\t\t\tif (ret) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst onChange = () => {\r\n\t\t\t\t\t\t// checkbox animation\r\n\t\t\t\t\t\tanimate(200, (point) => {\r\n\t\t\t\t\t\t\tif (point === 1) {\r\n\t\t\t\t\t\t\t\tdelete state[key];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstate[key] = {\r\n\t\t\t\t\t\t\t\t\telapsed: point,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgrid.invalidateCell(cell.col, cell.row);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (isPromise(ret)) {\r\n\t\t\t\t\t\tstate[blockKey] = true;\r\n\t\t\t\t\t\tret.then(() => {\r\n\t\t\t\t\t\t\tdelete state[blockKey];\r\n\t\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction: (e) => {\r\n\t\t\t\t\t\tconst selrange = grid.selection.range;\r\n\t\t\t\t\t\tconst col = grid.selection.select.col;\r\n\t\t\t\t\t\tfor (let row = selrange.start.row; row <= selrange.end.row; row++) {\r\n\t\t\t\t\t\t\tif (!util.isTarget(col, row)) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taction({\r\n\t\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tacceptKeys: [KEY_ENTER, KEY_SPACE],\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckEditor;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst BaseAction = require('./BaseAction');\r\n\tclass Editor extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._readOnly = option.readOnly;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t\tset readOnly(readOnly) {\r\n\t\t\tthis._readOnly = !!readOnly;\r\n\t\t\tthis.onChangeReadOnlyInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Editor(this);\r\n\t\t}\r\n\t\tonChangeReadOnlyInternal() {}\r\n\t}\r\n\tmodule.exports = Editor;\r\n}","'use strict';\r\n\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nconst InlineInputElement = require('./internal/InlineInputElement');\r\nconst {INLINE_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nfunction doChangeValue(grid) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.doChangeValue();\r\n\t}\r\n}\r\n\r\n\r\nclass InlineInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tInlineInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputEditor;","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst {normalize} = require('../../internal/menu-items');\r\n\t\r\nconst Editor = require('./Editor');\r\nconst {EVENT_TYPE: {\r\n\tSELECTED_CELL,\r\n\tCLICK_CELL,\r\n\tKEYDOWN,\r\n\tSCROLL,\r\n\tMOUSEOVER_CELL,\r\n\tMOUSEOUT_CELL,\r\n\tMOUSEMOVE_CELL,\r\n}} = require('../../core/DrawGrid');\r\nconst InlineMenuElement = require('./internal/InlineMenuElement');\r\nconst {INLINE_MENU_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineMenuElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\n\r\nclass InlineMenuEditor extends Editor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._options = normalize(option.options);\r\n\t}\r\n\tdispose() {\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget options() {\r\n\t\treturn this._options;\r\n\t}\r\n\tset options(options) {\r\n\t\tthis._options = normalize(options);\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineMenuEditor(this);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tbindGridEvent(grid, col, util) {\r\n\t\tconst open = (cell) => {\r\n\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\t\tattachMenu(grid, cell, this, value);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn [\r\n\t\t\tgrid.listen(CLICK_CELL, (cell) => {\r\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\trow: cell.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\tdetachMenu();\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\tdetachMenu(true);\r\n\t\t\t}),\r\n\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuEditor;","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\t\r\nconst SmallDialogInputElement = require('./internal/SmallDialogInputElement');\r\nconst {SMALL_DIALOG_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new SmallDialogInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nclass SmallDialogInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._helperText = option.helperText;\r\n\t\tthis._inputValidator = option.inputValidator;\r\n\t\tthis._validator = option.validator;\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tdispose() {\r\n\t\tthis._inputDialogManager.dispose();\r\n\t\tthis._inputDialogManager = null;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tget helperText() {\r\n\t\treturn this._helperText;\r\n\t}\r\n\tget inputValidator() {\r\n\t\treturn this._inputValidator;\r\n\t}\r\n\tget validator() {\r\n\t\treturn this._validator;\r\n\t}\r\n\tclone() {\r\n\t\treturn new SmallDialogInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t// cancel input\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tSmallDialogInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputEditor;","'use strict';\r\n{\r\n\t\r\n\tconst {isPromise, event: {cancel}} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tKEYDOWN,\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tfunction bindCellClickAction(grid, col, util, {\r\n\t\taction,\r\n\t\tmouseOver,\r\n\t\tmouseOut\r\n\t}) {\r\n\t\treturn [\r\n\t\t\t// click\r\n\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\trow: e.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOver) {\r\n\t\t\t\t\tif (!mouseOver({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t})) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOut) {\r\n\t\t\t\t\tmouseOut({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction bindCellKeyAction(grid, col, util, {action, acceptKeys = []}) {\r\n\t\tacceptKeys = [...acceptKeys, KEY_ENTER];\r\n\t\treturn [\r\n\t\t\t// enter key down\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (acceptKeys.indexOf(keyCode) === -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(sel.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t\tcancel(e);\r\n\t\t\t}),\r\n\r\n\t\t];\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tbindCellClickAction,\r\n\t\tbindCellKeyAction,\r\n\t};\r\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\nconst KEY_ENTER = 13;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-input';\r\n\r\nfunction createInputElement() {\r\n\trequire('./InlineInputElement.css');\r\n\treturn createElement('input', {classList: CLASSNAME});\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {classList, type} = editor;\r\n\tif (classList) {\r\n\t\tinput.classList.add(...classList);\r\n\t}\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass InlineInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._input = createInputElement();\r\n\t\tthis._bindInputEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst input = this._input;\r\n\t\tconst handler = this._handler;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tinput.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tinput.style.top = rect.top.toFixed() + 'px';\r\n\t\tinput.style.left = rect.left.toFixed() + 'px';\r\n\t\tinput.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(input);\r\n\r\n\t\tsetInputAttrs(editor, grid, input);\r\n\t\tinput.value = value;\r\n\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\r\n\t\tconst focus = () => {\r\n\t\t\tinput.focus();\r\n\r\n\t\t\tconst end = input.value.length;\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t\t}\r\n\t\t\tif (document.selection) {\r\n\t\t\t\tconst range = input.createTextRange();\r\n\t\t\t\trange.collapse();\r\n\t\t\t\trange.moveEnd('character', end);\r\n\t\t\t\trange.moveStart('character', end);\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t};\r\n\t\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\tfocus();\r\n\t\t});\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst input = this._input;\r\n\t\t\tthis._handler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\t\tinput.parentElement.removeChild(input);\r\n\t\t\t});\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\tdoChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\tconst {grid, col, row} = this._activeData;\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst input = this._input;\r\n\t\tif (!input || !input.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindInputEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(input, 'click', stopPropagationOnly);\r\n\t\thandler.on(input, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(input, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(input, 'dblclick', stopPropagationOnly);\r\n\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (getKeyCode(e) === KEY_ENTER) {\r\n\t\t\t\tif (!this._isActive()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {grid} = this._activeData;\r\n\r\n\t\t\t\tthis.doChangeValue();\r\n\t\t\t\tif (grid) {\r\n\t\t\t\t\tgrid.focus();\r\n\t\t\t\t}\r\n\t\t\t\tthis.detach();\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\thandler.on(input, 'blur', (e) => {\r\n\t\t\tthis.doChangeValue();\r\n\t\t\tthis.detach();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tisDef,\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t}\r\n} = require('../../../internal/utils');\r\n\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n\tappendHtml,\r\n\tempty,\r\n\tdisableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n} = require('../../../internal/dom');\r\n\t\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-menu';\r\nconst ITEM_CLASSNAME = CLASSNAME + '__menu-item';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\nconst EMPTY_ITEM_CLASSNAME = ITEM_CLASSNAME + '--empty';\r\n\r\nfunction findItemParents(target) {\r\n\tlet el = target;\r\n\twhile (!el.classList.contains(ITEM_CLASSNAME)) {\r\n\t\tel = el.parentElement;\r\n\t\tif (!el || el.classList.contains(CLASSNAME)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\treturn el;\r\n}\r\n\r\nfunction createMenuElement() {\r\n\trequire('./InlineMenuElement.css');\r\n\treturn createElement('ul', {classList: CLASSNAME});\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n\tmenu.style.top = rect.top.toFixed() + 'px';\r\n\tmenu.style.left = rect.left.toFixed() + 'px';\r\n\tmenu.style.width = rect.width.toFixed() + 'px';\r\n\tmenu.style['line-height'] = rect.height.toFixed() + 'px';\r\n\telement.appendChild(menu);\r\n}\r\n\r\nfunction optionToLi({classList, caption, value, html}, index) {\r\n\tconst item = createElement('li', {classList: ITEM_CLASSNAME});\r\n\titem.tabIndex = 0;\r\n\titem.dataset.valueindex = index;\r\n\tif (classList) {\r\n\t\titem.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n\t}\r\n\r\n\tif (caption) {\r\n\t\tconst span = createElement('span', {text: caption});\r\n\t\titem.appendChild(span);\r\n\t} else if (html) {\r\n\t\tappendHtml(item, html);\r\n\t}\r\n\r\n\tif (value === '' || !isDef(value)) {\r\n\t\titem.classList.add(EMPTY_ITEM_CLASSNAME);\r\n\t}\r\n\r\n\treturn item;\r\n}\r\n\r\nfunction openMenu(grid, editor, col, row, value, menu) {\r\n\tconst {options, classList} = editor;\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tempty(menu);\r\n\tmenu.style.font = grid.font || '16px sans-serif';\r\n\tlet emptyItemEl = null;\r\n\tlet valueItemEl = null;\r\n\t\t\r\n\toptions.forEach((option, i) => {\r\n\t\tconst item = optionToLi(option, i);\r\n\t\tmenu.appendChild(item);\r\n\t\tif (option.value === value) {\r\n\t\t\tvalueItemEl = item;\r\n\t\t\titem.dataset.select = true;\r\n\t\t}\r\n\t\tif (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n\t\t\temptyItemEl = item;\r\n\t\t}\r\n\t});\r\n\tconst focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n\tif (classList) {\r\n\t\tmenu.classList.add(...classList);\r\n\t}\r\n\tconst children = Array.prototype.slice.call(menu.children, 0);\r\n\tconst focusIndex = children.indexOf(focusEl);\r\n\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t// Cover the right line\r\n\trect.width++;\r\n\r\n\t// append for calculation\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Make the selection item at the middle\r\n\tlet offset = 0;\r\n\tlet allHeight = 0;\r\n\tfor (let i = 0; i < children.length; i++) {\r\n\t\tconst offsetHeight = children[i].offsetHeight;\r\n\t\tif (i < focusIndex) {\r\n\t\t\toffset += offsetHeight;\r\n\t\t}\r\n\t\tallHeight += offsetHeight;\r\n\t}\r\n\trect.offsetTop(-offset);\r\n\tmenu.style['transform-origin'] = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Control not to overflow the screen range\r\n\tconst menuClientRect = menu.getBoundingClientRect();\r\n\tconst scaleDiff = ((allHeight - menuClientRect.height) / 2);\r\n\tconst orgMenuTop = menuClientRect.top - scaleDiff;\r\n\tlet menuTop = orgMenuTop;\r\n\tconst menuBottom = menuTop + allHeight;\r\n\tconst winBottom = window.innerHeight;\r\n\tconst winMargin = 20;\r\n\tif (menuBottom > (winBottom - winMargin)) {\r\n\t\tconst diff = menuBottom - winBottom + winMargin;\r\n\t\tmenuTop -= diff;\r\n\t}\r\n\tif (menuTop < 0/*winTop*/ + winMargin) {\r\n\t\tmenuTop = winMargin;\r\n\t}\r\n\tif (menuTop !== orgMenuTop) {\r\n\t\trect.offsetTop(-(orgMenuTop - menuTop));\r\n\t\t// re update\r\n\t\tattachElement(element, rect, menu);\r\n\t}\r\n\t\t\r\n\tif (focusEl) {\r\n\t\tfocusEl.focus();\r\n\t}\r\n\tmenu.classList.remove(HIDDEN_CLASSNAME);\r\n\tmenu.classList.add(SHOWN_CLASSNAME);\r\n}\r\n\r\nfunction closeMenu(grid, col, row, menu) {\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tdisableFocus(menu);\r\n}\r\n\r\nclass InlineMenuElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._menu = createMenuElement();\r\n\t\tthis._bindMenuEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst menu = this._menu;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._menu = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (menu.parentElement) {\r\n\t\t\tmenu.parentElement.removeChild(menu);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tmenu.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\topenMenu(grid, editor, col, row, value, menu);\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst menu = this._menu;\r\n\t\t\tcloseMenu(grid, col, row, menu);\r\n\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\t_doChangeValue(valueindex) {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tconst {value} = editor.options[valueindex];\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst menu = this._menu;\r\n\t\tif (!menu || !menu.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindMenuEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\t\r\n\t\thandler.on(menu, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(menu, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(menu, 'dblclick', stopPropagationOnly);\r\n\r\n\t\thandler.on(menu, 'click', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\tthis._doChangeValue(item.dataset.valueindex);\r\n\t\t\tthis.detach(true);\r\n\t\t});\r\n\t\thandler.on(menu, 'keydown', (e) => {\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\t\tthis._doChangeValue(valueindex);\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\t\tconst n = findPrevSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\t\tconst n = findNextSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_TAB) {\r\n\t\t\t\tif (!e.shiftKey) {\r\n\t\t\t\t\tif (!findNextSiblingFocusable(item)) {\r\n\t\t\t\t\t\tlet n = menu.querySelector('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findNextSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!findPrevSiblingFocusable(item)) {\r\n\t\t\t\t\t\tconst items = menu.querySelectorAll('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tlet n = items[items.length - 1];\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findPrevSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n\tthen,\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__small-dialog-input';\r\nconst INPUT_CLASSNAME = CLASSNAME + '__input';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\n\r\nfunction _focus(input, handler) {\r\n\tconst focus = () => {\r\n\t\tinput.focus();\r\n\r\n\t\tconst end = input.value.length;\r\n\t\ttry {\r\n\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t}\r\n\t\tif (document.selection) {\r\n\t\t\tconst range = input.createTextRange();\r\n\t\t\trange.collapse();\r\n\t\t\trange.moveEnd('character', end);\r\n\t\t\trange.moveStart('character', end);\r\n\t\t\trange.select();\r\n\t\t}\r\n\t};\r\n\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\tfocus();\r\n\t});\r\n}\r\n\r\nfunction createDialogElement() {\r\n\trequire('./SmallDialogInputElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst input = createElement('input', {classList: INPUT_CLASSNAME});\r\n\tinput.readonly = true;\r\n\tinput.tabIndex = -1;\r\n\telement.appendChild(input);\r\n\treturn element;\r\n}\r\n\r\nfunction bindProps(grid, dialog, input, editor) {\r\n\tconst {classList, helperText} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.add(...classList);\r\n\t}\r\n\tif (helperText && typeof helperText !== 'function') {\r\n\t\tdialog.dataset.helperText = helperText;\r\n\t}\r\n\tsetInputAttrs(editor, grid, input);\r\n}\r\n\r\nfunction unbindProps(grid, dialog, input, editor) {\r\n\tconst {classList} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.remove(...classList);\r\n\t}\r\n\tdelete dialog.dataset.helperText;\r\n\tinput.type = '';\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {type} = editor;\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass SmallDialogInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._dialog = createDialogElement();\r\n\t\tthis._input = this._dialog.querySelector('.' + INPUT_CLASSNAME);\r\n\t\tthis._bindDialogEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._dialog = null;\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (dialog.parentElement) {\r\n\t\t\tdialog.parentElement.removeChild(dialog);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tunbindProps(grid, dialog, input, this._beforePropEditor);\r\n\t\t}\r\n\r\n\t\tdelete dialog.dataset.errorMessage;\r\n\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = false;\r\n\t\tinput.tabIndex = 0;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tdialog.style.top = rect.top.toFixed() + 'px';\r\n\t\tdialog.style.left = rect.left.toFixed() + 'px';\r\n\t\tdialog.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(dialog);\r\n\t\t\t\r\n\t\tinput.value = value;\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\t\tconst activeData = {grid, col, row, editor};\r\n\t\tthis._onInputValue(input, activeData);\r\n\t\t_focus(input, handler);\r\n\t\tdialog.classList.add(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.remove(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = true;\r\n\r\n\t\t\r\n\t\tbindProps(grid, dialog, input, editor);\r\n\r\n\t\tthis._activeData = activeData;\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst dialog = this._dialog;\r\n\t\t\tconst input = this._input;\r\n\r\n\t\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\t\tinput.readonly = false;\r\n\t\t\tinput.tabIndex = -1;\r\n\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t\tthis._beforeValue = null;\r\n\t}\r\n\t_doChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\treturn then(this._validate(value), (res) => {\r\n\t\t\tif (res && value === input.value) {\r\n\t\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\tgrid.doChangeValue(col, row, () => value);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\t_isActive() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tif (!dialog || !dialog.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindDialogEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(dialog, 'click', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'dblclick', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'touchstart', stopPropagationOnly);\r\n\t\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t\tthis._onInputValue(input);\r\n\t\t});\r\n\t\tconst onKeyupAndPress = (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._onInputValue(input);\r\n\t\t};\r\n\t\thandler.on(input, 'keyup', onKeyupAndPress);\r\n\t\thandler.on(input, 'keypress', onKeyupAndPress);\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst input = this._input;\r\n\t\t\t\tconst {value} = input;\r\n\t\t\t\tthen(this._doChangeValue(), (r) => {\r\n\t\t\t\t\tif (r && value === input.value) {\r\n\t\t\t\t\t\tthis.detach(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else {\r\n\t\t\t\tthis._onInputValue(input);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t_onInputValue(input, activeData) {\r\n\t\tconst before = this._beforeValue;\r\n\t\tconst {value} = input;\r\n\t\tif (before !== value) {\r\n\t\t\tthis._onInputValueChange(value, before, activeData);\r\n\t\t}\r\n\t\tthis._beforeValue = value;\r\n\t}\r\n\t_onInputValueChange(after, before, activeData) {\r\n\t\tactiveData = activeData || this._activeData;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst {grid, col, row, editor} = activeData;\r\n\t\tif (typeof editor.helperText === 'function') {\r\n\t\t\tconst helperText = editor.helperText(after, {grid, col, row});\r\n\t\t\tif (helperText) {\r\n\t\t\t\tdialog.dataset.helperText = helperText;\r\n\t\t\t} else {\r\n\t\t\t\tdelete dialog.dataset.helperText;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ('errorMessage' in dialog.dataset) {\r\n\t\t\tthis._validate(after, true);\r\n\t\t}\r\n\t}\r\n\t_validate(value, inputOnly) {\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tlet message = null;\r\n\t\tif (editor.inputValidator) {\r\n\t\t\tmessage = editor.inputValidator(value, {grid, col, row});\r\n\t\t}\r\n\t\treturn then(message, (message) => {\r\n\t\t\tif (!message && editor.validator && !inputOnly) {\r\n\t\t\t\tmessage = editor.validator(value, {grid, col, row});\r\n\t\t\t}\r\n\t\t\treturn then(message, (message) => {\r\n\t\t\t\tif (message && value === input.value) {\r\n\t\t\t\t\tdialog.dataset.errorMessage = message;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete dialog.dataset.errorMessage;\r\n\t\t\t\t}\r\n\t\t\t\treturn !message;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputElement;","'use strict';\r\n\r\nclass BaseMessage {\r\n\tconstructor(grid) {\r\n\t\tthis._grid = grid;\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detachMessageElement();\r\n\t\tif (this._messageElement) {\r\n\t\t\tthis._messageElement.dispose();\r\n\t\t}\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\t_getMessageElement() {\r\n\t\treturn this._messageElement || (this._messageElement = this.createMessageElementInternal());\r\n\t}\r\n\tcreateMessageElementInternal() {\r\n\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\r\n\t}\r\n\tattachMessageElement(col, row, message) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.attach(this._grid, col, row, message);\r\n\t}\r\n\tmoveMessageElement(col, row) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.move(this._grid, col, row);\r\n\t}\r\n\tdetachMessageElement() {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement._detach();\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\t\tthis.drawCellMessageInternal(message, context, style, helper, info);\r\n\t}\r\n}\r\n\r\nmodule.exports = BaseMessage;","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst ErrorMessageElement = require('./internal/ErrorMessageElement');\r\n\r\nconst RED_A100 = '#ff8a80';\r\n// const RED_A400 = '#FF1744';\r\n\r\nclass ErrorMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new ErrorMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = RED_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessage;","'use strict';\r\n\r\nconst BaseMessage = require('./BaseMessage');\r\nconst MessageElement = require('./internal/MessageElement');\r\n\r\nconst Rect = require('../../internal/Rect');\r\n\r\nconst GREY_L2 = '#e0e0e0';\r\n// const GREY_L1 = '#bdbdbd';\r\n\t\r\nclass InfoMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new MessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = GREY_L2;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 2, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InfoMessage;","'use strict';\r\n\r\n\r\nconst {isPromise} = require('../../internal/utils');\r\nconst {\r\n\tSELECTED_CELL,\r\n\tSCROLL,\r\n\tCHANGED_VALUE\r\n} = require('../../list-grid/EVENT_TYPE');\r\nconst ErrorMessage = require('./ErrorMessage');\r\nconst WarningMessage = require('./WarningMessage');\r\nconst InfoMessage = require('./InfoMessage');\r\n\r\n\r\nclass MessageHandler {\r\n\tconstructor(grid, getMessage) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._messageInstances = {};\r\n\t\tthis._bindGridEvent(grid, getMessage);\r\n\t}\r\n\tdispose() {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\tfor (const k in messageInstances) {\r\n\t\t\tmessageInstances[k].dispose();\r\n\t\t}\r\n\t\tthis._messageInstances = null;\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\r\n\t\tif (!message || isPromise(message)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tinstance.drawCellMessage(message, context, style, helper, info);\r\n\t}\r\n\t_attach(col, row, message) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tif (info && info.instance !== instance) {\r\n\t\t\tinfo.instance.detachMessageElement();\r\n\t\t}\r\n\t\tinstance.attachMessageElement(col, row, this._toMessageText(message));\r\n\t\tthis._attachInfo = {col, row, instance};\r\n\t}\r\n\t_move(col, row) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info || info.col !== col || info.row !== row) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.moveMessageElement(col, row);\r\n\t}\r\n\t_detach() {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.detachMessageElement();\r\n\t\tthis._attachInfo = null;\r\n\t}\r\n\t_bindGridEvent(grid, getMessage) {\r\n\t\tconst onSelectMessage = (sel) => {\r\n\t\t\tconst message = getMessage(sel.col, sel.row);\r\n\t\t\tif (!message || isPromise(message)) {\r\n\t\t\t\tthis._detach();\r\n\t\t\t} else {\r\n\t\t\t\tthis._attach(sel.col, sel.row, message);\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\tif (!e.selected) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.before.col === e.col && e.before.row === e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t\tgrid.listen(SCROLL, () => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tthis._move(sel.col, sel.row);\r\n\t\t});\r\n\t\tgrid.listen(CHANGED_VALUE, (e) => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tif (sel.col !== e.col || sel.row !== e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t}\r\n\t_getMessageInstanceOfMessage(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t\t}\r\n\t\tconst type = ('' + message.type).toLowerCase();\r\n\t\tif (type === 'info') {\r\n\t\t\treturn this._createMessageInstance('info', InfoMessage);\r\n\t\t} else if (type === 'warning') {\r\n\t\t\treturn this._createMessageInstance('warning', WarningMessage);\r\n\t\t}\r\n\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t}\r\n\t_toMessageText(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn message;\r\n\t\t}\r\n\t\tif (message.message) {\r\n\t\t\treturn message.message;\r\n\t\t}\r\n\t\treturn '' + message;\r\n\t}\r\n\t_createMessageInstance(name, Message) {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\treturn messageInstances[name] || (messageInstances[name] = new Message(this._grid));\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageHandler;","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst WarningMessageElement = require('./internal/WarningMessageElement');\r\n\r\nconst DEEP_ORANGE_A100 = '#ff9e80';\r\n\r\nclass WarningMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new WarningMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = DEEP_ORANGE_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessage;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__error-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass ErrorMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./ErrorMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nfunction createrootElement() {\r\n\trequire('./MessageElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst message = createElement('span', {classList: [MESSAGE_CLASSNAME]});\r\n\telement.appendChild(message);\r\n\treturn element;\r\n}\r\n\r\n\r\nclass MessageElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tconst rootElement = this._rootElement = createrootElement();\r\n\t\tthis._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._rootElement = null;\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\tattach(grid, col, row, message) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst messageElement = this._messageElement;\r\n\r\n\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\r\n\t\t\tmessageElement.textContent = message;\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tmove(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tdetach() {\r\n\t\tthis._detach();\r\n\t}\r\n\t_detach() {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (rootElement.parentElement) {\r\n\t\t\trootElement.parentElement.removeChild(rootElement);\r\n\t\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\t\t}\r\n\t}\r\n\t_attachCell(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t\tconst {bottom: top, left, width} = rect;\r\n\t\tconst {frozenRowCount, frozenColCount} = grid;\r\n\t\tif (row >= frozenRowCount && frozenRowCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(col, frozenRowCount - 1);\r\n\t\t\tif (top < frozenRect.bottom) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (top < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (col >= frozenColCount && frozenColCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(frozenColCount - 1, row);\r\n\t\t\tif (left < frozenRect.right) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (left < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst {offsetHeight, offsetWidth} = element;\r\n\t\tif (offsetHeight < top) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (offsetWidth < left) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\trootElement.style.top = top.toFixed() + 'px';\r\n\t\trootElement.style.left = left.toFixed() + 'px';\r\n\t\trootElement.style.width = width.toFixed() + 'px';\r\n\t\tif (rootElement.parentElement !== element) {\r\n\t\t\telement.appendChild(rootElement);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__warning-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass WarningMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./WarningMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessageElement;","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\tconst NumberStyle = require('./style/NumberStyle');\r\n\tconst CheckStyle = require('./style/CheckStyle');\r\n\tconst ButtonStyle = require('./style/ButtonStyle');\r\n\tconst ImageStyle = require('./style/ImageStyle');\r\n\tconst IconStyle = require('./style/IconStyle');\r\n\tconst PercentCompleteBarStyle = require('./style/PercentCompleteBarStyle');\r\n\r\n\t/**\r\n\t * column styles\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.style\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst style = {\r\n\t\tget EVENT_TYPE() {\r\n\t\t\treturn BaseStyle.EVENT_TYPE;\r\n\t\t},\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tget NumberStyle() {\r\n\t\t\treturn NumberStyle;\r\n\t\t},\r\n\t\tget CheckStyle() {\r\n\t\t\treturn CheckStyle;\r\n\t\t},\r\n\t\tget ButtonStyle() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t},\r\n\t\tget ImageStyle() {\r\n\t\t\treturn ImageStyle;\r\n\t\t},\r\n\t\tget IconStyle() {\r\n\t\t\treturn IconStyle;\r\n\t\t},\r\n\t\tget PercentCompleteBarStyle() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t},\r\n\t\tof(columnStyle, record, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(record), record, StyleClass);\r\n\t\t\t\t} else if (record && columnStyle in record) {\r\n\t\t\t\t\treturn style.of(record[columnStyle], record, StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\nconst BaseStyle = require('./BaseStyle');\r\nlet defaultStyle;\r\nfunction adj(style) {\r\n\tconst {textAlign = 'center'} = style;\r\n\tstyle.textAlign = textAlign;\r\n\treturn style;\r\n}\r\nconst DEFAULT_BRANCH_COLORS = (name, index) => {\r\n\tswitch (index % 3) {\r\n\tcase 0:\r\n\t\treturn '#979797';\r\n\tcase 1:\r\n\t\treturn '#008fb5';\r\n\tcase 2:\r\n\t\treturn '#f1c109';\r\n\tdefault:\r\n\t}\r\n\treturn '#979797';\r\n};\r\nclass BranchGraphStyle extends BaseStyle {\r\n\tstatic get DEFAULT() {\r\n\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BranchGraphStyle());\r\n\t}\r\n\tconstructor(style = {}) {\r\n\t\tsuper(adj(style));\r\n\t\tthis._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n\t\tthis._margin = style.margin || 4;\r\n\t\tthis._circleSize = style.circleSize || 16;\r\n\t\tthis._branchLineWidth = style.branchLineWidth || 4;\r\n\t\tthis._mergeStyle = style.mergeStyle === 'straight' ? 'straight' : 'bezier';\r\n\t}\r\n\tget branchColors() {\r\n\t\treturn this._branchColors;\r\n\t}\r\n\tset branchColors(branchColors) {\r\n\t\tthis._branchColors = branchColors;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget margin() {\r\n\t\treturn this._margin;\r\n\t}\r\n\tset margin(margin) {\r\n\t\tthis._margin = margin;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget circleSize() {\r\n\t\treturn this._circleSize;\r\n\t}\r\n\tset circleSize(circleSize) {\r\n\t\tthis._circleSize = circleSize;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget branchLineWidth() {\r\n\t\treturn this._branchLineWidth;\r\n\t}\r\n\tset branchLineWidth(branchLineWidth) {\r\n\t\tthis._branchLineWidth = branchLineWidth;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget mergeStyle() {\r\n\t\treturn this._mergeStyle;\r\n\t}\r\n\tset mergeStyle(mergeStyle) {\r\n\t\tthis._mergeStyle = mergeStyle;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphStyle(this);\r\n\t}\r\n}\r\nmodule.exports = BranchGraphStyle;","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass ButtonStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tbuttonBgColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t}\r\n\t\tget buttonBgColor() {\r\n\t\t\treturn this._buttonBgColor;\r\n\t\t}\r\n\t\tset buttonBgColor(buttonBgColor) {\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = ButtonStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass CheckStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tborderColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t}\r\n\t\tget uncheckBgColor() {\r\n\t\t\treturn this._uncheckBgColor;\r\n\t\t}\r\n\t\tset uncheckBgColor(uncheckBgColor) {\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget checkBgColor() {\r\n\t\t\treturn this._checkBgColor;\r\n\t\t}\r\n\t\tset checkBgColor(checkBgColor) {\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget borderColor() {\r\n\t\t\treturn this._borderColor;\r\n\t\t}\r\n\t\tset borderColor(borderColor) {\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = CheckStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass IconStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = IconStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tclass ImageStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tthis._imageSizing = style.imageSizing;\r\n\t\t\tthis._margin = style.margin || 4;\r\n\t\t}\r\n\t\tget imageSizing() {\r\n\t\t\treturn this._imageSizing;\r\n\t\t}\r\n\t\tset imageSizing(imageSizing) {\r\n\t\t\tthis._imageSizing = imageSizing;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget margin() {\r\n\t\t\treturn this._margin;\r\n\t\t}\r\n\t\tset margin(margin) {\r\n\t\t\tthis._margin = margin;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'right'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass NumberStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = NumberStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\tlet defaultStyle;\r\n\tconst DEFAULT_BAR_COLOR = (num) => {\r\n\t\tif (num > 80) {\r\n\t\t\treturn '#20a8d8';\r\n\t\t}\r\n\t\tif (num > 50) {\r\n\t\t\treturn '#4dbd74';\r\n\t\t}\r\n\t\tif (num > 20) {\r\n\t\t\treturn '#ffc107';\r\n\t\t}\r\n\t\treturn '#f86c6b';\r\n\t};\r\n\tclass PercentCompleteBarStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new PercentCompleteBarStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n\t\t\tthis._barBgColor = style.barBgColor || '#f0f3f5';\r\n\t\t\tthis._barHeight = style.barHeight || 3;\r\n\t\t}\r\n\t\tget barColor() {\r\n\t\t\treturn this._barColor;\r\n\t\t}\r\n\t\tset barColor(barColor) {\r\n\t\t\tthis._barColor = barColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barBgColor() {\r\n\t\t\treturn this._barBgColor;\r\n\t\t}\r\n\t\tset barBgColor(barBgColor) {\r\n\t\t\tthis._barBgColor = barBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barHeight() {\r\n\t\t\treturn this._barHeight;\r\n\t\t}\r\n\t\tset barHeight(barHeight) {\r\n\t\t\tthis._barHeight = barHeight;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarStyle;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\r\n\tlet defaultStyle;\r\n\tclass StdBaseStyle extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._textAlign = style.textAlign || 'left';\r\n\t\t\tthis._textBaseline = style.textBaseline || 'middle';\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new StdBaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = StdBaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t\tthis._font = style.font;\r\n\t\t\tthis._padding = style.padding;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this._font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis._font = font;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget padding() {\r\n\t\t\treturn this._padding;\r\n\t\t}\r\n\t\tset padding(padding) {\r\n\t\t\tthis._padding = padding;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./type/Column');\r\n\tconst NumberColumn = require('./type/NumberColumn');\r\n\tconst CheckColumn = require('./type/CheckColumn');\r\n\tconst ButtonColumn = require('./type/ButtonColumn');\r\n\tconst ImageColumn = require('./type/ImageColumn');\r\n\tconst PercentCompleteBarColumn = require('./type/PercentCompleteBarColumn');\r\n\tconst IconColumn = require('./type/IconColumn');\r\n\tconst BranchGraphColumn = require('./type/BranchGraphColumn');\r\n\tconst MenuColumn = require('./type/MenuColumn');\r\n\r\n\t/**\r\n\t * column types\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.type\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst type = {\r\n\t\tTYPES: {\r\n\t\t\tDEFAULT: new Column(),\r\n\t\t\tNUMBER: new NumberColumn(),\r\n\t\t\tCHECK: new CheckColumn(),\r\n\t\t\tBUTTON: new ButtonColumn(),\r\n\t\t\tIMAGE: new ImageColumn(),\r\n\t\t},\r\n\t\tget Column() {\r\n\t\t\treturn Column;\r\n\t\t},\r\n\t\tget NumberColumn() {\r\n\t\t\treturn NumberColumn;\r\n\t\t},\r\n\t\tget CheckColumn() {\r\n\t\t\treturn CheckColumn;\r\n\t\t},\r\n\t\tget ButtonColumn() {\r\n\t\t\treturn ButtonColumn;\r\n\t\t},\r\n\t\tget ImageColumn() {\r\n\t\t\treturn ImageColumn;\r\n\t\t},\r\n\t\tget PercentCompleteBarColumn() {\r\n\t\t\treturn PercentCompleteBarColumn;\r\n\t\t},\r\n\t\tget IconColumn() {\r\n\t\t\treturn IconColumn;\r\n\t\t},\r\n\t\tget BranchGraphColumn() {\r\n\t\t\treturn BranchGraphColumn;\r\n\t\t},\r\n\t\tget MenuColumn() {\r\n\t\t\treturn MenuColumn;\r\n\t\t},\r\n\t\tof(columnType) {\r\n\t\t\tif (!columnType) {\r\n\t\t\t\treturn type.TYPES.DEFAULT;\r\n\t\t\t} else if (typeof columnType === 'string') {\r\n\t\t\t\treturn type.TYPES[columnType.toUpperCase()] || type.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnType;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {isPromise, isDef, obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst animate = require('../../internal/animate');\r\n\tconst BaseStyle = require('../style/Style');\r\n\tconst {COLUMN_FADEIN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\r\n\tfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n\t\tif (isDef(column._fadeinWhenCallbackInPromise)) {\r\n\t\t\treturn column._fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\treturn !!grid.configure('fadeinWhenCallbackInPromise');\r\n\t}\r\n\r\n\tfunction getFadinState(grid) {\r\n\t\tif (!grid[COLUMN_FADEIN_STATE_ID]) {\r\n\t\t\tsetReadonly(grid, COLUMN_FADEIN_STATE_ID, {});\r\n\t\t}\r\n\t\treturn grid[COLUMN_FADEIN_STATE_ID];\r\n\t}\r\n\tfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\treturn (point) => {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\tif (point === 1) {\r\n\t\t\t\tdelete state[stateKey];\r\n\t\t\t} else {\r\n\t\t\t\tstate[stateKey] = {\r\n\t\t\t\t\topacity: point,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\tdrawInternal();\r\n\r\n\t\t\tconst cellState = state[stateKey];\r\n\t\t\tif (cellState) {\r\n\t\t\t\t//\r\n\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst fadinMgr = {\r\n\t\tanimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\t// fadein animation\r\n\t\t\tconst state = getFadinState(grid);\r\n\r\n\t\t\tconst activeFadeins = [\r\n\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n\t\t\t];\r\n\t\t\tstate.activeFadeins = activeFadeins;\r\n\t\t\t\r\n\t\t\tanimate(500, (point) => {\r\n\t\t\t\tactiveFadeins.forEach((f) => f(point));\r\n\t\t\t\tif (point === 1) {\r\n\t\t\t\t\tdelete state.activeFadeins;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tmargeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tif (state.activeFadeins) {\r\n\t\t\t\tstate.activeFadeins.push(\r\n\t\t\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdrawInternal();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t};\r\n\r\n\tclass BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\r\n\t\t\t//Promisecallback\r\n\t\t\tthis._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn BaseStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, getRecord, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\t//\r\n\t\t\tif (isPromise(cellValue)) {\r\n\t\t\t\tif (context.drawing) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst start = Date.now();\r\n\t\t\t\treturn cellValue.then((val) => {\r\n\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst time = Date.now() - start;\r\n\r\n\t\t\t\t\tconst drawInternal = () => {\r\n\t\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\t\t\tthis.convertInternal(val),\r\n\t\t\t\t\t\t\t\tcurrentContext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n\t\t\t\t\t\tdrawInternal();//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst {col, row} = context;\r\n\t\t\t\t\t\tif (time < 80) {\r\n\t\t\t\t\t\t\t//80msPromiseCallback\r\n\t\t\t\t\t\t\tfadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\tfadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\tthis.convertInternal(cellValue),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\t//\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\t\tconst cellState = grid[COLUMN_FADEIN_STATE_ID] && grid[COLUMN_FADEIN_STATE_ID][stateKey];\r\n\t\t\t\tif (cellState) {\r\n\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn isDef(value) ? value : '';\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tdrawMessageInternal(message, context, style, helper, grid, info) {\r\n\t\t\tinfo.messageHandler.drawCellMessage(message, context, style, helper, info);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseColumn;\r\n}","'use strict';\r\nconst {isDef, getOrApply, isPromise, obj: {isObject}} = require('../../internal/utils');\r\nconst BranchGraphStyle = require('../style/BranchGraphStyle');\r\nconst BaseColumn = require('./BaseColumn');\r\nconst {BRANCH_GRAPH_COLUMN_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nfunction getAllColumnData(grid, col, callback) {\r\n\tconst dataSource = grid.dataSource;\r\n\tlet field = grid.getField(col);\r\n\tif (isObject(field) && field.get && field.set) {\r\n\t\tfield = field.get;\r\n\t}\r\n\tconst allData = [];\r\n\tlet promise;\r\n\tfor (let index = 0; index < dataSource.length; index++) {\r\n\t\tconst data = dataSource.getField(index, field);\r\n\t\tif (isPromise(data)) {\r\n\t\t\tconst dataIndex = allData.length;\r\n\t\t\tallData.push(data);\r\n\t\t\tif (!promise) {\r\n\t\t\t\tpromise = data.then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tpromise = promise.then(() => data).then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallData.push(data);\r\n\t\t}\r\n\t}\r\n\r\n\tif (promise) {\r\n\t\tpromise.then(() => callback(allData));\r\n\t} else {\r\n\t\tcallback(allData);\r\n\t}\r\n}\r\n\r\nclass BranchLine {\r\n\tconstructor({fromIndex, toIndex, colorIndex, point}) {\r\n\t\tthis.fromIndex = fromIndex;\r\n\t\tthis.toIndex = toIndex;\r\n\t\tthis.colorIndex = colorIndex;\r\n\t\tthis.point = point;\r\n\t}\r\n}\r\nclass BranchPoint {\r\n\tconstructor({index, commit = false, lines = [], tag}) {\r\n\t\tthis.index = index;\r\n\t\tthis.commit = commit;\r\n\t\tthis.lines = lines;\r\n\t\tthis.tag = tag;\r\n\t}\r\n\tstatic mergeLines(lines) {\r\n\t\tconst result = lines.filter(((l) => isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\t\t\r\n\t\tconst froms = lines.filter(((l) => isDef(l.fromIndex) && !isDef(l.toIndex)));\r\n\t\tconst tos = lines.filter(((l) => !isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\r\n\t\tfroms.forEach((f) => {\r\n\t\t\tfor (let i = 0; i < tos.length; i++) {\r\n\t\t\t\tconst t = tos[i];\r\n\t\t\t\tif (t.point) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (f.colorIndex === t.colorIndex) {\r\n\t\t\t\t\tf.toIndex = t.toIndex;\r\n\t\t\t\t\ttos.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult.push(f);\r\n\t\t});\r\n\r\n\t\treturn result.concat(tos);\r\n\t}\r\n\tstatic merge(a, b) {\r\n\t\tif (!a) {\r\n\t\t\treturn b;\r\n\t\t}\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: a.index,\r\n\t\t\tcommit: a.commit || b.commit,\r\n\t\t\tlines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n\t\t\ttag: a.tag || b.tag\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction joinLine(timeline, branchIndex) {\r\n\tconst reverse = [...timeline].reverse();\r\n\tfor (let i = 0; i < reverse.length; i++) {\r\n\t\tconst f = reverse[i][branchIndex];\r\n\t\tif (f) {\r\n\t\t\tf.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\r\n\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\tcolorIndex: branchIndex,\r\n\t\t\t})]));\r\n\r\n\t\t\tfor (let j = 0; j < i; j++) {\r\n\t\t\t\tconst tl = reverse[j];\r\n\t\t\t\ttl[branchIndex] = new BranchPoint({\r\n\t\t\t\t\tindex: branchIndex,\r\n\t\t\t\t\tlines: [new BranchLine({\r\n\t\t\t\t\t\tfromIndex: branchIndex,\r\n\t\t\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\t\t\tcolorIndex: branchIndex\r\n\t\t\t\t\t})]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction branch({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tlet toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0) {\r\n\t\ttoIndex = branches.length;\r\n\t\tbranches.push(to);\r\n\t}\r\n\t\r\n\tfunction findBranchRootIndex() {\r\n\t\tfor (let index = timeline.length - 1; index >= 0; index--) {\r\n\t\t\tconst tl = timeline[index];\r\n\t\t\tconst from = tl[fromIndex];\r\n\t\t\tif (from && from.commit) {\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tif (fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t});\r\n\t} else {\r\n\t\tconst fromTargetIndex = findBranchRootIndex();\r\n\t\tif (fromTargetIndex === -1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst branchTargetFromIndex = fromTargetIndex + 1;\r\n\t\tconst branchPoint = new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})]\r\n\t\t});\r\n\t\tlet point;\r\n\t\tlet result;\r\n\t\tif (branchTargetFromIndex < timeline.length) {\r\n\t\t\tconst targetLine = timeline[branchTargetFromIndex];\r\n\t\t\tpoint = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n\t\t} else {\r\n\t\t\tpoint = branchPoint;\r\n\t\t\tresult = branchPoint;\r\n\t\t}\r\n\t\tconst from = timeline[fromTargetIndex][fromIndex];\r\n\t\tfrom.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\r\n\t\t\ttoIndex,\r\n\t\t\tcolorIndex: toIndex,\r\n\t\t\tpoint,\r\n\t\t})]));\r\n\t\treturn result;\r\n\t}\r\n\t\r\n}\r\n\r\nfunction commit({timeline, branches}, name) {\r\n\tconst index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\treturn null;\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex,\r\n\t\tcommit: true,\r\n\t});\r\n\t\t\r\n\tif (joinLine(timeline, index)) {\r\n\t\tresult.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\r\n\t\t\tfromIndex: index,\r\n\t\t\tcolorIndex: index\r\n\t\t})]));\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction commitTag({timeline, branches}, name, tag) {\r\n\tlet index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\tindex = branches.length;\r\n\t\tbranches.push(name);\r\n\t}\r\n\treturn new BranchPoint({\r\n\t\tindex,\r\n\t\ttag\r\n\t});\r\n}\r\n\r\nfunction commitMerge({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tconst toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0 || fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tcommit: true,\r\n\t\t});\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex: toIndex,\r\n\t\tcommit: true,\r\n\t\tlines: [\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t}),\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex: toIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})],\r\n\t});\r\n\tconst froms = [...timeline];\r\n\tconst fromTargetLine = froms.pop();\r\n\tif (fromTargetLine) {\r\n\t\tfromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\ttoIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t})]\r\n\t\t}));\r\n\t}\r\n\r\n\tjoinLine(froms, fromIndex);\r\n\r\n\tjoinLine(timeline, toIndex);\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction calcCommand(info, command) {\r\n\tconst {timeline} = info;\r\n\tconst timelineData = [];\r\n\t// const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n\tconst commands = Array.isArray(command) ? command : [command];\r\n\tcommands.forEach((cmd) => {\r\n\t\tif (!cmd) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet point;\r\n\t\tif (cmd.command === 'branch') {\r\n\t\t\tconst from = isObject(cmd.branch) ? cmd.branch.from : null;\r\n\t\t\tconst to = isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n\t\t\tpoint = branch(info, from, to);\r\n\t\t} else if (cmd.command === 'commit') {\r\n\t\t\tconst {branch} = cmd;\r\n\t\t\tpoint = commit(info, branch);\r\n\t\t} else if (cmd.command === 'merge') {\r\n\t\t\tconst {from, to} = cmd.branch;\r\n\t\t\tpoint = commitMerge(info, from, to);\r\n\t\t} else if (cmd.command === 'tag') {\r\n\t\t\tconst {branch, tag} = cmd;\r\n\t\t\tpoint = commitTag(info, branch, tag);\r\n\t\t}\r\n\t\tif (point && point.index > -1) {\r\n\t\t\ttimelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n\t\t}\r\n\t});\r\n\ttimeline.push(timelineData);\r\n}\r\n\r\nfunction calcBranchesInfo(start, grid, col) {\r\n\tconst result = {\r\n\t\tbranches: [],\r\n\t\ttimeline: []\r\n\t};\r\n\tgetAllColumnData(grid, col, (data) => {\r\n\t\tif (start !== 'top') {\r\n\t\t\tdata = [...data].reverse();\r\n\t\t}\r\n\t\tdata.forEach((command) => {\r\n\t\t\tcalcCommand(result, command);\r\n\t\t});\r\n\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n\tlet w = Math.max(width / branches.length + 1, 5);\r\n\ttimeline.forEach((tl) => {\r\n\t\ttl.forEach((p, index) => {\r\n\t\t\tif (index <= 0) {\r\n\t\t\t\t// \r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (p.tag) {\r\n\t\t\t\tconst textWidth = ctx.measureText(p.tag).width;\r\n\t\t\t\tif (((w * index) + (radius * 2) + 4 + textWidth) > width) {\r\n\t\t\t\t\tw = Math.max((width - (radius * 2) - 4 - textWidth) / index, 5);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst result = [];\r\n\tlet x = left;\r\n\tbranches.forEach(() => {\r\n\t\tresult.push(Math.ceil(x + radius));\r\n\t\tx += w;\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\r\n\tbranchXPoints, margin, branchColors, branchLineWidth, mergeStyle\r\n}, {\r\n\twidth, col, row, branches\r\n}) {\r\n\tif (isDef(upLineIndex) || isDef(downLineIndex)) {\r\n\t\tctx.strokeStyle = getOrApply(branchColors, branches[colorIndex], colorIndex);\r\n\t\tctx.lineWidth = branchLineWidth;\r\n\t\tctx.lineCap = 'round';\r\n\t\tctx.beginPath();\r\n\r\n\r\n\t\tif (isDef(upLineIndex)) {\r\n\t\t\tconst upX = branchXPoints[upLineIndex];\r\n\t\t\tconst upRect = grid.getCellRelativeRect(col, row - 1);\r\n\t\t\tconst upY = upRect.top + upRect.height / 2;\r\n\t\t\tctx.moveTo(upX, upY);\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tupX, (y + upY) / 2,\r\n\t\t\t\t\t\tx, (y + upY) / 2,\r\n\t\t\t\t\t\tx, y\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t}\r\n\r\n\t\tif (isDef(downLineIndex)) {\r\n\t\t\tconst downX = branchXPoints[downLineIndex];\r\n\t\t\tconst downRect = grid.getCellRelativeRect(col, row + 1);\r\n\t\t\tconst downY = downRect.top + downRect.height / 2;\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tx, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, downY\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(downX, downY);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tctx.stroke();\r\n\t}\r\n}\r\n\r\n/**\r\n * BranchGraphColumn<br>\r\n * <br>\r\n * # Data command<br>\r\n * ## mastar branch or orphan branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * </code></pre>\r\n * ## commit<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * </code></pre>\r\n * ## branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## merge<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## tag<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * </code></pre>\r\n *\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._start = option.start || 'bottom';\r\n\t\tthis._cache = isDef(option.cache) ? option.cache : false;\r\n\t}\r\n\tget StyleClass() {\r\n\t\treturn BranchGraphStyle;\r\n\t}\r\n\tclearCache(grid) {\r\n\t\tdelete grid[_];\r\n\t}\r\n\tonDrawCell(cellValue, info, context, grid) {\r\n\t\tif (this._cache) {\r\n\t\t\tconst state = grid[_] || (grid[_] = {});\r\n\t\t\tconst {col} = context;\r\n\t\t\tif (!state[col]) {\r\n\t\t\t\tstate[col] = calcBranchesInfo(this._start, grid, col);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn super.onDrawCell(cellValue, info, context, grid);\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphColumn(this);\r\n\t}\r\n\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst {timeline, branches} = (this._cache && grid[_]) ? grid[_][col] : calcBranchesInfo(this._start, grid, col);\r\n\t\t\r\n\t\tconst {upLineIndexKey, downLineIndexKey} = this._start !== 'top' ? {upLineIndexKey: 'toIndex', downLineIndexKey: 'fromIndex'} : {upLineIndexKey: 'fromIndex', downLineIndexKey: 'toIndex'};\r\n\t\tconst data = this._start !== 'top' ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\r\n\r\n\t\tconst {\r\n\t\t\tbranchColors,\r\n\t\t\tbranchLineWidth,\r\n\t\t\tcircleSize,\r\n\t\t\tmergeStyle,\r\n\t\t\tmargin,\r\n\t\t\tbgColor,\r\n\t\t} = style;\r\n\t\tif (bgColor) {\r\n\t\t\tdrawCellBase({\r\n\t\t\t\tbgColor,\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tconst rect = context.getRect();\r\n\t\tconst radius = circleSize / 2;\r\n\t\tconst width = rect.width - margin * 2;\r\n\r\n\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'middle';\r\n\t\t\tconst branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n\t\t\t\r\n\t\t\tconst y = rect.top + rect.height / 2;\r\n\r\n\t\t\t// draw join lines\r\n\t\t\tdata.\r\n\t\t\t\tmap((point, index) => point ? point.lines.map((line) => ({\r\n\t\t\t\t\tcolorIndex: line.colorIndex,\r\n\t\t\t\t\tupLineIndex: line[upLineIndexKey],\r\n\t\t\t\t\tdownLineIndex: line[downLineIndexKey],\r\n\t\t\t\t\tpointIndex: index,\r\n\t\t\t\t})) : []).\r\n\t\t\t\treduce((p, c) => p.concat(c), []).// flatMap\r\n\t\t\t\t// order of overlap\r\n\t\t\t\tsort((a, b) => b.colorIndex - a.colorIndex).\r\n\t\t\t\tforEach((line) => {\r\n\t\t\t\t\tconst x = branchXPoints[line.pointIndex];\r\n\t\t\t\t\trenderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n\t\t\t\t\t\tmargin,\r\n\t\t\t\t\t\tbranchXPoints,\r\n\t\t\t\t\t\tbranchLineWidth,\r\n\t\t\t\t\t\tbranchColors,\r\n\t\t\t\t\t\tmergeStyle,\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\twidth, col, row, branches\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t// draw commit points\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.commit) {\r\n\t\t\t\t\tconst x = branchXPoints[index];\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// draw tags\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.tag) {\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\nmodule.exports = BranchGraphColumn;","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst ButtonStyle = require('../style/ButtonStyle');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tconst utils = require('./columnUtils');\r\n\t\r\n\r\n\tclass ButtonColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._caption = option.caption;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t}\r\n\t\tget caption() {\r\n\t\t\treturn this._caption;\r\n\t\t}\r\n\t\twithCaption(caption) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._caption = caption;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn this._caption || value;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tlet active = false;\r\n\t\t\tconst state = grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t\tif (state) {\r\n\t\t\t\tif (state.mouseActiveCell &&\r\n\t\t\t\t\tstate.mouseActiveCell.col === col &&\r\n\t\t\t\t\tstate.mouseActiveCell.row === row) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t} else if (context.getSelectState().selected) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.button(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tbgColor: buttonBgColor,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\tshadow: active ? {\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.48)',\r\n\t\t\t\t\t\tblur: 6,\r\n\t\t\t\t\t\toffsetY: 3,\r\n\t\t\t\t\t} : true,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonColumn;\r\n}","'use strict';\r\n{\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst CheckStyle = require('../style/CheckStyle');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\t\r\n\r\n\tfunction toBoolean(val) {\r\n\t\tif (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\r\n\tclass CheckColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn CheckStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn toBoolean(value);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tconst key = col + ':' + row;\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID] && grid[CHECK_COLUMN_STATE_ID][key];\r\n\t\t\t\r\n\t\t\tconst opt = {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t};\r\n\t\t\tif (state) {\r\n\t\t\t\topt.animElapsedTime = state.elapsed;\r\n\t\t\t}\r\n\t\t\thelper.checkbox(value, context, opt);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckColumn;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('../style/Style');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass Column extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Column(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.text(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Column;\r\n}","'use strict';\r\n{\r\n\tconst IconStyle = require('../style/IconStyle');\r\n\tconst Column = require('./Column');\r\n\tconst icons = require('../../internal/icons');\r\n\r\n\tfunction repeatArray(val, count) {\r\n\t\tif (count === Infinity) {\r\n\t\t\tcount = 0;\r\n\t\t}\r\n\t\tconst a = [];\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\ta.push(val);\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tclass IconColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._tagName = option.tagName || 'i';\r\n\t\t\tthis._className = option.className;\r\n\t\t\tthis._content = option.content;\r\n\t\t\tthis._name = option.name;\r\n\t\t\tthis._iconWidth = option.iconWidth;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn IconStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tconst num = value - 0;\r\n\t\t\tif (!isNaN(num)) {\r\n\t\t\t\tconst icon = {};\r\n\t\t\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\t\t\ticon[k] = style[k];\r\n\t\t\t\t});\r\n\t\t\t\ticon.className = this._className;\r\n\t\t\t\ticon.tagName = this._tagName;\r\n\t\t\t\ticon.content = this._content;\r\n\t\t\t\ticon.name = this._name;\r\n\t\t\t\tif (this._iconWidth) {\r\n\t\t\t\t\ticon.width = this._iconWidth;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tinfo.getIcon = () => repeatArray(icon, num);\r\n\t\t\t} else {\r\n\t\t\t\tinfo.getIcon = () => null;\r\n\t\t\t}\r\n\t\t\tsuper.drawInternal('', context, style, helper, grid, info);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = IconColumn;\r\n}","'use strict';\r\n{\r\n\tconst ImageStyle = require('../style/ImageStyle');\r\n\tconst {getCacheOrLoad} = require('../../internal/imgs');\r\n\tconst {calcStartPosition} = require('../../internal/canvases');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\r\n\tconst MAX_LRU_CACHE_SIZE = 50;\r\n\tfunction getImage(url) {\r\n\t\treturn getCacheOrLoad('ImageColumn', MAX_LRU_CACHE_SIZE, url);\r\n\t}\r\n\r\n\tfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n\t\tlet newWidth = width;\r\n\t\tlet newHeight = height;\r\n\t\tif (newWidth > maxWidth) {\r\n\t\t\tnewWidth = maxWidth;\r\n\t\t\tnewHeight = (newWidth * height) / width;\r\n\t\t}\r\n\t\tif (newHeight > maxHeight) {\r\n\t\t\tnewHeight = maxHeight;\r\n\t\t\tnewWidth = (newHeight * width) / height;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\twidth: newWidth,\r\n\t\t\theight: newHeight,\r\n\t\t};\r\n\t}\r\n\r\n\tclass ImageColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn ImageStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\treturn super.onDrawCell(getImage(cellValue), info, context, grid);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tif (value) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tmargin,\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t} = style;\r\n\t\t\t\tif (bgColor) {\r\n\t\t\t\t\tdrawCellBase({\r\n\t\t\t\t\t\tbgColor,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\tif (style.imageSizing === 'keep-aspect-ratio') {\r\n\t\t\t\t\t\tconst {width, height} = calcKeepAspectRatioSize(\r\n\t\t\t\t\t\t\t\tvalue.width, value.height,\r\n\t\t\t\t\t\t\t\trect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst pos = calcStartPosition(ctx, rect, width, height, {\r\n\t\t\t\t\t\t\toffset: margin,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\tpos.x, pos.y, width, height\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\trect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageColumn;\r\n}","'use strict';\r\n{\r\n\tconst {normalize} = require('../../internal/menu-items');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst Style = require('../style/Style');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass MenuColumn extends BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._options = normalize(option.options);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MenuColumn(this);\r\n\t\t}\r\n\t\tget options() {\r\n\t\t\treturn this._options;\r\n\t\t}\r\n\t\twithOptions(options) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._options = normalize(options);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tlet {\r\n\t\t\t\tcolor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst text = this._convertInternal(value);\r\n\t\t\thelper.testFontLoad(font, text, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\tconst basePadding = helper.toBoxPixelArray(padding || 0, context);\r\n\t\t\t\tconst textPadding = basePadding.slice(0);\r\n\t\t\t\ttextPadding[1] += 26;// icon padding\r\n\t\t\t\tconst iconPadding = basePadding.slice(0);\r\n\t\t\t\ticonPadding[1] += 8;\r\n\t\t\t\tif (!isDef(color) && (!isDef(value) || value === '')) {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, .38)';\r\n\t\t\t\t}\r\n\t\t\t\thelper.text(text, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding: textPadding,\r\n\t\t\t\t});\r\n\t\t\t\t// draw icon\r\n\t\t\t\thelper.text('', context, {\r\n\t\t\t\t\ttextAlign: 'right',\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons: [{\r\n\t\t\t\t\t\tpath: 'M0 2 5 7 10 2z',\r\n\t\t\t\t\t\twidth: 10,\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, .54)',\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tpadding: iconPadding,\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\t_convertInternal(value) {\r\n\t\t\tconst options = this._options;\r\n\t\t\tfor (let i = 0; i < options.length; i++) {\r\n\t\t\t\tconst option = options[i];\r\n\t\t\t\tif (option.value === value) {\r\n\t\t\t\t\tvalue = option.caption;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn super.convertInternal(value);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = MenuColumn;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst NumberStyle = require('../style/NumberStyle');\r\n\tlet defaultFotmat;\r\n\tclass NumberColumn extends Column {\r\n\t\tstatic get defaultFotmat() {\r\n\t\t\treturn defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n\t\t}\r\n\t\tstatic set defaultFotmat(fmt) {\r\n\t\t\tdefaultFotmat = fmt;\r\n\t\t}\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._format = option.format;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn NumberStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberColumn(this);\r\n\t\t}\r\n\t\tget format() {\r\n\t\t\treturn this._format;\r\n\t\t}\r\n\t\twithFormat(format) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._format = format;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\tif (isNaN(value - 0)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t\tconst format = this._format || NumberColumn.defaultFotmat;\r\n\t\t\treturn format.format(value - 0);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberColumn;\r\n}","'use strict';\r\n{\r\n\tconst PercentCompleteBarStyle = require('../style/PercentCompleteBarStyle');\r\n\tconst {getOrApply, str} = require('../../internal/utils');\r\n\tconst Column = require('./Column');\r\n\t\r\n\r\n\tconst MARGIN = 2;\r\n\r\n\tclass PercentCompleteBarColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._min = option.min || 0;\r\n\t\t\tthis._max = option.max || (this._min + 100);\r\n\t\t\tthis._formatter = option.formatter || ((v) => v);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tsuper.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n\t\t\tconst {\r\n\t\t\t\tbarColor,\r\n\t\t\t\tbarBgColor,\r\n\t\t\t\tbarHeight,\r\n\t\t\t} = style;\r\n\r\n\t\t\tlet svalue = value + '';\r\n\t\t\tif (str.endsWith(svalue, '%')) {\r\n\t\t\t\tsvalue = svalue.substr(0, svalue.length - 1);\r\n\t\t\t}\r\n\t\t\tconst num = svalue - 0;\r\n\t\t\tconst rate = num < this._min ? 0\r\n\t\t\t\t: num > this._max ? 1\r\n\t\t\t\t: (num - this._min) / (this._max - this._min);\r\n\t\t\t\r\n\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\t\tconst barMaxWidth = rect.width - MARGIN * 2 - 1/**/;\r\n\t\t\t\tconst barTop = rect.bottom - MARGIN - barHeight - 1/**/;\r\n\t\t\t\tconst barLeft = rect.left + MARGIN;\r\n\t\t\t\tctx.fillStyle = getOrApply(barBgColor, rate * 100) || '#f0f3f5';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n\t\t\t\tctx.fill();\r\n\r\n\r\n\t\t\t\tconst barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n\t\t\t\tctx.fillStyle = getOrApply(barColor, rate * 100) || '#20a8d8';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barSize, barHeight);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarColumn;\r\n}","'use strict';\r\n{\r\n\tconst {isPromise} = require('../../internal/utils');\r\n\tconst icons = require('../../internal/icons');\r\n\tmodule.exports = {\r\n\t\tloadIcons(icon, context, helper, callback) {\r\n\t\t\tif (icon) {\r\n\t\t\t\tif (isPromise(icon)) {\r\n\t\t\t\t\ticon.then((i) => {\r\n\t\t\t\t\t\tthis.loadIcon(i, context.toCurrentContext(), callback);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst iconList = icons.toNormarizeArray(icon);\r\n\t\t\t\t\ticonList.forEach((i) => {\r\n\t\t\t\t\t\thelper.testFontLoad(i.font, i.content, context);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = iconList;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcallback(icon, context);\r\n\t\t},\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\r\n\t/**\r\n\t * core modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.core\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDrawGrid\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {\r\n\t\tisDef,\r\n\t\tbrowser,\r\n\t\tisDescendantElement,\r\n\t\tarray,\r\n\t\tisPromise,\r\n\t\tevent: {\r\n\t\t\tisTouchEvent,\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tcancel: cancelEvent,\r\n\t\t}\r\n\t} = require('../internal/utils');\r\n\t\r\n\tconst EventTarget = require('./EventTarget');\r\n\tconst Rect = require('../internal/Rect');\r\n\tconst Scrollable = require('../internal/Scrollable');\r\n\tconst EventHandler = require('../internal/EventHandler');\r\n\tconst NumberMap = require('../internal/NumberMap');\r\n\tconst style = require('../internal/style');\r\n\tconst calc = require('../internal/calc');\r\n\tconst hiDPI = require('../internal/hiDPI');\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('../internal/symbolManager');\r\n\r\n\tfunction createRootElement() {\r\n\t\tconst element = document.createElement('div');\r\n\t\telement.classList.add('cheetah-grid');\r\n\t\treturn element;\r\n\t}\r\n\r\n\tconst KEY_END = 35;\r\n\tconst KEY_HOME = 36;\r\n\tconst KEY_LEFT = 37;\r\n\tconst KEY_UP = 38;\r\n\tconst KEY_RIGHT = 39;\r\n\tconst KEY_DOWN = 40;\r\n\tconst KEY_ALPHA_C = 67;\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCLICK_CELL: 'click_cell',\r\n\t\tDBLCLICK_CELL: 'dblclick_cell',\r\n\t\tDBLTAP_CELL: 'dbltap_cell',\r\n\t\tMOUSEDOWN_CELL: 'mousedown_cell',\r\n\t\tMOUSEUP_CELL: 'mouseup_cell',\r\n\t\tSELECTED_CELL: 'selected_cell',\r\n\t\tKEYDOWN: 'keydown',\r\n\t\tMOUSEMOVE_CELL: 'mousemove_cell',\r\n\t\tMOUSEENTER_CELL: 'mouseenter_cell',\r\n\t\tMOUSELEAVE_CELL: 'mouseleave_cell',\r\n\t\tMOUSEOVER_CELL: 'mouseover_cell',\r\n\t\tMOUSEOUT_CELL: 'mouseout_cell',\r\n\t\tINPUT_CELL: 'input_cell',\r\n\t\tEDITABLEINPUT_CELL: 'editableinput_cell',\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL: 'modify_status_editableinput_cell',\r\n\t\tRESIZE_COLUMN: 'resize_column',\r\n\t\tSCROLL: 'scroll',\r\n\t};\r\n\r\n\t//private methods\r\n\tfunction _vibrate(e) {\r\n\t\tif (navigator.vibrate && isTouchEvent(e)) {\r\n\t\t\tnavigator.vibrate(50);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetRowAt(grid, absoluteY) {\r\n\t\tconst internal = grid.getTargetRowAtInternal(absoluteY);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst findBefore = (startRow, startBottom) => {\r\n\t\t\tlet bottom = startBottom;\r\n\t\t\tfor (let row = startRow; row >= 0; row--) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst top = bottom - height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tbottom = top;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst findAfter = (startRow, startBottom) => {\r\n\t\t\tlet top = startBottom - _getRowHeight(grid, startRow);\r\n\t\t\tconst {rowCount} = grid[_];\r\n\t\t\tfor (let row = startRow; row < rowCount; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst bottom = top + height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\ttop = bottom;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst candRow = Math.min(Math.ceil(absoluteY / grid[_].defaultRowHeight), grid.rowCount - 1);\r\n\t\tconst bottom = _getRowsHeight(grid, 0, candRow);\r\n\t\tif (absoluteY >= bottom) {\r\n\t\t\treturn findAfter(candRow, bottom);\r\n\t\t} else {\r\n\t\t\treturn findBefore(candRow, bottom);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetColAt(grid, absoluteX) {\r\n\t\tlet left = 0;\r\n\t\tconst {colCount} = grid[_];\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {top} = grid[_].scroll;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\tconst bottom = top + height;\r\n\t\t\tif (bottom > absoluteY) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop,\r\n\t\t\t\t\trow,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\ttop = bottom;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {left} = grid[_].scroll;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getFrozenRowsRect(grid) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {top} = grid[_].scroll;\r\n\t\tlet height = 0;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\theight += _getRowHeight(grid, row);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\ttop,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\theight\r\n\t\t);\r\n\t}\r\n\tfunction _getFrozenColsRect(grid) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {left} = grid[_].scroll;\r\n\t\tlet width = 0;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\twidth += _getColWidth(grid, col);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tleft,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\twidth,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _isCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn !!grid[_].drawCells[row][col];\r\n\t}\r\n\tfunction _putCellDrawing(grid, col, row, context) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\tgrid[_].drawCells[row] = {};\r\n\t\t}\r\n\t\tgrid[_].drawCells[row][col] = context;\r\n\t}\r\n\tfunction _removeCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdelete grid[_].drawCells[row][col];\r\n\t\tif (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n\t\t\tdelete grid[_].drawCells[row];\r\n\t\t}\r\n\t}\r\n\tfunction _drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\tskipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n\t\tconst rect = new Rect(\r\n\t\t\t\tabsoluteLeft - visibleRect.left,\r\n\t\t\t\tabsoluteTop - visibleRect.top,\r\n\t\t\t\twidth,\r\n\t\t\t\theight\r\n\t\t);\r\n\r\n\t\tconst drawRect = Rect.bounds(\r\n\t\t\t\tMath.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left,\r\n\t\t\t\tMath.max(absoluteTop, skipAbsoluteTop) - visibleRect.top,\r\n\t\t\t\trect.right,\r\n\t\t\t\trect.bottom\r\n\t\t);\r\n\r\n\t\tif (drawRect.height > 0 && drawRect.width > 0) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst dcContext = new DrawCellContext(\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\tctx, rect, drawRect,\r\n\t\t\t\t\t\t_isCellDrawing(grid, col, row),\r\n\t\t\t\t\t\tgrid[_].selection,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tconst p = grid.onDrawCell(col, row, dcContext);\r\n\t\t\t\tif (isPromise(p)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\t_putCellDrawing(grid, col, row, dcContext);\r\n\r\n\t\t\t\t\tconst pCol = col;\r\n\t\t\t\t\tdcContext._delayMode(grid, () => {\r\n\t\t\t\t\t\t_removeCellDrawing(grid, pCol, row);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tp.then(() => {\r\n\t\t\t\t\t\tdcContext.terminate();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _drawRow(grid, ctx, initFrozenCol, initCol,\r\n\t\t\tdrawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n\t\tconst {colCount} = grid[_];\r\n\t\tconst drawOuter = (col, absoluteLeft) => {\r\n\t\t\t//\r\n\t\t\tif (col >= (colCount - 1) && grid[_].canvas.width > (absoluteLeft - visibleRect.left)) {\r\n\t\t\t\tconst outerLeft = absoluteLeft - visibleRect.left;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteLeft = 0;\r\n\t\tif (initFrozenCol) {\r\n\t\t\tlet absoluteLeft = initFrozenCol.left;\r\n\t\t\tconst count = grid[_].frozenColCount;\r\n\t\t\tfor (let {col} = initFrozenCol; col < count; col++) {\r\n\t\t\t\tconst width = _getColWidth(grid, col);\r\n\r\n\t\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\t\tskipAbsoluteTop, 0,\r\n\t\t\t\t\t\tdrawLayers);\r\n\t\t\t\t\t\r\n\t\t\t\tabsoluteLeft += width;\r\n\t\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteLeft = absoluteLeft;\r\n\t\t}\r\n\r\n\t\tlet absoluteLeft = initCol.left;\r\n\t\tfor (let {col} = initCol; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\tskipAbsoluteTop, skipAbsoluteLeft,\r\n\t\t\t\t\tdrawLayers);\r\n\r\n\t\t\tabsoluteLeft += width;\r\n\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(colCount - 1, absoluteLeft);\r\n\r\n\t}\r\n\tfunction _invalidateRect(grid, drawRect) {\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tconst {rowCount} = grid[_];\r\n\t\tconst ctx = grid._getInitContext();\r\n\r\n\t\tconst initRow = _getTargetRowAt(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n\t\t\ttop: _getRowsHeight(grid, 0, rowCount - 1),\r\n\t\t\trow: rowCount\r\n\t\t};\r\n\t\tconst initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n\t\t\tleft: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n\t\t\tcol: grid[_].colCount\r\n\t\t};\r\n\t\tconst drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n\t\tconst drawRight = Math.min(visibleRect.right, drawRect.right);\r\n\r\n\t\tconst initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n\t\tconst initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n\r\n\t\tconst drawLayers = new DrawLayers();\r\n\r\n\t\tconst drawOuter = (row, absoluteTop) => {\r\n\t\t\t//\r\n\t\t\tif (row >= (rowCount - 1) && grid[_].canvas.height > (absoluteTop - visibleRect.top)) {\r\n\t\t\t\tconst outerTop = absoluteTop - visibleRect.top;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteTop = 0;\r\n\t\tif (initFrozenRow) {\r\n\t\t\tlet absoluteTop = initFrozenRow.top;\r\n\t\t\tconst count = grid[_].frozenRowCount;\r\n\t\t\tfor (let {row} = initFrozenRow; row < count; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t_drawRow(grid,\r\n\t\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\t\trow, absoluteTop, height, visibleRect, 0,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tabsoluteTop += height;\r\n\t\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteTop = absoluteTop;\r\n\t\t}\r\n\r\n\t\tlet absoluteTop = initRow.top;\r\n\t\tfor (let {row} = initRow; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t\r\n\t\t\t//\r\n\t\t\t_drawRow(grid,\r\n\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\trow, absoluteTop, height, visibleRect, skipAbsoluteTop,\r\n\t\t\t\t\tdrawLayers\r\n\t\t\t);\r\n\r\n\t\t\tabsoluteTop += height;\r\n\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(rowCount - 1, absoluteTop);\r\n\r\n\t\tdrawLayers.draw(ctx);\r\n\t}\r\n\r\n\tfunction _toPxWidth(grid, width) {\r\n\t\treturn Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n\t}\r\n\r\n\tfunction _getDefaultColPxWidth(grid) {\r\n\t\treturn _toPxWidth(grid, grid.defaultColWidth);\r\n\t}\r\n\r\n\tfunction _adjustColWidth(grid, col, orgWidth) {\r\n\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\tif (!limit) {\r\n\t\t\treturn orgWidth;\r\n\t\t}\r\n\t\t\r\n\t\tif (limit.min) {\r\n\t\t\tconst min = _toPxWidth(grid, limit.min);\r\n\t\t\tif (min > orgWidth) {\r\n\t\t\t\treturn min;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (limit.max) {\r\n\t\t\tconst max = _toPxWidth(grid, limit.max);\r\n\t\t\tif (max < orgWidth) {\r\n\t\t\t\treturn max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn orgWidth;\r\n\t}\r\n\r\n\tfunction _getColWidth(grid, col) {\r\n\t\tconst width = grid[_].colWidthsMap.get(col);\r\n\t\tif (width) {\r\n\t\t\treturn _adjustColWidth(grid, col, _toPxWidth(grid, width));\r\n\t\t}\r\n\t\treturn _getDefaultColPxWidth(grid);\r\n\t}\r\n\tfunction _setColWidth(grid, col, width) {\r\n\t\tgrid[_].colWidthsMap.put(col, width);\r\n\t}\r\n\tfunction _getColsWidth(grid, startCol, endCol) {\r\n\t\tconst colCount = endCol - startCol + 1;\r\n\t\tlet w = _getDefaultColPxWidth(grid) * colCount;\r\n\t\tgrid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\r\n\tfunction _getRowHeight(grid, row) {\r\n\t\tconst internal = grid.getRowHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst height = grid[_].rowHeightsMap.get(row);\r\n\t\tif (height) {\r\n\t\t\treturn height;\r\n\t\t}\r\n\t\treturn grid[_].defaultRowHeight;\r\n\t}\r\n\tfunction _setRowHeight(grid, row, height) {\r\n\t\tgrid[_].rowHeightsMap.put(row, height);\r\n\t}\r\n\tfunction _getRowsHeight(grid, startRow, endRow) {\r\n\t\tconst internal = grid.getRowsHeightInternal(startRow, endRow);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst rowCount = endRow - startRow + 1;\r\n\t\tlet h = grid[_].defaultRowHeight * rowCount;\r\n\t\tgrid[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\r\n\tfunction _getScrollWidth(grid) {\r\n\t\tlet w = _getDefaultColPxWidth(grid) * grid[_].colCount;\r\n\t\tgrid[_].colWidthsMap.eachAll((width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\tfunction _getScrollHeight(grid, row) {\r\n\t\tconst internal = grid.getScrollHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tlet h = grid[_].defaultRowHeight * grid[_].rowCount;\r\n\t\tgrid[_].rowHeightsMap.eachAll((height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\tfunction _onScroll(grid, e) {\r\n\t\tconst lastLeft = grid[_].scroll.left;\r\n\t\tconst lastTop = grid[_].scroll.top;\r\n\t\tconst moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n\t\tconst moveY = grid[_].scrollable.scrollTop - lastTop;\r\n\r\n\t\t//\r\n\t\tgrid[_].scroll = {\r\n\t\t\tleft: grid[_].scrollable.scrollLeft,\r\n\t\t\ttop: grid[_].scrollable.scrollTop,\r\n\t\t};\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tif ((Math.abs(moveX) >= visibleRect.width) || (Math.abs(moveY) >= visibleRect.height)) {\r\n\t\t\t//\r\n\t\t\t_invalidateRect(grid, visibleRect);\r\n\t\t} else {\r\n\t\t\t//\r\n\t\t\tgrid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n\r\n\t\t\t\t\r\n\t\t\tif (moveX !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveX < 0) {\r\n\t\t\t\t\tredrawRect.width = -moveX;\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\t\t\t\tredrawRect.width += frozenRect.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveX > 0) {\r\n\t\t\t\t\tredrawRect.left = redrawRect.right - moveX;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveX > 0) {\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenColsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (moveY !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveY < 0) {\r\n\t\t\t\t\tredrawRect.height = -moveY;\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\t\t\t\tredrawRect.height += frozenRect.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveY > 0) {\r\n\t\t\t\t\tredrawRect.top = redrawRect.bottom - moveY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveY > 0) {\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenRowsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _onKeyDownMove(grid, e) {\r\n\t\tconst {shiftKey} = e;\r\n\t\tconst keyCode = getKeyCode(e);\r\n\t\tconst focusCell = shiftKey ? grid.selection._focus : grid.selection._sel;\r\n\t\tif (keyCode === KEY_LEFT) {\r\n\t\t\tconst col = grid.getMoveLeftColByKeyDownInternal(focusCell);\r\n\t\t\tif (col < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\tconst row = grid.getMoveUpRowByKeyDownInternal(focusCell);\r\n\t\t\tif (row < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_RIGHT) {\r\n\t\t\tconst col = grid.getMoveRightColByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.colCount <= col) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\tconst row = grid.getMoveDownRowByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.rowCount <= row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_HOME) {\r\n\t\t\tconst row = e.ctrlKey ? 0 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, 0, row, e.shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_END) {\r\n\t\t\tconst row = e.ctrlKey ? grid.rowCount - 1 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, grid.colCount - 1, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t}\r\n\tfunction _moveFocusCell(grid, col, row, shiftKey) {\r\n\t\tconst offset = grid.getOffsetInvalidateCells();\r\n\r\n\t\tfunction extendRange(range) {\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\trange.start.col -= offset;\r\n\t\t\t\trange.start.row -= offset;\r\n\t\t\t\trange.end.col += offset;\r\n\t\t\t\trange.end.row += offset;\r\n\t\t\t}\r\n\t\t\treturn range;\r\n\t\t}\r\n\r\n\t\tconst beforeRange = extendRange(grid.selection.range);\r\n\t\tconst beforeRect = grid.getCellsRect(\r\n\t\t\t\tbeforeRange.start.col, beforeRange.start.row,\r\n\t\t\t\tbeforeRange.end.col, beforeRange.end.row\r\n\t\t);\r\n\r\n\t\tgrid.selection._setFocusCell(col, row, shiftKey);\r\n\t\tgrid.makeVisibleCell(col, row);\r\n\t\tgrid.focusCell(col, row);\r\n\t\t\t\r\n\t\tconst afterRange = extendRange(grid.selection.range);\r\n\t\tconst afterRect = grid.getCellsRect(\r\n\t\t\t\tafterRange.start.col, afterRange.start.row,\r\n\t\t\t\tafterRange.end.col, afterRange.end.row\r\n\t\t);\r\n\r\n\t\tif (afterRect.intersection(beforeRect)) {\r\n\t\t\tconst invalidateRect = Rect.max(afterRect, beforeRect);\r\n\t\t\t_invalidateRect(grid, invalidateRect);\r\n\t\t} else {\r\n\t\t\t_invalidateRect(grid, beforeRect);\r\n\t\t\t_invalidateRect(grid, afterRect);\r\n\t\t}\r\n\t}\r\n\tfunction _getMouseAbstractPoint(grid, e) {\r\n\t\tif (isTouchEvent(e)) {\r\n\t\t\te = e.changedTouches[0];\r\n\t\t}\r\n\t\tconst clientX = e.clientX || (e.pageX + window.scrollX);\r\n\t\tconst clientY = e.clientY || (e.pageY + window.scrollY);\r\n\t\tconst rect = grid[_].canvas.getBoundingClientRect();\r\n\t\tif (rect.right <= clientX) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (rect.bottom <= clientY) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst x = clientX - rect.left + grid[_].scroll.left;\r\n\t\tconst y = clientY - rect.top + grid[_].scroll.top;\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tfunction _bindEvents(grid) {\r\n\t\tconst getCellEventArgsSet = (e) => {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t\tconst cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tabstractPos,\r\n\t\t\t\t\tcell\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst eventArgs = {\r\n\t\t\t\tcol: cell.col,\r\n\t\t\t\trow: cell.row,\r\n\t\t\t\tevent: e,\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tabstractPos,\r\n\t\t\t\tcell,\r\n\t\t\t\teventArgs\r\n\t\t\t};\r\n\t\t};\r\n\t\tconst canResizeColumn = (col) => {\r\n\t\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\t\tif (!limit || !limit.min || !limit.max) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn limit.max !== limit.min;\r\n\t\t};\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousedown', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst results = grid.fireListeners(EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n\t\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t} else {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet doubleTapBefore = null;\r\n\t\tlet longTouchId = null;\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchstart', (e) => {\r\n\t\t\r\n\t\t\tif (!doubleTapBefore) {\r\n\t\t\t\tdoubleTapBefore = getCellEventArgsSet(e).eventArgs;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdoubleTapBefore = null;\r\n\t\t\t\t}, 350);\r\n\t\t\t} else {\r\n\t\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\t\tif (eventArgs &&\r\n\t\t\t\t\teventArgs.col === doubleTapBefore.col &&\r\n\t\t\t\t\teventArgs.row === doubleTapBefore.row) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdoubleTapBefore = null;\r\n\r\n\t\t\t\tif (e.defaultPrevented) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlongTouchId = setTimeout(() => {\r\n\t\t\t\t//\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\t\tif (!abstractPos) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n\t\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t\t}\r\n\t\t\t}, 500);\r\n\t\t});\r\n\r\n\t\tfunction cancel(e) {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchcancel', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchmove', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchend', (e) => {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tgrid[_].cellSelector.select(e);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet isMouseover = false;\r\n\t\tlet mouseEnterCell = null;\r\n\t\tlet mouseOverCell = null;\r\n\t\tfunction onMouseenterCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEENTER_CELL, cell);\r\n\t\t\tmouseEnterCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseleaveCell() {\r\n\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\tmouseEnterCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSELEAVE_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction onMouseoverCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOVER_CELL, cell);\r\n\t\t\tmouseOverCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseoutCell() {\r\n\t\t\tconst beforeMouseCell = mouseOverCell;\r\n\t\t\tmouseOverCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOUT_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst scrollElement = grid[_].scrollable.getElement();\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseover', (e) => {\r\n\t\t\tisMouseover = true;\r\n\t\t});\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseout', (e) => {\r\n\t\t\tisMouseover = false;\r\n\t\t\tonMouseoutCell();\r\n\t\t});\r\n\r\n\t\tgrid[_].handler.on(grid[_].element, 'mouseleave', (e) => {\r\n\t\t\tonMouseleaveCell();\r\n\t\t});\r\n\t\t\t\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousemove', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\t\tif (beforeMouseCell) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t\tif (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\r\n\t\t\t\t\t\tonMouseoutCell();\r\n\t\t\t\t\t\tonMouseleaveCell();\r\n\t\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (isMouseover && !mouseOverCell) {\r\n\t\t\t\t\t\tonMouseoverCell({\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tonMouseoutCell();\r\n\t\t\t\tonMouseleaveCell();\r\n\t\t\t}\r\n\t\t\tif (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {style} = grid[_].element;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\tstyle.cursor = 'col-resize';\r\n\t\t\t} else {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'click', (e) => {\r\n\t\t\tif (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.CLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.CLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'dblclick', (e) => {\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.DBLCLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].focusControl.listen('keydown', (keyCode, e) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.KEYDOWN, keyCode, e);\r\n\t\t});\r\n\t\tgrid[_].selection.listen(EVENT_TYPE.SELECTED_CELL, (data) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n\t\t});\r\n\r\n\t\tgrid[_].scrollable.onScroll((e) => {\r\n\t\t\t_onScroll(grid, e);\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SCROLL, {event: e});\r\n\t\t});\r\n\t\tgrid[_].focusControl.onKeyDownMove((e) => {\r\n\t\t\t_onKeyDownMove(grid, e);\r\n\t\t});\r\n\t\tgrid.listen('copydata', (range) => {\r\n\t\t\tlet copyValue = '';\r\n\t\t\tfor (let {row} = range.start; row <= range.end.row; row++) {\r\n\t\t\t\tfor (let {col} = range.start; col <= range.end.col; col++) {\r\n\t\t\t\t\tconst copyCellValue = grid.getCopyCellValue(col, row);\r\n\t\t\t\t\tif (window.Promise && copyCellValue instanceof window.Promise) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst strCellValue = '' + copyCellValue;\r\n\t\t\t\t\t\tif (strCellValue.match(/^\\[object .*\\]$/)) {\r\n\t\t\t\t\t\t\t//object \r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcopyValue += strCellValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif (col < range.end.col) {\r\n\t\t\t\t\t\tcopyValue += '\\t';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopyValue += '\\n';\r\n\t\t\t}\r\n\t\t\treturn copyValue;\r\n\t\t});\r\n\t\tgrid[_].focusControl.onCopy((e) => array.find(grid.fireListeners('copydata', grid[_].selection.range), isDef));\r\n\t\tgrid[_].focusControl.onInput((value) => {\r\n\t\t\tconst {col, row} = grid[_].selection.select;\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.INPUT_CELL, {col, row, value});\r\n\t\t});\r\n\t\tgrid.bindEventsInternal();\r\n\t}\r\n\r\n\tfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n\t\tif (grid[_].frozenRowCount <= 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\tif (!frozenRect.inPoint(abstractX, abstractY)) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst cell = grid.getCellAt(abstractX, abstractY);\r\n\t\tconst cellRect = grid.getCellRect(cell.col, cell.row);\r\n\t\tif (abstractX < cellRect.left + offset) {\r\n\t\t\treturn cell.col - 1;\r\n\t\t}\r\n\t\tif (cellRect.right - offset < abstractX) {\r\n\t\t\treturn cell.col;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfunction _getVisibleRect(grid) {\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _getScrollableVisibleRect(grid) {\r\n\t\tlet frozenColsWidth = 0;\r\n\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\tfrozenColsWidth = frozenRect.width;\r\n\t\t}\r\n\t\tlet frozenRowsHeight = 0;\r\n\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\tfrozenRowsHeight = frozenRect.height;\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left + frozenColsWidth,\r\n\t\t\t\tgrid[_].scroll.top + frozenRowsHeight,\r\n\t\t\t\tgrid[_].canvas.width - frozenColsWidth,\r\n\t\t\t\tgrid[_].canvas.height - frozenRowsHeight\r\n\t\t);\r\n\t}\r\n\r\n\tfunction _toRelativeRect(grid, absoluteRect) {\r\n\t\tconst rect = absoluteRect.copy();\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\trect.offsetLeft(-visibleRect.left);\r\n\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\treturn rect;\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\t/**\r\n\t * managing mouse down moving\r\n\t * @private\r\n\t */\r\n\tclass BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._events = {};\r\n\t\t\tthis._started = false;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\tmoving(e) {\r\n\t\t\treturn !!this._started;\r\n\t\t}\r\n\t\tlastMoving(e) {\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this.moving(e)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst last = this._mouseEndPoint;\r\n\t\t\tif (!last) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst pt = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\treturn pt.x === last.x && pt.y === last.y;\r\n\t\t}\r\n\t\t_bindMoveAndUp(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tthis._events.mousemove = this._handler.on(document.body, 'mousemove', (e) => this._mouseMove(e));\r\n\t\t\t\tthis._events.mouseup = this._handler.on(document.body, 'mouseup', (e) => this._mouseUp(e));\r\n\t\t\t} else {\r\n\t\t\t\tthis._events.touchmove = this._handler.on(document.body, 'touchmove', (e) => this._mouseMove(e), {passive: false});\r\n\t\t\t\tthis._events.touchend = this._handler.on(document.body, 'touchend', (e) => this._mouseUp(e));\r\n\t\t\t\tthis._events.touchcancel = this._handler.on(document.body, 'touchcancel', (e) => this._mouseUp(e));\r\n\t\t\t}\r\n\t\t\tthis._started = true;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\t_mouseMove(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\t\tthis._mouseUp(e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._moved = this._moveInternal(e) || this._moved/*calculation on after*/;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\t_mouseUp(e) {\r\n\t\t\tthis._handler.off(this._events.mousemove);\r\n\t\t\tthis._handler.off(this._events.touchmove);\r\n\t\t\tthis._handler.off(this._events.mouseup);\r\n\t\t\tthis._handler.off(this._events.touchend);\r\n\t\t\t// this._handler.off(this._events.mouseleave);\r\n\t\t\tthis._handler.off(this._events.touchcancel);\r\n\r\n\t\t\tthis._started = false;\r\n\r\n\t\t\tthis._upInternal(e);\r\n\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this._moved) { //\r\n\t\t\t\tthis._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis._mouseEndPoint = null;\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * managing cell selection operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass CellSelector extends BaseMouseDownMover {\r\n\t\tstart(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._cell = cell;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\tselect(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\t\t\tthis._cell = cell;\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell || (this._cell.col === cell.col && this._cell.row === cell.row)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, true);\r\n\r\n\t\t\t//make visible\r\n\t\t\tconst makeVisibleCol = (() => {\r\n\t\t\t\tif (cell.col < this._cell.col && 0 < cell.col) {\r\n\t\t\t\t\t// move left\r\n\t\t\t\t\treturn cell.col - 1;\r\n\t\t\t\t} else if (this._cell.col < cell.col && cell.col + 1 < this._grid.colCount) {\r\n\t\t\t\t\t// move right\r\n\t\t\t\t\treturn cell.col + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.col;\r\n\t\t\t})();\r\n\t\t\tconst makeVisibleRow = (() => {\r\n\t\t\t\tif (cell.row < this._cell.row && 0 < cell.row) {\r\n\t\t\t\t\t// move up\r\n\t\t\t\t\treturn cell.row - 1;\r\n\t\t\t\t} else if (this._cell.row < cell.row && cell.row + 1 < this._grid.rowCount) {\r\n\t\t\t\t\t// move down\r\n\t\t\t\t\treturn cell.row + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.row;\r\n\t\t\t})();\r\n\t\t\tif (makeVisibleCol !== cell.col || makeVisibleRow !== cell.row) {\r\n\t\t\t\tthis._grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n\t\t\t}\r\n\t\t\tthis._cell = cell;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_getTargetCell(e) {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst cell = this._grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * managing row width changing operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass ColumnResizer extends BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper(grid);\r\n\t\t\tthis._targetCol = -1;\r\n\t\t}\r\n\t\tstart(col, e) {\r\n\t\t\tlet pageX;\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\t({pageX} = e);\r\n\t\t\t} else {\r\n\t\t\t\t({pageX} = e.changedTouches[0]);\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = pageX;\r\n\t\t\tthis._preX = 0;\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._targetCol = col;\r\n\t\t\tthis._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n\r\n\t\t\tconst x = pageX - this._x;\r\n\t\t\tconst moveX = x - this._preX;\r\n\t\t\tthis._preX = x;\r\n\t\t\tconst pre = this._grid.getColWidth(this._targetCol);\r\n\t\t\tlet afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n\t\t\tif (afterSize < 10 && moveX < 0) {\r\n\t\t\t\tafterSize = 10;\r\n\t\t\t}\r\n\t\t\t_setColWidth(this._grid, this._targetCol, afterSize);\r\n\r\n\t\t\tconst rect = _getVisibleRect(this._grid);\r\n\t\t\trect.left = this._invalidateAbsoluteLeft;\r\n\t\t\t_invalidateRect(this._grid, rect);\r\n\r\n\t\t\tthis._grid.fireListeners(EVENT_TYPE.RESIZE_COLUMN, {col: this._targetCol});\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\tthis._grid.updateScroll();\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setSafeInputValue(input, value) {\r\n\t\tconst {type} = input;\r\n\t\tinput.type = '';\r\n\t\tinput.value = value;\r\n\t\tif (type) {\r\n\t\t\tinput.type = type;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Manage focus\r\n\t * @private\r\n\t */\r\n\tclass FocusControl extends EventTarget {\r\n\t\tconstructor(grid, parentElement, scrollable) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._scrollable = scrollable;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._input = document.createElement('input');\r\n\t\t\tthis._input.classList.add('grid-focus-control');\r\n\t\t\tthis._input.readOnly = true;\r\n\t\t\tparentElement.appendChild(this._input);\r\n\r\n\t\t\tthis._handler.on(this._input, 'compositionstart', (e) => {\r\n\t\t\t\tthis._input.classList.add('composition');\r\n\t\t\t\tthis._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t\tthis._isComposition = true;\r\n\t\t\t\tgrid.focus();\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'compositionend', (e) => {\r\n\t\t\t\tthis._isComposition = false;\r\n\t\t\t\tthis._input.classList.remove('composition');\r\n\t\t\t\tthis._input.style.font = '';\r\n\t\t\t\tif (!this._input.readOnly) {\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keypress', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._input.readOnly && e.key && e.key.length === 1) {\r\n\t\t\t\t\tif (e.key === 'c' && (e.ctrlKey || e.metaKey)) {\r\n\t\t\t\t\t\t//copy! for Firefox\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.fireListeners('input', e.key);\r\n\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tthis.fireListeners('keydown', keyCode, e);\r\n\r\n\t\t\t\tif (!this._input.readOnly && this._input.value) {\r\n\t\t\t\t\t// for Safari\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tconst inputClear = (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t};\r\n\r\n\t\t\tthis._handler.on(this._input, 'input', inputClear);\r\n\t\t\tthis._handler.on(this._input, 'keyup', inputClear);\r\n\t\t\tthis._handler.on(document, 'keydown', (e) => {\r\n\t\t\t\tif (!browser.IE) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.target !== this._input) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n\t\t\t\t\tsetSafeInputValue(this._input, 'dummy');\r\n\t\t\t\t\tthis._input.select();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._handler.on(document, 'copy', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!isDescendantElement(parentElement, e.target)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\tconst data = array.find(this.fireListeners('copy'), isDef);\r\n\t\t\t\tif (isDef(data)) {\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\tif (browser.IE) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', data); // IE\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', data); // Chrome, Firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonKeyDownMove(fn) {\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_LEFT ||\r\n\t\t\t\t\tkeyCode === KEY_UP ||\r\n\t\t\t\t\tkeyCode === KEY_RIGHT ||\r\n\t\t\t\t\tkeyCode === KEY_DOWN ||\r\n\t\t\t\t\tkeyCode === KEY_HOME ||\r\n\t\t\t\t\tkeyCode === KEY_END\r\n\t\t\t\t) {\r\n\t\t\t\t\tfn(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonInput(fn) {\r\n\t\t\treturn this.listen('input', fn);\r\n\t\t}\r\n\t\tonCopy(fn) {\r\n\t\t\treturn this.listen('copy', fn);\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\t// this._input.value = '';\r\n\t\t\tthis._input.focus();\r\n\t\t}\r\n\t\tsetFocusRect(rect) {\r\n\t\t\tconst top = this._scrollable.calcTop(rect.top);\r\n\t\t\tthis._input.style.top = (top - style.getScrollBarSize()).toFixed() + 'px';//position:relative IE position:relative\r\n\t\t\tthis._input.style.left = rect.left.toFixed() + 'px';\r\n\t\t\tthis._input.style.width = rect.width.toFixed() + 'px';\r\n\t\t\tthis._input.style.height = rect.height.toFixed() + 'px';\r\n\t\t}\r\n\t\tset editMode(editMode) {\r\n\t\t\tthis._input.readOnly = !editMode;\r\n\t\t}\r\n\t\tresetInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tconst composition = el.classList.contains('composition');\r\n\t\t\t\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tconst removeNames = [];\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tif (!this._inputStatus.hasOwnProperty(att.nodeName)) {\r\n\t\t\t\t\tremoveNames.push(att.name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tremoveNames.forEach((removeName) => {\r\n\t\t\t\tel.removeAttribute(removeName);\r\n\t\t\t});\r\n\t\t\tfor (const name in this._inputStatus) {\r\n\t\t\t\tel.setAttribute(name, this._inputStatus[name]);\r\n\t\t\t}\r\n\t\t\tif (composition) {\r\n\t\t\t\tel.classList.add('composition');\r\n\t\t\t\tel.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t} else {\r\n\t\t\t\tel.classList.remove('composition');\r\n\t\t\t}\r\n\t\t}\r\n\t\tstoreInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tthis._inputStatus = {};\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tthis._inputStatus[att.name] = att.value;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDefaultInputStatus() {\r\n\t\t\t// \r\n\t\t\t// this._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t}\r\n\t\tget editMode() {\r\n\t\t\treturn !this._input.readOnly;\r\n\t\t}\r\n\t\tget input() {\r\n\t\t\treturn this._input;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Selected area management\r\n\t */\r\n\tclass Selection extends EventTarget {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\r\n\t\t\tthis._sel = {col: 0, row: 0};\r\n\t\t\tthis._focus = {col: 0, row: 0};\r\n\t\t\t\r\n\t\t\tthis._start = {col: 0, row: 0};\r\n\t\t\tthis._end = {col: 0, row: 0};\r\n\t\t}\r\n\t\tget range() {\r\n\t\t\tconst startCol = Math.min(this._start.col, this._end.col);\r\n\t\t\tconst startRow = Math.min(this._start.row, this._end.row);\r\n\t\t\tconst endCol = Math.max(this._start.col, this._end.col);\r\n\t\t\tconst endRow = Math.max(this._start.row, this._end.row);\r\n\t\t\treturn {\r\n\t\t\t\tstart: {\r\n\t\t\t\t\tcol: startCol,\r\n\t\t\t\t\trow: startRow,\r\n\t\t\t\t},\r\n\t\t\t\tend: {\r\n\t\t\t\t\tcol: endCol,\r\n\t\t\t\t\trow: endRow,\r\n\t\t\t\t},\r\n\t\t\t\tinCell(col, row) {\r\n\t\t\t\t\treturn startCol <= col && col <= endCol &&\r\n\t\t\t\t\t\tstartRow <= row && row <= endRow;\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\tget select() {\r\n\t\t\treturn {\r\n\t\t\t\tcol: this._sel.col,\r\n\t\t\t\trow: this._sel.row\r\n\t\t\t};\r\n\t\t}\r\n\t\tset select(cell = {}) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcol = 0,\r\n\t\t\t\t\trow = 0\r\n\t\t\t\t} = cell;\r\n\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\tthis._setFocusCell(col, row, true);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setSelectCell(col, row) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tthis._sel = {col, row};\r\n\t\t\t\tthis._start = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setFocusCell(col, row, keepSelect) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tif (!keepSelect) {\r\n\t\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\t}\r\n\t\t\t\tthis._focus = {col, row};\r\n\t\t\t\tthis._end = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_wrapFireSelectedEvent(callback) {\r\n\t\t\tif (this._isWraped) {\r\n\t\t\t\tcallback();\r\n\t\t\t} else {\r\n\t\t\t\tthis._isWraped = true;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst before = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: false,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t\tconst after = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: true,\r\n\t\t\t\t\t\tbefore: {\r\n\t\t\t\t\t\t\tcol: before.col,\r\n\t\t\t\t\t\t\trow: before.row,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbefore.after = {\r\n\t\t\t\t\t\tcol: after.col,\r\n\t\t\t\t\t\trow: after.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, before);\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, after);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis._isWraped = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * This class manages the drawing process for each layer\r\n\t */\r\n\tclass DrawLayers {\r\n\t\tconstructor() {\r\n\t\t\tthis._layers = {};\r\n\t\t}\r\n\t\taddDraw(level, fn) {\r\n\t\t\tconst l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n\t\t\tl.addDraw(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tconst list = [];\r\n\t\t\tfor (const k in this._layers) {\r\n\t\t\t\tlist.push(this._layers[k]);\r\n\t\t\t}\r\n\t\t\tlist.sort((a, b) => a.level - b.level);\r\n\t\t\tlist.forEach((l) => l.draw(ctx));\r\n\t\t}\r\n\t}\r\n\tclass DrawLayer {\r\n\t\tconstructor(level) {\r\n\t\t\tthis._level = level;\r\n\t\t\tthis._list = [];\r\n\t\t}\r\n\t\tget level() {\r\n\t\t\treturn this._level;\r\n\t\t}\r\n\t\taddDraw(fn) {\r\n\t\t\tthis._list.push(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tthis._list.forEach((fn) => {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfn(ctx);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Context of cell drawing\r\n\t */\r\n\tclass DrawCellContext {\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tconstructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n\t\t\tthis._col = col;\r\n\t\t\tthis._row = row;\r\n\t\t\tthis._mode = 0;\r\n\t\t\tthis._ctx = ctx;\r\n\t\t\tthis._rect = rect;\r\n\t\t\tthis._drawRect = drawRect;\r\n\t\t\tthis._drawing = drawing;\r\n\t\t\tthis._selection = selection;\r\n\t\t\tthis._drawLayers = drawLayers;\r\n\t\t}\r\n\t\tget drawing() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawing;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tget row() {\r\n\t\t\treturn this._row;\r\n\t\t}\r\n\t\tget col() {\r\n\t\t\treturn this._col;\r\n\t\t}\r\n\t\t/**\r\n\t\t * select status.\r\n\t\t * @return {object} select status\r\n\t\t */\r\n\t\tgetSelectState() {\r\n\t\t\tconst sel = this._selection.select;\r\n\t\t\treturn {\r\n\t\t\t\tselected: sel.col === this._col && sel.row === this._row,\r\n\t\t\t\tselection: this._selection.range.inCell(this._col, this._row),\r\n\t\t\t};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Canvas context.\r\n\t\t * @return {CanvasRenderingContext2D} Canvas context.\r\n\t\t */\r\n\t\tgetContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._ctx;\r\n\t\t\t} else {\r\n\t\t\t\treturn this._grid._getInitContext();\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of cell.\r\n\t\t * @return {Rect} rect Rectangle of cell.\r\n\t\t */\r\n\t\tgetRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._rect;\r\n\t\t\t} else {\r\n\t\t\t\tif (this._rect) {\r\n\t\t\t\t\treturn this._rect;\r\n\t\t\t\t}\r\n\t\t\t\treturn this._grid.getCellRelativeRect(this._col, this._row);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetRect(rect) {\r\n\t\t\tthis._rect = rect;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of Drawing range.\r\n\t\t * @return {Rect} Rectangle of Drawing range.\r\n\t\t */\r\n\t\tgetDrawRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawRect;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\treturn this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * get Context of current state\r\n\t\t * @return {DrawCellContext} current DrawCellContext.\r\n\t\t */\r\n\t\ttoCurrentContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\tconst rect = _toRelativeRect(this._grid, absoluteRect);\r\n\t\t\t\tconst drawRect = this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t\tconst context = new DrawCellContext(\r\n\t\t\t\t\t\tthis._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection,\r\n\t\t\t\t\t\tthis._drawLayers\r\n\t\t\t\t);\r\n\t\t\t\t// toCurrentContext  toCurrentContext\r\n\t\t\t\tcontext.toCurrentContext = this.toCurrentContext.bind(this);\r\n\t\t\t\treturn context;\r\n\t\t\t}\r\n\t\t}\r\n\t\taddLayerDraw(level, fn) {\r\n\t\t\tthis._drawLayers.addDraw(level, fn);\r\n\t\t}\r\n\t\t_toRelativeDrawRect(absoluteRect) {\r\n\t\t\tconst visibleRect = _getVisibleRect(this._grid);\r\n\t\t\tlet rect = absoluteRect.copy();\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst isFrozenCell = this._grid.isFrozenCell(this._col, this._row);\r\n\t\t\tif (this._grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._grid.frozenColCount - 1, this._row);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\tMath.max(rect.left, fRect.right),\r\n\t\t\t\t\t\trect.top,\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this._grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._col, this._grid.frozenRowCount - 1);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\trect.left,\r\n\t\t\t\t\t\tMath.max(rect.top, fRect.bottom),\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\trect.offsetLeft(-visibleRect.left);\r\n\t\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\t\treturn rect;\r\n\t\t}\r\n\t\t_delayMode(grid, onTerminate) {\r\n\t\t\tthis._mode = 1;\r\n\t\t\tthis._ctx = null;\r\n\t\t\tthis._rect = null;\r\n\t\t\tthis._drawRect = null;\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._onTerminate = onTerminate;\r\n\t\t}\r\n\t\t/**\r\n\t\t * terminate\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tterminate() {\r\n\t\t\tif (this._mode !== 0) {\r\n\t\t\t\tthis._onTerminate();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * DrawGrid\r\n\t * @classdesc cheetahGrid.core.DrawGrid\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.core\r\n\t */\r\n\tclass DrawGrid extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * rowCount: grid row count.default 10\r\n\t\t * colCount: grid col count.default 10\r\n\t\t * frozenColCount: default 0\r\n\t\t * frozenRowCount: default 0\r\n\t\t * defaultRowHeight: default grid row height. default 40\r\n\t\t * defaultColWidth: default grid col width. default 80\r\n\t\t * parentElement: canvas parentElement\r\n\t\t * font: default font\r\n\t\t * underlayBackgroundColor: underlay background color\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\trowCount = 10,\r\n\t\t\t\t\tcolCount = 10,\r\n\t\t\t\t\tfrozenColCount = 0,\r\n\t\t\t\t\tfrozenRowCount = 0,\r\n\t\t\t\t\tdefaultRowHeight = 40,\r\n\t\t\t\t\tdefaultColWidth = 80,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tunderlayBackgroundColor,\r\n\t\t\t\t\tparentElement,\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis[_] = {};\r\n\t\t\tstyle.initDocument();\r\n\t\t\tthis[_].element = createRootElement();\r\n\t\t\tthis[_].scrollable = new Scrollable();\r\n\t\t\tthis[_].handler = new EventHandler();\r\n\t\t\tthis[_].selection = new Selection(this);\r\n\t\t\tthis[_].focusControl = new FocusControl(this, this[_].scrollable.getElement(), this[_].scrollable);\r\n\r\n\t\t\tthis[_].canvas = hiDPI.transform(document.createElement('canvas'));\r\n\t\t\tthis[_].context = this[_].canvas.getContext('2d', {alpha: false});\r\n\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\r\n\t\t\tthis[_].font = font;\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\r\n\t\t\t/////\r\n\t\t\tthis[_].rowHeightsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsLimit = {};\r\n\t\t\tthis[_].calcWidthContext = {\r\n\t\t\t\t_: this[_],\r\n\t\t\t\tget full() {\r\n\t\t\t\t\treturn this._.canvas.width;\r\n\t\t\t\t},\r\n\t\t\t\tget em() {\r\n\t\t\t\t\treturn this._.context.measureText('').width;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis[_].columnResizer = new ColumnResizer(this);\r\n\t\t\tthis[_].cellSelector = new CellSelector(this);\r\n\r\n\t\t\tthis[_].drawCells = {};\r\n\r\n\t\t\tthis[_].element.appendChild(this[_].canvas);\r\n\t\t\tthis[_].element.appendChild(this[_].scrollable.getElement());\r\n\t\t\tthis.updateScroll();\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.appendChild(this[_].element);\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t} else {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t}\r\n\t\t\t_bindEvents(this);\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this[_].element;\r\n\t\t}\r\n\t\tget canvas() {\r\n\t\t\treturn this[_].canvas;\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\tconst {col, row} = this[_].selection.select;\r\n\t\t\tthis.focusCell(col, row);\r\n\t\t}\r\n\t\tget selection() {\r\n\t\t\treturn this[_].selection;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset rowCount(rowCount) {\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget colCount() {\r\n\t\t\treturn this[_].colCount;\r\n\t\t}\r\n\t\tset colCount(colCount) {\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget frozenColCount() {\r\n\t\t\treturn this[_].frozenColCount;\r\n\t\t}\r\n\t\tset frozenColCount(frozenColCount) {\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t}\r\n\t\tget frozenRowCount() {\r\n\t\t\treturn this[_].frozenRowCount;\r\n\t\t}\r\n\t\tset frozenRowCount(frozenRowCount) {\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\t\t}\r\n\t\tget defaultRowHeight() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset defaultRowHeight(defaultRowHeight) {\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget defaultColWidth() {\r\n\t\t\treturn this[_].defaultColWidth;\r\n\t\t}\r\n\t\tset defaultColWidth(defaultColWidth) {\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this[_].font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis[_].font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn this[_].underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tconfigure(name, value) {\r\n\t\t\tconst cfg = this[_].config || (this[_].config = {});\r\n\t\t\tif (isDef(value)) {\r\n\t\t\t\tcfg[name] = value;\r\n\t\t\t}\r\n\t\t\treturn cfg[name];\r\n\t\t}\r\n\t\tupdateSize() {\r\n\t\t\t//\r\n\t\t\tthis[_].canvas.style.width = '';\r\n\t\t\tthis[_].canvas.style.height = '';\r\n\t\t\tconst width = Math.floor(this[_].canvas.offsetWidth ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetWidth - style.getScrollBarSize());\r\n\t\t\tconst height = Math.floor(this[_].canvas.offsetHeight ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetHeight - style.getScrollBarSize());\r\n\r\n\t\t\tthis[_].canvas.width = width;\r\n\t\t\tthis[_].canvas.height = height;\r\n\r\n\t\t\t//style\r\n\t\t\tthis[_].canvas.style.width = `${width}px`;\r\n\t\t\tthis[_].canvas.style.height = `${height}px`;\r\n\r\n\t\t\tconst sel = this[_].selection.select;\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\r\n\t\t}\r\n\t\tupdateScroll() {\r\n\t\t\tthis[_].scrollable.setScrollSize(_getScrollWidth(this), _getScrollHeight(this));\r\n\t\t\tthis[_].scroll = {\r\n\t\t\t\tleft: this[_].scrollable.scrollLeft,\r\n\t\t\t\ttop: this[_].scrollable.scrollTop,\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetRowHeight(row) {\r\n\t\t\treturn _getRowHeight(this, row);\r\n\t\t}\r\n\t\tsetRowHeight(row, height) {\r\n\t\t\t_setRowHeight(this, row, height);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetColWidth(col) {\r\n\t\t\treturn _getColWidth(this, col);\r\n\t\t}\r\n\t\tsetColWidth(col, width) {\r\n\t\t\t_setColWidth(this, col, width);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetMaxColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.max || undefined;\r\n\t\t}\r\n\t\tsetMaxColWidth(col, maxwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.max = maxwidth;\r\n\t\t}\r\n\t\tgetMinColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.min || undefined;\r\n\t\t}\r\n\t\tsetMinColWidth(col, minwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.min = minwidth;\r\n\t\t}\r\n\t\tgetCellRect(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n\t\t\tconst width = _getColWidth(this, col);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col) {\r\n\t\t\t\tabsoluteLeft += this[_].scroll.left;\r\n\t\t\t}\r\n\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, row - 1);\r\n\t\t\tconst height = _getRowHeight(this, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\tabsoluteTop += this[_].scroll.top;\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tgetCellRelativeRect(col, row) {\r\n\t\t\treturn _toRelativeRect(this, this.getCellRect(col, row));\r\n\t\t}\r\n\t\tgetCellsRect(startCol, startRow, endCol, endRow) {\r\n\t\t\tconst isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n\t\t\tconst isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n\t\t\tlet width = _getColsWidth(this, startCol, endCol);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.col) {\r\n\t\t\t\tconst scrollLeft = this[_].scroll.left;\r\n\t\t\t\tabsoluteLeft += scrollLeft;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n\t\t\t\t\twidth -= scrollLeft;\r\n\t\t\t\t\twidth = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, startRow - 1);\r\n\t\t\tlet height = _getRowsHeight(this, startRow, endRow);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.row) {\r\n\t\t\t\tconst scrollTop = this[_].scroll.top;\r\n\t\t\t\tabsoluteTop += scrollTop;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n\t\t\t\t\theight -= scrollTop;\r\n\t\t\t\t\theight = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tisFrozenCell(col, row) {\r\n\t\t\tconst isFrozenRow = this[_].frozenRowCount > 0 && row < this[_].frozenRowCount;\r\n\t\t\tconst isFrozenCol = this[_].frozenColCount > 0 && col < this[_].frozenColCount;\r\n\t\t\tif (isFrozenRow || isFrozenCol) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\trow: isFrozenRow,\r\n\t\t\t\t\tcol: isFrozenCol,\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetRowAt(absoluteY) {\r\n\t\t\tconst frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.row;\r\n\t\t\t}\r\n\t\t\tconst row = _getTargetRowAt(this, absoluteY);\r\n\t\t\treturn row ? row.row : -1;\r\n\r\n\t\t}\r\n\t\tgetColAt(absoluteX) {\r\n\t\t\tconst frozen = _getTargetFrozenColAt(this, absoluteX);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.col;\r\n\t\t\t}\r\n\t\t\tconst col = _getTargetColAt(this, absoluteX);\r\n\t\t\treturn col ? col.col : -1;\r\n\t\t}\r\n\t\tgetCellAt(absoluteX, absoluteY) {\r\n\t\t\treturn {\r\n\t\t\t\trow: this.getRowAt(absoluteY),\r\n\t\t\t\tcol: this.getColAt(absoluteX),\r\n\t\t\t};\r\n\t\t}\r\n\t\tmakeVisibleCell(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = this.getCellRect(col, row);\r\n\t\t\tconst visibleRect = _getScrollableVisibleRect(this);\r\n\t\t\tif (visibleRect.contains(rect)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.col) {\r\n\t\t\t\tif (rect.left < visibleRect.left) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n\t\t\t\t} else if (visibleRect.right < rect.right) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.row) {\r\n\t\t\t\tif (rect.top < visibleRect.top) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.top - rect.top;\r\n\t\t\t\t} else if (visibleRect.bottom < rect.bottom) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfocusCell(col, row) {\r\n\t\t\tconst oldEditMode = this[_].focusControl.editMode;\r\n\t\t\tif (oldEditMode) {\r\n\t\t\t\tthis[_].focusControl.resetInputStatus();\r\n\t\t\t}\r\n\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(col, row));\r\n\t\t\t\r\n\t\t\tconst {col: selCol, row: selRow} = this[_].selection.select;\r\n\t\t\tconst results = this.fireListeners(\r\n\t\t\t\t\tEVENT_TYPE.EDITABLEINPUT_CELL,\r\n\t\t\t\t\t{col: selCol, row: selRow}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tconst editMode = (array.findIndex(results, (v) => !!v) >= 0);\r\n\t\t\tthis[_].focusControl.editMode = editMode;\r\n\t\t\t\r\n\t\t\tif (editMode) {\r\n\t\t\t\tthis[_].focusControl.storeInputStatus();\r\n\t\t\t\tthis[_].focusControl.setDefaultInputStatus();\r\n\t\t\t\tthis.fireListeners(\r\n\t\t\t\t\t\tEVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\t\t\t\t\t{col: selCol, row: selRow, input: this[_].focusControl.input}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Failure occurs in IE if focus is not last\r\n\t\t\tthis[_].focusControl.focus();\r\n\t\t}\r\n\t\tinvalidateCell(col, row) {\r\n\t\t\tthis.invalidateGridRect(col, row);\r\n\t\t}\r\n\t\tinvalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n\t\t\tconst offset = this.getOffsetInvalidateCells();\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\tstartCol -= offset;\r\n\t\t\t\tstartRow -= offset;\r\n\t\t\t\tendCol += offset;\r\n\t\t\t\tendRow += offset;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\tconst cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n\t\t\tconst invalidateTarget = visibleRect.intersection(cellsRect);\r\n\t\t\tif (invalidateTarget) {\r\n\r\n\t\t\t\tif (this[_].frozenColCount > 0 && endCol >= this[_].frozenColCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenColsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.left = Math.min(frozenRect.right - 1, frozenRect.right);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this[_].frozenRowCount > 0 && endRow >= this[_].frozenRowCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_invalidateRect(this, invalidateTarget);\r\n\t\t\t}\r\n\t\t}\r\n\t\tinvalidate() {\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\t_invalidateRect(this, visibleRect);\r\n\t\t}\r\n\t\t/**\r\n\t\t * get cell value at copy action\r\n\t\t * <p>\r\n\t\t * Please implement\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\t//Please implement get cell value!!\r\n\t\t}\r\n\t\t/**\r\n\t\t * Draw a cell\r\n\t\t * <p>\r\n\t\t * Please implement cell drawing.\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @param  {DrawCellContext} context context of cell drawing.\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\t//Please implement cell drawing!!\r\n\t\t}\r\n\t\taddDisposable(disposable) {\r\n\t\t\tif (!disposable || !disposable.dispose || typeof disposable.dispose !== 'function') {\r\n\t\t\t\tthrow new Error('not disposable!');\r\n\t\t\t}\r\n\t\t\tconst disposables = this[_].disposables = this[_].disposables || [];\r\n\t\t\tdisposables.push(disposable);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis[_].handler.dispose();\r\n\t\t\tthis[_].scrollable.dispose();\r\n\t\t\tthis[_].focusControl.dispose();\r\n\t\t\tthis[_].columnResizer.dispose();\r\n\t\t\tthis[_].cellSelector.dispose();\r\n\t\t\tif (this[_].disposables) {\r\n\t\t\t\tthis[_].disposables.forEach((disposable) => disposable.dispose());\r\n\t\t\t\tthis[_].disposables = null;\r\n\t\t\t}\r\n\r\n\t\t\tconst {parentElement} = this[_].element;\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.removeChild(this[_].element);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetAttachCellArea(col, row) {\r\n\t\t\treturn {\r\n\t\t\t\telement: this.getElement(),\r\n\t\t\t\trect: _toRelativeRect(this, this.getCellRect(col, row)),\r\n\t\t\t};\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\t//nop\r\n\t\t}\r\n\t\tgetTargetRowAtInternal(absoluteY) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowsHeightInternal(startRow, endRow) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetScrollHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col - 1;\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col + 1;\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row - 1;\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row + 1;\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t_getInitContext() {\r\n\t\t\tconst ctx = this[_].context;\r\n\t\t\t//\r\n\t\t\tctx.fillStyle = 'white';\r\n\t\t\tctx.strokeStyle = 'black';\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'top';\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.font = this.font || '16px sans-serif';\r\n\t\t\treturn ctx;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = DrawGrid;\r\n}","'use strict';\r\n{\r\n\tconst {isDef, obj: {each}} = require('../internal/utils');\r\n\t//private symbol\r\n\tconst {_} = require('../internal/symbolManager').get();\r\n\r\n\tlet nextId = 1;\r\n\t/**\r\n\t * event target.\r\n\t */\r\n\tclass EventTarget {\r\n\t\tconstructor() {\r\n\t\t\tthis[_] = {};\r\n\t\t\tthis[_].listeners = {};\r\n\t\t\tthis[_].listenerData = {};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Adds an event listener.\r\n\t\t * @param  {string} type The event type id.\r\n\t\t * @param  {function} listener Callback method.\r\n\t\t * @return {number} unique id for the listener.\r\n\t\t */\r\n\t\tlisten(type, listener) {\r\n\t\t\tconst list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n\t\t\tlist.push(listener);\r\n\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis[_].listenerData[id] = {\r\n\t\t\t\ttype,\r\n\t\t\t\tlistener,\r\n\t\t\t\tremove: () => {\r\n\t\t\t\t\tdelete this[_].listenerData[id];\r\n\t\t\t\t\tconst index = list.indexOf(listener);\r\n\t\t\t\t\tlist.splice(index, 1);\r\n\t\t\t\t\tif (!this[_].listeners[type].length) {\r\n\t\t\t\t\t\tdelete this[_].listeners[type];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\treturn id;\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Removes an event listener which was added with listen() by the id returned by listen().\r\n\t\t * @param  {number} id the id returned by listen().\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tunlisten(id) {\r\n\t\t\tthis[_].listenerData[id].remove();\r\n\t\t}\r\n\t\taddEventListener(type, listener) {\r\n\t\t\tthis.listen(type, listener);\r\n\t\t}\r\n\t\tremoveEventListener(type, listener) {\r\n\t\t\teach(this[_].listenerData, (obj, id) => {\r\n\t\t\t\tif (obj.type === type && obj.listener === listener) {\r\n\t\t\t\t\tthis.unlisten(id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListeners(type) {\r\n\t\t\treturn !!this[_].listeners[type];\r\n\t\t}\r\n\t\t/**\r\n\t\t * Fires all registered listeners\r\n\t\t * @param  {string}    type The type of the listeners to fire.\r\n\t\t * @param  {...*} args fire arguments\r\n\t\t * @return {*} the result of the last listener\r\n\t\t */\r\n\t\tfireListeners(type, ...args) {\r\n\t\t\tconst list = this[_].listeners[type];\r\n\t\t\tif (!list) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\treturn list.\r\n\t\t\t\tmap((listener) => listener.call(this, ...args)).\r\n\t\t\t\tfilter(isDef);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tdelete this[_];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventTarget;\r\n}","'use strict';\r\n{\r\n\tconst DataSource = require('./data/DataSource');\r\n\tconst CachedDataSource = require('./data/CachedDataSource');\r\n\t\r\n\r\n\t/**\r\n\t * data modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.data\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDataSource,\r\n\t\tCachedDataSource\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst DataSource = require('./DataSource');\r\n\r\n\tfunction _setFieldCache({_fCache}, index, field, value) {\r\n\t\tconst recCache = _fCache[index] || (_fCache[index] = {});\r\n\t\trecCache[field] = value;\r\n\t}\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.CachedDataSource\r\n\t * @extends cheetahGrid.data.DataSource\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass CachedDataSource extends DataSource {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn DataSource.EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new CachedDataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor(opt = {}) {\r\n\t\t\tsuper(opt);\r\n\t\t\tthis._rCache = {};\r\n\t\t\tthis._fCache = {};\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\tif (this._rCache && this._rCache[index]) {\r\n\t\t\t\treturn this._rCache[index];\r\n\t\t\t}\r\n\t\t\treturn super.getOriginal(index);\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\r\n\t\t\tif (cache) {\r\n\t\t\t\treturn cache;\r\n\t\t\t}\r\n\t\t\treturn super.getOriginalField(index, field);\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tconst fCache = this._fCache;\r\n\t\t\tif (fCache && fCache[index]) {\r\n\t\t\t\tdelete fCache[index]; // clear row cache\r\n\t\t\t}\r\n\t\t\treturn super.setOriginalField(index, field, value);\r\n\t\t}\r\n\t\tclearCache() {\r\n\t\t\tif (this._rCache) {\r\n\t\t\t\tthis._rCache = {};\r\n\t\t\t}\r\n\t\t\tif (this._fCache) {\r\n\t\t\t\tthis._fCache = {};\r\n\t\t\t}\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t_setFieldCache(this, index, field, val);\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\tthis._rCache[index] = val;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CachedDataSource;\r\n}","'use strict';\r\n{\r\n\tconst {array, isDef, isPromise, getOrApply, applyChainSafe, emptyFn} = require('../internal/utils');\r\n\tconst sort = require('../internal/sort');\r\n\tconst EventTarget = require('../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tUPDATE_LENGTH: 'update_length',\r\n\t\tUPDATED_LENGTH: 'updated_length',\r\n\t\tUPDATED_ORDER: 'updated_order',\r\n\t};\r\n\r\n\tfunction getValue(value, setPromiseBack) {\r\n\t\tvalue = getOrApply(value);\r\n\t\tif (isPromise(value)) {\r\n\t\t\tvalue = value.then((r) => {\r\n\t\t\t\tif (!isPromise(r)) {\r\n\t\t\t\t\tsetPromiseBack(r);\r\n\t\t\t\t}\r\n\t\t\t\treturn getValue(r, setPromiseBack);\r\n\t\t\t});\r\n\t\t\t//\r\n\t\t\tsetPromiseBack(value);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tfunction getField(record, field, setPromiseBack) {\r\n\t\tif (!isDef(record)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (isPromise(record)) {\r\n\t\t\treturn record.then((r) => getField(r, field, setPromiseBack));\r\n\t\t}\r\n\t\tif (field in record) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\tif (typeof field === 'function') {\r\n\t\t\treturn getValue(field(record), setPromiseBack);\r\n\t\t}\r\n\r\n\t\tconst ss = (field + '').split('.');\r\n\t\tif (ss.length <= 1) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\treturn getValue(applyChainSafe(record, (val, name) => getField(val, name, emptyFn), ...ss), setPromiseBack);\r\n\t}\r\n\tfunction setField(record, field, value) {\r\n\t\tif (field in record) {\r\n\t\t\trecord[field] = value;\r\n\t\t} else if (typeof field === 'function') {\r\n\t\t\treturn field(record, value);\r\n\t\t} else if (typeof field === 'string') {\r\n\t\t\tconst ss = (field + '').split('.');\r\n\t\t\tlet obj = record;\r\n\t\t\tconst {length} = ss;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst f = ss[i];\r\n\t\t\t\tif (i === length - 1) {\r\n\t\t\t\t\tobj[f] = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj = obj[f] || (obj[f] = {});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\trecord[field] = value;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\tfunction _getIndex(dataSource, index) {\r\n\t\tif (!dataSource._sortedIndexMap) {\r\n\t\t\treturn index;\r\n\t\t}\r\n\t\tconst mapIndex = dataSource._sortedIndexMap[index];\r\n\t\treturn isDef(mapIndex) ? mapIndex : index;\r\n\t}\r\n\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.DataSource\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass DataSource extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new DataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor({get, length = 0} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._get = get;\r\n\t\t\tthis._length = length;\r\n\t\t\tthis._sortedIndexMap = false;\r\n\t\t}\r\n\t\tget(index) {\r\n\t\t\treturn this.getOriginal(_getIndex(this, index));\r\n\t\t}\r\n\t\tgetField(index, field) {\r\n\t\t\treturn this.getOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\thasField(index, field) {\r\n\t\t\treturn this.hasOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\tsetField(index, field, value) {\r\n\t\t\treturn this.setOriginalField(_getIndex(this, index), field, value);\r\n\t\t}\r\n\t\tsort(field, order) {\r\n\t\t\tconst sortedIndexMap = new Array(this._length);\r\n\r\n\t\t\tconst orderFn = order !== 'desc'\r\n\t\t\t\t? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1\r\n\t\t\t\t: (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\r\n\r\n\t\t\treturn sort.sortPromise(\r\n\t\t\t\t\t(index) => isDef(sortedIndexMap[index])\r\n\t\t\t\t\t\t? sortedIndexMap[index]\r\n\t\t\t\t\t\t: (sortedIndexMap[index] = index),\r\n\t\t\t\t\t(index, rel) => {\r\n\t\t\t\t\t\tsortedIndexMap[index] = rel;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis._length,\r\n\t\t\t\t\torderFn,\r\n\t\t\t\t\t(index) => this.getOriginalField(index, field)\r\n\t\t\t).then(() => {\r\n\t\t\t\tthis._sortedIndexMap = sortedIndexMap;\r\n\t\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n\t\t\t});\r\n\t\t}\r\n\t\tget length() {\r\n\t\t\treturn this._length;\r\n\t\t}\r\n\t\tset length(length) {\r\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._length = length;\r\n\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\treturn getValue(this._get(index), (val) => {\r\n\t\t\t\tthis.recordPromiseCallBackInternal(index, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn getField(record, field, (val) => {\r\n\t\t\t\tthis.fieldPromiseCallBackInternal(index, field, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\thasOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (typeof field === 'function') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn field in record;\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn setField(record, field, value);\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t}\r\n\tDataSource.EMPTY = new DataSource({\r\n\t\tlength: 0,\r\n\t});\r\n\r\n\tmodule.exports = DataSource;\r\n}","'use strict';\r\n\r\nconst {isDef} = require('../internal/utils');\r\nclass Inline {\r\n\tconstructor(content) {\r\n\t\tthis._content = isDef(content) ? content : '';\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn ctx.measureText(this._content).width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(fn) {\r\n\t\t\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight,\r\n\t}) {\r\n\t\tcanvashelper.fillTextRect(ctx, this._content,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t}\r\n}\r\nmodule.exports = Inline;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\n\r\nclass InlineDrawer extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tdraw,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._draw = draw;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t}) {\r\n\t\tthis._draw({\r\n\t\t\tctx,\r\n\t\t\tcanvashelper,\r\n\t\t\trect,\r\n\t\t\toffset,\r\n\t\t\toffsetLeft,\r\n\t\t\toffsetRight,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineDrawer;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst fonts = require('../internal/fonts');\r\n\r\nclass InlineIcon extends Inline {\r\n\tconstructor(icon) {\r\n\t\tsuper();\r\n\t\tthis._icon = icon || {};\r\n\t}\r\n\twidth({ctx}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.width) {\r\n\t\t\treturn icon.width;\r\n\t\t}\r\n\t\tif (icon.font && fonts.check(icon.font, icon.content)) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.font = icon.font || ctx.font;\r\n\t\t\t\treturn ctx.measureText(icon.content).width;\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfont() {\r\n\t\treturn this._icon.font;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._icon.color;\r\n\t}\r\n\tcanDraw() {\r\n\t\tconst icon = this._icon;\r\n\t\treturn icon.font ? fonts.check(icon.font, icon.content) : true;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.font && !fonts.check(icon.font, icon.content)) {\r\n\t\t\tfonts.load(icon.font, icon.content, callback);\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.content) {\r\n\t\t\tcanvashelper.fillTextRect(ctx, icon.content,\r\n\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineIcon;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {getCacheOrLoad} = require('../internal/imgs');\r\nconst {isPromise} = require('../internal/utils');\r\n\r\nclass InlineImage extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsrc,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\tthis._src = src;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._imageLeft = imageLeft;\r\n\t\tthis._imageTop = imageTop;\r\n\t\tthis._imageWidth = imageWidth;\r\n\t\tthis._imageHeight = imageHeight;\r\n\r\n\t\tthis._onloaded = [];\r\n\r\n\r\n\t\tthis._loaded = false;\r\n\t\tif (isPromise(src)) {\r\n\t\t\tsrc.then((s) => {\r\n\t\t\t\tthis._src = s;\r\n\t\t\t\tthis._loadImage(s);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loadImage(src);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t_loadImage(src) {\r\n\t\tconst img = this._inlineImg = getCacheOrLoad('InlineImage', 50, src);\r\n\t\tif (isPromise(img)) {\r\n\t\t\timg.then((i) => {\r\n\t\t\t\tthis._loaded = true;\r\n\t\t\t\tthis._inlineImg = i;\r\n\r\n\t\t\t\tthis._onloaded.forEach((fn) => fn());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loaded = true;\r\n\t\t}\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width || (this._loaded ? this._inlineImg.width : 0);\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn this._loaded;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tif (isPromise(this._src) || isPromise(this._inlineImg)) {\r\n\t\t\tthis._onloaded.push(() => callback());\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t}) {\r\n\t\tconst img = this._inlineImg;\r\n\t\tcanvashelper.drawInlineImageRect(ctx, img,\r\n\t\t\t\tthis._imageLeft || 0, this._imageTop || 0,\r\n\t\t\t\tthis._imageWidth || img.width, this._imageHeight || img.height,\r\n\t\t\t\tthis._width || img.width, this._height || img.height,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineImage;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nclass InlinePath2D extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tpath,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t// IEPath2Dpolyfill\r\n\t\tthis._path = new path2DManager.Path2D(path);\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight\r\n\t}) {\r\n\t\toffset++;\r\n\t\tconst padding = {\r\n\t\t\tleft: offsetLeft,\r\n\t\t\tright: offsetRight,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, this._width, this._height, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\tctx.translate(pos.x, pos.y);\r\n\t\t\tctx.fill(this._path);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlinePath2D;","'use strict';\r\n\r\nconst InlineImage = require('./InlineImage');\r\nconst {then} = require('../internal/utils');\r\n\r\nfunction buildSvgDataUrl(svg) {\r\n\tconst data = (typeof svg === 'string') ? svg : new XMLSerializer().serializeToString(svg);\r\n\tconst url = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(data); //svgbase64\r\n\treturn url;\r\n}\r\nfunction getSvgElement(svg) {\r\n\tif (typeof svg === 'string') {\r\n\t\tconst parser = new DOMParser();\r\n\t\treturn parser.parseFromString(svg, 'image/svg+xml');\r\n\t} else {\r\n\t\treturn svg;\r\n\t}\r\n}\r\n\r\nclass InlineSvg extends InlineImage {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsvg,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tconst svgElem = then(svg, getSvgElement);\r\n\t\tconst elmWidth = svgElem.getAttribute ? svgElem.getAttribute('width') : null;\r\n\t\tconst elmHeight = svgElem.getAttribute ? svgElem.getAttribute('height') : null;\r\n\t\tsuper({\r\n\t\t\tsrc: then(svg, buildSvgDataUrl),\r\n\t\t\twidth: width || elmWidth,\r\n\t\t\theight: height || elmHeight,\r\n\t\t\timageWidth: elmWidth,\r\n\t\t\timageHeight: elmHeight,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineSvg;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst InlineIcon = require('./InlineIcon');\r\nconst InlineImage = require('./InlineImage');\r\nconst InlineSvg = require('./InlineSvg');\r\nconst InlineDrawer = require('./InlineDrawer');\r\nconst InlinePath2D = require('./InlinePath2D');\r\nconst {isDef} = require('../internal/utils');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst icons = require('../icons');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nfunction drawRegisteredIcon(ctx, icon,\r\n\t\tdrawWidth, drawHeight,\r\n\t\tleft, top, width, height,\r\n\t\t{\r\n\t\t\toffset = 2,\r\n\t\t\tpadding,\r\n\t\t} = {}) {\r\n\tconst rect = {\r\n\t\tleft,\r\n\t\ttop,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tright: left + width,\r\n\t\tbottom: top + height,\r\n\t};\r\n\tctx.save();\r\n\ttry {\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t//clip\r\n\t\tctx.clip();\r\n\r\n\t\t//\r\n\t\tconst pos = calcStartPosition(ctx, rect, drawWidth, drawHeight, {\r\n\t\t\toffset,\r\n\t\t\tpadding\r\n\t\t});\r\n\t\tpath2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n\t} finally {\r\n\t\tctx.restore();\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\ticonOf(icon) {\r\n\t\tif (icon instanceof Inline) {\r\n\t\t\treturn icon;\r\n\t\t}\r\n\t\tif (!icon) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (icon.font && icon.content) {\r\n\t\t\treturn new InlineIcon(icon);\r\n\t\t}\r\n\t\tif (icon.src) {\r\n\t\t\treturn new InlineImage({\r\n\t\t\t\tsrc: icon.src,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.svg) {\r\n\t\t\treturn new InlineSvg({\r\n\t\t\t\tsvg: icon.svg,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.path) {\r\n\t\t\treturn new InlinePath2D({\r\n\t\t\t\tpath: icon.path,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst regedIcons = icons.get();\r\n\t\tif (icon.name && regedIcons[icon.name]) {\r\n\t\t\tconst regedIcon = regedIcons[icon.name];\r\n\t\t\tconst width = icon.width || Math.max(regedIcon.width, regedIcon.height);\r\n\t\t\treturn new InlineDrawer({\r\n\t\t\t\tdraw({\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\trect,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\toffsetRight,\r\n\t\t\t\t}) {\r\n\t\t\t\t\tdrawRegisteredIcon(ctx, regedIcon,\r\n\t\t\t\t\t\t\twidth, width,\r\n\t\t\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\twidth,\r\n\t\t\t\theight: width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn new InlineIcon(icon);\r\n\t},\r\n\tof(content) {\r\n\t\tif (!isDef(content)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (content instanceof Inline) {\r\n\t\t\treturn content;\r\n\t\t}\r\n\t\treturn new Inline(content);\r\n\t},\r\n\tbuildInlines(icons, inline) {\r\n\t\tconst result = [];\r\n\t\tif (icons) {\r\n\t\t\tresult.push(...(icons.map((icon) => this.iconOf(icon)).filter((e) => !!e)));\r\n\t\t}\r\n\t\tif (Array.isArray(inline) && inline.filter((il) => il instanceof Inline).length) {\r\n\t\t\tresult.push(...(inline.map((il) => this.of(il)).filter((e) => !!e)));\r\n\t\t} else {\r\n\t\t\tconst il = this.of(inline);\r\n\t\t\tif (il) {\r\n\t\t\t\tresult.push(il);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\r\n\tconst style = {\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tof(columnStyle, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(), StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst Header = require('./type/Header');\r\n\tconst SortHeader = require('./type/SortHeader');\r\n\r\n\tconst type = {\r\n\t\tcreate(headerCell) {\r\n\t\t\tif (headerCell.sort) {\r\n\t\t\t\treturn new SortHeader(headerCell);\r\n\t\t\t}\r\n\t\t\treturn new Header(headerCell);\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\r\n\tclass BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tthis._headerCell = headerCell;\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\t\t\t//\r\n\t\t\tthis.drawInternal(\r\n\t\t\t\t\tcellValue,\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t\tstyleContents.of(style, this.StyleClass),\r\n\t\t\t\t\thelper,\r\n\t\t\t\t\tgrid,\r\n\t\t\t\t\tinfo\r\n\t\t\t);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseHeader;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\r\n\tclass Header extends BaseHeader {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t});\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Header;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tMOUSEMOVE_CELL,\r\n\t}} = require('../../core/DrawGrid');\r\n\r\n\tclass SortHeader extends BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tsuper(headerCell);\r\n\t\t\tthis._sort = headerCell.sort;\r\n\t\t\tthis._range = headerCell.range;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\tcolor,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tfont,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst state = grid.sortState;\r\n\t\t\tlet order = undefined;\r\n\t\t\tif (this._range.isCellInRange(state.col, this._range.startRow)) {\r\n\t\t\t\torder = state.order;\r\n\t\t\t}\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tconst arrowSize = ctx.measureText('').width * 1.2;\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons: [{\r\n\t\t\t\t\tname: isDef(order) ? (order === 'asc' ? 'arrow_downward' : 'arrow_upward') : null,\r\n\t\t\t\t\twidth: arrowSize,\r\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.38)',\r\n\t\t\t\t}],\r\n\t\t\t});\r\n\t\t}\r\n\t\t_executeSort(newState, grid) {\r\n\t\t\tif (typeof this._sort === 'function') {\r\n\t\t\t\tthis._sort(newState.order, newState.col, grid);\r\n\t\t\t} else {\r\n\t\t\t\tgrid.dataSource.sort(grid.getField(newState.col), newState.order);\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst state = grid.sortState;\r\n\t\t\t\t\tlet newState;\r\n\t\t\t\t\tif (this._range.isCellInRange(state.col, e.row)) {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: state.order === 'asc' ? 'desc' : 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.sortState = newState;\r\n\t\t\t\t\tthis._executeSort(newState, grid);\r\n\t\t\t\t\tgrid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n\t\t\t\t}),\r\n\t\t\t\t// mouse move\r\n\t\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}),\r\n\t\t\t\t//MOUSEENTER'col-resize'move\r\n\t\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t\t}),\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = SortHeader;\r\n}","/*eslint-disable camelcase*/\r\n'use strict';\r\n\r\nconst {extend} = require('./internal/utils');\r\nconst plugins = require('./plugins/icons');\r\nconst builtins = {\r\n\tget arrow_upward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg');\r\n\t},\r\n\tget arrow_downward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg');\r\n\t},\r\n\tget edit() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/image/svg/production/ic_edit_48px.svg');\r\n\t},\r\n\tget add() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/content/svg/production/ic_add_48px.svg');\r\n\t},\r\n\tget star() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg');\r\n\t},\r\n\tget star_border() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg');\r\n\t},\r\n\tget star_half() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg');\r\n\t},\r\n};\r\n\r\nmodule.exports = {\r\n\tget() {\r\n\t\treturn extend(builtins, plugins);\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst {obj: {each}} = require('./utils');\r\n\tlet nextId = 1;\r\n\r\n\tclass EventHandler {\r\n\t\tconstructor() {\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\ton(target, type, listener, ...options) {\r\n\t\t\tif (target.addEventListener) {\r\n\t\t\t\ttarget.addEventListener(type, listener, ...options);\r\n\t\t\t}\r\n\t\t\tconst obj = {\r\n\t\t\t\ttarget, type, listener, options\r\n\t\t\t};\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis._listeners[id] = obj;\r\n\t\t\treturn id;\r\n\t\t}\r\n\t\ttryWithOffEvents(target, type, call) {\r\n\t\t\tconst list = [];\r\n\t\t\ttry {\r\n\t\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlist.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcall();\r\n\t\t\t} finally {\r\n\t\t\t\tlist.forEach((obj) => {\r\n\t\t\t\t\tif (obj.target.addEventListener) {\r\n\t\t\t\t\t\tobj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\toff(id) {\r\n\t\t\tif (!id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst obj = this._listeners[id];\r\n\t\t\tif (!obj) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete this._listeners[id];\r\n\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfire(target, type, ...args) {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tobj.listener.call(obj.target, ...args);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListener(target, type) {\r\n\t\t\tlet result = false;\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tclear() {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis.clear();\r\n\t\t\tthis._listeners = null;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventHandler;\r\n}","'use strict';\r\n\r\nclass LRUCache {\r\n\tconstructor(cacheSize) {\r\n\t\tthis._list = [];\r\n\t\tthis._map = {};\r\n\t\tthis._cacheSize = cacheSize || 50;\r\n\t}\r\n\tget(key) {\r\n\t\tconst val = this._map[key];\r\n\t\tif (val) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t\tthis._list.push(key);\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\tput(key, value) {\r\n\t\tif (this._map[key]) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t}\r\n\t\tthis._map[key] = value;\r\n\t\tthis._list.push(key);\r\n\t\tif (this._list.length > this._cacheSize) {\r\n\t\t\tconst remKey = this._list.shift();\r\n\t\t\tdelete this._map[remKey];\r\n\t\t}\r\n\t}\r\n}\r\nmodule.exports = LRUCache;","'use strict';\r\n{\r\n\tconst indexFirst = (ary, elm) => {\r\n\t\tlet low = 0;\r\n\t\tlet high = ary.length - 1;\r\n\t\twhile (low <= high) {\r\n\t\t\tconst i = Math.floor((low + high) / 2);\r\n\t\t\tif (ary[i] === elm) {\r\n\t\t\t\treturn i;\r\n\t\t\t} else if (ary[i] > elm) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t} else {\r\n\t\t\t\tlow = i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn high < 0 ? 0 : high;\r\n\t};\r\n\r\n\r\n\tclass NumberMap {\r\n\t\tconstructor() {\r\n\t\t\tthis._keys = [];\r\n\t\t\tthis._vals = {};\r\n\t\t\tthis._sorted = false;\r\n\t\t}\r\n\t\tput(key, value) {\r\n\t\t\tif (!(key in this._vals)) {\r\n\t\t\t\tthis._keys.push(key);\r\n\t\t\t\tthis._sorted = false;\r\n\t\t\t}\r\n\t\t\tthis._vals[key] = value;\r\n\t\t}\r\n\t\tget(key) {\r\n\t\t\treturn this._vals[key];\r\n\t\t}\r\n\t\teachAll(fn) {\r\n\t\t\tthis._keys.forEach((key) => {\r\n\t\t\t\tfn(this.get(key), key);\r\n\t\t\t});\r\n\t\t}\r\n\t\teach(keyFrom, keyTo, fn) {\r\n\t\t\tconst {_keys: keys} = this;\r\n\t\t\tconst {length} = keys;\r\n\t\t\tif (!this._sorted) {\r\n\t\t\t\tkeys.sort((a, b) => {\r\n\t\t\t\t\tif (a < b) { return -1; }\r\n\t\t\t\t\tif (a > b) { return 1; }\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tthis._sorted = true;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n\t\t\t\tconst key = keys[i];\r\n\t\t\t\tif (keyFrom <= key && key <= keyTo) {\r\n\t\t\t\t\tfn(this.get(key), key);\r\n\t\t\t\t} else if (keyTo < key) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberMap;\r\n}","'use strict';\r\n{\r\n\tclass Rect {\r\n\t\tconstructor(left, top, width, height) {\r\n\t\t\tthis._left = left;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t}\r\n\t\tstatic bounds(left, top, right, bottom) {\r\n\t\t\treturn new Rect(left, top, right - left, bottom - top);\r\n\t\t}\r\n\t\tstatic max(rect1, rect2) {\r\n\t\t\treturn Rect.bounds(\r\n\t\t\t\t\tMath.min(rect1.left, rect2.left),\r\n\t\t\t\t\tMath.min(rect1.top, rect2.top),\r\n\t\t\t\t\tMath.max(rect1.right, rect2.right),\r\n\t\t\t\t\tMath.max(rect1.bottom, rect2.bottom)\r\n\t\t\t);\r\n\t\t}\r\n\t\tget left() {\r\n\t\t\treturn this._left;\r\n\t\t}\r\n\t\tset left(left) {\r\n\t\t\tconst {right} = this;\r\n\t\t\tthis._left = left;\r\n\t\t\tthis.right = right;\r\n\t\t}\r\n\t\tget top() {\r\n\t\t\treturn this._top;\r\n\t\t}\r\n\t\tset top(top) {\r\n\t\t\tconst {bottom} = this;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis.bottom = bottom;\r\n\t\t}\r\n\t\tget width() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset width(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\tget height() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset height(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tget right() {\r\n\t\t\treturn this._right !== undefined ? this._right : (this._right = this.left + this.width);\r\n\t\t}\r\n\t\tset right(right) {\r\n\t\t\tthis._right = right;\r\n\t\t\tthis.width = right - this.left;\r\n\t\t}\r\n\t\tget bottom() {\r\n\t\t\treturn this._bottom !== undefined ? this._bottom : (this._bottom = this.top + this.height);\r\n\t\t}\r\n\t\tset bottom(bottom) {\r\n\t\t\tthis._bottom = bottom;\r\n\t\t\tthis.height = bottom - this.top;\r\n\t\t}\r\n\t\toffsetLeft(offset) {\r\n\t\t\tthis._left += offset;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\toffsetTop(offset) {\r\n\t\t\tthis._top += offset;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tcopy() {\r\n\t\t\treturn new Rect(this.left, this.top, this.width, this.height);\r\n\t\t}\r\n\t\tintersection(rect) {\r\n\t\t\tconst x0 = Math.max(this.left, rect.left);\r\n\t\t\tconst x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n\t\t\tif (x0 <= x1) {\r\n\t\t\t\tconst y0 = Math.max(this.top, rect.top);\r\n\t\t\t\tconst y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n\t\t\t\tif (y0 <= y1) {\r\n\t\t\t\t\treturn Rect.bounds(x0, y0, x1, y1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tcontains(another) {\r\n\t\t\treturn this.left <= another.left &&\r\n\t\t\t\t\tthis.left + this.width >= another.left + another.width &&\r\n\t\t\t\t\tthis.top <= another.top &&\r\n\t\t\t\t\tthis.top + this.height >= another.top + another.height;\r\n\t\t}\r\n\t\tinPoint(x, y) {\r\n\t\t\treturn this.left <= x &&\r\n\t\t\t\t\tthis.left + this.width >= x &&\r\n\t\t\t\t\tthis.top <= y &&\r\n\t\t\t\t\tthis.top + this.height >= y;\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Rect;\r\n}","'use strict';\r\n{\r\n\tconst EventHandler = require('./EventHandler');\r\n\tconst style = require('./style');\r\n\tconst {browser} = require('./utils');\r\n\t\r\n\tconst MAX_SCROLL = browser.heightLimit - 1000;\r\n\r\n\tfunction _update(scrollable) {\r\n\t\tlet domHeight;\r\n\t\tif (scrollable._height > MAX_SCROLL) {\r\n\t\t\tconst sbSize = style.getScrollBarSize();\r\n\t\t\tconst offsetHeight = scrollable._scrollable.offsetHeight;\r\n\t\t\tconst vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n\t\t\tconst rScrollRange = scrollable._height - offsetHeight + sbSize;\r\n\t\t\tscrollable._p = vScrollRange / rScrollRange;\r\n\t\t\tdomHeight = MAX_SCROLL;\r\n\t\t} else {\r\n\t\t\tscrollable._p = 1;\r\n\t\t\tdomHeight = scrollable._height;\r\n\t\t}\r\n\r\n\t\tscrollable._endPointElement.style.top = domHeight.toFixed() + 'px';\r\n\t\tscrollable._endPointElement.style.left = scrollable._width.toFixed() + 'px';\r\n\t\t\r\n\t}\r\n\r\n\tclass Scrollable {\r\n\t\tconstructor() {\r\n\t\t\tthis._handler = new EventHandler();\r\n\r\n\t\t\tthis._scrollable = document.createElement('div');\r\n\t\t\tthis._scrollable.classList.add('grid-scrollable');\r\n\t\t\tthis._height = 0;\r\n\t\t\tthis._width = 0;\r\n\r\n\t\t\tthis._endPointElement = document.createElement('div');\r\n\t\t\tthis._endPointElement.classList.add('grid-scroll-end-point');\r\n\t\t\t_update(this);\r\n\t\t\tthis._scrollable.appendChild(this._endPointElement);\r\n\r\n\t\t\t// const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n\t\t\t// this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n\t\t\t// const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n\t\t\t// const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n\t\t\t// this.scrollTop += delta < 0 ? point : -point;\r\n\t\t\t// });\r\n\t\t}\r\n\t\tcalcTop(top) {\r\n\t\t\tconst relativeTop = top - this.scrollTop;\r\n\t\t\treturn this._scrollable.scrollTop + relativeTop;\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this._scrollable;\r\n\t\t}\r\n\t\tsetScrollSize(width, height) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollWidth() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset scrollWidth(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollHeight() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset scrollHeight(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollLeft() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollLeft);\r\n\t\t}\r\n\t\tset scrollLeft(scrollLeft) {\r\n\t\t\tthis._scrollable.scrollLeft = scrollLeft;\r\n\t\t}\r\n\t\tget scrollTop() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollTop / this._p);\r\n\t\t}\r\n\t\tset scrollTop(scrollTop) {\r\n\t\t\tthis._scrollable.scrollTop = scrollTop * this._p;\r\n\t\t}\r\n\t\tonScroll(fn) {\r\n\t\t\tthis._handler.on(this._scrollable, 'scroll', fn);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = Scrollable;\r\n}","'use strict';\r\n{\r\n\tfunction cubicBezier(x2, y2, x3, y3) {\r\n\t\tlet step;\r\n\t\tconst err = 0.0001;\r\n\r\n\t\tx2 *= 3;\r\n\t\ty2 *= 3;\r\n\t\tx3 *= 3;\r\n\t\ty3 *= 3;\r\n\t\t\t\r\n\t\treturn function(t) {\r\n\t\t\tlet p,\r\n\t\t\t\ta,\r\n\t\t\t\tb,\r\n\t\t\t\tc,\r\n\t\t\t\td,\r\n\t\t\t\tx,\r\n\t\t\t\ts;\r\n\t\t\tif (t < 0 || 1 < t) {\r\n\t\t\t\tthrow new Error(t);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tp = step || t;\r\n\r\n\t\t\tdo {\r\n\t\t\t\ta = 1 - p;\r\n\t\t\t\tb = a * a;\r\n\t\t\t\tc = p * p;\r\n\t\t\t\td = c * p;\r\n\t\t\t\t\t\r\n\t\t\t\tx = x2 * b * p + x3 * a * c + d;\r\n\t\t\t\ts = t - x;\r\n\t\t\t\tp += s * 0.5;\r\n\t\t\t} while (err < Math.abs(s));\r\n\r\n\t\t\tstep = p;\r\n\t\t\treturn\ty2 * b * p + y3 * a * c + d;\r\n\t\t};\r\n\t}\r\n\tconst EASINGS = {\r\n\t\tlinear(p) {\r\n\t\t\treturn p;\r\n\t\t},\r\n\t\teaseIn: cubicBezier(0.420, 0.000, 1.000, 1.000),\r\n\t\teaseOut: cubicBezier(0.000, 0.000, 0.580, 1.000),\r\n\t\teaseInOut: cubicBezier(0.420, 0.000, 0.580, 1.000),\r\n\t};\r\n\r\n\tconst raf = window.requestAnimationFrame || setTimeout;\r\n\t\r\n\tfunction now() {\r\n\t\treturn Date.now();\r\n\t}\r\n\t/**\r\n\t * <pre>\r\n\t * Animates.\r\n\t * </pre>\r\n\t * @function\r\n\t * @param {number} duration animation time.\r\n\t * @param {function} step\r\n\t * @param {function|string} easing\r\n\t * @returns {object} Deferred object.\r\n\t */\r\n\tmodule.exports = (duration, step, easing) => {\r\n\t\tconst startedAt = now();\r\n\r\n\t\tif (!easing) {\r\n\t\t\teasing = EASINGS.easeInOut;\r\n\t\t} else if (typeof easing === 'string') {\r\n\t\t\teasing = EASINGS[easing];\r\n\t\t}\r\n\r\n\t\tlet canceledFlg = false;\r\n\t\tconst createAnim = (resolve, reject) => {\r\n\t\t\tconst anim = () => {\r\n\t\t\t\tconst point = now() - startedAt;\r\n\t\t\t\tif (canceledFlg) {\r\n\t\t\t\t\t//cancel\r\n\t\t\t\t\tif (reject) { reject(); }\r\n\t\t\t\t} else if (point >= duration) {\r\n\t\t\t\t\t//end\r\n\t\t\t\t\tstep(1);\r\n\t\t\t\t\tif (resolve) { resolve(); }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstep(easing(point / duration));\r\n\r\n\t\t\t\t\traf(anim, 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn anim;\r\n\t\t};\r\n\t\tconst cancel = () => {\r\n\t\t\tcanceledFlg = true;\r\n\t\t};\r\n\t\tif (window.Promise) {\r\n\t\t\tconst result = new window.Promise((resolve, reject) => {\r\n\t\t\t\tconst anim = createAnim(resolve, reject);\r\n\t\t\t\tstep(0);\r\n\t\t\t\tanim();\r\n\t\t\t});\r\n\t\t\tresult.cancel = cancel;\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tconst anim = createAnim(() => {}, () => {});\r\n\t\t\tstep(0);\r\n\t\t\tanim();\r\n\t\t\treturn {\r\n\t\t\t\tcancel,\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n\r\nfunction parse(calcStr) {\r\n\tfunction replacer(match, num, unit) {\r\n\t\tswitch (unit) {\r\n\t\tcase '%':\r\n\t\t\treturn `(${num} * this.full / 100)`;\r\n\t\tcase 'em':\r\n\t\t\treturn `(${num} * this.em)`;\r\n\t\tcase 'px':\r\n\t\t\treturn `(${num})`;\r\n\t\tdefault:\r\n\t\t\tthrow new Error('calc error');\r\n\t\t}\r\n\t}\r\n\tconst script = calcStr.replace(/^calc\\((.*)\\)$/, '$1').\r\n\t\treplace(/(\\d+)([A-Za-z%]+)/g, replacer).\r\n\t\treplace(/(\\d*\\.\\d+)([A-Za-z%]+)/g, replacer);\r\n\treturn {\r\n\t\teval(context) {\r\n\t\t\treturn (() => {\r\n\t\t\t\tfunction calc(v) { // eslint-disable-line no-unused-vars\r\n\t\t\t\t\treturn v;\r\n\t\t\t\t}\r\n\t\t\t\treturn eval(script);// eslint-disable-line no-eval\r\n\t\t\t}).call(context);\r\n\t\t}\r\n\t};\r\n}\r\nfunction toPx(value, context) {\r\n\tif (/^calc\\(.*\\)$/.test(value)) {\r\n\t\treturn parse(value).eval(context);\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*%$/.test(value)) {\r\n\t\treturn context.full * value.substr(0, value.length - 1) / 100;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*px$/.test(value)) {\r\n\t\treturn value.substr(0, value.length - 2) - 0;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*em$/.test(value)) {\r\n\t\treturn context.em * (value.substr(0, value.length - 2) - 0);\r\n\t}\r\n\treturn value - 0;\r\n}\r\n\r\nmodule.exports = {\r\n\tparse,\r\n\ttoPx(value, context) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\treturn toPx(value.trim(), context);\r\n\t\t}\r\n\t\treturn value - 0;\r\n\t}\r\n};","'use strict';\r\n{\r\n\r\n\tfunction calcBasePosition(ctx, rect,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\t// const textAlign = ctx.textAlign || 'left';\r\n\t\t// const textBaseline = ctx.textBaseline || 'middle';\r\n\t\t// ctx.textAlign = textAlign;\r\n\t\t// ctx.textBaseline = textBaseline;\r\n\r\n\t\t// let x = rect.left + offset + paddingLeft;\r\n\t\t// if (textAlign === 'right' || textAlign === 'end') {\r\n\t\t// \tx = rect.right - offset - paddingRight;\r\n\t\t// } else if (textAlign === 'center') {\r\n\t\t// \tx = rect.left + ((rect.width + paddingLeft - paddingRight) / 2);\r\n\t\t// }\r\n\t\t// let y = rect.top + offset;\r\n\t\t// if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t// \ty = rect.bottom - offset;\r\n\t\t// } else if (textBaseline === 'middle') {\r\n\t\t// \ty = rect.top + (rect.height / 2);\r\n\t\t// }\r\n\t\t// return {x, y};\r\n\t\treturn calcStartPosition(ctx, rect, 0, 0, {\r\n\t\t\toffset,\r\n\t\t\tpadding: {\r\n\t\t\t\tleft: paddingLeft,\r\n\t\t\t\tright: paddingRight,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction calcStartPosition(ctx, rect, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\tconst textAlign = ctx.textAlign || 'left';\r\n\t\tconst textBaseline = ctx.textBaseline || 'middle';\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\r\n\t\tlet x = rect.left + offset + paddingLeft;\r\n\t\tif (textAlign === 'right' || textAlign === 'end') {\r\n\t\t\tx = rect.right - width - offset - paddingRight;\r\n\t\t} else if (textAlign === 'center') {\r\n\t\t\tx = rect.left + ((rect.width - width + paddingLeft - paddingRight) / 2);\r\n\t\t}\r\n\t\tlet y = rect.top + offset;\r\n\t\tif (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t\ty = rect.bottom - height - offset;\r\n\t\t} else if (textBaseline === 'middle') {\r\n\t\t\ty = rect.top + ((rect.height - height) / 2);\r\n\t\t}\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcalcBasePosition,\r\n\t\tcalcStartPosition,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst rgbMap = {};\r\n\tfunction styleColorToRGB(color) {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.color = color;\r\n\t\tstyle.position = 'fixed';\r\n\t\tstyle.height = '1px';\r\n\t\tstyle.width = '1px';\r\n\t\tstyle.opacity = 0;\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {color: styleColor} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn colorToRGB0(styleColor);\r\n\t}\r\n\r\n\tfunction hexToNum(hex) {\r\n\t\treturn parseInt(hex, 16);\r\n\t}\r\n\tfunction createRGB(r, g, b, a = 1) {\r\n\t\treturn {r, g, b, a};\r\n\t}\r\n\tfunction tripleHexToRGB({1: r, 2: g, 3: b}) {\r\n\t\treturn createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n\t}\r\n\tfunction sextupleHexToRGB({1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2}) {\r\n\t\treturn createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n\t}\r\n\t\r\n\tfunction testRGB({r, g, b, a}) {\r\n\t\treturn 0 <= r && r <= 255 &&\r\n\t\t0 <= g && g <= 255 &&\r\n\t\t0 <= b && b <= 255 &&\r\n\t\t0 <= a && a <= 1;\r\n\t}\r\n\tfunction rateToByte(r) {\r\n\t\treturn Math.ceil(r * 255 / 100);\r\n\t}\r\n\tfunction colorToRGB0(color) {\r\n\t\tif (color.match(/^#[0-9a-f]{3}$/i)) {\r\n\t\t\treturn tripleHexToRGB(color);\r\n\t\t}\r\n\t\tif (color.match(/^#[0-9a-f]{6}$/i)) {\r\n\t\t\treturn sextupleHexToRGB(color);\r\n\t\t}\r\n\t\tlet ret = color.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0, ret[4] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]));\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]), ret[7] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction colorToRGB(color) {\r\n\t\tif (typeof color !== 'string') {\r\n\t\t\treturn createRGB(0, 0, 0, 0);\r\n\t\t}\r\n\t\tcolor = color.toLowerCase().trim();\r\n\t\tif (rgbMap[color]) {\r\n\t\t\treturn rgbMap[color];\r\n\t\t}\r\n\t\treturn colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcolorToRGB\r\n\t};\r\n}","'use strict';\r\n\r\nmodule.exports = {\r\n\t'Array_isArray': window.Array.isArray\r\n};","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nfunction createElement(tagName, {classList, text, html} = {}) {\r\n\tconst element = document.createElement(tagName);\r\n\tif (classList) {\r\n\t\tif (Array.isArray(classList)) {\r\n\t\t\telement.classList.add(...classList);\r\n\t\t} else {\r\n\t\t\telement.classList.add(classList);\r\n\t\t}\r\n\t}\r\n\tif (text) {\r\n\t\telement.textContent = text;\r\n\t} else if (html) {\r\n\t\telement.innerHTML = html;\r\n\t}\r\n\treturn element;\r\n}\r\n\r\nfunction empty(dom) {\r\n\tlet c;\r\n\twhile ((c = dom.firstChild)) {\r\n\t\tdom.removeChild(c);\r\n\t}\r\n}\r\nfunction isNode(arg) {\r\n\treturn !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n\tif (isNode(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\tconst dom = createElement('div', {html: arg});\r\n\treturn Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n\tif ((window.jQuery && arg instanceof window.jQuery)) {\r\n\t\treturn Array.prototype.map.call(arg, (a) => a);\r\n\t}\r\n\tif (Array.isArray(arg)) {\r\n\t\treturn arg.map(toNode);\r\n\t}\r\n\treturn [toNode(arg)];\r\n}\r\n\r\nfunction appendHtml(dom, inner) {\r\n\ttoNodeList(inner).forEach((node) => {\r\n\t\tdom.appendChild(node);\r\n\t});\r\n}\r\n\r\nfunction disableFocus(el) {\r\n\tel.dataset.disableBeforeTabIndex = el.tabIndex;\r\n\tel.tabIndex = -1;\r\n\tArray.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nfunction enableFocus(el) {\r\n\tif ('disableBeforeTabIndex' in el.dataset) {\r\n\t\tel.tabIndex = el.dataset.disableBeforeTabIndex;\r\n\t}\r\n\tArray.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\n\r\nfunction isFocusable(el) {\r\n\treturn isDef(el.tabIndex) && el.tabIndex > -1;\r\n}\r\nfunction findPrevSiblingFocusable(el) {\r\n\tlet n = el.previousSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.previousSibling;\r\n\t}\r\n\treturn n;\r\n}\r\nfunction findNextSiblingFocusable(el) {\r\n\tlet n = el.nextSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.nextSibling;\r\n\t}\r\n\treturn n;\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateElement,\r\n\tempty,\r\n\tisNode,\r\n\ttoNode,\r\n\ttoNodeList,\r\n\tappendHtml,\r\n\tdisableFocus,\r\n\tenableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n};","'use strict';\r\n{\r\n\tconst loads = {};\r\n\tconst legacy = !document.fonts;\r\n\tconst load = legacy ? function(font, testStr, callback) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\trequire('./legacy/fontwatch/FontWatchRunner').load(font, testStr, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t}, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t} : function(font, testStr, callback) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdocument.fonts.ready.then(() => {\r\n\t\t\tloads.all = true;\r\n\t\t});\r\n\t\tdocument.fonts.load(font).then(() => {\r\n\t\t\tloads[font] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t};\r\n\tconst check = legacy ? function(font, testStr) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tload(font, testStr, () => {});\r\n\t\treturn false;\r\n\t} : function(font, testStr) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!document.fonts.check(font)) {\r\n\t\t\tload(font, testStr, () => {});\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t\r\n\tmodule.exports = {\r\n\t\tcheck,\r\n\t\tload\r\n\t};\r\n}","'use strict';\r\n\r\nconst EventHandler = require('./EventHandler');\r\nconst handler = new EventHandler();\r\n\r\nlet ratio;\r\nfunction setRatio() {\r\n\tratio = Math.ceil(window.devicePixelRatio || 1);\r\n\tif (ratio > 1 && (ratio % 2) !== 0) {\r\n\t\tratio += 1;\r\n\t}\r\n}\r\nsetRatio();\r\nhandler.on(window, 'resize', setRatio);\r\n\r\nmodule.exports = {\r\n\ttransform(canvas) {\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\tconst getAttribute = canvas.getAttribute;\r\n\t\tcanvas.getAttribute = function(name, ...args) {\r\n\t\t\tlet result = getAttribute.call(this, name, ...args);\r\n\t\t\tif (name === 'width' || name === 'height') {\r\n\t\t\t\tresult /= ratio;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t\tconst setAttribute = canvas.setAttribute;\r\n\t\tcanvas.setAttribute = function(name, val, ...args) {\r\n\t\t\tconst wh = name === 'width' || name === 'height';\r\n\t\t\tif (wh) {\r\n\t\t\t\tval *= ratio;\r\n\t\t\t}\r\n\t\t\tconst result = setAttribute.call(this, name, val, ...args);\r\n\t\t\tif (wh) {\r\n\t\t\t\tctx.scale(ratio, ratio);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tObject.defineProperty(canvas, 'width', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('width');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('width', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tObject.defineProperty(canvas, 'height', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('height');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('height', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tconst drawImage = ctx.drawImage;\r\n\t\tctx.drawImage = function(img, ...args) {\r\n\t\t\tif (img !== canvas || ratio === 1) {\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t}\r\n\t\t\tthis.save();\r\n\t\t\ttry {\r\n\t\t\t\tthis.scale(1 / ratio, 1 / ratio);\r\n\t\t\t\tif (args.length > 4) {\r\n\t\t\t\t\targs[4] = args[4] * ratio;\r\n\t\t\t\t\targs[5] = args[5] * ratio;\r\n\t\t\t\t} else {\r\n\t\t\t\t\targs[0] = args[0] * ratio;\r\n\t\t\t\t\targs[1] = args[1] * ratio;\r\n\t\t\t\t}\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn canvas;\r\n\t}\r\n};","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nconst ICON_PROP_KEYS = [\r\n\t'content',\r\n\t'font',\r\n\t'color',\r\n\t'className',\r\n\t'isLiga',\r\n\t'width',\r\n\t'src',\r\n\t'svg',\r\n\t'name',\r\n\t'path'\r\n];\r\n\r\nfunction quote(name) {\r\n\tconst quoted = [];\r\n\tconst split = name.split(/,\\s*/);\r\n\tfor (let i = 0; i < split.length; i++) {\r\n\t\tconst part = split[i].replace(/['\"]/g, '');\r\n\t\tif (part.indexOf(' ') === -1 && !(/^\\d/.test(part))) {\r\n\t\t\tquoted.push(part);\r\n\t\t} else {\r\n\t\t\tquoted.push('\\'' + part + '\\'');\r\n\t\t}\r\n\t}\r\n\treturn quoted.join(',');\r\n}\r\n\r\nconst doms = {};\r\nconst props = {};\r\n\r\nfunction getIconProps(tagName, className) {\r\n\tconst tagProps = props[tagName] || (props[tagName] = {});\r\n\tif (tagProps[className]) {\r\n\t\treturn tagProps[className];\r\n\t}\r\n\tconst dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n\tdom.className = className;\r\n\tdocument.body.appendChild(dom);\r\n\ttry {\r\n\t\tconst beforeStyle = document.defaultView.getComputedStyle(dom, '::before');\r\n\t\tlet content = beforeStyle.getPropertyValue('content');\r\n\t\tif (content.length >= 3 && (content[0] === '\"' || content[0] === '\\'')) {\r\n\t\t\tif (content[0] === content[content.length - 1]) {\r\n\t\t\t\tcontent = content.substr(1, content.length - 2);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet font = beforeStyle.getPropertyValue('font');\r\n\t\tif (!font) {\r\n\t\t\tfont = beforeStyle.getPropertyValue('font-style') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-variant') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-weight') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-size') + '/' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('line-height') + ' ' +\r\n\t\t\t\tquote(beforeStyle.getPropertyValue('font-family'));\r\n\t\t}\r\n\t\tconst color = beforeStyle.getPropertyValue('color');\r\n\t\tconst width = dom.clientWidth;\r\n\t\tconst isLiga = (beforeStyle.getPropertyValue('font-feature-settings') || '').indexOf('liga') > -1;\r\n\t\t\r\n\t\treturn (tagProps[className] = {\r\n\t\t\tcontent,\r\n\t\t\tfont,\r\n\t\t\tcolor,\r\n\t\t\twidth,\r\n\t\t\tisLiga,\r\n\t\t});\r\n\t} finally {\r\n\t\tdocument.body.removeChild(dom);\r\n\t}\r\n}\r\n\r\nfunction toPropArray(prop, count) {\r\n\tconst result = [];\r\n\tif (Array.isArray(prop)) {\r\n\t\tresult.push(...prop);\r\n\t\tfor (let i = prop.length; i < count; i++) {\r\n\t\t\tresult.push(null);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\tresult.push(prop);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction toSimpleArray(iconProps) {\r\n\tif (!iconProps) {\r\n\t\treturn iconProps;\r\n\t} else if (Array.isArray(iconProps)) {\r\n\t\treturn iconProps;\r\n\t}\r\n\r\n\tconst workData = {};\r\n\r\n\tlet count = 0;\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tif (iconProps[k]) {\r\n\t\t\tif (Array.isArray(iconProps[k])) {\r\n\t\t\t\tcount = Math.max(count, iconProps[k].length);\r\n\t\t\t} else {\r\n\t\t\t\tcount = Math.max(count, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tworkData[k] = toPropArray(iconProps[k], count);\r\n\t});\r\n\r\n\tconst result = [];\r\n\tfor (let i = 0; i < count; i++) {\r\n\t\tconst data = {};\r\n\t\tICON_PROP_KEYS.forEach((k) => {\r\n\t\t\tdata[k] = workData[k][i];\r\n\t\t});\r\n\t\tresult.push(data);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction normarize(iconProps) {\r\n\tconst data = {};\r\n\tfor (const k in iconProps) {\r\n\t\tif (k === 'className') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tdata[k] = iconProps[k];\r\n\t}\r\n\tif (iconProps.className) {\r\n\t\tconst prop = getIconProps(iconProps.tagName || 'i', iconProps.className);\r\n\t\tfor (const k in prop) {\r\n\t\t\tif (!isDef(iconProps[k])) {\r\n\t\t\t\tdata[k] = prop[k];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn data;\r\n}\r\n\r\nmodule.exports = {\r\n\ttoNormarizeArray(iconProps) {\r\n\t\tconst icons = toSimpleArray(iconProps);\r\n\t\tif (!icons) {\r\n\t\t\treturn icons;\r\n\t\t}\r\n\t\treturn icons.map((icon) => normarize(icon));\r\n\t},\r\n\tget iconPropKeys() {\r\n\t\treturn ICON_PROP_KEYS;\r\n\t},\r\n\tgetIconProps,\r\n};\r\n\r\n\r\n","'use strict';\r\n\r\nconst {then} = require('./utils');\r\nconst LRUCache = require('./LRUCache');\r\n\r\nconst allCache = {};\r\n\r\nfunction isDataUrl(url) {\r\n\treturn url.search(/^(data:)/) !== -1;\r\n}\r\n\r\nfunction loadImage(src) {\r\n\tif (!window.Promise) {\r\n\t\tconsole.error('Promise is not loaded. load Promise before this process.');\r\n\t\treturn {\r\n\t\t\tthen() {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst img = new Image();\r\n\tconst result = new window.Promise((resolve) => {\r\n\t\timg.onload = () => {\r\n\t\t\tresolve(img);\r\n\t\t};\r\n\t});\r\n\timg.onerror = (e) => {\r\n\t\tconst url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\r\n\t\tconsole.warn(`cannot load: ${url}`);\r\n\t\tthrow new Error(`IMAGE LOAD ERROR: ${url}`);\r\n\t};\r\n\timg.src = isDataUrl(src) ? src : `${src}?${Date.now()}`;\r\n\treturn result;\r\n}\r\n\r\nfunction getCacheOrLoad0(cache, src) {\r\n\treturn then(src, (src) => {\r\n\t\tconst c = cache.get(src);\r\n\t\tif (c) {\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconst result = loadImage(src).then((img) => {\r\n\t\t\tcache.put(src, img);\r\n\t\t\treturn img;\r\n\t\t});\r\n\t\tcache.put(src, result);\r\n\t\treturn result;\r\n\t});\r\n}\r\n\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n\tconst cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache(cacheSize));\r\n\treturn getCacheOrLoad0(cache, src);\r\n}\r\n\r\nmodule.exports = {\r\n\tloadImage,\r\n\tgetCacheOrLoad,\r\n};\r\n","'use strict';\r\n\r\nconst PathCommandsParser = require('./PathCommandsParser');\r\nconst parser = new PathCommandsParser();\r\n\r\nclass Path2D {\r\n\tconstructor(arg) {\r\n\t\tthis._ops = [];\r\n\t\t[\r\n\t\t\t'closePath',\r\n\t\t\t'moveTo',\r\n\t\t\t'lineTo',\r\n\t\t\t'bezierCurveTo',\r\n\t\t\t'quadraticCurveTo',\r\n\t\t\t'arc',\r\n\t\t\t'rect'\r\n\t\t].forEach((name) => {\r\n\t\t\tthis[name] = (...args) => {\r\n\t\t\t\tthis._ops.push({op: name, args});\r\n\t\t\t};\r\n\t\t});\r\n\t\tif (arg === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (typeof arg === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tthis._ops = parser.parse(arg);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t} else if (arg.hasOwnProperty('_ops')) {\r\n\t\t\tthis._ops = [...this._ops];\r\n\t\t} else {\r\n\t\t\tthrow new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst CanvasRenderingContext2D = window.CanvasRenderingContext2D;\r\n\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n\r\nCanvasRenderingContext2D.prototype.fill = function(...args) {\r\n\tif (args[0] instanceof Path2D) {\r\n\t\tconst path = args[0];\r\n\t\tthis.beginPath();\r\n\t\tpath._ops.forEach((op) => {\r\n\t\t\tthis[op.op](...op.args);\r\n\t\t});\r\n\t\toriginalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n\t} else {\r\n\t\toriginalFill.apply(this, args);\r\n\t}\r\n};\r\n\r\nmodule.exports = Path2D;\r\n","'use strict';\r\n\r\nfunction mag(v) {\r\n\treturn Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\n    \r\nfunction dot(u, v) {\r\n\treturn (u[0] * v[0] + u[1] * v[1]);\r\n}\r\n    \r\nfunction ratio(u, v) {\r\n\treturn dot(u, v) / (mag(u) * mag(v));\r\n}\r\n\r\nfunction clamp(value, min, max) {\r\n\treturn Math.min(Math.max(value, min), max);\r\n}\r\n    \r\nfunction angle(u, v) {\r\n\tlet sign = 1.0;\r\n\tif ((u[0] * v[1] - u[1] * v[0]) < 0) {\r\n\t\tsign = -1.0;\r\n\t}\r\n\treturn sign * Math.acos(clamp(ratio(u, v)), -1, 1);\r\n}\r\n    \r\nfunction rotClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction rotCounterClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction midPoint(u, v) {\r\n\treturn [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\n    \r\nfunction meanVec(u, v) {\r\n\treturn [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\n    \r\nfunction pointMul(u, v) {\r\n\treturn [u[0] * v[0], u[1] * v[1]];\r\n}\r\n    \r\nfunction scale(c, v) {\r\n\treturn [c * v[0], c * v[1]];\r\n}\r\n    \r\nfunction sum(u, v) {\r\n\treturn [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n\t// Convert from endpoint to center parametrization, as detailed in:\r\n\t//   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n\tif (rx === 0 || ry === 0) {\r\n\t\tctx.lineTo(x2, x1);\r\n\t\treturn;\r\n\t}\r\n\tphi = phi * (Math.PI / 180.0);\r\n\trx = Math.abs(rx);\r\n\try = Math.abs(ry);\r\n\tconst xPrime = rotClockwise(midPoint(x1, x2), phi); // F.6.5.1\r\n\tconst xPrime2 = pointMul(xPrime, xPrime);\r\n\tlet rx2 = Math.pow(rx, 2);\r\n\tlet ry2 = Math.pow(ry, 2);\r\n    \r\n\tconst lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n\tif (lambda > 1) {\r\n\t\trx *= lambda;\r\n\t\try *= lambda;\r\n\t\trx2 = Math.pow(rx, 2);\r\n\t\try2 = Math.pow(ry, 2);\r\n\t}\r\n\tlet factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n\tif (fA === fS) {\r\n\t\tfactor *= -1.0;\r\n\t}\r\n\tconst cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\r\n\tconst c = sum(rotCounterClockwise(cPrime, phi), meanVec(x1, x2)); // F.6.5.3\r\n\tconst x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\r\n\tconst x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\r\n\tconst theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n\tconst deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n\tconst start = theta;\r\n\tconst end = theta + deltaTheta;\r\n\tctx.save();\r\n\tctx.translate(c[0], c[1]);\r\n\tctx.rotate(phi);\r\n\tctx.scale(rx, ry);\r\n\tctx.arc(0, 0, 1, start, end, 1 - fS);\r\n\tctx.restore();\r\n}\r\n\r\nclass PathCommands {\r\n\tconstructor(ctx) {\r\n\t\tlet lMx;\r\n\t\tlet lMy;\r\n\t\tlet lx = 0;\r\n\t\tlet ly = 0;\r\n\t\tlet reflected;\r\n\t\tlet lastCommand = '';\r\n\t\tfunction makeReflected() {\r\n\t\t\tif ('CcSsQqTt'.indexOf(lastCommand) < 0) {\r\n\t\t\t\treturn {x: lx, y: ly};\r\n\t\t\t}\r\n\t\t\treturn reflected;\r\n\t\t}\r\n\r\n\t\tthis.M = (px, py) => {\r\n\t\t\tctx.moveTo(px, py);\r\n\t\t\tlMx = px;\r\n\t\t\tlMy = py;\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'M';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.m = (px, py) => this.M(px + lx, py + ly);\r\n\t\tthis.L = (px, py) => {\r\n\t\t\tctx.lineTo(px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'L';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.l = (px, py) => this.L(px + lx, py + ly);\r\n\t\tthis.H = (px) => this.L(px, ly);\r\n\t\tthis.h = (px) => this.H(px + lx);\r\n\t\tthis.V = (py) => this.L(lx, py);\r\n\t\tthis.v = (py) => this.V(py + ly);\r\n\t\tthis.Z = () => {\r\n\t\t\tctx.closePath();\r\n\t\t\tlx = lMx;\r\n\t\t\tly = lMy;\r\n\t\t\tlastCommand = 'Z';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.z = () => this.Z();\r\n\t\t//C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n\t\tthis.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n\t\t\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cp2x,\r\n\t\t\t\ty: 2 * py - cp2y,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'C';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(\r\n\t\t\t\tcp1x + lx, cp1y + ly,\r\n\t\t\t\tcp2x + lx, cp2y + ly,\r\n\t\t\t\tpx + lx, py + ly\r\n\t\t);\r\n\t\t//S x2 y2, x y (or s dx2 dy2, dx dy)\r\n\t\tthis.S = (cpx, cpy, px, py) => {\r\n\t\t\tconst {x: cp1x, y: cp1y} = makeReflected(lastCommand);\r\n\t\t\treturn this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n\t\tthis.Q = (cpx, cpy, px, py) => {\r\n\t\t\tctx.quadraticCurveTo(cpx, cpy, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cpx,\r\n\t\t\t\ty: 2 * py - cpy,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'Q';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//T x y (or t dx dy)\r\n\t\tthis.T = (px, py) => {\r\n\t\t\tconst {x: cpx, y: cpy} = makeReflected();\r\n\t\t\treturn this.Q(cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.t = (px, py) => this.T(px + lx, py + ly);\r\n\t\t//A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n\t\tthis.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n\t\t\tconst x1 = lx;\r\n\t\t\tconst y1 = ly;\r\n\r\n\t\t\tellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'A';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t//a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n\t\tthis.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(\r\n\t\t\t\trx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n\t\t\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommands;","'use strict';\r\n\r\nconst PathCommands = require('./PathCommands');\r\n\r\nfunction pathTokens(d) {\r\n\tlet idx = 0;\r\n\treturn {\r\n\t\tnext() {\r\n\t\t\tlet s = '';\r\n\t\t\twhile (d.length > idx) {\r\n\t\t\t\tconst c = d[idx];\r\n\t\t\t\tidx++;\r\n\t\t\t\tif (' ,\\n\\r\\t'.indexOf(c) > -1) {\r\n\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst type = '.+-1234567890'.indexOf(c) > -1 ? 'num' : 'str';\r\n\t\t\t\t\tif (type === 'str') {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('-+'.indexOf(c) > -1) {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\tif (s.indexOf('.') > -1) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += c;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn s || null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction command(builder, cmd, argsProvider) {\r\n\tif (cmd.toUpperCase() === 'M' || cmd.toUpperCase() === 'L' || cmd.toUpperCase() === 'T') {\r\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next());\r\n\t\treturn cmd === 'M' ? 'L'\r\n\t\t\t: cmd === 'm' ? 'l'\r\n\t\t\t: cmd;\r\n\t} else if (cmd.toUpperCase() === 'H' || cmd.toUpperCase() === 'V') {\r\n\t\tbuilder.command(cmd, argsProvider.next());\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'Z') {\r\n\t\tbuilder.command(cmd);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'C') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'S' || cmd.toUpperCase() === 'Q') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'A') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else {\r\n\t\t// https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n\t\tconsole.warn('unsupported:' + cmd);\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nconst canvasOperations = window.CanvasRenderingContext2D ? Object.keys(window.CanvasRenderingContext2D.prototype) : [\r\n\t'save',\r\n\t'restore',\r\n\t'beginPath',\r\n\t'closePath',\r\n\t'moveTo',\r\n\t'lineTo',\r\n\t'bezierCurveTo',\r\n\t'quadraticCurveTo',\r\n\t'arc',\r\n\t'arcTo',\r\n\t'ellipse',\r\n\t'rect',\r\n\t'translate',\r\n\t'rotate',\r\n\t'scale',\r\n];\r\n\r\nclass PathCommandsParser {\r\n\tconstructor() {\r\n\t\tthis._commands = new PathCommands(this);\r\n\t\tcanvasOperations.forEach((op) => {\r\n\t\t\tthis[op] = (...args) => {\r\n\t\t\t\tthis._ops.push({\r\n\t\t\t\t\top,\r\n\t\t\t\t\targs,\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\tcommand(name, ...args) {\r\n\t\targs = args || [];\r\n\t\tfor (let i = 0; i < args.length; i++) {\r\n\t\t\targs[i] = args[i] - 0;\r\n\t\t}\r\n\t\tthis._commands[name](...(args));\r\n\t}\r\n\tparse(d) {\r\n\t\tconst ops = this._ops = [];\r\n\t\tconst tokens = pathTokens(d);\r\n\t\ttry {\r\n\t\t\tlet cmd;\r\n\t\t\tlet subsequentCommand;\r\n\t\t\twhile ((cmd = tokens.next())) {\r\n\t\t\t\tif (!isNaN(cmd - 0)) {\r\n\t\t\t\t\tlet fst = true;\r\n\t\t\t\t\tconst argsProvider = {\r\n\t\t\t\t\t\tnext() {\r\n\t\t\t\t\t\t\tif (fst) {\r\n\t\t\t\t\t\t\t\tfst = false;\r\n\t\t\t\t\t\t\t\treturn cmd;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn tokens.next();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tsubsequentCommand = command(this, subsequentCommand, argsProvider);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsubsequentCommand = command(this, cmd, tokens);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('Error: ' + d);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t\treturn ops;\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommandsParser;","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\nfunction computeStyle(font) {\r\n\treturn [{\r\n\t\tdisplay: 'block',\r\n\t\tposition: 'absolute',\r\n\t\ttop: '-9999px',\r\n\t\tleft: '-9999px',\r\n\t\twidth: 'auto',\r\n\t\theight: 'auto',\r\n\t\tmargin: '0',\r\n\t\tpadding: '0',\r\n\t\t'white-space': 'nowrap',\r\n\t\tfont,\r\n\t}, {\r\n\t\t'font-variant': 'normal',\r\n\t\t'font-size': '300px',\r\n\t\t'font-style': 'normal',\r\n\t\t'font-weight': '400',\r\n\t\t'line-height': 'normal',\r\n\t}];\r\n}\r\n\r\nclass FontRuler {\r\n\tconstructor(font, testStr) {\r\n\t\tconst e = document.createElement('span');\r\n\t\te.setAttribute('aria-hidden', 'true');\r\n\t\te.textContent = testStr || 'BESbswy';\r\n\r\n\t\tcomputeStyle(font).forEach((style) => {\r\n\t\t\tfor (const key in style) {\r\n\t\t\t\te.style[key] = style[key];\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.body.appendChild(e);\r\n\t\tthis.el_ = e;\r\n\t}\r\n\tgetWidth() {\r\n\t\treturn this.el_.offsetWidth;\r\n\t}\r\n\tremove() {\r\n\t\tdocument.body.removeChild(this.el_);\r\n\t}\r\n}\r\n\r\nmodule.exports = FontRuler;\r\n\r\n\r\n","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\n\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler = require('./FontRuler');\r\n\r\n\r\nconst LastResortFonts = {\r\n\tSERIF: 'serif',\r\n\tSANS_SERIF: 'sans-serif'\r\n};\r\n\r\n\r\nconst watchRunners = {};\r\n\r\nclass FontWatchRunner {\r\n\tstatic load(font, testStr, activeCallback, inactiveCallback) {\r\n\t\tconst c = watchRunners[font] || (watchRunners[font] = {});\r\n\t\ttestStr = testStr + '';\r\n\t\tlet runner;\r\n\t\tif (c[testStr]) {\r\n\t\t\trunner = c[testStr];\r\n\t\t} else {\r\n\t\t\trunner = (c[testStr] = new FontWatchRunner(font, testStr));\r\n\t\t}\r\n\t\trunner.then(activeCallback, inactiveCallback);\r\n\t}\r\n\tconstructor(font, testStr) {\r\n\t\tthis.activeCallbacks = [];\r\n\t\tthis.inactiveCallbacks = [];\r\n\t\tthis.status = null;\r\n\t\tthis.lastResortWidths_ = {};\r\n\r\n\t\tthis.fontRulerA_ = new FontRuler(font + ',' + LastResortFonts.SERIF, testStr);\r\n\t\tthis.fontRulerB_ = new FontRuler(font + ',' + LastResortFonts.SANS_SERIF, testStr);\r\n\t\tconst lastResortRulerA = new FontRuler('4px ' + LastResortFonts.SERIF, testStr);\r\n\t\tconst lastResortRulerB = new FontRuler('4px ' + LastResortFonts.SANS_SERIF, testStr);\r\n\r\n\t\t//start\r\n\t\tthis.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n\t\tthis.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\r\n\r\n\t\tlastResortRulerA.remove();\r\n\t\tlastResortRulerB.remove();\r\n\r\n\t\tthis.started_ = Date.now();\r\n\r\n\t\tthis.check_();\r\n\t}\r\n\tthen(activeCallback, inactiveCallback) {\r\n\t\tif (this.status) {\r\n\t\t\tif (this.status !== 'ng') {\r\n\t\t\t\tactiveCallback();\r\n\t\t\t} else {\r\n\t\t\t\tinactiveCallback();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.activeCallbacks.push(activeCallback);\r\n\t\t\tthis.inactiveCallbacks.push(inactiveCallback);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tcheck_() {\r\n\t\tconst widthA = this.fontRulerA_.getWidth();\r\n\t\tconst widthB = this.fontRulerB_.getWidth();\r\n\r\n\t\tif (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\tif (Date.now() - this.started_ >= 3000) { // timeout\r\n\t\t\t\tif (this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\t\t\tthis.status = 'ok';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.finish_(this.inactiveCallbacks);\r\n\t\t\t\t\tthis.status = 'ng';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.check_();\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\tthis.status = 'ok';\r\n\t\t}\r\n\t}\r\n\tisFallbackFont_(a, b) {\r\n\t\treturn this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\r\n\t}\r\n\twidthsMatchLastResortWidths_(a, b) {\r\n\t\tfor (const font in LastResortFonts) {\r\n\t\t\tif (LastResortFonts.hasOwnProperty(font)) {\r\n\t\t\t\tif (this.widthMatches_(a, LastResortFonts[font]) &&\r\n\t\t\t\t\t\tthis.widthMatches_(b, LastResortFonts[font])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\twidthMatches_(width, lastResortFont) {\r\n\t\treturn width === this.lastResortWidths_[lastResortFont];\r\n\t}\r\n\tisLastResortFont_(a, b) {\r\n\t\treturn hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n\t}\r\n\tfinish_(callbacks) {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.fontRulerA_.remove();\r\n\t\t\tthis.fontRulerB_.remove();\r\n\t\t\tcallbacks.forEach((cb) => cb());\r\n\t\t}, 0);\r\n\t}\r\n}\r\n\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n\tif (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n\t\tconst match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n\r\n\t\tHAS_WEBKIT_FALLBACK_BUG = !!match &&\r\n\t\t\t(parseInt(match[1], 10) < 536 ||\r\n\t\t\t(parseInt(match[1], 10) === 536 &&\r\n\t\t\tparseInt(match[2], 10) <= 11));\r\n\t}\r\n\treturn HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\n\r\nmodule.exports = FontWatchRunner;\r\n","'use strict';\r\n\r\nfunction normalize(options) {\r\n\tif (!options) {\r\n\t\treturn [];\r\n\t}\r\n\tif (Array.isArray(options)) {\r\n\t\treturn options;\r\n\t}\r\n\tif (typeof options === 'string') {\r\n\t\treturn normalize(JSON.parse(options));\r\n\t}\r\n\tconst result = [];\r\n\tfor (const k in options) {\r\n\t\tresult.push({\r\n\t\t\tvalue: k,\r\n\t\t\tcaption: options[k]\r\n\t\t});\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nmodule.exports = {\r\n\tnormalize,\r\n};\r\n","'use strict';\r\n\r\nfunction getPath2D() {\r\n\t//return require('./legacy/canvas/Path2D');\r\n\treturn window.Path2D || require('./legacy/canvas/Path2D');\r\n}\r\n\r\nmodule.exports = {\r\n\tfill(module, ctx, x, y, w, h) {\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tconst {width, height} = module;\r\n\t\t\tconst {ud: upsideDown, x: offsetX = 0, y: offsetY = 0} = module;\r\n\t\t\tw = w || width;\r\n\t\t\th = h || height;\r\n\t\t\tconst xrate = w / width;\r\n\t\t\tconst yrate = h / (upsideDown ? -height : height);\r\n\t\t\tx = x || 0;\r\n\t\t\ty = upsideDown ? ((y || 0) + (-height * yrate)) : (y || 0);\r\n\r\n\t\t\tctx.translate(x, y);\r\n\t\t\tctx.scale(xrate, yrate);\r\n\t\t\tif (offsetX !== 0 || offsetY !== 0) {\r\n\t\t\t\tctx.translate(offsetX, offsetY);\r\n\t\t\t}\r\n\t\t\tconst Path2D = getPath2D();\r\n\t\t\tmodule.path2d = module.path2d || (new Path2D(module.d));\r\n\t\t\tctx.fill(module.path2d);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\tget Path2D() {\r\n\t\treturn getPath2D();\r\n\t},\r\n};\r\n","'use strict';\r\n{\r\n\tconst {isPromise} = require('./utils');\r\n\r\n\tfunction wait(val) {\r\n\t\treturn val.then((v) => {\r\n\t\t\tif (isPromise(v)) {\r\n\t\t\t\treturn wait(v);\r\n\t\t\t} else {\r\n\t\t\t\treturn v;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction createArray(get, length) {\r\n\t\tconst array = new Array(length);\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tarray[i] = get(i);\r\n\t\t}\r\n\t\treturn array;\r\n\t}\r\n\tfunction createArrayPromise(get, getField, length) {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst plist = [];\r\n\t\t\tconst array = new Array(length);\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst data = get(i);\r\n\t\t\t\tconst record = {\r\n\t\t\t\t\tv: data,\r\n\t\t\t\t\tf: data\r\n\t\t\t\t};\r\n\t\t\t\tarray[i] = record;\r\n\t\t\t\tif (isPromise(data)) {\r\n\t\t\t\t\tplist.push(wait(data).then((v) => {\r\n\t\t\t\t\t\trecord.v = v;\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(\r\n\t\t\t\t\t() => setArrayField(array, getField)\r\n\t\t\t).then(resolve);\r\n\t\t});\r\n\t}\r\n\tfunction setArrayField(array, getField) {\r\n\t\tif (!getField) {\r\n\t\t\treturn Promise.resolve(array);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst length = array.length;\r\n\t\t\tconst plist = [];\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst record = array[i];\r\n\t\t\t\trecord.f = getField(record.v);\r\n\t\t\t\tif (isPromise(record.f)) {\r\n\t\t\t\t\tplist.push(wait(record.f).then((v) => {\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(() => resolve(array));\r\n\t\t});\r\n\t}\r\n\tconst sort = {\r\n\t\tsort(get, set, length, compare, getField) {\r\n\t\t\tconst old = createArray(get, length);\r\n\t\t\tif (getField) {\r\n\t\t\t\told.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n\t\t\t} else {\r\n\t\t\t\told.sort(compare);\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tset(i, old[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortArray(array, compare) {\r\n\t\t\tArray.prototype.sort.call(array, compare);\r\n\t\t},\r\n\t\tsortPromise(get, set, length, compare, getField) {\r\n\t\t\tif (window.Promise) {\r\n\t\t\t\treturn createArrayPromise(get, getField, length).then((array) => {\r\n\t\t\t\t\tarray.sort((r1, r2) => compare(r1.f, r2.f));\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tset(i, array[i].v);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsort.sort(get, set, length, compare, getField);\r\n\t\t\t\tconst dummyPromise = {\r\n\t\t\t\t\tthen(fn) {\r\n\t\t\t\t\t\tfn();\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcatch() {\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn dummyPromise;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = sort;\r\n}","\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\n{\r\n\tfunction getScrollBarWidth() {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.position = 'absolute';\r\n\t\tstyle.height = '9999px';\r\n\t\tstyle.width = 'calc(100vw - 100%)';\r\n\t\tstyle.opacity = 0;\r\n\t\tdummy.textContent = 'x';\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {width} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn parseInt(width, 10);\r\n\t}\r\n\r\n\tlet SCROLLBAR_SIZE;\r\n\tconst initDocument = () => {\r\n\t\trequire('./style.css');\r\n\t\tSCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n\t\tconst style = document.createElement('style');\r\n\t\tstyle.setAttribute('type', 'text/css');\r\n\t\tstyle.setAttribute('data-name', 'cheetah-grid');\r\n\t\tstyle.innerHTML =\r\n\t\t`\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n\r\n\t\tdocument.head.appendChild(style);\r\n\t};\r\n\r\n\tconst style = {\r\n\t\tinitDocument() {\r\n\t\t\tstyle.initDocument = () => {};\r\n\t\t\tinitDocument();\r\n\t\t},\r\n\t\tgetScrollBarSize() {\r\n\t\t\treturn SCROLLBAR_SIZE;\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst Symbol = window.Symbol ? window.Symbol : (() => {\r\n\t\tlet nextId = 1;\r\n\t\treturn (name) => {\r\n\t\t\tconst id = nextId++;\r\n\t\t\tif (name) {\r\n\t\t\t\treturn ` $$$ ${name} - ${id} $$$ `;\r\n\t\t\t} else {\r\n\t\t\t\treturn ` $$$ ${id} $$$ `;\r\n\t\t\t}\r\n\t\t};\r\n\t})();\r\n\tconst mem = {};\r\n\r\n\tmodule.exports = {\r\n\t\tget(name) {\r\n\t\t\tif (name) {\r\n\t\t\t\treturn mem[name] ? mem[name] : (mem[name] = Symbol(name));\r\n\t\t\t} else {\r\n\t\t\t\treturn Symbol();\r\n\t\t\t}\r\n\t\t},\r\n\t\tget PROTECTED_SYMBOL() {\r\n\t\t\treturn this.get('protected');\r\n\t\t},\r\n\t\tget CHECK_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('chkcol.stateID');\r\n\t\t},\r\n\t\tget BUTTON_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('btncol.stateID');\r\n\t\t},\r\n\t\tget COLUMN_FADEIN_STATE_ID() {\r\n\t\t\treturn this.get('col.fadein_stateID');\r\n\t\t},\r\n\t\tget BRANCH_GRAPH_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('branch_graph_col.stateID');\r\n\t\t},\r\n\t\tget SMALL_DIALOG_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('small_dialog_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_MENU_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_menu_editor.stateID');\r\n\t\t}\r\n\t};\r\n\r\n}","'use strict';\r\n{\r\n\tlet arrayFind;\r\n\tlet arrayFindIndex;\r\n\tconst array = {\r\n\t\tget find() {\r\n\t\t\tif (arrayFind) {\r\n\t\t\t\treturn arrayFind;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.find) {\r\n\t\t\t\tarrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFind = (arr, predicate) => {\r\n\t\t\t\t\tconst index = array.findIndex(arr, predicate);\r\n\t\t\t\t\treturn index >= 0 ? arr[index] : undefined;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFind;\r\n\t\t},\r\n\t\tget findIndex() {\r\n\t\t\tif (arrayFindIndex) {\r\n\t\t\t\treturn arrayFindIndex;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.findIndex) {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => {\r\n\t\t\t\t\tconst length = arr.length;\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tconst value = arr[i];\r\n\t\t\t\t\t\tif (predicate(value, i, arr)) {\r\n\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFindIndex;\r\n\t\t},\r\n\t};\r\n\t\r\n\tfunction isDef(data) {\r\n\t\treturn data !== null && typeof data !== 'undefined';\r\n\t}\r\n\tconst ua = window.navigator.userAgent.toLowerCase();\r\n\tconst IE = (ua.match(/(msie)/) || ua.match(/trident/));\r\n\tconst Chrome = (ua.indexOf('chrome') > -1) && (ua.indexOf('edge') === -1);\r\n\tconst Firefox = (ua.indexOf('firefox') > -1);\r\n\r\n\tfunction setReadonly(obj, name, value) {\r\n\t\tObject.defineProperty(obj, name, {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction each(obj, fn) {\r\n\t\tfor (const key in obj) {\r\n\t\t\tfn(obj[key], key, obj);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isObject(obj) {\r\n\t\treturn obj === Object(obj);\r\n\t}\r\n\r\n\tfunction extend(...args) {\r\n\t\tconst result = {};\r\n\t\targs.forEach((source) => {\r\n\t\t\tfor (const key in source) {\r\n\t\t\t\tObject.defineProperty(result, key, {\r\n\t\t\t\t\tget() {\r\n\t\t\t\t\t\treturn source[key];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tset(val) {\r\n\t\t\t\t\t\tsource[key] = val;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\tfunction isDescendantElement(root, target) {\r\n\t\twhile (target.parentElement) {\r\n\t\t\tconst p = target.parentElement;\r\n\t\t\tif (root === p) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\ttarget = p;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction applyChainSafe(obj, fn, ...names) {\r\n\t\tlet value = obj;\r\n\t\tfor (let i = 0; i < names.length && isDef(value); i++) {\r\n\t\t\tvalue = fn(value, names[i]);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tfunction getChainSafe(obj, ...names) {\r\n\t\treturn applyChainSafe(obj, (val, name) => val[name], ...names);\r\n\t}\r\n\tfunction getOrApply(value, ...args) {\r\n\t\tif (typeof value === 'function') {\r\n\t\t\treturn value(...args);\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\tfunction endsWith(str, searchString, position) {\r\n\t\tconst subjectString = str.toString();\r\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\r\n\t\t\tposition = subjectString.length;\r\n\t\t}\r\n\t\tposition -= searchString.length;\r\n\t\tconst lastIndex = subjectString.lastIndexOf(searchString, position);\r\n\t\treturn lastIndex !== -1 && lastIndex === position;\r\n\t}\r\n\tconst isPromise = (data) => data && typeof data.then === 'function';\r\n\tconst then = (result, callback) => isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n\tfunction getMouseButtons(e) {\r\n\t\tif (isDef(e.buttons)) {\r\n\t\t\treturn e.buttons;\r\n\t\t}\r\n\t\t/*for legacy*/\r\n\t\tif (isDef(e.which)) {\r\n\t\t\tif (e.which === 3) { //right?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\tif (e.which === 2) { //middle?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\treturn e.which;//left or no\r\n\t\t}\r\n\t\t\r\n\t\tif (e.button === 0 || e.button === 1) {\r\n\t\t\treturn 1;//candidate left\r\n\t\t}\r\n\t\tif (e.button === 2) {\r\n\t\t\treturn 2;// right\r\n\t\t}\r\n\t\treturn 0;//no or middle?\r\n\t}\r\n\tfunction getKeyCode(e) {\r\n\t\treturn e.keyCode || e.which;\r\n\t}\r\n\tfunction isTouchEvent(e) {\r\n\t\treturn !!e.changedTouches;\r\n\t}\r\n\tfunction getIgnoreCase(obj, name) {\r\n\t\tif (obj[name]) {\r\n\t\t\treturn obj[name];\r\n\t\t}\r\n\t\tconst l = name.toLowerCase();\r\n\t\tif (obj[l]) {\r\n\t\t\treturn obj[l];\r\n\t\t}\r\n\t\tconst u = name.toLowerCase();\r\n\t\tif (obj[u]) {\r\n\t\t\treturn obj[u];\r\n\t\t}\r\n\t\tfor (const k in obj) {\r\n\t\t\tif (k.toLowerCase() === l) {\r\n\t\t\t\treturn obj[k];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\tfunction cancel(e) {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\r\n\tfunction toBoxArray(obj) {\r\n\t\tif (!Array.isArray(obj)) {\r\n\t\t\treturn [obj/*top*/, obj/*right*/, obj/*bottom*/, obj/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 3) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[2]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 2) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[0]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 1) {\r\n\t\t\treturn [obj[0]/*top*/, obj[0]/*right*/, obj[0]/*bottom*/, obj[0]/*left*/];\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t// Chrome 33554431\r\n\t// FireFox 17895588\r\n\t// IE 10737433\r\n\tmodule.exports = {\r\n\t\tisDef,\r\n\t\tbrowser: {\r\n\t\t\tIE,\r\n\t\t\tChrome,\r\n\t\t\tFirefox,\r\n\t\t\theightLimit: Chrome ? 33554431\r\n\t\t\t: Firefox ? 17895588\r\n\t\t\t: 10737433 // default IE limit\r\n\t\t},\r\n\t\textend,\r\n\t\tisDescendantElement,\r\n\t\tgetChainSafe,\r\n\t\tapplyChainSafe,\r\n\t\tgetOrApply,\r\n\t\tgetIgnoreCase,\r\n\t\tisPromise,\r\n\t\tthen,\r\n\t\tarray,\r\n\t\tobj: {\r\n\t\t\tsetReadonly,\r\n\t\t\teach,\r\n\t\t\tisObject,\r\n\t\t},\r\n\t\tstr: {\r\n\t\t\tendsWith\r\n\t\t},\r\n\t\tevent: {\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tisTouchEvent,\r\n\t\t\tcancel,\r\n\t\t},\r\n\t\tstyle: {\r\n\t\t\ttoBoxArray,\r\n\t\t},\r\n\t\temptyFn() {},\r\n\t};\r\n}","'use strict';\r\n\r\nconst {extend} = require('../internal/utils');\r\nconst DrawGrid = require('../core/DrawGrid');\r\nconst EVENT_TYPE = extend(DrawGrid.EVENT_TYPE, {\r\n\tCHANGED_VALUE: 'changed_value',\r\n});\r\nmodule.exports = EVENT_TYPE;","'use strict';\r\n\r\n{\r\n\tconst core = require('./core');\r\n\tconst tools = require('./tools');\r\n\tconst columns = require('./columns');\r\n\tconst themes = require('./themes');\r\n\tconst data = require('./data');\r\n\t\r\n\tconst ListGrid = require('./ListGrid');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\t\r\n\tconst icons = require('./icons');\r\n\tconst register = require('./register');\r\n\t\r\n\t/**\r\n\t * Cheetah Grid\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcore,\r\n\t\ttools,\r\n\r\n\t\t// impl Grids\r\n\t\tListGrid,\r\n\r\n\t\t// objects\r\n\t\tcolumns,\r\n\t\tthemes,\r\n\t\tdata,\r\n\r\n\t\t// helper\r\n\t\tGridCanvasHelper,\r\n\t\tget icons() {\r\n\t\t\treturn icons.get();\r\n\t\t},\r\n\r\n\t\t//plugin registers\r\n\t\tregister,\r\n\r\n\t\tget _internal() {\r\n\t\t\tconsole.warn('use internal!!');\r\n\t\t\treturn {\r\n\t\t\t\tcolor: require('./internal/color'),\r\n\t\t\t\tsort: require('./internal/sort'),\r\n\t\t\t\tcalc: require('./internal/calc'),\r\n\t\t\t\tsymbolManager: require('./internal/symbolManager'),\r\n\t\t\t\tpath2DManager: require('./internal/path2DManager'),\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n\r\nconst themePlugins = require('./plugins/themes');\r\nconst iconPlugins = require('./plugins/icons');\r\n\r\nfunction register(obj, name, value) {\r\n\tif (value) {\r\n\t\tconst old = obj[name];\r\n\t\tobj[name] = value;\r\n\t\treturn old;\r\n\t} else {\r\n\t\treturn obj[name];\r\n\t}\r\n}\r\nfunction registers(obj, values) {\r\n\tfor (const k in values) {\r\n\t\tobj[k] = values[k];\r\n\t}\r\n}\r\nmodule.exports = {\r\n\ttheme(name, theme) {\r\n\t\treturn register(themePlugins, name, theme);\r\n\t},\r\n\ticon(name, icon) {\r\n\t\treturn register(iconPlugins, name, icon);\r\n\t},\r\n\ticons(icons) {\r\n\t\tregisters(iconPlugins, icons);\r\n\t},\r\n};","'use strict';\r\n{\r\n\tconst {extend, getIgnoreCase} = require('./internal/utils');\r\n\tconst theme = require('./themes/theme');\r\n\tconst plugins = require('./plugins/themes');\r\n\tconst BASIC = theme.create(require('./themes/BASIC'));\r\n\tconst MATERIAL_DESIGN = theme.create(require('./themes/MATERIAL_DESIGN'));\r\n\r\n\tconst builtin = {\r\n\t\tBASIC,\r\n\t\tMATERIAL_DESIGN,\r\n\t};\r\n\tlet defTheme = theme.create({});\r\n\t/**\r\n\t * themes\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tconst themes = {\r\n\t\tget default() {\r\n\t\t\treturn defTheme;\r\n\t\t},\r\n\t\tset default(defaultTheme) {\r\n\t\t\tdefTheme = defaultTheme;\r\n\t\t},\r\n\t\ttheme,\r\n\t\tof(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (typeof value === 'string') {\r\n\t\t\t\tconst t = getIgnoreCase(themes.choices, value);\r\n\t\t\t\tif (t) {\r\n\t\t\t\t\treturn t;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @namespace cheetahGrid.themes.choices\r\n\t\t */\r\n\t\tget choices() {\r\n\t\t\treturn extend(builtin, plugins);\r\n\t\t},\r\n\t};\r\n\tmodule.exports = themes;\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\nfunction DEFAULT_BG_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (!((row - frozenRowCount) & 1)) {\r\n\t\treturn '#FFF';\r\n\t} else {\r\n\t\treturn '#F6F6F6';\r\n\t}\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n\tlet stop;\r\n\tconst stopsKey = [];\r\n\tfor (stop in colorStops) {\r\n\t\tstopsKey.push(`${stop}@${colorStops[stop]}`);\r\n\t}\r\n\tconst key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(',')}`;\r\n\tconst ret = cacheLinearGradient[key];\r\n\tif (ret) {\r\n\t\treturn ret;\r\n\t}\r\n\tconst grad = context.createLinearGradient(left, top, left, bottom);\r\n\tfor (stop in colorStops) {\r\n\t\tgrad.addColorStop(stop, colorStops[stop]);\r\n\t}\r\n\treturn (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid,\r\n\t\tgrid: {frozenRowCount},\r\n\t\tcontext\r\n\t} = args;\r\n\tconst {left, top} = grid.getCellRelativeRect(col, 0);\r\n\tconst {bottom} = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n\r\n\treturn getLinearGradient(context, left, top, left, bottom, {0: '#FFF', 1: '#D3D3D3'});\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: '#000',\r\n\tdefaultBgColor: DEFAULT_BG_COLOR,\r\n\tfrozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: '#000',\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#F6F6F6',\r\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (frozenRowCount - 1 === row) {\r\n\t\treturn ['#f2f2f2', '#f2f2f2', '#ccc7c7', '#f2f2f2'];\r\n\t} else {\r\n\t\treturn ['#f2f2f2'];\r\n\t}\r\n}\r\nfunction BORDER_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid: {colCount}\r\n\t} = args;\r\n\tif (colCount - 1 === col) {\r\n\t\treturn ['#ccc7c7', '#f2f2f2', '#ccc7c7', null];\r\n\t} else {\r\n\t\treturn ['#ccc7c7', null];\r\n\t}\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\tdefaultBgColor: '#FFF',\r\n\tfrozenRowsBgColor: '#FFF',\r\n\tfrozenRowsColor: 'rgba(0, 0, 0, 0.54)',\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: BORDER_COLOR,\r\n\tfrozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t\tborderColor: 'rgba(0, 0, 0, 0.26)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#FFF',\r\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst defaultTheme = require('./MATERIAL_DESIGN');\r\n\r\n\tfunction getProp(obj, superObj, names, defNames) {\r\n\t\treturn getChainSafe(obj, ...names) ||\r\n\t\t(defNames && getChainSafe(obj, ...defNames)) ||\r\n\t\tgetChainSafe(superObj, ...names);\r\n\t}\r\n\tfunction createTheme(obj = {}, superTheme = defaultTheme) {\r\n\t\treturn {\r\n\t\t\tget font() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['font']);\r\n\t\t\t},\r\n\t\t\tget underlayBackgroundColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['underlayBackgroundColor']);\r\n\t\t\t},\r\n\t\t\t// color\r\n\t\t\tget color() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['color']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsColor'], ['color']);\r\n\t\t\t},\r\n\t\t\t// background\r\n\t\t\tget defaultBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget selectionBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['selectionBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\t// border\r\n\t\t\tget borderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget hiliteBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['hiliteBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget checkbox() {\r\n\t\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'uncheckBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'checkBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget borderColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'borderColor'], ['borderColor']);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tget button() {\r\n\t\t\t\treturn this._button || (this._button = {\r\n\t\t\t\t\tget color() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'color'], ['color']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget bgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'bgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\textends(obj) {\r\n\t\t\t\treturn createTheme(obj, this);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * theme object\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes.theme\r\n\t * @memberof cheetahGrid.themes\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcreate(obj) {\r\n\t\t\treturn createTheme(obj);\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\r\n\t/**\r\n\t * tools\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcanvashelper,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {calcBasePosition, calcStartPosition} = require('../internal/canvases');\r\n\tconst {ceil, PI} = Math;\r\n\r\n\tfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n\t\tfunction strokeRectLines(positions) {\r\n\t\t\tfor (let i = 0; i < borderColors.length; i++) {\r\n\t\t\t\tconst color = borderColors[i];\r\n\t\t\t\tconst preColor = borderColors[i - 1];\r\n\t\t\t\tif (color) {\r\n\t\t\t\t\tif (preColor !== color) {\r\n\t\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst pos1 = positions[i];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(pos1.x, pos1.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst pos2 = positions[i + 1];\r\n\t\t\t\t\tctx.lineTo(pos2.x, pos2.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst preColor = borderColors[borderColors.length - 1];\r\n\t\t\tif (preColor) {\r\n\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (borderColors[0] === borderColors[1] &&\r\n\t\t\tborderColors[0] === borderColors[2] &&\r\n\t\t\tborderColors[0] === borderColors[3]) {\r\n\t\t\tif (borderColors[0]) {\r\n\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrokeRectLines([\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t\t{x: left + width, y: top},\r\n\t\t\t\t{x: left + width, y: top + height},\r\n\t\t\t\t{x: left, y: top + height},\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\tfunction roundRect(ctx, left, top, width, height, radius) {\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n\t\tctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n\t\tctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n\t\tctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n\t\tctx.closePath();\r\n\t}\r\n\tfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.fill();\r\n\t}\r\n\tfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.stroke();\r\n\t}\r\n\tfunction fillTextRect(ctx, text, left, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcBasePosition(ctx, rect, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.fillText(text, pos.x, pos.y);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawInlineImageRect(ctx, image,\r\n\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\tdestWidth, destHeight,\r\n\t\t\tleft, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, destWidth, destHeight, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.drawImage(image,\r\n\t\t\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\t\t\tpos.x, pos.y, destWidth, destHeight\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an object containing the width of the checkbox.\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @return {Object} Object containing the width of the checkbox\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction measureCheckbox(ctx) {\r\n\t\treturn {\r\n\t\t\twidth: ctx.measureText('').width\r\n\t\t};\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * draw Checkbox\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {boolean|number} check checkbox check status\r\n\t * @param  {object} option option\r\n\t * @return {void}\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction drawCheckbox(ctx, x, y, check,\r\n\t\t\t{\r\n\t\t\t\tuncheckBgColor = '#FFF',\r\n\t\t\t\tcheckBgColor = 'rgb(76, 73, 72)',\r\n\t\t\t\tborderColor = '#000',\r\n\t\t\t\tboxSize = measureCheckbox(ctx).width,\r\n\t\t\t} = {}) {\r\n\t\tconst checkPoint = typeof check === 'number' ? (check > 1 ? 1 : check) : 1;\r\n\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n\t\t\t\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 1,\r\n\t\t\t\t\tceil(y) - 1,\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.strokeStyle = borderColor;\r\n\t\t\tstrokeRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 0.5,\r\n\t\t\t\t\tceil(y) - 0.5,\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tif (check) {\r\n\t\t\t\tctx.lineWidth = ceil(boxSize / 10);\r\n\t\t\t\tctx.strokeStyle = uncheckBgColor;\r\n\t\t\t\tlet leftWidth = boxSize / 4;\r\n\t\t\t\tlet rightWidth = boxSize / 2 * 0.9;\r\n\t\t\t\tconst leftLeftPos = x + boxSize * 0.2;\r\n\t\t\t\tconst leftTopPos = y + boxSize / 2;\r\n\r\n\t\t\t\tif (checkPoint < 0.5) {\r\n\t\t\t\t\tleftWidth = leftWidth * (checkPoint * 2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(leftLeftPos, leftTopPos);\r\n\t\t\t\tctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n\t\t\t\tif (checkPoint > 0.5) {\r\n\t\t\t\t\tif (checkPoint < 1) {\r\n\t\t\t\t\t\trightWidth = rightWidth * ((checkPoint - 0.5) * 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n\t\tconst {\r\n\t\t\tbackgroundColor = '#FFF',\r\n\t\t\tbgColor = backgroundColor,\r\n\t\t\tradius = 4,\r\n\t\t\tshadow = {},\r\n\t\t} = option;\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = bgColor;\r\n\r\n\t\t\tif (shadow) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, 0.24)',\r\n\t\t\t\t\tblur = 1,\r\n\t\t\t\t\toffsetX = 0,\r\n\t\t\t\t\toffsetY = 2,\r\n\t\t\t\t\toffset: {\r\n\t\t\t\t\t\tx: ox = offsetX,\r\n\t\t\t\t\t\ty: oy = offsetY\r\n\t\t\t\t\t} = {},\r\n\t\t\t\t} = shadow;\r\n\t\t\t\tctx.shadowColor = color;\r\n\t\t\t\tctx.shadowBlur = blur; //\r\n\t\t\t\tctx.shadowOffsetX = ox;\r\n\t\t\t\tctx.shadowOffsetY = oy;\r\n\t\t\t}\r\n\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(left),\r\n\t\t\t\t\tceil(top),\r\n\t\t\t\t\tceil(width),\r\n\t\t\t\t\tceil(height),\r\n\t\t\t\t\tradius\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * canvashelper\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools.canvashelper\r\n\t * @memberof cheetahGrid.tools\r\n\t */\r\n\tconst canvashelper = {\r\n\t\troundRect,\r\n\t\tfillRoundRect,\r\n\t\tstrokeRoundRect,\r\n\t\tdrawCheckbox,\r\n\t\tmeasureCheckbox,\r\n\t\tfillTextRect,\r\n\t\tdrawButton,\r\n\t\tdrawInlineImageRect,\r\n\t\tstrokeColorsRect,\r\n\t};\r\n\r\n\r\n\tmodule.exports = canvashelper;\r\n}"],"sourceRoot":""}
{"version":3,"sources":["cheetahGrid.es5/cheetahGrid.es5.js","cheetahGrid.es5/webpack/universalModuleDefinition","cheetahGrid.es5/webpack/bootstrap","cheetahGrid.es5/./columns/action/internal/InlineInputElement.css","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.css","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.css","cheetahGrid.es5/./columns/message/internal/ErrorMessageElement.css","cheetahGrid.es5/./columns/message/internal/MessageElement.css","cheetahGrid.es5/./columns/message/internal/WarningMessageElement.css","cheetahGrid.es5/./internal/style.css","cheetahGrid.es5/node_modules/css-loader/lib/css-base.js","cheetahGrid.es5/node_modules/style-loader/lib/addStyles.js","cheetahGrid.es5/node_modules/style-loader/lib/urls.js","cheetahGrid.es5/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg","cheetahGrid.es5/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg","cheetahGrid.es5/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg","cheetahGrid.es5/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg","cheetahGrid.es5/./GridCanvasHelper.js","cheetahGrid.es5/./ListGrid.js","cheetahGrid.es5/./columns.js","cheetahGrid.es5/./columns/action.js","cheetahGrid.es5/./columns/action/Action.js","cheetahGrid.es5/./columns/action/BaseAction.js","cheetahGrid.es5/./columns/action/BaseInputEditor.js","cheetahGrid.es5/./columns/action/ButtonAction.js","cheetahGrid.es5/./columns/action/CheckEditor.js","cheetahGrid.es5/./columns/action/Editor.js","cheetahGrid.es5/./columns/action/InlineInputEditor.js","cheetahGrid.es5/./columns/action/InlineMenuEditor.js","cheetahGrid.es5/./columns/action/SmallDialogInputEditor.js","cheetahGrid.es5/./columns/action/actionBind.js","cheetahGrid.es5/./columns/action/internal/InlineInputElement.css*","cheetahGrid.es5/./columns/action/internal/InlineInputElement.js","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.css*","cheetahGrid.es5/./columns/action/internal/InlineMenuElement.js","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.css*","cheetahGrid.es5/./columns/action/internal/SmallDialogInputElement.js","cheetahGrid.es5/./columns/message/BaseMessage.js","cheetahGrid.es5/./columns/message/ErrorMessage.js","cheetahGrid.es5/./columns/message/InfoMessage.js","cheetahGrid.es5/./columns/message/MessageHandler.js","cheetahGrid.es5/./columns/message/WarningMessage.js","cheetahGrid.es5/./columns/message/internal/ErrorMessageElement.css*","cheetahGrid.es5/./columns/message/internal/ErrorMessageElement.js","cheetahGrid.es5/./columns/message/internal/MessageElement.css*","cheetahGrid.es5/./columns/message/internal/MessageElement.js","cheetahGrid.es5/./columns/message/internal/WarningMessageElement.css*","cheetahGrid.es5/./columns/message/internal/WarningMessageElement.js","cheetahGrid.es5/./columns/style.js","cheetahGrid.es5/./columns/style/BaseStyle.js","cheetahGrid.es5/./columns/style/BranchGraphStyle.js","cheetahGrid.es5/./columns/style/ButtonStyle.js","cheetahGrid.es5/./columns/style/CheckStyle.js","cheetahGrid.es5/./columns/style/IconStyle.js","cheetahGrid.es5/./columns/style/ImageStyle.js","cheetahGrid.es5/./columns/style/MultilineTextStyle.js","cheetahGrid.es5/./columns/style/NumberStyle.js","cheetahGrid.es5/./columns/style/PercentCompleteBarStyle.js","cheetahGrid.es5/./columns/style/StdBaseStyle.js","cheetahGrid.es5/./columns/style/Style.js","cheetahGrid.es5/./columns/type.js","cheetahGrid.es5/./columns/type/BaseColumn.js","cheetahGrid.es5/./columns/type/BranchGraphColumn.js","cheetahGrid.es5/./columns/type/ButtonColumn.js","cheetahGrid.es5/./columns/type/CheckColumn.js","cheetahGrid.es5/./columns/type/Column.js","cheetahGrid.es5/./columns/type/IconColumn.js","cheetahGrid.es5/./columns/type/ImageColumn.js","cheetahGrid.es5/./columns/type/MenuColumn.js","cheetahGrid.es5/./columns/type/MultilineTextColumn.js","cheetahGrid.es5/./columns/type/NumberColumn.js","cheetahGrid.es5/./columns/type/PercentCompleteBarColumn.js","cheetahGrid.es5/./columns/type/columnUtils.js","cheetahGrid.es5/./core.js","cheetahGrid.es5/./core/DrawGrid.js","cheetahGrid.es5/./core/EventTarget.js","cheetahGrid.es5/./data.js","cheetahGrid.es5/./data/CachedDataSource.js","cheetahGrid.es5/./data/DataSource.js","cheetahGrid.es5/./element/Inline.js","cheetahGrid.es5/./element/InlineDrawer.js","cheetahGrid.es5/./element/InlineIcon.js","cheetahGrid.es5/./element/InlineImage.js","cheetahGrid.es5/./element/InlinePath2D.js","cheetahGrid.es5/./element/InlineSvg.js","cheetahGrid.es5/./element/inlines.js","cheetahGrid.es5/./header/style.js","cheetahGrid.es5/./header/style/BaseStyle.js","cheetahGrid.es5/./header/style/Style.js","cheetahGrid.es5/./header/type.js","cheetahGrid.es5/./header/type/BaseHeader.js","cheetahGrid.es5/./header/type/Header.js","cheetahGrid.es5/./header/type/SortHeader.js","cheetahGrid.es5/./icons.js","cheetahGrid.es5/./internal/EventHandler.js","cheetahGrid.es5/./internal/LRUCache.js","cheetahGrid.es5/./internal/NumberMap.js","cheetahGrid.es5/./internal/Rect.js","cheetahGrid.es5/./internal/Scrollable.js","cheetahGrid.es5/./internal/animate.js","cheetahGrid.es5/./internal/calc.js","cheetahGrid.es5/./internal/canvases.js","cheetahGrid.es5/./internal/color.js","cheetahGrid.es5/./internal/com.js","cheetahGrid.es5/./internal/dom.js","cheetahGrid.es5/./internal/fonts.js","cheetahGrid.es5/./internal/hiDPI.js","cheetahGrid.es5/./internal/icons.js","cheetahGrid.es5/./internal/imgs.js","cheetahGrid.es5/./internal/legacy/canvas/Path2D.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommands.js","cheetahGrid.es5/./internal/legacy/canvas/PathCommandsParser.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontRuler.js","cheetahGrid.es5/./internal/legacy/fontwatch/FontWatchRunner.js","cheetahGrid.es5/./internal/menu-items.js","cheetahGrid.es5/./internal/path2DManager.js","cheetahGrid.es5/./internal/sort.js","cheetahGrid.es5/./internal/style.css*","cheetahGrid.es5/./internal/style.js","cheetahGrid.es5/./internal/symbolManager.js","cheetahGrid.es5/./internal/utils.js","cheetahGrid.es5/./list-grid/EVENT_TYPE.js","cheetahGrid.es5/./main.js","cheetahGrid.es5/./plugins/icons.js","cheetahGrid.es5/./plugins/themes.js","cheetahGrid.es5/./register.js","cheetahGrid.es5/./themes.js","cheetahGrid.es5/./themes/BASIC.js","cheetahGrid.es5/./themes/MATERIAL_DESIGN.js","cheetahGrid.es5/./themes/theme.js","cheetahGrid.es5/./tools.js","cheetahGrid.es5/./tools/canvashelper.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","window","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","push","useSourceMap","list","toString","map","item","content","cssWithMappingToString","join","mediaQuery","alreadyImportedModules","length","id","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","concat","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","stylesInDom","memoize","fn","memo","apply","arguments","isOldIE","document","all","atob","getTarget","target","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","options","DEBUG","Error","attrs","insertInto","insertAt","styles","listToStyles","addStylesToDom","update","newList","mayRemove","domStyle","refs","newStyles","j","parts","addStyle","base","css","media","part","insertStyleElement","style","lastStyleElementInsertedAtTop","insertBefore","firstChild","nextSibling","appendChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","type","addAttrs","createLinkElement","link","rel","el","keys","forEach","key","setAttribute","obj","remove","result","transform","styleIndex","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","updateStyle","newObj","replaceText","textStore","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","undefined","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","replace","fixedCss","fullMatch","origUrl","unquotedOrigUrl","trim","$1","test","newUrl","width","height","__webpack_provided_Array_dot_isArray","invalidateCell","context","grid","col","row","getColor","color","getOrApply","getThemeColor","names","getChainSafe","theme","themes","default","testFontLoad","font","fonts","check","load","drawInlines","ctx","inlines","rect","offset","offsetTop","offsetBottom","drawInline","inline","offsetLeft","offsetRight","canDraw","save","fillStyle","draw","canvashelper","restore","onReady","inlineWidths","reduce","a","b","inlineWidth","_inlineRect","textAlign","textBaseline","icons","actInlines","buildInlines","_multiInlineRect","multiInlines","lineHeight","paddingTop","paddingBottom","em","measureText","pad","line","shift","drawCheckbox","helper","animElapsedTime","uncheckBgColor","checkbox","checkBgColor","borderColor","boxWidth","measureCheckbox","pos","calcStartPosition","uncheckBgRGB","colorToRGB","checkBgRGB","checkRGB","colorName","start","end","diff","Math","ceil","uncheckRGB","x","y","strokeRect","left","top","strokeStyle","borderColors","toBoxArray","strokeColorsRect","Rect","calc","Theme","constructor","_grid","_checkbox","_button","bgColor","GridCanvasHelper","_theme","calcWidth","toPx","full","getRect","getContext","calcHeight","calculator","createCalculator","box","drawRect","getDrawRect","beginPath","clip","clipLeft","clipWidth","clipTop","clipHeight","text","padding","isFrozenCell","frozenRowsColor","drawWithClip","toBoxPixelArray","multilines","fillText","fillColor","defaultBgColor","fill","option","getFillColorState","fillCell","fillRect","state","getSelectState","selected","selection","selectionBgColor","frozenRowsBgColor","lineWidth","drawBorderWithClip","startOffset","hiliteBorderColor","border","frozenRowsBorderColor","sel","select","moveTo","lineTo","bottom","stroke","right","caption","button","shadow","drawButton","radius","_getHeaderCellRange","_","headerMap","getHeaderCellRange","_updateRect","startCol","endCol","startRow","endRow","getColWidth","getRowHeight","setRect","_getCellValue","rowCount","getCell","field","columns","isObject","set","_getField","_setCellValue","_getRowRecordIndex","res","dataSource","setField","isPromise","_getCellMessage","message","_getCellIcon0","icon","isDef","retIcon","iconPropKeys","k","f","_hasField","_getCellIcon","getField","hasField","_onDrawValue","cellValue","gridCanvasHelper","drawCellBg","fillOpt","fillCellWithState","drawCellBorder","frozenColCount","frozenRowCount","_headerBorderWithState","borderWithState","drawCellBase","info","getRecord","getRowRecord","getIcon","getMessage","messageHandler","selId","_refreshHeader","headerEvents","unlisten","HeaderMap","header","headerObjects","cell","ids","headerType","bindGridEvent","HeaderBaseStyle","listen","EVENT_TYPE","CHANGE_STYLE","invalidate","action","isTarget","columnType","BaseStyle","colCount","_refreshRowCount","column","minWidth","maxWidth","setColWidth","setMinColWidth","setMaxColWidth","isArrayHeaderRowHeight","headerRowHeight","setRowHeight","_tryWithUpdateDataSource","dataSourceEventIds","handler","off","on","DataSource","UPDATED_LENGTH","UPDATED_ORDER","_setRecords","records","CachedDataSource","ofArray","_setDataSource","EMPTY","adjustListGridOption","then","DrawGrid","MessageHandler","PROTECTED_SYMBOL","headerId","_columns","_headerCells","_headerObjects","_addHeaders","_setupHeaderType","isCellInRange","roots","rowCells","_newRow","hd","headerStyle","sort","of","range","getHeaderCellRangeById","create","newRow","prev","ListGrid","sortState","order","updateSize","updateScroll","dispose","onDrawCell","valueCallback","changeValueCallback","after","ret","self","fireListeners","CHANGED_VALUE","record","SELECTED_CELL","invalidateGridRect","columnIndex","newCol","getColumnIndexByField","focusCell","makeVisibleCell","underlayBackgroundColor","BaseAction","Action","Editor","CheckEditor","ButtonAction","SmallDialogInputEditor","InlineInputEditor","InlineMenuEditor","ImmutableCheckEditor","_disabled","_readOnly","ImmutableInputEditor","ACTIONS","CHECK","INPUT","console","warn","columnAction","DEFAULT","toUpperCase","bindCellClickAction","bindCellKeyAction","_action","util","getState","disabled","mouseOver","mouseActiveCell","mouseOut","onChangeDisabledInternal","INPUT_CELL","EDITABLEINPUT_CELL","DBLCLICK_CELL","DBLTAP_CELL","KEYDOWN","MODIFY_STATUS_EDITABLEINPUT_CELL","SCROLL","KEY_ENTER","KEY_F2","BaseInputEditor","inputValue","input","open","readOnly","onOpenCellInternal","onInputCellInternal","event","preventDefault","stopPropagation","keyCode","onChangeSelectCellInternal","onGridScrollInternal","onSetInputAttrsInternal","setReadonly","BUTTON_COLUMN_STATE_ID","toggleValue","val","match","animate","CHECK_COLUMN_STATE_ID","KEY_SPACE","blockKey","doChangeValue","onChange","point","elapsed","selrange","acceptKeys","onChangeReadOnlyInternal","InlineInputElement","INLINE_INPUT_EDITOR_STATE_ID","globalElement","bindGridCount","attachInput","editor","element","addDisposable","attach","detachInput","gridFocus","detach","_classList","classList","_type","doGetCellValue","setInputAttrs","normalize","CLICK_CELL","MOUSEOVER_CELL","MOUSEOUT_CELL","MOUSEMOVE_CELL","InlineMenuElement","INLINE_MENU_EDITOR_STATE_ID","attachMenu","detachMenu","_options","cursor","SmallDialogInputElement","SMALL_DIALOG_INPUT_EDITOR_STATE_ID","_helperText","helperText","_inputValidator","inputValidator","_validator","validator","_inputDialogManager","cancel","locals","getKeyCode","cancelEvent","EventHandler","CLASSNAME","createInputElement","add","_handler","_input","_bindInputEvents","_beforePropEditor","getAttachCellArea","toFixed","_activeData","focus","selectionStart","selectionEnd","createTextRange","collapse","moveEnd","moveStart","tryWithOffEvents","_isActive","parentElement","stopPropagationOnly","contains","appendHtml","empty","disableFocus","isFocusable","findPrevSiblingFocusable","findNextSiblingFocusable","KEY_TAB","KEY_UP","KEY_DOWN","KEY_ESC","ITEM_CLASSNAME","HIDDEN_CLASSNAME","SHOWN_CLASSNAME","EMPTY_ITEM_CLASSNAME","findItemParents","createMenuElement","attachElement","menu","optionToLi","html","tabIndex","dataset","valueindex","span","openMenu","emptyItemEl","valueItemEl","focusEl","children","Array","slice","focusIndex","allHeight","offsetHeight","menuClientRect","getBoundingClientRect","scaleDiff","orgMenuTop","menuTop","menuBottom","winBottom","innerHeight","winMargin","closeMenu","_menu","_bindMenuEvents","_doChangeValue","shiftKey","items","querySelectorAll","INPUT_CLASSNAME","_focus","createDialogElement","readonly","bindProps","dialog","unbindProps","_dialog","_bindDialogEvents","errorMessage","activeData","_onInputValue","_beforeValue","_validate","onKeyupAndPress","_onInputValueChange","inputOnly","BaseMessage","detachMessageElement","_messageElement","createMessageElementInternal","messageElement","_getMessageElement","move","_detach","drawCellMessageInternal","ErrorMessageElement","RED_A100","ErrorMessage","boxRect","copy","fillRectWithState","MessageElement","GREY_L2","InfoMessage","WarningMessage","_messageInstances","_bindGridEvent","messageInstances","instance","_getMessageInstanceOfMessage","drawCellMessage","_attachInfo","attachMessageElement","_toMessageText","moveMessageElement","onSelectMessage","_attach","_move","_createMessageInstance","toLowerCase","Message","WarningMessageElement","DEEP_ORANGE_A100","MESSAGE_CLASSNAME","_rootElement","createrootElement","rootElement","_attachCell","textContent","frozenRect","offsetWidth","Style","NumberStyle","CheckStyle","ButtonStyle","ImageStyle","IconStyle","PercentCompleteBarStyle","columnStyle","StyleClass","EventTarget","defaultStyle","_bgColor","doChangeStyle","adj","DEFAULT_BRANCH_COLORS","BranchGraphStyle","_branchColors","branchColors","_margin","margin","_circleSize","circleSize","_branchLineWidth","branchLineWidth","_mergeStyle","mergeStyle","buttonBgColor","_buttonBgColor","StdBaseStyle","_uncheckBgColor","_checkBgColor","_borderColor","_imageSizing","imageSizing","MultilineTextStyle","_lineHeight","DEFAULT_BAR_COLOR","num","_barColor","barColor","_barBgColor","barBgColor","_barHeight","barHeight","_textAlign","_textBaseline","_color","_font","_padding","Column","NumberColumn","CheckColumn","ButtonColumn","ImageColumn","PercentCompleteBarColumn","IconColumn","BranchGraphColumn","MenuColumn","MultilineTextColumn","TYPES","NUMBER","BUTTON","IMAGE","MULTILINETEXT","isFadeinWhenCallbackInPromise","_fadeinWhenCallbackInPromise","configure","getFadinState","COLUMN_FADEIN_STATE_ID","_generateFadinPointAction","drawInternal","stateKey","opacity","cellState","globalAlpha","styleContents","fadinMgr","activeFadeins","margeAnimate","BaseColumn","fadeinWhenCallbackInPromise","getGridCanvasHelper","drawing","Date","now","currentContext","toCurrentContext","time","actStyle","convertInternal","drawMessageInternal","BRANCH_GRAPH_COLUMN_STATE_ID","getAllColumnData","callback","allData","promise","dataIndex","BranchLine","fromIndex","toIndex","colorIndex","BranchPoint","commit","lines","tag","froms","tos","t","mergeLines","joinLine","timeline","branchIndex","reverse","tl","branch","from","to","branches","findBranchRootIndex","fromTargetIndex","branchTargetFromIndex","branchPoint","targetLine","merge","commitTag","commitMerge","fromTargetLine","pop","calcCommand","command","timelineData","commands","cmd","calcBranchesInfo","calcBranchXPoints","w","max","textWidth","renderMerge","upLineIndex","downLineIndex","branchXPoints","lineCap","upX","upRect","getCellRelativeRect","upY","bezierCurveTo","downX","downRect","downY","_start","_cache","cache","upLineIndexKey","downLineIndexKey","pointIndex","arc","PI","closePath","utils","_caption","clone","active","loadIcons","blur","offsetY","toBoolean","opt","repeatArray","count","Infinity","_tagName","tagName","_className","className","_content","_name","_iconWidth","iconWidth","isNaN","getImage","url","getCacheOrLoad","MAX_LRU_CACHE_SIZE","calcKeepAspectRatioSize","maxHeight","newWidth","newHeight","drawImage","_convertInternal","basePadding","textPadding","iconPadding","path","split","multilineText","defaultFotmat","Intl","NumberFormat","fmt","_format","format","str","MARGIN","_min","min","_max","_formatter","formatter","v","svalue","endsWith","substr","rate","barMaxWidth","barTop","barLeft","barSize","loadIcon","iconList","toNormarizeArray","createRootElement","_vibrate","navigator","vibrate","isTouchEvent","_getTargetRowAt","absoluteY","internal","getTargetRowAtInternal","findBefore","startBottom","_getRowHeight","findAfter","candRow","defaultRowHeight","_getRowsHeight","_getTargetColAt","absoluteX","_getColWidth","_getTargetFrozenRowAt","scroll","_getTargetFrozenColAt","_getFrozenRowsRect","canvas","_getFrozenColsRect","_isCellDrawing","drawCells","_putCellDrawing","_removeCellDrawing","_drawCell","absoluteLeft","absoluteTop","visibleRect","skipAbsoluteTop","skipAbsoluteLeft","drawLayers","bounds","dcContext","DrawCellContext","pCol","_delayMode","terminate","_drawRow","initFrozenCol","initCol","drawRight","drawOuter","outerLeft","_invalidateRect","_getVisibleRect","_getInitContext","initRow","_getColsWidth","drawBottom","initFrozenRow","DrawLayers","outerTop","_toPxWidth","round","calcWidthContext","_getDefaultColPxWidth","defaultColWidth","_adjustColWidth","orgWidth","limit","colWidthsLimit","colWidthsMap","_setColWidth","put","each","getRowHeightInternal","rowHeightsMap","_setRowHeight","getRowsHeightInternal","h","_getScrollWidth","eachAll","_getScrollHeight","getScrollHeightInternal","_onScroll","lastLeft","lastTop","moveX","scrollable","scrollLeft","moveY","scrollTop","abs","redrawRect","_onKeyDownMove","_sel","KEY_LEFT","getMoveLeftColByKeyDownInternal","_moveFocusCell","getMoveUpRowByKeyDownInternal","KEY_RIGHT","getMoveRightColByKeyDownInternal","getMoveDownRowByKeyDownInternal","KEY_HOME","ctrlKey","KEY_END","getOffsetInvalidateCells","extendRange","beforeRange","beforeRect","getCellsRect","_setFocusCell","afterRange","afterRect","intersection","invalidateRect","_getMouseAbstractPoint","changedTouches","clientX","pageX","scrollX","clientY","pageY","scrollY","_bindEvents","getCellEventArgsSet","abstractPos","getCellAt","eventArgs","canResizeColumn","eventArgsSet","results","MOUSEDOWN_CELL","array","findIndex","getMouseButtons","resizeCol","_getResizeColAt","columnResizer","cellSelector","doubleTapBefore","longTouchId","setTimeout","defaultPrevented","clearTimeout","isMouseover","mouseEnterCell","mouseOverCell","onMouseenterCell","MOUSEENTER_CELL","onMouseleaveCell","beforeMouseCell","MOUSELEAVE_CELL","onMouseoverCell","onMouseoutCell","scrollElement","moving","lastMoving","hasListeners","focusControl","onScroll","onKeyDownMove","copyValue","copyCellValue","getCopyCellValue","Promise","strCellValue","onCopy","find","onInput","bindEventsInternal","abstractX","abstractY","inPoint","cellRect","getCellRect","_getScrollableVisibleRect","frozenColsWidth","frozenRowsHeight","_toRelativeRect","absoluteRect","setSafeInputValue","browser","isDescendantElement","Scrollable","NumberMap","hiDPI","KEY_ALPHA_C","MOUSEUP_CELL","RESIZE_COLUMN","BaseMouseDownMover","_events","_started","_moved","last","_mouseEndPoint","pt","mousemove","body","_mouseMove","mouseup","_mouseUp","touchmove","passive","touchend","touchcancel","_moveInternal","_upInternal","CellSelector","_getTargetCell","_bindMoveAndUp","_cell","makeVisibleCol","makeVisibleRow","ColumnResizer","_targetCol","_x","_preX","_invalidateAbsoluteLeft","pre","afterSize","FocusControl","_scrollable","_isComposition","metaKey","inputClear","IE","clipboardData","setData","calcTop","getScrollBarSize","composition","atts","attributes","removeNames","att","_inputStatus","nodeName","removeName","removeAttribute","editMode","Selection","_end","_wrapFireSelectedEvent","keepSelect","_setSelectCell","_isWraped","inCell","_layers","level","DrawLayer","addDraw","_level","_list","_col","_row","_mode","_ctx","_rect","_drawRect","_drawing","_selection","_drawLayers","_toRelativeDrawRect","fRect","onTerminate","_onTerminate","initDocument","alpha","cfg","config","floor","setFocusRect","setScrollSize","maxwidth","minwidth","isFrozenStartCell","isFrozenEndCell","isFrozenRow","isFrozenCol","frozen","getRowAt","getColAt","oldEditMode","resetInputStatus","selCol","selRow","storeInputStatus","setDefaultInputStatus","cellsRect","invalidateTarget","disposable","disposables","nextId","listeners","listenerData","listener","args","_setFieldCache","_fCache","recCache","_rCache","fCache","getValue","setPromiseBack","ss","applyChainSafe","emptyFn","_getIndex","_sortedIndexMap","mapIndex","UPDATE_LENGTH","_get","_length","getOriginal","getOriginalField","hasOriginalField","setOriginalField","sortedIndexMap","orderFn","v1","v2","sortPromise","recordPromiseCallBackInternal","fieldPromiseCallBackInternal","Inline","fillTextRect","InlineDrawer","_draw","_width","_height","InlineIcon","_icon","InlineImage","src","imageLeft","imageTop","imageWidth","imageHeight","_src","_imageLeft","_imageTop","_imageWidth","_imageHeight","_onloaded","_loaded","_loadImage","img","_inlineImg","drawInlineImageRect","path2DManager","InlinePath2D","_path","Path2D","translate","buildSvgDataUrl","svg","XMLSerializer","serializeToString","getSvgElement","parser","DOMParser","parseFromString","InlineSvg","svgElem","elmWidth","getAttribute","elmHeight","drawRegisteredIcon","drawWidth","drawHeight","iconOf","regedIcons","regedIcon","il","Header","SortHeader","headerCell","BaseHeader","_headerCell","_sort","_range","arrowSize","newState","_executeSort","extend","plugins","builtins","arrow_upward","arrow_downward","edit","star","star_border","star_half","_listeners","addEventListener","removeEventListener","clear","LRUCache","cacheSize","_map","_cacheSize","remKey","indexFirst","ary","elm","low","high","_keys","_vals","_sorted","keyFrom","keyTo","_left","_top","_right","_bottom","x0","x1","y0","y1","another","rect1","rect2","_update","domHeight","MAX_SCROLL","sbSize","vScrollRange","rScrollRange","_p","_endPointElement","heightLimit","relativeTop","cubicBezier","x2","y2","x3","y3","step","err","EASINGS","linear","easeIn","easeOut","easeInOut","raf","requestAnimationFrame","duration","easing","startedAt","canceledFlg","createAnim","resolve","reject","anim","parse","calcStr","replacer","unit","script","eval","calcBasePosition","paddingLeft","paddingRight","styleColorToRGB","dummy","position","defaultView","getComputedStyle","styleColor","colorToRGB0","hexToNum","hex","parseInt","createRGB","g","tripleHexToRGB","sextupleHexToRGB","r1","r2","g1","g2","b1","b2","testRGB","rateToByte","rgb","rgbMap","isArray","innerHTML","dom","isNode","arg","nodeType","toNode","toNodeList","jQuery","inner","node","disableBeforeTabIndex","enableFocus","previousSibling","loads","legacy","testStr","ready","ratio","setRatio","devicePixelRatio","wh","scale","ICON_PROP_KEYS","quote","quoted","doms","props","getIconProps","tagProps","beforeStyle","getPropertyValue","clientWidth","isLiga","toPropArray","prop","toSimpleArray","iconProps","workData","normarize","allCache","isDataUrl","search","loadImage","error","Image","onload","onerror","getCacheOrLoad0","cacheName","PathCommandsParser","_ops","op","CanvasRenderingContext2D","originalFill","mag","sqrt","pow","dot","u","clamp","angle","sign","acos","rotClockwise","cost","cos","sint","sin","rotCounterClockwise","midPoint","meanVec","pointMul","sum","ellipseFromEllipticalArc","rx","ry","phi","fA","fS","xPrime","xPrime2","rx2","ry2","lambda","factor","cPrime","x1UnitVector","x2UnitVector","theta","deltaTheta","rotate","PathCommands","lMx","lMy","lx","ly","reflected","lastCommand","makeReflected","M","px","py","L","H","V","Z","z","C","cp1x","cp1y","cp2x","cp2y","S","cpx","cpy","Q","quadraticCurveTo","q","T","A","xAxisRotation","largeArcFlag","sweepFlag","pathTokens","next","builder","argsProvider","canvasOperations","_commands","ops","tokens","subsequentCommand","fst","log","computeStyle","display","FontRuler","el_","LastResortFonts","SERIF","SANS_SERIF","watchRunners","FontWatchRunner","activeCallback","inactiveCallback","runner","activeCallbacks","inactiveCallbacks","status","lastResortWidths_","fontRulerA_","fontRulerB_","lastResortRulerA","lastResortRulerB","getWidth","started_","check_","widthA","widthB","isFallbackFont_","isLastResortFont_","finish_","widthMatches_","lastResortFont","hasWebKitFallbackBug","widthsMatchLastResortWidths_","callbacks","cb","HAS_WEBKIT_FALLBACK_BUG","exec","userAgent","getPath2D","upsideDown","ud","offsetX","xrate","yrate","path2d","wait","createArray","createArrayPromise","plist","setArrayField","compare","old","sortArray","dummyPromise","catch","getScrollBarWidth","SCROLLBAR_SIZE","Symbol","mem","searchString","subjectString","isFinite","lastIndex","lastIndexOf","buttons","which","getIgnoreCase","arrayFind","arrayFindIndex","arr","predicate","ua","Chrome","Firefox","core","tools","register","_internal","symbolManager","themePlugins","iconPlugins","registers","values","BASIC","MATERIAL_DESIGN","builtin","defTheme","defaultTheme","choices","DEFAULT_BG_COLOR","cacheLinearGradient","getLinearGradient","colorStops","stop","stopsKey","grad","createLinearGradient","addColorStop","FROZEN_ROWS_BG_COLOR","FROZEN_ROWS_BORDER_COLOR","BORDER_COLOR","getProp","superObj","defNames","createTheme","superTheme","extends","strokeRectLines","positions","preColor","pos1","pos2","roundRect","fillRoundRect","strokeRoundRect","image","srcLeft","srcTop","srcWidth","srcHeight","destWidth","destHeight","boxSize","checkPoint","leftWidth","rightWidth","leftLeftPos","leftTopPos","backgroundColor","ox","oy","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","global"],"mappings":"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","file":"cheetahGrid.es5.js","sourcesContent":["(function(){\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineInputElement.css\":\n/*!***********************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/action/internal/InlineInputElement.css ***!\n  \\***********************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineMenuElement.css\":\n/*!**********************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/action/internal/InlineMenuElement.css ***!\n  \\**********************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/SmallDialogInputElement.css\":\n/*!****************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/action/internal/SmallDialogInputElement.css ***!\n  \\****************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/ErrorMessageElement.css\":\n/*!*************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/message/internal/ErrorMessageElement.css ***!\n  \\*************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/MessageElement.css\":\n/*!********************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/message/internal/MessageElement.css ***!\n  \\********************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;user-select:none}.cheetah-grid__message-element--hidden{opacity:0;display:none}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}.cheetah-grid__message-element{border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element.helper-text--right-justified{text-align:right}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/WarningMessageElement.css\":\n/*!***************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./columns/message/internal/WarningMessageElement.css ***!\n  \\***************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/index.js?minimize!./internal/style.css\":\n/*!*******************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader?minimize!./internal/style.css ***!\n  \\*******************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/lib/css-base.js */ \"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"../../node_modules/css-loader/lib/css-base.js\":\n/*!*****************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/css-loader/lib/css-base.js ***!\n  \\*****************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n\n/***/ \"../../node_modules/style-loader/lib/addStyles.js\":\n/*!********************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/style-loader/lib/addStyles.js ***!\n  \\********************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(/*! ./urls */ \"../../node_modules/style-loader/lib/urls.js\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n\n/***/ \"../../node_modules/style-loader/lib/urls.js\":\n/*!***************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/node_modules/style-loader/lib/urls.js ***!\n  \\***************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/content/svg/production/ic_add_48px.svg\":\n/*!*************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/content/svg/production/ic_add_48px.svg ***!\n  \\*************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons\\content\\svg\\production\\ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg\":\n/*!************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg ***!\n  \\************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons\\image\\svg\\production\\ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\":\n/*!***************************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg ***!\n  \\***************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\":\n/*!*************************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg ***!\n  \\*************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg\":\n/*!*************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg ***!\n  \\*************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg\":\n/*!********************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg ***!\n  \\********************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n\n/***/ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg\":\n/*!******************************************************************************************************************************************************************************************************************!*\\\n  !*** C:/Users/ohta2346/git/github/cheetah-grid/webpack-loader/svg-to-icon-js-loader.js!C:/Users/ohta2346/git/github/cheetah-grid/node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg ***!\n  \\******************************************************************************************************************************************************************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};\n\n/***/ }),\n\n/***/ \"./GridCanvasHelper.js\":\n/*!*****************************!*\\\n  !*** ./GridCanvasHelper.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {/*eslint no-bitwise:0*/\n\n\n{\n\tconst { calcStartPosition } = __webpack_require__(/*! ./internal/canvases */ \"./internal/canvases.js\");\n\tconst inlines = __webpack_require__(/*! ./element/inlines */ \"./element/inlines.js\");\n\tconst canvashelper = __webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\");\n\tconst themes = __webpack_require__(/*! ./themes */ \"./themes.js\");\n\tconst { colorToRGB } = __webpack_require__(/*! ./internal/color */ \"./internal/color.js\");\n\tconst Rect = __webpack_require__(/*! ./internal/Rect */ \"./internal/Rect.js\");\n\tconst { getChainSafe, getOrApply, style: { toBoxArray } } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\tconst fonts = __webpack_require__(/*! ./internal/fonts */ \"./internal/fonts.js\");\n\tconst calc = __webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\");\n\n\tfunction invalidateCell(context, grid) {\n\t\tconst { col, row } = context;\n\t\tgrid.invalidateCell(col, row);\n\t}\n\tfunction getColor(color, col, row, grid, context) {\n\t\treturn getOrApply(color, {\n\t\t\tcol,\n\t\t\trow,\n\t\t\tgrid,\n\t\t\tcontext\n\t\t});\n\t}\n\tfunction getThemeColor(grid, ...names) {\n\t\treturn getChainSafe(grid.theme, ...names) || getChainSafe(themes.default, ...names);\n\t}\n\tfunction testFontLoad(font, value, context, grid) {\n\t\tif (font) {\n\t\t\tif (!fonts.check(font, value)) {\n\t\t\t\tfonts.load(font, value, () => invalidateCell(context, grid));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\n\t\tfunction drawInline(inline, offsetLeft, offsetRight) {\n\t\t\tif (inline.canDraw()) {\n\t\t\t\tctx.save();\n\t\t\t\ttry {\n\t\t\t\t\tctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\n\t\t\t\t\tctx.font = inline.font() || ctx.font;\n\t\t\t\t\tinline.draw({\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\tcanvashelper,\n\t\t\t\t\t\trect,\n\t\t\t\t\t\toffset,\n\t\t\t\t\t\toffsetLeft,\n\t\t\t\t\t\toffsetRight,\n\t\t\t\t\t\toffsetTop,\n\t\t\t\t\t\toffsetBottom\n\t\t\t\t\t});\n\t\t\t\t} finally {\n\t\t\t\t\tctx.restore();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinline.onReady(() => grid.invalidateCell(col, row));\n\t\t\t\t//noop\n\t\t\t}\n\t\t}\n\t\tif (inlines.length === 1) {\n\t\t\t//1\n\t\t\tconst inline = inlines[0];\n\t\t\tdrawInline(inline, 0, 0);\n\t\t} else {\n\t\t\tconst inlineWidths = inlines.map(inline => (inline.width({ ctx }) || 0) - 0);\n\t\t\tlet offsetRight = inlineWidths.reduce((a, b) => a + b);\n\n\t\t\tlet offsetLeft = 0;\n\t\t\tinlines.forEach((inline, index) => {\n\t\t\t\tconst inlineWidth = inlineWidths[index];\n\t\t\t\toffsetRight -= inlineWidth;\n\t\t\t\tdrawInline(inline, offsetLeft, offsetRight);\n\t\t\t\toffsetLeft += inlineWidth;\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction _inlineRect(grid, ctx, inline, rect, col, row, {\n\t\toffset,\n\t\tcolor,\n\t\ttextAlign,\n\t\ttextBaseline,\n\t\tfont,\n\t\ticons\n\t} = {}) {\n\n\t\t//style\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\t\tctx.font = font || ctx.font;\n\n\t\tconst actInlines = inlines.buildInlines(icons, inline);\n\t\tdrawInlines(ctx, actInlines, rect, offset, 0, 0, col, row, grid);\n\t}\n\n\tfunction _multiInlineRect(grid, ctx, multiInlines, rect, col, row, {\n\t\toffset,\n\t\tcolor,\n\t\ttextAlign,\n\t\ttextBaseline,\n\t\tfont,\n\t\tlineHeight,\n\t\ticons\n\t} = {}) {\n\t\t//style\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\t\tctx.font = font || ctx.font;\n\n\t\tmultiInlines = [...multiInlines];\n\n\t\tlet paddingTop = 0;\n\t\tlet paddingBottom = lineHeight * (multiInlines.length - 1);\n\n\t\tif (ctx.textBaseline === 'top' || ctx.textBaseline === 'hanging') {\n\t\t\tconst em = ctx.measureText('').width;\n\t\t\tconst pad = (lineHeight - em) / 2;\n\t\t\tpaddingTop += pad;\n\t\t\tpaddingBottom -= pad;\n\t\t} else if (ctx.textBaseline === 'bottom' || ctx.textBaseline === 'alphabetic' || ctx.textBaseline === 'ideographic') {\n\t\t\tconst em = ctx.measureText('').width;\n\t\t\tconst pad = (lineHeight - em) / 2;\n\t\t\tpaddingTop -= pad;\n\t\t\tpaddingBottom += pad;\n\t\t}\n\t\tconst line = multiInlines.shift() || '';\n\t\tconst actInlines = inlines.buildInlines(icons, line);\n\t\tdrawInlines(ctx, actInlines, rect, offset, paddingTop, paddingBottom, col, row, grid);\n\t\tpaddingTop += lineHeight;\n\t\tpaddingBottom -= lineHeight;\n\t\twhile (multiInlines.length) {\n\t\t\tconst line = multiInlines.shift();\n\t\t\tconst actInlines = inlines.buildInlines(undefined, line);\n\t\t\tdrawInlines(ctx, actInlines, rect, offset, paddingTop, paddingBottom, col, row, grid);\n\t\t\tpaddingTop += lineHeight;\n\t\t\tpaddingBottom -= lineHeight;\n\t\t}\n\t}\n\n\tfunction drawCheckbox(ctx, rect, check, helper, {\n\t\tanimElapsedTime = 1,\n\t\tuncheckBgColor = helper.theme.checkbox.uncheckBgColor,\n\t\tcheckBgColor = helper.theme.checkbox.checkBgColor,\n\t\tborderColor = helper.theme.checkbox.borderColor,\n\t\ttextAlign = 'center',\n\t\ttextBaseline = 'middle'\n\t} = {}) {\n\t\tconst boxWidth = canvashelper.measureCheckbox(ctx).width;\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\t\tconst pos = calcStartPosition(ctx, rect, boxWidth + 1 /*+1*/, boxWidth + 1 /*+1*/);\n\t\tif (0 < animElapsedTime && animElapsedTime < 1) {\n\t\t\tconst uncheckBgRGB = colorToRGB(uncheckBgColor);\n\t\t\tconst checkBgRGB = colorToRGB(checkBgColor);\n\t\t\tconst checkRGB = colorName => {\n\t\t\t\tconst start = uncheckBgRGB[colorName];\n\t\t\t\tconst end = checkBgRGB[colorName];\n\t\t\t\tif (animElapsedTime >= 1) {\n\t\t\t\t\treturn end;\n\t\t\t\t}\n\t\t\t\tconst diff = start - end;\n\t\t\t\treturn Math.ceil(start - diff * animElapsedTime);\n\t\t\t};\n\t\t\tconst uncheckRGB = colorName => {\n\t\t\t\tconst end = uncheckBgRGB[colorName];\n\t\t\t\tconst start = checkBgRGB[colorName];\n\t\t\t\tif (animElapsedTime >= 1) {\n\t\t\t\t\treturn end;\n\t\t\t\t}\n\t\t\t\tconst diff = end - start;\n\t\t\t\treturn Math.ceil(start + diff * animElapsedTime);\n\t\t\t};\n\t\t\tuncheckBgColor = check ? uncheckBgColor : `rgb(${uncheckRGB('r')} , ${uncheckRGB('g')}, ${uncheckRGB('b')})`;\n\t\t\tcheckBgColor = `rgb(${checkRGB('r')} , ${checkRGB('g')}, ${checkRGB('b')})`;\n\t\t}\n\n\t\tcanvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\n\t\t\tuncheckBgColor,\n\t\t\tcheckBgColor,\n\t\t\tborderColor\n\t\t});\n\t}\n\n\tclass Theme {\n\t\tconstructor(grid) {\n\t\t\tthis._grid = grid;\n\t\t}\n\t\tgetThemeColor(...name) {\n\t\t\treturn getThemeColor(this._grid, ...name);\n\t\t}\n\t\tget font() {\n\t\t\treturn getThemeColor(this._grid, 'font');\n\t\t}\n\t\tget underlayBackgroundColor() {\n\t\t\treturn getThemeColor(this._grid, 'underlayBackgroundColor');\n\t\t}\n\t\t// color\n\t\tget color() {\n\t\t\treturn getThemeColor(this._grid, 'color');\n\t\t}\n\t\tget frozenRowsColor() {\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsColor');\n\t\t}\n\t\t// background\n\t\tget defaultBgColor() {\n\t\t\treturn getThemeColor(this._grid, 'defaultBgColor');\n\t\t}\n\t\tget frozenRowsBgColor() {\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBgColor');\n\t\t}\n\t\tget selectionBgColor() {\n\t\t\treturn getThemeColor(this._grid, 'selectionBgColor');\n\t\t}\n\t\t// border\n\t\tget borderColor() {\n\t\t\treturn getThemeColor(this._grid, 'borderColor');\n\t\t}\n\t\tget frozenRowsBorderColor() {\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBorderColor');\n\t\t}\n\t\tget hiliteBorderColor() {\n\t\t\treturn getThemeColor(this._grid, 'hiliteBorderColor');\n\t\t}\n\t\tget checkbox() {\n\t\t\tconst grid = this._grid;\n\t\t\treturn this._checkbox || (this._checkbox = {\n\t\t\t\tget uncheckBgColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'uncheckBgColor');\n\t\t\t\t},\n\t\t\t\tget checkBgColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'checkBgColor');\n\t\t\t\t},\n\t\t\t\tget borderColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'borderColor');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tget button() {\n\t\t\tconst grid = this._grid;\n\t\t\treturn this._button || (this._button = {\n\t\t\t\tget color() {\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'color');\n\t\t\t\t},\n\t\t\t\tget bgColor() {\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'bgColor');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t}\n\n\tfunction strokeRect(ctx, color, left, top, width, height) {\n\t\tif (!__webpack_provided_Array_dot_isArray(color)) {\n\t\t\tif (color) {\n\t\t\t\tctx.strokeStyle = color;\n\t\t\t\tctx.strokeRect(left, top, width, height);\n\t\t\t}\n\t\t} else {\n\t\t\tconst borderColors = toBoxArray(color);\n\t\t\tcanvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\n\t\t}\n\t}\n\n\tclass GridCanvasHelper {\n\t\tconstructor(grid) {\n\t\t\tthis._grid = grid;\n\t\t\tthis._theme = new Theme(grid);\n\t\t}\n\t\tcreateCalculator(context) {\n\t\t\treturn {\n\t\t\t\tcalcWidth(width) {\n\t\t\t\t\treturn calc.toPx(width, {\n\t\t\t\t\t\tget full() {\n\t\t\t\t\t\t\tconst rect = context.getRect();\n\t\t\t\t\t\t\treturn rect.width;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget em() {\n\t\t\t\t\t\t\tconst ctx = context.getContext();\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tcalcHeight(height) {\n\t\t\t\t\treturn calc.toPx(height, {\n\t\t\t\t\t\tget full() {\n\t\t\t\t\t\t\tconst rect = context.getRect();\n\t\t\t\t\t\t\treturn rect.height;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget em() {\n\t\t\t\t\t\t\tconst ctx = context.getContext();\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tgetColor(color, col, row, ctx) {\n\t\t\treturn getColor(color, col, row, this._grid, ctx);\n\t\t}\n\t\ttoBoxArray(obj) {\n\t\t\treturn toBoxArray(obj);\n\t\t}\n\t\ttoBoxPixelArray(value, context) {\n\t\t\tif (typeof value === 'string' || __webpack_provided_Array_dot_isArray(value)) {\n\t\t\t\tconst calculator = this.createCalculator(context);\n\t\t\t\tconst box = toBoxArray(value);\n\t\t\t\treturn [calculator.calcHeight(box[0]), calculator.calcWidth(box[1]), calculator.calcHeight(box[2]), calculator.calcWidth(box[3])];\n\t\t\t}\n\t\t\treturn toBoxArray(value);\n\t\t}\n\t\tget theme() {\n\t\t\treturn this._theme;\n\t\t}\n\t\tdrawWithClip(context, draw) {\n\t\t\tconst drawRect = context.getDrawRect();\n\t\t\tif (!drawRect) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst ctx = context.getContext();\n\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\n\t\t\t\t//clip\n\t\t\t\tctx.clip();\n\n\t\t\t\tdraw(ctx);\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\tdrawBorderWithClip(context, draw) {\n\t\t\tconst drawRect = context.getDrawRect();\n\t\t\tif (!drawRect) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst rect = context.getRect();\n\t\t\tconst ctx = context.getContext();\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\t//clip\n\t\t\t\tctx.beginPath();\n\t\t\t\tlet clipLeft = drawRect.left;\n\t\t\t\tlet clipWidth = drawRect.width;\n\t\t\t\tif (drawRect.left === rect.left) {\n\t\t\t\t\tclipLeft += -1;\n\t\t\t\t\tclipWidth += 1;\n\t\t\t\t}\n\t\t\t\tlet clipTop = drawRect.top;\n\t\t\t\tlet clipHeight = drawRect.height;\n\t\t\t\tif (drawRect.top === rect.top) {\n\t\t\t\t\tclipTop += -1;\n\t\t\t\t\tclipHeight += 1;\n\t\t\t\t}\n\t\t\t\tctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\n\t\t\t\tctx.clip();\n\n\t\t\t\tdraw(ctx);\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\ttext(text, context, {\n\t\t\tpadding,\n\t\t\toffset = 2,\n\t\t\tcolor,\n\t\t\ttextAlign = 'left',\n\t\t\ttextBaseline = 'middle',\n\t\t\tfont,\n\t\t\ticons\n\t\t} = {}) {\n\t\t\tlet rect = context.getRect();\n\n\t\t\tconst { col, row } = context;\n\n\t\t\tif (!color) {\n\t\t\t\t({ color } = this.theme);\n\t\t\t\t// header color\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tif (padding) {\n\t\t\t\t\tctx.font = font || ctx.font;\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\n\t\t\t\t\tconst left = rect.left + padding[3];\n\t\t\t\t\tconst top = rect.top + padding[0];\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\n\t\t\t\t\trect = new Rect(left, top, width, height);\n\t\t\t\t}\n\t\t\t\t_inlineRect(this._grid, ctx, text, rect, col, row, {\n\t\t\t\t\toffset,\n\t\t\t\t\tcolor,\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tmultilineText(multilines, context, {\n\t\t\tpadding,\n\t\t\toffset = 2,\n\t\t\tcolor,\n\t\t\ttextAlign = 'left',\n\t\t\ttextBaseline = 'middle',\n\t\t\tfont,\n\t\t\tlineHeight = '1em',\n\t\t\ticons\n\t\t} = {}) {\n\t\t\tlet rect = context.getRect();\n\n\t\t\tconst { col, row } = context;\n\n\t\t\tif (!color) {\n\t\t\t\t({ color } = this.theme);\n\t\t\t\t// header color\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tctx.font = font || ctx.font;\n\t\t\t\tif (padding) {\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\n\t\t\t\t\tconst left = rect.left + padding[3];\n\t\t\t\t\tconst top = rect.top + padding[0];\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\n\t\t\t\t\trect = new Rect(left, top, width, height);\n\t\t\t\t}\n\t\t\t\tconst calculator = this.createCalculator(context);\n\t\t\t\tlineHeight = calculator.calcHeight(lineHeight);\n\t\t\t\t_multiInlineRect(this._grid, ctx, multilines, rect, col, row, {\n\t\t\t\t\toffset,\n\t\t\t\t\tcolor,\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tfont,\n\t\t\t\t\tlineHeight,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tfillText(text, x, y, context, {\n\t\t\tcolor,\n\t\t\ttextAlign = 'left',\n\t\t\ttextBaseline = 'top',\n\t\t\tfont\n\t\t} = {}) {\n\n\t\t\tconst { col, row } = context;\n\n\t\t\tif (!color) {\n\t\t\t\t({ color } = this.theme);\n\t\t\t\t// header color\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst ctx = context.getContext();\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.fillStyle = getColor(color, col, row, this._grid, ctx);\n\t\t\t\tctx.textAlign = textAlign;\n\t\t\t\tctx.textBaseline = textBaseline;\n\t\t\t\tctx.font = font || ctx.font;\n\t\t\t\tctx.fillText(text, x, y);\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\tfillCell(context, {\n\t\t\tfillColor = this.theme.defaultBgColor\n\t\t} = {}) {\n\t\t\tconst rect = context.getRect();\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t\tctx.fill();\n\t\t\t});\n\t\t}\n\t\tfillCellWithState(context, option = {}) {\n\t\t\toption.fillColor = this.getFillColorState(context, option);\n\t\t\tthis.fillCell(context, option);\n\t\t}\n\t\tfillRect(rect, context, {\n\t\t\tfillColor = this.theme.defaultBgColor\n\t\t} = {}) {\n\n\t\t\tconst ctx = context.getContext();\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t\tctx.fill();\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\tfillRectWithState(rect, context, option = {}) {\n\t\t\toption.fillColor = this.getFillColorState(context, option);\n\n\t\t\tthis.fillRect(rect, context, option);\n\t\t}\n\t\tgetFillColorState(context, option = {}) {\n\t\t\tconst state = context.getSelectState();\n\t\t\tconst { col, row } = context;\n\t\t\tif (!state.selected && state.selection) {\n\t\t\t\treturn this.theme.selectionBgColor;\n\t\t\t} else {\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\treturn this.theme.frozenRowsBgColor;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn option.fillColor || this.theme.defaultBgColor;\n\t\t}\n\t\tborder(context, {\n\t\t\tborderColor = this.theme.borderColor,\n\t\t\tlineWidth = 1\n\t\t} = {}) {\n\t\t\tconst rect = context.getRect();\n\n\t\t\tthis.drawBorderWithClip(context, ctx => {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tconst borderColors = getColor(borderColor, col, row, this._grid, ctx);\n\n\t\t\t\tif (lineWidth === 1) {\n\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\n\t\t\t\t} else if (lineWidth === 2) {\n\t\t\t\t\tctx.lineWidth = 2;\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\n\t\t\t\t} else {\n\t\t\t\t\tctx.lineWidth = lineWidth;\n\t\t\t\t\tconst startOffset = lineWidth / 2 - 1;\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left + startOffset, rect.top + startOffset, rect.width - lineWidth + 1, rect.height - lineWidth + 1);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tborderWithState(context, option = {}) {\n\t\t\tconst rect = context.getRect();\n\t\t\tconst state = context.getSelectState();\n\t\t\tconst { col, row } = context;\n\n\t\t\t//\n\t\t\tif (state.selected) {\n\t\t\t\toption.borderColor = this.theme.hiliteBorderColor;\n\t\t\t\toption.lineWidth = 2;\n\t\t\t\tthis.border(context, option);\n\t\t\t} else {\n\t\t\t\t// header color\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\t\toption.borderColor = this.theme.frozenRowsBorderColor;\n\t\t\t\t}\n\n\t\t\t\toption.lineWidth = 1;\n\t\t\t\tthis.border(context, option);\n\n\t\t\t\t//\n\t\t\t\tconst sel = this._grid.selection.select;\n\t\t\t\tif (sel.col + 1 === col && sel.row === row) {\n\t\t\t\t\t//\n\t\t\t\t\tthis.drawBorderWithClip(context, ctx => {\n\t\t\t\t\t\tconst borderColors = toBoxArray(getColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx));\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t});\n\t\t\t\t} else if (sel.col === col && sel.row + 1 === row) {\n\t\t\t\t\t//\n\t\t\t\t\tthis.drawBorderWithClip(context, ctx => {\n\t\t\t\t\t\tconst borderColors = toBoxArray(getColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx));\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcheckbox(check, context, option = {}) {\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tdrawCheckbox(ctx, context.getRect(), check, this, option);\n\t\t\t});\n\t\t}\n\t\tbutton(caption, context, {\n\t\t\tbgColor = this.theme.button.bgColor,\n\t\t\tpadding,\n\t\t\toffset = 2,\n\t\t\tcolor = this.theme.button.color,\n\t\t\ttextAlign = 'center',\n\t\t\ttextBaseline = 'middle',\n\t\t\tshadow,\n\t\t\tfont,\n\t\t\ticons\n\t\t} = {}) {\n\t\t\tconst rect = context.getRect();\n\n\t\t\tthis.drawWithClip(context, ctx => {\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tpadding = this.toBoxPixelArray(padding || rect.height / 8, context);\n\t\t\t\tconst left = rect.left + padding[3];\n\t\t\t\tconst top = rect.top + padding[0];\n\t\t\t\tconst width = rect.width - padding[1] - padding[3];\n\t\t\t\tconst height = rect.height - padding[0] - padding[2];\n\n\t\t\t\tcanvashelper.drawButton(ctx, left, top, width, height, {\n\t\t\t\t\tbgColor,\n\t\t\t\t\tradius: rect.height / 8,\n\t\t\t\t\toffset,\n\t\t\t\t\tshadow\n\t\t\t\t});\n\t\t\t\t_inlineRect(this._grid, ctx, caption, new Rect(left, top, width, height), col, row, {\n\t\t\t\t\toffset,\n\t\t\t\t\tcolor,\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\ttestFontLoad(font, value, context) {\n\t\t\treturn testFontLoad(font, value, context, this._grid);\n\t\t}\n\t}\n\n\tmodule.exports = GridCanvasHelper;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./ListGrid.js\":\n/*!*********************!*\\\n  !*** ./ListGrid.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\n{\n\tconst { isDef, isPromise, then, obj: { isObject } } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\tconst GridCanvasHelper = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\tconst columns = __webpack_require__(/*! ./columns */ \"./columns.js\");\n\tconst { BaseStyle } = columns.style;\n\tconst headerType = __webpack_require__(/*! ./header/type */ \"./header/type.js\");\n\tconst { BaseStyle: HeaderBaseStyle } = __webpack_require__(/*! ./header/style */ \"./header/style.js\");\n\tconst DrawGrid = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\tconst { DataSource, CachedDataSource } = __webpack_require__(/*! ./data */ \"./data.js\");\n\tconst themes = __webpack_require__(/*! ./themes */ \"./themes.js\");\n\tconst icons = __webpack_require__(/*! ./internal/icons */ \"./internal/icons.js\");\n\tconst MessageHandler = __webpack_require__(/*! ./columns/message/MessageHandler */ \"./columns/message/MessageHandler.js\");\n\tconst EVENT_TYPE = __webpack_require__(/*! ./list-grid/EVENT_TYPE */ \"./list-grid/EVENT_TYPE.js\");\n\n\t//protected symbol\n\tconst { PROTECTED_SYMBOL: _ } = __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tlet headerId = 0;\n\t//private methods\n\tfunction _getHeaderCellRange(grid, col, row) {\n\t\treturn grid[_].headerMap.getHeaderCellRange(col, row);\n\t}\n\tfunction _updateRect(grid, col, row, context) {\n\t\tconst rect = context.getRect();\n\t\tconst {\n\t\t\tstartCol,\n\t\t\tendCol,\n\t\t\tstartRow,\n\t\t\tendRow\n\t\t} = _getHeaderCellRange(grid, col, row);\n\t\tfor (let c = col - 1; c >= startCol; c--) {\n\t\t\trect.left -= grid.getColWidth(c);\n\t\t}\n\t\tfor (let c = col + 1; c <= endCol; c++) {\n\t\t\trect.right += grid.getColWidth(c);\n\t\t}\n\t\tfor (let r = row - 1; r >= startRow; r--) {\n\t\t\trect.top -= grid.getRowHeight(r);\n\t\t}\n\t\tfor (let r = row + 1; r <= endRow; r++) {\n\t\t\trect.bottom += grid.getRowHeight(r);\n\t\t}\n\t\tcontext.setRect(rect);\n\t}\n\tfunction _getCellValue(grid, col, row) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn grid[_].headerMap.getCell(col, row).caption;\n\t\t} else {\n\t\t\tlet { field } = grid[_].headerMap.columns[col];\n\t\t\tif (isObject(field) && field.get && field.set) {\n\t\t\t\tfield = field.get;\n\t\t\t}\n\t\t\treturn _getField(grid, field, row);\n\t\t}\n\t}\n\tfunction _setCellValue(grid, col, row, value) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\t// nop\n\t\t\treturn false;\n\t\t} else {\n\t\t\tlet { field } = grid[_].headerMap.columns[col];\n\t\t\tif (isObject(field) && field.get && field.set) {\n\t\t\t\tfield = field.set;\n\t\t\t}\n\t\t\tconst index = _getRowRecordIndex(grid, row);\n\t\t\tconst res = grid[_].dataSource.setField(index, field, value);\n\t\t\treturn isPromise(res) ? res : true;\n\t\t}\n\t}\n\tfunction _getCellMessage(grid, col, row) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst { message } = grid[_].headerMap.columns[col];\n\t\t\tif (!message) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn _getField(grid, message, row);\n\t\t}\n\t}\n\tfunction _getCellIcon0(grid, icon, row) {\n\t\tif (!isDef(icon)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (__webpack_provided_Array_dot_isArray(icon)) {\n\t\t\treturn icon.map(i => _getCellIcon0(grid, i, row));\n\t\t}\n\t\tif (!isObject(icon)) {\n\t\t\treturn _getField(grid, icon, row);\n\t\t}\n\t\tconst retIcon = {};\n\t\ticons.iconPropKeys.forEach(k => {\n\t\t\tif (icon[k]) {\n\t\t\t\tconst f = _getField(grid, icon[k], row);\n\t\t\t\tif (isDef(f)) {\n\t\t\t\t\tretIcon[k] = f;\n\t\t\t\t} else {\n\t\t\t\t\tif (!_hasField(grid, icon[k], row)) {\n\t\t\t\t\t\tretIcon[k] = icon[k];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn retIcon;\n\t}\n\tfunction _getCellIcon(grid, col, row) {\n\t\tconst { icon } = grid[_].headerMap.columns[col];\n\t\treturn _getCellIcon0(grid, icon, row);\n\t}\n\tfunction _getField(grid, field, row) {\n\t\tif (!isDef(field)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst index = _getRowRecordIndex(grid, row);\n\t\t\treturn grid[_].dataSource.getField(index, field);\n\t\t}\n\t}\n\tfunction _hasField(grid, field, row) {\n\t\tif (!isDef(field)) {\n\t\t\treturn false;\n\t\t}\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tconst index = _getRowRecordIndex(grid, row);\n\t\t\treturn grid[_].dataSource.hasField(index, field);\n\t\t}\n\t}\n\tfunction _onDrawValue(grid, cellValue, context, { col, row }, style, draw) {\n\t\tconst helper = grid[_].gridCanvasHelper;\n\n\t\tconst drawCellBg = ({ bgColor } = {}) => {\n\t\t\tconst fillOpt = {\n\t\t\t\tfillColor: bgColor\n\t\t\t};\n\t\t\t//cell\n\t\t\thelper.fillCellWithState(context, fillOpt);\n\t\t};\n\t\tconst drawCellBorder = () => {\n\n\t\t\tif (context.col === grid.frozenColCount - 1) {\n\t\t\t\t//\n\t\t\t\tconst rect = context.getRect();\n\t\t\t\thelper.drawWithClip(context, ctx => {\n\t\t\t\t\tconst borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor : helper.theme.frozenRowsBorderColor;\n\n\t\t\t\t\tconst borderColors = helper.toBoxArray(helper.getColor(borderColor, context.col, context.row, ctx));\n\t\t\t\t\tif (borderColors[1]) {\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.right - 2.5, rect.top);\n\t\t\t\t\t\tctx.lineTo(rect.right - 2.5, rect.bottom);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (context.row < grid[_].headerMap.rowCount) {\n\t\t\t\t_headerBorderWithState(grid, helper, context);\n\t\t\t} else {\n\t\t\t\thelper.borderWithState(context);\n\t\t\t}\n\t\t};\n\n\t\tconst drawCellBase = ({ bgColor } = {}) => {\n\t\t\tdrawCellBg({ bgColor });\n\t\t\tdrawCellBorder();\n\t\t};\n\t\tconst info = {\n\t\t\tgetRecord: () => grid.getRowRecord(row),\n\t\t\tgetIcon: () => _getCellIcon(grid, col, row),\n\t\t\tgetMessage: () => _getCellMessage(grid, col, row),\n\t\t\tmessageHandler: grid[_].messageHandler,\n\t\t\tstyle,\n\t\t\tdrawCellBase,\n\t\t\tdrawCellBg,\n\t\t\tdrawCellBorder\n\t\t};\n\n\t\treturn draw(cellValue, info, context, grid);\n\t}\n\tfunction _headerBorderWithState(grid, helper, context) {\n\t\tconst { col, row } = context;\n\t\tconst sel = grid.selection.select;\n\t\tif (sel.row >= grid[_].headerMap.rowCount) {\n\t\t\t//\n\t\t\thelper.borderWithState(context);\n\t\t\treturn;\n\t\t}\n\n\t\tconst { id } = grid[_].headerMap.getCell(col, row);\n\n\t\tconst rect = context.getRect();\n\t\tconst option = {};\n\n\t\tconst { id: selId } = grid[_].headerMap.getCell(sel.col, sel.row);\n\t\t//\n\t\tif (selId === id) {\n\t\t\toption.borderColor = helper.theme.hiliteBorderColor;\n\t\t\toption.lineWidth = 2;\n\t\t\thelper.border(context, option);\n\t\t} else {\n\t\t\toption.lineWidth = 1;\n\t\t\t// header color\n\t\t\tconst isFrozenCell = grid.isFrozenCell(col, row);\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\toption.borderColor = helper.theme.frozenRowsBorderColor;\n\t\t\t}\n\t\t\thelper.border(context, option);\n\n\t\t\t//\n\t\t\tif (col > 0 && grid[_].headerMap.getCell(col - 1, row).id === selId) {\n\t\t\t\t//\n\t\t\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\t\t\tconst borderColors = helper.toBoxArray(helper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx));\n\t\t\t\t\tif (borderColors[1]) {\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (row > 0 && grid[_].headerMap.getCell(col, row - 1).id === selId) {\n\t\t\t\t//\n\t\t\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\t\t\tconst borderColors = helper.toBoxArray(helper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx));\n\t\t\t\t\tif (borderColors[0]) {\n\t\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tfunction _refreshHeader(grid) {\n\t\tif (grid[_].headerEvents) {\n\t\t\tgrid[_].headerEvents.forEach(id => grid.unlisten(id));\n\t\t}\n\t\tgrid[_].headerMap = new HeaderMap(grid[_].header);\n\t\tgrid[_].headerEvents = [];\n\t\tgrid[_].headerMap.headerObjects.forEach(cell => {\n\t\t\tconst ids = cell.headerType.bindGridEvent(grid);\n\t\t\tgrid[_].headerEvents.push(...ids);\n\t\t\tif (cell.style) {\n\t\t\t\tif (cell.style instanceof HeaderBaseStyle) {\n\t\t\t\t\tconst id = cell.style.listen(HeaderBaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\n\t\t\t\t\t\tgrid.invalidate();\n\t\t\t\t\t});\n\t\t\t\t\tgrid[_].headerEvents.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tgrid[_].headerMap.columns.forEach((col, index) => {\n\t\t\tif (col.action) {\n\t\t\t\tconst ids = col.action.bindGridEvent(grid, index, {\n\t\t\t\t\tisTarget(col, row) {\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgrid[_].headerEvents.push(...ids);\n\t\t\t}\n\t\t\tif (col.columnType) {\n\t\t\t\tconst ids = col.columnType.bindGridEvent(grid, index, {\n\t\t\t\t\tisTarget(col, row) {\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgrid[_].headerEvents.push(...ids);\n\t\t\t}\n\t\t\tif (col.style) {\n\t\t\t\tif (col.style instanceof BaseStyle) {\n\t\t\t\t\tconst id = col.style.listen(columns.style.EVENT_TYPE.CHANGE_STYLE, () => {\n\t\t\t\t\t\tgrid.invalidate();\n\t\t\t\t\t});\n\t\t\t\t\tgrid[_].headerEvents.push(id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tgrid.colCount = grid[_].headerMap.columns.length;\n\t\t_refreshRowCount(grid);\n\t\tgrid.frozenRowCount = grid[_].headerMap.rowCount;\n\t\tfor (let col = 0; col < grid[_].headerMap.columns.length; col++) {\n\t\t\tconst column = grid[_].headerMap.columns[col];\n\t\t\tconst { width, minWidth, maxWidth } = column;\n\t\t\tif (width && (width > 0 || typeof width === 'string')) {\n\t\t\t\tgrid.setColWidth(col, width);\n\t\t\t}\n\t\t\tif (minWidth && (minWidth > 0 || typeof minWidth === 'string')) {\n\t\t\t\tgrid.setMinColWidth(col, minWidth);\n\t\t\t}\n\t\t\tif (maxWidth && (maxWidth > 0 || typeof maxWidth === 'string')) {\n\t\t\t\tgrid.setMaxColWidth(col, maxWidth);\n\t\t\t}\n\t\t}\n\t\tconst isArrayHeaderRowHeight = __webpack_provided_Array_dot_isArray(grid[_].headerRowHeight);\n\t\tfor (let row = 0; row < grid[_].headerMap.rowCount; row++) {\n\t\t\tconst height = isArrayHeaderRowHeight ? grid[_].headerRowHeight[row] : grid[_].headerRowHeight;\n\t\t\tif (height && height > 0) {\n\t\t\t\tgrid.setRowHeight(row, height);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _refreshRowCount(grid) {\n\t\tgrid.rowCount = grid[_].dataSource.length + grid[_].headerMap.rowCount;\n\t}\n\tfunction _tryWithUpdateDataSource(grid, fn) {\n\t\tif (grid[_].dataSourceEventIds) {\n\t\t\tgrid[_].dataSourceEventIds.forEach(id => grid[_].handler.off(id));\n\t\t}\n\n\t\tfn(grid);\n\n\t\tgrid[_].dataSourceEventIds = [grid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\n\t\t\t_refreshRowCount(grid);\n\t\t\tgrid.invalidate();\n\t\t}), grid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\n\t\t\tgrid.invalidate();\n\t\t})];\n\t}\n\tfunction _setRecords(grid, records = []) {\n\t\t_tryWithUpdateDataSource(grid, () => {\n\t\t\tgrid[_].records = records;\n\t\t\tgrid[_].dataSource = CachedDataSource.ofArray(grid[_].records);\n\t\t});\n\t}\n\tfunction _setDataSource(grid, dataSource) {\n\t\t_tryWithUpdateDataSource(grid, () => {\n\t\t\tif (dataSource) {\n\t\t\t\tif (dataSource instanceof DataSource) {\n\t\t\t\t\tgrid[_].dataSource = dataSource;\n\t\t\t\t} else {\n\t\t\t\t\tgrid[_].dataSource = new CachedDataSource(dataSource);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tgrid[_].dataSource = DataSource.EMPTY;\n\t\t\t}\n\t\t\tgrid[_].records = null;\n\t\t});\n\t}\n\n\tfunction _getRowRecordIndex(grid, row) {\n\t\tif (row < grid[_].headerMap.rowCount) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn row - grid[_].headerMap.rowCount;\n\t\t}\n\t}\n\t//end private methods\n\t//\n\t//\n\t//\n\n\tclass HeaderMap {\n\t\tconstructor(header) {\n\t\t\tthis._columns = [];\n\t\t\tthis._headerCells = [];\n\t\t\tthis._headerObjects = [];\n\n\t\t\tthis._addHeaders(0, header, []);\n\t\t\tthis._setupHeaderType();\n\t\t}\n\t\tget columns() {\n\t\t\treturn this._columns;\n\t\t}\n\t\tget rowCount() {\n\t\t\treturn this._headerCells.length;\n\t\t}\n\t\tget headerObjects() {\n\t\t\treturn this._headerObjects;\n\t\t}\n\t\tgetCell(col, row) {\n\t\t\treturn this._headerCells[row][col];\n\t\t}\n\t\tgetHeaderCellRangeById(id) {\n\t\t\tfor (let r = 0; r < this.rowCount; r++) {\n\t\t\t\tfor (let c = 0; c < this.columns.length; c++) {\n\t\t\t\t\tif (id === this.getCell(c, r).id) {\n\t\t\t\t\t\treturn this.getHeaderCellRange(c, r);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\tgetHeaderCellRange(col, row) {\n\t\t\tconst result = {\n\t\t\t\tstartCol: col,\n\t\t\t\tstartRow: row,\n\t\t\t\tendCol: col,\n\t\t\t\tendRow: row,\n\t\t\t\tisCellInRange(col, row) {\n\t\t\t\t\treturn this.startCol <= col && col <= this.endCol && this.startRow <= row && row <= this.endRow;\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst { id } = this.getCell(col, row);\n\t\t\tfor (let c = col - 1; c >= 0; c--) {\n\t\t\t\tif (id !== this.getCell(c, row).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.startCol = c;\n\t\t\t}\n\t\t\tfor (let c = col + 1; c < this.columns.length; c++) {\n\t\t\t\tif (id !== this.getCell(c, row).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.endCol = c;\n\t\t\t}\n\t\t\tfor (let r = row - 1; r >= 0; r--) {\n\t\t\t\tif (id !== this.getCell(col, r).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.startRow = r;\n\t\t\t}\n\t\t\tfor (let r = row + 1; r < this.rowCount; r++) {\n\t\t\t\tif (id !== this.getCell(col, r).id) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.endRow = r;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\t_addHeaders(row, header, roots) {\n\t\t\tconst rowCells = this._headerCells[row] || this._newRow(row);\n\t\t\theader.forEach(hd => {\n\t\t\t\tconst col = this._columns.length;\n\t\t\t\tconst cell = {\n\t\t\t\t\tid: headerId++,\n\t\t\t\t\tcaption: hd.caption,\n\t\t\t\t\tstyle: hd.headerStyle,\n\t\t\t\t\tsort: hd.sort\n\t\t\t\t};\n\t\t\t\tthis._headerObjects.push(cell);\n\t\t\t\trowCells[col] = cell;\n\t\t\t\tfor (let r = row - 1; r >= 0; r--) {\n\t\t\t\t\tthis._headerCells[r][col] = roots[r];\n\t\t\t\t}\n\t\t\t\tif (hd.columns) {\n\t\t\t\t\tthis._addHeaders(row + 1, hd.columns, [...roots, cell]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._columns.push({\n\t\t\t\t\t\twidth: hd.width,\n\t\t\t\t\t\tminWidth: hd.minWidth,\n\t\t\t\t\t\tmaxWidth: hd.maxWidth,\n\t\t\t\t\t\tfield: hd.field,\n\t\t\t\t\t\ticon: hd.icon,\n\t\t\t\t\t\tmessage: hd.message,\n\t\t\t\t\t\tcolumnType: columns.type.of(hd.columnType),\n\t\t\t\t\t\taction: columns.action.of(hd.action),\n\t\t\t\t\t\tstyle: hd.style,\n\t\t\t\t\t\tdefine: hd\n\t\t\t\t\t});\n\t\t\t\t\tfor (let r = row + 1; r < this._headerCells.length; r++) {\n\t\t\t\t\t\tthis._headerCells[r][col] = cell;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t_setupHeaderType() {\n\t\t\tthis._headerObjects.forEach(cell => {\n\t\t\t\tcell.range = this.getHeaderCellRangeById(cell.id);\n\t\t\t\tcell.headerType = headerType.create(cell);\n\t\t\t});\n\t\t}\n\t\t_newRow(row) {\n\t\t\tconst newRow = this._headerCells[row] = [];\n\t\t\tif (!this._columns.length) {\n\t\t\t\treturn newRow;\n\t\t\t}\n\t\t\tconst prev = this._headerCells[row - 1];\n\t\t\tfor (let col = 0; col < prev.length; col++) {\n\t\t\t\tnewRow[col] = prev[col];\n\t\t\t}\n\t\t\treturn newRow;\n\t\t}\n\t}\n\n\tfunction adjustListGridOption(options) {\n\t\tif (options) {\n\t\t\tdelete options.frozenRowCount;\n\t\t\tdelete options.colCount;\n\t\t\tdelete options.rowCount;\n\t\t}\n\t\treturn options;\n\t}\n\n\t/**\r\n  * ListGrid\r\n  * @classdesc cheetahGrid.ListGrid\r\n  * @extends cheetahGrid.core.DrawGrid\r\n  * @memberof cheetahGrid\r\n  */\n\tclass ListGrid extends DrawGrid {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\t/**\r\n   * constructor\r\n   *\r\n   * <pre>\r\n   * Constructor options\r\n   * -----\r\n   * header: see header property\r\n   * records {array}: records data\r\n   * dataSource {DataSource}: records data source\r\n   * frozenColCount {number}: default 0\r\n   * defaultRowHeight {number}: default grid row height. default 40\r\n   * defaultColWidth {number}: default grid col width. default 80\r\n   * borderColor: border color\r\n   * parentElement {Element}: canvas parentElement\r\n   * theme {object}: theme\r\n   * -----\r\n   * </pre>\r\n   *\r\n   * @constructor\r\n   * @param  {Object} options Constructor options\r\n   */\n\t\tconstructor(options = {}) {\n\t\t\tsuper(adjustListGridOption(options));\n\t\t\tthis[_].header = options.header || [];\n\t\t\tthis[_].headerRowHeight = options.headerRowHeight || [];\n\t\t\tif (options.dataSource) {\n\t\t\t\t_setDataSource(this, options.dataSource);\n\t\t\t} else {\n\t\t\t\t_setRecords(this, options.records);\n\t\t\t}\n\t\t\t_refreshHeader(this);\n\t\t\tthis[_].sortState = {\n\t\t\t\tcol: -1,\n\t\t\t\torder: undefined\n\t\t\t};\n\t\t\tthis[_].gridCanvasHelper = new GridCanvasHelper(this);\n\t\t\tthis[_].theme = themes.of(options.theme);\n\t\t\tthis[_].messageHandler = new MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\n\t\t\tthis.invalidate();\n\t\t\tthis[_].handler.on(window, 'resize', () => {\n\t\t\t\tthis.updateSize();\n\t\t\t\tthis.updateScroll();\n\t\t\t\tthis.invalidate();\n\t\t\t});\n\t\t}\n\t\tdispose() {\n\t\t\tthis[_].messageHandler.dispose();\n\t\t\tsuper.dispose();\n\t\t}\n\t\t/**\r\n   * header define\r\n   * @type {Array}\r\n   */\n\t\tget header() {\n\t\t\treturn this[_].header;\n\t\t}\n\t\t/**\r\n   * header define\r\n   * <pre>\r\n   * column options\r\n   * -----\r\n   * caption: header caption\r\n   * field: field name\r\n   * width: column width\r\n   * minWidth: column min width\r\n   * maxWidth: column max width\r\n   * icon: icon name\r\n   * message: message key name\r\n   * columnType: ColumnType\r\n   * action: ColumnAction\r\n   * style: ColumnStyle\r\n   * sort: define sort setting\r\n   * -----\r\n   *\r\n   * multiline header\r\n   * -----\r\n   * caption: header caption\r\n   * columns: columns define\r\n   * -----\r\n   * </pre>\r\n   *\r\n   * @type {Array}\r\n   */\n\t\tset header(header) {\n\t\t\tthis[_].header = header;\n\t\t\t_refreshHeader(this);\n\t\t}\n\t\tget records() {\n\t\t\treturn this[_].records;\n\t\t}\n\t\tset records(records) {\n\t\t\t_setRecords(this, records);\n\t\t\t_refreshRowCount(this);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tget dataSource() {\n\t\t\treturn this[_].dataSource;\n\t\t}\n\t\tset dataSource(dataSource) {\n\t\t\t_setDataSource(this, dataSource);\n\t\t\t_refreshRowCount(this);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tget theme() {\n\t\t\treturn this[_].theme;\n\t\t}\n\t\tset theme(theme) {\n\t\t\tthis[_].theme = themes.of(theme);\n\t\t\tthis.invalidate();\n\t\t}\n\t\tget font() {\n\t\t\treturn super.font || this[_].gridCanvasHelper.theme.font;\n\t\t}\n\t\tset font(font) {\n\t\t\tsuper.font = font;\n\t\t}\n\t\tget underlayBackgroundColor() {\n\t\t\treturn super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\n\t\t}\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\n\t\t\tsuper.underlayBackgroundColor = underlayBackgroundColor;\n\t\t}\n\t\tget sortState() {\n\t\t\treturn this[_].sortState;\n\t\t}\n\t\tset sortState(sortState) {\n\t\t\tthis[_].sortState = sortState;\n\t\t}\n\t\tgetField(col) {\n\t\t\treturn this[_].headerMap.columns[col].field;\n\t\t}\n\t\tgetRowRecord(row) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\treturn undefined;\n\t\t\t} else {\n\t\t\t\treturn this[_].dataSource.get(_getRowRecordIndex(this, row));\n\t\t\t}\n\t\t}\n\t\tgetGridCanvasHelper() {\n\t\t\treturn this[_].gridCanvasHelper;\n\t\t}\n\t\tgetCopyCellValue(col, row) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { startCol, startRow } = _getHeaderCellRange(this, col, row);\n\t\t\t\tif (startCol !== col || startRow !== row) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _getCellValue(this, col, row);\n\t\t}\n\t\tonDrawCell(col, row, context) {\n\t\t\tconst column = this[_].headerMap.columns[col];\n\n\t\t\tlet draw;\n\t\t\tlet style;\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst hd = this[_].headerMap.getCell(col, row);\n\t\t\t\tdraw = hd.headerType.onDrawCell;\n\t\t\t\t({ style } = hd);\n\t\t\t\t_updateRect(this, col, row, context);\n\t\t\t} else {\n\t\t\t\tdraw = column.columnType.onDrawCell;\n\t\t\t\t({ style } = column);\n\t\t\t}\n\t\t\tconst cellValue = _getCellValue(this, col, row);\n\t\t\treturn _onDrawValue(this, cellValue, context, { col, row }, style, draw);\n\t\t}\n\t\tdoGetCellValue(col, row, valueCallback) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\t// nop\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tconst value = _getCellValue(this, col, row);\n\t\t\t\tif (isPromise(value)) {\n\t\t\t\t\t//\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvalueCallback(value);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tdoChangeValue(col, row, changeValueCallback) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\t// nop\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tconst before = _getCellValue(this, col, row);\n\t\t\t\tif (isPromise(before)) {\n\t\t\t\t\t//\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst after = changeValueCallback(before);\n\t\t\t\tif (after === undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn then(_setCellValue(this, col, row, after), ret => {\n\t\t\t\t\tif (ret) {\n\t\t\t\t\t\tconst { field } = this[_].headerMap.columns[col];\n\t\t\t\t\t\tconst self = this;\n\t\t\t\t\t\tthis.fireListeners(EVENT_TYPE.CHANGED_VALUE, {\n\t\t\t\t\t\t\tcol,\n\t\t\t\t\t\t\trow,\n\t\t\t\t\t\t\tget record() {\n\t\t\t\t\t\t\t\treturn self.getRowRecord(row);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfield,\n\t\t\t\t\t\t\tvalue: after\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn ret;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tbindEventsInternal() {\n\t\t\tthis.listen(EVENT_TYPE.SELECTED_CELL, e => {\n\t\t\t\tif (e.row < this[_].headerMap.rowCount) {\n\t\t\t\t\tconst { startCol, endCol, startRow, endRow } = _getHeaderCellRange(this, e.col, e.row);\n\t\t\t\t\tif (startCol !== endCol || startRow !== endRow) {\n\t\t\t\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tgetMoveLeftColByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { startCol } = _getHeaderCellRange(this, col, row);\n\t\t\t\tcol = startCol;\n\t\t\t}\n\t\t\treturn super.getMoveLeftColByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetMoveRightColByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { endCol } = _getHeaderCellRange(this, col, row);\n\t\t\t\tcol = endCol;\n\t\t\t}\n\t\t\treturn super.getMoveRightColByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetMoveUpRowByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { startRow } = _getHeaderCellRange(this, col, row);\n\t\t\t\trow = startRow;\n\t\t\t}\n\t\t\treturn super.getMoveUpRowByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetMoveDownRowByKeyDownInternal({ col, row }) {\n\t\t\tif (row < this[_].headerMap.rowCount) {\n\t\t\t\tconst { endRow } = _getHeaderCellRange(this, col, row);\n\t\t\t\trow = endRow;\n\t\t\t}\n\t\t\treturn super.getMoveDownRowByKeyDownInternal({ col, row });\n\t\t}\n\t\tgetOffsetInvalidateCells() {\n\t\t\treturn 1;\n\t\t}\n\t\tgetColumnIndexByField(field) {\n\t\t\tfor (const columnIndex in this[_].headerMap.columns) {\n\t\t\t\tif (this[_].headerMap.columns[columnIndex].field === field) {\n\t\t\t\t\treturn columnIndex - 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tfocusGridCell(field, index) {\n\t\t\tconst {\n\t\t\t\tstart: { col: startCol, row: startRow },\n\t\t\t\tend: { col: endCol, row: endRow }\n\t\t\t} = this.selection.range;\n\n\t\t\tconst newCol = this.getColumnIndexByField(field);\n\t\t\tconst newRow = index + this[_].headerMap.rowCount;\n\t\t\tthis.focusCell(newCol, newRow);\n\t\t\tthis.selection.select = {\n\t\t\t\tcol: newCol,\n\t\t\t\trow: newRow\n\t\t\t};\n\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\n\t\t\tthis.invalidateCell(newCol, newRow);\n\t\t}\n\t\tmakeVisibleGridCell(field, index) {\n\t\t\tthis.makeVisibleCell(this.getColumnIndexByField(field), index + this[_].headerMap.rowCount);\n\t\t}\n\t}\n\tmodule.exports = ListGrid;\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns.js\":\n/*!********************!*\\\n  !*** ./columns.js ***!\n  \\********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst action = __webpack_require__(/*! ./columns/action */ \"./columns/action.js\");\n\tconst type = __webpack_require__(/*! ./columns/type */ \"./columns/type.js\");\n\tconst style = __webpack_require__(/*! ./columns/style */ \"./columns/style.js\");\n\n\t/**\r\n  * columns\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\taction,\n\t\ttype,\n\t\tstyle\n\t};\n}\n\n/***/ }),\n\n/***/ \"./columns/action.js\":\n/*!***************************!*\\\n  !*** ./columns/action.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseAction = __webpack_require__(/*! ./action/BaseAction */ \"./columns/action/BaseAction.js\");\n\tconst Action = __webpack_require__(/*! ./action/Action */ \"./columns/action/Action.js\");\n\tconst Editor = __webpack_require__(/*! ./action/Editor */ \"./columns/action/Editor.js\");\n\tconst CheckEditor = __webpack_require__(/*! ./action/CheckEditor */ \"./columns/action/CheckEditor.js\");\n\tconst ButtonAction = __webpack_require__(/*! ./action/ButtonAction */ \"./columns/action/ButtonAction.js\");\n\tconst SmallDialogInputEditor = __webpack_require__(/*! ./action/SmallDialogInputEditor */ \"./columns/action/SmallDialogInputEditor.js\");\n\tconst InlineInputEditor = __webpack_require__(/*! ./action/InlineInputEditor */ \"./columns/action/InlineInputEditor.js\");\n\tconst InlineMenuEditor = __webpack_require__(/*! ./action/InlineMenuEditor */ \"./columns/action/InlineMenuEditor.js\");\n\n\tclass ImmutableCheckEditor extends CheckEditor {\n\t\tget disabled() {\n\t\t\treturn this._disabled;\n\t\t}\n\t\tget readOnly() {\n\t\t\treturn this._readOnly;\n\t\t}\n\t}\n\tclass ImmutableInputEditor extends SmallDialogInputEditor {\n\t\tget disabled() {\n\t\t\treturn this._disabled;\n\t\t}\n\t\tget readOnly() {\n\t\t\treturn this._readOnly;\n\t\t}\n\t}\n\n\t/**\r\n  * column actions\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns.action\r\n  * @memberof cheetahGrid.columns\r\n  */\n\tconst action = {\n\t\tACTIONS: {\n\t\t\tCHECK: new ImmutableCheckEditor(),\n\t\t\tINPUT: new ImmutableInputEditor()\n\t\t},\n\t\tget BaseAction() {\n\t\t\treturn BaseAction;\n\t\t},\n\t\tget Editor() {\n\t\t\treturn Editor;\n\t\t},\n\t\tget Action() {\n\t\t\treturn Action;\n\t\t},\n\t\tget CheckEditor() {\n\t\t\treturn CheckEditor;\n\t\t},\n\t\tget ButtonAction() {\n\t\t\treturn ButtonAction;\n\t\t},\n\t\tget SmallDialogInputEditor() {\n\t\t\treturn SmallDialogInputEditor;\n\t\t},\n\t\tget InlineInputEditor() {\n\t\t\tconsole.warn('InlineInputEditor is an experiment stage');\n\t\t\treturn InlineInputEditor;\n\t\t},\n\t\tget InlineMenuEditor() {\n\t\t\treturn InlineMenuEditor;\n\t\t},\n\t\tof(columnAction) {\n\t\t\tif (!columnAction) {\n\t\t\t\treturn action.ACTIONS.DEFAULT;\n\t\t\t} else if (typeof columnAction === 'string') {\n\t\t\t\treturn action.ACTIONS[columnAction.toUpperCase()] || action.of(null);\n\t\t\t} else {\n\t\t\t\treturn columnAction;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = action;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/Action.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Action.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst { bindCellClickAction, bindCellKeyAction } = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\n\tconst BaseAction = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\n\tclass Action extends BaseAction {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._action = option.action;\n\t\t}\n\t\tget action() {\n\t\t\treturn this._action;\n\t\t}\n\t\tset action(action) {\n\t\t\tthis._action = action;\n\t\t}\n\t\tclone() {\n\t\t\treturn new Action(this);\n\t\t}\n\t\tgetState(grid) {\n\t\t\treturn {};\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\tconst state = this.getState(grid);\n\t\t\tconst action = cell => {\n\t\t\t\tif (this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = grid.getRowRecord(cell.row);\n\t\t\t\tthis._action(record);\n\t\t\t};\n\n\t\t\treturn [...bindCellClickAction(grid, col, util, {\n\t\t\t\taction,\n\t\t\t\tmouseOver: e => {\n\t\t\t\t\tif (this.disabled) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tstate.mouseActiveCell = {\n\t\t\t\t\t\tcol: e.col,\n\t\t\t\t\t\trow: e.row\n\t\t\t\t\t};\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tmouseOut: e => {\n\t\t\t\t\tdelete state.mouseActiveCell;\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t}\n\t\t\t}), ...bindCellKeyAction(grid, col, util, {\n\t\t\t\taction\n\t\t\t})];\n\t\t}\n\t}\n\n\tmodule.exports = Action;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/BaseAction.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/BaseAction.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tclass BaseAction {\n\t\tconstructor(option = {}) {\n\t\t\tthis._disabled = option.disabled;\n\t\t}\n\t\tget disabled() {\n\t\t\treturn this._disabled;\n\t\t}\n\t\tset disabled(disabled) {\n\t\t\tthis._disabled = !!disabled;\n\t\t\tthis.onChangeDisabledInternal();\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseAction(this);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t\tonChangeDisabledInternal() {}\n\t}\n\tmodule.exports = BaseAction;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/BaseInputEditor.js\":\n/*!*******************************************!*\\\n  !*** ./columns/action/BaseInputEditor.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst Editor = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\tconst { EVENT_TYPE: {\n\t\t\tINPUT_CELL,\n\t\t\tEDITABLEINPUT_CELL,\n\t\t\tSELECTED_CELL,\n\t\t\tDBLCLICK_CELL,\n\t\t\tDBLTAP_CELL,\n\t\t\tKEYDOWN,\n\t\t\tMODIFY_STATUS_EDITABLEINPUT_CELL,\n\t\t\tSCROLL\n\t\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\n\tconst KEY_ENTER = 13;\n\tconst KEY_F2 = 113;\n\n\tclass BaseInputEditor extends Editor {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseInputEditor(this);\n\t\t}\n\t\tonInputCellInternal(grid, cell, inputValue) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonOpenCellInternal(grid, cell) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonChangeSelectCellInternal(grid, cell, selected) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonSetInputAttrsInternal(grid, cell, input) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tonGridScrollInternal(grid) {\n\t\t\tthrow new Error();\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\tconst open = cell => {\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.onOpenCellInternal(grid, cell);\n\t\t\t};\n\n\t\t\tconst input = (cell, value) => {\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.onInputCellInternal(grid, cell, value);\n\t\t\t};\n\t\t\treturn [grid.listen(INPUT_CELL, e => {\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinput({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t}, e.value);\n\t\t\t}), grid.listen(DBLCLICK_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topen({\n\t\t\t\t\tcol: cell.col,\n\t\t\t\t\trow: cell.row\n\t\t\t\t});\n\t\t\t}), grid.listen(DBLTAP_CELL, e => {\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topen({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t});\n\n\t\t\t\te.event.preventDefault();\n\t\t\t\te.event.stopPropagation();\n\t\t\t}), grid.listen(KEYDOWN, (keyCode, e) => {\n\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst sel = grid.selection.select;\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\topen({\n\t\t\t\t\tcol: sel.col,\n\t\t\t\t\trow: sel.row\n\t\t\t\t});\n\t\t\t}), grid.listen(SELECTED_CELL, e => {\n\t\t\t\tthis.onChangeSelectCellInternal(grid, { col: e.col, row: e.row }, e.selected);\n\t\t\t}), grid.listen(SCROLL, () => {\n\t\t\t\tthis.onGridScrollInternal(grid);\n\t\t\t}), grid.listen(EDITABLEINPUT_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}), grid.listen(MODIFY_STATUS_EDITABLEINPUT_CELL, cell => {\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.onSetInputAttrsInternal(grid, {\n\t\t\t\t\tcol: cell.col,\n\t\t\t\t\trow: cell.row\n\t\t\t\t}, cell.input);\n\t\t\t})];\n\t\t}\n\t}\n\n\tmodule.exports = BaseInputEditor;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/ButtonAction.js\":\n/*!****************************************!*\\\n  !*** ./columns/action/ButtonAction.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst Action = __webpack_require__(/*! ./Action */ \"./columns/action/Action.js\");\n\tconst { BUTTON_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\tclass ButtonAction extends Action {\n\t\tgetState(grid) {\n\t\t\tif (!grid[BUTTON_COLUMN_STATE_ID]) {\n\t\t\t\tsetReadonly(grid, BUTTON_COLUMN_STATE_ID, {});\n\t\t\t}\n\t\t\treturn grid[BUTTON_COLUMN_STATE_ID];\n\t\t}\n\t}\n\n\tmodule.exports = ButtonAction;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/CheckEditor.js\":\n/*!***************************************!*\\\n  !*** ./columns/action/CheckEditor.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { obj: { setReadonly }, isPromise } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst { bindCellClickAction, bindCellKeyAction } = __webpack_require__(/*! ./actionBind */ \"./columns/action/actionBind.js\");\n\tconst animate = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\n\tconst Editor = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\n\tconst { CHECK_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tconst KEY_ENTER = 13;\n\tconst KEY_SPACE = 32;\n\n\tfunction toggleValue(val) {\n\t\tif (typeof val === 'number') {\n\t\t\tif (val === 0) {\n\t\t\t\treturn 1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t} else if (typeof val === 'string') {\n\t\t\tif (val === 'false') {\n\t\t\t\treturn 'true';\n\t\t\t} else if (val === 'off') {\n\t\t\t\treturn 'on';\n\t\t\t} else if (val.match(/^0+$/)) {\n\t\t\t\treturn val.replace(/^(0*)0$/, '$11');\n\t\t\t} else if (val === 'true') {\n\t\t\t\treturn 'false';\n\t\t\t} else if (val === 'on') {\n\t\t\t\treturn 'off';\n\t\t\t} else if (val.match(/^0*1$/)) {\n\t\t\t\treturn val.replace(/^(0*)1$/, '$10');\n\t\t\t}\n\t\t}\n\t\treturn !val;\n\t}\n\n\tclass CheckEditor extends Editor {\n\t\tclone() {\n\t\t\treturn new CheckEditor(this);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\tif (!grid[CHECK_COLUMN_STATE_ID]) {\n\t\t\t\tsetReadonly(grid, CHECK_COLUMN_STATE_ID, {});\n\t\t\t}\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID];\n\n\t\t\tconst action = cell => {\n\t\t\t\tconst key = cell.col + ':' + cell.row;\n\t\t\t\tconst blockKey = key + '::block';\n\t\t\t\tif (this.readOnly || this.disabled || state[blockKey]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst ret = grid.doChangeValue(cell.col, cell.row, toggleValue);\n\t\t\t\tif (ret) {\n\n\t\t\t\t\tconst onChange = () => {\n\t\t\t\t\t\t// checkbox animation\n\t\t\t\t\t\tanimate(200, point => {\n\t\t\t\t\t\t\tif (point === 1) {\n\t\t\t\t\t\t\t\tdelete state[key];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstate[key] = {\n\t\t\t\t\t\t\t\t\telapsed: point\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tgrid.invalidateCell(cell.col, cell.row);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t\tif (isPromise(ret)) {\n\t\t\t\t\t\tstate[blockKey] = true;\n\t\t\t\t\t\tret.then(() => {\n\t\t\t\t\t\t\tdelete state[blockKey];\n\t\t\t\t\t\t\tonChange();\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonChange();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn [...bindCellClickAction(grid, col, util, {\n\t\t\t\taction,\n\t\t\t\tmouseOver: e => {\n\t\t\t\t\tif (this.disabled) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tstate.mouseActiveCell = {\n\t\t\t\t\t\tcol: e.col,\n\t\t\t\t\t\trow: e.row\n\t\t\t\t\t};\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tmouseOut: e => {\n\t\t\t\t\tdelete state.mouseActiveCell;\n\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\n\t\t\t\t}\n\t\t\t}), ...bindCellKeyAction(grid, col, util, {\n\t\t\t\taction: e => {\n\t\t\t\t\tconst selrange = grid.selection.range;\n\t\t\t\t\tconst col = grid.selection.select.col;\n\t\t\t\t\tfor (let row = selrange.start.row; row <= selrange.end.row; row++) {\n\t\t\t\t\t\tif (!util.isTarget(col, row)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\taction({\n\t\t\t\t\t\t\tcol,\n\t\t\t\t\t\t\trow\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tacceptKeys: [KEY_ENTER, KEY_SPACE]\n\t\t\t})];\n\t\t}\n\t}\n\n\tmodule.exports = CheckEditor;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/Editor.js\":\n/*!**********************************!*\\\n  !*** ./columns/action/Editor.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst BaseAction = __webpack_require__(/*! ./BaseAction */ \"./columns/action/BaseAction.js\");\n\tclass Editor extends BaseAction {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._readOnly = option.readOnly;\n\t\t}\n\t\tget readOnly() {\n\t\t\treturn this._readOnly;\n\t\t}\n\t\tset readOnly(readOnly) {\n\t\t\tthis._readOnly = !!readOnly;\n\t\t\tthis.onChangeReadOnlyInternal();\n\t\t}\n\t\tclone() {\n\t\t\treturn new Editor(this);\n\t\t}\n\t\tonChangeReadOnlyInternal() {}\n\t}\n\tmodule.exports = Editor;\n}\n\n/***/ }),\n\n/***/ \"./columns/action/InlineInputEditor.js\":\n/*!*********************************************!*\\\n  !*** ./columns/action/InlineInputEditor.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst BaseInputEditor = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\nconst InlineInputElement = __webpack_require__(/*! ./internal/InlineInputElement */ \"./columns/action/internal/InlineInputElement.js\");\nconst { INLINE_INPUT_EDITOR_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachInput(grid, cell, editor, value) {\n\tif (!grid[_]) {\n\t\tsetReadonly(grid, _, {});\n\t}\n\tif (!globalElement) {\n\t\tglobalElement = new InlineInputElement();\n\t}\n\tconst state = grid[_];\n\tif (!state.element) {\n\t\tstate.element = globalElement;\n\t\tbindGridCount++;\n\t\tgrid.addDisposable({\n\t\t\tdispose() {\n\t\t\t\tbindGridCount--;\n\t\t\t\tif (!bindGridCount) {\n\t\t\t\t\tglobalElement.dispose();\n\t\t\t\t\tglobalElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachInput(gridFocus) {\n\tif (globalElement) {\n\t\tglobalElement.detach(gridFocus);\n\t}\n}\nfunction doChangeValue(grid) {\n\tif (globalElement) {\n\t\tglobalElement.doChangeValue();\n\t}\n}\n\nclass InlineInputEditor extends BaseInputEditor {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._classList = option.classList;\n\t\tthis._type = option.type;\n\t}\n\tget classList() {\n\t\treturn this._classList && (__webpack_provided_Array_dot_isArray(this._classList) ? this._classList : [this._classList]);\n\t}\n\tset classList(classList) {\n\t\tthis._classList = classList;\n\t}\n\tget type() {\n\t\treturn this._type;\n\t}\n\tset type(type) {\n\t\tthis._type = type;\n\t}\n\tclone() {\n\t\treturn new InlineInputEditor(this);\n\t}\n\tonInputCellInternal(grid, cell, inputValue) {\n\t\tattachInput(grid, cell, this, inputValue);\n\t}\n\tonOpenCellInternal(grid, cell) {\n\t\tgrid.doGetCellValue(cell.col, cell.row, value => {\n\t\t\tattachInput(grid, cell, this, value);\n\t\t});\n\t}\n\tonChangeSelectCellInternal(grid, cell, selected) {\n\t\tdoChangeValue(grid);\n\t\tdetachInput();\n\t}\n\tonGridScrollInternal(grid) {\n\t\tdoChangeValue(grid);\n\t\tdetachInput(true);\n\t}\n\tonChangeDisabledInternal() {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonChangeReadOnlyInternal() {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonSetInputAttrsInternal(grid, cell, input) {\n\t\tInlineInputElement.setInputAttrs(this, grid, input);\n\t}\n}\n\nmodule.exports = InlineInputEditor;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/InlineMenuEditor.js\":\n/*!********************************************!*\\\n  !*** ./columns/action/InlineMenuEditor.js ***!\n  \\********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst { normalize } = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\nconst Editor = __webpack_require__(/*! ./Editor */ \"./columns/action/Editor.js\");\nconst { EVENT_TYPE: {\n\t\tSELECTED_CELL,\n\t\tCLICK_CELL,\n\t\tKEYDOWN,\n\t\tSCROLL,\n\t\tMOUSEOVER_CELL,\n\t\tMOUSEOUT_CELL,\n\t\tMOUSEMOVE_CELL\n\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\nconst InlineMenuElement = __webpack_require__(/*! ./internal/InlineMenuElement */ \"./columns/action/internal/InlineMenuElement.js\");\nconst { INLINE_MENU_EDITOR_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachMenu(grid, cell, editor, value) {\n\tif (!grid[_]) {\n\t\tsetReadonly(grid, _, {});\n\t}\n\tif (!globalElement) {\n\t\tglobalElement = new InlineMenuElement();\n\t}\n\tconst state = grid[_];\n\tif (!state.element) {\n\t\tstate.element = globalElement;\n\t\tbindGridCount++;\n\t\tgrid.addDisposable({\n\t\t\tdispose() {\n\t\t\t\tbindGridCount--;\n\t\t\t\tif (!bindGridCount) {\n\t\t\t\t\tglobalElement.dispose();\n\t\t\t\t\tglobalElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachMenu(gridFocus) {\n\tif (globalElement) {\n\t\tglobalElement.detach(gridFocus);\n\t}\n}\n\nconst KEY_ENTER = 13;\nconst KEY_F2 = 113;\n\nclass InlineMenuEditor extends Editor {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._classList = option.classList;\n\t\tthis._options = normalize(option.options);\n\t}\n\tdispose() {}\n\tget classList() {\n\t\treturn this._classList && (__webpack_provided_Array_dot_isArray(this._classList) ? this._classList : [this._classList]);\n\t}\n\tset classList(classList) {\n\t\tthis._classList = classList;\n\t}\n\tget options() {\n\t\treturn this._options;\n\t}\n\tset options(options) {\n\t\tthis._options = normalize(options);\n\t}\n\tclone() {\n\t\treturn new InlineMenuEditor(this);\n\t}\n\tonChangeDisabledInternal() {\n\t\t// cancel input\n\t\tdetachMenu(true);\n\t}\n\tonChangeReadOnlyInternal() {\n\t\t// cancel input\n\t\tdetachMenu(true);\n\t}\n\tbindGridEvent(grid, col, util) {\n\t\tconst open = cell => {\n\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.doGetCellValue(cell.col, cell.row, value => {\n\t\t\t\tattachMenu(grid, cell, this, value);\n\t\t\t});\n\t\t};\n\n\t\treturn [grid.listen(CLICK_CELL, cell => {\n\t\t\tif (!util.isTarget(cell.col, cell.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\topen({\n\t\t\t\tcol: cell.col,\n\t\t\t\trow: cell.row\n\t\t\t});\n\t\t}), grid.listen(KEYDOWN, (keyCode, e) => {\n\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst sel = grid.selection.select;\n\t\t\tif (!util.isTarget(sel.col, sel.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\topen({\n\t\t\t\tcol: sel.col,\n\t\t\t\trow: sel.row\n\t\t\t});\n\t\t}), grid.listen(SELECTED_CELL, e => {\n\t\t\tdetachMenu();\n\t\t}), grid.listen(SCROLL, () => {\n\t\t\tdetachMenu(true);\n\t\t}),\n\n\t\t// mouse move\n\t\tgrid.listen(MOUSEOVER_CELL, e => {\n\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t}), grid.listen(MOUSEMOVE_CELL, e => {\n\t\t\tif (this.readOnly || this.disabled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!grid.getElement().style.cursor) {\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t\t}\n\t\t}), grid.listen(MOUSEOUT_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = '';\n\t\t})];\n\t}\n}\n\nmodule.exports = InlineMenuEditor;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/SmallDialogInputEditor.js\":\n/*!**************************************************!*\\\n  !*** ./columns/action/SmallDialogInputEditor.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\nconst SmallDialogInputElement = __webpack_require__(/*! ./internal/SmallDialogInputElement */ \"./columns/action/internal/SmallDialogInputElement.js\");\nconst { SMALL_DIALOG_INPUT_EDITOR_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nlet globalElement = null;\nlet bindGridCount = 0;\nfunction attachInput(grid, cell, editor, value) {\n\tif (!grid[_]) {\n\t\tsetReadonly(grid, _, {});\n\t}\n\tif (!globalElement) {\n\t\tglobalElement = new SmallDialogInputElement();\n\t}\n\tconst state = grid[_];\n\tif (!state.element) {\n\t\tstate.element = globalElement;\n\t\tbindGridCount++;\n\t\tgrid.addDisposable({\n\t\t\tdispose() {\n\t\t\t\tbindGridCount--;\n\t\t\t\tif (!bindGridCount) {\n\t\t\t\t\tglobalElement.dispose();\n\t\t\t\t\tglobalElement = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\n}\nfunction detachInput(gridFocus) {\n\tif (globalElement) {\n\t\tglobalElement.detach(gridFocus);\n\t}\n}\nconst BaseInputEditor = __webpack_require__(/*! ./BaseInputEditor */ \"./columns/action/BaseInputEditor.js\");\nclass SmallDialogInputEditor extends BaseInputEditor {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._helperText = option.helperText;\n\t\tthis._inputValidator = option.inputValidator;\n\t\tthis._validator = option.validator;\n\t\tthis._classList = option.classList;\n\t\tthis._type = option.type;\n\t}\n\tdispose() {\n\t\tthis._inputDialogManager.dispose();\n\t\tthis._inputDialogManager = null;\n\t}\n\tget classList() {\n\t\treturn this._classList && (__webpack_provided_Array_dot_isArray(this._classList) ? this._classList : [this._classList]);\n\t}\n\tset classList(classList) {\n\t\tthis._classList = classList;\n\t}\n\tget type() {\n\t\treturn this._type;\n\t}\n\tset type(type) {\n\t\tthis._type = type;\n\t}\n\tget helperText() {\n\t\treturn this._helperText;\n\t}\n\tget inputValidator() {\n\t\treturn this._inputValidator;\n\t}\n\tget validator() {\n\t\treturn this._validator;\n\t}\n\tclone() {\n\t\treturn new SmallDialogInputEditor(this);\n\t}\n\tonInputCellInternal(grid, cell, inputValue) {\n\t\tattachInput(grid, cell, this, inputValue);\n\t}\n\tonOpenCellInternal(grid, cell) {\n\t\tgrid.doGetCellValue(cell.col, cell.row, value => {\n\t\t\tattachInput(grid, cell, this, value);\n\t\t});\n\t}\n\tonChangeSelectCellInternal(grid, cell, selected) {\n\t\t// cancel input\n\t\tdetachInput();\n\t}\n\tonGridScrollInternal(grid) {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonChangeDisabledInternal() {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonChangeReadOnlyInternal() {\n\t\t// cancel input\n\t\tdetachInput(true);\n\t}\n\tonSetInputAttrsInternal(grid, cell, input) {\n\t\tSmallDialogInputElement.setInputAttrs(this, grid, input);\n\t}\n}\n\nmodule.exports = SmallDialogInputEditor;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/actionBind.js\":\n/*!**************************************!*\\\n  !*** ./columns/action/actionBind.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tconst { isPromise, event: { cancel } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst { EVENT_TYPE: {\n\t\t\tCLICK_CELL,\n\t\t\tMOUSEOVER_CELL,\n\t\t\tMOUSEOUT_CELL,\n\t\t\tKEYDOWN\n\t\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\n\tconst KEY_ENTER = 13;\n\tfunction bindCellClickAction(grid, col, util, {\n\t\taction,\n\t\tmouseOver,\n\t\tmouseOut\n\t}) {\n\t\treturn [\n\t\t// click\n\t\tgrid.listen(CLICK_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\taction({\n\t\t\t\tcol: e.col,\n\t\t\t\trow: e.row\n\t\t\t});\n\t\t}),\n\t\t// mouse move\n\t\tgrid.listen(MOUSEOVER_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (mouseOver) {\n\t\t\t\tif (!mouseOver({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t})) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t}), grid.listen(MOUSEOUT_CELL, e => {\n\t\t\tif (!util.isTarget(e.col, e.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (mouseOut) {\n\t\t\t\tmouseOut({\n\t\t\t\t\tcol: e.col,\n\t\t\t\t\trow: e.row\n\t\t\t\t});\n\t\t\t}\n\t\t\tgrid.getElement().style.cursor = '';\n\t\t})];\n\t}\n\tfunction bindCellKeyAction(grid, col, util, { action, acceptKeys = [] }) {\n\t\tacceptKeys = [...acceptKeys, KEY_ENTER];\n\t\treturn [\n\t\t// enter key down\n\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\n\t\t\tif (acceptKeys.indexOf(keyCode) === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst sel = grid.selection.select;\n\t\t\tif (!util.isTarget(sel.col, sel.row)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (isPromise(grid.getRowRecord(sel.row))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\taction({\n\t\t\t\tcol: sel.col,\n\t\t\t\trow: sel.row\n\t\t\t});\n\t\t\tcancel(e);\n\t\t})];\n\t}\n\n\tmodule.exports = {\n\t\tbindCellClickAction,\n\t\tbindCellKeyAction\n\t};\n}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineInputElement.css\":\n/*!********************************************************!*\\\n  !*** ./columns/action/internal/InlineInputElement.css ***!\n  \\********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./InlineInputElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineInputElement.js\":\n/*!*******************************************************!*\\\n  !*** ./columns/action/internal/InlineInputElement.js ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst {\n\tevent: {\n\t\tgetKeyCode,\n\t\tcancel: cancelEvent\n\t}\n} = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement\n} = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\nconst KEY_ENTER = 13;\n\nconst CLASSNAME = 'cheetah-grid__inline-input';\n\nfunction createInputElement() {\n\t__webpack_require__(/*! ./InlineInputElement.css */ \"./columns/action/internal/InlineInputElement.css\");\n\treturn createElement('input', { classList: CLASSNAME });\n}\n\nfunction setInputAttrs(editor, grid, input) {\n\tconst { classList, type } = editor;\n\tif (classList) {\n\t\tinput.classList.add(...classList);\n\t}\n\tinput.type = type || '';\n}\n\nclass InlineInputElement {\n\tstatic setInputAttrs(...args) {\n\t\tsetInputAttrs(...args);\n\t}\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tthis._input = createInputElement();\n\t\tthis._bindInputEvents();\n\t}\n\tdispose() {\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._input = null;\n\t\tthis._beforePropEditor = null;\n\t}\n\tattach(grid, editor, col, row, value) {\n\t\tconst input = this._input;\n\t\tconst handler = this._handler;\n\n\t\tif (this._beforePropEditor) {\n\t\t\tconst { classList } = this._beforePropEditor;\n\t\t\tif (classList) {\n\t\t\t\tinput.classList.remove(...classList);\n\t\t\t}\n\t\t}\n\n\t\tinput.style.font = grid.font || '16px sans-serif';\n\n\t\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\t\tinput.style.top = rect.top.toFixed() + 'px';\n\t\tinput.style.left = rect.left.toFixed() + 'px';\n\t\tinput.style.width = rect.width.toFixed() + 'px';\n\t\tinput.style.height = rect.height.toFixed() + 'px';\n\t\telement.appendChild(input);\n\n\t\tsetInputAttrs(editor, grid, input);\n\t\tinput.value = value;\n\n\t\tthis._activeData = { grid, col, row, editor };\n\t\tthis._beforePropEditor = editor;\n\n\t\tconst focus = () => {\n\t\t\tinput.focus();\n\n\t\t\tconst end = input.value.length;\n\t\t\ttry {\n\t\t\t\tif (typeof input.selectionStart !== 'undefined') {\n\t\t\t\t\tinput.selectionStart = end;\n\t\t\t\t\tinput.selectionEnd = end;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t//ignore\n\t\t\t}\n\t\t\tif (document.selection) {\n\t\t\t\tconst range = input.createTextRange();\n\t\t\t\trange.collapse();\n\t\t\t\trange.moveEnd('character', end);\n\t\t\t\trange.moveStart('character', end);\n\t\t\t\trange.select();\n\t\t\t}\n\t\t};\n\t\thandler.tryWithOffEvents(input, 'blur', () => {\n\t\t\tfocus();\n\t\t});\n\t}\n\tdetach(gridFocus) {\n\t\tif (this._isActive()) {\n\t\t\tconst { grid, col, row } = this._activeData;\n\t\t\tconst input = this._input;\n\t\t\tthis._handler.tryWithOffEvents(input, 'blur', () => {\n\t\t\t\tinput.parentElement.removeChild(input);\n\t\t\t});\n\t\t\tgrid.invalidateCell(col, row);\n\t\t\tif (gridFocus) {\n\t\t\t\tgrid.focus();\n\t\t\t}\n\t\t}\n\t\tthis._activeData = null;\n\t}\n\tdoChangeValue() {\n\t\tif (!this._isActive()) {\n\t\t\treturn;\n\t\t}\n\t\tconst input = this._input;\n\t\tconst { value } = input;\n\t\tconst { grid, col, row } = this._activeData;\n\t\tgrid.doChangeValue(col, row, () => value);\n\t}\n\t_isActive() {\n\t\tconst input = this._input;\n\t\tif (!input || !input.parentElement) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._activeData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t_bindInputEvents() {\n\t\tconst handler = this._handler;\n\t\tconst input = this._input;\n\t\tconst stopPropagationOnly = e => e.stopPropagation(); // grid\n\t\thandler.on(input, 'click', stopPropagationOnly);\n\t\thandler.on(input, 'mousedown', stopPropagationOnly);\n\t\thandler.on(input, 'touchstart', stopPropagationOnly);\n\t\thandler.on(input, 'dblclick', stopPropagationOnly);\n\n\t\thandler.on(input, 'compositionstart', e => {\n\t\t\tinput.classList.add('composition');\n\t\t});\n\t\thandler.on(input, 'compositionend', e => {\n\t\t\tinput.classList.remove('composition');\n\t\t});\n\t\thandler.on(input, 'keydown', e => {\n\t\t\tif (input.classList.contains('composition')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (getKeyCode(e) === KEY_ENTER) {\n\t\t\t\tif (!this._isActive()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst { grid } = this._activeData;\n\n\t\t\t\tthis.doChangeValue();\n\t\t\t\tif (grid) {\n\t\t\t\t\tgrid.focus();\n\t\t\t\t}\n\t\t\t\tthis.detach();\n\t\t\t\tcancelEvent(e);\n\t\t\t}\n\t\t});\n\t\thandler.on(input, 'blur', e => {\n\t\t\tthis.doChangeValue();\n\t\t\tthis.detach();\n\t\t});\n\t}\n}\n\nmodule.exports = InlineInputElement;\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineMenuElement.css\":\n/*!*******************************************************!*\\\n  !*** ./columns/action/internal/InlineMenuElement.css ***!\n  \\*******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./InlineMenuElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/InlineMenuElement.js\":\n/*!******************************************************!*\\\n  !*** ./columns/action/internal/InlineMenuElement.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst {\n\tisDef,\n\tevent: {\n\t\tgetKeyCode,\n\t\tcancel: cancelEvent\n\t}\n} = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement,\n\tappendHtml,\n\tempty,\n\tdisableFocus,\n\tisFocusable,\n\tfindPrevSiblingFocusable,\n\tfindNextSiblingFocusable\n} = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst KEY_TAB = 9;\nconst KEY_ENTER = 13;\nconst KEY_UP = 38;\nconst KEY_DOWN = 40;\nconst KEY_ESC = 27;\n\nconst CLASSNAME = 'cheetah-grid__inline-menu';\nconst ITEM_CLASSNAME = CLASSNAME + '__menu-item';\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\nconst EMPTY_ITEM_CLASSNAME = ITEM_CLASSNAME + '--empty';\n\nfunction findItemParents(target) {\n\tlet el = target;\n\twhile (!el.classList.contains(ITEM_CLASSNAME)) {\n\t\tel = el.parentElement;\n\t\tif (!el || el.classList.contains(CLASSNAME)) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\treturn el;\n}\n\nfunction createMenuElement() {\n\t__webpack_require__(/*! ./InlineMenuElement.css */ \"./columns/action/internal/InlineMenuElement.css\");\n\treturn createElement('ul', { classList: CLASSNAME });\n}\nfunction attachElement(element, rect, menu) {\n\tmenu.style.top = rect.top.toFixed() + 'px';\n\tmenu.style.left = rect.left.toFixed() + 'px';\n\tmenu.style.width = rect.width.toFixed() + 'px';\n\tmenu.style['line-height'] = rect.height.toFixed() + 'px';\n\telement.appendChild(menu);\n}\n\nfunction optionToLi({ classList, caption, value, html }, index) {\n\tconst item = createElement('li', { classList: ITEM_CLASSNAME });\n\titem.tabIndex = 0;\n\titem.dataset.valueindex = index;\n\tif (classList) {\n\t\titem.classList.add(...(__webpack_provided_Array_dot_isArray(classList) ? classList : [classList]));\n\t}\n\n\tif (caption) {\n\t\tconst span = createElement('span', { text: caption });\n\t\titem.appendChild(span);\n\t} else if (html) {\n\t\tappendHtml(item, html);\n\t}\n\n\tif (value === '' || !isDef(value)) {\n\t\titem.classList.add(EMPTY_ITEM_CLASSNAME);\n\t}\n\n\treturn item;\n}\n\nfunction openMenu(grid, editor, col, row, value, menu) {\n\tconst { options, classList } = editor;\n\tmenu.classList.remove(SHOWN_CLASSNAME);\n\tmenu.classList.add(HIDDEN_CLASSNAME);\n\tempty(menu);\n\tmenu.style.font = grid.font || '16px sans-serif';\n\tlet emptyItemEl = null;\n\tlet valueItemEl = null;\n\n\toptions.forEach((option, i) => {\n\t\tconst item = optionToLi(option, i);\n\t\tmenu.appendChild(item);\n\t\tif (option.value === value) {\n\t\t\tvalueItemEl = item;\n\t\t\titem.dataset.select = true;\n\t\t}\n\t\tif (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\n\t\t\temptyItemEl = item;\n\t\t}\n\t});\n\tconst focusEl = valueItemEl || emptyItemEl || menu.children[0];\n\tif (classList) {\n\t\tmenu.classList.add(...classList);\n\t}\n\tconst children = Array.prototype.slice.call(menu.children, 0);\n\tconst focusIndex = children.indexOf(focusEl);\n\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\n\t// Cover the right line\n\trect.width++;\n\n\t// append for calculation\n\tattachElement(element, rect, menu);\n\n\t// Make the selection item at the middle\n\tlet offset = 0;\n\tlet allHeight = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst offsetHeight = children[i].offsetHeight;\n\t\tif (i < focusIndex) {\n\t\t\toffset += offsetHeight;\n\t\t}\n\t\tallHeight += offsetHeight;\n\t}\n\trect.offsetTop(-offset);\n\tmenu.style['transform-origin'] = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\n\tattachElement(element, rect, menu);\n\n\t// Control not to overflow the screen range\n\tconst menuClientRect = menu.getBoundingClientRect();\n\tconst scaleDiff = (allHeight - menuClientRect.height) / 2;\n\tconst orgMenuTop = menuClientRect.top - scaleDiff;\n\tlet menuTop = orgMenuTop;\n\tconst menuBottom = menuTop + allHeight;\n\tconst winBottom = window.innerHeight;\n\tconst winMargin = 20;\n\tif (menuBottom > winBottom - winMargin) {\n\t\tconst diff = menuBottom - winBottom + winMargin;\n\t\tmenuTop -= diff;\n\t}\n\tif (menuTop < 0 /*winTop*/ + winMargin) {\n\t\tmenuTop = winMargin;\n\t}\n\tif (menuTop !== orgMenuTop) {\n\t\trect.offsetTop(-(orgMenuTop - menuTop));\n\t\t// re update\n\t\tattachElement(element, rect, menu);\n\t}\n\n\tif (focusEl) {\n\t\tfocusEl.focus();\n\t}\n\tmenu.classList.remove(HIDDEN_CLASSNAME);\n\tmenu.classList.add(SHOWN_CLASSNAME);\n}\n\nfunction closeMenu(grid, col, row, menu) {\n\tmenu.classList.remove(SHOWN_CLASSNAME);\n\tmenu.classList.add(HIDDEN_CLASSNAME);\n\tdisableFocus(menu);\n}\n\nclass InlineMenuElement {\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tthis._menu = createMenuElement();\n\t\tthis._bindMenuEvents();\n\t}\n\tdispose() {\n\t\tconst menu = this._menu;\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._menu = null;\n\t\tthis._beforePropEditor = null;\n\t\tif (menu.parentElement) {\n\t\t\tmenu.parentElement.removeChild(menu);\n\t\t}\n\t}\n\tattach(grid, editor, col, row, value) {\n\t\tconst menu = this._menu;\n\n\t\tif (this._beforePropEditor) {\n\t\t\tconst { classList } = this._beforePropEditor;\n\t\t\tif (classList) {\n\t\t\t\tmenu.classList.remove(...classList);\n\t\t\t}\n\t\t}\n\n\t\topenMenu(grid, editor, col, row, value, menu);\n\t\tthis._activeData = { grid, col, row, editor };\n\t\tthis._beforePropEditor = editor;\n\t}\n\tdetach(gridFocus) {\n\t\tif (this._isActive()) {\n\t\t\tconst { grid, col, row } = this._activeData;\n\t\t\tconst menu = this._menu;\n\t\t\tcloseMenu(grid, col, row, menu);\n\n\t\t\tgrid.invalidateCell(col, row);\n\t\t\tif (gridFocus) {\n\t\t\t\tgrid.focus();\n\t\t\t}\n\t\t}\n\t\tthis._activeData = null;\n\t}\n\t_doChangeValue(valueindex) {\n\t\tif (!this._isActive()) {\n\t\t\treturn;\n\t\t}\n\t\tconst { grid, col, row, editor } = this._activeData;\n\t\tconst { value } = editor.options[valueindex];\n\t\tgrid.doChangeValue(col, row, () => value);\n\t}\n\t_isActive() {\n\t\tconst menu = this._menu;\n\t\tif (!menu || !menu.parentElement) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._activeData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t_bindMenuEvents() {\n\t\tconst handler = this._handler;\n\t\tconst menu = this._menu;\n\n\t\tconst stopPropagationOnly = e => e.stopPropagation(); // grid\n\n\t\thandler.on(menu, 'mousedown', stopPropagationOnly);\n\t\thandler.on(menu, 'touchstart', stopPropagationOnly);\n\t\thandler.on(menu, 'dblclick', stopPropagationOnly);\n\n\t\thandler.on(menu, 'click', e => {\n\t\t\te.stopPropagation();\n\t\t\tconst item = findItemParents(e.target);\n\t\t\tif (!item) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst valueindex = item.dataset.valueindex;\n\t\t\tthis._doChangeValue(item.dataset.valueindex);\n\t\t\tthis.detach(true);\n\t\t});\n\t\thandler.on(menu, 'keydown', e => {\n\t\t\tconst item = findItemParents(e.target);\n\t\t\tif (!item) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst keyCode = getKeyCode(e);\n\t\t\tif (keyCode === KEY_ENTER) {\n\t\t\t\tconst valueindex = item.dataset.valueindex;\n\t\t\t\tthis._doChangeValue(valueindex);\n\t\t\t\tthis.detach(true);\n\t\t\t\tcancelEvent(e);\n\t\t\t} else if (keyCode === KEY_ESC) {\n\t\t\t\tthis.detach(true);\n\t\t\t\tcancelEvent(e);\n\t\t\t} else if (keyCode === KEY_UP) {\n\t\t\t\tconst n = findPrevSiblingFocusable(item);\n\t\t\t\tif (n) {\n\t\t\t\t\tn.focus();\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t}\n\t\t\t} else if (keyCode === KEY_DOWN) {\n\t\t\t\tconst n = findNextSiblingFocusable(item);\n\t\t\t\tif (n) {\n\t\t\t\t\tn.focus();\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t}\n\t\t\t} else if (keyCode === KEY_TAB) {\n\t\t\t\tif (!e.shiftKey) {\n\t\t\t\t\tif (!findNextSiblingFocusable(item)) {\n\t\t\t\t\t\tlet n = menu.querySelector('.' + ITEM_CLASSNAME);\n\t\t\t\t\t\tif (!isFocusable(n)) {\n\t\t\t\t\t\t\tn = findNextSiblingFocusable(n);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (n) {\n\t\t\t\t\t\t\tn.focus();\n\t\t\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!findPrevSiblingFocusable(item)) {\n\t\t\t\t\t\tconst items = menu.querySelectorAll('.' + ITEM_CLASSNAME);\n\t\t\t\t\t\tlet n = items[items.length - 1];\n\t\t\t\t\t\tif (!isFocusable(n)) {\n\t\t\t\t\t\t\tn = findPrevSiblingFocusable(n);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (n) {\n\t\t\t\t\t\t\tn.focus();\n\t\t\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = InlineMenuElement;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/action/internal/SmallDialogInputElement.css\":\n/*!*************************************************************!*\\\n  !*** ./columns/action/internal/SmallDialogInputElement.css ***!\n  \\*************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./SmallDialogInputElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/action/internal/SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/action/internal/SmallDialogInputElement.js\":\n/*!************************************************************!*\\\n  !*** ./columns/action/internal/SmallDialogInputElement.js ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst {\n\tevent: {\n\t\tgetKeyCode,\n\t\tcancel: cancelEvent\n\t},\n\tthen\n} = __webpack_require__(/*! ../../../internal/utils */ \"./internal/utils.js\");\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement\n} = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = 'cheetah-grid__small-dialog-input';\nconst INPUT_CLASSNAME = CLASSNAME + '__input';\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\n\nconst KEY_ENTER = 13;\nconst KEY_ESC = 27;\n\nfunction _focus(input, handler) {\n\tconst focus = () => {\n\t\tinput.focus();\n\n\t\tconst end = input.value.length;\n\t\ttry {\n\t\t\tif (typeof input.selectionStart !== 'undefined') {\n\t\t\t\tinput.selectionStart = end;\n\t\t\t\tinput.selectionEnd = end;\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t//ignore\n\t\t}\n\t\tif (document.selection) {\n\t\t\tconst range = input.createTextRange();\n\t\t\trange.collapse();\n\t\t\trange.moveEnd('character', end);\n\t\t\trange.moveStart('character', end);\n\t\t\trange.select();\n\t\t}\n\t};\n\thandler.tryWithOffEvents(input, 'blur', () => {\n\t\tfocus();\n\t});\n}\n\nfunction createDialogElement() {\n\t__webpack_require__(/*! ./SmallDialogInputElement.css */ \"./columns/action/internal/SmallDialogInputElement.css\");\n\tconst element = createElement('div', { classList: [CLASSNAME, HIDDEN_CLASSNAME] });\n\tconst input = createElement('input', { classList: INPUT_CLASSNAME });\n\tinput.readonly = true;\n\tinput.tabIndex = -1;\n\telement.appendChild(input);\n\treturn element;\n}\n\nfunction bindProps(grid, dialog, input, editor) {\n\tconst { classList, helperText } = editor;\n\tif (classList) {\n\t\tdialog.classList.add(...classList);\n\t}\n\tif (helperText && typeof helperText !== 'function') {\n\t\tdialog.dataset.helperText = helperText;\n\t}\n\tsetInputAttrs(editor, grid, input);\n}\n\nfunction unbindProps(grid, dialog, input, editor) {\n\tconst { classList } = editor;\n\tif (classList) {\n\t\tdialog.classList.remove(...classList);\n\t}\n\tdelete dialog.dataset.helperText;\n\tinput.type = '';\n}\n\nfunction setInputAttrs(editor, grid, input) {\n\tconst { type } = editor;\n\tinput.type = type || '';\n}\n\nclass SmallDialogInputElement {\n\tstatic setInputAttrs(...args) {\n\t\tsetInputAttrs(...args);\n\t}\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tthis._dialog = createDialogElement();\n\t\tthis._input = this._dialog.querySelector('.' + INPUT_CLASSNAME);\n\t\tthis._bindDialogEvents();\n\t}\n\tdispose() {\n\t\tconst dialog = this._dialog;\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._dialog = null;\n\t\tthis._input = null;\n\t\tthis._beforePropEditor = null;\n\t\tif (dialog.parentElement) {\n\t\t\tdialog.parentElement.removeChild(dialog);\n\t\t}\n\t}\n\tattach(grid, editor, col, row, value) {\n\t\tconst handler = this._handler;\n\t\tconst dialog = this._dialog;\n\t\tconst input = this._input;\n\n\t\tif (this._beforePropEditor) {\n\t\t\tunbindProps(grid, dialog, input, this._beforePropEditor);\n\t\t}\n\n\t\tdelete dialog.dataset.errorMessage;\n\t\tdialog.classList.remove(SHOWN_CLASSNAME);\n\t\tdialog.classList.add(HIDDEN_CLASSNAME);\n\t\tinput.readonly = false;\n\t\tinput.tabIndex = 0;\n\t\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\t\tdialog.style.top = rect.top.toFixed() + 'px';\n\t\tdialog.style.left = rect.left.toFixed() + 'px';\n\t\tdialog.style.width = rect.width.toFixed() + 'px';\n\t\tinput.style.height = rect.height.toFixed() + 'px';\n\t\telement.appendChild(dialog);\n\n\t\tinput.value = value;\n\t\tinput.style.font = grid.font || '16px sans-serif';\n\t\tconst activeData = { grid, col, row, editor };\n\t\tthis._onInputValue(input, activeData);\n\t\t_focus(input, handler);\n\t\tdialog.classList.add(SHOWN_CLASSNAME);\n\t\tdialog.classList.remove(HIDDEN_CLASSNAME);\n\t\tinput.readonly = true;\n\n\t\tbindProps(grid, dialog, input, editor);\n\n\t\tthis._activeData = activeData;\n\t\tthis._beforePropEditor = editor;\n\t}\n\tdetach(gridFocus) {\n\t\tif (this._isActive()) {\n\t\t\tconst dialog = this._dialog;\n\t\t\tconst input = this._input;\n\n\t\t\tdialog.classList.remove(SHOWN_CLASSNAME);\n\t\t\tdialog.classList.add(HIDDEN_CLASSNAME);\n\t\t\tinput.readonly = false;\n\t\t\tinput.tabIndex = -1;\n\n\t\t\tconst { grid, col, row } = this._activeData;\n\n\t\t\tgrid.invalidateCell(col, row);\n\t\t\tif (gridFocus) {\n\t\t\t\tgrid.focus();\n\t\t\t}\n\t\t}\n\t\tthis._activeData = null;\n\t\tthis._beforeValue = null;\n\t}\n\t_doChangeValue() {\n\t\tif (!this._isActive()) {\n\t\t\treturn false;\n\t\t}\n\t\tconst input = this._input;\n\t\tconst { value } = input;\n\t\treturn then(this._validate(value), res => {\n\t\t\tif (res && value === input.value) {\n\t\t\t\tconst { grid, col, row } = this._activeData;\n\t\t\t\tgrid.doChangeValue(col, row, () => value);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\t_isActive() {\n\t\tconst dialog = this._dialog;\n\t\tif (!dialog || !dialog.parentElement) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._activeData) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t_bindDialogEvents() {\n\t\tconst handler = this._handler;\n\t\tconst dialog = this._dialog;\n\t\tconst input = this._input;\n\t\tconst stopPropagationOnly = e => e.stopPropagation(); // grid\n\t\thandler.on(dialog, 'click', stopPropagationOnly);\n\t\thandler.on(dialog, 'dblclick', stopPropagationOnly);\n\t\thandler.on(dialog, 'mousedown', stopPropagationOnly);\n\t\thandler.on(dialog, 'touchstart', stopPropagationOnly);\n\n\t\thandler.on(input, 'compositionstart', e => {\n\t\t\tinput.classList.add('composition');\n\t\t});\n\t\thandler.on(input, 'compositionend', e => {\n\t\t\tinput.classList.remove('composition');\n\t\t\tthis._onInputValue(input);\n\t\t});\n\t\tconst onKeyupAndPress = e => {\n\t\t\tif (input.classList.contains('composition')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._onInputValue(input);\n\t\t};\n\t\thandler.on(input, 'keyup', onKeyupAndPress);\n\t\thandler.on(input, 'keypress', onKeyupAndPress);\n\t\thandler.on(input, 'keydown', e => {\n\t\t\tif (input.classList.contains('composition')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst keyCode = getKeyCode(e);\n\t\t\tif (keyCode === KEY_ESC) {\n\t\t\t\tthis.detach(true);\n\t\t\t\tcancelEvent(e);\n\t\t\t} else if (keyCode === KEY_ENTER) {\n\t\t\t\tconst input = this._input;\n\t\t\t\tconst { value } = input;\n\t\t\t\tthen(this._doChangeValue(), r => {\n\t\t\t\t\tif (r && value === input.value) {\n\t\t\t\t\t\tthis.detach(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcancelEvent(e);\n\t\t\t} else {\n\t\t\t\tthis._onInputValue(input);\n\t\t\t}\n\t\t});\n\t}\n\t_onInputValue(input, activeData) {\n\t\tconst before = this._beforeValue;\n\t\tconst { value } = input;\n\t\tif (before !== value) {\n\t\t\tthis._onInputValueChange(value, before, activeData);\n\t\t}\n\t\tthis._beforeValue = value;\n\t}\n\t_onInputValueChange(after, before, activeData) {\n\t\tactiveData = activeData || this._activeData;\n\t\tconst dialog = this._dialog;\n\t\tconst { grid, col, row, editor } = activeData;\n\t\tif (typeof editor.helperText === 'function') {\n\t\t\tconst helperText = editor.helperText(after, { grid, col, row });\n\t\t\tif (helperText) {\n\t\t\t\tdialog.dataset.helperText = helperText;\n\t\t\t} else {\n\t\t\t\tdelete dialog.dataset.helperText;\n\t\t\t}\n\t\t}\n\t\tif ('errorMessage' in dialog.dataset) {\n\t\t\tthis._validate(after, true);\n\t\t}\n\t}\n\t_validate(value, inputOnly) {\n\t\tconst dialog = this._dialog;\n\t\tconst input = this._input;\n\t\tconst { grid, col, row, editor } = this._activeData;\n\t\tlet message = null;\n\t\tif (editor.inputValidator) {\n\t\t\tmessage = editor.inputValidator(value, { grid, col, row });\n\t\t}\n\t\treturn then(message, message => {\n\t\t\tif (!message && editor.validator && !inputOnly) {\n\t\t\t\tmessage = editor.validator(value, { grid, col, row });\n\t\t\t}\n\t\t\treturn then(message, message => {\n\t\t\t\tif (message && value === input.value) {\n\t\t\t\t\tdialog.dataset.errorMessage = message;\n\t\t\t\t} else {\n\t\t\t\t\tdelete dialog.dataset.errorMessage;\n\t\t\t\t}\n\t\t\t\treturn !message;\n\t\t\t});\n\t\t});\n\t}\n}\n\nmodule.exports = SmallDialogInputElement;\n\n/***/ }),\n\n/***/ \"./columns/message/BaseMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/BaseMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nclass BaseMessage {\n\tconstructor(grid) {\n\t\tthis._grid = grid;\n\t}\n\tdispose() {\n\t\tthis.detachMessageElement();\n\t\tif (this._messageElement) {\n\t\t\tthis._messageElement.dispose();\n\t\t}\n\t\tthis._messageElement = null;\n\t}\n\t_getMessageElement() {\n\t\treturn this._messageElement || (this._messageElement = this.createMessageElementInternal());\n\t}\n\tcreateMessageElementInternal() {}\n\tdrawCellMessageInternal(message, context, style, helper, info) {}\n\tattachMessageElement(col, row, message) {\n\t\tconst messageElement = this._getMessageElement();\n\t\tmessageElement.attach(this._grid, col, row, message);\n\t}\n\tmoveMessageElement(col, row) {\n\t\tconst messageElement = this._getMessageElement();\n\t\tmessageElement.move(this._grid, col, row);\n\t}\n\tdetachMessageElement() {\n\t\tconst messageElement = this._getMessageElement();\n\t\tmessageElement._detach();\n\t}\n\tdrawCellMessage(message, context, style, helper, info) {\n\t\tthis.drawCellMessageInternal(message, context, style, helper, info);\n\t}\n}\n\nmodule.exports = BaseMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/ErrorMessage.js\":\n/*!*****************************************!*\\\n  !*** ./columns/message/ErrorMessage.js ***!\n  \\*****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Rect = __webpack_require__(/*! ../../internal/Rect */ \"./internal/Rect.js\");\nconst BaseMessage = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\nconst ErrorMessageElement = __webpack_require__(/*! ./internal/ErrorMessageElement */ \"./columns/message/internal/ErrorMessageElement.js\");\n\nconst RED_A100 = '#ff8a80';\n// const RED_A400 = '#FF1744';\n\nclass ErrorMessage extends BaseMessage {\n\tcreateMessageElementInternal() {\n\t\treturn new ErrorMessageElement();\n\t}\n\tdrawCellMessageInternal(message, context, style, helper, info) {\n\t\tconst { bgColor } = style;\n\n\t\tconst { selected } = context.getSelectState();\n\n\t\tconst rect = context.getRect();\n\n\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\tif (!selected) {\n\t\t\t\t// draw box\n\t\t\t\tctx.fillStyle = RED_A100;\n\t\t\t\tconst boxRect = rect.copy();\n\t\t\t\tboxRect.left = boxRect.right - 24;\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\n\n\t\t\t\t// draw exclamation mark\n\t\t\t\tconst fillColor = bgColor;\n\t\t\t\tconst height = 20;\n\t\t\t\tconst width = height / 5;\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3), context, { fillColor });\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5), context, { fillColor });\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = ErrorMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/InfoMessage.js\":\n/*!****************************************!*\\\n  !*** ./columns/message/InfoMessage.js ***!\n  \\****************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst BaseMessage = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\nconst MessageElement = __webpack_require__(/*! ./internal/MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst Rect = __webpack_require__(/*! ../../internal/Rect */ \"./internal/Rect.js\");\n\nconst GREY_L2 = '#e0e0e0';\n// const GREY_L1 = '#bdbdbd';\n\nclass InfoMessage extends BaseMessage {\n\tcreateMessageElementInternal() {\n\t\treturn new MessageElement();\n\t}\n\tdrawCellMessageInternal(message, context, style, helper, info) {\n\t\tconst { bgColor } = style;\n\n\t\tconst { selected } = context.getSelectState();\n\n\t\tconst rect = context.getRect();\n\n\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\tif (!selected) {\n\t\t\t\t// draw box\n\t\t\t\tctx.fillStyle = GREY_L2;\n\t\t\t\tconst boxRect = rect.copy();\n\t\t\t\tboxRect.left = boxRect.right - 24;\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\n\n\t\t\t\t// draw i mark\n\t\t\t\tconst fillColor = bgColor;\n\t\t\t\tconst height = 20;\n\t\t\t\tconst width = height / 5;\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5), context, { fillColor });\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 2, width, height / 5 * 3), context, { fillColor });\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = InfoMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/MessageHandler.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/MessageHandler.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { isPromise } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst {\n\tSELECTED_CELL,\n\tSCROLL,\n\tCHANGED_VALUE\n} = __webpack_require__(/*! ../../list-grid/EVENT_TYPE */ \"./list-grid/EVENT_TYPE.js\");\nconst ErrorMessage = __webpack_require__(/*! ./ErrorMessage */ \"./columns/message/ErrorMessage.js\");\nconst WarningMessage = __webpack_require__(/*! ./WarningMessage */ \"./columns/message/WarningMessage.js\");\nconst InfoMessage = __webpack_require__(/*! ./InfoMessage */ \"./columns/message/InfoMessage.js\");\n\nclass MessageHandler {\n\tconstructor(grid, getMessage) {\n\t\tthis._grid = grid;\n\t\tthis._messageInstances = {};\n\t\tthis._bindGridEvent(grid, getMessage);\n\t}\n\tdispose() {\n\t\tconst messageInstances = this._messageInstances;\n\t\tfor (const k in messageInstances) {\n\t\t\tmessageInstances[k].dispose();\n\t\t}\n\t\tthis._messageInstances = null;\n\t}\n\tdrawCellMessage(message, context, style, helper, info) {\n\n\t\tif (!message || isPromise(message)) {\n\t\t\treturn;\n\t\t}\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\n\t\tinstance.drawCellMessage(message, context, style, helper, info);\n\t}\n\t_attach(col, row, message) {\n\t\tconst info = this._attachInfo;\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\n\t\tif (info && info.instance !== instance) {\n\t\t\tinfo.instance.detachMessageElement();\n\t\t}\n\t\tinstance.attachMessageElement(col, row, this._toMessageText(message));\n\t\tthis._attachInfo = { col, row, instance };\n\t}\n\t_move(col, row) {\n\t\tconst info = this._attachInfo;\n\t\tif (!info || info.col !== col || info.row !== row) {\n\t\t\treturn;\n\t\t}\n\t\tconst { instance } = info;\n\t\tinstance.moveMessageElement(col, row);\n\t}\n\t_detach() {\n\t\tconst info = this._attachInfo;\n\t\tif (!info) {\n\t\t\treturn;\n\t\t}\n\t\tconst { instance } = info;\n\t\tinstance.detachMessageElement();\n\t\tthis._attachInfo = null;\n\t}\n\t_bindGridEvent(grid, getMessage) {\n\t\tconst onSelectMessage = sel => {\n\t\t\tconst message = getMessage(sel.col, sel.row);\n\t\t\tif (!message || isPromise(message)) {\n\t\t\t\tthis._detach();\n\t\t\t} else {\n\t\t\t\tthis._attach(sel.col, sel.row, message);\n\t\t\t}\n\t\t};\n\t\tgrid.listen(SELECTED_CELL, e => {\n\t\t\tif (!e.selected) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.before.col === e.col && e.before.row === e.row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonSelectMessage(e);\n\t\t});\n\t\tgrid.listen(SCROLL, () => {\n\t\t\tconst sel = grid.selection.select;\n\t\t\tthis._move(sel.col, sel.row);\n\t\t});\n\t\tgrid.listen(CHANGED_VALUE, e => {\n\t\t\tconst sel = grid.selection.select;\n\t\t\tif (sel.col !== e.col || sel.row !== e.row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tonSelectMessage(e);\n\t\t});\n\t}\n\t_getMessageInstanceOfMessage(message) {\n\t\tmessage = message || '';\n\t\tif (typeof message === 'string') {\n\t\t\treturn this._createMessageInstance('error', ErrorMessage);\n\t\t}\n\t\tconst type = ('' + message.type).toLowerCase();\n\t\tif (type === 'info') {\n\t\t\treturn this._createMessageInstance('info', InfoMessage);\n\t\t} else if (type === 'warning') {\n\t\t\treturn this._createMessageInstance('warning', WarningMessage);\n\t\t}\n\t\treturn this._createMessageInstance('error', ErrorMessage);\n\t}\n\t_toMessageText(message) {\n\t\tmessage = message || '';\n\t\tif (typeof message === 'string') {\n\t\t\treturn message;\n\t\t}\n\t\tif (message.message) {\n\t\t\treturn message.message;\n\t\t}\n\t\treturn '' + message;\n\t}\n\t_createMessageInstance(name, Message) {\n\t\tconst messageInstances = this._messageInstances;\n\t\treturn messageInstances[name] || (messageInstances[name] = new Message(this._grid));\n\t}\n}\n\nmodule.exports = MessageHandler;\n\n/***/ }),\n\n/***/ \"./columns/message/WarningMessage.js\":\n/*!*******************************************!*\\\n  !*** ./columns/message/WarningMessage.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Rect = __webpack_require__(/*! ../../internal/Rect */ \"./internal/Rect.js\");\nconst BaseMessage = __webpack_require__(/*! ./BaseMessage */ \"./columns/message/BaseMessage.js\");\nconst WarningMessageElement = __webpack_require__(/*! ./internal/WarningMessageElement */ \"./columns/message/internal/WarningMessageElement.js\");\n\nconst DEEP_ORANGE_A100 = '#ff9e80';\n\nclass WarningMessage extends BaseMessage {\n\tcreateMessageElementInternal() {\n\t\treturn new WarningMessageElement();\n\t}\n\tdrawCellMessageInternal(message, context, style, helper, info) {\n\t\tconst { bgColor } = style;\n\n\t\tconst { selected } = context.getSelectState();\n\n\t\tconst rect = context.getRect();\n\n\t\thelper.drawBorderWithClip(context, ctx => {\n\t\t\tif (!selected) {\n\t\t\t\t// draw box\n\t\t\t\tctx.fillStyle = DEEP_ORANGE_A100;\n\t\t\t\tconst boxRect = rect.copy();\n\t\t\t\tboxRect.left = boxRect.right - 24;\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\n\n\t\t\t\t// draw exclamation mark\n\t\t\t\tconst fillColor = bgColor;\n\t\t\t\tconst height = 20;\n\t\t\t\tconst width = height / 5;\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3), context, { fillColor });\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5), context, { fillColor });\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = WarningMessage;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/ErrorMessageElement.css\":\n/*!**********************************************************!*\\\n  !*** ./columns/message/internal/ErrorMessageElement.css ***!\n  \\**********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./ErrorMessageElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/ErrorMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/message/internal/ErrorMessageElement.js\":\n/*!*********************************************************!*\\\n  !*** ./columns/message/internal/ErrorMessageElement.js ***!\n  \\*********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst MessageElement = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = 'cheetah-grid__error-message-element';\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\n\nclass ErrorMessageElement extends MessageElement {\n\tconstructor() {\n\t\tsuper();\n\t\t__webpack_require__(/*! ./ErrorMessageElement.css */ \"./columns/message/internal/ErrorMessageElement.css\");\n\t\tthis._rootElement.classList.add(CLASSNAME);\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\n\t}\n}\n\nmodule.exports = ErrorMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/MessageElement.css\":\n/*!*****************************************************!*\\\n  !*** ./columns/message/internal/MessageElement.css ***!\n  \\*****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./MessageElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/MessageElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/message/internal/MessageElement.js\":\n/*!****************************************************!*\\\n  !*** ./columns/message/internal/MessageElement.js ***!\n  \\****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst EventHandler = __webpack_require__(/*! ../../../internal/EventHandler */ \"./internal/EventHandler.js\");\nconst {\n\tcreateElement\n} = __webpack_require__(/*! ../../../internal/dom */ \"./internal/dom.js\");\n\nconst CLASSNAME = 'cheetah-grid__message-element';\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\n\nfunction createrootElement() {\n\t__webpack_require__(/*! ./MessageElement.css */ \"./columns/message/internal/MessageElement.css\");\n\tconst element = createElement('div', { classList: [CLASSNAME, HIDDEN_CLASSNAME] });\n\tconst message = createElement('span', { classList: [MESSAGE_CLASSNAME] });\n\telement.appendChild(message);\n\treturn element;\n}\n\nclass MessageElement {\n\tconstructor() {\n\t\tthis._handler = new EventHandler();\n\t\tconst rootElement = this._rootElement = createrootElement();\n\t\tthis._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\n\t}\n\tdispose() {\n\t\tthis.detach();\n\t\tthis._handler.dispose();\n\t\tthis._rootElement = null;\n\t\tthis._messageElement = null;\n\t}\n\tattach(grid, col, row, message) {\n\t\tconst rootElement = this._rootElement;\n\t\tconst messageElement = this._messageElement;\n\n\t\trootElement.classList.remove(SHOWN_CLASSNAME);\n\t\trootElement.classList.add(HIDDEN_CLASSNAME);\n\n\t\tif (this._attachCell(grid, col, row)) {\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\n\n\t\t\tmessageElement.textContent = message;\n\t\t} else {\n\t\t\tthis._detach();\n\t\t}\n\t}\n\tmove(grid, col, row) {\n\t\tconst rootElement = this._rootElement;\n\t\tif (this._attachCell(grid, col, row)) {\n\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\n\t\t} else {\n\t\t\tthis._detach();\n\t\t}\n\t}\n\tdetach() {\n\t\tthis._detach();\n\t}\n\t_detach() {\n\t\tconst rootElement = this._rootElement;\n\t\tif (rootElement.parentElement) {\n\t\t\trootElement.parentElement.removeChild(rootElement);\n\t\t\trootElement.classList.remove(SHOWN_CLASSNAME);\n\t\t\trootElement.classList.add(HIDDEN_CLASSNAME);\n\t\t}\n\t}\n\t_attachCell(grid, col, row) {\n\t\tconst rootElement = this._rootElement;\n\t\tconst { element, rect } = grid.getAttachCellArea(col, row);\n\n\t\tconst { bottom: top, left, width } = rect;\n\t\tconst { frozenRowCount, frozenColCount } = grid;\n\t\tif (row >= frozenRowCount && frozenRowCount > 0) {\n\t\t\tconst { rect: frozenRect } = grid.getAttachCellArea(col, frozenRowCount - 1);\n\t\t\tif (top < frozenRect.bottom) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tif (top < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (col >= frozenColCount && frozenColCount > 0) {\n\t\t\tconst { rect: frozenRect } = grid.getAttachCellArea(frozenColCount - 1, row);\n\t\t\tif (left < frozenRect.right) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tif (left < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tconst { offsetHeight, offsetWidth } = element;\n\t\tif (offsetHeight < top) {\n\t\t\treturn false;\n\t\t}\n\t\tif (offsetWidth < left) {\n\t\t\treturn false;\n\t\t}\n\n\t\trootElement.style.top = top.toFixed() + 'px';\n\t\trootElement.style.left = left.toFixed() + 'px';\n\t\trootElement.style.width = width.toFixed() + 'px';\n\t\tif (rootElement.parentElement !== element) {\n\t\t\telement.appendChild(rootElement);\n\t\t}\n\t\treturn true;\n\t}\n}\n\nmodule.exports = MessageElement;\n\n/***/ }),\n\n/***/ \"./columns/message/internal/WarningMessageElement.css\":\n/*!************************************************************!*\\\n  !*** ./columns/message/internal/WarningMessageElement.css ***!\n  \\************************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../../../node_modules/css-loader?minimize!./WarningMessageElement.css */ \"../../node_modules/css-loader/index.js?minimize!./columns/message/internal/WarningMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./columns/message/internal/WarningMessageElement.js\":\n/*!***********************************************************!*\\\n  !*** ./columns/message/internal/WarningMessageElement.js ***!\n  \\***********************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst MessageElement = __webpack_require__(/*! ./MessageElement */ \"./columns/message/internal/MessageElement.js\");\n\nconst CLASSNAME = 'cheetah-grid__warning-message-element';\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\n\nclass WarningMessageElement extends MessageElement {\n\tconstructor() {\n\t\tsuper();\n\t\t__webpack_require__(/*! ./WarningMessageElement.css */ \"./columns/message/internal/WarningMessageElement.css\");\n\t\tthis._rootElement.classList.add(CLASSNAME);\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\n\t}\n}\n\nmodule.exports = WarningMessageElement;\n\n/***/ }),\n\n/***/ \"./columns/style.js\":\n/*!**************************!*\\\n  !*** ./columns/style.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./style/BaseStyle */ \"./columns/style/BaseStyle.js\");\n\tconst Style = __webpack_require__(/*! ./style/Style */ \"./columns/style/Style.js\");\n\tconst NumberStyle = __webpack_require__(/*! ./style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\tconst CheckStyle = __webpack_require__(/*! ./style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\tconst ButtonStyle = __webpack_require__(/*! ./style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\tconst ImageStyle = __webpack_require__(/*! ./style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\tconst IconStyle = __webpack_require__(/*! ./style/IconStyle */ \"./columns/style/IconStyle.js\");\n\tconst PercentCompleteBarStyle = __webpack_require__(/*! ./style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\n\t/**\r\n  * column styles\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns.style\r\n  * @memberof cheetahGrid.columns\r\n  */\n\tconst style = {\n\t\tget EVENT_TYPE() {\n\t\t\treturn BaseStyle.EVENT_TYPE;\n\t\t},\n\t\tget BaseStyle() {\n\t\t\treturn BaseStyle;\n\t\t},\n\t\tget Style() {\n\t\t\treturn Style;\n\t\t},\n\t\tget NumberStyle() {\n\t\t\treturn NumberStyle;\n\t\t},\n\t\tget CheckStyle() {\n\t\t\treturn CheckStyle;\n\t\t},\n\t\tget ButtonStyle() {\n\t\t\treturn ButtonStyle;\n\t\t},\n\t\tget ImageStyle() {\n\t\t\treturn ImageStyle;\n\t\t},\n\t\tget IconStyle() {\n\t\t\treturn IconStyle;\n\t\t},\n\t\tget PercentCompleteBarStyle() {\n\t\t\treturn PercentCompleteBarStyle;\n\t\t},\n\t\tof(columnStyle, record, StyleClass) {\n\t\t\tif (columnStyle) {\n\t\t\t\tif (columnStyle instanceof Style) {\n\t\t\t\t\treturn columnStyle;\n\t\t\t\t} else if (typeof columnStyle === 'function') {\n\t\t\t\t\treturn style.of(columnStyle(record), record, StyleClass);\n\t\t\t\t} else if (record && columnStyle in record) {\n\t\t\t\t\treturn style.of(record[columnStyle], record, StyleClass);\n\t\t\t\t}\n\t\t\t\treturn new StyleClass(columnStyle);\n\t\t\t} else {\n\t\t\t\treturn StyleClass.DEFAULT;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = style;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/BaseStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/BaseStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst EventTarget = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\n\tconst EVENT_TYPE = {\n\t\tCHANGE_STYLE: 'change_style'\n\t};\n\n\tlet defaultStyle;\n\tclass BaseStyle extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n\t\t}\n\t\tconstructor({\n\t\t\tbgColor\n\t\t} = {}) {\n\t\t\tsuper();\n\t\t\tthis._bgColor = bgColor;\n\t\t}\n\t\tget bgColor() {\n\t\t\treturn this._bgColor;\n\t\t}\n\t\tset bgColor(bgColor) {\n\t\t\tthis._bgColor = bgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tdoChangeStyle() {\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseStyle(this);\n\t\t}\n\t}\n\tmodule.exports = BaseStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/BranchGraphStyle.js\":\n/*!*******************************************!*\\\n  !*** ./columns/style/BranchGraphStyle.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst BaseStyle = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\nlet defaultStyle;\nfunction adj(style) {\n\tconst { textAlign = 'center' } = style;\n\tstyle.textAlign = textAlign;\n\treturn style;\n}\nconst DEFAULT_BRANCH_COLORS = (name, index) => {\n\tswitch (index % 3) {\n\t\tcase 0:\n\t\t\treturn '#979797';\n\t\tcase 1:\n\t\t\treturn '#008fb5';\n\t\tcase 2:\n\t\t\treturn '#f1c109';\n\t\tdefault:\n\t}\n\treturn '#979797';\n};\nclass BranchGraphStyle extends BaseStyle {\n\tstatic get DEFAULT() {\n\t\treturn defaultStyle ? defaultStyle : defaultStyle = new BranchGraphStyle();\n\t}\n\tconstructor(style = {}) {\n\t\tsuper(adj(style));\n\t\tthis._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\n\t\tthis._margin = style.margin || 4;\n\t\tthis._circleSize = style.circleSize || 16;\n\t\tthis._branchLineWidth = style.branchLineWidth || 4;\n\t\tthis._mergeStyle = style.mergeStyle === 'straight' ? 'straight' : 'bezier';\n\t}\n\tget branchColors() {\n\t\treturn this._branchColors;\n\t}\n\tset branchColors(branchColors) {\n\t\tthis._branchColors = branchColors;\n\t\tthis.doChangeStyle();\n\t}\n\tget margin() {\n\t\treturn this._margin;\n\t}\n\tset margin(margin) {\n\t\tthis._margin = margin;\n\t\tthis.doChangeStyle();\n\t}\n\tget circleSize() {\n\t\treturn this._circleSize;\n\t}\n\tset circleSize(circleSize) {\n\t\tthis._circleSize = circleSize;\n\t\tthis.doChangeStyle();\n\t}\n\tget branchLineWidth() {\n\t\treturn this._branchLineWidth;\n\t}\n\tset branchLineWidth(branchLineWidth) {\n\t\tthis._branchLineWidth = branchLineWidth;\n\t\tthis.doChangeStyle();\n\t}\n\tget mergeStyle() {\n\t\treturn this._mergeStyle;\n\t}\n\tset mergeStyle(mergeStyle) {\n\t\tthis._mergeStyle = mergeStyle;\n\t\tthis.doChangeStyle();\n\t}\n\tclone() {\n\t\treturn new BranchGraphStyle(this);\n\t}\n}\nmodule.exports = BranchGraphStyle;\n\n/***/ }),\n\n/***/ \"./columns/style/ButtonStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/ButtonStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass ButtonStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new ButtonStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tconst {\n\t\t\t\tbuttonBgColor\n\t\t\t} = style;\n\t\t\tthis._buttonBgColor = buttonBgColor;\n\t\t}\n\t\tget buttonBgColor() {\n\t\t\treturn this._buttonBgColor;\n\t\t}\n\t\tset buttonBgColor(buttonBgColor) {\n\t\t\tthis._buttonBgColor = buttonBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new ButtonStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = ButtonStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/CheckStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/CheckStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst StdBaseStyle = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass CheckStyle extends StdBaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new CheckStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tconst {\n\t\t\t\tuncheckBgColor,\n\t\t\t\tcheckBgColor,\n\t\t\t\tborderColor\n\t\t\t} = style;\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\n\t\t\tthis._checkBgColor = checkBgColor;\n\t\t\tthis._borderColor = borderColor;\n\t\t}\n\t\tget uncheckBgColor() {\n\t\t\treturn this._uncheckBgColor;\n\t\t}\n\t\tset uncheckBgColor(uncheckBgColor) {\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget checkBgColor() {\n\t\t\treturn this._checkBgColor;\n\t\t}\n\t\tset checkBgColor(checkBgColor) {\n\t\t\tthis._checkBgColor = checkBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget borderColor() {\n\t\t\treturn this._borderColor;\n\t\t}\n\t\tset borderColor(borderColor) {\n\t\t\tthis._borderColor = borderColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new CheckStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = CheckStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/IconStyle.js\":\n/*!************************************!*\\\n  !*** ./columns/style/IconStyle.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass IconStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new IconStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t}\n\t\tclone() {\n\t\t\treturn new IconStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = IconStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/ImageStyle.js\":\n/*!*************************************!*\\\n  !*** ./columns/style/ImageStyle.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst StdBaseStyle = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\tlet defaultStyle;\n\tfunction adj(style) {\n\t\tconst { textAlign = 'center' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tclass ImageStyle extends StdBaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new ImageStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tthis._imageSizing = style.imageSizing;\n\t\t\tthis._margin = style.margin || 4;\n\t\t}\n\t\tget imageSizing() {\n\t\t\treturn this._imageSizing;\n\t\t}\n\t\tset imageSizing(imageSizing) {\n\t\t\tthis._imageSizing = imageSizing;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget margin() {\n\t\t\treturn this._margin;\n\t\t}\n\t\tset margin(margin) {\n\t\t\tthis._margin = margin;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new ImageStyle(this);\n\t\t}\n\t}\n\tmodule.exports = ImageStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/MultilineTextStyle.js\":\n/*!*********************************************!*\\\n  !*** ./columns/style/MultilineTextStyle.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textBaseline = 'top' } = style;\n\t\tstyle.textBaseline = textBaseline;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass MultilineTextStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new MultilineTextStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t\tthis._lineHeight = style.lineHeight || '1em';\n\t\t}\n\t\tclone() {\n\t\t\treturn new MultilineTextStyle(this);\n\t\t}\n\t\tget lineHeight() {\n\t\t\treturn this._lineHeight;\n\t\t}\n\t\tset lineHeight(lineHeight) {\n\t\t\tthis._lineHeight = lineHeight;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t}\n\n\tmodule.exports = MultilineTextStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/NumberStyle.js\":\n/*!**************************************!*\\\n  !*** ./columns/style/NumberStyle.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\n\tfunction adj(style) {\n\t\tconst { textAlign = 'right' } = style;\n\t\tstyle.textAlign = textAlign;\n\t\treturn style;\n\t}\n\tlet defaultStyle;\n\tclass NumberStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new NumberStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(adj(style));\n\t\t}\n\t\tclone() {\n\t\t\treturn new NumberStyle(this);\n\t\t}\n\t}\n\n\tmodule.exports = NumberStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/PercentCompleteBarStyle.js\":\n/*!**************************************************!*\\\n  !*** ./columns/style/PercentCompleteBarStyle.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ./Style */ \"./columns/style/Style.js\");\n\tlet defaultStyle;\n\tconst DEFAULT_BAR_COLOR = num => {\n\t\tif (num > 80) {\n\t\t\treturn '#20a8d8';\n\t\t}\n\t\tif (num > 50) {\n\t\t\treturn '#4dbd74';\n\t\t}\n\t\tif (num > 20) {\n\t\t\treturn '#ffc107';\n\t\t}\n\t\treturn '#f86c6b';\n\t};\n\tclass PercentCompleteBarStyle extends Style {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new PercentCompleteBarStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._barColor = style.barColor || DEFAULT_BAR_COLOR;\n\t\t\tthis._barBgColor = style.barBgColor || '#f0f3f5';\n\t\t\tthis._barHeight = style.barHeight || 3;\n\t\t}\n\t\tget barColor() {\n\t\t\treturn this._barColor;\n\t\t}\n\t\tset barColor(barColor) {\n\t\t\tthis._barColor = barColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget barBgColor() {\n\t\t\treturn this._barBgColor;\n\t\t}\n\t\tset barBgColor(barBgColor) {\n\t\t\tthis._barBgColor = barBgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget barHeight() {\n\t\t\treturn this._barHeight;\n\t\t}\n\t\tset barHeight(barHeight) {\n\t\t\tthis._barHeight = barHeight;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new PercentCompleteBarStyle(this);\n\t\t}\n\t}\n\tmodule.exports = PercentCompleteBarStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/StdBaseStyle.js\":\n/*!***************************************!*\\\n  !*** ./columns/style/StdBaseStyle.js ***!\n  \\***************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./BaseStyle */ \"./columns/style/BaseStyle.js\");\n\n\tlet defaultStyle;\n\tclass StdBaseStyle extends BaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new StdBaseStyle();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._textAlign = style.textAlign || 'left';\n\t\t\tthis._textBaseline = style.textBaseline || 'middle';\n\t\t}\n\t\tget textAlign() {\n\t\t\treturn this._textAlign;\n\t\t}\n\t\tset textAlign(textAlign) {\n\t\t\tthis._textAlign = textAlign;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget textBaseline() {\n\t\t\treturn this._textBaseline;\n\t\t}\n\t\tset textBaseline(textBaseline) {\n\t\t\tthis._textBaseline = textBaseline;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new StdBaseStyle(this);\n\t\t}\n\t}\n\tmodule.exports = StdBaseStyle;\n}\n\n/***/ }),\n\n/***/ \"./columns/style/Style.js\":\n/*!********************************!*\\\n  !*** ./columns/style/Style.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst StdBaseStyle = __webpack_require__(/*! ./StdBaseStyle */ \"./columns/style/StdBaseStyle.js\");\n\tlet defaultStyle;\n\tclass Style extends StdBaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new Style();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._color = style.color;\n\t\t\tthis._font = style.font;\n\t\t\tthis._padding = style.padding;\n\t\t}\n\t\tget color() {\n\t\t\treturn this._color;\n\t\t}\n\t\tset color(color) {\n\t\t\tthis._color = color;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget font() {\n\t\t\treturn this._font;\n\t\t}\n\t\tset font(font) {\n\t\t\tthis._font = font;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget padding() {\n\t\t\treturn this._padding;\n\t\t}\n\t\tset padding(padding) {\n\t\t\tthis._padding = padding;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new Style(this);\n\t\t}\n\t}\n\tmodule.exports = Style;\n}\n\n/***/ }),\n\n/***/ \"./columns/type.js\":\n/*!*************************!*\\\n  !*** ./columns/type.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Column = __webpack_require__(/*! ./type/Column */ \"./columns/type/Column.js\");\n\tconst NumberColumn = __webpack_require__(/*! ./type/NumberColumn */ \"./columns/type/NumberColumn.js\");\n\tconst CheckColumn = __webpack_require__(/*! ./type/CheckColumn */ \"./columns/type/CheckColumn.js\");\n\tconst ButtonColumn = __webpack_require__(/*! ./type/ButtonColumn */ \"./columns/type/ButtonColumn.js\");\n\tconst ImageColumn = __webpack_require__(/*! ./type/ImageColumn */ \"./columns/type/ImageColumn.js\");\n\tconst PercentCompleteBarColumn = __webpack_require__(/*! ./type/PercentCompleteBarColumn */ \"./columns/type/PercentCompleteBarColumn.js\");\n\tconst IconColumn = __webpack_require__(/*! ./type/IconColumn */ \"./columns/type/IconColumn.js\");\n\tconst BranchGraphColumn = __webpack_require__(/*! ./type/BranchGraphColumn */ \"./columns/type/BranchGraphColumn.js\");\n\tconst MenuColumn = __webpack_require__(/*! ./type/MenuColumn */ \"./columns/type/MenuColumn.js\");\n\tconst MultilineTextColumn = __webpack_require__(/*! ./type/MultilineTextColumn */ \"./columns/type/MultilineTextColumn.js\");\n\n\t/**\r\n  * column types\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.columns.type\r\n  * @memberof cheetahGrid.columns\r\n  */\n\tconst type = {\n\t\tTYPES: {\n\t\t\tDEFAULT: new Column(),\n\t\t\tNUMBER: new NumberColumn(),\n\t\t\tCHECK: new CheckColumn(),\n\t\t\tBUTTON: new ButtonColumn(),\n\t\t\tIMAGE: new ImageColumn(),\n\t\t\tMULTILINETEXT: new MultilineTextColumn()\n\t\t},\n\t\tget Column() {\n\t\t\treturn Column;\n\t\t},\n\t\tget NumberColumn() {\n\t\t\treturn NumberColumn;\n\t\t},\n\t\tget CheckColumn() {\n\t\t\treturn CheckColumn;\n\t\t},\n\t\tget ButtonColumn() {\n\t\t\treturn ButtonColumn;\n\t\t},\n\t\tget ImageColumn() {\n\t\t\treturn ImageColumn;\n\t\t},\n\t\tget PercentCompleteBarColumn() {\n\t\t\treturn PercentCompleteBarColumn;\n\t\t},\n\t\tget IconColumn() {\n\t\t\treturn IconColumn;\n\t\t},\n\t\tget BranchGraphColumn() {\n\t\t\treturn BranchGraphColumn;\n\t\t},\n\t\tget MenuColumn() {\n\t\t\treturn MenuColumn;\n\t\t},\n\t\tget MultilineTextColumn() {\n\t\t\treturn MultilineTextColumn;\n\t\t},\n\t\tof(columnType) {\n\t\t\tif (!columnType) {\n\t\t\t\treturn type.TYPES.DEFAULT;\n\t\t\t} else if (typeof columnType === 'string') {\n\t\t\t\treturn type.TYPES[columnType.toUpperCase()] || type.of(null);\n\t\t\t} else {\n\t\t\t\treturn columnType;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = type;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/BaseColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/BaseColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./columns/style.js\");\n\tconst { isPromise, isDef, obj: { setReadonly } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst animate = __webpack_require__(/*! ../../internal/animate */ \"./internal/animate.js\");\n\tconst BaseStyle = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\tconst { COLUMN_FADEIN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tfunction isFadeinWhenCallbackInPromise(column, grid) {\n\t\tif (isDef(column._fadeinWhenCallbackInPromise)) {\n\t\t\treturn column._fadeinWhenCallbackInPromise;\n\t\t}\n\t\treturn !!grid.configure('fadeinWhenCallbackInPromise');\n\t}\n\n\tfunction getFadinState(grid) {\n\t\tif (!grid[COLUMN_FADEIN_STATE_ID]) {\n\t\t\tsetReadonly(grid, COLUMN_FADEIN_STATE_ID, {});\n\t\t}\n\t\treturn grid[COLUMN_FADEIN_STATE_ID];\n\t}\n\tfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\n\t\treturn point => {\n\t\t\tconst state = getFadinState(grid);\n\t\t\tconst stateKey = col + ':' + row;\n\t\t\tif (point === 1) {\n\t\t\t\tdelete state[stateKey];\n\t\t\t} else {\n\t\t\t\tstate[stateKey] = {\n\t\t\t\t\topacity: point\n\t\t\t\t};\n\t\t\t}\n\t\t\tdrawCellBase();\n\n\t\t\tdrawInternal();\n\n\t\t\tconst cellState = state[stateKey];\n\t\t\tif (cellState) {\n\t\t\t\t//\n\t\t\t\tconst ctx = context.getContext();\n\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\n\t\t\t\ttry {\n\t\t\t\t\tdrawCellBase();\n\t\t\t\t} finally {\n\t\t\t\t\tctx.globalAlpha = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\tconst fadinMgr = {\n\t\tanimate(grid, col, row, context, drawInternal, drawCellBase) {\n\t\t\t// fadein animation\n\t\t\tconst state = getFadinState(grid);\n\n\t\t\tconst activeFadeins = [_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)];\n\t\t\tstate.activeFadeins = activeFadeins;\n\n\t\t\tanimate(500, point => {\n\t\t\t\tactiveFadeins.forEach(f => f(point));\n\t\t\t\tif (point === 1) {\n\t\t\t\t\tdelete state.activeFadeins;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmargeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\n\t\t\tconst state = getFadinState(grid);\n\t\t\tif (state.activeFadeins) {\n\t\t\t\tstate.activeFadeins.push(_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase));\n\t\t\t} else {\n\t\t\t\tdrawInternal();\n\t\t\t}\n\t\t}\n\n\t};\n\n\tclass BaseColumn {\n\t\tconstructor(option = {}) {\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this); //\n\n\t\t\t//Promisecallback\n\t\t\tthis._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn BaseStyle;\n\t\t}\n\t\tonDrawCell(cellValue, info, context, grid) {\n\t\t\tconst { style, getRecord, drawCellBase } = info;\n\t\t\tdelete info.getRecord;\n\t\t\tdelete info.style;\n\t\t\tconst helper = grid.getGridCanvasHelper();\n\t\t\tdrawCellBase();\n\n\t\t\t//\n\t\t\tif (isPromise(cellValue)) {\n\t\t\t\tif (context.drawing) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst start = Date.now();\n\t\t\t\treturn cellValue.then(val => {\n\t\t\t\t\tconst currentContext = context.toCurrentContext();\n\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\n\t\t\t\t\tif (!drawRect) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst time = Date.now() - start;\n\n\t\t\t\t\tconst drawInternal = () => {\n\t\t\t\t\t\tconst currentContext = context.toCurrentContext();\n\t\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\n\t\t\t\t\t\tif (!drawRect) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\n\t\t\t\t\t\tthis.drawInternal(this.convertInternal(val), currentContext, actStyle, helper, grid, info);\n\t\t\t\t\t\tthis.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\n\t\t\t\t\t};\n\n\t\t\t\t\tif (!isFadeinWhenCallbackInPromise(this, grid)) {\n\t\t\t\t\t\tdrawInternal(); //\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst { col, row } = context;\n\t\t\t\t\t\tif (time < 80) {\n\t\t\t\t\t\t\t//80msPromiseCallback\n\t\t\t\t\t\t\tfadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tfadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\n\t\t\t\tthis.drawInternal(this.convertInternal(cellValue), context, actStyle, helper, grid, info);\n\t\t\t\tthis.drawMessageInternal(info.getMessage(), context, actStyle, helper, grid, info);\n\t\t\t\t//\n\t\t\t\tconst { col, row } = context;\n\t\t\t\tconst stateKey = col + ':' + row;\n\t\t\t\tconst cellState = grid[COLUMN_FADEIN_STATE_ID] && grid[COLUMN_FADEIN_STATE_ID][stateKey];\n\t\t\t\tif (cellState) {\n\t\t\t\t\tconst ctx = context.getContext();\n\t\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdrawCellBase();\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tctx.globalAlpha = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseColumn(this);\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn isDef(value) ? value : '';\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {}\n\t\tdrawMessageInternal(message, context, style, helper, grid, info) {\n\t\t\tinfo.messageHandler.drawCellMessage(message, context, style, helper, info);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = BaseColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/BranchGraphColumn.js\":\n/*!*******************************************!*\\\n  !*** ./columns/type/BranchGraphColumn.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { isDef, getOrApply, isPromise, obj: { isObject } } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\nconst BranchGraphStyle = __webpack_require__(/*! ../style/BranchGraphStyle */ \"./columns/style/BranchGraphStyle.js\");\nconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\nconst { BRANCH_GRAPH_COLUMN_STATE_ID: _ } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\nfunction getAllColumnData(grid, col, callback) {\n\tconst dataSource = grid.dataSource;\n\tlet field = grid.getField(col);\n\tif (isObject(field) && field.get && field.set) {\n\t\tfield = field.get;\n\t}\n\tconst allData = [];\n\tlet promise;\n\tfor (let index = 0; index < dataSource.length; index++) {\n\t\tconst data = dataSource.getField(index, field);\n\t\tif (isPromise(data)) {\n\t\t\tconst dataIndex = allData.length;\n\t\t\tallData.push(data);\n\t\t\tif (!promise) {\n\t\t\t\tpromise = data.then(d => {\n\t\t\t\t\tallData[dataIndex] = d;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tpromise = promise.then(() => data).then(d => {\n\t\t\t\t\tallData[dataIndex] = d;\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tallData.push(data);\n\t\t}\n\t}\n\n\tif (promise) {\n\t\tpromise.then(() => callback(allData));\n\t} else {\n\t\tcallback(allData);\n\t}\n}\n\nclass BranchLine {\n\tconstructor({ fromIndex, toIndex, colorIndex, point }) {\n\t\tthis.fromIndex = fromIndex;\n\t\tthis.toIndex = toIndex;\n\t\tthis.colorIndex = colorIndex;\n\t\tthis.point = point;\n\t}\n}\nclass BranchPoint {\n\tconstructor({ index, commit = false, lines = [], tag }) {\n\t\tthis.index = index;\n\t\tthis.commit = commit;\n\t\tthis.lines = lines;\n\t\tthis.tag = tag;\n\t}\n\tstatic mergeLines(lines) {\n\t\tconst result = lines.filter(l => isDef(l.fromIndex) && isDef(l.toIndex));\n\n\t\tconst froms = lines.filter(l => isDef(l.fromIndex) && !isDef(l.toIndex));\n\t\tconst tos = lines.filter(l => !isDef(l.fromIndex) && isDef(l.toIndex));\n\n\t\tfroms.forEach(f => {\n\t\t\tfor (let i = 0; i < tos.length; i++) {\n\t\t\t\tconst t = tos[i];\n\t\t\t\tif (t.point) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (f.colorIndex === t.colorIndex) {\n\t\t\t\t\tf.toIndex = t.toIndex;\n\t\t\t\t\ttos.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(f);\n\t\t});\n\n\t\treturn result.concat(tos);\n\t}\n\tstatic merge(a, b) {\n\t\tif (!a) {\n\t\t\treturn b;\n\t\t}\n\t\treturn new BranchPoint({\n\t\t\tindex: a.index,\n\t\t\tcommit: a.commit || b.commit,\n\t\t\tlines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\n\t\t\ttag: a.tag || b.tag\n\t\t});\n\t}\n}\n\nfunction joinLine(timeline, branchIndex) {\n\tconst reverse = [...timeline].reverse();\n\tfor (let i = 0; i < reverse.length; i++) {\n\t\tconst f = reverse[i][branchIndex];\n\t\tif (f) {\n\t\t\tf.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\n\t\t\t\ttoIndex: branchIndex,\n\t\t\t\tcolorIndex: branchIndex\n\t\t\t})]));\n\n\t\t\tfor (let j = 0; j < i; j++) {\n\t\t\t\tconst tl = reverse[j];\n\t\t\t\ttl[branchIndex] = new BranchPoint({\n\t\t\t\t\tindex: branchIndex,\n\t\t\t\t\tlines: [new BranchLine({\n\t\t\t\t\t\tfromIndex: branchIndex,\n\t\t\t\t\t\ttoIndex: branchIndex,\n\t\t\t\t\t\tcolorIndex: branchIndex\n\t\t\t\t\t})]\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction branch({ timeline, branches }, from, to) {\n\tconst fromIndex = branches.indexOf(from);\n\tlet toIndex = branches.indexOf(to);\n\tif (toIndex < 0) {\n\t\ttoIndex = branches.length;\n\t\tbranches.push(to);\n\t}\n\n\tfunction findBranchRootIndex() {\n\t\tfor (let index = timeline.length - 1; index >= 0; index--) {\n\t\t\tconst tl = timeline[index];\n\t\t\tconst from = tl[fromIndex];\n\t\t\tif (from && from.commit) {\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tif (fromIndex < 0) {\n\t\treturn new BranchPoint({\n\t\t\tindex: toIndex\n\t\t});\n\t} else {\n\t\tconst fromTargetIndex = findBranchRootIndex();\n\t\tif (fromTargetIndex === -1) {\n\t\t\treturn null;\n\t\t}\n\t\tconst branchTargetFromIndex = fromTargetIndex + 1;\n\t\tconst branchPoint = new BranchPoint({\n\t\t\tindex: toIndex,\n\t\t\tlines: [new BranchLine({\n\t\t\t\tfromIndex,\n\t\t\t\tcolorIndex: toIndex\n\t\t\t})]\n\t\t});\n\t\tlet point;\n\t\tlet result;\n\t\tif (branchTargetFromIndex < timeline.length) {\n\t\t\tconst targetLine = timeline[branchTargetFromIndex];\n\t\t\tpoint = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\n\t\t} else {\n\t\t\tpoint = branchPoint;\n\t\t\tresult = branchPoint;\n\t\t}\n\t\tconst from = timeline[fromTargetIndex][fromIndex];\n\t\tfrom.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\n\t\t\ttoIndex,\n\t\t\tcolorIndex: toIndex,\n\t\t\tpoint\n\t\t})]));\n\t\treturn result;\n\t}\n}\n\nfunction commit({ timeline, branches }, name) {\n\tconst index = branches.indexOf(name);\n\tif (index < 0) {\n\t\treturn null;\n\t}\n\tconst result = new BranchPoint({\n\t\tindex,\n\t\tcommit: true\n\t});\n\n\tif (joinLine(timeline, index)) {\n\t\tresult.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\n\t\t\tfromIndex: index,\n\t\t\tcolorIndex: index\n\t\t})]));\n\t}\n\treturn result;\n}\n\nfunction commitTag({ timeline, branches }, name, tag) {\n\tlet index = branches.indexOf(name);\n\tif (index < 0) {\n\t\tindex = branches.length;\n\t\tbranches.push(name);\n\t}\n\treturn new BranchPoint({\n\t\tindex,\n\t\ttag\n\t});\n}\n\nfunction commitMerge({ timeline, branches }, from, to) {\n\tconst fromIndex = branches.indexOf(from);\n\tconst toIndex = branches.indexOf(to);\n\tif (toIndex < 0 || fromIndex < 0) {\n\t\treturn new BranchPoint({\n\t\t\tindex: toIndex,\n\t\t\tcommit: true\n\t\t});\n\t}\n\tconst result = new BranchPoint({\n\t\tindex: toIndex,\n\t\tcommit: true,\n\t\tlines: [new BranchLine({\n\t\t\tfromIndex,\n\t\t\tcolorIndex: fromIndex\n\t\t}), new BranchLine({\n\t\t\tfromIndex: toIndex,\n\t\t\tcolorIndex: toIndex\n\t\t})]\n\t});\n\tconst froms = [...timeline];\n\tconst fromTargetLine = froms.pop();\n\tif (fromTargetLine) {\n\t\tfromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\n\t\t\tindex: toIndex,\n\t\t\tlines: [new BranchLine({\n\t\t\t\ttoIndex,\n\t\t\t\tcolorIndex: fromIndex\n\t\t\t})]\n\t\t}));\n\t}\n\n\tjoinLine(froms, fromIndex);\n\n\tjoinLine(timeline, toIndex);\n\n\treturn result;\n}\n\nfunction calcCommand(info, command) {\n\tconst { timeline } = info;\n\tconst timelineData = [];\n\t// const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\n\tconst commands = __webpack_provided_Array_dot_isArray(command) ? command : [command];\n\tcommands.forEach(cmd => {\n\t\tif (!cmd) {\n\t\t\treturn;\n\t\t}\n\t\tlet point;\n\t\tif (cmd.command === 'branch') {\n\t\t\tconst from = isObject(cmd.branch) ? cmd.branch.from : null;\n\t\t\tconst to = isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\n\t\t\tpoint = branch(info, from, to);\n\t\t} else if (cmd.command === 'commit') {\n\t\t\tconst { branch } = cmd;\n\t\t\tpoint = commit(info, branch);\n\t\t} else if (cmd.command === 'merge') {\n\t\t\tconst { from, to } = cmd.branch;\n\t\t\tpoint = commitMerge(info, from, to);\n\t\t} else if (cmd.command === 'tag') {\n\t\t\tconst { branch, tag } = cmd;\n\t\t\tpoint = commitTag(info, branch, tag);\n\t\t}\n\t\tif (point && point.index > -1) {\n\t\t\ttimelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\n\t\t}\n\t});\n\ttimeline.push(timelineData);\n}\n\nfunction calcBranchesInfo(start, grid, col) {\n\tconst result = {\n\t\tbranches: [],\n\t\ttimeline: []\n\t};\n\tgetAllColumnData(grid, col, data => {\n\t\tif (start !== 'top') {\n\t\t\tdata = [...data].reverse();\n\t\t}\n\t\tdata.forEach(command => {\n\t\t\tcalcCommand(result, command);\n\t\t});\n\t});\n\treturn result;\n}\n\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\n\tlet w = Math.max(width / branches.length + 1, 5);\n\ttimeline.forEach(tl => {\n\t\ttl.forEach((p, index) => {\n\t\t\tif (index <= 0) {\n\t\t\t\t// \n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (p.tag) {\n\t\t\t\tconst textWidth = ctx.measureText(p.tag).width;\n\t\t\t\tif (w * index + radius * 2 + 4 + textWidth > width) {\n\t\t\t\t\tw = Math.max((width - radius * 2 - 4 - textWidth) / index, 5);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\tconst result = [];\n\tlet x = left;\n\tbranches.forEach(() => {\n\t\tresult.push(Math.ceil(x + radius));\n\t\tx += w;\n\t});\n\treturn result;\n}\n\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\n\tbranchXPoints, margin, branchColors, branchLineWidth, mergeStyle\n}, {\n\twidth, col, row, branches\n}) {\n\tif (isDef(upLineIndex) || isDef(downLineIndex)) {\n\t\tctx.strokeStyle = getOrApply(branchColors, branches[colorIndex], colorIndex);\n\t\tctx.lineWidth = branchLineWidth;\n\t\tctx.lineCap = 'round';\n\t\tctx.beginPath();\n\n\t\tif (isDef(upLineIndex)) {\n\t\t\tconst upX = branchXPoints[upLineIndex];\n\t\t\tconst upRect = grid.getCellRelativeRect(col, row - 1);\n\t\t\tconst upY = upRect.top + upRect.height / 2;\n\t\t\tctx.moveTo(upX, upY);\n\t\t\tif (mergeStyle === 'bezier') {\n\t\t\t\tctx.bezierCurveTo(upX, (y + upY) / 2, x, (y + upY) / 2, x, y);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(x, y);\n\t\t\t}\n\t\t} else {\n\t\t\tctx.moveTo(x, y);\n\t\t}\n\n\t\tif (isDef(downLineIndex)) {\n\t\t\tconst downX = branchXPoints[downLineIndex];\n\t\t\tconst downRect = grid.getCellRelativeRect(col, row + 1);\n\t\t\tconst downY = downRect.top + downRect.height / 2;\n\t\t\tif (mergeStyle === 'bezier') {\n\t\t\t\tctx.bezierCurveTo(x, (y + downY) / 2, downX, (y + downY) / 2, downX, downY);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(downX, downY);\n\t\t\t}\n\t\t}\n\n\t\tctx.stroke();\n\t}\n}\n\n/**\r\n * BranchGraphColumn<br>\r\n * <br>\r\n * # Data command<br>\r\n * ## mastar branch or orphan branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * </code></pre>\r\n * ## commit<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * </code></pre>\r\n * ## branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## merge<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## tag<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * </code></pre>\r\n *\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\nclass BranchGraphColumn extends BaseColumn {\n\tconstructor(option = {}) {\n\t\tsuper(option);\n\t\tthis._start = option.start || 'bottom';\n\t\tthis._cache = isDef(option.cache) ? option.cache : false;\n\t}\n\tget StyleClass() {\n\t\treturn BranchGraphStyle;\n\t}\n\tclearCache(grid) {\n\t\tdelete grid[_];\n\t}\n\tonDrawCell(cellValue, info, context, grid) {\n\t\tif (this._cache) {\n\t\t\tconst state = grid[_] || (grid[_] = {});\n\t\t\tconst { col } = context;\n\t\t\tif (!state[col]) {\n\t\t\t\tstate[col] = calcBranchesInfo(this._start, grid, col);\n\t\t\t}\n\t\t}\n\t\treturn super.onDrawCell(cellValue, info, context, grid);\n\t}\n\tclone() {\n\t\treturn new BranchGraphColumn(this);\n\t}\n\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\tconst { col, row } = context;\n\t\tconst { timeline, branches } = this._cache && grid[_] ? grid[_][col] : calcBranchesInfo(this._start, grid, col);\n\n\t\tconst { upLineIndexKey, downLineIndexKey } = this._start !== 'top' ? { upLineIndexKey: 'toIndex', downLineIndexKey: 'fromIndex' } : { upLineIndexKey: 'fromIndex', downLineIndexKey: 'toIndex' };\n\t\tconst data = this._start !== 'top' ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\n\n\t\tconst {\n\t\t\tbranchColors,\n\t\t\tbranchLineWidth,\n\t\t\tcircleSize,\n\t\t\tmergeStyle,\n\t\t\tmargin,\n\t\t\tbgColor\n\t\t} = style;\n\t\tif (bgColor) {\n\t\t\tdrawCellBase({\n\t\t\t\tbgColor\n\t\t\t});\n\t\t}\n\n\t\tconst rect = context.getRect();\n\t\tconst radius = circleSize / 2;\n\t\tconst width = rect.width - margin * 2;\n\n\t\thelper.drawWithClip(context, ctx => {\n\t\t\tctx.textAlign = 'left';\n\t\t\tctx.textBaseline = 'middle';\n\t\t\tconst branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\n\n\t\t\tconst y = rect.top + rect.height / 2;\n\n\t\t\t// draw join lines\n\t\t\tdata.map((point, index) => point ? point.lines.map(line => ({\n\t\t\t\tcolorIndex: line.colorIndex,\n\t\t\t\tupLineIndex: line[upLineIndexKey],\n\t\t\t\tdownLineIndex: line[downLineIndexKey],\n\t\t\t\tpointIndex: index\n\t\t\t})) : []).reduce((p, c) => p.concat(c), []). // flatMap\n\t\t\t// order of overlap\n\t\t\tsort((a, b) => b.colorIndex - a.colorIndex).forEach(line => {\n\t\t\t\tconst x = branchXPoints[line.pointIndex];\n\t\t\t\trenderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\n\t\t\t\t\tmargin,\n\t\t\t\t\tbranchXPoints,\n\t\t\t\t\tbranchLineWidth,\n\t\t\t\t\tbranchColors,\n\t\t\t\t\tmergeStyle\n\t\t\t\t}, {\n\t\t\t\t\twidth, col, row, branches\n\t\t\t\t});\n\t\t\t});\n\t\t\t// draw commit points\n\t\t\tdata.forEach((p, index) => {\n\t\t\t\tif (p && p.commit) {\n\t\t\t\t\tconst x = branchXPoints[index];\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2, true);\n\t\t\t\t\tctx.fill();\n\t\t\t\t\tctx.closePath();\n\t\t\t\t}\n\t\t\t});\n\t\t\t// draw tags\n\t\t\tdata.forEach((p, index) => {\n\t\t\t\tif (p && p.tag) {\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\n\t\t\t\t\tctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\nmodule.exports = BranchGraphColumn;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./columns/type/ButtonColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/ButtonColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\tconst ButtonStyle = __webpack_require__(/*! ../style/ButtonStyle */ \"./columns/style/ButtonStyle.js\");\n\tconst { BUTTON_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\n\tclass ButtonColumn extends Column {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._caption = option.caption;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn ButtonStyle;\n\t\t}\n\t\tget caption() {\n\t\t\treturn this._caption;\n\t\t}\n\t\twithCaption(caption) {\n\t\t\tconst c = this.clone();\n\t\t\tc._caption = caption;\n\t\t\treturn c;\n\t\t}\n\t\tclone() {\n\t\t\treturn new ButtonColumn(this);\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn this._caption || value;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst { textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding } = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\thelper.testFontLoad(font, value, context);\n\t\t\tconst { col, row } = context;\n\t\t\tlet active = false;\n\t\t\tconst state = grid[BUTTON_COLUMN_STATE_ID];\n\t\t\tif (state) {\n\t\t\t\tif (state.mouseActiveCell && state.mouseActiveCell.col === col && state.mouseActiveCell.row === row) {\n\t\t\t\t\tactive = true;\n\t\t\t\t} else if (context.getSelectState().selected) {\n\t\t\t\t\tactive = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\thelper.button(value, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tbgColor: buttonBgColor,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\tpadding,\n\t\t\t\t\tshadow: active ? {\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.48)',\n\t\t\t\t\t\tblur: 6,\n\t\t\t\t\t\toffsetY: 3\n\t\t\t\t\t} : true,\n\t\t\t\t\ticons\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tmodule.exports = ButtonColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/CheckColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/CheckColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst CheckStyle = __webpack_require__(/*! ../style/CheckStyle */ \"./columns/style/CheckStyle.js\");\n\tconst { CHECK_COLUMN_STATE_ID } = __webpack_require__(/*! ../../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tfunction toBoolean(val) {\n\t\tif (typeof val === 'string') {\n\t\t\tif (val === 'false') {\n\t\t\t\treturn false;\n\t\t\t} else if (val === 'off') {\n\t\t\t\treturn false;\n\t\t\t} else if (val.match(/^0+$/)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn val;\n\t}\n\n\tclass CheckColumn extends BaseColumn {\n\t\tget StyleClass() {\n\t\t\treturn CheckStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new CheckColumn(this);\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn toBoolean(value);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tborderColor,\n\t\t\t\tcheckBgColor,\n\t\t\t\tuncheckBgColor,\n\t\t\t\tbgColor\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst { col, row } = context;\n\t\t\tconst key = col + ':' + row;\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID] && grid[CHECK_COLUMN_STATE_ID][key];\n\n\t\t\tconst opt = {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tborderColor,\n\t\t\t\tcheckBgColor,\n\t\t\t\tuncheckBgColor\n\t\t\t};\n\t\t\tif (state) {\n\t\t\t\topt.animElapsedTime = state.elapsed;\n\t\t\t}\n\t\t\thelper.checkbox(value, context, opt);\n\t\t}\n\t\tbindGridEvent(grid, col, util) {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tmodule.exports = CheckColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/Column.js\":\n/*!********************************!*\\\n  !*** ./columns/type/Column.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Style = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\n\tclass Column extends BaseColumn {\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tclone() {\n\t\t\treturn new Column(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\tbgColor,\n\t\t\t\tpadding\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\thelper.testFontLoad(font, value, context);\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\thelper.text(value, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons,\n\t\t\t\t\tpadding\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\tmodule.exports = Column;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/IconColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/IconColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst IconStyle = __webpack_require__(/*! ../style/IconStyle */ \"./columns/style/IconStyle.js\");\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\tconst icons = __webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\");\n\n\tfunction repeatArray(val, count) {\n\t\tif (count === Infinity) {\n\t\t\tcount = 0;\n\t\t}\n\t\tconst a = [];\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\ta.push(val);\n\t\t}\n\t\treturn a;\n\t}\n\n\tclass IconColumn extends Column {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._tagName = option.tagName || 'i';\n\t\t\tthis._className = option.className;\n\t\t\tthis._content = option.content;\n\t\t\tthis._name = option.name;\n\t\t\tthis._iconWidth = option.iconWidth;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn IconStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new IconColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {\n\t\t\tconst num = value - 0;\n\t\t\tif (!isNaN(num)) {\n\t\t\t\tconst icon = {};\n\t\t\t\ticons.iconPropKeys.forEach(k => {\n\t\t\t\t\ticon[k] = style[k];\n\t\t\t\t});\n\t\t\t\ticon.className = this._className;\n\t\t\t\ticon.tagName = this._tagName;\n\t\t\t\ticon.content = this._content;\n\t\t\t\ticon.name = this._name;\n\t\t\t\tif (this._iconWidth) {\n\t\t\t\t\ticon.width = this._iconWidth;\n\t\t\t\t}\n\n\t\t\t\tinfo.getIcon = () => repeatArray(icon, num);\n\t\t\t} else {\n\t\t\t\tinfo.getIcon = () => null;\n\t\t\t}\n\t\t\tsuper.drawInternal('', context, style, helper, grid, info);\n\t\t}\n\t}\n\tmodule.exports = IconColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/ImageColumn.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/ImageColumn.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst ImageStyle = __webpack_require__(/*! ../style/ImageStyle */ \"./columns/style/ImageStyle.js\");\n\tconst { getCacheOrLoad } = __webpack_require__(/*! ../../internal/imgs */ \"./internal/imgs.js\");\n\tconst { calcStartPosition } = __webpack_require__(/*! ../../internal/canvases */ \"./internal/canvases.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\n\tconst MAX_LRU_CACHE_SIZE = 50;\n\tfunction getImage(url) {\n\t\treturn getCacheOrLoad('ImageColumn', MAX_LRU_CACHE_SIZE, url);\n\t}\n\n\tfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\n\t\tlet newWidth = width;\n\t\tlet newHeight = height;\n\t\tif (newWidth > maxWidth) {\n\t\t\tnewWidth = maxWidth;\n\t\t\tnewHeight = newWidth * height / width;\n\t\t}\n\t\tif (newHeight > maxHeight) {\n\t\t\tnewHeight = maxHeight;\n\t\t\tnewWidth = newHeight * width / height;\n\t\t}\n\t\treturn {\n\t\t\twidth: newWidth,\n\t\t\theight: newHeight\n\t\t};\n\t}\n\n\tclass ImageColumn extends BaseColumn {\n\t\tget StyleClass() {\n\t\t\treturn ImageStyle;\n\t\t}\n\t\tonDrawCell(cellValue, info, context, grid) {\n\t\t\treturn super.onDrawCell(getImage(cellValue), info, context, grid);\n\t\t}\n\t\tclone() {\n\t\t\treturn new ImageColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tif (value) {\n\t\t\t\tconst {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tmargin,\n\t\t\t\t\tbgColor\n\t\t\t\t} = style;\n\t\t\t\tif (bgColor) {\n\t\t\t\t\tdrawCellBase({\n\t\t\t\t\t\tbgColor\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\thelper.drawWithClip(context, ctx => {\n\n\t\t\t\t\tctx.textAlign = textAlign;\n\t\t\t\t\tctx.textBaseline = textBaseline;\n\t\t\t\t\tconst rect = context.getRect();\n\t\t\t\t\tif (style.imageSizing === 'keep-aspect-ratio') {\n\t\t\t\t\t\tconst { width, height } = calcKeepAspectRatioSize(value.width, value.height, rect.width - margin * 2, rect.height - margin * 2);\n\t\t\t\t\t\tconst pos = calcStartPosition(ctx, rect, width, height, {\n\t\t\t\t\t\t\toffset: margin\n\t\t\t\t\t\t});\n\t\t\t\t\t\tctx.drawImage(value, 0, 0, value.width, value.height, pos.x, pos.y, width, height);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.drawImage(value, 0, 0, value.width, value.height, rect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tmodule.exports = ImageColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/MenuColumn.js\":\n/*!************************************!*\\\n  !*** ./columns/type/MenuColumn.js ***!\n  \\************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { normalize } = __webpack_require__(/*! ../../internal/menu-items */ \"./internal/menu-items.js\");\n\tconst { isDef } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst Style = __webpack_require__(/*! ../style/Style */ \"./columns/style/Style.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\n\tclass MenuColumn extends BaseColumn {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._options = normalize(option.options);\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tclone() {\n\t\t\treturn new MenuColumn(this);\n\t\t}\n\t\tget options() {\n\t\t\treturn this._options;\n\t\t}\n\t\twithOptions(options) {\n\t\t\tconst c = this.clone();\n\t\t\tc._options = normalize(options);\n\t\t\treturn c;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tfont,\n\t\t\t\tbgColor,\n\t\t\t\tpadding\n\t\t\t} = style;\n\t\t\tlet {\n\t\t\t\tcolor\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst text = this._convertInternal(value);\n\t\t\thelper.testFontLoad(font, text, context);\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\tconst basePadding = helper.toBoxPixelArray(padding || 0, context);\n\t\t\t\tconst textPadding = basePadding.slice(0);\n\t\t\t\ttextPadding[1] += 26; // icon padding\n\t\t\t\tconst iconPadding = basePadding.slice(0);\n\t\t\t\ticonPadding[1] += 8;\n\t\t\t\tif (!isDef(color) && (!isDef(value) || value === '')) {\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, .38)';\n\t\t\t\t}\n\t\t\t\thelper.text(text, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons,\n\t\t\t\t\tpadding: textPadding\n\t\t\t\t});\n\t\t\t\t// draw icon\n\t\t\t\thelper.text('', context, {\n\t\t\t\t\ttextAlign: 'right',\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons: [{\n\t\t\t\t\t\tpath: 'M0 2 5 7 10 2z',\n\t\t\t\t\t\twidth: 10,\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, .54)'\n\t\t\t\t\t}],\n\t\t\t\t\tpadding: iconPadding\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\treturn value;\n\t\t}\n\t\t_convertInternal(value) {\n\t\t\tconst options = this._options;\n\t\t\tfor (let i = 0; i < options.length; i++) {\n\t\t\t\tconst option = options[i];\n\t\t\t\tif (option.value === value) {\n\t\t\t\t\tvalue = option.caption;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn super.convertInternal(value);\n\t\t}\n\t}\n\n\tmodule.exports = MenuColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/MultilineTextColumn.js\":\n/*!*********************************************!*\\\n  !*** ./columns/type/MultilineTextColumn.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst MultilineTextStyle = __webpack_require__(/*! ../style/MultilineTextStyle */ \"./columns/style/MultilineTextStyle.js\");\n\tconst BaseColumn = __webpack_require__(/*! ./BaseColumn */ \"./columns/type/BaseColumn.js\");\n\tconst utils = __webpack_require__(/*! ./columnUtils */ \"./columns/type/columnUtils.js\");\n\tclass MultilineTextColumn extends BaseColumn {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn MultilineTextStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new MultilineTextColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase, getIcon }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\tbgColor,\n\t\t\t\tpadding,\n\t\t\t\tlineHeight\n\t\t\t} = style;\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst multilines = value.replace(/\\r?\\n/g, '\\n').replace(/\\r/g, '\\n').split('\\n');\n\t\t\thelper.testFontLoad(font, value, context);\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\n\t\t\t\thelper.multilineText(multilines, context, {\n\t\t\t\t\ttextAlign,\n\t\t\t\t\ttextBaseline,\n\t\t\t\t\tcolor,\n\t\t\t\t\tfont,\n\t\t\t\t\ticons,\n\t\t\t\t\tpadding,\n\t\t\t\t\tlineHeight\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tmodule.exports = MultilineTextColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/NumberColumn.js\":\n/*!**************************************!*\\\n  !*** ./columns/type/NumberColumn.js ***!\n  \\**************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\tconst NumberStyle = __webpack_require__(/*! ../style/NumberStyle */ \"./columns/style/NumberStyle.js\");\n\tlet defaultFotmat;\n\tclass NumberColumn extends Column {\n\t\tstatic get defaultFotmat() {\n\t\t\treturn defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\n\t\t}\n\t\tstatic set defaultFotmat(fmt) {\n\t\t\tdefaultFotmat = fmt;\n\t\t}\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._format = option.format;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn NumberStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new NumberColumn(this);\n\t\t}\n\t\tget format() {\n\t\t\treturn this._format;\n\t\t}\n\t\twithFormat(format) {\n\t\t\tconst c = this.clone();\n\t\t\tc._format = format;\n\t\t\treturn c;\n\t\t}\n\t\tconvertInternal(value) {\n\t\t\tif (isNaN(value - 0)) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tconst format = this._format || NumberColumn.defaultFotmat;\n\t\t\treturn format.format(value - 0);\n\t\t}\n\t}\n\n\tmodule.exports = NumberColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/PercentCompleteBarColumn.js\":\n/*!**************************************************!*\\\n  !*** ./columns/type/PercentCompleteBarColumn.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst PercentCompleteBarStyle = __webpack_require__(/*! ../style/PercentCompleteBarStyle */ \"./columns/style/PercentCompleteBarStyle.js\");\n\tconst { getOrApply, str } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst Column = __webpack_require__(/*! ./Column */ \"./columns/type/Column.js\");\n\n\tconst MARGIN = 2;\n\n\tclass PercentCompleteBarColumn extends Column {\n\t\tconstructor(option = {}) {\n\t\t\tsuper(option);\n\t\t\tthis._min = option.min || 0;\n\t\t\tthis._max = option.max || this._min + 100;\n\t\t\tthis._formatter = option.formatter || (v => v);\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn PercentCompleteBarStyle;\n\t\t}\n\t\tclone() {\n\t\t\treturn new PercentCompleteBarColumn(this);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {\n\t\t\tsuper.drawInternal(this._formatter(value), context, style, helper, grid, info);\n\t\t\tconst {\n\t\t\t\tbarColor,\n\t\t\t\tbarBgColor,\n\t\t\t\tbarHeight\n\t\t\t} = style;\n\n\t\t\tlet svalue = value + '';\n\t\t\tif (str.endsWith(svalue, '%')) {\n\t\t\t\tsvalue = svalue.substr(0, svalue.length - 1);\n\t\t\t}\n\t\t\tconst num = svalue - 0;\n\t\t\tconst rate = num < this._min ? 0 : num > this._max ? 1 : (num - this._min) / (this._max - this._min);\n\n\t\t\thelper.drawWithClip(context, ctx => {\n\t\t\t\tconst rect = context.getRect();\n\n\t\t\t\tconst barMaxWidth = rect.width - MARGIN * 2 - 1 /**/;\n\t\t\t\tconst barTop = rect.bottom - MARGIN - barHeight - 1 /**/;\n\t\t\t\tconst barLeft = rect.left + MARGIN;\n\t\t\t\tctx.fillStyle = getOrApply(barBgColor, rate * 100) || '#f0f3f5';\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(barLeft, barTop, barMaxWidth, barHeight);\n\t\t\t\tctx.fill();\n\n\t\t\t\tconst barSize = Math.min(barMaxWidth * rate, barMaxWidth);\n\t\t\t\tctx.fillStyle = getOrApply(barColor, rate * 100) || '#20a8d8';\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.rect(barLeft, barTop, barSize, barHeight);\n\t\t\t\tctx.fill();\n\t\t\t});\n\t\t}\n\t}\n\tmodule.exports = PercentCompleteBarColumn;\n}\n\n/***/ }),\n\n/***/ \"./columns/type/columnUtils.js\":\n/*!*************************************!*\\\n  !*** ./columns/type/columnUtils.js ***!\n  \\*************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { isPromise } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst icons = __webpack_require__(/*! ../../internal/icons */ \"./internal/icons.js\");\n\tmodule.exports = {\n\t\tloadIcons(icon, context, helper, callback) {\n\t\t\tif (icon) {\n\t\t\t\tif (isPromise(icon)) {\n\t\t\t\t\ticon.then(i => {\n\t\t\t\t\t\tthis.loadIcon(i, context.toCurrentContext(), callback);\n\t\t\t\t\t});\n\t\t\t\t\ticon = null;\n\t\t\t\t} else {\n\t\t\t\t\tconst iconList = icons.toNormarizeArray(icon);\n\t\t\t\t\ticonList.forEach(i => {\n\t\t\t\t\t\thelper.testFontLoad(i.font, i.content, context);\n\t\t\t\t\t});\n\t\t\t\t\ticon = iconList;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcallback(icon, context);\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./core.js\":\n/*!*****************!*\\\n  !*** ./core.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst DrawGrid = __webpack_require__(/*! ./core/DrawGrid */ \"./core/DrawGrid.js\");\n\n\t/**\r\n  * core modules\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.core\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tDrawGrid\n\t};\n}\n\n/***/ }),\n\n/***/ \"./core/DrawGrid.js\":\n/*!**************************!*\\\n  !*** ./core/DrawGrid.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst {\n\t\tisDef,\n\t\tbrowser,\n\t\tisDescendantElement,\n\t\tarray,\n\t\tisPromise,\n\t\tevent: {\n\t\t\tisTouchEvent,\n\t\t\tgetMouseButtons,\n\t\t\tgetKeyCode,\n\t\t\tcancel: cancelEvent\n\t\t}\n\t} = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\n\tconst EventTarget = __webpack_require__(/*! ./EventTarget */ \"./core/EventTarget.js\");\n\tconst Rect = __webpack_require__(/*! ../internal/Rect */ \"./internal/Rect.js\");\n\tconst Scrollable = __webpack_require__(/*! ../internal/Scrollable */ \"./internal/Scrollable.js\");\n\tconst EventHandler = __webpack_require__(/*! ../internal/EventHandler */ \"./internal/EventHandler.js\");\n\tconst NumberMap = __webpack_require__(/*! ../internal/NumberMap */ \"./internal/NumberMap.js\");\n\tconst style = __webpack_require__(/*! ../internal/style */ \"./internal/style.js\");\n\tconst calc = __webpack_require__(/*! ../internal/calc */ \"./internal/calc.js\");\n\tconst hiDPI = __webpack_require__(/*! ../internal/hiDPI */ \"./internal/hiDPI.js\");\n\t//protected symbol\n\tconst { PROTECTED_SYMBOL: _ } = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\");\n\n\tfunction createRootElement() {\n\t\tconst element = document.createElement('div');\n\t\telement.classList.add('cheetah-grid');\n\t\treturn element;\n\t}\n\n\tconst KEY_END = 35;\n\tconst KEY_HOME = 36;\n\tconst KEY_LEFT = 37;\n\tconst KEY_UP = 38;\n\tconst KEY_RIGHT = 39;\n\tconst KEY_DOWN = 40;\n\tconst KEY_ALPHA_C = 67;\n\n\tconst EVENT_TYPE = {\n\t\tCLICK_CELL: 'click_cell',\n\t\tDBLCLICK_CELL: 'dblclick_cell',\n\t\tDBLTAP_CELL: 'dbltap_cell',\n\t\tMOUSEDOWN_CELL: 'mousedown_cell',\n\t\tMOUSEUP_CELL: 'mouseup_cell',\n\t\tSELECTED_CELL: 'selected_cell',\n\t\tKEYDOWN: 'keydown',\n\t\tMOUSEMOVE_CELL: 'mousemove_cell',\n\t\tMOUSEENTER_CELL: 'mouseenter_cell',\n\t\tMOUSELEAVE_CELL: 'mouseleave_cell',\n\t\tMOUSEOVER_CELL: 'mouseover_cell',\n\t\tMOUSEOUT_CELL: 'mouseout_cell',\n\t\tINPUT_CELL: 'input_cell',\n\t\tEDITABLEINPUT_CELL: 'editableinput_cell',\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL: 'modify_status_editableinput_cell',\n\t\tRESIZE_COLUMN: 'resize_column',\n\t\tSCROLL: 'scroll'\n\t};\n\n\t//private methods\n\tfunction _vibrate(e) {\n\t\tif (navigator.vibrate && isTouchEvent(e)) {\n\t\t\tnavigator.vibrate(50);\n\t\t}\n\t}\n\tfunction _getTargetRowAt(grid, absoluteY) {\n\t\tconst internal = grid.getTargetRowAtInternal(absoluteY);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tconst findBefore = (startRow, startBottom) => {\n\t\t\tlet bottom = startBottom;\n\t\t\tfor (let row = startRow; row >= 0; row--) {\n\t\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\t\tconst top = bottom - height;\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\trow\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tbottom = top;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tconst findAfter = (startRow, startBottom) => {\n\t\t\tlet top = startBottom - _getRowHeight(grid, startRow);\n\t\t\tconst { rowCount } = grid[_];\n\t\t\tfor (let row = startRow; row < rowCount; row++) {\n\t\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\t\tconst bottom = top + height;\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\trow\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\ttop = bottom;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tconst candRow = Math.min(Math.ceil(absoluteY / grid[_].defaultRowHeight), grid.rowCount - 1);\n\t\tconst bottom = _getRowsHeight(grid, 0, candRow);\n\t\tif (absoluteY >= bottom) {\n\t\t\treturn findAfter(candRow, bottom);\n\t\t} else {\n\t\t\treturn findBefore(candRow, bottom);\n\t\t}\n\t}\n\tfunction _getTargetColAt(grid, absoluteX) {\n\t\tlet left = 0;\n\t\tconst { colCount } = grid[_];\n\t\tfor (let col = 0; col < colCount; col++) {\n\t\t\tconst width = _getColWidth(grid, col);\n\t\t\tconst right = left + width;\n\t\t\tif (right > absoluteX) {\n\t\t\t\treturn {\n\t\t\t\t\tleft,\n\t\t\t\t\tcol\n\t\t\t\t};\n\t\t\t}\n\t\t\tleft = right;\n\t\t}\n\t\treturn null;\n\t}\n\tfunction _getTargetFrozenRowAt(grid, absoluteY) {\n\t\tif (!grid[_].frozenRowCount) {\n\t\t\treturn null;\n\t\t}\n\t\tlet { top } = grid[_].scroll;\n\t\tconst rowCount = grid[_].frozenRowCount;\n\t\tfor (let row = 0; row < rowCount; row++) {\n\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\tconst bottom = top + height;\n\t\t\tif (bottom > absoluteY) {\n\t\t\t\treturn {\n\t\t\t\t\ttop,\n\t\t\t\t\trow\n\t\t\t\t};\n\t\t\t}\n\t\t\ttop = bottom;\n\t\t}\n\t\treturn null;\n\t}\n\tfunction _getTargetFrozenColAt(grid, absoluteX) {\n\t\tif (!grid[_].frozenColCount) {\n\t\t\treturn null;\n\t\t}\n\t\tlet { left } = grid[_].scroll;\n\t\tconst colCount = grid[_].frozenColCount;\n\t\tfor (let col = 0; col < colCount; col++) {\n\t\t\tconst width = _getColWidth(grid, col);\n\t\t\tconst right = left + width;\n\t\t\tif (right > absoluteX) {\n\t\t\t\treturn {\n\t\t\t\t\tleft,\n\t\t\t\t\tcol\n\t\t\t\t};\n\t\t\t}\n\t\t\tleft = right;\n\t\t}\n\t\treturn null;\n\t}\n\tfunction _getFrozenRowsRect(grid) {\n\t\tif (!grid[_].frozenRowCount) {\n\t\t\treturn null;\n\t\t}\n\t\tconst { top } = grid[_].scroll;\n\t\tlet height = 0;\n\t\tconst rowCount = grid[_].frozenRowCount;\n\t\tfor (let row = 0; row < rowCount; row++) {\n\t\t\theight += _getRowHeight(grid, row);\n\t\t}\n\t\treturn new Rect(grid[_].scroll.left, top, grid[_].canvas.width, height);\n\t}\n\tfunction _getFrozenColsRect(grid) {\n\t\tif (!grid[_].frozenColCount) {\n\t\t\treturn null;\n\t\t}\n\t\tconst { left } = grid[_].scroll;\n\t\tlet width = 0;\n\t\tconst colCount = grid[_].frozenColCount;\n\t\tfor (let col = 0; col < colCount; col++) {\n\t\t\twidth += _getColWidth(grid, col);\n\t\t}\n\t\treturn new Rect(left, grid[_].scroll.top, width, grid[_].canvas.height);\n\t}\n\tfunction _isCellDrawing(grid, col, row) {\n\t\tif (!grid[_].drawCells[row]) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !!grid[_].drawCells[row][col];\n\t}\n\tfunction _putCellDrawing(grid, col, row, context) {\n\t\tif (!grid[_].drawCells[row]) {\n\t\t\tgrid[_].drawCells[row] = {};\n\t\t}\n\t\tgrid[_].drawCells[row][col] = context;\n\t}\n\tfunction _removeCellDrawing(grid, col, row) {\n\t\tif (!grid[_].drawCells[row]) {\n\t\t\treturn;\n\t\t}\n\t\tdelete grid[_].drawCells[row][col];\n\t\tif (Object.keys(grid[_].drawCells[row]).length === 0) {\n\t\t\tdelete grid[_].drawCells[row];\n\t\t}\n\t}\n\tfunction _drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\n\t\tconst rect = new Rect(absoluteLeft - visibleRect.left, absoluteTop - visibleRect.top, width, height);\n\n\t\tconst drawRect = Rect.bounds(Math.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left, Math.max(absoluteTop, skipAbsoluteTop) - visibleRect.top, rect.right, rect.bottom);\n\n\t\tif (drawRect.height > 0 && drawRect.width > 0) {\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tconst dcContext = new DrawCellContext(col, row, ctx, rect, drawRect, _isCellDrawing(grid, col, row), grid[_].selection, drawLayers);\n\t\t\t\tconst p = grid.onDrawCell(col, row, dcContext);\n\t\t\t\tif (isPromise(p)) {\n\t\t\t\t\t//\n\t\t\t\t\t_putCellDrawing(grid, col, row, dcContext);\n\n\t\t\t\t\tconst pCol = col;\n\t\t\t\t\tdcContext._delayMode(grid, () => {\n\t\t\t\t\t\t_removeCellDrawing(grid, pCol, row);\n\t\t\t\t\t});\n\t\t\t\t\tp.then(() => {\n\t\t\t\t\t\tdcContext.terminate();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\n\t\tconst { colCount } = grid[_];\n\t\tconst drawOuter = (col, absoluteLeft) => {\n\t\t\t//\n\t\t\tif (col >= colCount - 1 && grid[_].canvas.width > absoluteLeft - visibleRect.left) {\n\t\t\t\tconst outerLeft = absoluteLeft - visibleRect.left;\n\t\t\t\tctx.save();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\n\t\t\t\tctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\n\t\t\t\tctx.fill();\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t};\n\n\t\tlet skipAbsoluteLeft = 0;\n\t\tif (initFrozenCol) {\n\t\t\tlet absoluteLeft = initFrozenCol.left;\n\t\t\tconst count = grid[_].frozenColCount;\n\t\t\tfor (let { col } = initFrozenCol; col < count; col++) {\n\t\t\t\tconst width = _getColWidth(grid, col);\n\n\t\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, 0, drawLayers);\n\n\t\t\t\tabsoluteLeft += width;\n\t\t\t\tif (drawRight <= absoluteLeft) {\n\t\t\t\t\t//\n\t\t\t\t\tdrawOuter(col, absoluteLeft);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tskipAbsoluteLeft = absoluteLeft;\n\t\t}\n\n\t\tlet absoluteLeft = initCol.left;\n\t\tfor (let { col } = initCol; col < colCount; col++) {\n\t\t\tconst width = _getColWidth(grid, col);\n\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect, skipAbsoluteTop, skipAbsoluteLeft, drawLayers);\n\n\t\t\tabsoluteLeft += width;\n\t\t\tif (drawRight <= absoluteLeft) {\n\t\t\t\t//\n\t\t\t\tdrawOuter(col, absoluteLeft);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdrawOuter(colCount - 1, absoluteLeft);\n\t}\n\tfunction _invalidateRect(grid, drawRect) {\n\t\tconst visibleRect = _getVisibleRect(grid);\n\t\tconst { rowCount } = grid[_];\n\t\tconst ctx = grid._getInitContext();\n\n\t\tconst initRow = _getTargetRowAt(grid, Math.max(visibleRect.top, drawRect.top)) || {\n\t\t\ttop: _getRowsHeight(grid, 0, rowCount - 1),\n\t\t\trow: rowCount\n\t\t};\n\t\tconst initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\n\t\t\tleft: _getColsWidth(grid, 0, grid[_].colCount - 1),\n\t\t\tcol: grid[_].colCount\n\t\t};\n\t\tconst drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\n\t\tconst drawRight = Math.min(visibleRect.right, drawRect.right);\n\n\t\tconst initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\n\t\tconst initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\n\n\t\tconst drawLayers = new DrawLayers();\n\n\t\tconst drawOuter = (row, absoluteTop) => {\n\t\t\t//\n\t\t\tif (row >= rowCount - 1 && grid[_].canvas.height > absoluteTop - visibleRect.top) {\n\t\t\t\tconst outerTop = absoluteTop - visibleRect.top;\n\t\t\t\tctx.save();\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\n\t\t\t\tctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\n\t\t\t\tctx.fill();\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t};\n\n\t\tlet skipAbsoluteTop = 0;\n\t\tif (initFrozenRow) {\n\t\t\tlet absoluteTop = initFrozenRow.top;\n\t\t\tconst count = grid[_].frozenRowCount;\n\t\t\tfor (let { row } = initFrozenRow; row < count; row++) {\n\t\t\t\tconst height = _getRowHeight(grid, row);\n\t\t\t\t_drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, 0, drawLayers);\n\t\t\t\tabsoluteTop += height;\n\t\t\t\tif (drawBottom <= absoluteTop) {\n\t\t\t\t\t//\n\t\t\t\t\tdrawOuter(row, absoluteTop);\n\t\t\t\t\tdrawLayers.draw(ctx);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tskipAbsoluteTop = absoluteTop;\n\t\t}\n\n\t\tlet absoluteTop = initRow.top;\n\t\tfor (let { row } = initRow; row < rowCount; row++) {\n\t\t\tconst height = _getRowHeight(grid, row);\n\n\t\t\t//\n\t\t\t_drawRow(grid, ctx, initFrozenCol, initCol, drawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers);\n\n\t\t\tabsoluteTop += height;\n\t\t\tif (drawBottom <= absoluteTop) {\n\t\t\t\t//\n\t\t\t\tdrawOuter(row, absoluteTop);\n\t\t\t\tdrawLayers.draw(ctx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tdrawOuter(rowCount - 1, absoluteTop);\n\n\t\tdrawLayers.draw(ctx);\n\t}\n\n\tfunction _toPxWidth(grid, width) {\n\t\treturn Math.round(calc.toPx(width, grid[_].calcWidthContext));\n\t}\n\n\tfunction _getDefaultColPxWidth(grid) {\n\t\treturn _toPxWidth(grid, grid.defaultColWidth);\n\t}\n\n\tfunction _adjustColWidth(grid, col, orgWidth) {\n\t\tconst limit = grid[_].colWidthsLimit[col];\n\t\tif (!limit) {\n\t\t\treturn orgWidth;\n\t\t}\n\n\t\tif (limit.min) {\n\t\t\tconst min = _toPxWidth(grid, limit.min);\n\t\t\tif (min > orgWidth) {\n\t\t\t\treturn min;\n\t\t\t}\n\t\t}\n\t\tif (limit.max) {\n\t\t\tconst max = _toPxWidth(grid, limit.max);\n\t\t\tif (max < orgWidth) {\n\t\t\t\treturn max;\n\t\t\t}\n\t\t}\n\t\treturn orgWidth;\n\t}\n\n\tfunction _getColWidth(grid, col) {\n\t\tconst width = grid[_].colWidthsMap.get(col);\n\t\tif (width) {\n\t\t\treturn _adjustColWidth(grid, col, _toPxWidth(grid, width));\n\t\t}\n\t\treturn _getDefaultColPxWidth(grid);\n\t}\n\tfunction _setColWidth(grid, col, width) {\n\t\tgrid[_].colWidthsMap.put(col, width);\n\t}\n\tfunction _getColsWidth(grid, startCol, endCol) {\n\t\tconst colCount = endCol - startCol + 1;\n\t\tlet w = _getDefaultColPxWidth(grid) * colCount;\n\t\tgrid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\n\t\t});\n\t\treturn w;\n\t}\n\n\tfunction _getRowHeight(grid, row) {\n\t\tconst internal = grid.getRowHeightInternal(row);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tconst height = grid[_].rowHeightsMap.get(row);\n\t\tif (height) {\n\t\t\treturn height;\n\t\t}\n\t\treturn grid[_].defaultRowHeight;\n\t}\n\tfunction _setRowHeight(grid, row, height) {\n\t\tgrid[_].rowHeightsMap.put(row, height);\n\t}\n\tfunction _getRowsHeight(grid, startRow, endRow) {\n\t\tconst internal = grid.getRowsHeightInternal(startRow, endRow);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tconst rowCount = endRow - startRow + 1;\n\t\tlet h = grid[_].defaultRowHeight * rowCount;\n\t\tgrid[_].rowHeightsMap.each(startRow, endRow, height => {\n\t\t\th += height - grid[_].defaultRowHeight;\n\t\t});\n\t\treturn h;\n\t}\n\n\tfunction _getScrollWidth(grid) {\n\t\tlet w = _getDefaultColPxWidth(grid) * grid[_].colCount;\n\t\tgrid[_].colWidthsMap.eachAll((width, col) => {\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\n\t\t});\n\t\treturn w;\n\t}\n\tfunction _getScrollHeight(grid, row) {\n\t\tconst internal = grid.getScrollHeightInternal(row);\n\t\tif (isDef(internal)) {\n\t\t\treturn internal;\n\t\t}\n\t\tlet h = grid[_].defaultRowHeight * grid[_].rowCount;\n\t\tgrid[_].rowHeightsMap.eachAll(height => {\n\t\t\th += height - grid[_].defaultRowHeight;\n\t\t});\n\t\treturn h;\n\t}\n\tfunction _onScroll(grid, e) {\n\t\tconst lastLeft = grid[_].scroll.left;\n\t\tconst lastTop = grid[_].scroll.top;\n\t\tconst moveX = grid[_].scrollable.scrollLeft - lastLeft;\n\t\tconst moveY = grid[_].scrollable.scrollTop - lastTop;\n\n\t\t//\n\t\tgrid[_].scroll = {\n\t\t\tleft: grid[_].scrollable.scrollLeft,\n\t\t\ttop: grid[_].scrollable.scrollTop\n\t\t};\n\t\tconst visibleRect = _getVisibleRect(grid);\n\t\tif (Math.abs(moveX) >= visibleRect.width || Math.abs(moveY) >= visibleRect.height) {\n\t\t\t//\n\t\t\t_invalidateRect(grid, visibleRect);\n\t\t} else {\n\t\t\t//\n\t\t\tgrid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\n\n\t\t\tif (moveX !== 0) {\n\t\t\t\t//\n\t\t\t\tconst redrawRect = visibleRect.copy();\n\t\t\t\tif (moveX < 0) {\n\t\t\t\t\tredrawRect.width = -moveX;\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tconst frozenRect = _getFrozenColsRect(grid);\n\t\t\t\t\t\tredrawRect.width += frozenRect.width;\n\t\t\t\t\t}\n\t\t\t\t} else if (moveX > 0) {\n\t\t\t\t\tredrawRect.left = redrawRect.right - moveX;\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t_invalidateRect(grid, redrawRect);\n\n\t\t\t\tif (moveX > 0) {\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenColsRect(grid));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (moveY !== 0) {\n\t\t\t\t//\n\t\t\t\tconst redrawRect = visibleRect.copy();\n\t\t\t\tif (moveY < 0) {\n\t\t\t\t\tredrawRect.height = -moveY;\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\n\t\t\t\t\t\tredrawRect.height += frozenRect.height;\n\t\t\t\t\t}\n\t\t\t\t} else if (moveY > 0) {\n\t\t\t\t\tredrawRect.top = redrawRect.bottom - moveY;\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t_invalidateRect(grid, redrawRect);\n\n\t\t\t\tif (moveY > 0) {\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenRowsRect(grid));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _onKeyDownMove(grid, e) {\n\t\tconst { shiftKey } = e;\n\t\tconst keyCode = getKeyCode(e);\n\t\tconst focusCell = shiftKey ? grid.selection._focus : grid.selection._sel;\n\t\tif (keyCode === KEY_LEFT) {\n\t\t\tconst col = grid.getMoveLeftColByKeyDownInternal(focusCell);\n\t\t\tif (col < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_UP) {\n\t\t\tconst row = grid.getMoveUpRowByKeyDownInternal(focusCell);\n\t\t\tif (row < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_RIGHT) {\n\t\t\tconst col = grid.getMoveRightColByKeyDownInternal(focusCell);\n\t\t\tif (grid.colCount <= col) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_DOWN) {\n\t\t\tconst row = grid.getMoveDownRowByKeyDownInternal(focusCell);\n\t\t\tif (grid.rowCount <= row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_HOME) {\n\t\t\tconst row = e.ctrlKey ? 0 : focusCell.row;\n\t\t\t_moveFocusCell(grid, 0, row, e.shiftKey);\n\t\t\tcancelEvent(e);\n\t\t} else if (keyCode === KEY_END) {\n\t\t\tconst row = e.ctrlKey ? grid.rowCount - 1 : focusCell.row;\n\t\t\t_moveFocusCell(grid, grid.colCount - 1, row, shiftKey);\n\t\t\tcancelEvent(e);\n\t\t}\n\t}\n\tfunction _moveFocusCell(grid, col, row, shiftKey) {\n\t\tconst offset = grid.getOffsetInvalidateCells();\n\n\t\tfunction extendRange(range) {\n\t\t\tif (offset > 0) {\n\t\t\t\trange.start.col -= offset;\n\t\t\t\trange.start.row -= offset;\n\t\t\t\trange.end.col += offset;\n\t\t\t\trange.end.row += offset;\n\t\t\t}\n\t\t\treturn range;\n\t\t}\n\n\t\tconst beforeRange = extendRange(grid.selection.range);\n\t\tconst beforeRect = grid.getCellsRect(beforeRange.start.col, beforeRange.start.row, beforeRange.end.col, beforeRange.end.row);\n\n\t\tgrid.selection._setFocusCell(col, row, shiftKey);\n\t\tgrid.makeVisibleCell(col, row);\n\t\tgrid.focusCell(col, row);\n\n\t\tconst afterRange = extendRange(grid.selection.range);\n\t\tconst afterRect = grid.getCellsRect(afterRange.start.col, afterRange.start.row, afterRange.end.col, afterRange.end.row);\n\n\t\tif (afterRect.intersection(beforeRect)) {\n\t\t\tconst invalidateRect = Rect.max(afterRect, beforeRect);\n\t\t\t_invalidateRect(grid, invalidateRect);\n\t\t} else {\n\t\t\t_invalidateRect(grid, beforeRect);\n\t\t\t_invalidateRect(grid, afterRect);\n\t\t}\n\t}\n\tfunction _getMouseAbstractPoint(grid, e) {\n\t\tif (isTouchEvent(e)) {\n\t\t\te = e.changedTouches[0];\n\t\t}\n\t\tconst clientX = e.clientX || e.pageX + window.scrollX;\n\t\tconst clientY = e.clientY || e.pageY + window.scrollY;\n\t\tconst rect = grid[_].canvas.getBoundingClientRect();\n\t\tif (rect.right <= clientX) {\n\t\t\treturn null;\n\t\t}\n\t\tif (rect.bottom <= clientY) {\n\t\t\treturn null;\n\t\t}\n\t\tconst x = clientX - rect.left + grid[_].scroll.left;\n\t\tconst y = clientY - rect.top + grid[_].scroll.top;\n\t\treturn { x, y };\n\t}\n\n\tfunction _bindEvents(grid) {\n\t\tconst getCellEventArgsSet = e => {\n\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\n\t\t\tif (!abstractPos) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tconst cell = grid.getCellAt(abstractPos.x, abstractPos.y);\n\t\t\tif (cell.col < 0 || cell.row < 0) {\n\t\t\t\treturn {\n\t\t\t\t\tabstractPos,\n\t\t\t\t\tcell\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst eventArgs = {\n\t\t\t\tcol: cell.col,\n\t\t\t\trow: cell.row,\n\t\t\t\tevent: e\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tabstractPos,\n\t\t\t\tcell,\n\t\t\t\teventArgs\n\t\t\t};\n\t\t};\n\t\tconst canResizeColumn = col => {\n\t\t\tconst limit = grid[_].colWidthsLimit[col];\n\t\t\tif (!limit || !limit.min || !limit.max) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn limit.max !== limit.min;\n\t\t};\n\t\tgrid[_].handler.on(grid[_].element, 'mousedown', e => {\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\n\t\t\tconst { abstractPos, eventArgs } = eventArgsSet;\n\t\t\tif (!abstractPos) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (eventArgs) {\n\t\t\t\tconst results = grid.fireListeners(EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\n\t\t\t\tif (array.findIndex(results, v => !v) >= 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (getMouseButtons(e) !== 1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n\t\t\t\t//\n\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\n\t\t\t} else {\n\t\t\t\t//\n\t\t\t\tgrid[_].cellSelector.start(e);\n\t\t\t}\n\t\t});\n\t\tlet doubleTapBefore = null;\n\t\tlet longTouchId = null;\n\t\tgrid[_].handler.on(grid[_].element, 'touchstart', e => {\n\n\t\t\tif (!doubleTapBefore) {\n\t\t\t\tdoubleTapBefore = getCellEventArgsSet(e).eventArgs;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tdoubleTapBefore = null;\n\t\t\t\t}, 350);\n\t\t\t} else {\n\t\t\t\tconst { eventArgs } = getCellEventArgsSet(e);\n\t\t\t\tif (eventArgs && eventArgs.col === doubleTapBefore.col && eventArgs.row === doubleTapBefore.row) {\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.DBLTAP_CELL, eventArgs);\n\t\t\t\t}\n\n\t\t\t\tdoubleTapBefore = null;\n\n\t\t\t\tif (e.defaultPrevented) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlongTouchId = setTimeout(() => {\n\t\t\t\t//\n\t\t\t\tlongTouchId = null;\n\t\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\n\t\t\t\tif (!abstractPos) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\n\t\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n\t\t\t\t\t//\n\t\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\n\t\t\t\t} else {\n\t\t\t\t\t//\n\t\t\t\t\tgrid[_].cellSelector.start(e);\n\t\t\t\t}\n\t\t\t}, 500);\n\t\t});\n\n\t\tfunction cancel(e) {\n\t\t\tif (longTouchId) {\n\t\t\t\tclearTimeout(longTouchId);\n\t\t\t\tlongTouchId = null;\n\t\t\t}\n\t\t}\n\t\tgrid[_].handler.on(grid[_].element, 'touchcancel', cancel);\n\t\tgrid[_].handler.on(grid[_].element, 'touchmove', cancel);\n\t\tgrid[_].handler.on(grid[_].element, 'touchend', e => {\n\t\t\tif (longTouchId) {\n\t\t\t\tclearTimeout(longTouchId);\n\t\t\t\tgrid[_].cellSelector.select(e);\n\t\t\t\tlongTouchId = null;\n\t\t\t}\n\t\t});\n\n\t\tlet isMouseover = false;\n\t\tlet mouseEnterCell = null;\n\t\tlet mouseOverCell = null;\n\t\tfunction onMouseenterCell(cell) {\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEENTER_CELL, cell);\n\t\t\tmouseEnterCell = cell;\n\t\t}\n\t\tfunction onMouseleaveCell() {\n\t\t\tconst beforeMouseCell = mouseEnterCell;\n\t\t\tmouseEnterCell = null;\n\t\t\tif (beforeMouseCell) {\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSELEAVE_CELL, {\n\t\t\t\t\tcol: beforeMouseCell.col,\n\t\t\t\t\trow: beforeMouseCell.row\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tfunction onMouseoverCell(cell) {\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOVER_CELL, cell);\n\t\t\tmouseOverCell = cell;\n\t\t}\n\t\tfunction onMouseoutCell() {\n\t\t\tconst beforeMouseCell = mouseOverCell;\n\t\t\tmouseOverCell = null;\n\t\t\tif (beforeMouseCell) {\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOUT_CELL, {\n\t\t\t\t\tcol: beforeMouseCell.col,\n\t\t\t\t\trow: beforeMouseCell.row\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tconst scrollElement = grid[_].scrollable.getElement();\n\t\tgrid[_].handler.on(scrollElement, 'mouseover', e => {\n\t\t\tisMouseover = true;\n\t\t});\n\t\tgrid[_].handler.on(scrollElement, 'mouseout', e => {\n\t\t\tisMouseover = false;\n\t\t\tonMouseoutCell();\n\t\t});\n\n\t\tgrid[_].handler.on(grid[_].element, 'mouseleave', e => {\n\t\t\tonMouseleaveCell();\n\t\t});\n\n\t\tgrid[_].handler.on(grid[_].element, 'mousemove', e => {\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\n\t\t\tconst { abstractPos, eventArgs } = eventArgsSet;\n\t\t\tif (eventArgs) {\n\t\t\t\tconst beforeMouseCell = mouseEnterCell;\n\t\t\t\tif (beforeMouseCell) {\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\t\t\t\t\tif (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\n\t\t\t\t\t\tonMouseoutCell();\n\t\t\t\t\t\tonMouseleaveCell();\n\t\t\t\t\t\tconst cell = {\n\t\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t\t};\n\t\t\t\t\t\tonMouseenterCell(cell);\n\t\t\t\t\t\tif (isMouseover) {\n\t\t\t\t\t\t\tonMouseoverCell(cell);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (isMouseover && !mouseOverCell) {\n\t\t\t\t\t\tonMouseoverCell({\n\t\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst cell = {\n\t\t\t\t\t\tcol: eventArgs.col,\n\t\t\t\t\t\trow: eventArgs.row\n\t\t\t\t\t};\n\t\t\t\t\tonMouseenterCell(cell);\n\t\t\t\t\tif (isMouseover) {\n\t\t\t\t\t\tonMouseoverCell(cell);\n\t\t\t\t\t}\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tonMouseoutCell();\n\t\t\t\tonMouseleaveCell();\n\t\t\t}\n\t\t\tif (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { style } = grid[_].element;\n\t\t\tif (!abstractPos) {\n\t\t\t\tif (style.cursor === 'col-resize') {\n\t\t\t\t\tstyle.cursor = '';\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\n\t\t\t\tstyle.cursor = 'col-resize';\n\t\t\t} else {\n\t\t\t\tif (style.cursor === 'col-resize') {\n\t\t\t\t\tstyle.cursor = '';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tgrid[_].handler.on(grid[_].element, 'click', e => {\n\t\t\tif (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.CLICK_CELL)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { eventArgs } = getCellEventArgsSet(e);\n\t\t\tif (!eventArgs) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.fireListeners(EVENT_TYPE.CLICK_CELL, eventArgs);\n\t\t});\n\t\tgrid[_].handler.on(grid[_].element, 'dblclick', e => {\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.DBLCLICK_CELL)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { eventArgs } = getCellEventArgsSet(e);\n\t\t\tif (!eventArgs) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgrid.fireListeners(EVENT_TYPE.DBLCLICK_CELL, eventArgs);\n\t\t});\n\t\tgrid[_].focusControl.listen('keydown', (keyCode, e) => {\n\t\t\tgrid.fireListeners(EVENT_TYPE.KEYDOWN, keyCode, e);\n\t\t});\n\t\tgrid[_].selection.listen(EVENT_TYPE.SELECTED_CELL, data => {\n\t\t\tgrid.fireListeners(EVENT_TYPE.SELECTED_CELL, data, data.selected);\n\t\t});\n\n\t\tgrid[_].scrollable.onScroll(e => {\n\t\t\t_onScroll(grid, e);\n\t\t\tgrid.fireListeners(EVENT_TYPE.SCROLL, { event: e });\n\t\t});\n\t\tgrid[_].focusControl.onKeyDownMove(e => {\n\t\t\t_onKeyDownMove(grid, e);\n\t\t});\n\t\tgrid.listen('copydata', range => {\n\t\t\tlet copyValue = '';\n\t\t\tfor (let { row } = range.start; row <= range.end.row; row++) {\n\t\t\t\tfor (let { col } = range.start; col <= range.end.col; col++) {\n\t\t\t\t\tconst copyCellValue = grid.getCopyCellValue(col, row);\n\t\t\t\t\tif (window.Promise && copyCellValue instanceof window.Promise) {\n\t\t\t\t\t\t//\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst strCellValue = '' + copyCellValue;\n\t\t\t\t\t\tif (strCellValue.match(/^\\[object .*\\]$/)) {\n\t\t\t\t\t\t\t//object \n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcopyValue += strCellValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (col < range.end.col) {\n\t\t\t\t\t\tcopyValue += '\\t';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcopyValue += '\\n';\n\t\t\t}\n\t\t\treturn copyValue;\n\t\t});\n\t\tgrid[_].focusControl.onCopy(e => array.find(grid.fireListeners('copydata', grid[_].selection.range), isDef));\n\t\tgrid[_].focusControl.onInput(value => {\n\t\t\tconst { col, row } = grid[_].selection.select;\n\t\t\tgrid.fireListeners(EVENT_TYPE.INPUT_CELL, { col, row, value });\n\t\t});\n\t\tgrid.bindEventsInternal();\n\t}\n\n\tfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\n\t\tif (grid[_].frozenRowCount <= 0) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst frozenRect = _getFrozenRowsRect(grid);\n\t\tif (!frozenRect.inPoint(abstractX, abstractY)) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst cell = grid.getCellAt(abstractX, abstractY);\n\t\tconst cellRect = grid.getCellRect(cell.col, cell.row);\n\t\tif (abstractX < cellRect.left + offset) {\n\t\t\treturn cell.col - 1;\n\t\t}\n\t\tif (cellRect.right - offset < abstractX) {\n\t\t\treturn cell.col;\n\t\t}\n\t\treturn -1;\n\t}\n\tfunction _getVisibleRect(grid) {\n\t\treturn new Rect(grid[_].scroll.left, grid[_].scroll.top, grid[_].canvas.width, grid[_].canvas.height);\n\t}\n\tfunction _getScrollableVisibleRect(grid) {\n\t\tlet frozenColsWidth = 0;\n\t\tif (grid[_].frozenColCount > 0) {\n\t\t\t//\n\t\t\tconst frozenRect = _getFrozenColsRect(grid);\n\t\t\tfrozenColsWidth = frozenRect.width;\n\t\t}\n\t\tlet frozenRowsHeight = 0;\n\t\tif (grid[_].frozenRowCount > 0) {\n\t\t\t//\n\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\n\t\t\tfrozenRowsHeight = frozenRect.height;\n\t\t}\n\t\treturn new Rect(grid[_].scroll.left + frozenColsWidth, grid[_].scroll.top + frozenRowsHeight, grid[_].canvas.width - frozenColsWidth, grid[_].canvas.height - frozenRowsHeight);\n\t}\n\n\tfunction _toRelativeRect(grid, absoluteRect) {\n\t\tconst rect = absoluteRect.copy();\n\t\tconst visibleRect = _getVisibleRect(grid);\n\t\trect.offsetLeft(-visibleRect.left);\n\t\trect.offsetTop(-visibleRect.top);\n\n\t\treturn rect;\n\t}\n\t//end private methods\n\t//\n\t//\n\t//\n\t//\n\n\t/**\r\n  * managing mouse down moving\r\n  * @private\r\n  */\n\tclass BaseMouseDownMover {\n\t\tconstructor(grid) {\n\t\t\tthis._grid = grid;\n\t\t\tthis._handler = new EventHandler();\n\t\t\tthis._events = {};\n\t\t\tthis._started = false;\n\t\t\tthis._moved = false;\n\t\t}\n\t\tmoving(e) {\n\t\t\treturn !!this._started;\n\t\t}\n\t\tlastMoving(e) {\n\t\t\t// mouseupclick\n\t\t\tif (this.moving(e)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst last = this._mouseEndPoint;\n\t\t\tif (!last) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst pt = _getMouseAbstractPoint(this._grid, e);\n\t\t\treturn pt.x === last.x && pt.y === last.y;\n\t\t}\n\t\t_bindMoveAndUp(e) {\n\t\t\tif (!isTouchEvent(e)) {\n\t\t\t\tthis._events.mousemove = this._handler.on(document.body, 'mousemove', e => this._mouseMove(e));\n\t\t\t\tthis._events.mouseup = this._handler.on(document.body, 'mouseup', e => this._mouseUp(e));\n\t\t\t} else {\n\t\t\t\tthis._events.touchmove = this._handler.on(document.body, 'touchmove', e => this._mouseMove(e), { passive: false });\n\t\t\t\tthis._events.touchend = this._handler.on(document.body, 'touchend', e => this._mouseUp(e));\n\t\t\t\tthis._events.touchcancel = this._handler.on(document.body, 'touchcancel', e => this._mouseUp(e));\n\t\t\t}\n\t\t\tthis._started = true;\n\t\t\tthis._moved = false;\n\t\t}\n\t\t_mouseMove(e) {\n\t\t\tif (!isTouchEvent(e)) {\n\t\t\t\tif (getMouseButtons(e) !== 1) {\n\t\t\t\t\tthis._mouseUp(e);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._moved = this._moveInternal(e) || this._moved /*calculation on after*/;\n\n\t\t\tcancelEvent(e);\n\t\t}\n\t\t_moveInternal(e) {\n\t\t\t//protected\n\t\t}\n\t\t_mouseUp(e) {\n\t\t\tthis._handler.off(this._events.mousemove);\n\t\t\tthis._handler.off(this._events.touchmove);\n\t\t\tthis._handler.off(this._events.mouseup);\n\t\t\tthis._handler.off(this._events.touchend);\n\t\t\t// this._handler.off(this._events.mouseleave);\n\t\t\tthis._handler.off(this._events.touchcancel);\n\n\t\t\tthis._started = false;\n\n\t\t\tthis._upInternal(e);\n\n\t\t\t// mouseupclick\n\t\t\tif (this._moved) {\n\t\t\t\t//\n\t\t\t\tthis._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._mouseEndPoint = null;\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t\t_upInternal(e) {\n\t\t\t//protected\n\t\t}\n\t\tdispose() {\n\t\t\tthis._handler.dispose();\n\t\t}\n\t}\n\n\t/**\r\n  * managing cell selection operation with mouse\r\n  * @private\r\n  */\n\tclass CellSelector extends BaseMouseDownMover {\n\t\tstart(e) {\n\t\t\tconst cell = this._getTargetCell(e);\n\t\t\tif (!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\n\n\t\t\tthis._bindMoveAndUp(e);\n\n\t\t\tthis._cell = cell;\n\n\t\t\tcancelEvent(e);\n\t\t\t_vibrate(e);\n\t\t}\n\t\tselect(e) {\n\t\t\tconst cell = this._getTargetCell(e);\n\t\t\tif (!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\n\t\t\tthis._cell = cell;\n\t\t}\n\t\t_moveInternal(e) {\n\t\t\tconst cell = this._getTargetCell(e);\n\t\t\tif (!cell || this._cell.col === cell.col && this._cell.row === cell.row) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, true);\n\n\t\t\t//make visible\n\t\t\tconst makeVisibleCol = (() => {\n\t\t\t\tif (cell.col < this._cell.col && 0 < cell.col) {\n\t\t\t\t\t// move left\n\t\t\t\t\treturn cell.col - 1;\n\t\t\t\t} else if (this._cell.col < cell.col && cell.col + 1 < this._grid.colCount) {\n\t\t\t\t\t// move right\n\t\t\t\t\treturn cell.col + 1;\n\t\t\t\t}\n\t\t\t\treturn cell.col;\n\t\t\t})();\n\t\t\tconst makeVisibleRow = (() => {\n\t\t\t\tif (cell.row < this._cell.row && 0 < cell.row) {\n\t\t\t\t\t// move up\n\t\t\t\t\treturn cell.row - 1;\n\t\t\t\t} else if (this._cell.row < cell.row && cell.row + 1 < this._grid.rowCount) {\n\t\t\t\t\t// move down\n\t\t\t\t\treturn cell.row + 1;\n\t\t\t\t}\n\t\t\t\treturn cell.row;\n\t\t\t})();\n\t\t\tif (makeVisibleCol !== cell.col || makeVisibleRow !== cell.row) {\n\t\t\t\tthis._grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\n\t\t\t}\n\t\t\tthis._cell = cell;\n\t\t\treturn true;\n\t\t}\n\t\t_getTargetCell(e) {\n\t\t\tconst abstractPos = _getMouseAbstractPoint(this._grid, e);\n\t\t\tif (!abstractPos) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst cell = this._grid.getCellAt(abstractPos.x, abstractPos.y);\n\t\t\tif (cell.col < 0 || cell.row < 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn cell;\n\t\t}\n\t}\n\t/**\r\n  * managing row width changing operation with mouse\r\n  * @private\r\n  */\n\tclass ColumnResizer extends BaseMouseDownMover {\n\t\tconstructor(grid) {\n\t\t\tsuper(grid);\n\t\t\tthis._targetCol = -1;\n\t\t}\n\t\tstart(col, e) {\n\t\t\tlet pageX;\n\t\t\tif (!isTouchEvent(e)) {\n\t\t\t\t({ pageX } = e);\n\t\t\t} else {\n\t\t\t\t({ pageX } = e.changedTouches[0]);\n\t\t\t}\n\n\t\t\tthis._x = pageX;\n\t\t\tthis._preX = 0;\n\n\t\t\tthis._bindMoveAndUp(e);\n\n\t\t\tthis._targetCol = col;\n\t\t\tthis._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\n\n\t\t\tcancelEvent(e);\n\t\t\t_vibrate(e);\n\t\t}\n\t\t_moveInternal(e) {\n\t\t\tconst pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\n\n\t\t\tconst x = pageX - this._x;\n\t\t\tconst moveX = x - this._preX;\n\t\t\tthis._preX = x;\n\t\t\tconst pre = this._grid.getColWidth(this._targetCol);\n\t\t\tlet afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\n\t\t\tif (afterSize < 10 && moveX < 0) {\n\t\t\t\tafterSize = 10;\n\t\t\t}\n\t\t\t_setColWidth(this._grid, this._targetCol, afterSize);\n\n\t\t\tconst rect = _getVisibleRect(this._grid);\n\t\t\trect.left = this._invalidateAbsoluteLeft;\n\t\t\t_invalidateRect(this._grid, rect);\n\n\t\t\tthis._grid.fireListeners(EVENT_TYPE.RESIZE_COLUMN, { col: this._targetCol });\n\n\t\t\treturn true;\n\t\t}\n\t\t_upInternal(e) {\n\t\t\tthis._grid.updateScroll();\n\t\t}\n\t}\n\n\tfunction setSafeInputValue(input, value) {\n\t\tconst { type } = input;\n\t\tinput.type = '';\n\t\tinput.value = value;\n\t\tif (type) {\n\t\t\tinput.type = type;\n\t\t}\n\t}\n\n\t/**\r\n  * Manage focus\r\n  * @private\r\n  */\n\tclass FocusControl extends EventTarget {\n\t\tconstructor(grid, parentElement, scrollable) {\n\t\t\tsuper();\n\t\t\tthis._grid = grid;\n\t\t\tthis._scrollable = scrollable;\n\t\t\tthis._handler = new EventHandler();\n\t\t\tthis._input = document.createElement('input');\n\t\t\tthis._input.classList.add('grid-focus-control');\n\t\t\tthis._input.readOnly = true;\n\t\t\tparentElement.appendChild(this._input);\n\n\t\t\tthis._handler.on(this._input, 'compositionstart', e => {\n\t\t\t\tthis._input.classList.add('composition');\n\t\t\t\tthis._input.style.font = this._grid.font || '16px sans-serif';\n\t\t\t\tthis._isComposition = true;\n\t\t\t\tgrid.focus();\n\t\t\t});\n\t\t\tthis._handler.on(this._input, 'compositionend', e => {\n\t\t\t\tthis._isComposition = false;\n\t\t\t\tthis._input.classList.remove('composition');\n\t\t\t\tthis._input.style.font = '';\n\t\t\t\tif (!this._input.readOnly) {\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t});\n\t\t\tthis._handler.on(this._input, 'keypress', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!this._input.readOnly && e.key && e.key.length === 1) {\n\t\t\t\t\tif (e.key === 'c' && (e.ctrlKey || e.metaKey)) {\n\t\t\t\t\t\t//copy! for Firefox\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.fireListeners('input', e.key);\n\t\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t});\n\t\t\tthis._handler.on(this._input, 'keydown', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst keyCode = getKeyCode(e);\n\t\t\t\tthis.fireListeners('keydown', keyCode, e);\n\n\t\t\t\tif (!this._input.readOnly && this._input.value) {\n\t\t\t\t\t// for Safari\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\n\t\t\t\t}\n\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t});\n\t\t\tconst inputClear = e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t};\n\n\t\t\tthis._handler.on(this._input, 'input', inputClear);\n\t\t\tthis._handler.on(this._input, 'keyup', inputClear);\n\t\t\tthis._handler.on(document, 'keydown', e => {\n\t\t\t\tif (!browser.IE) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (e.target !== this._input) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst keyCode = getKeyCode(e);\n\t\t\t\tif (keyCode === KEY_ALPHA_C && e.ctrlKey) {\n\t\t\t\t\tsetSafeInputValue(this._input, 'dummy');\n\t\t\t\t\tthis._input.select();\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._handler.on(document, 'copy', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!isDescendantElement(parentElement, e.target)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tsetSafeInputValue(this._input, '');\n\t\t\t\tconst data = array.find(this.fireListeners('copy'), isDef);\n\t\t\t\tif (isDef(data)) {\n\t\t\t\t\tcancelEvent(e);\n\t\t\t\t\tif (browser.IE) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', data); // IE\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', data); // Chrome, Firefox\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tonKeyDownMove(fn) {\n\t\t\tthis._handler.on(this._input, 'keydown', e => {\n\t\t\t\tif (this._isComposition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst keyCode = getKeyCode(e);\n\t\t\t\tif (keyCode === KEY_LEFT || keyCode === KEY_UP || keyCode === KEY_RIGHT || keyCode === KEY_DOWN || keyCode === KEY_HOME || keyCode === KEY_END) {\n\t\t\t\t\tfn(e);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tonInput(fn) {\n\t\t\treturn this.listen('input', fn);\n\t\t}\n\t\tonCopy(fn) {\n\t\t\treturn this.listen('copy', fn);\n\t\t}\n\t\tfocus() {\n\t\t\t// this._input.value = '';\n\t\t\tthis._input.focus();\n\t\t}\n\t\tsetFocusRect(rect) {\n\t\t\tconst top = this._scrollable.calcTop(rect.top);\n\t\t\tthis._input.style.top = (top - style.getScrollBarSize()).toFixed() + 'px'; //position:relative IE position:relative\n\t\t\tthis._input.style.left = rect.left.toFixed() + 'px';\n\t\t\tthis._input.style.width = rect.width.toFixed() + 'px';\n\t\t\tthis._input.style.height = rect.height.toFixed() + 'px';\n\t\t}\n\t\tset editMode(editMode) {\n\t\t\tthis._input.readOnly = !editMode;\n\t\t}\n\t\tresetInputStatus() {\n\t\t\tconst el = this._input;\n\t\t\tconst composition = el.classList.contains('composition');\n\n\t\t\tconst atts = el.attributes;\n\t\t\tconst removeNames = [];\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\n\t\t\t\tconst att = atts[i];\n\t\t\t\tif (!this._inputStatus.hasOwnProperty(att.nodeName)) {\n\t\t\t\t\tremoveNames.push(att.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremoveNames.forEach(removeName => {\n\t\t\t\tel.removeAttribute(removeName);\n\t\t\t});\n\t\t\tfor (const name in this._inputStatus) {\n\t\t\t\tel.setAttribute(name, this._inputStatus[name]);\n\t\t\t}\n\t\t\tif (composition) {\n\t\t\t\tel.classList.add('composition');\n\t\t\t\tel.style.font = this._grid.font || '16px sans-serif';\n\t\t\t} else {\n\t\t\t\tel.classList.remove('composition');\n\t\t\t}\n\t\t}\n\t\tstoreInputStatus() {\n\t\t\tconst el = this._input;\n\t\t\tthis._inputStatus = {};\n\t\t\tconst atts = el.attributes;\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\n\t\t\t\tconst att = atts[i];\n\t\t\t\tthis._inputStatus[att.name] = att.value;\n\t\t\t}\n\t\t}\n\t\tsetDefaultInputStatus() {\n\t\t\t// \n\t\t\t// this._input.style.font = this._grid.font || '16px sans-serif';\n\t\t}\n\t\tget editMode() {\n\t\t\treturn !this._input.readOnly;\n\t\t}\n\t\tget input() {\n\t\t\treturn this._input;\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t\tthis._handler.dispose();\n\t\t}\n\t}\n\n\t/**\r\n  * Selected area management\r\n  */\n\tclass Selection extends EventTarget {\n\t\tconstructor(grid) {\n\t\t\tsuper();\n\t\t\tthis._grid = grid;\n\n\t\t\tthis._sel = { col: 0, row: 0 };\n\t\t\tthis._focus = { col: 0, row: 0 };\n\n\t\t\tthis._start = { col: 0, row: 0 };\n\t\t\tthis._end = { col: 0, row: 0 };\n\t\t}\n\t\tget range() {\n\t\t\tconst startCol = Math.min(this._start.col, this._end.col);\n\t\t\tconst startRow = Math.min(this._start.row, this._end.row);\n\t\t\tconst endCol = Math.max(this._start.col, this._end.col);\n\t\t\tconst endRow = Math.max(this._start.row, this._end.row);\n\t\t\treturn {\n\t\t\t\tstart: {\n\t\t\t\t\tcol: startCol,\n\t\t\t\t\trow: startRow\n\t\t\t\t},\n\t\t\t\tend: {\n\t\t\t\t\tcol: endCol,\n\t\t\t\t\trow: endRow\n\t\t\t\t},\n\t\t\t\tinCell(col, row) {\n\t\t\t\t\treturn startCol <= col && col <= endCol && startRow <= row && row <= endRow;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tget select() {\n\t\t\treturn {\n\t\t\t\tcol: this._sel.col,\n\t\t\t\trow: this._sel.row\n\t\t\t};\n\t\t}\n\t\tset select(cell = {}) {\n\t\t\tthis._wrapFireSelectedEvent(() => {\n\t\t\t\tconst {\n\t\t\t\t\tcol = 0,\n\t\t\t\t\trow = 0\n\t\t\t\t} = cell;\n\t\t\t\tthis._setSelectCell(col, row);\n\t\t\t\tthis._setFocusCell(col, row, true);\n\t\t\t});\n\t\t}\n\t\t_setSelectCell(col, row) {\n\t\t\tthis._wrapFireSelectedEvent(() => {\n\t\t\t\tthis._sel = { col, row };\n\t\t\t\tthis._start = { col, row };\n\t\t\t});\n\t\t}\n\t\t_setFocusCell(col, row, keepSelect) {\n\t\t\tthis._wrapFireSelectedEvent(() => {\n\t\t\t\tif (!keepSelect) {\n\t\t\t\t\tthis._setSelectCell(col, row);\n\t\t\t\t}\n\t\t\t\tthis._focus = { col, row };\n\t\t\t\tthis._end = { col, row };\n\t\t\t});\n\t\t}\n\t\t_wrapFireSelectedEvent(callback) {\n\t\t\tif (this._isWraped) {\n\t\t\t\tcallback();\n\t\t\t} else {\n\t\t\t\tthis._isWraped = true;\n\t\t\t\ttry {\n\t\t\t\t\tconst before = {\n\t\t\t\t\t\tcol: this._sel.col,\n\t\t\t\t\t\trow: this._sel.row,\n\t\t\t\t\t\tselected: false\n\t\t\t\t\t};\n\t\t\t\t\tcallback();\n\t\t\t\t\tconst after = {\n\t\t\t\t\t\tcol: this._sel.col,\n\t\t\t\t\t\trow: this._sel.row,\n\t\t\t\t\t\tselected: true,\n\t\t\t\t\t\tbefore: {\n\t\t\t\t\t\t\tcol: before.col,\n\t\t\t\t\t\t\trow: before.row\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tbefore.after = {\n\t\t\t\t\t\tcol: after.col,\n\t\t\t\t\t\trow: after.row\n\t\t\t\t\t};\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, before);\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, after);\n\t\t\t\t} finally {\n\t\t\t\t\tthis._isWraped = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\r\n  * This class manages the drawing process for each layer\r\n  */\n\tclass DrawLayers {\n\t\tconstructor() {\n\t\t\tthis._layers = {};\n\t\t}\n\t\taddDraw(level, fn) {\n\t\t\tconst l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\n\t\t\tl.addDraw(fn);\n\t\t}\n\t\tdraw(ctx) {\n\t\t\tconst list = [];\n\t\t\tfor (const k in this._layers) {\n\t\t\t\tlist.push(this._layers[k]);\n\t\t\t}\n\t\t\tlist.sort((a, b) => a.level - b.level);\n\t\t\tlist.forEach(l => l.draw(ctx));\n\t\t}\n\t}\n\tclass DrawLayer {\n\t\tconstructor(level) {\n\t\t\tthis._level = level;\n\t\t\tthis._list = [];\n\t\t}\n\t\tget level() {\n\t\t\treturn this._level;\n\t\t}\n\t\taddDraw(fn) {\n\t\t\tthis._list.push(fn);\n\t\t}\n\t\tdraw(ctx) {\n\t\t\tthis._list.forEach(fn => {\n\t\t\t\tctx.save();\n\t\t\t\ttry {\n\t\t\t\t\tfn(ctx);\n\t\t\t\t} finally {\n\t\t\t\t\tctx.restore();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t/**\r\n  * Context of cell drawing\r\n  */\n\tclass DrawCellContext {\n\t\t/**\r\n   * @private\r\n   */\n\t\tconstructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\n\t\t\tthis._col = col;\n\t\t\tthis._row = row;\n\t\t\tthis._mode = 0;\n\t\t\tthis._ctx = ctx;\n\t\t\tthis._rect = rect;\n\t\t\tthis._drawRect = drawRect;\n\t\t\tthis._drawing = drawing;\n\t\t\tthis._selection = selection;\n\t\t\tthis._drawLayers = drawLayers;\n\t\t}\n\t\tget drawing() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._drawing;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\tget row() {\n\t\t\treturn this._row;\n\t\t}\n\t\tget col() {\n\t\t\treturn this._col;\n\t\t}\n\t\t/**\r\n   * select status.\r\n   * @return {object} select status\r\n   */\n\t\tgetSelectState() {\n\t\t\tconst sel = this._selection.select;\n\t\t\treturn {\n\t\t\t\tselected: sel.col === this._col && sel.row === this._row,\n\t\t\t\tselection: this._selection.range.inCell(this._col, this._row)\n\t\t\t};\n\t\t}\n\t\t/**\r\n   * Canvas context.\r\n   * @return {CanvasRenderingContext2D} Canvas context.\r\n   */\n\t\tgetContext() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._ctx;\n\t\t\t} else {\n\t\t\t\treturn this._grid._getInitContext();\n\t\t\t}\n\t\t}\n\t\t/**\r\n   * Rectangle of cell.\r\n   * @return {Rect} rect Rectangle of cell.\r\n   */\n\t\tgetRect() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._rect;\n\t\t\t} else {\n\t\t\t\tif (this._rect) {\n\t\t\t\t\treturn this._rect;\n\t\t\t\t}\n\t\t\t\treturn this._grid.getCellRelativeRect(this._col, this._row);\n\t\t\t}\n\t\t}\n\t\tsetRect(rect) {\n\t\t\tthis._rect = rect;\n\t\t}\n\t\t/**\r\n   * Rectangle of Drawing range.\r\n   * @return {Rect} Rectangle of Drawing range.\r\n   */\n\t\tgetDrawRect() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this._drawRect;\n\t\t\t} else {\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\n\t\t\t\treturn this._toRelativeDrawRect(absoluteRect);\n\t\t\t}\n\t\t}\n\t\t/**\r\n   * get Context of current state\r\n   * @return {DrawCellContext} current DrawCellContext.\r\n   */\n\t\ttoCurrentContext() {\n\t\t\tif (this._mode === 0) {\n\t\t\t\treturn this;\n\t\t\t} else {\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\n\t\t\t\tconst rect = _toRelativeRect(this._grid, absoluteRect);\n\t\t\t\tconst drawRect = this._toRelativeDrawRect(absoluteRect);\n\t\t\t\tconst context = new DrawCellContext(this._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection, this._drawLayers);\n\t\t\t\t// toCurrentContext  toCurrentContext\n\t\t\t\tcontext.toCurrentContext = this.toCurrentContext.bind(this);\n\t\t\t\treturn context;\n\t\t\t}\n\t\t}\n\t\taddLayerDraw(level, fn) {\n\t\t\tthis._drawLayers.addDraw(level, fn);\n\t\t}\n\t\t_toRelativeDrawRect(absoluteRect) {\n\t\t\tconst visibleRect = _getVisibleRect(this._grid);\n\t\t\tlet rect = absoluteRect.copy();\n\t\t\tif (!rect.intersection(visibleRect)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst isFrozenCell = this._grid.isFrozenCell(this._col, this._row);\n\t\t\tif (this._grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\n\t\t\t\tconst fRect = this._grid.getCellRect(this._grid.frozenColCount - 1, this._row);\n\t\t\t\trect = Rect.bounds(Math.max(rect.left, fRect.right), rect.top, rect.right, rect.bottom);\n\t\t\t}\n\t\t\tif (this._grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\n\t\t\t\tconst fRect = this._grid.getCellRect(this._col, this._grid.frozenRowCount - 1);\n\t\t\t\trect = Rect.bounds(rect.left, Math.max(rect.top, fRect.bottom), rect.right, rect.bottom);\n\t\t\t}\n\n\t\t\tif (!rect.intersection(visibleRect)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\trect.offsetLeft(-visibleRect.left);\n\t\t\trect.offsetTop(-visibleRect.top);\n\n\t\t\treturn rect;\n\t\t}\n\t\t_delayMode(grid, onTerminate) {\n\t\t\tthis._mode = 1;\n\t\t\tthis._ctx = null;\n\t\t\tthis._rect = null;\n\t\t\tthis._drawRect = null;\n\t\t\tthis._grid = grid;\n\t\t\tthis._onTerminate = onTerminate;\n\t\t}\n\t\t/**\r\n   * terminate\r\n   * @return {void}\r\n   */\n\t\tterminate() {\n\t\t\tif (this._mode !== 0) {\n\t\t\t\tthis._onTerminate();\n\t\t\t}\n\t\t}\n\t}\n\t/**\r\n  * DrawGrid\r\n  * @classdesc cheetahGrid.core.DrawGrid\r\n  * @extends EventTarget\r\n  * @memberof cheetahGrid.core\r\n  */\n\tclass DrawGrid extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\t/**\r\n   * constructor\r\n   *\r\n   * <pre>\r\n   * Constructor options\r\n   * -----\r\n   * rowCount: grid row count.default 10\r\n   * colCount: grid col count.default 10\r\n   * frozenColCount: default 0\r\n   * frozenRowCount: default 0\r\n   * defaultRowHeight: default grid row height. default 40\r\n   * defaultColWidth: default grid col width. default 80\r\n   * parentElement: canvas parentElement\r\n   * font: default font\r\n   * underlayBackgroundColor: underlay background color\r\n   * -----\r\n   * </pre>\r\n   *\r\n   * @constructor\r\n   * @param  {Object} options Constructor options\r\n   */\n\t\tconstructor({\n\t\t\trowCount = 10,\n\t\t\tcolCount = 10,\n\t\t\tfrozenColCount = 0,\n\t\t\tfrozenRowCount = 0,\n\t\t\tdefaultRowHeight = 40,\n\t\t\tdefaultColWidth = 80,\n\t\t\tfont,\n\t\t\tunderlayBackgroundColor,\n\t\t\tparentElement\n\t\t} = {}) {\n\t\t\tsuper();\n\t\t\tthis[_] = {};\n\t\t\tstyle.initDocument();\n\t\t\tthis[_].element = createRootElement();\n\t\t\tthis[_].scrollable = new Scrollable();\n\t\t\tthis[_].handler = new EventHandler();\n\t\t\tthis[_].selection = new Selection(this);\n\t\t\tthis[_].focusControl = new FocusControl(this, this[_].scrollable.getElement(), this[_].scrollable);\n\n\t\t\tthis[_].canvas = hiDPI.transform(document.createElement('canvas'));\n\t\t\tthis[_].context = this[_].canvas.getContext('2d', { alpha: false });\n\n\t\t\tthis[_].rowCount = rowCount;\n\t\t\tthis[_].colCount = colCount;\n\t\t\tthis[_].frozenColCount = frozenColCount;\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\n\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\n\n\t\t\tthis[_].font = font;\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\n\n\t\t\t/////\n\t\t\tthis[_].rowHeightsMap = new NumberMap();\n\t\t\tthis[_].colWidthsMap = new NumberMap();\n\t\t\tthis[_].colWidthsLimit = {};\n\t\t\tthis[_].calcWidthContext = {\n\t\t\t\t_: this[_],\n\t\t\t\tget full() {\n\t\t\t\t\treturn this._.canvas.width;\n\t\t\t\t},\n\t\t\t\tget em() {\n\t\t\t\t\treturn this._.context.measureText('').width;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis[_].columnResizer = new ColumnResizer(this);\n\t\t\tthis[_].cellSelector = new CellSelector(this);\n\n\t\t\tthis[_].drawCells = {};\n\n\t\t\tthis[_].element.appendChild(this[_].canvas);\n\t\t\tthis[_].element.appendChild(this[_].scrollable.getElement());\n\t\t\tthis.updateScroll();\n\t\t\tif (parentElement) {\n\t\t\t\tparentElement.appendChild(this[_].element);\n\t\t\t\tthis.updateSize();\n\t\t\t} else {\n\t\t\t\tthis.updateSize();\n\t\t\t}\n\t\t\t_bindEvents(this);\n\t\t}\n\t\tgetElement() {\n\t\t\treturn this[_].element;\n\t\t}\n\t\tget canvas() {\n\t\t\treturn this[_].canvas;\n\t\t}\n\t\tfocus() {\n\t\t\tconst { col, row } = this[_].selection.select;\n\t\t\tthis.focusCell(col, row);\n\t\t}\n\t\tget selection() {\n\t\t\treturn this[_].selection;\n\t\t}\n\t\tget rowCount() {\n\t\t\treturn this[_].rowCount;\n\t\t}\n\t\tset rowCount(rowCount) {\n\t\t\tthis[_].rowCount = rowCount;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget colCount() {\n\t\t\treturn this[_].colCount;\n\t\t}\n\t\tset colCount(colCount) {\n\t\t\tthis[_].colCount = colCount;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget frozenColCount() {\n\t\t\treturn this[_].frozenColCount;\n\t\t}\n\t\tset frozenColCount(frozenColCount) {\n\t\t\tthis[_].frozenColCount = frozenColCount;\n\t\t}\n\t\tget frozenRowCount() {\n\t\t\treturn this[_].frozenRowCount;\n\t\t}\n\t\tset frozenRowCount(frozenRowCount) {\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\n\t\t}\n\t\tget defaultRowHeight() {\n\t\t\treturn this[_].rowCount;\n\t\t}\n\t\tset defaultRowHeight(defaultRowHeight) {\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget defaultColWidth() {\n\t\t\treturn this[_].defaultColWidth;\n\t\t}\n\t\tset defaultColWidth(defaultColWidth) {\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tget font() {\n\t\t\treturn this[_].font;\n\t\t}\n\t\tset font(font) {\n\t\t\tthis[_].font = font;\n\t\t}\n\t\tget underlayBackgroundColor() {\n\t\t\treturn this[_].underlayBackgroundColor;\n\t\t}\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\n\t\t}\n\t\tconfigure(name, value) {\n\t\t\tconst cfg = this[_].config || (this[_].config = {});\n\t\t\tif (isDef(value)) {\n\t\t\t\tcfg[name] = value;\n\t\t\t}\n\t\t\treturn cfg[name];\n\t\t}\n\t\tupdateSize() {\n\t\t\t//\n\t\t\tthis[_].canvas.style.width = '';\n\t\t\tthis[_].canvas.style.height = '';\n\t\t\tconst width = Math.floor(this[_].canvas.offsetWidth ||\n\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetWidth - style.getScrollBarSize());\n\t\t\tconst height = Math.floor(this[_].canvas.offsetHeight ||\n\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetHeight - style.getScrollBarSize());\n\n\t\t\tthis[_].canvas.width = width;\n\t\t\tthis[_].canvas.height = height;\n\n\t\t\t//style\n\t\t\tthis[_].canvas.style.width = `${width}px`;\n\t\t\tthis[_].canvas.style.height = `${height}px`;\n\n\t\t\tconst sel = this[_].selection.select;\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\n\t\t}\n\t\tupdateScroll() {\n\t\t\tthis[_].scrollable.setScrollSize(_getScrollWidth(this), _getScrollHeight(this));\n\t\t\tthis[_].scroll = {\n\t\t\t\tleft: this[_].scrollable.scrollLeft,\n\t\t\t\ttop: this[_].scrollable.scrollTop\n\t\t\t};\n\t\t}\n\t\tgetRowHeight(row) {\n\t\t\treturn _getRowHeight(this, row);\n\t\t}\n\t\tsetRowHeight(row, height) {\n\t\t\t_setRowHeight(this, row, height);\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tgetColWidth(col) {\n\t\t\treturn _getColWidth(this, col);\n\t\t}\n\t\tsetColWidth(col, width) {\n\t\t\t_setColWidth(this, col, width);\n\t\t\tthis.updateScroll();\n\t\t}\n\t\tgetMaxColWidth(col) {\n\t\t\tconst obj = this[_].colWidthsLimit[col];\n\t\t\treturn obj && obj.max || undefined;\n\t\t}\n\t\tsetMaxColWidth(col, maxwidth) {\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\t\t\tobj.max = maxwidth;\n\t\t}\n\t\tgetMinColWidth(col) {\n\t\t\tconst obj = this[_].colWidthsLimit[col];\n\t\t\treturn obj && obj.min || undefined;\n\t\t}\n\t\tsetMinColWidth(col, minwidth) {\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\n\t\t\tobj.min = minwidth;\n\t\t}\n\t\tgetCellRect(col, row) {\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\n\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, col - 1);\n\t\t\tconst width = _getColWidth(this, col);\n\t\t\tif (isFrozenCell && isFrozenCell.col) {\n\t\t\t\tabsoluteLeft += this[_].scroll.left;\n\t\t\t}\n\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, row - 1);\n\t\t\tconst height = _getRowHeight(this, row);\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\n\t\t\t\tabsoluteTop += this[_].scroll.top;\n\t\t\t}\n\t\t\treturn new Rect(absoluteLeft, absoluteTop, width, height);\n\t\t}\n\t\tgetCellRelativeRect(col, row) {\n\t\t\treturn _toRelativeRect(this, this.getCellRect(col, row));\n\t\t}\n\t\tgetCellsRect(startCol, startRow, endCol, endRow) {\n\t\t\tconst isFrozenStartCell = this.isFrozenCell(startCol, startRow);\n\t\t\tconst isFrozenEndCell = this.isFrozenCell(endCol, endRow);\n\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, startCol - 1);\n\t\t\tlet width = _getColsWidth(this, startCol, endCol);\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.col) {\n\t\t\t\tconst scrollLeft = this[_].scroll.left;\n\t\t\t\tabsoluteLeft += scrollLeft;\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.col) {\n\t\t\t\t\twidth -= scrollLeft;\n\t\t\t\t\twidth = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, startRow - 1);\n\t\t\tlet height = _getRowsHeight(this, startRow, endRow);\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.row) {\n\t\t\t\tconst scrollTop = this[_].scroll.top;\n\t\t\t\tabsoluteTop += scrollTop;\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.row) {\n\t\t\t\t\theight -= scrollTop;\n\t\t\t\t\theight = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new Rect(absoluteLeft, absoluteTop, width, height);\n\t\t}\n\t\tisFrozenCell(col, row) {\n\t\t\tconst isFrozenRow = this[_].frozenRowCount > 0 && row < this[_].frozenRowCount;\n\t\t\tconst isFrozenCol = this[_].frozenColCount > 0 && col < this[_].frozenColCount;\n\t\t\tif (isFrozenRow || isFrozenCol) {\n\t\t\t\treturn {\n\t\t\t\t\trow: isFrozenRow,\n\t\t\t\t\tcol: isFrozenCol\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tgetRowAt(absoluteY) {\n\t\t\tconst frozen = _getTargetFrozenRowAt(this, absoluteY);\n\t\t\tif (frozen) {\n\t\t\t\treturn frozen.row;\n\t\t\t}\n\t\t\tconst row = _getTargetRowAt(this, absoluteY);\n\t\t\treturn row ? row.row : -1;\n\t\t}\n\t\tgetColAt(absoluteX) {\n\t\t\tconst frozen = _getTargetFrozenColAt(this, absoluteX);\n\t\t\tif (frozen) {\n\t\t\t\treturn frozen.col;\n\t\t\t}\n\t\t\tconst col = _getTargetColAt(this, absoluteX);\n\t\t\treturn col ? col.col : -1;\n\t\t}\n\t\tgetCellAt(absoluteX, absoluteY) {\n\t\t\treturn {\n\t\t\t\trow: this.getRowAt(absoluteY),\n\t\t\t\tcol: this.getColAt(absoluteX)\n\t\t\t};\n\t\t}\n\t\tmakeVisibleCell(col, row) {\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\n\t\t\tif (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst rect = this.getCellRect(col, row);\n\t\t\tconst visibleRect = _getScrollableVisibleRect(this);\n\t\t\tif (visibleRect.contains(rect)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!isFrozenCell || !isFrozenCell.col) {\n\t\t\t\tif (rect.left < visibleRect.left) {\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.left - rect.left;\n\t\t\t\t} else if (visibleRect.right < rect.right) {\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.right - rect.right;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isFrozenCell || !isFrozenCell.row) {\n\t\t\t\tif (rect.top < visibleRect.top) {\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.top - rect.top;\n\t\t\t\t} else if (visibleRect.bottom < rect.bottom) {\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfocusCell(col, row) {\n\t\t\tconst oldEditMode = this[_].focusControl.editMode;\n\t\t\tif (oldEditMode) {\n\t\t\t\tthis[_].focusControl.resetInputStatus();\n\t\t\t}\n\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(col, row));\n\n\t\t\tconst { col: selCol, row: selRow } = this[_].selection.select;\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.EDITABLEINPUT_CELL, { col: selCol, row: selRow });\n\n\t\t\tconst editMode = array.findIndex(results, v => !!v) >= 0;\n\t\t\tthis[_].focusControl.editMode = editMode;\n\n\t\t\tif (editMode) {\n\t\t\t\tthis[_].focusControl.storeInputStatus();\n\t\t\t\tthis[_].focusControl.setDefaultInputStatus();\n\t\t\t\tthis.fireListeners(EVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL, { col: selCol, row: selRow, input: this[_].focusControl.input });\n\t\t\t}\n\n\t\t\t// Failure occurs in IE if focus is not last\n\t\t\tthis[_].focusControl.focus();\n\t\t}\n\t\tinvalidateCell(col, row) {\n\t\t\tthis.invalidateGridRect(col, row);\n\t\t}\n\t\tinvalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\n\t\t\tconst offset = this.getOffsetInvalidateCells();\n\t\t\tif (offset > 0) {\n\t\t\t\tstartCol -= offset;\n\t\t\t\tstartRow -= offset;\n\t\t\t\tendCol += offset;\n\t\t\t\tendRow += offset;\n\t\t\t}\n\n\t\t\tconst visibleRect = _getVisibleRect(this);\n\t\t\tconst cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\n\t\t\tconst invalidateTarget = visibleRect.intersection(cellsRect);\n\t\t\tif (invalidateTarget) {\n\n\t\t\t\tif (this[_].frozenColCount > 0 && endCol >= this[_].frozenColCount) {\n\t\t\t\t\tconst frozenRect = _getFrozenColsRect(this);\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\n\t\t\t\t\t\tinvalidateTarget.left = Math.min(frozenRect.right - 1, frozenRect.right);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this[_].frozenRowCount > 0 && endRow >= this[_].frozenRowCount) {\n\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(this);\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\n\t\t\t\t\t\tinvalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_invalidateRect(this, invalidateTarget);\n\t\t\t}\n\t\t}\n\t\tinvalidate() {\n\t\t\tconst visibleRect = _getVisibleRect(this);\n\t\t\t_invalidateRect(this, visibleRect);\n\t\t}\n\t\t/**\r\n   * get cell value at copy action\r\n   * <p>\r\n   * Please implement\r\n   * </p>\r\n   *\r\n   * @protected\r\n   * @param  {number} col Column index of cell.\r\n   * @param  {number} row Row index of cell.\r\n   * @return {string}\r\n   */\n\t\tgetCopyCellValue(col, row) {}\n\t\t//Please implement get cell value!!\n\n\t\t/**\r\n   * Draw a cell\r\n   * <p>\r\n   * Please implement cell drawing.\r\n   * </p>\r\n   *\r\n   * @protected\r\n   * @param  {number} col Column index of cell.\r\n   * @param  {number} row Row index of cell.\r\n   * @param  {DrawCellContext} context context of cell drawing.\r\n   * @return {void}\r\n   */\n\t\tonDrawCell(col, row, context) {\n\t\t\t//Please implement cell drawing!!\n\t\t}\n\t\taddDisposable(disposable) {\n\t\t\tif (!disposable || !disposable.dispose || typeof disposable.dispose !== 'function') {\n\t\t\t\tthrow new Error('not disposable!');\n\t\t\t}\n\t\t\tconst disposables = this[_].disposables = this[_].disposables || [];\n\t\t\tdisposables.push(disposable);\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t\tthis[_].handler.dispose();\n\t\t\tthis[_].scrollable.dispose();\n\t\t\tthis[_].focusControl.dispose();\n\t\t\tthis[_].columnResizer.dispose();\n\t\t\tthis[_].cellSelector.dispose();\n\t\t\tif (this[_].disposables) {\n\t\t\t\tthis[_].disposables.forEach(disposable => disposable.dispose());\n\t\t\t\tthis[_].disposables = null;\n\t\t\t}\n\n\t\t\tconst { parentElement } = this[_].element;\n\t\t\tif (parentElement) {\n\t\t\t\tparentElement.removeChild(this[_].element);\n\t\t\t}\n\t\t}\n\t\tgetAttachCellArea(col, row) {\n\t\t\treturn {\n\t\t\t\telement: this.getElement(),\n\t\t\t\trect: _toRelativeRect(this, this.getCellRect(col, row))\n\t\t\t};\n\t\t}\n\t\tbindEventsInternal() {\n\t\t\t//nop\n\t\t}\n\t\tgetTargetRowAtInternal(absoluteY) {\n\t\t\t// \n\t\t}\n\t\tgetRowsHeightInternal(startRow, endRow) {\n\t\t\t// \n\t\t}\n\t\tgetRowHeightInternal(row) {\n\t\t\t// \n\t\t}\n\t\tgetScrollHeightInternal(row) {\n\t\t\t// \n\t\t}\n\t\tgetMoveLeftColByKeyDownInternal({ col, row }) {\n\t\t\treturn col - 1;\n\t\t}\n\t\tgetMoveRightColByKeyDownInternal({ col, row }) {\n\t\t\treturn col + 1;\n\t\t}\n\t\tgetMoveUpRowByKeyDownInternal({ col, row }) {\n\t\t\treturn row - 1;\n\t\t}\n\t\tgetMoveDownRowByKeyDownInternal({ col, row }) {\n\t\t\treturn row + 1;\n\t\t}\n\t\tgetOffsetInvalidateCells() {\n\t\t\treturn 0;\n\t\t}\n\t\t_getInitContext() {\n\t\t\tconst ctx = this[_].context;\n\t\t\t//\n\t\t\tctx.fillStyle = 'white';\n\t\t\tctx.strokeStyle = 'black';\n\t\t\tctx.textAlign = 'left';\n\t\t\tctx.textBaseline = 'top';\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.font = this.font || '16px sans-serif';\n\t\t\treturn ctx;\n\t\t}\n\t}\n\n\tmodule.exports = DrawGrid;\n}\n\n/***/ }),\n\n/***/ \"./core/EventTarget.js\":\n/*!*****************************!*\\\n  !*** ./core/EventTarget.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { isDef, obj: { each } } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\t//private symbol\n\tconst { _ } = __webpack_require__(/*! ../internal/symbolManager */ \"./internal/symbolManager.js\").get();\n\n\tlet nextId = 1;\n\t/**\r\n  * event target.\r\n  */\n\tclass EventTarget {\n\t\tconstructor() {\n\t\t\tthis[_] = {};\n\t\t\tthis[_].listeners = {};\n\t\t\tthis[_].listenerData = {};\n\t\t}\n\t\t/**\r\n   * Adds an event listener.\r\n   * @param  {string} type The event type id.\r\n   * @param  {function} listener Callback method.\r\n   * @return {number} unique id for the listener.\r\n   */\n\t\tlisten(type, listener) {\n\t\t\tconst list = this[_].listeners[type] || (this[_].listeners[type] = []);\n\t\t\tlist.push(listener);\n\n\t\t\tconst id = nextId++;\n\t\t\tthis[_].listenerData[id] = {\n\t\t\t\ttype,\n\t\t\t\tlistener,\n\t\t\t\tremove: () => {\n\t\t\t\t\tdelete this[_].listenerData[id];\n\t\t\t\t\tconst index = list.indexOf(listener);\n\t\t\t\t\tlist.splice(index, 1);\n\t\t\t\t\tif (!this[_].listeners[type].length) {\n\t\t\t\t\t\tdelete this[_].listeners[type];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn id;\n\t\t}\n\t\t/**\r\n   * Removes an event listener which was added with listen() by the id returned by listen().\r\n   * @param  {number} id the id returned by listen().\r\n   * @return {void}\r\n   */\n\t\tunlisten(id) {\n\t\t\tthis[_].listenerData[id].remove();\n\t\t}\n\t\taddEventListener(type, listener) {\n\t\t\tthis.listen(type, listener);\n\t\t}\n\t\tremoveEventListener(type, listener) {\n\t\t\teach(this[_].listenerData, (obj, id) => {\n\t\t\t\tif (obj.type === type && obj.listener === listener) {\n\t\t\t\t\tthis.unlisten(id);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thasListeners(type) {\n\t\t\treturn !!this[_].listeners[type];\n\t\t}\n\t\t/**\r\n   * Fires all registered listeners\r\n   * @param  {string}    type The type of the listeners to fire.\r\n   * @param  {...*} args fire arguments\r\n   * @return {*} the result of the last listener\r\n   */\n\t\tfireListeners(type, ...args) {\n\t\t\tconst list = this[_].listeners[type];\n\t\t\tif (!list) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn list.map(listener => listener.call(this, ...args)).filter(isDef);\n\t\t}\n\t\tdispose() {\n\t\t\tdelete this[_];\n\t\t}\n\t}\n\n\tmodule.exports = EventTarget;\n}\n\n/***/ }),\n\n/***/ \"./data.js\":\n/*!*****************!*\\\n  !*** ./data.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst DataSource = __webpack_require__(/*! ./data/DataSource */ \"./data/DataSource.js\");\n\tconst CachedDataSource = __webpack_require__(/*! ./data/CachedDataSource */ \"./data/CachedDataSource.js\");\n\n\t/**\r\n  * data modules\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.data\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tDataSource,\n\t\tCachedDataSource\n\t};\n}\n\n/***/ }),\n\n/***/ \"./data/CachedDataSource.js\":\n/*!**********************************!*\\\n  !*** ./data/CachedDataSource.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { getChainSafe } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\tconst DataSource = __webpack_require__(/*! ./DataSource */ \"./data/DataSource.js\");\n\n\tfunction _setFieldCache({ _fCache }, index, field, value) {\n\t\tconst recCache = _fCache[index] || (_fCache[index] = {});\n\t\trecCache[field] = value;\n\t}\n\t/**\r\n  * grid data source\r\n  *\r\n  * @classdesc cheetahGrid.data.CachedDataSource\r\n  * @extends cheetahGrid.data.DataSource\r\n  * @memberof cheetahGrid.data\r\n  */\n\tclass CachedDataSource extends DataSource {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn DataSource.EVENT_TYPE;\n\t\t}\n\t\tstatic ofArray(array) {\n\t\t\treturn new CachedDataSource({\n\t\t\t\tget: index => array[index],\n\t\t\t\tlength: array.length\n\t\t\t});\n\t\t}\n\t\tconstructor(opt = {}) {\n\t\t\tsuper(opt);\n\t\t\tthis._rCache = {};\n\t\t\tthis._fCache = {};\n\t\t}\n\t\tgetOriginal(index) {\n\t\t\tif (this._rCache && this._rCache[index]) {\n\t\t\t\treturn this._rCache[index];\n\t\t\t}\n\t\t\treturn super.getOriginal(index);\n\t\t}\n\t\tgetOriginalField(index, field) {\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\n\t\t\tif (cache) {\n\t\t\t\treturn cache;\n\t\t\t}\n\t\t\treturn super.getOriginalField(index, field);\n\t\t}\n\t\tsetOriginalField(index, field, value) {\n\t\t\tconst fCache = this._fCache;\n\t\t\tif (fCache && fCache[index]) {\n\t\t\t\tdelete fCache[index]; // clear row cache\n\t\t\t}\n\t\t\treturn super.setOriginalField(index, field, value);\n\t\t}\n\t\tclearCache() {\n\t\t\tif (this._rCache) {\n\t\t\t\tthis._rCache = {};\n\t\t\t}\n\t\t\tif (this._fCache) {\n\t\t\t\tthis._fCache = {};\n\t\t\t}\n\t\t}\n\t\tfieldPromiseCallBackInternal(index, field, val) {\n\t\t\t_setFieldCache(this, index, field, val);\n\t\t}\n\t\trecordPromiseCallBackInternal(index, val) {\n\t\t\tthis._rCache[index] = val;\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t}\n\t}\n\n\tmodule.exports = CachedDataSource;\n}\n\n/***/ }),\n\n/***/ \"./data/DataSource.js\":\n/*!****************************!*\\\n  !*** ./data/DataSource.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { array, isDef, isPromise, getOrApply, applyChainSafe, emptyFn } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\tconst sort = __webpack_require__(/*! ../internal/sort */ \"./internal/sort.js\");\n\tconst EventTarget = __webpack_require__(/*! ../core/EventTarget */ \"./core/EventTarget.js\");\n\n\tconst EVENT_TYPE = {\n\t\tUPDATE_LENGTH: 'update_length',\n\t\tUPDATED_LENGTH: 'updated_length',\n\t\tUPDATED_ORDER: 'updated_order'\n\t};\n\n\tfunction getValue(value, setPromiseBack) {\n\t\tvalue = getOrApply(value);\n\t\tif (isPromise(value)) {\n\t\t\tvalue = value.then(r => {\n\t\t\t\tif (!isPromise(r)) {\n\t\t\t\t\tsetPromiseBack(r);\n\t\t\t\t}\n\t\t\t\treturn getValue(r, setPromiseBack);\n\t\t\t});\n\t\t\t//\n\t\t\tsetPromiseBack(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction getField(record, field, setPromiseBack) {\n\t\tif (!isDef(record)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (isPromise(record)) {\n\t\t\treturn record.then(r => getField(r, field, setPromiseBack));\n\t\t}\n\t\tif (field in record) {\n\t\t\treturn getValue(record[field], setPromiseBack);\n\t\t}\n\t\tif (typeof field === 'function') {\n\t\t\treturn getValue(field(record), setPromiseBack);\n\t\t}\n\n\t\tconst ss = (field + '').split('.');\n\t\tif (ss.length <= 1) {\n\t\t\treturn getValue(record[field], setPromiseBack);\n\t\t}\n\t\treturn getValue(applyChainSafe(record, (val, name) => getField(val, name, emptyFn), ...ss), setPromiseBack);\n\t}\n\tfunction setField(record, field, value) {\n\t\tif (field in record) {\n\t\t\trecord[field] = value;\n\t\t} else if (typeof field === 'function') {\n\t\t\treturn field(record, value);\n\t\t} else if (typeof field === 'string') {\n\t\t\tconst ss = (field + '').split('.');\n\t\t\tlet obj = record;\n\t\t\tconst { length } = ss;\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst f = ss[i];\n\t\t\t\tif (i === length - 1) {\n\t\t\t\t\tobj[f] = value;\n\t\t\t\t} else {\n\t\t\t\t\tobj = obj[f] || (obj[f] = {});\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\trecord[field] = value;\n\t\t}\n\t\treturn true;\n\t}\n\tfunction _getIndex(dataSource, index) {\n\t\tif (!dataSource._sortedIndexMap) {\n\t\t\treturn index;\n\t\t}\n\t\tconst mapIndex = dataSource._sortedIndexMap[index];\n\t\treturn isDef(mapIndex) ? mapIndex : index;\n\t}\n\n\t/**\r\n  * grid data source\r\n  *\r\n  * @classdesc cheetahGrid.data.DataSource\r\n  * @extends EventTarget\r\n  * @memberof cheetahGrid.data\r\n  */\n\tclass DataSource extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\tstatic ofArray(array) {\n\t\t\treturn new DataSource({\n\t\t\t\tget: index => array[index],\n\t\t\t\tlength: array.length\n\t\t\t});\n\t\t}\n\t\tconstructor({ get, length = 0 } = {}) {\n\t\t\tsuper();\n\t\t\tthis._get = get;\n\t\t\tthis._length = length;\n\t\t\tthis._sortedIndexMap = false;\n\t\t}\n\t\tget(index) {\n\t\t\treturn this.getOriginal(_getIndex(this, index));\n\t\t}\n\t\tgetField(index, field) {\n\t\t\treturn this.getOriginalField(_getIndex(this, index), field);\n\t\t}\n\t\thasField(index, field) {\n\t\t\treturn this.hasOriginalField(_getIndex(this, index), field);\n\t\t}\n\t\tsetField(index, field, value) {\n\t\t\treturn this.setOriginalField(_getIndex(this, index), field, value);\n\t\t}\n\t\tsort(field, order) {\n\t\t\tconst sortedIndexMap = new Array(this._length);\n\n\t\t\tconst orderFn = order !== 'desc' ? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1 : (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\n\n\t\t\treturn sort.sortPromise(index => isDef(sortedIndexMap[index]) ? sortedIndexMap[index] : sortedIndexMap[index] = index, (index, rel) => {\n\t\t\t\tsortedIndexMap[index] = rel;\n\t\t\t}, this._length, orderFn, index => this.getOriginalField(index, field)).then(() => {\n\t\t\t\tthis._sortedIndexMap = sortedIndexMap;\n\t\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_ORDER);\n\t\t\t});\n\t\t}\n\t\tget length() {\n\t\t\treturn this._length;\n\t\t}\n\t\tset length(length) {\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\n\t\t\tif (array.findIndex(results, v => !v) >= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._length = length;\n\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\n\t\t}\n\t\tdispose() {\n\t\t\tsuper.dispose();\n\t\t}\n\t\tgetOriginal(index) {\n\t\t\treturn getValue(this._get(index), val => {\n\t\t\t\tthis.recordPromiseCallBackInternal(index, val);\n\t\t\t});\n\t\t}\n\t\tgetOriginalField(index, field) {\n\t\t\tif (!isDef(field)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst record = this.getOriginal(index);\n\t\t\treturn getField(record, field, val => {\n\t\t\t\tthis.fieldPromiseCallBackInternal(index, field, val);\n\t\t\t});\n\t\t}\n\t\thasOriginalField(index, field) {\n\t\t\tif (!isDef(field)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (typeof field === 'function') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst record = this.getOriginal(index);\n\t\t\treturn field in record;\n\t\t}\n\t\tsetOriginalField(index, field, value) {\n\t\t\tif (!isDef(field)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst record = this.getOriginal(index);\n\t\t\treturn setField(record, field, value);\n\t\t}\n\t\tfieldPromiseCallBackInternal(index, field, val) {\n\t\t\t//\n\t\t}\n\t\trecordPromiseCallBackInternal(index, val) {\n\t\t\t//\n\t\t}\n\t}\n\tDataSource.EMPTY = new DataSource({\n\t\tlength: 0\n\t});\n\n\tmodule.exports = DataSource;\n}\n\n/***/ }),\n\n/***/ \"./element/Inline.js\":\n/*!***************************!*\\\n  !*** ./element/Inline.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { isDef } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\nclass Inline {\n\tconstructor(content) {\n\t\tthis._content = isDef(content) ? content : '';\n\t}\n\twidth({ ctx }) {\n\t\treturn ctx.measureText(this._content).width;\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn null;\n\t}\n\tcanDraw() {\n\t\treturn true;\n\t}\n\tonReady(fn) {}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight,\n\t\toffsetTop,\n\t\toffsetBottom\n\t}) {\n\t\tcanvashelper.fillTextRect(ctx, this._content, rect.left, rect.top, rect.width, rect.height, {\n\t\t\toffset: offset + 1,\n\t\t\tpadding: {\n\t\t\t\tleft: offsetLeft,\n\t\t\t\tright: offsetRight,\n\t\t\t\ttop: offsetTop,\n\t\t\t\tbottom: offsetBottom\n\t\t\t}\n\t\t});\n\t}\n}\nmodule.exports = Inline;\n\n/***/ }),\n\n/***/ \"./element/InlineDrawer.js\":\n/*!*********************************!*\\\n  !*** ./element/InlineDrawer.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\n\nclass InlineDrawer extends Inline {\n\tconstructor({\n\t\tdraw,\n\t\twidth,\n\t\theight,\n\t\tcolor\n\t}) {\n\t\tsuper();\n\n\t\tthis._draw = draw;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._color = color;\n\t}\n\twidth({ ctx }) {\n\t\treturn this._width;\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn this._color;\n\t}\n\tcanDraw() {\n\t\treturn true;\n\t}\n\tonReady(callback) {}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight,\n\t\toffsetTop,\n\t\toffsetBottom\n\t}) {\n\t\tthis._draw({\n\t\t\tctx,\n\t\t\tcanvashelper,\n\t\t\trect,\n\t\t\toffset,\n\t\t\toffsetLeft,\n\t\t\toffsetRight,\n\t\t\toffsetTop,\n\t\t\toffsetBottom\n\t\t});\n\t}\n}\n\nmodule.exports = InlineDrawer;\n\n/***/ }),\n\n/***/ \"./element/InlineIcon.js\":\n/*!*******************************!*\\\n  !*** ./element/InlineIcon.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst fonts = __webpack_require__(/*! ../internal/fonts */ \"./internal/fonts.js\");\n\nclass InlineIcon extends Inline {\n\tconstructor(icon) {\n\t\tsuper();\n\t\tthis._icon = icon || {};\n\t}\n\twidth({ ctx }) {\n\t\tconst icon = this._icon;\n\t\tif (icon.width) {\n\t\t\treturn icon.width;\n\t\t}\n\t\tif (icon.font && fonts.check(icon.font, icon.content)) {\n\t\t\tctx.save();\n\t\t\ttry {\n\t\t\t\tctx.font = icon.font || ctx.font;\n\t\t\t\treturn ctx.measureText(icon.content).width;\n\t\t\t} finally {\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tfont() {\n\t\treturn this._icon.font;\n\t}\n\tcolor() {\n\t\treturn this._icon.color;\n\t}\n\tcanDraw() {\n\t\tconst icon = this._icon;\n\t\treturn icon.font ? fonts.check(icon.font, icon.content) : true;\n\t}\n\tonReady(callback) {\n\t\tconst icon = this._icon;\n\t\tif (icon.font && !fonts.check(icon.font, icon.content)) {\n\t\t\tfonts.load(icon.font, icon.content, callback);\n\t\t}\n\t}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight,\n\t\toffsetTop,\n\t\toffsetBottom\n\t}) {\n\t\tconst icon = this._icon;\n\t\tif (icon.content) {\n\t\t\tcanvashelper.fillTextRect(ctx, icon.content, rect.left, rect.top, rect.width, rect.height, {\n\t\t\t\toffset: offset + 1,\n\t\t\t\tpadding: {\n\t\t\t\t\tleft: offsetLeft,\n\t\t\t\t\tright: offsetRight,\n\t\t\t\t\ttop: offsetTop,\n\t\t\t\t\tbottom: offsetBottom\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nmodule.exports = InlineIcon;\n\n/***/ }),\n\n/***/ \"./element/InlineImage.js\":\n/*!********************************!*\\\n  !*** ./element/InlineImage.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst { getCacheOrLoad } = __webpack_require__(/*! ../internal/imgs */ \"./internal/imgs.js\");\nconst { isPromise } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nclass InlineImage extends Inline {\n\tconstructor({\n\t\tsrc,\n\t\twidth,\n\t\theight,\n\t\timageLeft,\n\t\timageTop,\n\t\timageWidth,\n\t\timageHeight\n\t}) {\n\t\tsuper();\n\t\tthis._src = src;\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._imageLeft = imageLeft;\n\t\tthis._imageTop = imageTop;\n\t\tthis._imageWidth = imageWidth;\n\t\tthis._imageHeight = imageHeight;\n\n\t\tthis._onloaded = [];\n\n\t\tthis._loaded = false;\n\t\tif (isPromise(src)) {\n\t\t\tsrc.then(s => {\n\t\t\t\tthis._src = s;\n\t\t\t\tthis._loadImage(s);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._loadImage(src);\n\t\t}\n\t}\n\t_loadImage(src) {\n\t\tconst img = this._inlineImg = getCacheOrLoad('InlineImage', 50, src);\n\t\tif (isPromise(img)) {\n\t\t\timg.then(i => {\n\t\t\t\tthis._loaded = true;\n\t\t\t\tthis._inlineImg = i;\n\n\t\t\t\tthis._onloaded.forEach(fn => fn());\n\t\t\t});\n\t\t} else {\n\t\t\tthis._loaded = true;\n\t\t}\n\t}\n\twidth({ ctx }) {\n\t\treturn this._width || (this._loaded ? this._inlineImg.width : 0);\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn null;\n\t}\n\tcanDraw() {\n\t\treturn this._loaded;\n\t}\n\tonReady(callback) {\n\t\tif (isPromise(this._src) || isPromise(this._inlineImg)) {\n\t\t\tthis._onloaded.push(() => callback());\n\t\t}\n\t}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight,\n\t\toffsetTop,\n\t\toffsetBottom\n\t}) {\n\t\tconst img = this._inlineImg;\n\t\tcanvashelper.drawInlineImageRect(ctx, img, this._imageLeft || 0, this._imageTop || 0, this._imageWidth || img.width, this._imageHeight || img.height, this._width || img.width, this._height || img.height, rect.left, rect.top, rect.width, rect.height, {\n\t\t\toffset: offset + 1,\n\t\t\tpadding: {\n\t\t\t\tleft: offsetLeft,\n\t\t\t\tright: offsetRight,\n\t\t\t\ttop: offsetTop,\n\t\t\t\tbottom: offsetBottom\n\t\t\t}\n\t\t});\n\t}\n}\n\nmodule.exports = InlineImage;\n\n/***/ }),\n\n/***/ \"./element/InlinePath2D.js\":\n/*!*********************************!*\\\n  !*** ./element/InlinePath2D.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst { calcStartPosition } = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\nconst path2DManager = __webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\");\n\nclass InlinePath2D extends Inline {\n\tconstructor({\n\t\tpath,\n\t\twidth,\n\t\theight,\n\t\tcolor\n\t}) {\n\t\tsuper();\n\t\t// IEPath2Dpolyfill\n\t\tthis._path = new path2DManager.Path2D(path);\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tthis._color = color;\n\t}\n\twidth({ ctx }) {\n\t\treturn this._width;\n\t}\n\tfont() {\n\t\treturn null;\n\t}\n\tcolor() {\n\t\treturn this._color;\n\t}\n\tcanDraw() {\n\t\treturn true;\n\t}\n\tonReady(callback) {}\n\tdraw({\n\t\tctx,\n\t\tcanvashelper,\n\t\trect,\n\t\toffset,\n\t\toffsetLeft,\n\t\toffsetRight,\n\t\toffsetTop,\n\t\toffsetBottom\n\t}) {\n\t\toffset++;\n\t\tconst padding = {\n\t\t\tleft: offsetLeft,\n\t\t\tright: offsetRight,\n\t\t\ttop: offsetTop,\n\t\t\tbottom: offsetBottom\n\t\t};\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t//clip\n\t\t\tctx.clip();\n\n\t\t\t//\n\t\t\tconst pos = calcStartPosition(ctx, rect, this._width, this._height, {\n\t\t\t\toffset,\n\t\t\t\tpadding\n\t\t\t});\n\t\t\tctx.translate(pos.x, pos.y);\n\t\t\tctx.fill(this._path);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n}\n\nmodule.exports = InlinePath2D;\n\n/***/ }),\n\n/***/ \"./element/InlineSvg.js\":\n/*!******************************!*\\\n  !*** ./element/InlineSvg.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst InlineImage = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\nconst { then } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\nfunction buildSvgDataUrl(svg) {\n\tconst data = typeof svg === 'string' ? svg : new XMLSerializer().serializeToString(svg);\n\tconst url = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(data); //svgbase64\n\treturn url;\n}\nfunction getSvgElement(svg) {\n\tif (typeof svg === 'string') {\n\t\tconst parser = new DOMParser();\n\t\treturn parser.parseFromString(svg, 'image/svg+xml');\n\t} else {\n\t\treturn svg;\n\t}\n}\n\nclass InlineSvg extends InlineImage {\n\tconstructor({\n\t\tsvg,\n\t\twidth,\n\t\theight,\n\t\timageLeft,\n\t\timageTop,\n\t\timageWidth,\n\t\timageHeight\n\t}) {\n\t\tconst svgElem = then(svg, getSvgElement);\n\t\tconst elmWidth = svgElem.getAttribute ? svgElem.getAttribute('width') : null;\n\t\tconst elmHeight = svgElem.getAttribute ? svgElem.getAttribute('height') : null;\n\t\tsuper({\n\t\t\tsrc: then(svg, buildSvgDataUrl),\n\t\t\twidth: width || elmWidth,\n\t\t\theight: height || elmHeight,\n\t\t\timageWidth: elmWidth,\n\t\t\timageHeight: elmHeight\n\t\t});\n\t}\n}\n\nmodule.exports = InlineSvg;\n\n/***/ }),\n\n/***/ \"./element/inlines.js\":\n/*!****************************!*\\\n  !*** ./element/inlines.js ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst Inline = __webpack_require__(/*! ./Inline */ \"./element/Inline.js\");\nconst InlineIcon = __webpack_require__(/*! ./InlineIcon */ \"./element/InlineIcon.js\");\nconst InlineImage = __webpack_require__(/*! ./InlineImage */ \"./element/InlineImage.js\");\nconst InlineSvg = __webpack_require__(/*! ./InlineSvg */ \"./element/InlineSvg.js\");\nconst InlineDrawer = __webpack_require__(/*! ./InlineDrawer */ \"./element/InlineDrawer.js\");\nconst InlinePath2D = __webpack_require__(/*! ./InlinePath2D */ \"./element/InlinePath2D.js\");\nconst { isDef } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\nconst { calcStartPosition } = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\nconst icons = __webpack_require__(/*! ../icons */ \"./icons.js\");\nconst path2DManager = __webpack_require__(/*! ../internal/path2DManager */ \"./internal/path2DManager.js\");\n\nfunction drawRegisteredIcon(ctx, icon, drawWidth, drawHeight, left, top, width, height, {\n\toffset = 2,\n\tpadding\n} = {}) {\n\tconst rect = {\n\t\tleft,\n\t\ttop,\n\t\twidth,\n\t\theight,\n\t\tright: left + width,\n\t\tbottom: top + height\n\t};\n\tctx.save();\n\ttry {\n\t\tctx.beginPath();\n\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t//clip\n\t\tctx.clip();\n\n\t\t//\n\t\tconst pos = calcStartPosition(ctx, rect, drawWidth, drawHeight, {\n\t\t\toffset,\n\t\t\tpadding\n\t\t});\n\t\tpath2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\n\t} finally {\n\t\tctx.restore();\n\t}\n}\n\nmodule.exports = {\n\ticonOf(icon) {\n\t\tif (icon instanceof Inline) {\n\t\t\treturn icon;\n\t\t}\n\t\tif (!icon) {\n\t\t\treturn null;\n\t\t}\n\t\tif (icon.font && icon.content) {\n\t\t\treturn new InlineIcon(icon);\n\t\t}\n\t\tif (icon.src) {\n\t\t\treturn new InlineImage({\n\t\t\t\tsrc: icon.src,\n\t\t\t\twidth: icon.width,\n\t\t\t\theight: icon.width\n\t\t\t});\n\t\t}\n\t\tif (icon.svg) {\n\t\t\treturn new InlineSvg({\n\t\t\t\tsvg: icon.svg,\n\t\t\t\twidth: icon.width,\n\t\t\t\theight: icon.width\n\t\t\t});\n\t\t}\n\t\tif (icon.path) {\n\t\t\treturn new InlinePath2D({\n\t\t\t\tpath: icon.path,\n\t\t\t\twidth: icon.width,\n\t\t\t\theight: icon.width,\n\t\t\t\tcolor: icon.color\n\t\t\t});\n\t\t}\n\t\tconst regedIcons = icons.get();\n\t\tif (icon.name && regedIcons[icon.name]) {\n\t\t\tconst regedIcon = regedIcons[icon.name];\n\t\t\tconst width = icon.width || Math.max(regedIcon.width, regedIcon.height);\n\t\t\treturn new InlineDrawer({\n\t\t\t\tdraw({\n\t\t\t\t\tctx,\n\t\t\t\t\tcanvashelper,\n\t\t\t\t\trect,\n\t\t\t\t\toffset,\n\t\t\t\t\toffsetLeft,\n\t\t\t\t\toffsetRight,\n\t\t\t\t\toffsetTop,\n\t\t\t\t\toffsetBottom\n\t\t\t\t}) {\n\t\t\t\t\tdrawRegisteredIcon(ctx, regedIcon, width, width, rect.left, rect.top, rect.width, rect.height, {\n\t\t\t\t\t\toffset: offset + 1,\n\t\t\t\t\t\tpadding: {\n\t\t\t\t\t\t\tleft: offsetLeft,\n\t\t\t\t\t\t\tright: offsetRight,\n\t\t\t\t\t\t\ttop: offsetTop,\n\t\t\t\t\t\t\tbottom: offsetBottom\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\twidth,\n\t\t\t\theight: width,\n\t\t\t\tcolor: icon.color\n\t\t\t});\n\t\t}\n\t\treturn new InlineIcon(icon);\n\t},\n\tof(content) {\n\t\tif (!isDef(content)) {\n\t\t\treturn null;\n\t\t}\n\t\tif (content instanceof Inline) {\n\t\t\treturn content;\n\t\t}\n\t\treturn new Inline(content);\n\t},\n\tbuildInlines(icons, inline) {\n\t\tconst result = [];\n\t\tif (icons) {\n\t\t\tresult.push(...icons.map(icon => this.iconOf(icon)).filter(e => !!e));\n\t\t}\n\t\tif (__webpack_provided_Array_dot_isArray(inline) && inline.filter(il => il instanceof Inline).length) {\n\t\t\tresult.push(...inline.map(il => this.of(il)).filter(e => !!e));\n\t\t} else {\n\t\t\tconst il = this.of(inline);\n\t\t\tif (il) {\n\t\t\t\tresult.push(il);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./header/style.js\":\n/*!*************************!*\\\n  !*** ./header/style.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./style/BaseStyle */ \"./header/style/BaseStyle.js\");\n\tconst Style = __webpack_require__(/*! ./style/Style */ \"./header/style/Style.js\");\n\n\tconst style = {\n\t\tget BaseStyle() {\n\t\t\treturn BaseStyle;\n\t\t},\n\t\tget Style() {\n\t\t\treturn Style;\n\t\t},\n\t\tof(columnStyle, StyleClass) {\n\t\t\tif (columnStyle) {\n\t\t\t\tif (columnStyle instanceof Style) {\n\t\t\t\t\treturn columnStyle;\n\t\t\t\t} else if (typeof columnStyle === 'function') {\n\t\t\t\t\treturn style.of(columnStyle(), StyleClass);\n\t\t\t\t}\n\t\t\t\treturn new StyleClass(columnStyle);\n\t\t\t} else {\n\t\t\t\treturn StyleClass.DEFAULT;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = style;\n}\n\n/***/ }),\n\n/***/ \"./header/style/BaseStyle.js\":\n/*!***********************************!*\\\n  !*** ./header/style/BaseStyle.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst EventTarget = __webpack_require__(/*! ../../core/EventTarget */ \"./core/EventTarget.js\");\n\n\tconst EVENT_TYPE = {\n\t\tCHANGE_STYLE: 'change_style'\n\t};\n\n\tlet defaultStyle;\n\tclass BaseStyle extends EventTarget {\n\t\tstatic get EVENT_TYPE() {\n\t\t\treturn EVENT_TYPE;\n\t\t}\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new BaseStyle();\n\t\t}\n\t\tconstructor({\n\t\t\ttextAlign = 'left',\n\t\t\ttextBaseline = 'middle',\n\t\t\tbgColor\n\t\t} = {}) {\n\t\t\tsuper();\n\t\t\tthis._textAlign = textAlign;\n\t\t\tthis._textBaseline = textBaseline;\n\t\t\tthis._bgColor = bgColor;\n\t\t}\n\t\tget textAlign() {\n\t\t\treturn this._textAlign;\n\t\t}\n\t\tset textAlign(textAlign) {\n\t\t\tthis._textAlign = textAlign;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget textBaseline() {\n\t\t\treturn this._textBaseline;\n\t\t}\n\t\tset textBaseline(textBaseline) {\n\t\t\tthis._textBaseline = textBaseline;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tget bgColor() {\n\t\t\treturn this._bgColor;\n\t\t}\n\t\tset bgColor(bgColor) {\n\t\t\tthis._bgColor = bgColor;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tdoChangeStyle() {\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\n\t\t}\n\t\tclone() {\n\t\t\treturn new BaseStyle(this);\n\t\t}\n\t}\n\tmodule.exports = BaseStyle;\n}\n\n/***/ }),\n\n/***/ \"./header/style/Style.js\":\n/*!*******************************!*\\\n  !*** ./header/style/Style.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst BaseStyle = __webpack_require__(/*! ./BaseStyle */ \"./header/style/BaseStyle.js\");\n\tlet defaultStyle;\n\tclass Style extends BaseStyle {\n\t\tstatic get DEFAULT() {\n\t\t\treturn defaultStyle ? defaultStyle : defaultStyle = new Style();\n\t\t}\n\t\tconstructor(style = {}) {\n\t\t\tsuper(style);\n\t\t\tthis._color = style.color;\n\t\t}\n\t\tget color() {\n\t\t\treturn this._color;\n\t\t}\n\t\tset color(color) {\n\t\t\tthis._color = color;\n\t\t\tthis.doChangeStyle();\n\t\t}\n\t\tclone() {\n\t\t\treturn new Style(this);\n\t\t}\n\t}\n\tmodule.exports = Style;\n}\n\n/***/ }),\n\n/***/ \"./header/type.js\":\n/*!************************!*\\\n  !*** ./header/type.js ***!\n  \\************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Header = __webpack_require__(/*! ./type/Header */ \"./header/type/Header.js\");\n\tconst SortHeader = __webpack_require__(/*! ./type/SortHeader */ \"./header/type/SortHeader.js\");\n\n\tconst type = {\n\t\tcreate(headerCell) {\n\t\t\tif (headerCell.sort) {\n\t\t\t\treturn new SortHeader(headerCell);\n\t\t\t}\n\t\t\treturn new Header(headerCell);\n\t\t}\n\t};\n\tmodule.exports = type;\n}\n\n/***/ }),\n\n/***/ \"./header/type/BaseHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/BaseHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./header/style.js\");\n\tconst { Style } = styleContents;\n\n\tclass BaseHeader {\n\t\tconstructor(headerCell) {\n\t\t\tthis._headerCell = headerCell;\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this); //\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tonDrawCell(cellValue, info, context, grid) {\n\t\t\tconst { style, drawCellBase } = info;\n\t\t\tdelete info.getRecord;\n\t\t\tdelete info.style;\n\t\t\tconst helper = grid.getGridCanvasHelper();\n\t\t\tdrawCellBase();\n\t\t\t//\n\t\t\tthis.drawInternal(cellValue, context, styleContents.of(style, this.StyleClass), helper, grid, info);\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, info) {}\n\t\tbindGridEvent(grid) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = BaseHeader;\n}\n\n/***/ }),\n\n/***/ \"./header/type/Header.js\":\n/*!*******************************!*\\\n  !*** ./header/type/Header.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./header/style.js\");\n\tconst { Style } = styleContents;\n\tconst BaseHeader = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\n\tclass Header extends BaseHeader {\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\tbgColor\n\t\t\t} = style;\n\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thelper.text(value, context, {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont\n\t\t\t});\n\t\t}\n\t\tbindGridEvent(grid) {\n\t\t\treturn [];\n\t\t}\n\t}\n\tmodule.exports = Header;\n}\n\n/***/ }),\n\n/***/ \"./header/type/SortHeader.js\":\n/*!***********************************!*\\\n  !*** ./header/type/SortHeader.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst styleContents = __webpack_require__(/*! ../style */ \"./header/style.js\");\n\tconst { Style } = styleContents;\n\tconst BaseHeader = __webpack_require__(/*! ./BaseHeader */ \"./header/type/BaseHeader.js\");\n\tconst { isDef } = __webpack_require__(/*! ../../internal/utils */ \"./internal/utils.js\");\n\tconst { EVENT_TYPE: {\n\t\t\tCLICK_CELL,\n\t\t\tMOUSEOVER_CELL,\n\t\t\tMOUSEOUT_CELL,\n\t\t\tMOUSEMOVE_CELL\n\t\t} } = __webpack_require__(/*! ../../core/DrawGrid */ \"./core/DrawGrid.js\");\n\n\tclass SortHeader extends BaseHeader {\n\t\tconstructor(headerCell) {\n\t\t\tsuper(headerCell);\n\t\t\tthis._sort = headerCell.sort;\n\t\t\tthis._range = headerCell.range;\n\t\t}\n\t\tget StyleClass() {\n\t\t\treturn Style;\n\t\t}\n\t\tdrawInternal(value, context, style, helper, grid, { drawCellBase }) {\n\t\t\tconst {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline = 'middle',\n\t\t\t\tcolor,\n\t\t\t\tbgColor,\n\t\t\t\tfont\n\t\t\t} = style;\n\n\t\t\tif (bgColor) {\n\t\t\t\tdrawCellBase({\n\t\t\t\t\tbgColor\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst state = grid.sortState;\n\t\t\tlet order = undefined;\n\t\t\tif (this._range.isCellInRange(state.col, this._range.startRow)) {\n\t\t\t\torder = state.order;\n\t\t\t}\n\n\t\t\tconst ctx = context.getContext();\n\t\t\tconst arrowSize = ctx.measureText('').width * 1.2;\n\n\t\t\thelper.text(value, context, {\n\t\t\t\ttextAlign,\n\t\t\t\ttextBaseline,\n\t\t\t\tcolor,\n\t\t\t\tfont,\n\t\t\t\ticons: [{\n\t\t\t\t\tname: isDef(order) ? order === 'asc' ? 'arrow_downward' : 'arrow_upward' : null,\n\t\t\t\t\twidth: arrowSize,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.38)'\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\t\t_executeSort(newState, grid) {\n\t\t\tif (typeof this._sort === 'function') {\n\t\t\t\tthis._sort(newState.order, newState.col, grid);\n\t\t\t} else {\n\t\t\t\tgrid.dataSource.sort(grid.getField(newState.col), newState.order);\n\t\t\t}\n\t\t}\n\t\tbindGridEvent(grid) {\n\t\t\treturn [grid.listen(CLICK_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst state = grid.sortState;\n\t\t\t\tlet newState;\n\t\t\t\tif (this._range.isCellInRange(state.col, e.row)) {\n\t\t\t\t\tnewState = {\n\t\t\t\t\t\tcol: this._range.startCol,\n\t\t\t\t\t\torder: state.order === 'asc' ? 'desc' : 'asc'\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tnewState = {\n\t\t\t\t\t\tcol: this._range.startCol,\n\t\t\t\t\t\torder: 'asc'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tgrid.sortState = newState;\n\t\t\t\tthis._executeSort(newState, grid);\n\t\t\t\tgrid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\n\t\t\t}),\n\t\t\t// mouse move\n\t\t\tgrid.listen(MOUSEOVER_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t\t}),\n\t\t\t//MOUSEENTER'col-resize'move\n\t\t\tgrid.listen(MOUSEMOVE_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!grid.getElement().style.cursor) {\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\n\t\t\t\t}\n\t\t\t}), grid.listen(MOUSEOUT_CELL, e => {\n\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tgrid.getElement().style.cursor = '';\n\t\t\t})];\n\t\t}\n\t}\n\tmodule.exports = SortHeader;\n}\n\n/***/ }),\n\n/***/ \"./icons.js\":\n/*!******************!*\\\n  !*** ./icons.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint-disable camelcase*/\n\n\nconst { extend } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\nconst plugins = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\nconst builtins = {\n\tget arrow_upward() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg\");\n\t},\n\tget arrow_downward() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg\");\n\t},\n\tget edit() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/image/svg/production/ic_edit_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/image/svg/production/ic_edit_48px.svg\");\n\t},\n\tget add() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/content/svg/production/ic_add_48px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/content/svg/production/ic_add_48px.svg\");\n\t},\n\tget star() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_24px.svg\");\n\t},\n\tget star_border() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_border_24px.svg\");\n\t},\n\tget star_half() {\n\t\treturn __webpack_require__(/*! ../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg */ \"../../webpack-loader/svg-to-icon-js-loader.js!../../node_modules/material-design-icons/toggle/svg/production/ic_star_half_24px.svg\");\n\t}\n};\n\nmodule.exports = {\n\tget() {\n\t\treturn extend(builtins, plugins);\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/EventHandler.js\":\n/*!**********************************!*\\\n  !*** ./internal/EventHandler.js ***!\n  \\**********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { obj: { each } } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\tlet nextId = 1;\n\n\tclass EventHandler {\n\t\tconstructor() {\n\t\t\tthis._listeners = {};\n\t\t}\n\t\ton(target, type, listener, ...options) {\n\t\t\tif (target.addEventListener) {\n\t\t\t\ttarget.addEventListener(type, listener, ...options);\n\t\t\t}\n\t\t\tconst obj = {\n\t\t\t\ttarget, type, listener, options\n\t\t\t};\n\t\t\tconst id = nextId++;\n\t\t\tthis._listeners[id] = obj;\n\t\t\treturn id;\n\t\t}\n\t\ttryWithOffEvents(target, type, call) {\n\t\t\tconst list = [];\n\t\t\ttry {\n\t\t\t\teach(this._listeners, obj => {\n\t\t\t\t\tif (obj.target === target && obj.type === type) {\n\t\t\t\t\t\tif (obj.target.removeEventListener) {\n\t\t\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlist.push(obj);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tcall();\n\t\t\t} finally {\n\t\t\t\tlist.forEach(obj => {\n\t\t\t\t\tif (obj.target.addEventListener) {\n\t\t\t\t\t\tobj.target.addEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\toff(id) {\n\t\t\tif (!id) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst obj = this._listeners[id];\n\t\t\tif (!obj) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdelete this._listeners[id];\n\t\t\tif (obj.target.removeEventListener) {\n\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t}\n\t\t}\n\t\tfire(target, type, ...args) {\n\t\t\teach(this._listeners, obj => {\n\t\t\t\tif (obj.target === target && obj.type === type) {\n\t\t\t\t\tobj.listener.call(obj.target, ...args);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thasListener(target, type) {\n\t\t\tlet result = false;\n\t\t\teach(this._listeners, obj => {\n\t\t\t\tif (obj.target === target && obj.type === type) {\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\tclear() {\n\t\t\teach(this._listeners, obj => {\n\t\t\t\tif (obj.target.removeEventListener) {\n\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._listeners = {};\n\t\t}\n\t\tdispose() {\n\t\t\tthis.clear();\n\t\t\tthis._listeners = null;\n\t\t}\n\t}\n\n\tmodule.exports = EventHandler;\n}\n\n/***/ }),\n\n/***/ \"./internal/LRUCache.js\":\n/*!******************************!*\\\n  !*** ./internal/LRUCache.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nclass LRUCache {\n\tconstructor(cacheSize) {\n\t\tthis._list = [];\n\t\tthis._map = {};\n\t\tthis._cacheSize = cacheSize || 50;\n\t}\n\tget(key) {\n\t\tconst val = this._map[key];\n\t\tif (val) {\n\t\t\tconst idx = this._list.indexOf(key);\n\t\t\tthis._list.splice(idx, 1);\n\t\t\tthis._list.push(key);\n\t\t}\n\t\treturn val;\n\t}\n\tput(key, value) {\n\t\tif (this._map[key]) {\n\t\t\tconst idx = this._list.indexOf(key);\n\t\t\tthis._list.splice(idx, 1);\n\t\t}\n\t\tthis._map[key] = value;\n\t\tthis._list.push(key);\n\t\tif (this._list.length > this._cacheSize) {\n\t\t\tconst remKey = this._list.shift();\n\t\t\tdelete this._map[remKey];\n\t\t}\n\t}\n}\nmodule.exports = LRUCache;\n\n/***/ }),\n\n/***/ \"./internal/NumberMap.js\":\n/*!*******************************!*\\\n  !*** ./internal/NumberMap.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst indexFirst = (ary, elm) => {\n\t\tlet low = 0;\n\t\tlet high = ary.length - 1;\n\t\twhile (low <= high) {\n\t\t\tconst i = Math.floor((low + high) / 2);\n\t\t\tif (ary[i] === elm) {\n\t\t\t\treturn i;\n\t\t\t} else if (ary[i] > elm) {\n\t\t\t\thigh = i - 1;\n\t\t\t} else {\n\t\t\t\tlow = i + 1;\n\t\t\t}\n\t\t}\n\t\treturn high < 0 ? 0 : high;\n\t};\n\n\tclass NumberMap {\n\t\tconstructor() {\n\t\t\tthis._keys = [];\n\t\t\tthis._vals = {};\n\t\t\tthis._sorted = false;\n\t\t}\n\t\tput(key, value) {\n\t\t\tif (!(key in this._vals)) {\n\t\t\t\tthis._keys.push(key);\n\t\t\t\tthis._sorted = false;\n\t\t\t}\n\t\t\tthis._vals[key] = value;\n\t\t}\n\t\tget(key) {\n\t\t\treturn this._vals[key];\n\t\t}\n\t\teachAll(fn) {\n\t\t\tthis._keys.forEach(key => {\n\t\t\t\tfn(this.get(key), key);\n\t\t\t});\n\t\t}\n\t\teach(keyFrom, keyTo, fn) {\n\t\t\tconst { _keys: keys } = this;\n\t\t\tconst { length } = keys;\n\t\t\tif (!this._sorted) {\n\t\t\t\tkeys.sort((a, b) => {\n\t\t\t\t\tif (a < b) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (a > b) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\t\t\t\tthis._sorted = true;\n\t\t\t}\n\n\t\t\tfor (let i = indexFirst(keys, keyFrom); i < length; i++) {\n\t\t\t\tconst key = keys[i];\n\t\t\t\tif (keyFrom <= key && key <= keyTo) {\n\t\t\t\t\tfn(this.get(key), key);\n\t\t\t\t} else if (keyTo < key) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tmodule.exports = NumberMap;\n}\n\n/***/ }),\n\n/***/ \"./internal/Rect.js\":\n/*!**************************!*\\\n  !*** ./internal/Rect.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tclass Rect {\n\t\tconstructor(left, top, width, height) {\n\t\t\tthis._left = left;\n\t\t\tthis._top = top;\n\t\t\tthis._width = width;\n\t\t\tthis._height = height;\n\t\t}\n\t\tstatic bounds(left, top, right, bottom) {\n\t\t\treturn new Rect(left, top, right - left, bottom - top);\n\t\t}\n\t\tstatic max(rect1, rect2) {\n\t\t\treturn Rect.bounds(Math.min(rect1.left, rect2.left), Math.min(rect1.top, rect2.top), Math.max(rect1.right, rect2.right), Math.max(rect1.bottom, rect2.bottom));\n\t\t}\n\t\tget left() {\n\t\t\treturn this._left;\n\t\t}\n\t\tset left(left) {\n\t\t\tconst { right } = this;\n\t\t\tthis._left = left;\n\t\t\tthis.right = right;\n\t\t}\n\t\tget top() {\n\t\t\treturn this._top;\n\t\t}\n\t\tset top(top) {\n\t\t\tconst { bottom } = this;\n\t\t\tthis._top = top;\n\t\t\tthis.bottom = bottom;\n\t\t}\n\t\tget width() {\n\t\t\treturn this._width;\n\t\t}\n\t\tset width(width) {\n\t\t\tthis._width = width;\n\t\t\tthis._right = undefined;\n\t\t}\n\t\tget height() {\n\t\t\treturn this._height;\n\t\t}\n\t\tset height(height) {\n\t\t\tthis._height = height;\n\t\t\tthis._bottom = undefined;\n\t\t}\n\t\tget right() {\n\t\t\treturn this._right !== undefined ? this._right : this._right = this.left + this.width;\n\t\t}\n\t\tset right(right) {\n\t\t\tthis._right = right;\n\t\t\tthis.width = right - this.left;\n\t\t}\n\t\tget bottom() {\n\t\t\treturn this._bottom !== undefined ? this._bottom : this._bottom = this.top + this.height;\n\t\t}\n\t\tset bottom(bottom) {\n\t\t\tthis._bottom = bottom;\n\t\t\tthis.height = bottom - this.top;\n\t\t}\n\t\toffsetLeft(offset) {\n\t\t\tthis._left += offset;\n\t\t\tthis._right = undefined;\n\t\t}\n\t\toffsetTop(offset) {\n\t\t\tthis._top += offset;\n\t\t\tthis._bottom = undefined;\n\t\t}\n\t\tcopy() {\n\t\t\treturn new Rect(this.left, this.top, this.width, this.height);\n\t\t}\n\t\tintersection(rect) {\n\t\t\tconst x0 = Math.max(this.left, rect.left);\n\t\t\tconst x1 = Math.min(this.left + this.width, rect.left + rect.width);\n\t\t\tif (x0 <= x1) {\n\t\t\t\tconst y0 = Math.max(this.top, rect.top);\n\t\t\t\tconst y1 = Math.min(this.top + this.height, rect.top + rect.height);\n\t\t\t\tif (y0 <= y1) {\n\t\t\t\t\treturn Rect.bounds(x0, y0, x1, y1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tcontains(another) {\n\t\t\treturn this.left <= another.left && this.left + this.width >= another.left + another.width && this.top <= another.top && this.top + this.height >= another.top + another.height;\n\t\t}\n\t\tinPoint(x, y) {\n\t\t\treturn this.left <= x && this.left + this.width >= x && this.top <= y && this.top + this.height >= y;\n\t\t}\n\t}\n\tmodule.exports = Rect;\n}\n\n/***/ }),\n\n/***/ \"./internal/Scrollable.js\":\n/*!********************************!*\\\n  !*** ./internal/Scrollable.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst EventHandler = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\n\tconst style = __webpack_require__(/*! ./style */ \"./internal/style.js\");\n\tconst { browser } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\n\tconst MAX_SCROLL = browser.heightLimit - 1000;\n\n\tfunction _update(scrollable) {\n\t\tlet domHeight;\n\t\tif (scrollable._height > MAX_SCROLL) {\n\t\t\tconst sbSize = style.getScrollBarSize();\n\t\t\tconst offsetHeight = scrollable._scrollable.offsetHeight;\n\t\t\tconst vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\n\t\t\tconst rScrollRange = scrollable._height - offsetHeight + sbSize;\n\t\t\tscrollable._p = vScrollRange / rScrollRange;\n\t\t\tdomHeight = MAX_SCROLL;\n\t\t} else {\n\t\t\tscrollable._p = 1;\n\t\t\tdomHeight = scrollable._height;\n\t\t}\n\n\t\tscrollable._endPointElement.style.top = domHeight.toFixed() + 'px';\n\t\tscrollable._endPointElement.style.left = scrollable._width.toFixed() + 'px';\n\t}\n\n\tclass Scrollable {\n\t\tconstructor() {\n\t\t\tthis._handler = new EventHandler();\n\n\t\t\tthis._scrollable = document.createElement('div');\n\t\t\tthis._scrollable.classList.add('grid-scrollable');\n\t\t\tthis._height = 0;\n\t\t\tthis._width = 0;\n\n\t\t\tthis._endPointElement = document.createElement('div');\n\t\t\tthis._endPointElement.classList.add('grid-scroll-end-point');\n\t\t\t_update(this);\n\t\t\tthis._scrollable.appendChild(this._endPointElement);\n\n\t\t\t// const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\n\t\t\t// this._handler.on(this._scrollable, mousewheelevt, (evt) => {\n\t\t\t// const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\n\t\t\t// const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\n\t\t\t// this.scrollTop += delta < 0 ? point : -point;\n\t\t\t// });\n\t\t}\n\t\tcalcTop(top) {\n\t\t\tconst relativeTop = top - this.scrollTop;\n\t\t\treturn this._scrollable.scrollTop + relativeTop;\n\t\t}\n\t\tgetElement() {\n\t\t\treturn this._scrollable;\n\t\t}\n\t\tsetScrollSize(width, height) {\n\t\t\tthis._width = width;\n\t\t\tthis._height = height;\n\t\t\t_update(this);\n\t\t}\n\t\tget scrollWidth() {\n\t\t\treturn this._width;\n\t\t}\n\t\tset scrollWidth(width) {\n\t\t\tthis._width = width;\n\t\t\t_update(this);\n\t\t}\n\t\tget scrollHeight() {\n\t\t\treturn this._height;\n\t\t}\n\t\tset scrollHeight(height) {\n\t\t\tthis._height = height;\n\t\t\t_update(this);\n\t\t}\n\t\tget scrollLeft() {\n\t\t\treturn Math.ceil(this._scrollable.scrollLeft);\n\t\t}\n\t\tset scrollLeft(scrollLeft) {\n\t\t\tthis._scrollable.scrollLeft = scrollLeft;\n\t\t}\n\t\tget scrollTop() {\n\t\t\treturn Math.ceil(this._scrollable.scrollTop / this._p);\n\t\t}\n\t\tset scrollTop(scrollTop) {\n\t\t\tthis._scrollable.scrollTop = scrollTop * this._p;\n\t\t}\n\t\tonScroll(fn) {\n\t\t\tthis._handler.on(this._scrollable, 'scroll', fn);\n\t\t}\n\t\tdispose() {\n\t\t\tthis._handler.dispose();\n\t\t}\n\t}\n\n\tmodule.exports = Scrollable;\n}\n\n/***/ }),\n\n/***/ \"./internal/animate.js\":\n/*!*****************************!*\\\n  !*** ./internal/animate.js ***!\n  \\*****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tfunction cubicBezier(x2, y2, x3, y3) {\n\t\tlet step;\n\t\tconst err = 0.0001;\n\n\t\tx2 *= 3;\n\t\ty2 *= 3;\n\t\tx3 *= 3;\n\t\ty3 *= 3;\n\n\t\treturn function (t) {\n\t\t\tlet p, a, b, c, d, x, s;\n\t\t\tif (t < 0 || 1 < t) {\n\t\t\t\tthrow new Error(t);\n\t\t\t}\n\n\t\t\tp = step || t;\n\n\t\t\tdo {\n\t\t\t\ta = 1 - p;\n\t\t\t\tb = a * a;\n\t\t\t\tc = p * p;\n\t\t\t\td = c * p;\n\n\t\t\t\tx = x2 * b * p + x3 * a * c + d;\n\t\t\t\ts = t - x;\n\t\t\t\tp += s * 0.5;\n\t\t\t} while (err < Math.abs(s));\n\n\t\t\tstep = p;\n\t\t\treturn y2 * b * p + y3 * a * c + d;\n\t\t};\n\t}\n\tconst EASINGS = {\n\t\tlinear(p) {\n\t\t\treturn p;\n\t\t},\n\t\teaseIn: cubicBezier(0.420, 0.000, 1.000, 1.000),\n\t\teaseOut: cubicBezier(0.000, 0.000, 0.580, 1.000),\n\t\teaseInOut: cubicBezier(0.420, 0.000, 0.580, 1.000)\n\t};\n\n\tconst raf = window.requestAnimationFrame || setTimeout;\n\n\tfunction now() {\n\t\treturn Date.now();\n\t}\n\t/**\r\n  * <pre>\r\n  * Animates.\r\n  * </pre>\r\n  * @function\r\n  * @param {number} duration animation time.\r\n  * @param {function} step\r\n  * @param {function|string} easing\r\n  * @returns {object} Deferred object.\r\n  */\n\tmodule.exports = (duration, step, easing) => {\n\t\tconst startedAt = now();\n\n\t\tif (!easing) {\n\t\t\teasing = EASINGS.easeInOut;\n\t\t} else if (typeof easing === 'string') {\n\t\t\teasing = EASINGS[easing];\n\t\t}\n\n\t\tlet canceledFlg = false;\n\t\tconst createAnim = (resolve, reject) => {\n\t\t\tconst anim = () => {\n\t\t\t\tconst point = now() - startedAt;\n\t\t\t\tif (canceledFlg) {\n\t\t\t\t\t//cancel\n\t\t\t\t\tif (reject) {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t} else if (point >= duration) {\n\t\t\t\t\t//end\n\t\t\t\t\tstep(1);\n\t\t\t\t\tif (resolve) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstep(easing(point / duration));\n\n\t\t\t\t\traf(anim, 1);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn anim;\n\t\t};\n\t\tconst cancel = () => {\n\t\t\tcanceledFlg = true;\n\t\t};\n\t\tif (window.Promise) {\n\t\t\tconst result = new window.Promise((resolve, reject) => {\n\t\t\t\tconst anim = createAnim(resolve, reject);\n\t\t\t\tstep(0);\n\t\t\t\tanim();\n\t\t\t});\n\t\t\tresult.cancel = cancel;\n\t\t\treturn result;\n\t\t} else {\n\t\t\tconst anim = createAnim(() => {}, () => {});\n\t\t\tstep(0);\n\t\t\tanim();\n\t\t\treturn {\n\t\t\t\tcancel\n\t\t\t};\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/calc.js\":\n/*!**************************!*\\\n  !*** ./internal/calc.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction parse(calcStr) {\n\tfunction replacer(match, num, unit) {\n\t\tswitch (unit) {\n\t\t\tcase '%':\n\t\t\t\treturn `(${num} * this.full / 100)`;\n\t\t\tcase 'em':\n\t\t\t\treturn `(${num} * this.em)`;\n\t\t\tcase 'px':\n\t\t\t\treturn `(${num})`;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('calc error');\n\t\t}\n\t}\n\tconst script = calcStr.replace(/^calc\\((.*)\\)$/, '$1').replace(/(\\d+)([A-Za-z%]+)/g, replacer).replace(/(\\d*\\.\\d+)([A-Za-z%]+)/g, replacer);\n\treturn {\n\t\teval(context) {\n\t\t\treturn (() => {\n\t\t\t\tfunction calc(v) {\n\t\t\t\t\t// eslint-disable-line no-unused-vars\n\t\t\t\t\treturn v;\n\t\t\t\t}\n\t\t\t\treturn eval(script); // eslint-disable-line no-eval\n\t\t\t}).call(context);\n\t\t}\n\t};\n}\nfunction toPx(value, context) {\n\tif (/^calc\\(.*\\)$/.test(value)) {\n\t\treturn parse(value).eval(context);\n\t}\n\tif (/^[+-]?\\d+\\.?\\d*%$/.test(value)) {\n\t\treturn context.full * value.substr(0, value.length - 1) / 100;\n\t}\n\tif (/^[+-]?\\d+\\.?\\d*px$/.test(value)) {\n\t\treturn value.substr(0, value.length - 2) - 0;\n\t}\n\tif (/^[+-]?\\d+\\.?\\d*em$/.test(value)) {\n\t\treturn context.em * (value.substr(0, value.length - 2) - 0);\n\t}\n\treturn value - 0;\n}\n\nmodule.exports = {\n\tparse,\n\ttoPx(value, context) {\n\t\tif (typeof value === 'string') {\n\t\t\treturn toPx(value.trim(), context);\n\t\t}\n\t\treturn value - 0;\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/canvases.js\":\n/*!******************************!*\\\n  !*** ./internal/canvases.js ***!\n  \\******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\n\tfunction calcBasePosition(ctx, rect, {\n\t\toffset = 0,\n\t\tpadding: {\n\t\t\tleft: paddingLeft = 0,\n\t\t\tright: paddingRight = 0,\n\t\t\ttop: paddingTop = 0,\n\t\t\tbottom: paddingBottom = 0\n\t\t} = {}\n\t} = {}) {\n\t\t// const textAlign = ctx.textAlign || 'left';\n\t\t// const textBaseline = ctx.textBaseline || 'middle';\n\t\t// ctx.textAlign = textAlign;\n\t\t// ctx.textBaseline = textBaseline;\n\n\t\t// let x = rect.left + offset + paddingLeft;\n\t\t// if (textAlign === 'right' || textAlign === 'end') {\n\t\t// \tx = rect.right - offset - paddingRight;\n\t\t// } else if (textAlign === 'center') {\n\t\t// \tx = rect.left + ((rect.width + paddingLeft - paddingRight) / 2);\n\t\t// }\n\t\t// let y = rect.top + offset;\n\t\t// if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n\t\t// \ty = rect.bottom - offset;\n\t\t// } else if (textBaseline === 'middle') {\n\t\t// \ty = rect.top + (rect.height / 2);\n\t\t// }\n\t\t// return {x, y};\n\t\treturn calcStartPosition(ctx, rect, 0, 0, {\n\t\t\toffset,\n\t\t\tpadding: {\n\t\t\t\tleft: paddingLeft,\n\t\t\t\tright: paddingRight,\n\t\t\t\ttop: paddingTop,\n\t\t\t\tbottom: paddingBottom\n\t\t\t}\n\t\t});\n\t}\n\tfunction calcStartPosition(ctx, rect, width, height, {\n\t\toffset = 0,\n\t\tpadding: {\n\t\t\tleft: paddingLeft = 0,\n\t\t\tright: paddingRight = 0,\n\t\t\ttop: paddingTop = 0,\n\t\t\tbottom: paddingBottom = 0\n\t\t} = {}\n\t} = {}) {\n\t\tconst textAlign = ctx.textAlign || 'left';\n\t\tconst textBaseline = ctx.textBaseline || 'middle';\n\t\tctx.textAlign = textAlign;\n\t\tctx.textBaseline = textBaseline;\n\n\t\tlet x = rect.left + offset + paddingLeft;\n\t\tif (textAlign === 'right' || textAlign === 'end') {\n\t\t\tx = rect.right - width - offset - paddingRight;\n\t\t} else if (textAlign === 'center') {\n\t\t\tx = rect.left + (rect.width - width + paddingLeft - paddingRight) / 2;\n\t\t}\n\t\tlet y = rect.top + offset + paddingTop;\n\t\tif (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n\t\t\ty = rect.bottom - height - offset - paddingBottom;\n\t\t} else if (textBaseline === 'middle') {\n\t\t\ty = rect.top + (rect.height - height + paddingTop - paddingBottom) / 2;\n\t\t}\n\t\treturn { x, y };\n\t}\n\n\tmodule.exports = {\n\t\tcalcBasePosition,\n\t\tcalcStartPosition\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/color.js\":\n/*!***************************!*\\\n  !*** ./internal/color.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst rgbMap = {};\n\tfunction styleColorToRGB(color) {\n\t\tconst dummy = document.createElement('div');\n\t\tconst { style } = dummy;\n\t\tstyle.color = color;\n\t\tstyle.position = 'fixed';\n\t\tstyle.height = '1px';\n\t\tstyle.width = '1px';\n\t\tstyle.opacity = 0;\n\t\tdocument.body.appendChild(dummy);\n\t\tconst { color: styleColor } = document.defaultView.getComputedStyle(dummy, '');\n\t\tdocument.body.removeChild(dummy);\n\t\treturn colorToRGB0(styleColor);\n\t}\n\n\tfunction hexToNum(hex) {\n\t\treturn parseInt(hex, 16);\n\t}\n\tfunction createRGB(r, g, b, a = 1) {\n\t\treturn { r, g, b, a };\n\t}\n\tfunction tripleHexToRGB({ 1: r, 2: g, 3: b }) {\n\t\treturn createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\n\t}\n\tfunction sextupleHexToRGB({ 1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2 }) {\n\t\treturn createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\n\t}\n\n\tfunction testRGB({ r, g, b, a }) {\n\t\treturn 0 <= r && r <= 255 && 0 <= g && g <= 255 && 0 <= b && b <= 255 && 0 <= a && a <= 1;\n\t}\n\tfunction rateToByte(r) {\n\t\treturn Math.ceil(r * 255 / 100);\n\t}\n\tfunction colorToRGB0(color) {\n\t\tif (color.match(/^#[0-9a-f]{3}$/i)) {\n\t\t\treturn tripleHexToRGB(color);\n\t\t}\n\t\tif (color.match(/^#[0-9a-f]{6}$/i)) {\n\t\t\treturn sextupleHexToRGB(color);\n\t\t}\n\t\tlet ret = color.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0);\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0, ret[4] - 0);\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\tret = color.match(/^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]));\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\n\t\tif (ret) {\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]), ret[7] - 0);\n\t\t\tif (testRGB(rgb)) {\n\t\t\t\treturn rgb;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tfunction colorToRGB(color) {\n\t\tif (typeof color !== 'string') {\n\t\t\treturn createRGB(0, 0, 0, 0);\n\t\t}\n\t\tcolor = color.toLowerCase().trim();\n\t\tif (rgbMap[color]) {\n\t\t\treturn rgbMap[color];\n\t\t}\n\t\treturn colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\n\t}\n\n\tmodule.exports = {\n\t\tcolorToRGB\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/com.js\":\n/*!*************************!*\\\n  !*** ./internal/com.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n\t'Array_isArray': window.Array.isArray\n};\n\n/***/ }),\n\n/***/ \"./internal/dom.js\":\n/*!*************************!*\\\n  !*** ./internal/dom.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { isDef } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nfunction createElement(tagName, { classList, text, html } = {}) {\n\tconst element = document.createElement(tagName);\n\tif (classList) {\n\t\tif (__webpack_provided_Array_dot_isArray(classList)) {\n\t\t\telement.classList.add(...classList);\n\t\t} else {\n\t\t\telement.classList.add(classList);\n\t\t}\n\t}\n\tif (text) {\n\t\telement.textContent = text;\n\t} else if (html) {\n\t\telement.innerHTML = html;\n\t}\n\treturn element;\n}\n\nfunction empty(dom) {\n\tlet c;\n\twhile (c = dom.firstChild) {\n\t\tdom.removeChild(c);\n\t}\n}\nfunction isNode(arg) {\n\treturn !!(arg.nodeType && arg.nodeName);\n}\nfunction toNode(arg) {\n\tif (isNode(arg)) {\n\t\treturn arg;\n\t}\n\tconst dom = createElement('div', { html: arg });\n\treturn Array.prototype.slice.call(dom.childNodes);\n}\nfunction toNodeList(arg) {\n\tif (window.jQuery && arg instanceof window.jQuery) {\n\t\treturn Array.prototype.map.call(arg, a => a);\n\t}\n\tif (__webpack_provided_Array_dot_isArray(arg)) {\n\t\treturn arg.map(toNode);\n\t}\n\treturn [toNode(arg)];\n}\n\nfunction appendHtml(dom, inner) {\n\ttoNodeList(inner).forEach(node => {\n\t\tdom.appendChild(node);\n\t});\n}\n\nfunction disableFocus(el) {\n\tel.dataset.disableBeforeTabIndex = el.tabIndex;\n\tel.tabIndex = -1;\n\tArray.prototype.slice.call(el.children, 0).forEach(disableFocus);\n}\nfunction enableFocus(el) {\n\tif ('disableBeforeTabIndex' in el.dataset) {\n\t\tel.tabIndex = el.dataset.disableBeforeTabIndex;\n\t}\n\tArray.prototype.slice.call(el.children, 0).forEach(enableFocus);\n}\n\nfunction isFocusable(el) {\n\treturn isDef(el.tabIndex) && el.tabIndex > -1;\n}\nfunction findPrevSiblingFocusable(el) {\n\tlet n = el.previousSibling;\n\twhile (n && !isFocusable(n)) {\n\t\tn = n.previousSibling;\n\t}\n\treturn n;\n}\nfunction findNextSiblingFocusable(el) {\n\tlet n = el.nextSibling;\n\twhile (n && !isFocusable(n)) {\n\t\tn = n.nextSibling;\n\t}\n\treturn n;\n}\n\nmodule.exports = {\n\tcreateElement,\n\tempty,\n\tisNode,\n\ttoNode,\n\ttoNodeList,\n\tappendHtml,\n\tdisableFocus,\n\tenableFocus,\n\tisFocusable,\n\tfindPrevSiblingFocusable,\n\tfindNextSiblingFocusable\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./internal/fonts.js\":\n/*!***************************!*\\\n  !*** ./internal/fonts.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst loads = {};\n\tconst legacy = !document.fonts;\n\tconst load = legacy ? function (font, testStr, callback) {\n\t\t//for legacy(IE)\n\t\tif (loads[font + ' @ ' + testStr]) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\t__webpack_require__(/*! ./legacy/fontwatch/FontWatchRunner */ \"./internal/legacy/fontwatch/FontWatchRunner.js\").load(font, testStr, () => {\n\t\t\tloads[font + ' @ ' + testStr] = true;\n\t\t\tcallback();\n\t\t}, () => {\n\t\t\tloads[font + ' @ ' + testStr] = true;\n\t\t\tcallback();\n\t\t});\n\t} : function (font, testStr, callback) {\n\t\tif (loads.all || loads[font]) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\t\tdocument.fonts.ready.then(() => {\n\t\t\tloads.all = true;\n\t\t});\n\t\tdocument.fonts.load(font).then(() => {\n\t\t\tloads[font] = true;\n\t\t\tcallback();\n\t\t});\n\t};\n\tconst check = legacy ? function (font, testStr) {\n\t\t//for legacy(IE)\n\t\tif (loads[font + ' @ ' + testStr]) {\n\t\t\treturn true;\n\t\t}\n\t\tload(font, testStr, () => {});\n\t\treturn false;\n\t} : function (font, testStr) {\n\t\tif (loads.all || loads[font]) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!document.fonts.check(font)) {\n\t\t\tload(font, testStr, () => {});\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tmodule.exports = {\n\t\tcheck,\n\t\tload\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/hiDPI.js\":\n/*!***************************!*\\\n  !*** ./internal/hiDPI.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst EventHandler = __webpack_require__(/*! ./EventHandler */ \"./internal/EventHandler.js\");\nconst handler = new EventHandler();\n\nlet ratio;\nfunction setRatio() {\n\tratio = Math.ceil(window.devicePixelRatio || 1);\n\tif (ratio > 1 && ratio % 2 !== 0) {\n\t\tratio += 1;\n\t}\n}\nsetRatio();\nhandler.on(window, 'resize', setRatio);\n\nmodule.exports = {\n\ttransform(canvas) {\n\t\tconst ctx = canvas.getContext('2d');\n\n\t\tconst getAttribute = canvas.getAttribute;\n\t\tcanvas.getAttribute = function (name, ...args) {\n\t\t\tlet result = getAttribute.call(this, name, ...args);\n\t\t\tif (name === 'width' || name === 'height') {\n\t\t\t\tresult /= ratio;\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t\tconst setAttribute = canvas.setAttribute;\n\t\tcanvas.setAttribute = function (name, val, ...args) {\n\t\t\tconst wh = name === 'width' || name === 'height';\n\t\t\tif (wh) {\n\t\t\t\tval *= ratio;\n\t\t\t}\n\t\t\tconst result = setAttribute.call(this, name, val, ...args);\n\t\t\tif (wh) {\n\t\t\t\tctx.scale(ratio, ratio);\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\n\t\tObject.defineProperty(canvas, 'width', {\n\t\t\tget() {\n\t\t\t\treturn canvas.getAttribute('width');\n\t\t\t},\n\t\t\tset: val => {\n\t\t\t\tcanvas.setAttribute('width', Math.floor(val));\n\t\t\t},\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true\n\t\t});\n\t\tObject.defineProperty(canvas, 'height', {\n\t\t\tget() {\n\t\t\t\treturn canvas.getAttribute('height');\n\t\t\t},\n\t\t\tset: val => {\n\t\t\t\tcanvas.setAttribute('height', Math.floor(val));\n\t\t\t},\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true\n\t\t});\n\t\tconst drawImage = ctx.drawImage;\n\t\tctx.drawImage = function (img, ...args) {\n\t\t\tif (img !== canvas || ratio === 1) {\n\t\t\t\treturn drawImage.call(this, img, ...args);\n\t\t\t}\n\t\t\tthis.save();\n\t\t\ttry {\n\t\t\t\tthis.scale(1 / ratio, 1 / ratio);\n\t\t\t\tif (args.length > 4) {\n\t\t\t\t\targs[4] = args[4] * ratio;\n\t\t\t\t\targs[5] = args[5] * ratio;\n\t\t\t\t} else {\n\t\t\t\t\targs[0] = args[0] * ratio;\n\t\t\t\t\targs[1] = args[1] * ratio;\n\t\t\t\t}\n\t\t\t\treturn drawImage.call(this, img, ...args);\n\t\t\t} finally {\n\t\t\t\tthis.restore();\n\t\t\t}\n\t\t};\n\n\t\treturn canvas;\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/icons.js\":\n/*!***************************!*\\\n  !*** ./internal/icons.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nconst { isDef } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\nconst ICON_PROP_KEYS = ['content', 'font', 'color', 'className', 'isLiga', 'width', 'src', 'svg', 'name', 'path'];\n\nfunction quote(name) {\n\tconst quoted = [];\n\tconst split = name.split(/,\\s*/);\n\tfor (let i = 0; i < split.length; i++) {\n\t\tconst part = split[i].replace(/['\"]/g, '');\n\t\tif (part.indexOf(' ') === -1 && !/^\\d/.test(part)) {\n\t\t\tquoted.push(part);\n\t\t} else {\n\t\t\tquoted.push('\\'' + part + '\\'');\n\t\t}\n\t}\n\treturn quoted.join(',');\n}\n\nconst doms = {};\nconst props = {};\n\nfunction getIconProps(tagName, className) {\n\tconst tagProps = props[tagName] || (props[tagName] = {});\n\tif (tagProps[className]) {\n\t\treturn tagProps[className];\n\t}\n\tconst dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\n\tdom.className = className;\n\tdocument.body.appendChild(dom);\n\ttry {\n\t\tconst beforeStyle = document.defaultView.getComputedStyle(dom, '::before');\n\t\tlet content = beforeStyle.getPropertyValue('content');\n\t\tif (content.length >= 3 && (content[0] === '\"' || content[0] === '\\'')) {\n\t\t\tif (content[0] === content[content.length - 1]) {\n\t\t\t\tcontent = content.substr(1, content.length - 2);\n\t\t\t}\n\t\t}\n\t\tlet font = beforeStyle.getPropertyValue('font');\n\t\tif (!font) {\n\t\t\tfont = beforeStyle.getPropertyValue('font-style') + ' ' + beforeStyle.getPropertyValue('font-variant') + ' ' + beforeStyle.getPropertyValue('font-weight') + ' ' + beforeStyle.getPropertyValue('font-size') + '/' + beforeStyle.getPropertyValue('line-height') + ' ' + quote(beforeStyle.getPropertyValue('font-family'));\n\t\t}\n\t\tconst color = beforeStyle.getPropertyValue('color');\n\t\tconst width = dom.clientWidth;\n\t\tconst isLiga = (beforeStyle.getPropertyValue('font-feature-settings') || '').indexOf('liga') > -1;\n\n\t\treturn tagProps[className] = {\n\t\t\tcontent,\n\t\t\tfont,\n\t\t\tcolor,\n\t\t\twidth,\n\t\t\tisLiga\n\t\t};\n\t} finally {\n\t\tdocument.body.removeChild(dom);\n\t}\n}\n\nfunction toPropArray(prop, count) {\n\tconst result = [];\n\tif (__webpack_provided_Array_dot_isArray(prop)) {\n\t\tresult.push(...prop);\n\t\tfor (let i = prop.length; i < count; i++) {\n\t\t\tresult.push(null);\n\t\t}\n\t} else {\n\t\tfor (let i = 0; i < count; i++) {\n\t\t\tresult.push(prop);\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction toSimpleArray(iconProps) {\n\tif (!iconProps) {\n\t\treturn iconProps;\n\t} else if (__webpack_provided_Array_dot_isArray(iconProps)) {\n\t\treturn iconProps;\n\t}\n\n\tconst workData = {};\n\n\tlet count = 0;\n\tICON_PROP_KEYS.forEach(k => {\n\t\tif (iconProps[k]) {\n\t\t\tif (__webpack_provided_Array_dot_isArray(iconProps[k])) {\n\t\t\t\tcount = Math.max(count, iconProps[k].length);\n\t\t\t} else {\n\t\t\t\tcount = Math.max(count, 1);\n\t\t\t}\n\t\t}\n\t});\n\n\tICON_PROP_KEYS.forEach(k => {\n\t\tworkData[k] = toPropArray(iconProps[k], count);\n\t});\n\n\tconst result = [];\n\tfor (let i = 0; i < count; i++) {\n\t\tconst data = {};\n\t\tICON_PROP_KEYS.forEach(k => {\n\t\t\tdata[k] = workData[k][i];\n\t\t});\n\t\tresult.push(data);\n\t}\n\treturn result;\n}\n\nfunction normarize(iconProps) {\n\tconst data = {};\n\tfor (const k in iconProps) {\n\t\tif (k === 'className') {\n\t\t\tcontinue;\n\t\t}\n\t\tdata[k] = iconProps[k];\n\t}\n\tif (iconProps.className) {\n\t\tconst prop = getIconProps(iconProps.tagName || 'i', iconProps.className);\n\t\tfor (const k in prop) {\n\t\t\tif (!isDef(iconProps[k])) {\n\t\t\t\tdata[k] = prop[k];\n\t\t\t}\n\t\t}\n\t}\n\treturn data;\n}\n\nmodule.exports = {\n\ttoNormarizeArray(iconProps) {\n\t\tconst icons = toSimpleArray(iconProps);\n\t\tif (!icons) {\n\t\t\treturn icons;\n\t\t}\n\t\treturn icons.map(icon => normarize(icon));\n\t},\n\tget iconPropKeys() {\n\t\treturn ICON_PROP_KEYS;\n\t},\n\tgetIconProps\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./internal/imgs.js\":\n/*!**************************!*\\\n  !*** ./internal/imgs.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { then } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\nconst LRUCache = __webpack_require__(/*! ./LRUCache */ \"./internal/LRUCache.js\");\n\nconst allCache = {};\n\nfunction isDataUrl(url) {\n\treturn url.search(/^(data:)/) !== -1;\n}\n\nfunction loadImage(src) {\n\tif (!window.Promise) {\n\t\tconsole.error('Promise is not loaded. load Promise before this process.');\n\t\treturn {\n\t\t\tthen() {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t};\n\t}\n\tconst img = new Image();\n\tconst result = new window.Promise(resolve => {\n\t\timg.onload = () => {\n\t\t\tresolve(img);\n\t\t};\n\t});\n\timg.onerror = e => {\n\t\tconst url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\n\t\tconsole.warn(`cannot load: ${url}`);\n\t\tthrow new Error(`IMAGE LOAD ERROR: ${url}`);\n\t};\n\timg.src = isDataUrl(src) ? src : `${src}?${Date.now()}`;\n\treturn result;\n}\n\nfunction getCacheOrLoad0(cache, src) {\n\treturn then(src, src => {\n\t\tconst c = cache.get(src);\n\t\tif (c) {\n\t\t\treturn c;\n\t\t}\n\t\tconst result = loadImage(src).then(img => {\n\t\t\tcache.put(src, img);\n\t\t\treturn img;\n\t\t});\n\t\tcache.put(src, result);\n\t\treturn result;\n\t});\n}\n\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\n\tconst cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache(cacheSize));\n\treturn getCacheOrLoad0(cache, src);\n}\n\nmodule.exports = {\n\tloadImage,\n\tgetCacheOrLoad\n};\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/Path2D.js\":\n/*!******************************************!*\\\n  !*** ./internal/legacy/canvas/Path2D.js ***!\n  \\******************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst PathCommandsParser = __webpack_require__(/*! ./PathCommandsParser */ \"./internal/legacy/canvas/PathCommandsParser.js\");\nconst parser = new PathCommandsParser();\n\nclass Path2D {\n\tconstructor(arg) {\n\t\tthis._ops = [];\n\t\t['closePath', 'moveTo', 'lineTo', 'bezierCurveTo', 'quadraticCurveTo', 'arc', 'rect'].forEach(name => {\n\t\t\tthis[name] = (...args) => {\n\t\t\t\tthis._ops.push({ op: name, args });\n\t\t\t};\n\t\t});\n\t\tif (arg === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof arg === 'string') {\n\t\t\ttry {\n\t\t\t\tthis._ops = parser.parse(arg);\n\t\t\t} catch (e) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t} else if (arg.hasOwnProperty('_ops')) {\n\t\t\tthis._ops = [...this._ops];\n\t\t} else {\n\t\t\tthrow new Error(`Error: ${typeof arg} is not a valid argument to Path`);\n\t\t}\n\t}\n}\n\nconst CanvasRenderingContext2D = window.CanvasRenderingContext2D;\n\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\n\nCanvasRenderingContext2D.prototype.fill = function (...args) {\n\tif (args[0] instanceof Path2D) {\n\t\tconst path = args[0];\n\t\tthis.beginPath();\n\t\tpath._ops.forEach(op => {\n\t\t\tthis[op.op](...op.args);\n\t\t});\n\t\toriginalFill.apply(this, Array.prototype.slice.call(args, 1));\n\t} else {\n\t\toriginalFill.apply(this, args);\n\t}\n};\n\nmodule.exports = Path2D;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommands.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommands.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction mag(v) {\n\treturn Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n\nfunction dot(u, v) {\n\treturn u[0] * v[0] + u[1] * v[1];\n}\n\nfunction ratio(u, v) {\n\treturn dot(u, v) / (mag(u) * mag(v));\n}\n\nfunction clamp(value, min, max) {\n\treturn Math.min(Math.max(value, min), max);\n}\n\nfunction angle(u, v) {\n\tlet sign = 1.0;\n\tif (u[0] * v[1] - u[1] * v[0] < 0) {\n\t\tsign = -1.0;\n\t}\n\treturn sign * Math.acos(clamp(ratio(u, v)), -1, 1);\n}\n\nfunction rotClockwise(v, angle) {\n\tconst cost = Math.cos(angle);\n\tconst sint = Math.sin(angle);\n\treturn [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\n}\n\nfunction rotCounterClockwise(v, angle) {\n\tconst cost = Math.cos(angle);\n\tconst sint = Math.sin(angle);\n\treturn [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\n}\n\nfunction midPoint(u, v) {\n\treturn [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\n}\n\nfunction meanVec(u, v) {\n\treturn [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\n}\n\nfunction pointMul(u, v) {\n\treturn [u[0] * v[0], u[1] * v[1]];\n}\n\nfunction scale(c, v) {\n\treturn [c * v[0], c * v[1]];\n}\n\nfunction sum(u, v) {\n\treturn [u[0] + v[0], u[1] + v[1]];\n}\n// Convert an SVG elliptical arc to a series of canvas commands.\n//\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\n// rx, ry: radii of the ellipse.\n// phi: rotation of the ellipse.\n// fA: large arc flag.\n// fS: sweep flag.\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\n\t// Convert from endpoint to center parametrization, as detailed in:\n\t//   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\tif (rx === 0 || ry === 0) {\n\t\tctx.lineTo(x2, x1);\n\t\treturn;\n\t}\n\tphi = phi * (Math.PI / 180.0);\n\trx = Math.abs(rx);\n\try = Math.abs(ry);\n\tconst xPrime = rotClockwise(midPoint(x1, x2), phi); // F.6.5.1\n\tconst xPrime2 = pointMul(xPrime, xPrime);\n\tlet rx2 = Math.pow(rx, 2);\n\tlet ry2 = Math.pow(ry, 2);\n\n\tconst lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\n\tif (lambda > 1) {\n\t\trx *= lambda;\n\t\try *= lambda;\n\t\trx2 = Math.pow(rx, 2);\n\t\try2 = Math.pow(ry, 2);\n\t}\n\tlet factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) / (rx2 * xPrime2[1] + ry2 * xPrime2[0]));\n\tif (fA === fS) {\n\t\tfactor *= -1.0;\n\t}\n\tconst cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\n\tconst c = sum(rotCounterClockwise(cPrime, phi), meanVec(x1, x2)); // F.6.5.3\n\tconst x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\n\tconst x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\n\tconst theta = angle([1, 0], x1UnitVector); // F.6.5.5\n\tconst deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\n\tconst start = theta;\n\tconst end = theta + deltaTheta;\n\tctx.save();\n\tctx.translate(c[0], c[1]);\n\tctx.rotate(phi);\n\tctx.scale(rx, ry);\n\tctx.arc(0, 0, 1, start, end, 1 - fS);\n\tctx.restore();\n}\n\nclass PathCommands {\n\tconstructor(ctx) {\n\t\tlet lMx;\n\t\tlet lMy;\n\t\tlet lx = 0;\n\t\tlet ly = 0;\n\t\tlet reflected;\n\t\tlet lastCommand = '';\n\t\tfunction makeReflected() {\n\t\t\tif ('CcSsQqTt'.indexOf(lastCommand) < 0) {\n\t\t\t\treturn { x: lx, y: ly };\n\t\t\t}\n\t\t\treturn reflected;\n\t\t}\n\n\t\tthis.M = (px, py) => {\n\t\t\tctx.moveTo(px, py);\n\t\t\tlMx = px;\n\t\t\tlMy = py;\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\tlastCommand = 'M';\n\t\t\treturn this;\n\t\t};\n\t\tthis.m = (px, py) => this.M(px + lx, py + ly);\n\t\tthis.L = (px, py) => {\n\t\t\tctx.lineTo(px, py);\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\tlastCommand = 'L';\n\t\t\treturn this;\n\t\t};\n\t\tthis.l = (px, py) => this.L(px + lx, py + ly);\n\t\tthis.H = px => this.L(px, ly);\n\t\tthis.h = px => this.H(px + lx);\n\t\tthis.V = py => this.L(lx, py);\n\t\tthis.v = py => this.V(py + ly);\n\t\tthis.Z = () => {\n\t\t\tctx.closePath();\n\t\t\tlx = lMx;\n\t\t\tly = lMy;\n\t\t\tlastCommand = 'Z';\n\t\t\treturn this;\n\t\t};\n\t\tthis.z = () => this.Z();\n\t\t//C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\n\t\tthis.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\n\t\t\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\treflected = {\n\t\t\t\tx: 2 * px - cp2x,\n\t\t\t\ty: 2 * py - cp2y\n\t\t\t};\n\t\t\tlastCommand = 'C';\n\t\t\treturn this;\n\t\t};\n\t\tthis.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(cp1x + lx, cp1y + ly, cp2x + lx, cp2y + ly, px + lx, py + ly);\n\t\t//S x2 y2, x y (or s dx2 dy2, dx dy)\n\t\tthis.S = (cpx, cpy, px, py) => {\n\t\t\tconst { x: cp1x, y: cp1y } = makeReflected(lastCommand);\n\t\t\treturn this.C(cp1x, cp1y, cpx, cpy, px, py);\n\t\t};\n\t\tthis.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\n\t\t//Q x1 y1, x y (or q dx1 dy1, dx dy)\n\t\tthis.Q = (cpx, cpy, px, py) => {\n\t\t\tctx.quadraticCurveTo(cpx, cpy, px, py);\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\treflected = {\n\t\t\t\tx: 2 * px - cpx,\n\t\t\t\ty: 2 * py - cpy\n\t\t\t};\n\t\t\tlastCommand = 'Q';\n\t\t\treturn this;\n\t\t};\n\t\tthis.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\n\t\t//T x y (or t dx dy)\n\t\tthis.T = (px, py) => {\n\t\t\tconst { x: cpx, y: cpy } = makeReflected();\n\t\t\treturn this.Q(cpx, cpy, px, py);\n\t\t};\n\t\tthis.t = (px, py) => this.T(px + lx, py + ly);\n\t\t//A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\t\tthis.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\n\t\t\tconst x1 = lx;\n\t\t\tconst y1 = ly;\n\n\t\t\tellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\n\n\t\t\tlx = px;\n\t\t\tly = py;\n\t\t\tlastCommand = 'A';\n\t\t\treturn this;\n\t\t};\n\t\t//a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\n\t\tthis.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\n\t}\n}\n\nmodule.exports = PathCommands;\n\n/***/ }),\n\n/***/ \"./internal/legacy/canvas/PathCommandsParser.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/canvas/PathCommandsParser.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst PathCommands = __webpack_require__(/*! ./PathCommands */ \"./internal/legacy/canvas/PathCommands.js\");\n\nfunction pathTokens(d) {\n\tlet idx = 0;\n\treturn {\n\t\tnext() {\n\t\t\tlet s = '';\n\t\t\twhile (d.length > idx) {\n\t\t\t\tconst c = d[idx];\n\t\t\t\tidx++;\n\t\t\t\tif (' ,\\n\\r\\t'.indexOf(c) > -1) {\n\t\t\t\t\tif (s) {\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst type = '.+-1234567890'.indexOf(c) > -1 ? 'num' : 'str';\n\t\t\t\t\tif (type === 'str') {\n\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn c;\n\t\t\t\t\t}\n\t\t\t\t\tif ('-+'.indexOf(c) > -1) {\n\t\t\t\t\t\tif (s) {\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (c === '.') {\n\t\t\t\t\t\tif (s.indexOf('.') > -1) {\n\t\t\t\t\t\t\tidx--;\n\t\t\t\t\t\t\treturn s;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ts += c;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn s || null;\n\t\t}\n\t};\n}\n\nfunction command(builder, cmd, argsProvider) {\n\tif (cmd.toUpperCase() === 'M' || cmd.toUpperCase() === 'L' || cmd.toUpperCase() === 'T') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next());\n\t\treturn cmd === 'M' ? 'L' : cmd === 'm' ? 'l' : cmd;\n\t} else if (cmd.toUpperCase() === 'H' || cmd.toUpperCase() === 'V') {\n\t\tbuilder.command(cmd, argsProvider.next());\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'Z') {\n\t\tbuilder.command(cmd);\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'C') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'S' || cmd.toUpperCase() === 'Q') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n\t\treturn cmd;\n\t} else if (cmd.toUpperCase() === 'A') {\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next(), argsProvider.next());\n\t\treturn cmd;\n\t} else {\n\t\t// https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\n\t\tconsole.warn('unsupported:' + cmd);\n\t}\n\treturn null;\n}\n\nconst canvasOperations = window.CanvasRenderingContext2D ? Object.keys(window.CanvasRenderingContext2D.prototype) : ['save', 'restore', 'beginPath', 'closePath', 'moveTo', 'lineTo', 'bezierCurveTo', 'quadraticCurveTo', 'arc', 'arcTo', 'ellipse', 'rect', 'translate', 'rotate', 'scale'];\n\nclass PathCommandsParser {\n\tconstructor() {\n\t\tthis._commands = new PathCommands(this);\n\t\tcanvasOperations.forEach(op => {\n\t\t\tthis[op] = (...args) => {\n\t\t\t\tthis._ops.push({\n\t\t\t\t\top,\n\t\t\t\t\targs\n\t\t\t\t});\n\t\t\t};\n\t\t});\n\t}\n\tcommand(name, ...args) {\n\t\targs = args || [];\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\targs[i] = args[i] - 0;\n\t\t}\n\t\tthis._commands[name](...args);\n\t}\n\tparse(d) {\n\t\tconst ops = this._ops = [];\n\t\tconst tokens = pathTokens(d);\n\t\ttry {\n\t\t\tlet cmd;\n\t\t\tlet subsequentCommand;\n\t\t\twhile (cmd = tokens.next()) {\n\t\t\t\tif (!isNaN(cmd - 0)) {\n\t\t\t\t\tlet fst = true;\n\t\t\t\t\tconst argsProvider = {\n\t\t\t\t\t\tnext() {\n\t\t\t\t\t\t\tif (fst) {\n\t\t\t\t\t\t\t\tfst = false;\n\t\t\t\t\t\t\t\treturn cmd;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn tokens.next();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tsubsequentCommand = command(this, subsequentCommand, argsProvider);\n\t\t\t\t} else {\n\t\t\t\t\tsubsequentCommand = command(this, cmd, tokens);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log('Error: ' + d);\n\t\t\tthrow e;\n\t\t}\n\t\treturn ops;\n\t}\n}\n\nmodule.exports = PathCommandsParser;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontRuler.js\":\n/*!************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontRuler.js ***!\n  \\************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//see https://github.com/typekit/webfontloader\n\nfunction computeStyle(font) {\n\treturn [{\n\t\tdisplay: 'block',\n\t\tposition: 'absolute',\n\t\ttop: '-9999px',\n\t\tleft: '-9999px',\n\t\twidth: 'auto',\n\t\theight: 'auto',\n\t\tmargin: '0',\n\t\tpadding: '0',\n\t\t'white-space': 'nowrap',\n\t\tfont\n\t}, {\n\t\t'font-variant': 'normal',\n\t\t'font-size': '300px',\n\t\t'font-style': 'normal',\n\t\t'font-weight': '400',\n\t\t'line-height': 'normal'\n\t}];\n}\n\nclass FontRuler {\n\tconstructor(font, testStr) {\n\t\tconst e = document.createElement('span');\n\t\te.setAttribute('aria-hidden', 'true');\n\t\te.textContent = testStr || 'BESbswy';\n\n\t\tcomputeStyle(font).forEach(style => {\n\t\t\tfor (const key in style) {\n\t\t\t\te.style[key] = style[key];\n\t\t\t}\n\t\t});\n\t\tdocument.body.appendChild(e);\n\t\tthis.el_ = e;\n\t}\n\tgetWidth() {\n\t\treturn this.el_.offsetWidth;\n\t}\n\tremove() {\n\t\tdocument.body.removeChild(this.el_);\n\t}\n}\n\nmodule.exports = FontRuler;\n\n/***/ }),\n\n/***/ \"./internal/legacy/fontwatch/FontWatchRunner.js\":\n/*!******************************************************!*\\\n  !*** ./internal/legacy/fontwatch/FontWatchRunner.js ***!\n  \\******************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n//see https://github.com/typekit/webfontloader\n\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\n\nconst FontRuler = __webpack_require__(/*! ./FontRuler */ \"./internal/legacy/fontwatch/FontRuler.js\");\n\nconst LastResortFonts = {\n\tSERIF: 'serif',\n\tSANS_SERIF: 'sans-serif'\n};\n\nconst watchRunners = {};\n\nclass FontWatchRunner {\n\tstatic load(font, testStr, activeCallback, inactiveCallback) {\n\t\tconst c = watchRunners[font] || (watchRunners[font] = {});\n\t\ttestStr = testStr + '';\n\t\tlet runner;\n\t\tif (c[testStr]) {\n\t\t\trunner = c[testStr];\n\t\t} else {\n\t\t\trunner = c[testStr] = new FontWatchRunner(font, testStr);\n\t\t}\n\t\trunner.then(activeCallback, inactiveCallback);\n\t}\n\tconstructor(font, testStr) {\n\t\tthis.activeCallbacks = [];\n\t\tthis.inactiveCallbacks = [];\n\t\tthis.status = null;\n\t\tthis.lastResortWidths_ = {};\n\n\t\tthis.fontRulerA_ = new FontRuler(font + ',' + LastResortFonts.SERIF, testStr);\n\t\tthis.fontRulerB_ = new FontRuler(font + ',' + LastResortFonts.SANS_SERIF, testStr);\n\t\tconst lastResortRulerA = new FontRuler('4px ' + LastResortFonts.SERIF, testStr);\n\t\tconst lastResortRulerB = new FontRuler('4px ' + LastResortFonts.SANS_SERIF, testStr);\n\n\t\t//start\n\t\tthis.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\n\t\tthis.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\n\n\t\tlastResortRulerA.remove();\n\t\tlastResortRulerB.remove();\n\n\t\tthis.started_ = Date.now();\n\n\t\tthis.check_();\n\t}\n\tthen(activeCallback, inactiveCallback) {\n\t\tif (this.status) {\n\t\t\tif (this.status !== 'ng') {\n\t\t\t\tactiveCallback();\n\t\t\t} else {\n\t\t\t\tinactiveCallback();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.activeCallbacks.push(activeCallback);\n\t\t\tthis.inactiveCallbacks.push(inactiveCallback);\n\t\t}\n\t}\n\tcheck_() {\n\t\tconst widthA = this.fontRulerA_.getWidth();\n\t\tconst widthB = this.fontRulerB_.getWidth();\n\n\t\tif (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\n\t\t\tif (Date.now() - this.started_ >= 3000) {\n\t\t\t\t// timeout\n\t\t\t\tif (this.isLastResortFont_(widthA, widthB)) {\n\t\t\t\t\tthis.finish_(this.activeCallbacks);\n\t\t\t\t\tthis.status = 'ok';\n\t\t\t\t} else {\n\t\t\t\t\tthis.finish_(this.inactiveCallbacks);\n\t\t\t\t\tthis.status = 'ng';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.check_();\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.finish_(this.activeCallbacks);\n\t\t\tthis.status = 'ok';\n\t\t}\n\t}\n\tisFallbackFont_(a, b) {\n\t\treturn this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\n\t}\n\twidthsMatchLastResortWidths_(a, b) {\n\t\tfor (const font in LastResortFonts) {\n\t\t\tif (LastResortFonts.hasOwnProperty(font)) {\n\t\t\t\tif (this.widthMatches_(a, LastResortFonts[font]) && this.widthMatches_(b, LastResortFonts[font])) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\twidthMatches_(width, lastResortFont) {\n\t\treturn width === this.lastResortWidths_[lastResortFont];\n\t}\n\tisLastResortFont_(a, b) {\n\t\treturn hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\n\t}\n\tfinish_(callbacks) {\n\t\tsetTimeout(() => {\n\t\t\tthis.fontRulerA_.remove();\n\t\t\tthis.fontRulerB_.remove();\n\t\t\tcallbacks.forEach(cb => cb());\n\t\t}, 0);\n\t}\n}\n\nlet HAS_WEBKIT_FALLBACK_BUG = null;\nfunction hasWebKitFallbackBug() {\n\tif (HAS_WEBKIT_FALLBACK_BUG === null) {\n\t\tconst match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\n\n\t\tHAS_WEBKIT_FALLBACK_BUG = !!match && (parseInt(match[1], 10) < 536 || parseInt(match[1], 10) === 536 && parseInt(match[2], 10) <= 11);\n\t}\n\treturn HAS_WEBKIT_FALLBACK_BUG;\n}\n\nmodule.exports = FontWatchRunner;\n\n/***/ }),\n\n/***/ \"./internal/menu-items.js\":\n/*!********************************!*\\\n  !*** ./internal/menu-items.js ***!\n  \\********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\nfunction normalize(options) {\n\tif (!options) {\n\t\treturn [];\n\t}\n\tif (__webpack_provided_Array_dot_isArray(options)) {\n\t\treturn options;\n\t}\n\tif (typeof options === 'string') {\n\t\treturn normalize(JSON.parse(options));\n\t}\n\tconst result = [];\n\tfor (const k in options) {\n\t\tresult.push({\n\t\t\tvalue: k,\n\t\t\tcaption: options[k]\n\t\t});\n\t}\n\treturn result;\n}\n\nmodule.exports = {\n\tnormalize\n};\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./internal/path2DManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/path2DManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction getPath2D() {\n\t//return require('./legacy/canvas/Path2D');\n\treturn window.Path2D || __webpack_require__(/*! ./legacy/canvas/Path2D */ \"./internal/legacy/canvas/Path2D.js\");\n}\n\nmodule.exports = {\n\tfill(module, ctx, x, y, w, h) {\n\t\tctx.save();\n\t\ttry {\n\t\t\tconst { width, height } = module;\n\t\t\tconst { ud: upsideDown, x: offsetX = 0, y: offsetY = 0 } = module;\n\t\t\tw = w || width;\n\t\t\th = h || height;\n\t\t\tconst xrate = w / width;\n\t\t\tconst yrate = h / (upsideDown ? -height : height);\n\t\t\tx = x || 0;\n\t\t\ty = upsideDown ? (y || 0) + -height * yrate : y || 0;\n\n\t\t\tctx.translate(x, y);\n\t\t\tctx.scale(xrate, yrate);\n\t\t\tif (offsetX !== 0 || offsetY !== 0) {\n\t\t\t\tctx.translate(offsetX, offsetY);\n\t\t\t}\n\t\t\tconst Path2D = getPath2D();\n\t\t\tmodule.path2d = module.path2d || new Path2D(module.d);\n\t\t\tctx.fill(module.path2d);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t},\n\tget Path2D() {\n\t\treturn getPath2D();\n\t}\n};\n\n/***/ }),\n\n/***/ \"./internal/sort.js\":\n/*!**************************!*\\\n  !*** ./internal/sort.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { isPromise } = __webpack_require__(/*! ./utils */ \"./internal/utils.js\");\n\n\tfunction wait(val) {\n\t\treturn val.then(v => {\n\t\t\tif (isPromise(v)) {\n\t\t\t\treturn wait(v);\n\t\t\t} else {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t});\n\t}\n\tfunction createArray(get, length) {\n\t\tconst array = new Array(length);\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tarray[i] = get(i);\n\t\t}\n\t\treturn array;\n\t}\n\tfunction createArrayPromise(get, getField, length) {\n\t\treturn new Promise(resolve => {\n\t\t\tconst plist = [];\n\t\t\tconst array = new Array(length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst data = get(i);\n\t\t\t\tconst record = {\n\t\t\t\t\tv: data,\n\t\t\t\t\tf: data\n\t\t\t\t};\n\t\t\t\tarray[i] = record;\n\t\t\t\tif (isPromise(data)) {\n\t\t\t\t\tplist.push(wait(data).then(v => {\n\t\t\t\t\t\trecord.v = v;\n\t\t\t\t\t\trecord.f = v;\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t\tPromise.all(plist).then(() => setArrayField(array, getField)).then(resolve);\n\t\t});\n\t}\n\tfunction setArrayField(array, getField) {\n\t\tif (!getField) {\n\t\t\treturn Promise.resolve(array);\n\t\t}\n\t\treturn new Promise(resolve => {\n\t\t\tconst length = array.length;\n\t\t\tconst plist = [];\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst record = array[i];\n\t\t\t\trecord.f = getField(record.v);\n\t\t\t\tif (isPromise(record.f)) {\n\t\t\t\t\tplist.push(wait(record.f).then(v => {\n\t\t\t\t\t\trecord.f = v;\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t\tPromise.all(plist).then(() => resolve(array));\n\t\t});\n\t}\n\tconst sort = {\n\t\tsort(get, set, length, compare, getField) {\n\t\t\tconst old = createArray(get, length);\n\t\t\tif (getField) {\n\t\t\t\told.sort((r1, r2) => compare(getField(r1), getField(r2)));\n\t\t\t} else {\n\t\t\t\told.sort(compare);\n\t\t\t}\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tset(i, old[i]);\n\t\t\t}\n\t\t},\n\t\tsortArray(array, compare) {\n\t\t\tArray.prototype.sort.call(array, compare);\n\t\t},\n\t\tsortPromise(get, set, length, compare, getField) {\n\t\t\tif (window.Promise) {\n\t\t\t\treturn createArrayPromise(get, getField, length).then(array => {\n\t\t\t\t\tarray.sort((r1, r2) => compare(r1.f, r2.f));\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\tset(i, array[i].v);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsort.sort(get, set, length, compare, getField);\n\t\t\t\tconst dummyPromise = {\n\t\t\t\t\tthen(fn) {\n\t\t\t\t\t\tfn();\n\t\t\t\t\t\treturn dummyPromise;\n\t\t\t\t\t},\n\t\t\t\t\tcatch() {\n\t\t\t\t\t\treturn dummyPromise;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn dummyPromise;\n\t\t\t}\n\t\t}\n\t};\n\tmodule.exports = sort;\n}\n\n/***/ }),\n\n/***/ \"./internal/style.css\":\n/*!****************************!*\\\n  !*** ./internal/style.css ***!\n  \\****************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\nvar content = __webpack_require__(/*! !../../../node_modules/css-loader?minimize!./style.css */ \"../../node_modules/css-loader/index.js?minimize!./internal/style.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ \"../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n/***/ }),\n\n/***/ \"./internal/style.js\":\n/*!***************************!*\\\n  !*** ./internal/style.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tfunction getScrollBarWidth() {\n\t\tconst dummy = document.createElement('div');\n\t\tconst { style } = dummy;\n\t\tstyle.position = 'absolute';\n\t\tstyle.height = '9999px';\n\t\tstyle.width = 'calc(100vw - 100%)';\n\t\tstyle.opacity = 0;\n\t\tdummy.textContent = 'x';\n\t\tdocument.body.appendChild(dummy);\n\t\tconst { width } = document.defaultView.getComputedStyle(dummy, '');\n\t\tdocument.body.removeChild(dummy);\n\t\treturn parseInt(width, 10);\n\t}\n\n\tlet SCROLLBAR_SIZE;\n\tconst initDocument = () => {\n\t\t__webpack_require__(/*! ./style.css */ \"./internal/style.css\");\n\t\tSCROLLBAR_SIZE = getScrollBarWidth() || 10;\n\t\tconst style = document.createElement('style');\n\t\tstyle.setAttribute('type', 'text/css');\n\t\tstyle.setAttribute('data-name', 'cheetah-grid');\n\t\tstyle.innerHTML = `\n.cheetah-grid .grid-scroll-end-point {\n\twidth: ${SCROLLBAR_SIZE}px;\n\theight: ${SCROLLBAR_SIZE}px;\n}\n.cheetah-grid > canvas {\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\n}\n\t\t`;\n\n\t\tdocument.head.appendChild(style);\n\t};\n\n\tconst style = {\n\t\tinitDocument() {\n\t\t\tstyle.initDocument = () => {};\n\t\t\tinitDocument();\n\t\t},\n\t\tgetScrollBarSize() {\n\t\t\treturn SCROLLBAR_SIZE;\n\t\t}\n\t};\n\n\tmodule.exports = style;\n}\n\n/***/ }),\n\n/***/ \"./internal/symbolManager.js\":\n/*!***********************************!*\\\n  !*** ./internal/symbolManager.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst Symbol = window.Symbol ? window.Symbol : (() => {\n\t\tlet nextId = 1;\n\t\treturn name => {\n\t\t\tconst id = nextId++;\n\t\t\tif (name) {\n\t\t\t\treturn ` $$$ ${name} - ${id} $$$ `;\n\t\t\t} else {\n\t\t\t\treturn ` $$$ ${id} $$$ `;\n\t\t\t}\n\t\t};\n\t})();\n\tconst mem = {};\n\n\tmodule.exports = {\n\t\tget(name) {\n\t\t\tif (name) {\n\t\t\t\treturn mem[name] ? mem[name] : mem[name] = Symbol(name);\n\t\t\t} else {\n\t\t\t\treturn Symbol();\n\t\t\t}\n\t\t},\n\t\tget PROTECTED_SYMBOL() {\n\t\t\treturn this.get('protected');\n\t\t},\n\t\tget CHECK_COLUMN_STATE_ID() {\n\t\t\treturn this.get('chkcol.stateID');\n\t\t},\n\t\tget BUTTON_COLUMN_STATE_ID() {\n\t\t\treturn this.get('btncol.stateID');\n\t\t},\n\t\tget COLUMN_FADEIN_STATE_ID() {\n\t\t\treturn this.get('col.fadein_stateID');\n\t\t},\n\t\tget BRANCH_GRAPH_COLUMN_STATE_ID() {\n\t\t\treturn this.get('branch_graph_col.stateID');\n\t\t},\n\t\tget SMALL_DIALOG_INPUT_EDITOR_STATE_ID() {\n\t\t\treturn this.get('small_dialog_input_editor.stateID');\n\t\t},\n\t\tget INLINE_INPUT_EDITOR_STATE_ID() {\n\t\t\treturn this.get('inline_input_editor.stateID');\n\t\t},\n\t\tget INLINE_MENU_EDITOR_STATE_ID() {\n\t\t\treturn this.get('inline_menu_editor.stateID');\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./internal/utils.js\":\n/*!***************************!*\\\n  !*** ./internal/utils.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(__webpack_provided_Array_dot_isArray) {\n\n{\n\tlet arrayFind;\n\tlet arrayFindIndex;\n\tconst array = {\n\t\tget find() {\n\t\t\tif (arrayFind) {\n\t\t\t\treturn arrayFind;\n\t\t\t}\n\t\t\tif (Array.prototype.find) {\n\t\t\t\tarrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\n\t\t\t} else {\n\t\t\t\tarrayFind = (arr, predicate) => {\n\t\t\t\t\tconst index = array.findIndex(arr, predicate);\n\t\t\t\t\treturn index >= 0 ? arr[index] : undefined;\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn arrayFind;\n\t\t},\n\t\tget findIndex() {\n\t\t\tif (arrayFindIndex) {\n\t\t\t\treturn arrayFindIndex;\n\t\t\t}\n\t\t\tif (Array.prototype.findIndex) {\n\t\t\t\tarrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\n\t\t\t} else {\n\t\t\t\tarrayFindIndex = (arr, predicate) => {\n\t\t\t\t\tconst length = arr.length;\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\t\tconst value = arr[i];\n\t\t\t\t\t\tif (predicate(value, i, arr)) {\n\t\t\t\t\t\t\treturn i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn arrayFindIndex;\n\t\t}\n\t};\n\n\tfunction isDef(data) {\n\t\treturn data !== null && typeof data !== 'undefined';\n\t}\n\tconst ua = window.navigator.userAgent.toLowerCase();\n\tconst IE = ua.match(/(msie)/) || ua.match(/trident/);\n\tconst Chrome = ua.indexOf('chrome') > -1 && ua.indexOf('edge') === -1;\n\tconst Firefox = ua.indexOf('firefox') > -1;\n\n\tfunction setReadonly(obj, name, value) {\n\t\tObject.defineProperty(obj, name, {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue\n\t\t});\n\t}\n\n\tfunction each(obj, fn) {\n\t\tfor (const key in obj) {\n\t\t\tfn(obj[key], key, obj);\n\t\t}\n\t}\n\n\tfunction isObject(obj) {\n\t\treturn obj === Object(obj);\n\t}\n\n\tfunction extend(...args) {\n\t\tconst result = {};\n\t\targs.forEach(source => {\n\t\t\tfor (const key in source) {\n\t\t\t\tObject.defineProperty(result, key, {\n\t\t\t\t\tget() {\n\t\t\t\t\t\treturn source[key];\n\t\t\t\t\t},\n\t\t\t\t\tset(val) {\n\t\t\t\t\t\tsource[key] = val;\n\t\t\t\t\t},\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tenumerable: true\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\tfunction isDescendantElement(root, target) {\n\t\twhile (target.parentElement) {\n\t\t\tconst p = target.parentElement;\n\t\t\tif (root === p) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\ttarget = p;\n\t\t}\n\t\treturn false;\n\t}\n\tfunction applyChainSafe(obj, fn, ...names) {\n\t\tlet value = obj;\n\t\tfor (let i = 0; i < names.length && isDef(value); i++) {\n\t\t\tvalue = fn(value, names[i]);\n\t\t}\n\t\treturn value;\n\t}\n\tfunction getChainSafe(obj, ...names) {\n\t\treturn applyChainSafe(obj, (val, name) => val[name], ...names);\n\t}\n\tfunction getOrApply(value, ...args) {\n\t\tif (typeof value === 'function') {\n\t\t\treturn value(...args);\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t}\n\tfunction endsWith(str, searchString, position) {\n\t\tconst subjectString = str.toString();\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n\t\t\tposition = subjectString.length;\n\t\t}\n\t\tposition -= searchString.length;\n\t\tconst lastIndex = subjectString.lastIndexOf(searchString, position);\n\t\treturn lastIndex !== -1 && lastIndex === position;\n\t}\n\tconst isPromise = data => data && typeof data.then === 'function';\n\tconst then = (result, callback) => isPromise(result) ? result.then(r => callback(r)) : callback(result);\n\tfunction getMouseButtons(e) {\n\t\tif (isDef(e.buttons)) {\n\t\t\treturn e.buttons;\n\t\t}\n\t\t/*for legacy*/\n\t\tif (isDef(e.which)) {\n\t\t\tif (e.which === 3) {\n\t\t\t\t//right?\n\t\t\t\treturn 4;\n\t\t\t}\n\t\t\tif (e.which === 2) {\n\t\t\t\t//middle?\n\t\t\t\treturn 4;\n\t\t\t}\n\t\t\treturn e.which; //left or no\n\t\t}\n\n\t\tif (e.button === 0 || e.button === 1) {\n\t\t\treturn 1; //candidate left\n\t\t}\n\t\tif (e.button === 2) {\n\t\t\treturn 2; // right\n\t\t}\n\t\treturn 0; //no or middle?\n\t}\n\tfunction getKeyCode(e) {\n\t\treturn e.keyCode || e.which;\n\t}\n\tfunction isTouchEvent(e) {\n\t\treturn !!e.changedTouches;\n\t}\n\tfunction getIgnoreCase(obj, name) {\n\t\tif (obj[name]) {\n\t\t\treturn obj[name];\n\t\t}\n\t\tconst l = name.toLowerCase();\n\t\tif (obj[l]) {\n\t\t\treturn obj[l];\n\t\t}\n\t\tconst u = name.toLowerCase();\n\t\tif (obj[u]) {\n\t\t\treturn obj[u];\n\t\t}\n\t\tfor (const k in obj) {\n\t\t\tif (k.toLowerCase() === l) {\n\t\t\t\treturn obj[k];\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\tfunction cancel(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t}\n\n\tfunction toBoxArray(obj) {\n\t\tif (!__webpack_provided_Array_dot_isArray(obj)) {\n\t\t\treturn [obj /*top*/, obj /*right*/, obj /*bottom*/, obj /*left*/];\n\t\t}\n\t\tif (obj.length === 3) {\n\t\t\treturn [obj[0] /*top*/, obj[1] /*right*/, obj[2] /*bottom*/, obj[1] /*left*/];\n\t\t}\n\t\tif (obj.length === 2) {\n\t\t\treturn [obj[0] /*top*/, obj[1] /*right*/, obj[0] /*bottom*/, obj[1] /*left*/];\n\t\t}\n\t\tif (obj.length === 1) {\n\t\t\treturn [obj[0] /*top*/, obj[0] /*right*/, obj[0] /*bottom*/, obj[0] /*left*/];\n\t\t}\n\t\treturn obj;\n\t}\n\n\t// Chrome 33554431\n\t// FireFox 17895588\n\t// IE 10737433\n\tmodule.exports = {\n\t\tisDef,\n\t\tbrowser: {\n\t\t\tIE,\n\t\t\tChrome,\n\t\t\tFirefox,\n\t\t\theightLimit: Chrome ? 33554431 : Firefox ? 17895588 : 10737433 // default IE limit\n\t\t},\n\t\textend,\n\t\tisDescendantElement,\n\t\tgetChainSafe,\n\t\tapplyChainSafe,\n\t\tgetOrApply,\n\t\tgetIgnoreCase,\n\t\tisPromise,\n\t\tthen,\n\t\tarray,\n\t\tobj: {\n\t\t\tsetReadonly,\n\t\t\teach,\n\t\t\tisObject\n\t\t},\n\t\tstr: {\n\t\t\tendsWith\n\t\t},\n\t\tevent: {\n\t\t\tgetMouseButtons,\n\t\t\tgetKeyCode,\n\t\t\tisTouchEvent,\n\t\t\tcancel\n\t\t},\n\t\tstyle: {\n\t\t\ttoBoxArray\n\t\t},\n\t\temptyFn() {}\n\t};\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! @/internal/com.js */ \"./internal/com.js\")[\"Array_isArray\"]))\n\n/***/ }),\n\n/***/ \"./list-grid/EVENT_TYPE.js\":\n/*!*********************************!*\\\n  !*** ./list-grid/EVENT_TYPE.js ***!\n  \\*********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst { extend } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\nconst DrawGrid = __webpack_require__(/*! ../core/DrawGrid */ \"./core/DrawGrid.js\");\nconst EVENT_TYPE = extend(DrawGrid.EVENT_TYPE, {\n\tCHANGED_VALUE: 'changed_value'\n});\nmodule.exports = EVENT_TYPE;\n\n/***/ }),\n\n/***/ \"./main.js\":\n/*!*****************!*\\\n  !*** ./main.js ***!\n  \\*****************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst core = __webpack_require__(/*! ./core */ \"./core.js\");\n\tconst tools = __webpack_require__(/*! ./tools */ \"./tools.js\");\n\tconst columns = __webpack_require__(/*! ./columns */ \"./columns.js\");\n\tconst themes = __webpack_require__(/*! ./themes */ \"./themes.js\");\n\tconst data = __webpack_require__(/*! ./data */ \"./data.js\");\n\n\tconst ListGrid = __webpack_require__(/*! ./ListGrid */ \"./ListGrid.js\");\n\tconst GridCanvasHelper = __webpack_require__(/*! ./GridCanvasHelper */ \"./GridCanvasHelper.js\");\n\n\tconst icons = __webpack_require__(/*! ./icons */ \"./icons.js\");\n\tconst register = __webpack_require__(/*! ./register */ \"./register.js\");\n\n\t/**\r\n  * Cheetah Grid\r\n  * @type {Object}\r\n  * @namespace cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tcore,\n\t\ttools,\n\n\t\t// impl Grids\n\t\tListGrid,\n\n\t\t// objects\n\t\tcolumns,\n\t\tthemes,\n\t\tdata,\n\n\t\t// helper\n\t\tGridCanvasHelper,\n\t\tget icons() {\n\t\t\treturn icons.get();\n\t\t},\n\n\t\t//plugin registers\n\t\tregister,\n\n\t\tget _internal() {\n\t\t\tconsole.warn('use internal!!');\n\t\t\treturn {\n\t\t\t\tcolor: __webpack_require__(/*! ./internal/color */ \"./internal/color.js\"),\n\t\t\t\tsort: __webpack_require__(/*! ./internal/sort */ \"./internal/sort.js\"),\n\t\t\t\tcalc: __webpack_require__(/*! ./internal/calc */ \"./internal/calc.js\"),\n\t\t\t\tsymbolManager: __webpack_require__(/*! ./internal/symbolManager */ \"./internal/symbolManager.js\"),\n\t\t\t\tpath2DManager: __webpack_require__(/*! ./internal/path2DManager */ \"./internal/path2DManager.js\")\n\t\t\t};\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./plugins/icons.js\":\n/*!**************************!*\\\n  !*** ./plugins/icons.js ***!\n  \\**************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {};\n\n/***/ }),\n\n/***/ \"./plugins/themes.js\":\n/*!***************************!*\\\n  !*** ./plugins/themes.js ***!\n  \\***************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {};\n\n/***/ }),\n\n/***/ \"./register.js\":\n/*!*********************!*\\\n  !*** ./register.js ***!\n  \\*********************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nconst themePlugins = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\nconst iconPlugins = __webpack_require__(/*! ./plugins/icons */ \"./plugins/icons.js\");\n\nfunction register(obj, name, value) {\n\tif (value) {\n\t\tconst old = obj[name];\n\t\tobj[name] = value;\n\t\treturn old;\n\t} else {\n\t\treturn obj[name];\n\t}\n}\nfunction registers(obj, values) {\n\tfor (const k in values) {\n\t\tobj[k] = values[k];\n\t}\n}\nmodule.exports = {\n\ttheme(name, theme) {\n\t\treturn register(themePlugins, name, theme);\n\t},\n\ticon(name, icon) {\n\t\treturn register(iconPlugins, name, icon);\n\t},\n\ticons(icons) {\n\t\tregisters(iconPlugins, icons);\n\t}\n};\n\n/***/ }),\n\n/***/ \"./themes.js\":\n/*!*******************!*\\\n  !*** ./themes.js ***!\n  \\*******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { extend, getIgnoreCase } = __webpack_require__(/*! ./internal/utils */ \"./internal/utils.js\");\n\tconst theme = __webpack_require__(/*! ./themes/theme */ \"./themes/theme.js\");\n\tconst plugins = __webpack_require__(/*! ./plugins/themes */ \"./plugins/themes.js\");\n\tconst BASIC = theme.create(__webpack_require__(/*! ./themes/BASIC */ \"./themes/BASIC.js\"));\n\tconst MATERIAL_DESIGN = theme.create(__webpack_require__(/*! ./themes/MATERIAL_DESIGN */ \"./themes/MATERIAL_DESIGN.js\"));\n\n\tconst builtin = {\n\t\tBASIC,\n\t\tMATERIAL_DESIGN\n\t};\n\tlet defTheme = theme.create({});\n\t/**\r\n  * themes\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.themes\r\n  * @memberof cheetahGrid\r\n  */\n\tconst themes = {\n\t\tget default() {\n\t\t\treturn defTheme;\n\t\t},\n\t\tset default(defaultTheme) {\n\t\t\tdefTheme = defaultTheme;\n\t\t},\n\t\ttheme,\n\t\tof(value) {\n\t\t\tif (!value) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (typeof value === 'string') {\n\t\t\t\tconst t = getIgnoreCase(themes.choices, value);\n\t\t\t\tif (t) {\n\t\t\t\t\treturn t;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\t/**\r\n   * @namespace cheetahGrid.themes.choices\r\n   */\n\t\tget choices() {\n\t\t\treturn extend(builtin, plugins);\n\t\t}\n\t};\n\tmodule.exports = themes;\n}\n\n/***/ }),\n\n/***/ \"./themes/BASIC.js\":\n/*!*************************!*\\\n  !*** ./themes/BASIC.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint no-bitwise:0*/\n\n\nfunction DEFAULT_BG_COLOR(args) {\n\tconst {\n\t\trow,\n\t\tgrid: { frozenRowCount }\n\t} = args;\n\tif (!(row - frozenRowCount & 1)) {\n\t\treturn '#FFF';\n\t} else {\n\t\treturn '#F6F6F6';\n\t}\n}\nconst cacheLinearGradient = {};\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\n\tlet stop;\n\tconst stopsKey = [];\n\tfor (stop in colorStops) {\n\t\tstopsKey.push(`${stop}@${colorStops[stop]}`);\n\t}\n\tconst key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(',')}`;\n\tconst ret = cacheLinearGradient[key];\n\tif (ret) {\n\t\treturn ret;\n\t}\n\tconst grad = context.createLinearGradient(left, top, left, bottom);\n\tfor (stop in colorStops) {\n\t\tgrad.addColorStop(stop, colorStops[stop]);\n\t}\n\treturn cacheLinearGradient[key] = grad;\n}\nfunction FROZEN_ROWS_BG_COLOR(args) {\n\tconst {\n\t\tcol,\n\t\tgrid,\n\t\tgrid: { frozenRowCount },\n\t\tcontext\n\t} = args;\n\tconst { left, top } = grid.getCellRelativeRect(col, 0);\n\tconst { bottom } = grid.getCellRelativeRect(col, frozenRowCount - 1);\n\n\treturn getLinearGradient(context, left, top, left, bottom, { 0: '#FFF', 1: '#D3D3D3' });\n}\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\nmodule.exports = {\n\tcolor: '#000',\n\tdefaultBgColor: DEFAULT_BG_COLOR,\n\tfrozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\n\thiliteBorderColor: '#5E9ED6',\n\tselectionBgColor: '#CCE0FF',\n\tborderColor: '#000',\n\tcheckbox: {\n\t\tuncheckBgColor: '#FFF',\n\t\tcheckBgColor: 'rgb(76, 73, 72)'\n\t},\n\tbutton: {\n\t\tcolor: '#FFF',\n\t\tbgColor: '#2196F3'\n\t},\n\tunderlayBackgroundColor: '#F6F6F6'\n};\n\n/***/ }),\n\n/***/ \"./themes/MATERIAL_DESIGN.js\":\n/*!***********************************!*\\\n  !*** ./themes/MATERIAL_DESIGN.js ***!\n  \\***********************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint no-bitwise:0*/\n\n\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\n\tconst {\n\t\trow,\n\t\tgrid: { frozenRowCount }\n\t} = args;\n\tif (frozenRowCount - 1 === row) {\n\t\treturn ['#f2f2f2', '#f2f2f2', '#ccc7c7', '#f2f2f2'];\n\t} else {\n\t\treturn ['#f2f2f2'];\n\t}\n}\nfunction BORDER_COLOR(args) {\n\tconst {\n\t\tcol,\n\t\tgrid: { colCount }\n\t} = args;\n\tif (colCount - 1 === col) {\n\t\treturn ['#ccc7c7', '#f2f2f2', '#ccc7c7', null];\n\t} else {\n\t\treturn ['#ccc7c7', null];\n\t}\n}\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\nmodule.exports = {\n\tcolor: 'rgba(0, 0, 0, 0.87)',\n\tdefaultBgColor: '#FFF',\n\tfrozenRowsBgColor: '#FFF',\n\tfrozenRowsColor: 'rgba(0, 0, 0, 0.54)',\n\thiliteBorderColor: '#5E9ED6',\n\tselectionBgColor: '#CCE0FF',\n\tborderColor: BORDER_COLOR,\n\tfrozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\n\tcheckbox: {\n\t\tuncheckBgColor: '#FFF',\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\n\t\tborderColor: 'rgba(0, 0, 0, 0.26)'\n\t},\n\tbutton: {\n\t\tcolor: '#FFF',\n\t\tbgColor: '#2196F3'\n\t},\n\tunderlayBackgroundColor: '#FFF'\n};\n\n/***/ }),\n\n/***/ \"./themes/theme.js\":\n/*!*************************!*\\\n  !*** ./themes/theme.js ***!\n  \\*************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*eslint no-bitwise:0*/\n\n\n{\n\tconst { getChainSafe } = __webpack_require__(/*! ../internal/utils */ \"./internal/utils.js\");\n\tconst defaultTheme = __webpack_require__(/*! ./MATERIAL_DESIGN */ \"./themes/MATERIAL_DESIGN.js\");\n\n\tfunction getProp(obj, superObj, names, defNames) {\n\t\treturn getChainSafe(obj, ...names) || defNames && getChainSafe(obj, ...defNames) || getChainSafe(superObj, ...names);\n\t}\n\tfunction createTheme(obj = {}, superTheme = defaultTheme) {\n\t\treturn {\n\t\t\tget font() {\n\t\t\t\treturn getProp(obj, superTheme, ['font']);\n\t\t\t},\n\t\t\tget underlayBackgroundColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['underlayBackgroundColor']);\n\t\t\t},\n\t\t\t// color\n\t\t\tget color() {\n\t\t\t\treturn getProp(obj, superTheme, ['color']);\n\t\t\t},\n\t\t\tget frozenRowsColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsColor'], ['color']);\n\t\t\t},\n\t\t\t// background\n\t\t\tget defaultBgColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['defaultBgColor']);\n\t\t\t},\n\t\t\tget frozenRowsBgColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBgColor'], ['defaultBgColor']);\n\t\t\t},\n\t\t\tget selectionBgColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['selectionBgColor'], ['defaultBgColor']);\n\t\t\t},\n\t\t\t// border\n\t\t\tget borderColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['borderColor']);\n\t\t\t},\n\t\t\tget frozenRowsBorderColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBorderColor'], ['borderColor']);\n\t\t\t},\n\t\t\tget hiliteBorderColor() {\n\t\t\t\treturn getProp(obj, superTheme, ['hiliteBorderColor'], ['borderColor']);\n\t\t\t},\n\t\t\tget checkbox() {\n\t\t\t\treturn this._checkbox || (this._checkbox = {\n\t\t\t\t\tget uncheckBgColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'uncheckBgColor'], ['defaultBgColor']);\n\t\t\t\t\t},\n\t\t\t\t\tget checkBgColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'checkBgColor'], ['defaultBgColor']);\n\t\t\t\t\t},\n\t\t\t\t\tget borderColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'borderColor'], ['borderColor']);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tget button() {\n\t\t\t\treturn this._button || (this._button = {\n\t\t\t\t\tget color() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'color'], ['color']);\n\t\t\t\t\t},\n\t\t\t\t\tget bgColor() {\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'bgColor'], ['defaultBgColor']);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\textends(obj) {\n\t\t\t\treturn createTheme(obj, this);\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\r\n  * theme object\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.themes.theme\r\n  * @memberof cheetahGrid.themes\r\n  */\n\tmodule.exports = {\n\t\tcreate(obj) {\n\t\t\treturn createTheme(obj);\n\t\t}\n\t};\n}\n\n/***/ }),\n\n/***/ \"./tools.js\":\n/*!******************!*\\\n  !*** ./tools.js ***!\n  \\******************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst canvashelper = __webpack_require__(/*! ./tools/canvashelper */ \"./tools/canvashelper.js\");\n\n\t/**\r\n  * tools\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.tools\r\n  * @memberof cheetahGrid\r\n  */\n\tmodule.exports = {\n\t\tcanvashelper\n\t};\n}\n\n/***/ }),\n\n/***/ \"./tools/canvashelper.js\":\n/*!*******************************!*\\\n  !*** ./tools/canvashelper.js ***!\n  \\*******************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n{\n\tconst { calcBasePosition, calcStartPosition } = __webpack_require__(/*! ../internal/canvases */ \"./internal/canvases.js\");\n\tconst { ceil, PI } = Math;\n\n\tfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\n\t\tfunction strokeRectLines(positions) {\n\t\t\tfor (let i = 0; i < borderColors.length; i++) {\n\t\t\t\tconst color = borderColors[i];\n\t\t\t\tconst preColor = borderColors[i - 1];\n\t\t\t\tif (color) {\n\t\t\t\t\tif (preColor !== color) {\n\t\t\t\t\t\tif (preColor) {\n\t\t\t\t\t\t\tctx.strokeStyle = preColor;\n\t\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst pos1 = positions[i];\n\t\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t\tctx.moveTo(pos1.x, pos1.y);\n\t\t\t\t\t}\n\t\t\t\t\tconst pos2 = positions[i + 1];\n\t\t\t\t\tctx.lineTo(pos2.x, pos2.y);\n\t\t\t\t} else {\n\t\t\t\t\tif (preColor) {\n\t\t\t\t\t\tctx.strokeStyle = preColor;\n\t\t\t\t\t\tctx.stroke();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst preColor = borderColors[borderColors.length - 1];\n\t\t\tif (preColor) {\n\t\t\t\tctx.strokeStyle = preColor;\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\t\tif (borderColors[0] === borderColors[1] && borderColors[0] === borderColors[2] && borderColors[0] === borderColors[3]) {\n\t\t\tif (borderColors[0]) {\n\t\t\t\tctx.strokeStyle = borderColors[0];\n\t\t\t\tctx.strokeRect(left, top, width, height);\n\t\t\t}\n\t\t} else {\n\t\t\tstrokeRectLines([{ x: left, y: top }, { x: left + width, y: top }, { x: left + width, y: top + height }, { x: left, y: top + height }, { x: left, y: top }]);\n\t\t}\n\t}\n\tfunction roundRect(ctx, left, top, width, height, radius) {\n\t\tctx.beginPath();\n\t\tctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\n\t\tctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\n\t\tctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\n\t\tctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\n\t\tctx.closePath();\n\t}\n\tfunction fillRoundRect(ctx, left, top, width, height, radius) {\n\t\troundRect(ctx, left, top, width, height, radius);\n\t\tctx.fill();\n\t}\n\tfunction strokeRoundRect(ctx, left, top, width, height, radius) {\n\t\troundRect(ctx, left, top, width, height, radius);\n\t\tctx.stroke();\n\t}\n\tfunction fillTextRect(ctx, text, left, top, width, height, {\n\t\toffset = 2,\n\t\tpadding\n\t} = {}) {\n\t\tconst rect = {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tright: left + width,\n\t\t\tbottom: top + height\n\t\t};\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t//clip\n\t\t\tctx.clip();\n\n\t\t\t//\n\t\t\tconst pos = calcBasePosition(ctx, rect, {\n\t\t\t\toffset,\n\t\t\t\tpadding\n\t\t\t});\n\n\t\t\tctx.fillText(text, pos.x, pos.y);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\tfunction drawInlineImageRect(ctx, image, srcLeft, srcTop, srcWidth, srcHeight, destWidth, destHeight, left, top, width, height, {\n\t\toffset = 2,\n\t\tpadding\n\t} = {}) {\n\t\tconst rect = {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tright: left + width,\n\t\t\tbottom: top + height\n\t\t};\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\n\t\t\t//clip\n\t\t\tctx.clip();\n\n\t\t\t//\n\t\t\tconst pos = calcStartPosition(ctx, rect, destWidth, destHeight, {\n\t\t\t\toffset,\n\t\t\t\tpadding\n\t\t\t});\n\n\t\t\tctx.drawImage(image, srcLeft, srcTop, srcWidth, srcHeight, pos.x, pos.y, destWidth, destHeight);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\n\t/**\r\n  * Returns an object containing the width of the checkbox.\r\n  * @param  {CanvasRenderingContext2D} ctx canvas context\r\n  * @return {Object} Object containing the width of the checkbox\r\n  * @memberof cheetahGrid.tools.canvashelper\r\n  */\n\tfunction measureCheckbox(ctx) {\n\t\treturn {\n\t\t\twidth: ctx.measureText('').width\n\t\t};\n\t}\n\n\t/**\r\n  * draw Checkbox\r\n  * @param  {CanvasRenderingContext2D} ctx canvas context\r\n  * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n  * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n  * @param  {boolean|number} check checkbox check status\r\n  * @param  {object} option option\r\n  * @return {void}\r\n  * @memberof cheetahGrid.tools.canvashelper\r\n  */\n\tfunction drawCheckbox(ctx, x, y, check, {\n\t\tuncheckBgColor = '#FFF',\n\t\tcheckBgColor = 'rgb(76, 73, 72)',\n\t\tborderColor = '#000',\n\t\tboxSize = measureCheckbox(ctx).width\n\t} = {}) {\n\t\tconst checkPoint = typeof check === 'number' ? check > 1 ? 1 : check : 1;\n\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.fillStyle = check ? checkBgColor : uncheckBgColor;\n\n\t\t\tfillRoundRect(ctx, ceil(x) - 1, ceil(y) - 1, ceil(boxSize + 1), ceil(boxSize + 1), boxSize / 5);\n\t\t\tctx.lineWidth = 1;\n\t\t\tctx.strokeStyle = borderColor;\n\t\t\tstrokeRoundRect(ctx, ceil(x) - 0.5, ceil(y) - 0.5, ceil(boxSize), ceil(boxSize), boxSize / 5);\n\t\t\tif (check) {\n\t\t\t\tctx.lineWidth = ceil(boxSize / 10);\n\t\t\t\tctx.strokeStyle = uncheckBgColor;\n\t\t\t\tlet leftWidth = boxSize / 4;\n\t\t\t\tlet rightWidth = boxSize / 2 * 0.9;\n\t\t\t\tconst leftLeftPos = x + boxSize * 0.2;\n\t\t\t\tconst leftTopPos = y + boxSize / 2;\n\n\t\t\t\tif (checkPoint < 0.5) {\n\t\t\t\t\tleftWidth = leftWidth * (checkPoint * 2);\n\t\t\t\t}\n\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(leftLeftPos, leftTopPos);\n\t\t\t\tctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\n\t\t\t\tif (checkPoint > 0.5) {\n\t\t\t\t\tif (checkPoint < 1) {\n\t\t\t\t\t\trightWidth = rightWidth * ((checkPoint - 0.5) * 2);\n\t\t\t\t\t}\n\t\t\t\t\tctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\n\t\t\t\t}\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\tfunction drawButton(ctx, left, top, width, height, option = {}) {\n\t\tconst {\n\t\t\tbackgroundColor = '#FFF',\n\t\t\tbgColor = backgroundColor,\n\t\t\tradius = 4,\n\t\t\tshadow = {}\n\t\t} = option;\n\t\tctx.save();\n\t\ttry {\n\t\t\tctx.fillStyle = bgColor;\n\n\t\t\tif (shadow) {\n\t\t\t\tconst {\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, 0.24)',\n\t\t\t\t\tblur = 1,\n\t\t\t\t\toffsetX = 0,\n\t\t\t\t\toffsetY = 2,\n\t\t\t\t\toffset: {\n\t\t\t\t\t\tx: ox = offsetX,\n\t\t\t\t\t\ty: oy = offsetY\n\t\t\t\t\t} = {}\n\t\t\t\t} = shadow;\n\t\t\t\tctx.shadowColor = color;\n\t\t\t\tctx.shadowBlur = blur; //\n\t\t\t\tctx.shadowOffsetX = ox;\n\t\t\t\tctx.shadowOffsetY = oy;\n\t\t\t}\n\n\t\t\tfillRoundRect(ctx, ceil(left), ceil(top), ceil(width), ceil(height), radius);\n\t\t} finally {\n\t\t\tctx.restore();\n\t\t}\n\t}\n\n\t/**\r\n  * canvashelper\r\n  * @type {Object}\r\n  * @namespace cheetahGrid.tools.canvashelper\r\n  * @memberof cheetahGrid.tools\r\n  */\n\tconst canvashelper = {\n\t\troundRect,\n\t\tfillRoundRect,\n\t\tstrokeRoundRect,\n\t\tdrawCheckbox,\n\t\tmeasureCheckbox,\n\t\tfillTextRect,\n\t\tdrawButton,\n\t\tdrawInlineImageRect,\n\t\tstrokeColorsRect\n\t};\n\n\tmodule.exports = canvashelper;\n}\n\n/***/ })\n\n/******/ });\n});\n}).call(typeof global !== \"undefined\" ? global : window);","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cheetahGrid\"] = factory();\n\telse\n\t\troot[\"cheetahGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-input::-ms-clear{visibility:hidden}.cheetah-grid__inline-input{position:absolute;box-sizing:border-box}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__inline-menu{position:absolute;color:rgba(0,0,0,.87);box-sizing:content-box;margin:-1px auto auto -1px;padding:8px 0;background-color:#fafafa;list-style-type:none;border-radius:2px;max-height:calc(100vh - 40px);overflow-y:auto}.cheetah-grid__inline-menu--hidden{transform:scale(.9);box-shadow:none;opacity:0;pointer-events:none;transition:all 50ms ease-out}.cheetah-grid__inline-menu--hidden *{pointer-events:none}.cheetah-grid__inline-menu--shown{transform:translateY(-7px);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);opacity:1;transition:all .15s ease-out}.cheetah-grid__inline-menu__menu-item{height:100%;box-sizing:border-box;display:flex;align-items:center;justify-content:flex-start;outline:none;cursor:pointer;position:relative;overflow:hidden;padding:0 16px}.cheetah-grid__inline-menu__menu-item--empty{color:rgba(0,0,0,.38)}.cheetah-grid__inline-menu__menu-item:before{content:\\\"\\\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background-color:#000;opacity:0;pointer-events:none;transition:opacity 15ms linear}.cheetah-grid__inline-menu__menu-item:hover:before,.cheetah-grid__inline-menu__menu-item[data-select]:before{opacity:.04}.cheetah-grid__inline-menu__menu-item:focus:before{opacity:.12}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__small-dialog-input__input::-ms-clear{visibility:hidden}@keyframes cheetah-grid__small-dialog-input--hidden-animation{0%{opacity:1}99%{opacity:1}to{opacity:0}}.cheetah-grid__small-dialog-input{position:absolute;box-sizing:content-box;margin:-1px auto auto -1px;border-radius:3px;background-color:#fafafa;transition:padding .15s ease-out,box-shadow .15s ease-out}.cheetah-grid__small-dialog-input--hidden{box-shadow:none;padding:0;pointer-events:none;animation:cheetah-grid__small-dialog-input--hidden-animation .15s ease-out;opacity:0}.cheetah-grid__small-dialog-input--shown{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);padding:8px 24px}.cheetah-grid__small-dialog-input__input{width:100%;height:100%;box-sizing:border-box;padding:3px 2px 0 4px;border:none;border-bottom:1px solid rgba(0,0,0,.87);outline:none;background-color:transparent;transition:all .3s ease-out}.cheetah-grid__small-dialog-input__input:focus{border-bottom:1px solid #2196f3;box-shadow:0 1px 0 0 #2196f3}.cheetah-grid__small-dialog-input:after{content:\\\"\\\";font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%;padding-top:8px}.cheetah-grid__small-dialog-input.helper-text--right-justified:after{text-align:right}.cheetah-grid__small-dialog-input[data-helper-text]:after{content:attr(data-helper-text);color:rgba(0,0,0,.87)}.cheetah-grid__small-dialog-input[data-error-message] input{border-bottom:1px solid #ff1744;box-shadow:0 1px 0 0 #ff1744}.cheetah-grid__small-dialog-input[data-error-message]:after{content:attr(data-error-message);color:#ff1744;text-align:left}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__error-message-element{border-top:1px solid #ff1744;color:#ff1744}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__message-element{position:absolute;margin-top:-2px;box-sizing:border-box;border-radius:0 0 3px 3px;background-color:hsla(0,0%,98%,.85);padding:8px 2px;pointer-events:none;user-select:none}.cheetah-grid__message-element--hidden{opacity:0;display:none}.cheetah-grid__message-element__message{font-family:Roboto;font-size:12px;font-size:.75rem;min-height:1em;line-height:1;display:block;width:100%}.cheetah-grid__message-element{border-top:1px solid rgba(0,0,0,.87);color:rgba(0,0,0,.87)}.cheetah-grid__message-element.helper-text--right-justified{text-align:right}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid__warning-message-element{border-top:1px solid #dd2c00;color:#dd2c00}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".cheetah-grid .grid-scrollable{height:100%;width:100%;position:absolute;overflow:scroll}.cheetah-grid .grid-scroll-end-point{opacity:0;position:relative}.cheetah-grid{position:relative;width:100%;height:100%}.cheetah-grid>canvas{position:absolute;width:0;height:0}.cheetah-grid .grid-focus-control{position:relative!important;width:1px;height:1px;opacity:0;padding:0;margin:0;box-sizing:border-box;pointer-events:none;max-width:0;max-height:0;float:none!important}.cheetah-grid input.grid-focus-control::-ms-clear{visibility:hidden}.cheetah-grid input.grid-focus-control.composition{opacity:1;max-width:none;max-height:none}\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z\"/></svg>\n\t@ material-design-icons\\content\\svg\\production\\ic_add_48px.svg\n\t*/\n\td: 'M38 26H26v12h-4V26H10v-4h12V10h4v12h12v4z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z\"/></svg>\n\t@ material-design-icons\\image\\svg\\production\\ic_edit_48px.svg\n\t*/\n\td: 'M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path fill=\"#010101\" d=\"M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_downward_48px.svg\n\t*/\n\td: 'M40 24l-2.82-2.82L26 32.34V8h-4v24.34L10.84 21.16 8 24l16 16 16-16z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 48 48\"><path d=\"M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z\"/></svg>\n\t@ material-design-icons\\navigation\\svg\\production\\ic_arrow_upward_48px.svg\n\t*/\n\td: 'M8 24l2.83 2.83L22 15.66V40h4V15.66l11.17 11.17L40 24 24 8 8 24z',\n\twidth: 48,\n\theight: 48,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_24px.svg\n\t*/\n\td: 'M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_border_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","module.exports = {\n\t/*\n\toriginal svg\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"/></svg>\n\t@ material-design-icons\\toggle\\svg\\production\\ic_star_half_24px.svg\n\t*/\n\td: 'M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z',\n\twidth: 24,\n\theight: 24,\n\t\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {calcStartPosition} = require('./internal/canvases');\r\n\tconst inlines = require('./element/inlines');\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\tconst themes = require('./themes');\r\n\tconst {colorToRGB} = require('./internal/color');\r\n\tconst Rect = require('./internal/Rect');\r\n\tconst {getChainSafe, getOrApply, style: {toBoxArray}} = require('./internal/utils');\r\n\tconst fonts = require('./internal/fonts');\r\n\tconst calc = require('./internal/calc');\r\n\r\n\tfunction invalidateCell(context, grid) {\r\n\t\tconst {col, row} = context;\r\n\t\tgrid.invalidateCell(col, row);\r\n\t}\r\n\tfunction getColor(color, col, row, grid, context) {\r\n\t\treturn getOrApply(color, {\r\n\t\t\tcol,\r\n\t\t\trow,\r\n\t\t\tgrid,\r\n\t\t\tcontext,\r\n\t\t});\r\n\t}\r\n\tfunction getThemeColor(grid, ...names) {\r\n\t\treturn getChainSafe(grid.theme, ...names) || getChainSafe(themes.default, ...names);\r\n\t}\r\n\tfunction testFontLoad(font, value, context, grid) {\r\n\t\tif (font) {\r\n\t\t\tif (!fonts.check(font, value)) {\r\n\t\t\t\tfonts.load(font, value, () => invalidateCell(context, grid));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction drawInlines(ctx, inlines, rect, offset, offsetTop, offsetBottom, col, row, grid) {\r\n\t\tfunction drawInline(inline, offsetLeft, offsetRight) {\r\n\t\t\tif (inline.canDraw()) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tctx.fillStyle = getColor(inline.color() || ctx.fillStyle, col, row, grid, ctx);\r\n\t\t\t\t\tctx.font = inline.font() || ctx.font;\r\n\t\t\t\t\tinline.draw({\r\n\t\t\t\t\t\tctx,\r\n\t\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\t\trect,\r\n\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\t\toffsetRight,\r\n\t\t\t\t\t\toffsetTop,\r\n\t\t\t\t\t\toffsetBottom,\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tinline.onReady(() => grid.invalidateCell(col, row));\r\n\t\t\t\t//noop\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (inlines.length === 1) {\r\n\t\t\t//1\r\n\t\t\tconst inline = inlines[0];\r\n\t\t\tdrawInline(inline, 0, 0);\r\n\t\t} else {\r\n\t\t\tconst inlineWidths = inlines.map((inline) => (inline.width({ctx}) || 0) - 0);\r\n\t\t\tlet offsetRight = inlineWidths.reduce((a, b) => a + b);\r\n\r\n\t\t\tlet offsetLeft = 0;\r\n\t\t\tinlines.forEach((inline, index) => {\r\n\t\t\t\tconst inlineWidth = inlineWidths[index];\r\n\t\t\t\toffsetRight -= inlineWidth;\r\n\t\t\t\tdrawInline(inline, offsetLeft, offsetRight);\r\n\t\t\t\toffsetLeft += inlineWidth;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _inlineRect(grid, ctx, inline, rect, col, row,\r\n\t\t\t{\r\n\t\t\t\toffset,\r\n\t\t\t\tcolor,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons,\r\n\t\t\t} = {}) {\r\n\r\n\t\t//style\r\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tctx.font = font || ctx.font;\r\n\r\n\t\tconst actInlines = inlines.buildInlines(icons, inline);\r\n\t\tdrawInlines(ctx, actInlines, rect, offset, 0, 0, col, row, grid);\r\n\t}\r\n\r\n\tfunction _multiInlineRect(grid, ctx, multiInlines, rect, col, row,\r\n\t\t\t{\r\n\t\t\t\toffset,\r\n\t\t\t\tcolor,\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\tlineHeight,\r\n\t\t\t\ticons,\r\n\t\t\t} = {}) {\r\n\t\t//style\r\n\t\tctx.fillStyle = getColor(color, col, row, grid, ctx);\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tctx.font = font || ctx.font;\r\n\r\n\t\tmultiInlines = [...multiInlines];\r\n\r\n\r\n\t\tlet paddingTop = 0;\r\n\t\tlet paddingBottom = lineHeight * (multiInlines.length - 1);\r\n\r\n\t\tif (ctx.textBaseline === 'top' || ctx.textBaseline === 'hanging') {\r\n\t\t\tconst em = ctx.measureText('').width;\r\n\t\t\tconst pad = (lineHeight - em) / 2;\r\n\t\t\tpaddingTop += pad;\r\n\t\t\tpaddingBottom -= pad;\r\n\t\t} else if (ctx.textBaseline === 'bottom' || ctx.textBaseline === 'alphabetic' || ctx.textBaseline === 'ideographic') {\r\n\t\t\tconst em = ctx.measureText('').width;\r\n\t\t\tconst pad = (lineHeight - em) / 2;\r\n\t\t\tpaddingTop -= pad;\r\n\t\t\tpaddingBottom += pad;\r\n\t\t}\r\n\t\tconst line = multiInlines.shift() || '';\r\n\t\tconst actInlines = inlines.buildInlines(icons, line);\r\n\t\tdrawInlines(ctx, actInlines, rect, offset, paddingTop, paddingBottom, col, row, grid);\r\n\t\tpaddingTop += lineHeight;\r\n\t\tpaddingBottom -= lineHeight;\r\n\t\twhile (multiInlines.length) {\r\n\t\t\tconst line = multiInlines.shift();\r\n\t\t\tconst actInlines = inlines.buildInlines(undefined, line);\r\n\t\t\tdrawInlines(ctx, actInlines, rect, offset, paddingTop, paddingBottom, col, row, grid);\r\n\t\t\tpaddingTop += lineHeight;\r\n\t\t\tpaddingBottom -= lineHeight;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction drawCheckbox(ctx, rect, check, helper,\r\n\t\t\t{\r\n\t\t\t\tanimElapsedTime = 1,\r\n\t\t\t\tuncheckBgColor = helper.theme.checkbox.uncheckBgColor,\r\n\t\t\t\tcheckBgColor = helper.theme.checkbox.checkBgColor,\r\n\t\t\t\tborderColor = helper.theme.checkbox.borderColor,\r\n\t\t\t\ttextAlign = 'center',\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t} = {}) {\r\n\t\tconst boxWidth = canvashelper.measureCheckbox(ctx).width;\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\t\tconst pos = calcStartPosition(ctx, rect, boxWidth + 1/*+1*/, boxWidth + 1/*+1*/);\r\n\t\tif (0 < animElapsedTime && animElapsedTime < 1) {\r\n\t\t\tconst uncheckBgRGB = colorToRGB(uncheckBgColor);\r\n\t\t\tconst checkBgRGB = colorToRGB(checkBgColor);\r\n\t\t\tconst checkRGB = (colorName) => {\r\n\t\t\t\tconst start = uncheckBgRGB[colorName];\r\n\t\t\t\tconst end = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = start - end;\r\n\t\t\t\treturn Math.ceil(start - diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tconst uncheckRGB = (colorName) => {\r\n\t\t\t\tconst end = uncheckBgRGB[colorName];\r\n\t\t\t\tconst start = checkBgRGB[colorName];\r\n\t\t\t\tif (animElapsedTime >= 1) {\r\n\t\t\t\t\treturn end;\r\n\t\t\t\t}\r\n\t\t\t\tconst diff = end - start;\r\n\t\t\t\treturn Math.ceil(start + diff * animElapsedTime);\r\n\t\t\t};\r\n\t\t\tuncheckBgColor = check ? uncheckBgColor : `rgb(${uncheckRGB('r')} , ${uncheckRGB('g')}, ${uncheckRGB('b')})`;\r\n\t\t\tcheckBgColor = `rgb(${checkRGB('r')} , ${checkRGB('g')}, ${checkRGB('b')})`;\r\n\t\t}\r\n\r\n\t\tcanvashelper.drawCheckbox(ctx, pos.x, pos.y, check ? animElapsedTime : false, {\r\n\t\t\tuncheckBgColor,\r\n\t\t\tcheckBgColor,\r\n\t\t\tborderColor,\r\n\t\t});\r\n\t}\r\n\r\n\tclass Theme {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t}\r\n\t\tgetThemeColor(...name) {\r\n\t\t\treturn getThemeColor(this._grid, ...name);\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn getThemeColor(this._grid, 'font');\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'underlayBackgroundColor');\r\n\t\t}\r\n\t\t// color\r\n\t\tget color() {\r\n\t\t\treturn getThemeColor(this._grid, 'color');\r\n\t\t}\r\n\t\tget frozenRowsColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsColor');\r\n\t\t}\r\n\t\t// background\r\n\t\tget defaultBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'defaultBgColor');\r\n\t\t}\r\n\t\tget frozenRowsBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBgColor');\r\n\t\t}\r\n\t\tget selectionBgColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'selectionBgColor');\r\n\t\t}\r\n\t\t// border\r\n\t\tget borderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'borderColor');\r\n\t\t}\r\n\t\tget frozenRowsBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'frozenRowsBorderColor');\r\n\t\t}\r\n\t\tget hiliteBorderColor() {\r\n\t\t\treturn getThemeColor(this._grid, 'hiliteBorderColor');\r\n\t\t}\r\n\t\tget checkbox() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'uncheckBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'checkBgColor');\r\n\t\t\t\t},\r\n\t\t\t\tget borderColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'checkbox', 'borderColor');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tget button() {\r\n\t\t\tconst grid = this._grid;\r\n\t\t\treturn this._button || (this._button = {\r\n\t\t\t\tget color() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'color');\r\n\t\t\t\t},\r\n\t\t\t\tget bgColor() {\r\n\t\t\t\t\treturn getThemeColor(grid, 'button', 'bgColor');\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\r\n\tfunction strokeRect(ctx, color, left, top, width, height) {\r\n\t\tif (!Array.isArray(color)) {\r\n\t\t\tif (color) {\r\n\t\t\t\tctx.strokeStyle = color;\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst borderColors = toBoxArray(color);\r\n\t\t\tcanvashelper.strokeColorsRect(ctx, borderColors, left, top, width, height);\r\n\t\t}\r\n\t}\r\n\r\n\tclass GridCanvasHelper {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._theme = new Theme(grid);\r\n\t\t}\r\n\t\tcreateCalculator(context) {\r\n\t\t\treturn {\r\n\t\t\t\tcalcWidth(width) {\r\n\t\t\t\t\treturn calc.toPx(width, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.width;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcalcHeight(height) {\r\n\t\t\t\t\treturn calc.toPx(height, {\r\n\t\t\t\t\t\tget full() {\r\n\t\t\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\t\t\treturn rect.height;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget em() {\r\n\t\t\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\t\t\treturn ctx.measureText('').width;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetColor(color, col, row, ctx) {\r\n\t\t\treturn getColor(color, col, row, this._grid, ctx);\r\n\t\t}\r\n\t\ttoBoxArray(obj) {\r\n\t\t\treturn toBoxArray(obj);\r\n\t\t}\r\n\t\ttoBoxPixelArray(value, context) {\r\n\t\t\tif (typeof value === 'string' || Array.isArray(value)) {\r\n\t\t\t\tconst calculator = this.createCalculator(context);\r\n\t\t\t\tconst box = toBoxArray(value);\r\n\t\t\t\treturn [\r\n\t\t\t\t\tcalculator.calcHeight(box[0]),\r\n\t\t\t\t\tcalculator.calcWidth(box[1]),\r\n\t\t\t\t\tcalculator.calcHeight(box[2]),\r\n\t\t\t\t\tcalculator.calcWidth(box[3]),\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn toBoxArray(value);\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this._theme;\r\n\t\t}\r\n\t\tdrawWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(drawRect.left, drawRect.top, drawRect.width, drawRect.height);\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawBorderWithClip(context, draw) {\r\n\t\t\tconst drawRect = context.getDrawRect();\r\n\t\t\tif (!drawRect) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\t//clip\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tlet clipLeft = drawRect.left;\r\n\t\t\t\tlet clipWidth = drawRect.width;\r\n\t\t\t\tif (drawRect.left === rect.left) {\r\n\t\t\t\t\tclipLeft += -1;\r\n\t\t\t\t\tclipWidth += 1;\r\n\t\t\t\t}\r\n\t\t\t\tlet clipTop = drawRect.top;\r\n\t\t\t\tlet clipHeight = drawRect.height;\r\n\t\t\t\tif (drawRect.top === rect.top) {\r\n\t\t\t\t\tclipTop += -1;\r\n\t\t\t\t\tclipHeight += 1;\r\n\t\t\t\t}\r\n\t\t\t\tctx.rect(clipLeft, clipTop, clipWidth, clipHeight);\r\n\t\t\t\tctx.clip();\r\n\r\n\t\t\t\tdraw(ctx);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\ttext(text, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tlet rect = context.getRect();\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tif (padding) {\r\n\t\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\r\n\t\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\t\t\t\t\trect = new Rect(left, top, width, height);\r\n\t\t\t\t}\r\n\t\t\t\t_inlineRect(this._grid, ctx, text, rect, col, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tmultilineText(multilines, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tlineHeight = '1em',\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tlet rect = context.getRect();\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\tif (padding) {\r\n\t\t\t\t\tpadding = this.toBoxPixelArray(padding, context);\r\n\t\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\t\t\t\t\trect = new Rect(left, top, width, height);\r\n\t\t\t\t}\r\n\t\t\t\tconst calculator = this.createCalculator(context);\r\n\t\t\t\tlineHeight = calculator.calcHeight(lineHeight);\r\n\t\t\t\t_multiInlineRect(this._grid, ctx, multilines, rect, col, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\tlineHeight,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillText(text, x, y, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'top',\r\n\t\t\t\t\tfont,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\tif (!color) {\r\n\t\t\t\t({color} = this.theme);\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\tcolor = this.theme.frozenRowsColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.fillStyle = getColor(color, col, row, this._grid, ctx);\r\n\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\tctx.font = font || ctx.font;\r\n\t\t\t\tctx.fillText(text, x, y);\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfillCell(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t\tfillCellWithState(context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\t\t\tthis.fillCell(context, option);\r\n\t\t}\r\n\t\tfillRect(rect, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tfillColor = this.theme.defaultBgColor,\r\n\t\t\t\t} = {}) {\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tctx.fillStyle = getColor(fillColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\tfillRectWithState(rect, context, option = {}) {\r\n\t\t\toption.fillColor = this.getFillColorState(context, option);\r\n\r\n\t\t\tthis.fillRect(rect, context, option);\r\n\t\t}\r\n\t\tgetFillColorState(context, option = {}) {\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tif (!state.selected && state.selection) {\r\n\t\t\t\treturn this.theme.selectionBgColor;\r\n\t\t\t} else {\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\treturn this.theme.frozenRowsBgColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn option.fillColor || this.theme.defaultBgColor;\r\n\t\t}\r\n\t\tborder(context,\r\n\t\t\t\t{\r\n\t\t\t\t\tborderColor = this.theme.borderColor,\r\n\t\t\t\t\tlineWidth = 1,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst borderColors = getColor(borderColor, col, row, this._grid, ctx);\r\n\t\t\t\t\r\n\t\t\t\tif (lineWidth === 1) {\r\n\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left - 0.5, rect.top - 0.5, rect.width, rect.height);\r\n\t\t\t\t} else if (lineWidth === 2) {\r\n\t\t\t\t\tctx.lineWidth = 2;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors, rect.left, rect.top, rect.width - 1, rect.height - 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.lineWidth = lineWidth;\r\n\t\t\t\t\tconst startOffset = (lineWidth / 2) - 1;\r\n\t\t\t\t\tstrokeRect(ctx, borderColors,\r\n\t\t\t\t\t\t\trect.left + startOffset,\r\n\t\t\t\t\t\t\trect.top + startOffset,\r\n\t\t\t\t\t\t\trect.width - lineWidth + 1,\r\n\t\t\t\t\t\t\trect.height - lineWidth + 1\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tborderWithState(context, option = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\t\t\tconst state = context.getSelectState();\r\n\t\t\tconst {col, row} = context;\r\n\r\n\t\t\t//\r\n\t\t\tif (state.selected) {\r\n\t\t\t\toption.borderColor = this.theme.hiliteBorderColor;\r\n\t\t\t\toption.lineWidth = 2;\r\n\t\t\t\tthis.border(context, option);\r\n\t\t\t} else {\r\n\t\t\t\t// header color\r\n\t\t\t\tconst isFrozenCell = this._grid.isFrozenCell(col, row);\r\n\t\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\t\toption.borderColor = this.theme.frozenRowsBorderColor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\toption.lineWidth = 1;\r\n\t\t\t\tthis.border(context, option);\r\n\r\n\t\t\t\t//\r\n\t\t\t\tconst sel = this._grid.selection.select;\r\n\t\t\t\tif (sel.col + 1 === col && sel.row === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (sel.col === col && sel.row + 1 === row) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\t\tconst borderColors = toBoxArray(\r\n\t\t\t\t\t\t\t\tgetColor(this.theme.hiliteBorderColor, sel.col, sel.row, this._grid, ctx)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckbox(check, context, option = {}) {\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tdrawCheckbox(ctx, context.getRect(), check, this, option);\r\n\t\t\t});\r\n\t\t}\r\n\t\tbutton(caption, context,\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor = this.theme.button.bgColor,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\toffset = 2,\r\n\t\t\t\t\tcolor = this.theme.button.color,\r\n\t\t\t\t\ttextAlign = 'center',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t} = {}) {\r\n\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\tthis.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tpadding = this.toBoxPixelArray(padding || rect.height / 8, context);\r\n\t\t\t\tconst left = rect.left + padding[3];\r\n\t\t\t\tconst top = rect.top + padding[0];\r\n\t\t\t\tconst width = rect.width - padding[1] - padding[3];\r\n\t\t\t\tconst height = rect.height - padding[0] - padding[2];\r\n\r\n\t\t\t\tcanvashelper.drawButton(ctx, left, top, width, height, {\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t\tradius: rect.height / 8,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\tshadow,\r\n\t\t\t\t});\r\n\t\t\t\t_inlineRect(this._grid, ctx, caption, new Rect(left, top, width, height),\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\tcolor,\r\n\t\t\t\t\t\t\ttextAlign,\r\n\t\t\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\t\t\tfont,\r\n\t\t\t\t\t\t\ticons,\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\ttestFontLoad(font, value, context) {\r\n\t\t\treturn testFontLoad(font, value, context, this._grid);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = GridCanvasHelper;\r\n}","'use strict';\r\n{\r\n\tconst {isDef, isPromise, then, obj: {isObject}} = require('./internal/utils');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\tconst columns = require('./columns');\r\n\tconst {BaseStyle} = columns.style;\r\n\tconst headerType = require('./header/type');\r\n\tconst {BaseStyle: HeaderBaseStyle} = require('./header/style');\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\tconst {DataSource, CachedDataSource} = require('./data');\r\n\tconst themes = require('./themes');\r\n\tconst icons = require('./internal/icons');\r\n\tconst MessageHandler = require('./columns/message/MessageHandler');\r\n\tconst EVENT_TYPE = require('./list-grid/EVENT_TYPE');\r\n\t\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('./internal/symbolManager');\r\n\r\n\tlet headerId = 0;\r\n\t//private methods\r\n\tfunction _getHeaderCellRange(grid, col, row) {\r\n\t\treturn grid[_].headerMap.getHeaderCellRange(col, row);\r\n\t}\r\n\tfunction _updateRect(grid, col, row, context) {\r\n\t\tconst rect = context.getRect();\r\n\t\tconst {\r\n\t\t\tstartCol,\r\n\t\t\tendCol,\r\n\t\t\tstartRow,\r\n\t\t\tendRow,\r\n\t\t} = _getHeaderCellRange(grid, col, row);\r\n\t\tfor (let c = col - 1; c >= startCol; c--) {\r\n\t\t\trect.left -= grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let c = col + 1; c <= endCol; c++) {\r\n\t\t\trect.right += grid.getColWidth(c);\r\n\t\t}\r\n\t\tfor (let r = row - 1; r >= startRow; r--) {\r\n\t\t\trect.top -= grid.getRowHeight(r);\r\n\t\t}\r\n\t\tfor (let r = row + 1; r <= endRow; r++) {\r\n\t\t\trect.bottom += grid.getRowHeight(r);\r\n\t\t}\r\n\t\tcontext.setRect(rect);\r\n\t}\r\n\tfunction _getCellValue(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn grid[_].headerMap.getCell(col, row).caption;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.get;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, field, row);\r\n\t\t}\r\n\t}\r\n\tfunction _setCellValue(grid, col, row, value) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\t// nop\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tlet {field} = grid[_].headerMap.columns[col];\r\n\t\t\tif (isObject(field) && field.get && field.set) {\r\n\t\t\t\tfield = field.set;\r\n\t\t\t}\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\tconst res = grid[_].dataSource.setField(index, field, value);\r\n\t\t\treturn isPromise(res) ? res : true;\r\n\t\t}\r\n\t}\r\n\tfunction _getCellMessage(grid, col, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst {message} = grid[_].headerMap.columns[col];\r\n\t\t\tif (!message) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn _getField(grid, message, row);\r\n\t\t}\r\n\t}\r\n\tfunction _getCellIcon0(grid, icon, row) {\r\n\t\tif (!isDef(icon)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (Array.isArray(icon)) {\r\n\t\t\treturn icon.map((i) => _getCellIcon0(grid, i, row));\r\n\t\t}\r\n\t\tif (!isObject(icon)) {\r\n\t\t\treturn _getField(grid, icon, row);\r\n\t\t}\r\n\t\tconst retIcon = {};\r\n\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\tif (icon[k]) {\r\n\t\t\t\tconst f = _getField(grid, icon[k], row);\r\n\t\t\t\tif (isDef(f)) {\r\n\t\t\t\t\tretIcon[k] = f;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!_hasField(grid, icon[k], row)) {\r\n\t\t\t\t\t\tretIcon[k] = icon[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn retIcon;\r\n\t}\r\n\tfunction _getCellIcon(grid, col, row) {\r\n\t\tconst {icon} = grid[_].headerMap.columns[col];\r\n\t\treturn _getCellIcon0(grid, icon, row);\r\n\t}\r\n\tfunction _getField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.getField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _hasField(grid, field, row) {\r\n\t\tif (!isDef(field)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tconst index = _getRowRecordIndex(grid, row);\r\n\t\t\treturn grid[_].dataSource.hasField(index, field);\r\n\t\t}\r\n\t}\r\n\tfunction _onDrawValue(grid, cellValue, context, {col, row}, style, draw) {\r\n\t\tconst helper = grid[_].gridCanvasHelper;\r\n\r\n\t\tconst drawCellBg = ({bgColor} = {}) => {\r\n\t\t\tconst fillOpt = {\r\n\t\t\t\tfillColor: bgColor,\r\n\t\t\t};\r\n\t\t\t//cell\r\n\t\t\thelper.fillCellWithState(context, fillOpt);\r\n\t\t};\r\n\t\tconst drawCellBorder = () => {\r\n\r\n\t\t\tif (context.col === grid.frozenColCount - 1) {\r\n\t\t\t\t//\r\n\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColor = context.row >= grid.frozenRowCount ? helper.theme.borderColor\r\n\t\t\t\t\t\t: helper.theme.frozenRowsBorderColor;\r\n\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(borderColor, context.col, context.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.right - 2.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.right - 2.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (context.row < grid[_].headerMap.rowCount) {\r\n\t\t\t\t_headerBorderWithState(grid, helper, context);\r\n\t\t\t} else {\r\n\t\t\t\thelper.borderWithState(context);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\tconst drawCellBase = ({bgColor} = {}) => {\r\n\t\t\tdrawCellBg({bgColor});\r\n\t\t\tdrawCellBorder();\r\n\t\t};\r\n\t\tconst info = {\r\n\t\t\tgetRecord: () => grid.getRowRecord(row),\r\n\t\t\tgetIcon: () => _getCellIcon(grid, col, row),\r\n\t\t\tgetMessage: () => _getCellMessage(grid, col, row),\r\n\t\t\tmessageHandler: grid[_].messageHandler,\r\n\t\t\tstyle,\r\n\t\t\tdrawCellBase,\r\n\t\t\tdrawCellBg,\r\n\t\t\tdrawCellBorder,\r\n\t\t};\r\n\r\n\t\treturn draw(cellValue, info, context, grid);\r\n\t}\r\n\tfunction _headerBorderWithState(grid, helper, context) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst sel = grid.selection.select;\r\n\t\tif (sel.row >= grid[_].headerMap.rowCount) {\r\n\t\t\t//\r\n\t\t\thelper.borderWithState(context);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst {id} = grid[_].headerMap.getCell(col, row);\r\n\r\n\t\tconst rect = context.getRect();\r\n\t\tconst option = {};\r\n\r\n\t\tconst {id: selId} = grid[_].headerMap.getCell(sel.col, sel.row);\r\n\t\t//\r\n\t\tif (selId === id) {\r\n\t\t\toption.borderColor = helper.theme.hiliteBorderColor;\r\n\t\t\toption.lineWidth = 2;\r\n\t\t\thelper.border(context, option);\r\n\t\t} else {\r\n\t\t\toption.lineWidth = 1;\r\n\t\t\t// header color\r\n\t\t\tconst isFrozenCell = grid.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\toption.borderColor = helper.theme.frozenRowsBorderColor;\r\n\t\t\t}\r\n\t\t\thelper.border(context, option);\r\n\r\n\t\t\t//\r\n\t\t\tif (col > 0 && grid[_].headerMap.getCell(col - 1, row).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[1]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[1];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left - 0.5, rect.top);\r\n\t\t\t\t\t\tctx.lineTo(rect.left - 0.5, rect.bottom);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else if (row > 0 &&\r\n\t\t\t\t\t\tgrid[_].headerMap.getCell(col, row - 1).id === selId) {\r\n\t\t\t\t//\r\n\t\t\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\t\t\tconst borderColors = helper.toBoxArray(\r\n\t\t\t\t\t\t\thelper.getColor(helper.theme.hiliteBorderColor, sel.col, sel.row, ctx)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (borderColors[0]) {\r\n\t\t\t\t\t\tctx.lineWidth = 1;\r\n\t\t\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(rect.left, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.lineTo(rect.right, rect.top - 0.5);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction _refreshHeader(grid) {\r\n\t\tif (grid[_].headerEvents) {\r\n\t\t\tgrid[_].headerEvents.forEach((id) => grid.unlisten(id));\r\n\t\t}\r\n\t\tgrid[_].headerMap = new HeaderMap(grid[_].header);\r\n\t\tgrid[_].headerEvents = [];\r\n\t\tgrid[_].headerMap.headerObjects.forEach((cell) => {\r\n\t\t\tconst ids = cell.headerType.bindGridEvent(grid);\r\n\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\tif (cell.style) {\r\n\t\t\t\tif (cell.style instanceof HeaderBaseStyle) {\r\n\t\t\t\t\tconst id = cell.style.listen(HeaderBaseStyle.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].headerMap.columns.forEach((col, index) => {\r\n\t\t\tif (col.action) {\r\n\t\t\t\tconst ids = col.action.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.columnType) {\r\n\t\t\t\tconst ids = col.columnType.bindGridEvent(grid, index, {\r\n\t\t\t\t\tisTarget(col, row) {\r\n\t\t\t\t\t\treturn index === col && grid.frozenRowCount <= row;\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\tgrid[_].headerEvents.push(...ids);\r\n\t\t\t}\r\n\t\t\tif (col.style) {\r\n\t\t\t\tif (col.style instanceof BaseStyle) {\r\n\t\t\t\t\tconst id = col.style.listen(columns.style.EVENT_TYPE.CHANGE_STYLE, () => {\r\n\t\t\t\t\t\tgrid.invalidate();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tgrid[_].headerEvents.push(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid.colCount = grid[_].headerMap.columns.length;\r\n\t\t_refreshRowCount(grid);\r\n\t\tgrid.frozenRowCount = grid[_].headerMap.rowCount;\r\n\t\tfor (let col = 0; col < grid[_].headerMap.columns.length; col++) {\r\n\t\t\tconst column = grid[_].headerMap.columns[col];\r\n\t\t\tconst {width, minWidth, maxWidth} = column;\r\n\t\t\tif (width && (width > 0 || typeof width === 'string')) {\r\n\t\t\t\tgrid.setColWidth(col, width);\r\n\t\t\t}\r\n\t\t\tif (minWidth && (minWidth > 0 || typeof minWidth === 'string')) {\r\n\t\t\t\tgrid.setMinColWidth(col, minWidth);\r\n\t\t\t}\r\n\t\t\tif (maxWidth && (maxWidth > 0 || typeof maxWidth === 'string')) {\r\n\t\t\t\tgrid.setMaxColWidth(col, maxWidth);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst isArrayHeaderRowHeight = Array.isArray(grid[_].headerRowHeight);\r\n\t\tfor (let row = 0; row < grid[_].headerMap.rowCount; row++) {\r\n\t\t\tconst height = isArrayHeaderRowHeight ? grid[_].headerRowHeight[row] : grid[_].headerRowHeight;\r\n\t\t\tif (height && height > 0) {\r\n\t\t\t\tgrid.setRowHeight(row, height);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _refreshRowCount(grid) {\r\n\t\tgrid.rowCount = grid[_].dataSource.length + grid[_].headerMap.rowCount;\r\n\t}\r\n\tfunction _tryWithUpdateDataSource(grid, fn) {\r\n\t\tif (grid[_].dataSourceEventIds) {\r\n\t\t\tgrid[_].dataSourceEventIds.forEach((id) => grid[_].handler.off(id));\r\n\t\t}\r\n\r\n\t\tfn(grid);\r\n\r\n\t\tgrid[_].dataSourceEventIds = [\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_LENGTH, () => {\r\n\t\t\t\t_refreshRowCount(grid);\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t\tgrid[_].handler.on(grid[_].dataSource, DataSource.EVENT_TYPE.UPDATED_ORDER, () => {\r\n\t\t\t\tgrid.invalidate();\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction _setRecords(grid, records = []) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tgrid[_].records = records;\r\n\t\t\tgrid[_].dataSource = CachedDataSource.ofArray(grid[_].records);\r\n\t\t});\r\n\t}\r\n\tfunction _setDataSource(grid, dataSource) {\r\n\t\t_tryWithUpdateDataSource(grid, () => {\r\n\t\t\tif (dataSource) {\r\n\t\t\t\tif (dataSource instanceof DataSource) {\r\n\t\t\t\t\tgrid[_].dataSource = dataSource;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgrid[_].dataSource = new CachedDataSource(dataSource);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tgrid[_].dataSource = DataSource.EMPTY;\r\n\t\t\t}\r\n\t\t\tgrid[_].records = null;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction _getRowRecordIndex(grid, row) {\r\n\t\tif (row < grid[_].headerMap.rowCount) {\r\n\t\t\treturn undefined;\r\n\t\t} else {\r\n\t\t\treturn row - grid[_].headerMap.rowCount;\r\n\t\t}\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\tclass HeaderMap {\r\n\t\tconstructor(header) {\r\n\t\t\tthis._columns = [];\r\n\t\t\tthis._headerCells = [];\r\n\t\t\tthis._headerObjects = [];\r\n\r\n\t\t\tthis._addHeaders(0, header, []);\r\n\t\t\tthis._setupHeaderType();\r\n\t\t}\r\n\t\tget columns() {\r\n\t\t\treturn this._columns;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this._headerCells.length;\r\n\t\t}\r\n\t\tget headerObjects() {\r\n\t\t\treturn this._headerObjects;\r\n\t\t}\r\n\t\tgetCell(col, row) {\r\n\t\t\treturn this._headerCells[row][col];\r\n\t\t}\r\n\t\tgetHeaderCellRangeById(id) {\r\n\t\t\tfor (let r = 0; r < this.rowCount; r++) {\r\n\t\t\t\tfor (let c = 0; c < this.columns.length; c++) {\r\n\t\t\t\t\tif (id === this.getCell(c, r).id) {\r\n\t\t\t\t\t\treturn this.getHeaderCellRange(c, r);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tgetHeaderCellRange(col, row) {\r\n\t\t\tconst result = {\r\n\t\t\t\tstartCol: col,\r\n\t\t\t\tstartRow: row,\r\n\t\t\t\tendCol: col,\r\n\t\t\t\tendRow: row,\r\n\t\t\t\tisCellInRange(col, row) {\r\n\t\t\t\t\treturn this.startCol <= col && col <= this.endCol &&\r\n\t\t\t\t\t\t\tthis.startRow <= row && row <= this.endRow;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tconst {id} = this.getCell(col, row);\r\n\t\t\tfor (let c = col - 1; c >= 0; c--) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let c = col + 1; c < this.columns.length; c++) {\r\n\t\t\t\tif (id !== this.getCell(c, row).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endCol = c;\r\n\t\t\t}\r\n\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.startRow = r;\r\n\t\t\t}\r\n\t\t\tfor (let r = row + 1; r < this.rowCount; r++) {\r\n\t\t\t\tif (id !== this.getCell(col, r).id) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult.endRow = r;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\t_addHeaders(row, header, roots) {\r\n\t\t\tconst rowCells = this._headerCells[row] || this._newRow(row);\r\n\t\t\theader.forEach((hd) => {\r\n\t\t\t\tconst col = this._columns.length;\r\n\t\t\t\tconst cell = {\r\n\t\t\t\t\tid: headerId++,\r\n\t\t\t\t\tcaption: hd.caption,\r\n\t\t\t\t\tstyle: hd.headerStyle,\r\n\t\t\t\t\tsort: hd.sort,\r\n\t\t\t\t};\r\n\t\t\t\tthis._headerObjects.push(cell);\r\n\t\t\t\trowCells[col] = cell;\r\n\t\t\t\tfor (let r = row - 1; r >= 0; r--) {\r\n\t\t\t\t\tthis._headerCells[r][col] = roots[r];\r\n\t\t\t\t}\r\n\t\t\t\tif (hd.columns) {\r\n\t\t\t\t\tthis._addHeaders(row + 1, hd.columns, [...roots, cell]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._columns.push({\r\n\t\t\t\t\t\twidth: hd.width,\r\n\t\t\t\t\t\tminWidth: hd.minWidth,\r\n\t\t\t\t\t\tmaxWidth: hd.maxWidth,\r\n\t\t\t\t\t\tfield: hd.field,\r\n\t\t\t\t\t\ticon: hd.icon,\r\n\t\t\t\t\t\tmessage: hd.message,\r\n\t\t\t\t\t\tcolumnType: columns.type.of(hd.columnType),\r\n\t\t\t\t\t\taction: columns.action.of(hd.action),\r\n\t\t\t\t\t\tstyle: hd.style,\r\n\t\t\t\t\t\tdefine: hd,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor (let r = row + 1; r < this._headerCells.length; r++) {\r\n\t\t\t\t\t\tthis._headerCells[r][col] = cell;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setupHeaderType() {\r\n\t\t\tthis._headerObjects.forEach((cell) => {\r\n\t\t\t\tcell.range = this.getHeaderCellRangeById(cell.id);\r\n\t\t\t\tcell.headerType = headerType.create(cell);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_newRow(row) {\r\n\t\t\tconst newRow = this._headerCells[row] = [];\r\n\t\t\tif (!this._columns.length) {\r\n\t\t\t\treturn newRow;\r\n\t\t\t}\r\n\t\t\tconst prev = this._headerCells[row - 1];\r\n\t\t\tfor (let col = 0; col < prev.length; col++) {\r\n\t\t\t\tnewRow[col] = prev[col];\r\n\t\t\t}\r\n\t\t\treturn newRow;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction adjustListGridOption(options) {\r\n\t\tif (options) {\r\n\t\t\tdelete options.frozenRowCount;\r\n\t\t\tdelete options.colCount;\r\n\t\t\tdelete options.rowCount;\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\t\r\n\t/**\r\n\t * ListGrid\r\n\t * @classdesc cheetahGrid.ListGrid\r\n\t * @extends cheetahGrid.core.DrawGrid\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tclass ListGrid extends DrawGrid {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * header: see header property\r\n\t\t * records {array}: records data\r\n\t\t * dataSource {DataSource}: records data source\r\n\t\t * frozenColCount {number}: default 0\r\n\t\t * defaultRowHeight {number}: default grid row height. default 40\r\n\t\t * defaultColWidth {number}: default grid col width. default 80\r\n\t\t * borderColor: border color\r\n\t\t * parentElement {Element}: canvas parentElement\r\n\t\t * theme {object}: theme\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(options = {}) {\r\n\t\t\tsuper(adjustListGridOption(options));\r\n\t\t\tthis[_].header = options.header || [];\r\n\t\t\tthis[_].headerRowHeight = options.headerRowHeight || [];\r\n\t\t\tif (options.dataSource) {\r\n\t\t\t\t_setDataSource(this, options.dataSource);\r\n\t\t\t} else {\r\n\t\t\t\t_setRecords(this, options.records);\r\n\t\t\t}\r\n\t\t\t_refreshHeader(this);\r\n\t\t\tthis[_].sortState = {\r\n\t\t\t\tcol: -1,\r\n\t\t\t\torder: undefined,\r\n\t\t\t};\r\n\t\t\tthis[_].gridCanvasHelper = new GridCanvasHelper(this);\r\n\t\t\tthis[_].theme = themes.of(options.theme);\r\n\t\t\tthis[_].messageHandler = new MessageHandler(this, (col, row) => _getCellMessage(this, col, row));\r\n\t\t\tthis.invalidate();\r\n\t\t\tthis[_].handler.on(window, 'resize', () => {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t\tthis.updateScroll();\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t});\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis[_].messageHandler.dispose();\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tget header() {\r\n\t\t\treturn this[_].header;\r\n\t\t}\r\n\t\t/**\r\n\t\t * header define\r\n\t\t * <pre>\r\n\t\t * column options\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * field: field name\r\n\t\t * width: column width\r\n\t\t * minWidth: column min width\r\n\t\t * maxWidth: column max width\r\n\t\t * icon: icon name\r\n\t\t * message: message key name\r\n\t\t * columnType: ColumnType\r\n\t\t * action: ColumnAction\r\n\t\t * style: ColumnStyle\r\n\t\t * sort: define sort setting\r\n\t\t * -----\r\n\t\t *\r\n\t\t * multiline header\r\n\t\t * -----\r\n\t\t * caption: header caption\r\n\t\t * columns: columns define\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @type {Array}\r\n\t\t */\r\n\t\tset header(header) {\r\n\t\t\tthis[_].header = header;\r\n\t\t\t_refreshHeader(this);\r\n\t\t}\r\n\t\tget records() {\r\n\t\t\treturn this[_].records;\r\n\t\t}\r\n\t\tset records(records) {\r\n\t\t\t_setRecords(this, records);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget dataSource() {\r\n\t\t\treturn this[_].dataSource;\r\n\t\t}\r\n\t\tset dataSource(dataSource) {\r\n\t\t\t_setDataSource(this, dataSource);\r\n\t\t\t_refreshRowCount(this);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget theme() {\r\n\t\t\treturn this[_].theme;\r\n\t\t}\r\n\t\tset theme(theme) {\r\n\t\t\tthis[_].theme = themes.of(theme);\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn super.font || this[_].gridCanvasHelper.theme.font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tsuper.font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn super.underlayBackgroundColor || this[_].gridCanvasHelper.theme.underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tsuper.underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tget sortState() {\r\n\t\t\treturn this[_].sortState;\r\n\t\t}\r\n\t\tset sortState(sortState) {\r\n\t\t\tthis[_].sortState = sortState;\r\n\t\t}\r\n\t\tgetField(col) {\r\n\t\t\treturn this[_].headerMap.columns[col].field;\r\n\t\t}\r\n\t\tgetRowRecord(row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t} else {\r\n\t\t\t\treturn this[_].dataSource.get(_getRowRecordIndex(this, row));\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetGridCanvasHelper() {\r\n\t\t\treturn this[_].gridCanvasHelper;\r\n\t\t}\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol, startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tif (startCol !== col || startRow !== row) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn _getCellValue(this, col, row);\r\n\t\t}\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\tconst column = this[_].headerMap.columns[col];\r\n\r\n\t\t\tlet draw;\r\n\t\t\tlet style;\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst hd = this[_].headerMap.getCell(col, row);\r\n\t\t\t\tdraw = hd.headerType.onDrawCell;\r\n\t\t\t\t({style} = hd);\r\n\t\t\t\t_updateRect(this, col, row, context);\r\n\t\t\t} else {\r\n\t\t\t\tdraw = column.columnType.onDrawCell;\r\n\t\t\t\t({style} = column);\r\n\t\t\t}\r\n\t\t\tconst cellValue = _getCellValue(this, col, row);\r\n\t\t\treturn _onDrawValue(this, cellValue, context, {col, row}, style, draw);\r\n\t\t}\r\n\t\tdoGetCellValue(col, row, valueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst value = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(value)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvalueCallback(value);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tdoChangeValue(col, row, changeValueCallback) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\t// nop\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tconst before = _getCellValue(this, col, row);\r\n\t\t\t\tif (isPromise(before)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tconst after = changeValueCallback(before);\r\n\t\t\t\tif (after === undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn then(_setCellValue(this, col, row, after), (ret) => {\r\n\t\t\t\t\tif (ret) {\r\n\t\t\t\t\t\tconst {field} = this[_].headerMap.columns[col];\r\n\t\t\t\t\t\tconst self = this;\r\n\t\t\t\t\t\tthis.fireListeners(EVENT_TYPE.CHANGED_VALUE, {\r\n\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\tget record() {\r\n\t\t\t\t\t\t\t\treturn self.getRowRecord(row);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfield,\r\n\t\t\t\t\t\t\tvalue: after,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\tthis.listen(EVENT_TYPE.SELECTED_CELL, (e) => {\r\n\t\t\t\tif (e.row < this[_].headerMap.rowCount) {\r\n\t\t\t\t\tconst {startCol, endCol, startRow, endRow} = _getHeaderCellRange(this, e.col, e.row);\r\n\t\t\t\t\tif (startCol !== endCol || startRow !== endRow) {\r\n\t\t\t\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = startCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveLeftColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endCol} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\tcol = endCol;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveRightColByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {startRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = startRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveUpRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\tif (row < this[_].headerMap.rowCount) {\r\n\t\t\t\tconst {endRow} = _getHeaderCellRange(this, col, row);\r\n\t\t\t\trow = endRow;\r\n\t\t\t}\r\n\t\t\treturn super.getMoveDownRowByKeyDownInternal({col, row});\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tgetColumnIndexByField(field) {\r\n\t\t\tfor (const columnIndex in this[_].headerMap.columns) {\r\n\t\t\t\tif (this[_].headerMap.columns[columnIndex].field === field) {\r\n\t\t\t\t\treturn columnIndex - 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfocusGridCell(field, index) {\r\n\t\t\tconst {\r\n\t\t\t\tstart: {col: startCol, row: startRow},\r\n\t\t\t\tend: {col: endCol, row: endRow}\r\n\t\t\t} = this.selection.range;\r\n\r\n\t\t\tconst newCol = this.getColumnIndexByField(field);\r\n\t\t\tconst newRow = index + this[_].headerMap.rowCount;\r\n\t\t\tthis.focusCell(newCol, newRow);\r\n\t\t\tthis.selection.select = {\r\n\t\t\t\tcol: newCol,\r\n\t\t\t\trow: newRow\r\n\t\t\t};\r\n\t\t\tthis.invalidateGridRect(startCol, startRow, endCol, endRow);\r\n\t\t\tthis.invalidateCell(newCol, newRow);\r\n\t\t}\r\n\t\tmakeVisibleGridCell(field, index) {\r\n\t\t\tthis.makeVisibleCell(this.getColumnIndexByField(field), index + this[_].headerMap.rowCount);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ListGrid;\r\n}","'use strict';\r\n{\r\n\tconst action = require('./columns/action');\r\n\tconst type = require('./columns/type');\r\n\tconst style = require('./columns/style');\r\n\r\n\t/**\r\n\t * columns\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\taction,\r\n\t\ttype,\r\n\t\tstyle,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst BaseAction = require('./action/BaseAction');\r\n\tconst Action = require('./action/Action');\r\n\tconst Editor = require('./action/Editor');\r\n\tconst CheckEditor = require('./action/CheckEditor');\r\n\tconst ButtonAction = require('./action/ButtonAction');\r\n\tconst SmallDialogInputEditor = require('./action/SmallDialogInputEditor');\r\n\tconst InlineInputEditor = require('./action/InlineInputEditor');\r\n\tconst InlineMenuEditor = require('./action/InlineMenuEditor');\r\n\r\n\tclass ImmutableCheckEditor extends CheckEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\tclass ImmutableInputEditor extends SmallDialogInputEditor {\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * column actions\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.action\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst action = {\r\n\t\tACTIONS: {\r\n\t\t\tCHECK: new ImmutableCheckEditor(),\r\n\t\t\tINPUT: new ImmutableInputEditor(),\r\n\t\t},\r\n\t\tget BaseAction() {\r\n\t\t\treturn BaseAction;\r\n\t\t},\r\n\t\tget Editor() {\r\n\t\t\treturn Editor;\r\n\t\t},\r\n\t\tget Action() {\r\n\t\t\treturn Action;\r\n\t\t},\r\n\t\tget CheckEditor() {\r\n\t\t\treturn CheckEditor;\r\n\t\t},\r\n\t\tget ButtonAction() {\r\n\t\t\treturn ButtonAction;\r\n\t\t},\r\n\t\tget SmallDialogInputEditor() {\r\n\t\t\treturn SmallDialogInputEditor;\r\n\t\t},\r\n\t\tget InlineInputEditor() {\r\n\t\t\tconsole.warn('InlineInputEditor is an experiment stage');\r\n\t\t\treturn InlineInputEditor;\r\n\t\t},\r\n\t\tget InlineMenuEditor() {\r\n\t\t\treturn InlineMenuEditor;\r\n\t\t},\r\n\t\tof(columnAction) {\r\n\t\t\tif (!columnAction) {\r\n\t\t\t\treturn action.ACTIONS.DEFAULT;\r\n\t\t\t} else if (typeof columnAction === 'string') {\r\n\t\t\t\treturn action.ACTIONS[columnAction.toUpperCase()] || action.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnAction;\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\tmodule.exports = action;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\r\n\tconst BaseAction = require('./BaseAction');\r\n\r\n\tclass Action extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._action = option.action;\r\n\t\t}\r\n\t\tget action() {\r\n\t\t\treturn this._action;\r\n\t\t}\r\n\t\tset action(action) {\r\n\t\t\tthis._action = action;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Action(this);\r\n\t\t}\r\n\t\tgetState(grid) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst state = this.getState(grid);\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst record = grid.getRowRecord(cell.row);\r\n\t\t\t\tthis._action(record);\r\n\t\t\t};\r\n\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = Action;\r\n}","'use strict';\r\n{\r\n\t\r\n\r\n\tclass BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis._disabled = option.disabled;\r\n\t\t}\r\n\t\tget disabled() {\r\n\t\t\treturn this._disabled;\r\n\t\t}\r\n\t\tset disabled(disabled) {\r\n\t\t\tthis._disabled = !!disabled;\r\n\t\t\tthis.onChangeDisabledInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseAction(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tonChangeDisabledInternal() {}\r\n\t}\r\n\tmodule.exports = BaseAction;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst Editor = require('./Editor');\r\n\tconst {EVENT_TYPE: {\r\n\t\tINPUT_CELL,\r\n\t\tEDITABLEINPUT_CELL,\r\n\t\tSELECTED_CELL,\r\n\t\tDBLCLICK_CELL,\r\n\t\tDBLTAP_CELL,\r\n\t\tKEYDOWN,\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\tSCROLL\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_F2 = 113;\r\n\r\n\tclass BaseInputEditor extends Editor {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseInputEditor(this);\r\n\t\t}\r\n\t\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonOpenCellInternal(grid, cell) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tonGridScrollInternal(grid) {\r\n\t\t\tthrow new Error();\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tconst open = (cell) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onOpenCellInternal(grid, cell);\r\n\t\t\t};\r\n\r\n\t\t\tconst input = (cell, value) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onInputCellInternal(grid, cell, value);\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(INPUT_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinput({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t}, e.value);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLCLICK_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(DBLTAP_CELL, (e) => {\r\n\t\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\te.event.preventDefault();\r\n\t\t\t\t\te.event.stopPropagation();\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\topen({\r\n\t\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\t\trow: sel.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\t\tthis.onChangeSelectCellInternal(grid, {col: e.col, row: e.row}, e.selected);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\t\tthis.onGridScrollInternal(grid);\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MODIFY_STATUS_EDITABLEINPUT_CELL, (cell) => {\r\n\t\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.onSetInputAttrsInternal(grid, {\r\n\t\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\t\trow: cell.row\r\n\t\t\t\t\t}, cell.input);\r\n\t\t\t\t}),\r\n\t\t\t\t\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = BaseInputEditor;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst Action = require('./Action');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tclass ButtonAction extends Action {\r\n\t\tgetState(grid) {\r\n\t\t\tif (!grid[BUTTON_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, BUTTON_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\treturn grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonAction;\r\n}","'use strict';\r\n{\r\n\tconst {obj: {setReadonly}, isPromise} = require('../../internal/utils');\r\n\tconst {bindCellClickAction, bindCellKeyAction} = require('./actionBind');\r\n\tconst animate = require('../../internal/animate');\r\n\r\n\tconst Editor = require('./Editor');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\tconst KEY_ENTER = 13;\r\n\tconst KEY_SPACE = 32;\r\n\r\n\tfunction toggleValue(val) {\r\n\t\tif (typeof val === 'number') {\r\n\t\t\tif (val === 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t} else if (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn 'true';\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn 'on';\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)0$/, '$11');\r\n\t\t\t} else if (val === 'true') {\r\n\t\t\t\treturn 'false';\r\n\t\t\t} else if (val === 'on') {\r\n\t\t\t\treturn 'off';\r\n\t\t\t} else if (val.match(/^0*1$/)) {\r\n\t\t\t\treturn val.replace(/^(0*)1$/, '$10');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !val;\r\n\t}\r\n\r\n\tclass CheckEditor extends Editor {\r\n\t\tclone() {\r\n\t\t\treturn new CheckEditor(this);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\tif (!grid[CHECK_COLUMN_STATE_ID]) {\r\n\t\t\t\tsetReadonly(grid, CHECK_COLUMN_STATE_ID, {});\r\n\t\t\t}\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID];\r\n\t\t\t\r\n\t\t\tconst action = (cell) => {\r\n\t\t\t\tconst key = cell.col + ':' + cell.row;\r\n\t\t\t\tconst blockKey = key + '::block';\r\n\t\t\t\tif (this.readOnly || this.disabled || state[blockKey]) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst ret = grid.doChangeValue(cell.col, cell.row, toggleValue);\r\n\t\t\t\tif (ret) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst onChange = () => {\r\n\t\t\t\t\t\t// checkbox animation\r\n\t\t\t\t\t\tanimate(200, (point) => {\r\n\t\t\t\t\t\t\tif (point === 1) {\r\n\t\t\t\t\t\t\t\tdelete state[key];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tstate[key] = {\r\n\t\t\t\t\t\t\t\t\telapsed: point,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tgrid.invalidateCell(cell.col, cell.row);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (isPromise(ret)) {\r\n\t\t\t\t\t\tstate[blockKey] = true;\r\n\t\t\t\t\t\tret.then(() => {\r\n\t\t\t\t\t\t\tdelete state[blockKey];\r\n\t\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tonChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn [\r\n\t\t\t\t...bindCellClickAction(grid, col, util, {\r\n\t\t\t\t\taction,\r\n\t\t\t\t\tmouseOver: (e) => {\r\n\t\t\t\t\t\tif (this.disabled) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstate.mouseActiveCell = {\r\n\t\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmouseOut: (e) => {\r\n\t\t\t\t\t\tdelete state.mouseActiveCell;\r\n\t\t\t\t\t\tgrid.invalidateCell(e.col, e.row);\r\n\t\t\t\t\t},\r\n\t\t\t\t}),\r\n\t\t\t\t...bindCellKeyAction(grid, col, util, {\r\n\t\t\t\t\taction: (e) => {\r\n\t\t\t\t\t\tconst selrange = grid.selection.range;\r\n\t\t\t\t\t\tconst col = grid.selection.select.col;\r\n\t\t\t\t\t\tfor (let row = selrange.start.row; row <= selrange.end.row; row++) {\r\n\t\t\t\t\t\t\tif (!util.isTarget(col, row)) {\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taction({\r\n\t\t\t\t\t\t\t\tcol,\r\n\t\t\t\t\t\t\t\trow,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tacceptKeys: [KEY_ENTER, KEY_SPACE],\r\n\t\t\t\t})\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckEditor;\r\n}","'use strict';\r\n{\r\n\t\r\n\tconst BaseAction = require('./BaseAction');\r\n\tclass Editor extends BaseAction {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._readOnly = option.readOnly;\r\n\t\t}\r\n\t\tget readOnly() {\r\n\t\t\treturn this._readOnly;\r\n\t\t}\r\n\t\tset readOnly(readOnly) {\r\n\t\t\tthis._readOnly = !!readOnly;\r\n\t\t\tthis.onChangeReadOnlyInternal();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Editor(this);\r\n\t\t}\r\n\t\tonChangeReadOnlyInternal() {}\r\n\t}\r\n\tmodule.exports = Editor;\r\n}","'use strict';\r\n\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nconst InlineInputElement = require('./internal/InlineInputElement');\r\nconst {INLINE_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nfunction doChangeValue(grid) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.doChangeValue();\r\n\t}\r\n}\r\n\r\n\r\nclass InlineInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\tdoChangeValue(grid);\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tInlineInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputEditor;","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\nconst {normalize} = require('../../internal/menu-items');\r\n\t\r\nconst Editor = require('./Editor');\r\nconst {EVENT_TYPE: {\r\n\tSELECTED_CELL,\r\n\tCLICK_CELL,\r\n\tKEYDOWN,\r\n\tSCROLL,\r\n\tMOUSEOVER_CELL,\r\n\tMOUSEOUT_CELL,\r\n\tMOUSEMOVE_CELL,\r\n}} = require('../../core/DrawGrid');\r\nconst InlineMenuElement = require('./internal/InlineMenuElement');\r\nconst {INLINE_MENU_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\t\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachMenu(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new InlineMenuElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachMenu(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_F2 = 113;\r\n\r\nclass InlineMenuEditor extends Editor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._options = normalize(option.options);\r\n\t}\r\n\tdispose() {\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget options() {\r\n\t\treturn this._options;\r\n\t}\r\n\tset options(options) {\r\n\t\tthis._options = normalize(options);\r\n\t}\r\n\tclone() {\r\n\t\treturn new InlineMenuEditor(this);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachMenu(true);\r\n\t}\r\n\tbindGridEvent(grid, col, util) {\r\n\t\tconst open = (cell) => {\r\n\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\t\tattachMenu(grid, cell, this, value);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\treturn [\r\n\t\t\tgrid.listen(CLICK_CELL, (cell) => {\r\n\t\t\t\tif (!util.isTarget(cell.col, cell.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: cell.col,\r\n\t\t\t\t\trow: cell.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (keyCode !== KEY_F2 && keyCode !== KEY_ENTER) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\topen({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\t\tdetachMenu();\r\n\t\t\t}),\r\n\t\t\tgrid.listen(SCROLL, () => {\r\n\t\t\t\tdetachMenu(true);\r\n\t\t\t}),\r\n\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\tif (this.readOnly || this.disabled) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuEditor;","'use strict';\r\nconst {obj: {setReadonly}} = require('../../internal/utils');\r\n\t\r\nconst SmallDialogInputElement = require('./internal/SmallDialogInputElement');\r\nconst {SMALL_DIALOG_INPUT_EDITOR_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nlet globalElement = null;\r\nlet bindGridCount = 0;\r\nfunction attachInput(grid, cell, editor, value) {\r\n\tif (!grid[_]) {\r\n\t\tsetReadonly(grid, _, {});\r\n\t}\r\n\tif (!globalElement) {\r\n\t\tglobalElement = new SmallDialogInputElement();\r\n\t}\r\n\tconst state = grid[_];\r\n\tif (!state.element) {\r\n\t\tstate.element = globalElement;\r\n\t\tbindGridCount++;\r\n\t\tgrid.addDisposable({\r\n\t\t\tdispose() {\r\n\t\t\t\tbindGridCount--;\r\n\t\t\t\tif (!bindGridCount) {\r\n\t\t\t\t\tglobalElement.dispose();\r\n\t\t\t\t\tglobalElement = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tglobalElement.attach(grid, editor, cell.col, cell.row, value);\r\n}\r\nfunction detachInput(gridFocus) {\r\n\tif (globalElement) {\r\n\t\tglobalElement.detach(gridFocus);\r\n\t}\r\n}\r\nconst BaseInputEditor = require('./BaseInputEditor');\r\nclass SmallDialogInputEditor extends BaseInputEditor {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._helperText = option.helperText;\r\n\t\tthis._inputValidator = option.inputValidator;\r\n\t\tthis._validator = option.validator;\r\n\t\tthis._classList = option.classList;\r\n\t\tthis._type = option.type;\r\n\t}\r\n\tdispose() {\r\n\t\tthis._inputDialogManager.dispose();\r\n\t\tthis._inputDialogManager = null;\r\n\t}\r\n\tget classList() {\r\n\t\treturn this._classList && (Array.isArray(this._classList) ? this._classList : [this._classList]);\r\n\t}\r\n\tset classList(classList) {\r\n\t\tthis._classList = classList;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tset type(type) {\r\n\t\tthis._type = type;\r\n\t}\r\n\tget helperText() {\r\n\t\treturn this._helperText;\r\n\t}\r\n\tget inputValidator() {\r\n\t\treturn this._inputValidator;\r\n\t}\r\n\tget validator() {\r\n\t\treturn this._validator;\r\n\t}\r\n\tclone() {\r\n\t\treturn new SmallDialogInputEditor(this);\r\n\t}\r\n\tonInputCellInternal(grid, cell, inputValue) {\r\n\t\tattachInput(grid, cell, this, inputValue);\r\n\t}\r\n\tonOpenCellInternal(grid, cell) {\r\n\t\tgrid.doGetCellValue(cell.col, cell.row, (value) => {\r\n\t\t\tattachInput(grid, cell, this, value);\r\n\t\t});\r\n\t}\r\n\tonChangeSelectCellInternal(grid, cell, selected) {\r\n\t\t// cancel input\r\n\t\tdetachInput();\r\n\t}\r\n\tonGridScrollInternal(grid) {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeDisabledInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonChangeReadOnlyInternal() {\r\n\t\t// cancel input\r\n\t\tdetachInput(true);\r\n\t}\r\n\tonSetInputAttrsInternal(grid, cell, input) {\r\n\t\tSmallDialogInputElement.setInputAttrs(this, grid, input);\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputEditor;","'use strict';\r\n{\r\n\t\r\n\tconst {isPromise, event: {cancel}} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tKEYDOWN,\r\n\t}} = require('../../core/DrawGrid');\r\n\tconst KEY_ENTER = 13;\r\n\tfunction bindCellClickAction(grid, col, util, {\r\n\t\taction,\r\n\t\tmouseOver,\r\n\t\tmouseOut\r\n\t}) {\r\n\t\treturn [\r\n\t\t\t// click\r\n\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\trow: e.row\r\n\t\t\t\t});\r\n\t\t\t}),\r\n\t\t\t// mouse move\r\n\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(e.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOver) {\r\n\t\t\t\t\tif (!mouseOver({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t})) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t}),\r\n\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\tif (!util.isTarget(e.col, e.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mouseOut) {\r\n\t\t\t\t\tmouseOut({\r\n\t\t\t\t\t\tcol: e.col,\r\n\t\t\t\t\t\trow: e.row\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t}),\r\n\t\t];\r\n\t}\r\n\tfunction bindCellKeyAction(grid, col, util, {action, acceptKeys = []}) {\r\n\t\tacceptKeys = [...acceptKeys, KEY_ENTER];\r\n\t\treturn [\r\n\t\t\t// enter key down\r\n\t\t\tgrid.listen(KEYDOWN, (keyCode, e) => {\r\n\t\t\t\tif (acceptKeys.indexOf(keyCode) === -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst sel = grid.selection.select;\r\n\t\t\t\tif (!util.isTarget(sel.col, sel.row)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (isPromise(grid.getRowRecord(sel.row))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taction({\r\n\t\t\t\t\tcol: sel.col,\r\n\t\t\t\t\trow: sel.row\r\n\t\t\t\t});\r\n\t\t\t\tcancel(e);\r\n\t\t\t}),\r\n\r\n\t\t];\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tbindCellClickAction,\r\n\t\tbindCellKeyAction,\r\n\t};\r\n}","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\nconst KEY_ENTER = 13;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-input';\r\n\r\nfunction createInputElement() {\r\n\trequire('./InlineInputElement.css');\r\n\treturn createElement('input', {classList: CLASSNAME});\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {classList, type} = editor;\r\n\tif (classList) {\r\n\t\tinput.classList.add(...classList);\r\n\t}\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass InlineInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._input = createInputElement();\r\n\t\tthis._bindInputEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst input = this._input;\r\n\t\tconst handler = this._handler;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tinput.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tinput.style.top = rect.top.toFixed() + 'px';\r\n\t\tinput.style.left = rect.left.toFixed() + 'px';\r\n\t\tinput.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(input);\r\n\r\n\t\tsetInputAttrs(editor, grid, input);\r\n\t\tinput.value = value;\r\n\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\r\n\t\tconst focus = () => {\r\n\t\t\tinput.focus();\r\n\r\n\t\t\tconst end = input.value.length;\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t\t}\r\n\t\t\tif (document.selection) {\r\n\t\t\t\tconst range = input.createTextRange();\r\n\t\t\t\trange.collapse();\r\n\t\t\t\trange.moveEnd('character', end);\r\n\t\t\t\trange.moveStart('character', end);\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t};\r\n\t\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\tfocus();\r\n\t\t});\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst input = this._input;\r\n\t\t\tthis._handler.tryWithOffEvents(input, 'blur', () => {\r\n\t\t\t\tinput.parentElement.removeChild(input);\r\n\t\t\t});\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\tdoChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\tconst {grid, col, row} = this._activeData;\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst input = this._input;\r\n\t\tif (!input || !input.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindInputEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(input, 'click', stopPropagationOnly);\r\n\t\thandler.on(input, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(input, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(input, 'dblclick', stopPropagationOnly);\r\n\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (getKeyCode(e) === KEY_ENTER) {\r\n\t\t\t\tif (!this._isActive()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst {grid} = this._activeData;\r\n\r\n\t\t\t\tthis.doChangeValue();\r\n\t\t\t\tif (grid) {\r\n\t\t\t\t\tgrid.focus();\r\n\t\t\t\t}\r\n\t\t\t\tthis.detach();\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\thandler.on(input, 'blur', (e) => {\r\n\t\t\tthis.doChangeValue();\r\n\t\t\tthis.detach();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineInputElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./InlineMenuElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tisDef,\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t}\r\n} = require('../../../internal/utils');\r\n\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n\tappendHtml,\r\n\tempty,\r\n\tdisableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n} = require('../../../internal/dom');\r\n\t\r\nconst KEY_TAB = 9;\r\nconst KEY_ENTER = 13;\r\nconst KEY_UP = 38;\r\nconst KEY_DOWN = 40;\r\nconst KEY_ESC = 27;\r\n\r\nconst CLASSNAME = 'cheetah-grid__inline-menu';\r\nconst ITEM_CLASSNAME = CLASSNAME + '__menu-item';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\nconst EMPTY_ITEM_CLASSNAME = ITEM_CLASSNAME + '--empty';\r\n\r\nfunction findItemParents(target) {\r\n\tlet el = target;\r\n\twhile (!el.classList.contains(ITEM_CLASSNAME)) {\r\n\t\tel = el.parentElement;\r\n\t\tif (!el || el.classList.contains(CLASSNAME)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\treturn el;\r\n}\r\n\r\nfunction createMenuElement() {\r\n\trequire('./InlineMenuElement.css');\r\n\treturn createElement('ul', {classList: CLASSNAME});\r\n}\r\nfunction attachElement(element, rect, menu) {\r\n\tmenu.style.top = rect.top.toFixed() + 'px';\r\n\tmenu.style.left = rect.left.toFixed() + 'px';\r\n\tmenu.style.width = rect.width.toFixed() + 'px';\r\n\tmenu.style['line-height'] = rect.height.toFixed() + 'px';\r\n\telement.appendChild(menu);\r\n}\r\n\r\nfunction optionToLi({classList, caption, value, html}, index) {\r\n\tconst item = createElement('li', {classList: ITEM_CLASSNAME});\r\n\titem.tabIndex = 0;\r\n\titem.dataset.valueindex = index;\r\n\tif (classList) {\r\n\t\titem.classList.add(...(Array.isArray(classList) ? classList : [classList]));\r\n\t}\r\n\r\n\tif (caption) {\r\n\t\tconst span = createElement('span', {text: caption});\r\n\t\titem.appendChild(span);\r\n\t} else if (html) {\r\n\t\tappendHtml(item, html);\r\n\t}\r\n\r\n\tif (value === '' || !isDef(value)) {\r\n\t\titem.classList.add(EMPTY_ITEM_CLASSNAME);\r\n\t}\r\n\r\n\treturn item;\r\n}\r\n\r\nfunction openMenu(grid, editor, col, row, value, menu) {\r\n\tconst {options, classList} = editor;\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tempty(menu);\r\n\tmenu.style.font = grid.font || '16px sans-serif';\r\n\tlet emptyItemEl = null;\r\n\tlet valueItemEl = null;\r\n\t\t\r\n\toptions.forEach((option, i) => {\r\n\t\tconst item = optionToLi(option, i);\r\n\t\tmenu.appendChild(item);\r\n\t\tif (option.value === value) {\r\n\t\t\tvalueItemEl = item;\r\n\t\t\titem.dataset.select = true;\r\n\t\t}\r\n\t\tif (item.classList.contains(EMPTY_ITEM_CLASSNAME)) {\r\n\t\t\temptyItemEl = item;\r\n\t\t}\r\n\t});\r\n\tconst focusEl = valueItemEl || emptyItemEl || menu.children[0];\r\n\tif (classList) {\r\n\t\tmenu.classList.add(...classList);\r\n\t}\r\n\tconst children = Array.prototype.slice.call(menu.children, 0);\r\n\tconst focusIndex = children.indexOf(focusEl);\r\n\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t// Cover the right line\r\n\trect.width++;\r\n\r\n\t// append for calculation\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Make the selection item at the middle\r\n\tlet offset = 0;\r\n\tlet allHeight = 0;\r\n\tfor (let i = 0; i < children.length; i++) {\r\n\t\tconst offsetHeight = children[i].offsetHeight;\r\n\t\tif (i < focusIndex) {\r\n\t\t\toffset += offsetHeight;\r\n\t\t}\r\n\t\tallHeight += offsetHeight;\r\n\t}\r\n\trect.offsetTop(-offset);\r\n\tmenu.style['transform-origin'] = `center ${offset + Math.ceil(children[focusIndex].offsetHeight / 2)}px 0px`;\r\n\tattachElement(element, rect, menu);\r\n\r\n\t// Control not to overflow the screen range\r\n\tconst menuClientRect = menu.getBoundingClientRect();\r\n\tconst scaleDiff = ((allHeight - menuClientRect.height) / 2);\r\n\tconst orgMenuTop = menuClientRect.top - scaleDiff;\r\n\tlet menuTop = orgMenuTop;\r\n\tconst menuBottom = menuTop + allHeight;\r\n\tconst winBottom = window.innerHeight;\r\n\tconst winMargin = 20;\r\n\tif (menuBottom > (winBottom - winMargin)) {\r\n\t\tconst diff = menuBottom - winBottom + winMargin;\r\n\t\tmenuTop -= diff;\r\n\t}\r\n\tif (menuTop < 0/*winTop*/ + winMargin) {\r\n\t\tmenuTop = winMargin;\r\n\t}\r\n\tif (menuTop !== orgMenuTop) {\r\n\t\trect.offsetTop(-(orgMenuTop - menuTop));\r\n\t\t// re update\r\n\t\tattachElement(element, rect, menu);\r\n\t}\r\n\t\t\r\n\tif (focusEl) {\r\n\t\tfocusEl.focus();\r\n\t}\r\n\tmenu.classList.remove(HIDDEN_CLASSNAME);\r\n\tmenu.classList.add(SHOWN_CLASSNAME);\r\n}\r\n\r\nfunction closeMenu(grid, col, row, menu) {\r\n\tmenu.classList.remove(SHOWN_CLASSNAME);\r\n\tmenu.classList.add(HIDDEN_CLASSNAME);\r\n\tdisableFocus(menu);\r\n}\r\n\r\nclass InlineMenuElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._menu = createMenuElement();\r\n\t\tthis._bindMenuEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst menu = this._menu;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._menu = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (menu.parentElement) {\r\n\t\t\tmenu.parentElement.removeChild(menu);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tconst {classList} = this._beforePropEditor;\r\n\t\t\tif (classList) {\r\n\t\t\t\tmenu.classList.remove(...classList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\topenMenu(grid, editor, col, row, value, menu);\r\n\t\tthis._activeData = {grid, col, row, editor};\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\tconst menu = this._menu;\r\n\t\t\tcloseMenu(grid, col, row, menu);\r\n\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t}\r\n\t_doChangeValue(valueindex) {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tconst {value} = editor.options[valueindex];\r\n\t\tgrid.doChangeValue(col, row, () => value);\r\n\t}\r\n\t_isActive() {\r\n\t\tconst menu = this._menu;\r\n\t\tif (!menu || !menu.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindMenuEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst menu = this._menu;\r\n\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\t\r\n\t\thandler.on(menu, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(menu, 'touchstart', stopPropagationOnly);\r\n\t\thandler.on(menu, 'dblclick', stopPropagationOnly);\r\n\r\n\t\thandler.on(menu, 'click', (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\tthis._doChangeValue(item.dataset.valueindex);\r\n\t\t\tthis.detach(true);\r\n\t\t});\r\n\t\thandler.on(menu, 'keydown', (e) => {\r\n\t\t\tconst item = findItemParents(e.target);\r\n\t\t\tif (!item) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst valueindex = item.dataset.valueindex;\r\n\t\t\t\tthis._doChangeValue(valueindex);\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\t\tconst n = findPrevSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\t\tconst n = findNextSiblingFocusable(item);\r\n\t\t\t\tif (n) {\r\n\t\t\t\t\tn.focus();\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t}\r\n\t\t\t} else if (keyCode === KEY_TAB) {\r\n\t\t\t\tif (!e.shiftKey) {\r\n\t\t\t\t\tif (!findNextSiblingFocusable(item)) {\r\n\t\t\t\t\t\tlet n = menu.querySelector('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findNextSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!findPrevSiblingFocusable(item)) {\r\n\t\t\t\t\t\tconst items = menu.querySelectorAll('.' + ITEM_CLASSNAME);\r\n\t\t\t\t\t\tlet n = items[items.length - 1];\r\n\t\t\t\t\t\tif (!isFocusable(n)) {\r\n\t\t\t\t\t\t\tn = findPrevSiblingFocusable(n);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (n) {\r\n\t\t\t\t\t\t\tn.focus();\r\n\t\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineMenuElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./SmallDialogInputElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst {\r\n\tevent: {\r\n\t\tgetKeyCode,\r\n\t\tcancel: cancelEvent,\r\n\t},\r\n\tthen,\r\n} = require('../../../internal/utils');\r\n\t\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__small-dialog-input';\r\nconst INPUT_CLASSNAME = CLASSNAME + '__input';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nconst KEY_ENTER = 13;\r\nconst KEY_ESC = 27;\r\n\r\nfunction _focus(input, handler) {\r\n\tconst focus = () => {\r\n\t\tinput.focus();\r\n\r\n\t\tconst end = input.value.length;\r\n\t\ttry {\r\n\t\t\tif (typeof (input.selectionStart) !== 'undefined') {\r\n\t\t\t\tinput.selectionStart = end;\r\n\t\t\t\tinput.selectionEnd = end;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t//ignore\r\n\t\t}\r\n\t\tif (document.selection) {\r\n\t\t\tconst range = input.createTextRange();\r\n\t\t\trange.collapse();\r\n\t\t\trange.moveEnd('character', end);\r\n\t\t\trange.moveStart('character', end);\r\n\t\t\trange.select();\r\n\t\t}\r\n\t};\r\n\thandler.tryWithOffEvents(input, 'blur', () => {\r\n\t\tfocus();\r\n\t});\r\n}\r\n\r\nfunction createDialogElement() {\r\n\trequire('./SmallDialogInputElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst input = createElement('input', {classList: INPUT_CLASSNAME});\r\n\tinput.readonly = true;\r\n\tinput.tabIndex = -1;\r\n\telement.appendChild(input);\r\n\treturn element;\r\n}\r\n\r\nfunction bindProps(grid, dialog, input, editor) {\r\n\tconst {classList, helperText} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.add(...classList);\r\n\t}\r\n\tif (helperText && typeof helperText !== 'function') {\r\n\t\tdialog.dataset.helperText = helperText;\r\n\t}\r\n\tsetInputAttrs(editor, grid, input);\r\n}\r\n\r\nfunction unbindProps(grid, dialog, input, editor) {\r\n\tconst {classList} = editor;\r\n\tif (classList) {\r\n\t\tdialog.classList.remove(...classList);\r\n\t}\r\n\tdelete dialog.dataset.helperText;\r\n\tinput.type = '';\r\n}\r\n\r\nfunction setInputAttrs(editor, grid, input) {\r\n\tconst {type} = editor;\r\n\tinput.type = type || '';\r\n}\r\n\r\nclass SmallDialogInputElement {\r\n\tstatic setInputAttrs(...args) {\r\n\t\tsetInputAttrs(...args);\r\n\t}\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tthis._dialog = createDialogElement();\r\n\t\tthis._input = this._dialog.querySelector('.' + INPUT_CLASSNAME);\r\n\t\tthis._bindDialogEvents();\r\n\t}\r\n\tdispose() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._dialog = null;\r\n\t\tthis._input = null;\r\n\t\tthis._beforePropEditor = null;\r\n\t\tif (dialog.parentElement) {\r\n\t\t\tdialog.parentElement.removeChild(dialog);\r\n\t\t}\r\n\t}\r\n\tattach(grid, editor, col, row, value) {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\r\n\t\tif (this._beforePropEditor) {\r\n\t\t\tunbindProps(grid, dialog, input, this._beforePropEditor);\r\n\t\t}\r\n\r\n\t\tdelete dialog.dataset.errorMessage;\r\n\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = false;\r\n\t\tinput.tabIndex = 0;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\t\tdialog.style.top = rect.top.toFixed() + 'px';\r\n\t\tdialog.style.left = rect.left.toFixed() + 'px';\r\n\t\tdialog.style.width = rect.width.toFixed() + 'px';\r\n\t\tinput.style.height = rect.height.toFixed() + 'px';\r\n\t\telement.appendChild(dialog);\r\n\t\t\t\r\n\t\tinput.value = value;\r\n\t\tinput.style.font = grid.font || '16px sans-serif';\r\n\t\tconst activeData = {grid, col, row, editor};\r\n\t\tthis._onInputValue(input, activeData);\r\n\t\t_focus(input, handler);\r\n\t\tdialog.classList.add(SHOWN_CLASSNAME);\r\n\t\tdialog.classList.remove(HIDDEN_CLASSNAME);\r\n\t\tinput.readonly = true;\r\n\r\n\t\t\r\n\t\tbindProps(grid, dialog, input, editor);\r\n\r\n\t\tthis._activeData = activeData;\r\n\t\tthis._beforePropEditor = editor;\r\n\t}\r\n\tdetach(gridFocus) {\r\n\t\tif (this._isActive()) {\r\n\t\t\tconst dialog = this._dialog;\r\n\t\t\tconst input = this._input;\r\n\r\n\t\t\tdialog.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\tdialog.classList.add(HIDDEN_CLASSNAME);\r\n\t\t\tinput.readonly = false;\r\n\t\t\tinput.tabIndex = -1;\r\n\r\n\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\r\n\t\t\tgrid.invalidateCell(col, row);\r\n\t\t\tif (gridFocus) {\r\n\t\t\t\tgrid.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._activeData = null;\r\n\t\tthis._beforeValue = null;\r\n\t}\r\n\t_doChangeValue() {\r\n\t\tif (!this._isActive()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst input = this._input;\r\n\t\tconst {value} = input;\r\n\t\treturn then(this._validate(value), (res) => {\r\n\t\t\tif (res && value === input.value) {\r\n\t\t\t\tconst {grid, col, row} = this._activeData;\r\n\t\t\t\tgrid.doChangeValue(col, row, () => value);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\t_isActive() {\r\n\t\tconst dialog = this._dialog;\r\n\t\tif (!dialog || !dialog.parentElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this._activeData) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t_bindDialogEvents() {\r\n\t\tconst handler = this._handler;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst stopPropagationOnly = (e) => e.stopPropagation();// grid\r\n\t\thandler.on(dialog, 'click', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'dblclick', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'mousedown', stopPropagationOnly);\r\n\t\thandler.on(dialog, 'touchstart', stopPropagationOnly);\r\n\t\t\t\r\n\t\thandler.on(input, 'compositionstart', (e) => {\r\n\t\t\tinput.classList.add('composition');\r\n\t\t});\r\n\t\thandler.on(input, 'compositionend', (e) => {\r\n\t\t\tinput.classList.remove('composition');\r\n\t\t\tthis._onInputValue(input);\r\n\t\t});\r\n\t\tconst onKeyupAndPress = (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._onInputValue(input);\r\n\t\t};\r\n\t\thandler.on(input, 'keyup', onKeyupAndPress);\r\n\t\thandler.on(input, 'keypress', onKeyupAndPress);\r\n\t\thandler.on(input, 'keydown', (e) => {\r\n\t\t\tif (input.classList.contains('composition')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\tif (keyCode === KEY_ESC) {\r\n\t\t\t\tthis.detach(true);\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else if (keyCode === KEY_ENTER) {\r\n\t\t\t\tconst input = this._input;\r\n\t\t\t\tconst {value} = input;\r\n\t\t\t\tthen(this._doChangeValue(), (r) => {\r\n\t\t\t\t\tif (r && value === input.value) {\r\n\t\t\t\t\t\tthis.detach(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcancelEvent(e);\r\n\t\t\t} else {\r\n\t\t\t\tthis._onInputValue(input);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t_onInputValue(input, activeData) {\r\n\t\tconst before = this._beforeValue;\r\n\t\tconst {value} = input;\r\n\t\tif (before !== value) {\r\n\t\t\tthis._onInputValueChange(value, before, activeData);\r\n\t\t}\r\n\t\tthis._beforeValue = value;\r\n\t}\r\n\t_onInputValueChange(after, before, activeData) {\r\n\t\tactiveData = activeData || this._activeData;\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst {grid, col, row, editor} = activeData;\r\n\t\tif (typeof editor.helperText === 'function') {\r\n\t\t\tconst helperText = editor.helperText(after, {grid, col, row});\r\n\t\t\tif (helperText) {\r\n\t\t\t\tdialog.dataset.helperText = helperText;\r\n\t\t\t} else {\r\n\t\t\t\tdelete dialog.dataset.helperText;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ('errorMessage' in dialog.dataset) {\r\n\t\t\tthis._validate(after, true);\r\n\t\t}\r\n\t}\r\n\t_validate(value, inputOnly) {\r\n\t\tconst dialog = this._dialog;\r\n\t\tconst input = this._input;\r\n\t\tconst {grid, col, row, editor} = this._activeData;\r\n\t\tlet message = null;\r\n\t\tif (editor.inputValidator) {\r\n\t\t\tmessage = editor.inputValidator(value, {grid, col, row});\r\n\t\t}\r\n\t\treturn then(message, (message) => {\r\n\t\t\tif (!message && editor.validator && !inputOnly) {\r\n\t\t\t\tmessage = editor.validator(value, {grid, col, row});\r\n\t\t\t}\r\n\t\t\treturn then(message, (message) => {\r\n\t\t\t\tif (message && value === input.value) {\r\n\t\t\t\t\tdialog.dataset.errorMessage = message;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete dialog.dataset.errorMessage;\r\n\t\t\t\t}\r\n\t\t\t\treturn !message;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = SmallDialogInputElement;","'use strict';\r\n\r\nclass BaseMessage {\r\n\tconstructor(grid) {\r\n\t\tthis._grid = grid;\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detachMessageElement();\r\n\t\tif (this._messageElement) {\r\n\t\t\tthis._messageElement.dispose();\r\n\t\t}\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\t_getMessageElement() {\r\n\t\treturn this._messageElement || (this._messageElement = this.createMessageElementInternal());\r\n\t}\r\n\tcreateMessageElementInternal() {\r\n\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\r\n\t}\r\n\tattachMessageElement(col, row, message) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.attach(this._grid, col, row, message);\r\n\t}\r\n\tmoveMessageElement(col, row) {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement.move(this._grid, col, row);\r\n\t}\r\n\tdetachMessageElement() {\r\n\t\tconst messageElement = this._getMessageElement();\r\n\t\tmessageElement._detach();\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\t\tthis.drawCellMessageInternal(message, context, style, helper, info);\r\n\t}\r\n}\r\n\r\nmodule.exports = BaseMessage;","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst ErrorMessageElement = require('./internal/ErrorMessageElement');\r\n\r\nconst RED_A100 = '#ff8a80';\r\n// const RED_A400 = '#FF1744';\r\n\r\nclass ErrorMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new ErrorMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = RED_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessage;","'use strict';\r\n\r\nconst BaseMessage = require('./BaseMessage');\r\nconst MessageElement = require('./internal/MessageElement');\r\n\r\nconst Rect = require('../../internal/Rect');\r\n\r\nconst GREY_L2 = '#e0e0e0';\r\n// const GREY_L1 = '#bdbdbd';\r\n\t\r\nclass InfoMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new MessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = GREY_L2;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw i mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 2, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InfoMessage;","'use strict';\r\n\r\n\r\nconst {isPromise} = require('../../internal/utils');\r\nconst {\r\n\tSELECTED_CELL,\r\n\tSCROLL,\r\n\tCHANGED_VALUE\r\n} = require('../../list-grid/EVENT_TYPE');\r\nconst ErrorMessage = require('./ErrorMessage');\r\nconst WarningMessage = require('./WarningMessage');\r\nconst InfoMessage = require('./InfoMessage');\r\n\r\n\r\nclass MessageHandler {\r\n\tconstructor(grid, getMessage) {\r\n\t\tthis._grid = grid;\r\n\t\tthis._messageInstances = {};\r\n\t\tthis._bindGridEvent(grid, getMessage);\r\n\t}\r\n\tdispose() {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\tfor (const k in messageInstances) {\r\n\t\t\tmessageInstances[k].dispose();\r\n\t\t}\r\n\t\tthis._messageInstances = null;\r\n\t}\r\n\tdrawCellMessage(message, context, style, helper, info) {\r\n\r\n\t\tif (!message || isPromise(message)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tinstance.drawCellMessage(message, context, style, helper, info);\r\n\t}\r\n\t_attach(col, row, message) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tconst instance = this._getMessageInstanceOfMessage(message);\r\n\t\tif (info && info.instance !== instance) {\r\n\t\t\tinfo.instance.detachMessageElement();\r\n\t\t}\r\n\t\tinstance.attachMessageElement(col, row, this._toMessageText(message));\r\n\t\tthis._attachInfo = {col, row, instance};\r\n\t}\r\n\t_move(col, row) {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info || info.col !== col || info.row !== row) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.moveMessageElement(col, row);\r\n\t}\r\n\t_detach() {\r\n\t\tconst info = this._attachInfo;\r\n\t\tif (!info) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst {instance} = info;\r\n\t\tinstance.detachMessageElement();\r\n\t\tthis._attachInfo = null;\r\n\t}\r\n\t_bindGridEvent(grid, getMessage) {\r\n\t\tconst onSelectMessage = (sel) => {\r\n\t\t\tconst message = getMessage(sel.col, sel.row);\r\n\t\t\tif (!message || isPromise(message)) {\r\n\t\t\t\tthis._detach();\r\n\t\t\t} else {\r\n\t\t\t\tthis._attach(sel.col, sel.row, message);\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t\tgrid.listen(SELECTED_CELL, (e) => {\r\n\t\t\tif (!e.selected) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (e.before.col === e.col && e.before.row === e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t\tgrid.listen(SCROLL, () => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tthis._move(sel.col, sel.row);\r\n\t\t});\r\n\t\tgrid.listen(CHANGED_VALUE, (e) => {\r\n\t\t\tconst sel = grid.selection.select;\r\n\t\t\tif (sel.col !== e.col || sel.row !== e.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tonSelectMessage(e);\r\n\t\t});\r\n\t}\r\n\t_getMessageInstanceOfMessage(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t\t}\r\n\t\tconst type = ('' + message.type).toLowerCase();\r\n\t\tif (type === 'info') {\r\n\t\t\treturn this._createMessageInstance('info', InfoMessage);\r\n\t\t} else if (type === 'warning') {\r\n\t\t\treturn this._createMessageInstance('warning', WarningMessage);\r\n\t\t}\r\n\t\treturn this._createMessageInstance('error', ErrorMessage);\r\n\t}\r\n\t_toMessageText(message) {\r\n\t\tmessage = message || '';\r\n\t\tif (typeof message === 'string') {\r\n\t\t\treturn message;\r\n\t\t}\r\n\t\tif (message.message) {\r\n\t\t\treturn message.message;\r\n\t\t}\r\n\t\treturn '' + message;\r\n\t}\r\n\t_createMessageInstance(name, Message) {\r\n\t\tconst messageInstances = this._messageInstances;\r\n\t\treturn messageInstances[name] || (messageInstances[name] = new Message(this._grid));\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageHandler;","'use strict';\r\n\r\n\r\nconst Rect = require('../../internal/Rect');\r\nconst BaseMessage = require('./BaseMessage');\r\nconst WarningMessageElement = require('./internal/WarningMessageElement');\r\n\r\nconst DEEP_ORANGE_A100 = '#ff9e80';\r\n\r\nclass WarningMessage extends BaseMessage {\r\n\tcreateMessageElementInternal() {\r\n\t\treturn new WarningMessageElement();\r\n\t}\r\n\tdrawCellMessageInternal(message, context, style, helper, info) {\r\n\t\tconst {bgColor} = style;\r\n\r\n\t\tconst {selected} = context.getSelectState();\r\n\r\n\t\tconst rect = context.getRect();\r\n\r\n\t\thelper.drawBorderWithClip(context, (ctx) => {\r\n\t\t\tif (!selected) {\r\n\t\t\t\t// draw box\r\n\t\t\t\tctx.fillStyle = DEEP_ORANGE_A100;\r\n\t\t\t\tconst boxRect = rect.copy();\r\n\t\t\t\tboxRect.left = boxRect.right - 24;\r\n\t\t\t\tctx.fillRect(boxRect.left, boxRect.top, boxRect.width, boxRect.height - 1);\r\n\r\n\t\t\t\t// draw exclamation mark\r\n\t\t\t\tconst fillColor = bgColor;\r\n\t\t\t\tconst height = 20;\r\n\t\t\t\tconst width = height / 5;\r\n\t\t\t\tconst left = boxRect.left + (boxRect.width - width) / 2;\r\n\t\t\t\tconst top = boxRect.top + (boxRect.height - height) / 2;\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top, width, height / 5 * 3),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t\thelper.fillRectWithState(new Rect(left, top + height / 5 * 4, width, height / 5),\r\n\t\t\t\t\t\tcontext, {fillColor});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessage;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./ErrorMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__error-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass ErrorMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./ErrorMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = ErrorMessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./MessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst EventHandler = require('../../../internal/EventHandler');\r\nconst {\r\n\tcreateElement,\r\n} = require('../../../internal/dom');\r\n\r\nconst CLASSNAME = 'cheetah-grid__message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\nconst HIDDEN_CLASSNAME = CLASSNAME + '--hidden';\r\nconst SHOWN_CLASSNAME = CLASSNAME + '--shown';\r\n\r\nfunction createrootElement() {\r\n\trequire('./MessageElement.css');\r\n\tconst element = createElement('div', {classList: [CLASSNAME, HIDDEN_CLASSNAME]});\r\n\tconst message = createElement('span', {classList: [MESSAGE_CLASSNAME]});\r\n\telement.appendChild(message);\r\n\treturn element;\r\n}\r\n\r\n\r\nclass MessageElement {\r\n\tconstructor() {\r\n\t\tthis._handler = new EventHandler();\r\n\t\tconst rootElement = this._rootElement = createrootElement();\r\n\t\tthis._messageElement = rootElement.querySelector(`.${MESSAGE_CLASSNAME}`);\r\n\t}\r\n\tdispose() {\r\n\t\tthis.detach();\r\n\t\tthis._handler.dispose();\r\n\t\tthis._rootElement = null;\r\n\t\tthis._messageElement = null;\r\n\t}\r\n\tattach(grid, col, row, message) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst messageElement = this._messageElement;\r\n\r\n\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\r\n\t\t\tmessageElement.textContent = message;\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tmove(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (this._attachCell(grid, col, row)) {\r\n\r\n\t\t\trootElement.classList.add(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.remove(HIDDEN_CLASSNAME);\r\n\t\t} else {\r\n\t\t\tthis._detach();\r\n\t\t}\r\n\t}\r\n\tdetach() {\r\n\t\tthis._detach();\r\n\t}\r\n\t_detach() {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tif (rootElement.parentElement) {\r\n\t\t\trootElement.parentElement.removeChild(rootElement);\r\n\t\t\trootElement.classList.remove(SHOWN_CLASSNAME);\r\n\t\t\trootElement.classList.add(HIDDEN_CLASSNAME);\r\n\t\t}\r\n\t}\r\n\t_attachCell(grid, col, row) {\r\n\t\tconst rootElement = this._rootElement;\r\n\t\tconst {element, rect} = grid.getAttachCellArea(col, row);\r\n\r\n\t\tconst {bottom: top, left, width} = rect;\r\n\t\tconst {frozenRowCount, frozenColCount} = grid;\r\n\t\tif (row >= frozenRowCount && frozenRowCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(col, frozenRowCount - 1);\r\n\t\t\tif (top < frozenRect.bottom) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (top < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (col >= frozenColCount && frozenColCount > 0) {\r\n\t\t\tconst {rect: frozenRect} = grid.getAttachCellArea(frozenColCount - 1, row);\r\n\t\t\tif (left < frozenRect.right) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (left < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst {offsetHeight, offsetWidth} = element;\r\n\t\tif (offsetHeight < top) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (offsetWidth < left) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\trootElement.style.top = top.toFixed() + 'px';\r\n\t\trootElement.style.left = left.toFixed() + 'px';\r\n\t\trootElement.style.width = width.toFixed() + 'px';\r\n\t\tif (rootElement.parentElement !== element) {\r\n\t\t\telement.appendChild(rootElement);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nmodule.exports = MessageElement;","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js?minimize!./WarningMessageElement.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\nconst MessageElement = require('./MessageElement');\r\n\r\nconst CLASSNAME = 'cheetah-grid__warning-message-element';\r\nconst MESSAGE_CLASSNAME = CLASSNAME + '__message';\r\n\r\n\r\nclass WarningMessageElement extends MessageElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\trequire('./WarningMessageElement.css');\r\n\t\tthis._rootElement.classList.add(CLASSNAME);\r\n\t\tthis._messageElement.classList.add(MESSAGE_CLASSNAME);\r\n\t}\r\n}\r\n\r\nmodule.exports = WarningMessageElement;","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\tconst NumberStyle = require('./style/NumberStyle');\r\n\tconst CheckStyle = require('./style/CheckStyle');\r\n\tconst ButtonStyle = require('./style/ButtonStyle');\r\n\tconst ImageStyle = require('./style/ImageStyle');\r\n\tconst IconStyle = require('./style/IconStyle');\r\n\tconst PercentCompleteBarStyle = require('./style/PercentCompleteBarStyle');\r\n\r\n\t/**\r\n\t * column styles\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.style\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst style = {\r\n\t\tget EVENT_TYPE() {\r\n\t\t\treturn BaseStyle.EVENT_TYPE;\r\n\t\t},\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tget NumberStyle() {\r\n\t\t\treturn NumberStyle;\r\n\t\t},\r\n\t\tget CheckStyle() {\r\n\t\t\treturn CheckStyle;\r\n\t\t},\r\n\t\tget ButtonStyle() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t},\r\n\t\tget ImageStyle() {\r\n\t\t\treturn ImageStyle;\r\n\t\t},\r\n\t\tget IconStyle() {\r\n\t\t\treturn IconStyle;\r\n\t\t},\r\n\t\tget PercentCompleteBarStyle() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t},\r\n\t\tof(columnStyle, record, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(record), record, StyleClass);\r\n\t\t\t\t} else if (record && columnStyle in record) {\r\n\t\t\t\t\treturn style.of(record[columnStyle], record, StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\nconst BaseStyle = require('./BaseStyle');\r\nlet defaultStyle;\r\nfunction adj(style) {\r\n\tconst {textAlign = 'center'} = style;\r\n\tstyle.textAlign = textAlign;\r\n\treturn style;\r\n}\r\nconst DEFAULT_BRANCH_COLORS = (name, index) => {\r\n\tswitch (index % 3) {\r\n\tcase 0:\r\n\t\treturn '#979797';\r\n\tcase 1:\r\n\t\treturn '#008fb5';\r\n\tcase 2:\r\n\t\treturn '#f1c109';\r\n\tdefault:\r\n\t}\r\n\treturn '#979797';\r\n};\r\nclass BranchGraphStyle extends BaseStyle {\r\n\tstatic get DEFAULT() {\r\n\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BranchGraphStyle());\r\n\t}\r\n\tconstructor(style = {}) {\r\n\t\tsuper(adj(style));\r\n\t\tthis._branchColors = style.branchColors || DEFAULT_BRANCH_COLORS;\r\n\t\tthis._margin = style.margin || 4;\r\n\t\tthis._circleSize = style.circleSize || 16;\r\n\t\tthis._branchLineWidth = style.branchLineWidth || 4;\r\n\t\tthis._mergeStyle = style.mergeStyle === 'straight' ? 'straight' : 'bezier';\r\n\t}\r\n\tget branchColors() {\r\n\t\treturn this._branchColors;\r\n\t}\r\n\tset branchColors(branchColors) {\r\n\t\tthis._branchColors = branchColors;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget margin() {\r\n\t\treturn this._margin;\r\n\t}\r\n\tset margin(margin) {\r\n\t\tthis._margin = margin;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget circleSize() {\r\n\t\treturn this._circleSize;\r\n\t}\r\n\tset circleSize(circleSize) {\r\n\t\tthis._circleSize = circleSize;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget branchLineWidth() {\r\n\t\treturn this._branchLineWidth;\r\n\t}\r\n\tset branchLineWidth(branchLineWidth) {\r\n\t\tthis._branchLineWidth = branchLineWidth;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tget mergeStyle() {\r\n\t\treturn this._mergeStyle;\r\n\t}\r\n\tset mergeStyle(mergeStyle) {\r\n\t\tthis._mergeStyle = mergeStyle;\r\n\t\tthis.doChangeStyle();\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphStyle(this);\r\n\t}\r\n}\r\nmodule.exports = BranchGraphStyle;","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass ButtonStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ButtonStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tbuttonBgColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t}\r\n\t\tget buttonBgColor() {\r\n\t\t\treturn this._buttonBgColor;\r\n\t\t}\r\n\t\tset buttonBgColor(buttonBgColor) {\r\n\t\t\tthis._buttonBgColor = buttonBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = ButtonStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass CheckStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new CheckStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tconst {\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tborderColor,\r\n\t\t\t} = style;\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t}\r\n\t\tget uncheckBgColor() {\r\n\t\t\treturn this._uncheckBgColor;\r\n\t\t}\r\n\t\tset uncheckBgColor(uncheckBgColor) {\r\n\t\t\tthis._uncheckBgColor = uncheckBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget checkBgColor() {\r\n\t\t\treturn this._checkBgColor;\r\n\t\t}\r\n\t\tset checkBgColor(checkBgColor) {\r\n\t\t\tthis._checkBgColor = checkBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget borderColor() {\r\n\t\t\treturn this._borderColor;\r\n\t\t}\r\n\t\tset borderColor(borderColor) {\r\n\t\t\tthis._borderColor = borderColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = CheckStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass IconStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new IconStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = IconStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'center'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tclass ImageStyle extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new ImageStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tthis._imageSizing = style.imageSizing;\r\n\t\t\tthis._margin = style.margin || 4;\r\n\t\t}\r\n\t\tget imageSizing() {\r\n\t\t\treturn this._imageSizing;\r\n\t\t}\r\n\t\tset imageSizing(imageSizing) {\r\n\t\t\tthis._imageSizing = imageSizing;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget margin() {\r\n\t\t\treturn this._margin;\r\n\t\t}\r\n\t\tset margin(margin) {\r\n\t\t\tthis._margin = margin;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textBaseline = 'top'} = style;\r\n\t\tstyle.textBaseline = textBaseline;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass MultilineTextStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new MultilineTextStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t\tthis._lineHeight = style.lineHeight || '1em';\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MultilineTextStyle(this);\r\n\t\t}\r\n\t\tget lineHeight() {\r\n\t\t\treturn this._lineHeight;\r\n\t\t}\r\n\t\tset lineHeight(lineHeight) {\r\n\t\t\tthis._lineHeight = lineHeight;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = MultilineTextStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\r\n\tfunction adj(style) {\r\n\t\tconst {textAlign = 'right'} = style;\r\n\t\tstyle.textAlign = textAlign;\r\n\t\treturn style;\r\n\t}\r\n\tlet defaultStyle;\r\n\tclass NumberStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new NumberStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(adj(style));\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberStyle(this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = NumberStyle;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('./Style');\r\n\tlet defaultStyle;\r\n\tconst DEFAULT_BAR_COLOR = (num) => {\r\n\t\tif (num > 80) {\r\n\t\t\treturn '#20a8d8';\r\n\t\t}\r\n\t\tif (num > 50) {\r\n\t\t\treturn '#4dbd74';\r\n\t\t}\r\n\t\tif (num > 20) {\r\n\t\t\treturn '#ffc107';\r\n\t\t}\r\n\t\treturn '#f86c6b';\r\n\t};\r\n\tclass PercentCompleteBarStyle extends Style {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new PercentCompleteBarStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._barColor = style.barColor || DEFAULT_BAR_COLOR;\r\n\t\t\tthis._barBgColor = style.barBgColor || '#f0f3f5';\r\n\t\t\tthis._barHeight = style.barHeight || 3;\r\n\t\t}\r\n\t\tget barColor() {\r\n\t\t\treturn this._barColor;\r\n\t\t}\r\n\t\tset barColor(barColor) {\r\n\t\t\tthis._barColor = barColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barBgColor() {\r\n\t\t\treturn this._barBgColor;\r\n\t\t}\r\n\t\tset barBgColor(barBgColor) {\r\n\t\t\tthis._barBgColor = barBgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget barHeight() {\r\n\t\t\treturn this._barHeight;\r\n\t\t}\r\n\t\tset barHeight(barHeight) {\r\n\t\t\tthis._barHeight = barHeight;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarStyle;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\r\n\tlet defaultStyle;\r\n\tclass StdBaseStyle extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new StdBaseStyle());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._textAlign = style.textAlign || 'left';\r\n\t\t\tthis._textBaseline = style.textBaseline || 'middle';\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new StdBaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = StdBaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst StdBaseStyle = require('./StdBaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends StdBaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t\tthis._font = style.font;\r\n\t\t\tthis._padding = style.padding;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this._font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis._font = font;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget padding() {\r\n\t\t\treturn this._padding;\r\n\t\t}\r\n\t\tset padding(padding) {\r\n\t\t\tthis._padding = padding;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./type/Column');\r\n\tconst NumberColumn = require('./type/NumberColumn');\r\n\tconst CheckColumn = require('./type/CheckColumn');\r\n\tconst ButtonColumn = require('./type/ButtonColumn');\r\n\tconst ImageColumn = require('./type/ImageColumn');\r\n\tconst PercentCompleteBarColumn = require('./type/PercentCompleteBarColumn');\r\n\tconst IconColumn = require('./type/IconColumn');\r\n\tconst BranchGraphColumn = require('./type/BranchGraphColumn');\r\n\tconst MenuColumn = require('./type/MenuColumn');\r\n\tconst MultilineTextColumn = require('./type/MultilineTextColumn');\r\n\r\n\t/**\r\n\t * column types\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.columns.type\r\n\t * @memberof cheetahGrid.columns\r\n\t */\r\n\tconst type = {\r\n\t\tTYPES: {\r\n\t\t\tDEFAULT: new Column(),\r\n\t\t\tNUMBER: new NumberColumn(),\r\n\t\t\tCHECK: new CheckColumn(),\r\n\t\t\tBUTTON: new ButtonColumn(),\r\n\t\t\tIMAGE: new ImageColumn(),\r\n\t\t\tMULTILINETEXT: new MultilineTextColumn(),\r\n\t\t},\r\n\t\tget Column() {\r\n\t\t\treturn Column;\r\n\t\t},\r\n\t\tget NumberColumn() {\r\n\t\t\treturn NumberColumn;\r\n\t\t},\r\n\t\tget CheckColumn() {\r\n\t\t\treturn CheckColumn;\r\n\t\t},\r\n\t\tget ButtonColumn() {\r\n\t\t\treturn ButtonColumn;\r\n\t\t},\r\n\t\tget ImageColumn() {\r\n\t\t\treturn ImageColumn;\r\n\t\t},\r\n\t\tget PercentCompleteBarColumn() {\r\n\t\t\treturn PercentCompleteBarColumn;\r\n\t\t},\r\n\t\tget IconColumn() {\r\n\t\t\treturn IconColumn;\r\n\t\t},\r\n\t\tget BranchGraphColumn() {\r\n\t\t\treturn BranchGraphColumn;\r\n\t\t},\r\n\t\tget MenuColumn() {\r\n\t\t\treturn MenuColumn;\r\n\t\t},\r\n\t\tget MultilineTextColumn() {\r\n\t\t\treturn MultilineTextColumn;\r\n\t\t},\r\n\t\tof(columnType) {\r\n\t\t\tif (!columnType) {\r\n\t\t\t\treturn type.TYPES.DEFAULT;\r\n\t\t\t} else if (typeof columnType === 'string') {\r\n\t\t\t\treturn type.TYPES[columnType.toUpperCase()] || type.of(null);\r\n\t\t\t} else {\r\n\t\t\t\treturn columnType;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {isPromise, isDef, obj: {setReadonly}} = require('../../internal/utils');\r\n\tconst animate = require('../../internal/animate');\r\n\tconst BaseStyle = require('../style/Style');\r\n\tconst {COLUMN_FADEIN_STATE_ID} = require('../../internal/symbolManager');\r\n\r\n\r\n\tfunction isFadeinWhenCallbackInPromise(column, grid) {\r\n\t\tif (isDef(column._fadeinWhenCallbackInPromise)) {\r\n\t\t\treturn column._fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\treturn !!grid.configure('fadeinWhenCallbackInPromise');\r\n\t}\r\n\r\n\tfunction getFadinState(grid) {\r\n\t\tif (!grid[COLUMN_FADEIN_STATE_ID]) {\r\n\t\t\tsetReadonly(grid, COLUMN_FADEIN_STATE_ID, {});\r\n\t\t}\r\n\t\treturn grid[COLUMN_FADEIN_STATE_ID];\r\n\t}\r\n\tfunction _generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\treturn (point) => {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\tif (point === 1) {\r\n\t\t\t\tdelete state[stateKey];\r\n\t\t\t} else {\r\n\t\t\t\tstate[stateKey] = {\r\n\t\t\t\t\topacity: point,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\tdrawInternal();\r\n\r\n\t\t\tconst cellState = state[stateKey];\r\n\t\t\tif (cellState) {\r\n\t\t\t\t//\r\n\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst fadinMgr = {\r\n\t\tanimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\t// fadein animation\r\n\t\t\tconst state = getFadinState(grid);\r\n\r\n\t\t\tconst activeFadeins = [\r\n\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase),\r\n\t\t\t];\r\n\t\t\tstate.activeFadeins = activeFadeins;\r\n\t\t\t\r\n\t\t\tanimate(500, (point) => {\r\n\t\t\t\tactiveFadeins.forEach((f) => f(point));\r\n\t\t\t\tif (point === 1) {\r\n\t\t\t\t\tdelete state.activeFadeins;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tmargeAnimate(grid, col, row, context, drawInternal, drawCellBase) {\r\n\t\t\tconst state = getFadinState(grid);\r\n\t\t\tif (state.activeFadeins) {\r\n\t\t\t\tstate.activeFadeins.push(\r\n\t\t\t\t\t\t_generateFadinPointAction(grid, col, row, context, drawInternal, drawCellBase)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdrawInternal();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t};\r\n\r\n\tclass BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\r\n\t\t\t//Promisecallback\r\n\t\t\tthis._fadeinWhenCallbackInPromise = option.fadeinWhenCallbackInPromise;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn BaseStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, getRecord, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\r\n\t\t\t//\r\n\t\t\tif (isPromise(cellValue)) {\r\n\t\t\t\tif (context.drawing) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tconst start = Date.now();\r\n\t\t\t\treturn cellValue.then((val) => {\r\n\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst time = Date.now() - start;\r\n\r\n\t\t\t\t\tconst drawInternal = () => {\r\n\t\t\t\t\t\tconst currentContext = context.toCurrentContext();\r\n\t\t\t\t\t\tconst drawRect = currentContext.getDrawRect();\r\n\t\t\t\t\t\tif (!drawRect) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\t\t\tthis.convertInternal(val),\r\n\t\t\t\t\t\t\t\tcurrentContext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\t\t\tinfo\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (!isFadeinWhenCallbackInPromise(this, grid)) {\r\n\t\t\t\t\t\tdrawInternal();//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst {col, row} = context;\r\n\t\t\t\t\t\tif (time < 80) {\r\n\t\t\t\t\t\t\t//80msPromiseCallback\r\n\t\t\t\t\t\t\tfadinMgr.margeAnimate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\tfadinMgr.animate(grid, col, row, context, drawInternal, drawCellBase);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tconst actStyle = styleContents.of(style, getRecord(), this.StyleClass);\r\n\t\t\t\tthis.drawInternal(\r\n\t\t\t\t\t\tthis.convertInternal(cellValue),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\tthis.drawMessageInternal(\r\n\t\t\t\t\t\tinfo.getMessage(),\r\n\t\t\t\t\t\tcontext,\r\n\t\t\t\t\t\tactStyle,\r\n\t\t\t\t\t\thelper,\r\n\t\t\t\t\t\tgrid,\r\n\t\t\t\t\t\tinfo\r\n\t\t\t\t);\r\n\t\t\t\t//\r\n\t\t\t\tconst {col, row} = context;\r\n\t\t\t\tconst stateKey = col + ':' + row;\r\n\t\t\t\tconst cellState = grid[COLUMN_FADEIN_STATE_ID] && grid[COLUMN_FADEIN_STATE_ID][stateKey];\r\n\t\t\t\tif (cellState) {\r\n\t\t\t\t\tconst ctx = context.getContext();\r\n\t\t\t\t\tctx.globalAlpha = 1 - cellState.opacity;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdrawCellBase();\r\n\t\t\t\t\t} finally {\r\n\t\t\t\t\t\tctx.globalAlpha = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn isDef(value) ? value : '';\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tdrawMessageInternal(message, context, style, helper, grid, info) {\r\n\t\t\tinfo.messageHandler.drawCellMessage(message, context, style, helper, info);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseColumn;\r\n}","'use strict';\r\nconst {isDef, getOrApply, isPromise, obj: {isObject}} = require('../../internal/utils');\r\nconst BranchGraphStyle = require('../style/BranchGraphStyle');\r\nconst BaseColumn = require('./BaseColumn');\r\nconst {BRANCH_GRAPH_COLUMN_STATE_ID: _} = require('../../internal/symbolManager');\r\n\r\nfunction getAllColumnData(grid, col, callback) {\r\n\tconst dataSource = grid.dataSource;\r\n\tlet field = grid.getField(col);\r\n\tif (isObject(field) && field.get && field.set) {\r\n\t\tfield = field.get;\r\n\t}\r\n\tconst allData = [];\r\n\tlet promise;\r\n\tfor (let index = 0; index < dataSource.length; index++) {\r\n\t\tconst data = dataSource.getField(index, field);\r\n\t\tif (isPromise(data)) {\r\n\t\t\tconst dataIndex = allData.length;\r\n\t\t\tallData.push(data);\r\n\t\t\tif (!promise) {\r\n\t\t\t\tpromise = data.then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tpromise = promise.then(() => data).then((d) => {\r\n\t\t\t\t\tallData[dataIndex] = d;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tallData.push(data);\r\n\t\t}\r\n\t}\r\n\r\n\tif (promise) {\r\n\t\tpromise.then(() => callback(allData));\r\n\t} else {\r\n\t\tcallback(allData);\r\n\t}\r\n}\r\n\r\nclass BranchLine {\r\n\tconstructor({fromIndex, toIndex, colorIndex, point}) {\r\n\t\tthis.fromIndex = fromIndex;\r\n\t\tthis.toIndex = toIndex;\r\n\t\tthis.colorIndex = colorIndex;\r\n\t\tthis.point = point;\r\n\t}\r\n}\r\nclass BranchPoint {\r\n\tconstructor({index, commit = false, lines = [], tag}) {\r\n\t\tthis.index = index;\r\n\t\tthis.commit = commit;\r\n\t\tthis.lines = lines;\r\n\t\tthis.tag = tag;\r\n\t}\r\n\tstatic mergeLines(lines) {\r\n\t\tconst result = lines.filter(((l) => isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\t\t\r\n\t\tconst froms = lines.filter(((l) => isDef(l.fromIndex) && !isDef(l.toIndex)));\r\n\t\tconst tos = lines.filter(((l) => !isDef(l.fromIndex) && isDef(l.toIndex)));\r\n\r\n\t\tfroms.forEach((f) => {\r\n\t\t\tfor (let i = 0; i < tos.length; i++) {\r\n\t\t\t\tconst t = tos[i];\r\n\t\t\t\tif (t.point) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (f.colorIndex === t.colorIndex) {\r\n\t\t\t\t\tf.toIndex = t.toIndex;\r\n\t\t\t\t\ttos.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tresult.push(f);\r\n\t\t});\r\n\r\n\t\treturn result.concat(tos);\r\n\t}\r\n\tstatic merge(a, b) {\r\n\t\tif (!a) {\r\n\t\t\treturn b;\r\n\t\t}\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: a.index,\r\n\t\t\tcommit: a.commit || b.commit,\r\n\t\t\tlines: BranchPoint.mergeLines(a.lines.concat(b.lines)),\r\n\t\t\ttag: a.tag || b.tag\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction joinLine(timeline, branchIndex) {\r\n\tconst reverse = [...timeline].reverse();\r\n\tfor (let i = 0; i < reverse.length; i++) {\r\n\t\tconst f = reverse[i][branchIndex];\r\n\t\tif (f) {\r\n\t\t\tf.lines = BranchPoint.mergeLines(f.lines.concat([new BranchLine({\r\n\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\tcolorIndex: branchIndex,\r\n\t\t\t})]));\r\n\r\n\t\t\tfor (let j = 0; j < i; j++) {\r\n\t\t\t\tconst tl = reverse[j];\r\n\t\t\t\ttl[branchIndex] = new BranchPoint({\r\n\t\t\t\t\tindex: branchIndex,\r\n\t\t\t\t\tlines: [new BranchLine({\r\n\t\t\t\t\t\tfromIndex: branchIndex,\r\n\t\t\t\t\t\ttoIndex: branchIndex,\r\n\t\t\t\t\t\tcolorIndex: branchIndex\r\n\t\t\t\t\t})]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction branch({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tlet toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0) {\r\n\t\ttoIndex = branches.length;\r\n\t\tbranches.push(to);\r\n\t}\r\n\t\r\n\tfunction findBranchRootIndex() {\r\n\t\tfor (let index = timeline.length - 1; index >= 0; index--) {\r\n\t\t\tconst tl = timeline[index];\r\n\t\t\tconst from = tl[fromIndex];\r\n\t\t\tif (from && from.commit) {\r\n\t\t\t\treturn index;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\tif (fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t});\r\n\t} else {\r\n\t\tconst fromTargetIndex = findBranchRootIndex();\r\n\t\tif (fromTargetIndex === -1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst branchTargetFromIndex = fromTargetIndex + 1;\r\n\t\tconst branchPoint = new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})]\r\n\t\t});\r\n\t\tlet point;\r\n\t\tlet result;\r\n\t\tif (branchTargetFromIndex < timeline.length) {\r\n\t\t\tconst targetLine = timeline[branchTargetFromIndex];\r\n\t\t\tpoint = targetLine[toIndex] = BranchPoint.merge(targetLine[toIndex], branchPoint);\r\n\t\t} else {\r\n\t\t\tpoint = branchPoint;\r\n\t\t\tresult = branchPoint;\r\n\t\t}\r\n\t\tconst from = timeline[fromTargetIndex][fromIndex];\r\n\t\tfrom.lines = BranchPoint.mergeLines(from.lines.concat([new BranchLine({\r\n\t\t\ttoIndex,\r\n\t\t\tcolorIndex: toIndex,\r\n\t\t\tpoint,\r\n\t\t})]));\r\n\t\treturn result;\r\n\t}\r\n\t\r\n}\r\n\r\nfunction commit({timeline, branches}, name) {\r\n\tconst index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\treturn null;\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex,\r\n\t\tcommit: true,\r\n\t});\r\n\t\t\r\n\tif (joinLine(timeline, index)) {\r\n\t\tresult.lines = BranchPoint.mergeLines(result.lines.concat([new BranchLine({\r\n\t\t\tfromIndex: index,\r\n\t\t\tcolorIndex: index\r\n\t\t})]));\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction commitTag({timeline, branches}, name, tag) {\r\n\tlet index = branches.indexOf(name);\r\n\tif (index < 0) {\r\n\t\tindex = branches.length;\r\n\t\tbranches.push(name);\r\n\t}\r\n\treturn new BranchPoint({\r\n\t\tindex,\r\n\t\ttag\r\n\t});\r\n}\r\n\r\nfunction commitMerge({timeline, branches}, from, to) {\r\n\tconst fromIndex = branches.indexOf(from);\r\n\tconst toIndex = branches.indexOf(to);\r\n\tif (toIndex < 0 || fromIndex < 0) {\r\n\t\treturn new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tcommit: true,\r\n\t\t});\r\n\t}\r\n\tconst result = new BranchPoint({\r\n\t\tindex: toIndex,\r\n\t\tcommit: true,\r\n\t\tlines: [\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t}),\r\n\t\t\tnew BranchLine({\r\n\t\t\t\tfromIndex: toIndex,\r\n\t\t\t\tcolorIndex: toIndex\r\n\t\t\t})],\r\n\t});\r\n\tconst froms = [...timeline];\r\n\tconst fromTargetLine = froms.pop();\r\n\tif (fromTargetLine) {\r\n\t\tfromTargetLine[fromIndex] = BranchPoint.merge(fromTargetLine[fromIndex], new BranchPoint({\r\n\t\t\tindex: toIndex,\r\n\t\t\tlines: [new BranchLine({\r\n\t\t\t\ttoIndex,\r\n\t\t\t\tcolorIndex: fromIndex\r\n\t\t\t})]\r\n\t\t}));\r\n\t}\r\n\r\n\tjoinLine(froms, fromIndex);\r\n\r\n\tjoinLine(timeline, toIndex);\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction calcCommand(info, command) {\r\n\tconst {timeline} = info;\r\n\tconst timelineData = [];\r\n\t// const last = timeline.length > 0 ? timeline[timeline.length - 1] : null;\r\n\tconst commands = Array.isArray(command) ? command : [command];\r\n\tcommands.forEach((cmd) => {\r\n\t\tif (!cmd) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet point;\r\n\t\tif (cmd.command === 'branch') {\r\n\t\t\tconst from = isObject(cmd.branch) ? cmd.branch.from : null;\r\n\t\t\tconst to = isObject(cmd.branch) ? cmd.branch.to : cmd.branch;\r\n\t\t\tpoint = branch(info, from, to);\r\n\t\t} else if (cmd.command === 'commit') {\r\n\t\t\tconst {branch} = cmd;\r\n\t\t\tpoint = commit(info, branch);\r\n\t\t} else if (cmd.command === 'merge') {\r\n\t\t\tconst {from, to} = cmd.branch;\r\n\t\t\tpoint = commitMerge(info, from, to);\r\n\t\t} else if (cmd.command === 'tag') {\r\n\t\t\tconst {branch, tag} = cmd;\r\n\t\t\tpoint = commitTag(info, branch, tag);\r\n\t\t}\r\n\t\tif (point && point.index > -1) {\r\n\t\t\ttimelineData[point.index] = BranchPoint.merge(timelineData[point.index], point);\r\n\t\t}\r\n\t});\r\n\ttimeline.push(timelineData);\r\n}\r\n\r\nfunction calcBranchesInfo(start, grid, col) {\r\n\tconst result = {\r\n\t\tbranches: [],\r\n\t\ttimeline: []\r\n\t};\r\n\tgetAllColumnData(grid, col, (data) => {\r\n\t\tif (start !== 'top') {\r\n\t\t\tdata = [...data].reverse();\r\n\t\t}\r\n\t\tdata.forEach((command) => {\r\n\t\t\tcalcCommand(result, command);\r\n\t\t});\r\n\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction calcBranchXPoints(ctx, left, width, radius, branches, timeline) {\r\n\tlet w = Math.max(width / branches.length + 1, 5);\r\n\ttimeline.forEach((tl) => {\r\n\t\ttl.forEach((p, index) => {\r\n\t\t\tif (index <= 0) {\r\n\t\t\t\t// \r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (p.tag) {\r\n\t\t\t\tconst textWidth = ctx.measureText(p.tag).width;\r\n\t\t\t\tif (((w * index) + (radius * 2) + 4 + textWidth) > width) {\r\n\t\t\t\t\tw = Math.max((width - (radius * 2) - 4 - textWidth) / index, 5);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tconst result = [];\r\n\tlet x = left;\r\n\tbranches.forEach(() => {\r\n\t\tresult.push(Math.ceil(x + radius));\r\n\t\tx += w;\r\n\t});\r\n\treturn result;\r\n}\r\n\r\nfunction renderMerge(grid, ctx, x, y, upLineIndex, downLineIndex, colorIndex, {\r\n\tbranchXPoints, margin, branchColors, branchLineWidth, mergeStyle\r\n}, {\r\n\twidth, col, row, branches\r\n}) {\r\n\tif (isDef(upLineIndex) || isDef(downLineIndex)) {\r\n\t\tctx.strokeStyle = getOrApply(branchColors, branches[colorIndex], colorIndex);\r\n\t\tctx.lineWidth = branchLineWidth;\r\n\t\tctx.lineCap = 'round';\r\n\t\tctx.beginPath();\r\n\r\n\r\n\t\tif (isDef(upLineIndex)) {\r\n\t\t\tconst upX = branchXPoints[upLineIndex];\r\n\t\t\tconst upRect = grid.getCellRelativeRect(col, row - 1);\r\n\t\t\tconst upY = upRect.top + upRect.height / 2;\r\n\t\t\tctx.moveTo(upX, upY);\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tupX, (y + upY) / 2,\r\n\t\t\t\t\t\tx, (y + upY) / 2,\r\n\t\t\t\t\t\tx, y\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(x, y);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tctx.moveTo(x, y);\r\n\t\t}\r\n\r\n\t\tif (isDef(downLineIndex)) {\r\n\t\t\tconst downX = branchXPoints[downLineIndex];\r\n\t\t\tconst downRect = grid.getCellRelativeRect(col, row + 1);\r\n\t\t\tconst downY = downRect.top + downRect.height / 2;\r\n\t\t\tif (mergeStyle === 'bezier') {\r\n\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\tx, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, (y + downY) / 2,\r\n\t\t\t\t\t\tdownX, downY\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tctx.lineTo(downX, downY);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tctx.stroke();\r\n\t}\r\n}\r\n\r\n/**\r\n * BranchGraphColumn<br>\r\n * <br>\r\n * # Data command<br>\r\n * ## mastar branch or orphan branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: 'branch name A',\r\n * }\r\n * </code></pre>\r\n * ## commit<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'commit',\r\n * \tbranch: 'branch name A'\r\n * }\r\n * </code></pre>\r\n * ## branch<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'branch',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name A',\r\n * \t\tto: 'branch name B'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## merge<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'merge',\r\n * \tbranch: {\r\n * \t\tfrom: 'branch name B',\r\n * \t\tto: 'branch name A'\r\n * \t}\r\n * }\r\n * </code></pre>\r\n * ## tag<br>\r\n * <pre><code class=\"js\">\r\n * {\r\n * \tcommand: 'tag',\r\n * \tbranch: 'branch name A',\r\n * \ttag: 'tag name'\r\n * }\r\n * </code></pre>\r\n *\r\n *\r\n * @memberof cheetahGrid.columns.type\r\n */\r\nclass BranchGraphColumn extends BaseColumn {\r\n\tconstructor(option = {}) {\r\n\t\tsuper(option);\r\n\t\tthis._start = option.start || 'bottom';\r\n\t\tthis._cache = isDef(option.cache) ? option.cache : false;\r\n\t}\r\n\tget StyleClass() {\r\n\t\treturn BranchGraphStyle;\r\n\t}\r\n\tclearCache(grid) {\r\n\t\tdelete grid[_];\r\n\t}\r\n\tonDrawCell(cellValue, info, context, grid) {\r\n\t\tif (this._cache) {\r\n\t\t\tconst state = grid[_] || (grid[_] = {});\r\n\t\t\tconst {col} = context;\r\n\t\t\tif (!state[col]) {\r\n\t\t\t\tstate[col] = calcBranchesInfo(this._start, grid, col);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn super.onDrawCell(cellValue, info, context, grid);\r\n\t}\r\n\tclone() {\r\n\t\treturn new BranchGraphColumn(this);\r\n\t}\r\n\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\tconst {col, row} = context;\r\n\t\tconst {timeline, branches} = (this._cache && grid[_]) ? grid[_][col] : calcBranchesInfo(this._start, grid, col);\r\n\t\t\r\n\t\tconst {upLineIndexKey, downLineIndexKey} = this._start !== 'top' ? {upLineIndexKey: 'toIndex', downLineIndexKey: 'fromIndex'} : {upLineIndexKey: 'fromIndex', downLineIndexKey: 'toIndex'};\r\n\t\tconst data = this._start !== 'top' ? timeline[timeline.length - (row - grid.frozenRowCount) - 1] : timeline[row - grid.frozenRowCount];\r\n\r\n\t\tconst {\r\n\t\t\tbranchColors,\r\n\t\t\tbranchLineWidth,\r\n\t\t\tcircleSize,\r\n\t\t\tmergeStyle,\r\n\t\t\tmargin,\r\n\t\t\tbgColor,\r\n\t\t} = style;\r\n\t\tif (bgColor) {\r\n\t\t\tdrawCellBase({\r\n\t\t\t\tbgColor,\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tconst rect = context.getRect();\r\n\t\tconst radius = circleSize / 2;\r\n\t\tconst width = rect.width - margin * 2;\r\n\r\n\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'middle';\r\n\t\t\tconst branchXPoints = calcBranchXPoints(ctx, rect.left + margin, width, radius, branches, timeline);\r\n\t\t\t\r\n\t\t\tconst y = rect.top + rect.height / 2;\r\n\r\n\t\t\t// draw join lines\r\n\t\t\tdata.\r\n\t\t\t\tmap((point, index) => point ? point.lines.map((line) => ({\r\n\t\t\t\t\tcolorIndex: line.colorIndex,\r\n\t\t\t\t\tupLineIndex: line[upLineIndexKey],\r\n\t\t\t\t\tdownLineIndex: line[downLineIndexKey],\r\n\t\t\t\t\tpointIndex: index,\r\n\t\t\t\t})) : []).\r\n\t\t\t\treduce((p, c) => p.concat(c), []).// flatMap\r\n\t\t\t\t// order of overlap\r\n\t\t\t\tsort((a, b) => b.colorIndex - a.colorIndex).\r\n\t\t\t\tforEach((line) => {\r\n\t\t\t\t\tconst x = branchXPoints[line.pointIndex];\r\n\t\t\t\t\trenderMerge(grid, ctx, x, y, line.upLineIndex, line.downLineIndex, line.colorIndex, {\r\n\t\t\t\t\t\tmargin,\r\n\t\t\t\t\t\tbranchXPoints,\r\n\t\t\t\t\t\tbranchLineWidth,\r\n\t\t\t\t\t\tbranchColors,\r\n\t\t\t\t\t\tmergeStyle,\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\twidth, col, row, branches\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t// draw commit points\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.commit) {\r\n\t\t\t\t\tconst x = branchXPoints[index];\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.arc(x, y, radius, 0, Math.PI * 2, true);\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// draw tags\r\n\t\t\tdata.forEach((p, index) => {\r\n\t\t\t\tif (p && p.tag) {\r\n\t\t\t\t\tctx.fillStyle = getOrApply(branchColors, branches[index], index);\r\n\t\t\t\t\tctx.fillText(p.tag, branchXPoints[index] + radius + 4, y);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\nmodule.exports = BranchGraphColumn;","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst ButtonStyle = require('../style/ButtonStyle');\r\n\tconst {BUTTON_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\tconst utils = require('./columnUtils');\r\n\t\r\n\r\n\tclass ButtonColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._caption = option.caption;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn ButtonStyle;\r\n\t\t}\r\n\t\tget caption() {\r\n\t\t\treturn this._caption;\r\n\t\t}\r\n\t\twithCaption(caption) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._caption = caption;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ButtonColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn this._caption || value;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {textAlign, textBaseline, bgColor, color, buttonBgColor, font, padding} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tlet active = false;\r\n\t\t\tconst state = grid[BUTTON_COLUMN_STATE_ID];\r\n\t\t\tif (state) {\r\n\t\t\t\tif (state.mouseActiveCell &&\r\n\t\t\t\t\tstate.mouseActiveCell.col === col &&\r\n\t\t\t\t\tstate.mouseActiveCell.row === row) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t} else if (context.getSelectState().selected) {\r\n\t\t\t\t\tactive = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.button(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tbgColor: buttonBgColor,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\tshadow: active ? {\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.48)',\r\n\t\t\t\t\t\tblur: 6,\r\n\t\t\t\t\t\toffsetY: 3,\r\n\t\t\t\t\t} : true,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = ButtonColumn;\r\n}","'use strict';\r\n{\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst CheckStyle = require('../style/CheckStyle');\r\n\tconst {CHECK_COLUMN_STATE_ID} = require('../../internal/symbolManager');\r\n\t\r\n\r\n\tfunction toBoolean(val) {\r\n\t\tif (typeof val === 'string') {\r\n\t\t\tif (val === 'false') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val === 'off') {\r\n\t\t\t\treturn false;\r\n\t\t\t} else if (val.match(/^0+$/)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\r\n\tclass CheckColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn CheckStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new CheckColumn(this);\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn toBoolean(value);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst {col, row} = context;\r\n\t\t\tconst key = col + ':' + row;\r\n\t\t\tconst state = grid[CHECK_COLUMN_STATE_ID] && grid[CHECK_COLUMN_STATE_ID][key];\r\n\t\t\t\r\n\t\t\tconst opt = {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tborderColor,\r\n\t\t\t\tcheckBgColor,\r\n\t\t\t\tuncheckBgColor,\r\n\t\t\t};\r\n\t\t\tif (state) {\r\n\t\t\t\topt.animElapsedTime = state.elapsed;\r\n\t\t\t}\r\n\t\t\thelper.checkbox(value, context, opt);\r\n\t\t}\r\n\t\tbindGridEvent(grid, col, util) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CheckColumn;\r\n}","'use strict';\r\n{\r\n\tconst Style = require('../style/Style');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass Column extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Column(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.text(value, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Column;\r\n}","'use strict';\r\n{\r\n\tconst IconStyle = require('../style/IconStyle');\r\n\tconst Column = require('./Column');\r\n\tconst icons = require('../../internal/icons');\r\n\r\n\tfunction repeatArray(val, count) {\r\n\t\tif (count === Infinity) {\r\n\t\t\tcount = 0;\r\n\t\t}\r\n\t\tconst a = [];\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\ta.push(val);\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n\r\n\tclass IconColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._tagName = option.tagName || 'i';\r\n\t\t\tthis._className = option.className;\r\n\t\t\tthis._content = option.content;\r\n\t\t\tthis._name = option.name;\r\n\t\t\tthis._iconWidth = option.iconWidth;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn IconStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new IconColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tconst num = value - 0;\r\n\t\t\tif (!isNaN(num)) {\r\n\t\t\t\tconst icon = {};\r\n\t\t\t\ticons.iconPropKeys.forEach((k) => {\r\n\t\t\t\t\ticon[k] = style[k];\r\n\t\t\t\t});\r\n\t\t\t\ticon.className = this._className;\r\n\t\t\t\ticon.tagName = this._tagName;\r\n\t\t\t\ticon.content = this._content;\r\n\t\t\t\ticon.name = this._name;\r\n\t\t\t\tif (this._iconWidth) {\r\n\t\t\t\t\ticon.width = this._iconWidth;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tinfo.getIcon = () => repeatArray(icon, num);\r\n\t\t\t} else {\r\n\t\t\t\tinfo.getIcon = () => null;\r\n\t\t\t}\r\n\t\t\tsuper.drawInternal('', context, style, helper, grid, info);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = IconColumn;\r\n}","'use strict';\r\n{\r\n\tconst ImageStyle = require('../style/ImageStyle');\r\n\tconst {getCacheOrLoad} = require('../../internal/imgs');\r\n\tconst {calcStartPosition} = require('../../internal/canvases');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\r\n\tconst MAX_LRU_CACHE_SIZE = 50;\r\n\tfunction getImage(url) {\r\n\t\treturn getCacheOrLoad('ImageColumn', MAX_LRU_CACHE_SIZE, url);\r\n\t}\r\n\r\n\tfunction calcKeepAspectRatioSize(width, height, maxWidth, maxHeight) {\r\n\t\tlet newWidth = width;\r\n\t\tlet newHeight = height;\r\n\t\tif (newWidth > maxWidth) {\r\n\t\t\tnewWidth = maxWidth;\r\n\t\t\tnewHeight = (newWidth * height) / width;\r\n\t\t}\r\n\t\tif (newHeight > maxHeight) {\r\n\t\t\tnewHeight = maxHeight;\r\n\t\t\tnewWidth = (newHeight * width) / height;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\twidth: newWidth,\r\n\t\t\theight: newHeight,\r\n\t\t};\r\n\t}\r\n\r\n\tclass ImageColumn extends BaseColumn {\r\n\t\tget StyleClass() {\r\n\t\t\treturn ImageStyle;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\treturn super.onDrawCell(getImage(cellValue), info, context, grid);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new ImageColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tif (value) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tmargin,\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t} = style;\r\n\t\t\t\tif (bgColor) {\r\n\t\t\t\t\tdrawCellBase({\r\n\t\t\t\t\t\tbgColor,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.textAlign = textAlign;\r\n\t\t\t\t\tctx.textBaseline = textBaseline;\r\n\t\t\t\t\tconst rect = context.getRect();\r\n\t\t\t\t\tif (style.imageSizing === 'keep-aspect-ratio') {\r\n\t\t\t\t\t\tconst {width, height} = calcKeepAspectRatioSize(\r\n\t\t\t\t\t\t\t\tvalue.width, value.height,\r\n\t\t\t\t\t\t\t\trect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst pos = calcStartPosition(ctx, rect, width, height, {\r\n\t\t\t\t\t\t\toffset: margin,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\tpos.x, pos.y, width, height\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tctx.drawImage(value,\r\n\t\t\t\t\t\t\t\t0, 0, value.width, value.height,\r\n\t\t\t\t\t\t\t\trect.left + margin, rect.top + margin, rect.width - margin * 2, rect.height - margin * 2\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tmodule.exports = ImageColumn;\r\n}","'use strict';\r\n{\r\n\tconst {normalize} = require('../../internal/menu-items');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst Style = require('../style/Style');\r\n\tconst utils = require('./columnUtils');\r\n\r\n\tclass MenuColumn extends BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._options = normalize(option.options);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MenuColumn(this);\r\n\t\t}\r\n\t\tget options() {\r\n\t\t\treturn this._options;\r\n\t\t}\r\n\t\twithOptions(options) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._options = normalize(options);\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t} = style;\r\n\t\t\tlet {\r\n\t\t\t\tcolor,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst text = this._convertInternal(value);\r\n\t\t\thelper.testFontLoad(font, text, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\tconst basePadding = helper.toBoxPixelArray(padding || 0, context);\r\n\t\t\t\tconst textPadding = basePadding.slice(0);\r\n\t\t\t\ttextPadding[1] += 26;// icon padding\r\n\t\t\t\tconst iconPadding = basePadding.slice(0);\r\n\t\t\t\ticonPadding[1] += 8;\r\n\t\t\t\tif (!isDef(color) && (!isDef(value) || value === '')) {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, .38)';\r\n\t\t\t\t}\r\n\t\t\t\thelper.text(text, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding: textPadding,\r\n\t\t\t\t});\r\n\t\t\t\t// draw icon\r\n\t\t\t\thelper.text('', context, {\r\n\t\t\t\t\ttextAlign: 'right',\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons: [{\r\n\t\t\t\t\t\tpath: 'M0 2 5 7 10 2z',\r\n\t\t\t\t\t\twidth: 10,\r\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, .54)',\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tpadding: iconPadding,\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\t_convertInternal(value) {\r\n\t\t\tconst options = this._options;\r\n\t\t\tfor (let i = 0; i < options.length; i++) {\r\n\t\t\t\tconst option = options[i];\r\n\t\t\t\tif (option.value === value) {\r\n\t\t\t\t\tvalue = option.caption;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn super.convertInternal(value);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = MenuColumn;\r\n}","'use strict';\r\n{\r\n\tconst MultilineTextStyle = require('../style/MultilineTextStyle');\r\n\tconst BaseColumn = require('./BaseColumn');\r\n\tconst utils = require('./columnUtils');\r\n\tclass MultilineTextColumn extends BaseColumn {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn MultilineTextStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new MultilineTextColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase, getIcon}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tpadding,\r\n\t\t\t\tlineHeight,\r\n\t\t\t} = style;\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst multilines = value.replace(/\\r?\\n/g, '\\n').replace(/\\r/g, '\\n').split('\\n');\r\n\t\t\thelper.testFontLoad(font, value, context);\r\n\t\t\tutils.loadIcons(getIcon(), context, helper, (icons, context) => {\r\n\t\t\t\thelper.multilineText(multilines, context, {\r\n\t\t\t\t\ttextAlign,\r\n\t\t\t\t\ttextBaseline,\r\n\t\t\t\t\tcolor,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\ticons,\r\n\t\t\t\t\tpadding,\r\n\t\t\t\t\tlineHeight,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = MultilineTextColumn;\r\n}","'use strict';\r\n{\r\n\tconst Column = require('./Column');\r\n\tconst NumberStyle = require('../style/NumberStyle');\r\n\tlet defaultFotmat;\r\n\tclass NumberColumn extends Column {\r\n\t\tstatic get defaultFotmat() {\r\n\t\t\treturn defaultFotmat || (defaultFotmat = new Intl.NumberFormat());\r\n\t\t}\r\n\t\tstatic set defaultFotmat(fmt) {\r\n\t\t\tdefaultFotmat = fmt;\r\n\t\t}\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._format = option.format;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn NumberStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new NumberColumn(this);\r\n\t\t}\r\n\t\tget format() {\r\n\t\t\treturn this._format;\r\n\t\t}\r\n\t\twithFormat(format) {\r\n\t\t\tconst c = this.clone();\r\n\t\t\tc._format = format;\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconvertInternal(value) {\r\n\t\t\tif (isNaN(value - 0)) {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t\tconst format = this._format || NumberColumn.defaultFotmat;\r\n\t\t\treturn format.format(value - 0);\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberColumn;\r\n}","'use strict';\r\n{\r\n\tconst PercentCompleteBarStyle = require('../style/PercentCompleteBarStyle');\r\n\tconst {getOrApply, str} = require('../../internal/utils');\r\n\tconst Column = require('./Column');\r\n\t\r\n\r\n\tconst MARGIN = 2;\r\n\r\n\tclass PercentCompleteBarColumn extends Column {\r\n\t\tconstructor(option = {}) {\r\n\t\t\tsuper(option);\r\n\t\t\tthis._min = option.min || 0;\r\n\t\t\tthis._max = option.max || (this._min + 100);\r\n\t\t\tthis._formatter = option.formatter || ((v) => v);\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn PercentCompleteBarStyle;\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new PercentCompleteBarColumn(this);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\tsuper.drawInternal(this._formatter(value), context, style, helper, grid, info);\r\n\t\t\tconst {\r\n\t\t\t\tbarColor,\r\n\t\t\t\tbarBgColor,\r\n\t\t\t\tbarHeight,\r\n\t\t\t} = style;\r\n\r\n\t\t\tlet svalue = value + '';\r\n\t\t\tif (str.endsWith(svalue, '%')) {\r\n\t\t\t\tsvalue = svalue.substr(0, svalue.length - 1);\r\n\t\t\t}\r\n\t\t\tconst num = svalue - 0;\r\n\t\t\tconst rate = num < this._min ? 0\r\n\t\t\t\t: num > this._max ? 1\r\n\t\t\t\t: (num - this._min) / (this._max - this._min);\r\n\t\t\t\r\n\t\t\thelper.drawWithClip(context, (ctx) => {\r\n\t\t\t\tconst rect = context.getRect();\r\n\r\n\t\t\t\tconst barMaxWidth = rect.width - MARGIN * 2 - 1/**/;\r\n\t\t\t\tconst barTop = rect.bottom - MARGIN - barHeight - 1/**/;\r\n\t\t\t\tconst barLeft = rect.left + MARGIN;\r\n\t\t\t\tctx.fillStyle = getOrApply(barBgColor, rate * 100) || '#f0f3f5';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barMaxWidth, barHeight);\r\n\t\t\t\tctx.fill();\r\n\r\n\r\n\t\t\t\tconst barSize = Math.min(barMaxWidth * rate, barMaxWidth);\r\n\t\t\t\tctx.fillStyle = getOrApply(barColor, rate * 100) || '#20a8d8';\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.rect(barLeft, barTop, barSize, barHeight);\r\n\t\t\t\tctx.fill();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tmodule.exports = PercentCompleteBarColumn;\r\n}","'use strict';\r\n{\r\n\tconst {isPromise} = require('../../internal/utils');\r\n\tconst icons = require('../../internal/icons');\r\n\tmodule.exports = {\r\n\t\tloadIcons(icon, context, helper, callback) {\r\n\t\t\tif (icon) {\r\n\t\t\t\tif (isPromise(icon)) {\r\n\t\t\t\t\ticon.then((i) => {\r\n\t\t\t\t\t\tthis.loadIcon(i, context.toCurrentContext(), callback);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst iconList = icons.toNormarizeArray(icon);\r\n\t\t\t\t\ticonList.forEach((i) => {\r\n\t\t\t\t\t\thelper.testFontLoad(i.font, i.content, context);\r\n\t\t\t\t\t});\r\n\t\t\t\t\ticon = iconList;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcallback(icon, context);\r\n\t\t},\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst DrawGrid = require('./core/DrawGrid');\r\n\r\n\t/**\r\n\t * core modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.core\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDrawGrid\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {\r\n\t\tisDef,\r\n\t\tbrowser,\r\n\t\tisDescendantElement,\r\n\t\tarray,\r\n\t\tisPromise,\r\n\t\tevent: {\r\n\t\t\tisTouchEvent,\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tcancel: cancelEvent,\r\n\t\t}\r\n\t} = require('../internal/utils');\r\n\t\r\n\tconst EventTarget = require('./EventTarget');\r\n\tconst Rect = require('../internal/Rect');\r\n\tconst Scrollable = require('../internal/Scrollable');\r\n\tconst EventHandler = require('../internal/EventHandler');\r\n\tconst NumberMap = require('../internal/NumberMap');\r\n\tconst style = require('../internal/style');\r\n\tconst calc = require('../internal/calc');\r\n\tconst hiDPI = require('../internal/hiDPI');\r\n\t//protected symbol\r\n\tconst {PROTECTED_SYMBOL: _} = require('../internal/symbolManager');\r\n\r\n\tfunction createRootElement() {\r\n\t\tconst element = document.createElement('div');\r\n\t\telement.classList.add('cheetah-grid');\r\n\t\treturn element;\r\n\t}\r\n\r\n\tconst KEY_END = 35;\r\n\tconst KEY_HOME = 36;\r\n\tconst KEY_LEFT = 37;\r\n\tconst KEY_UP = 38;\r\n\tconst KEY_RIGHT = 39;\r\n\tconst KEY_DOWN = 40;\r\n\tconst KEY_ALPHA_C = 67;\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCLICK_CELL: 'click_cell',\r\n\t\tDBLCLICK_CELL: 'dblclick_cell',\r\n\t\tDBLTAP_CELL: 'dbltap_cell',\r\n\t\tMOUSEDOWN_CELL: 'mousedown_cell',\r\n\t\tMOUSEUP_CELL: 'mouseup_cell',\r\n\t\tSELECTED_CELL: 'selected_cell',\r\n\t\tKEYDOWN: 'keydown',\r\n\t\tMOUSEMOVE_CELL: 'mousemove_cell',\r\n\t\tMOUSEENTER_CELL: 'mouseenter_cell',\r\n\t\tMOUSELEAVE_CELL: 'mouseleave_cell',\r\n\t\tMOUSEOVER_CELL: 'mouseover_cell',\r\n\t\tMOUSEOUT_CELL: 'mouseout_cell',\r\n\t\tINPUT_CELL: 'input_cell',\r\n\t\tEDITABLEINPUT_CELL: 'editableinput_cell',\r\n\t\tMODIFY_STATUS_EDITABLEINPUT_CELL: 'modify_status_editableinput_cell',\r\n\t\tRESIZE_COLUMN: 'resize_column',\r\n\t\tSCROLL: 'scroll',\r\n\t};\r\n\r\n\t//private methods\r\n\tfunction _vibrate(e) {\r\n\t\tif (navigator.vibrate && isTouchEvent(e)) {\r\n\t\t\tnavigator.vibrate(50);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetRowAt(grid, absoluteY) {\r\n\t\tconst internal = grid.getTargetRowAtInternal(absoluteY);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst findBefore = (startRow, startBottom) => {\r\n\t\t\tlet bottom = startBottom;\r\n\t\t\tfor (let row = startRow; row >= 0; row--) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst top = bottom - height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tbottom = top;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst findAfter = (startRow, startBottom) => {\r\n\t\t\tlet top = startBottom - _getRowHeight(grid, startRow);\r\n\t\t\tconst {rowCount} = grid[_];\r\n\t\t\tfor (let row = startRow; row < rowCount; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\tconst bottom = top + height;\r\n\t\t\t\tif (top <= absoluteY && absoluteY < bottom) {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttop,\r\n\t\t\t\t\t\trow,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\ttop = bottom;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\tconst candRow = Math.min(Math.ceil(absoluteY / grid[_].defaultRowHeight), grid.rowCount - 1);\r\n\t\tconst bottom = _getRowsHeight(grid, 0, candRow);\r\n\t\tif (absoluteY >= bottom) {\r\n\t\t\treturn findAfter(candRow, bottom);\r\n\t\t} else {\r\n\t\t\treturn findBefore(candRow, bottom);\r\n\t\t}\r\n\t}\r\n\tfunction _getTargetColAt(grid, absoluteX) {\r\n\t\tlet left = 0;\r\n\t\tconst {colCount} = grid[_];\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenRowAt(grid, absoluteY) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {top} = grid[_].scroll;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\tconst bottom = top + height;\r\n\t\t\tif (bottom > absoluteY) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttop,\r\n\t\t\t\t\trow,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\ttop = bottom;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getTargetFrozenColAt(grid, absoluteX) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet {left} = grid[_].scroll;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\tconst right = left + width;\r\n\t\t\tif (right > absoluteX) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tcol,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tleft = right;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction _getFrozenRowsRect(grid) {\r\n\t\tif (!grid[_].frozenRowCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {top} = grid[_].scroll;\r\n\t\tlet height = 0;\r\n\t\tconst rowCount = grid[_].frozenRowCount;\r\n\t\tfor (let row = 0; row < rowCount; row++) {\r\n\t\t\theight += _getRowHeight(grid, row);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\ttop,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\theight\r\n\t\t);\r\n\t}\r\n\tfunction _getFrozenColsRect(grid) {\r\n\t\tif (!grid[_].frozenColCount) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst {left} = grid[_].scroll;\r\n\t\tlet width = 0;\r\n\t\tconst colCount = grid[_].frozenColCount;\r\n\t\tfor (let col = 0; col < colCount; col++) {\r\n\t\t\twidth += _getColWidth(grid, col);\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tleft,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\twidth,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _isCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn !!grid[_].drawCells[row][col];\r\n\t}\r\n\tfunction _putCellDrawing(grid, col, row, context) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\tgrid[_].drawCells[row] = {};\r\n\t\t}\r\n\t\tgrid[_].drawCells[row][col] = context;\r\n\t}\r\n\tfunction _removeCellDrawing(grid, col, row) {\r\n\t\tif (!grid[_].drawCells[row]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdelete grid[_].drawCells[row][col];\r\n\t\tif (Object.keys(grid[_].drawCells[row]).length === 0) {\r\n\t\t\tdelete grid[_].drawCells[row];\r\n\t\t}\r\n\t}\r\n\tfunction _drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\tskipAbsoluteTop, skipAbsoluteLeft, drawLayers) {\r\n\t\tconst rect = new Rect(\r\n\t\t\t\tabsoluteLeft - visibleRect.left,\r\n\t\t\t\tabsoluteTop - visibleRect.top,\r\n\t\t\t\twidth,\r\n\t\t\t\theight\r\n\t\t);\r\n\r\n\t\tconst drawRect = Rect.bounds(\r\n\t\t\t\tMath.max(absoluteLeft, skipAbsoluteLeft) - visibleRect.left,\r\n\t\t\t\tMath.max(absoluteTop, skipAbsoluteTop) - visibleRect.top,\r\n\t\t\t\trect.right,\r\n\t\t\t\trect.bottom\r\n\t\t);\r\n\r\n\t\tif (drawRect.height > 0 && drawRect.width > 0) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tconst dcContext = new DrawCellContext(\r\n\t\t\t\t\t\tcol, row,\r\n\t\t\t\t\t\tctx, rect, drawRect,\r\n\t\t\t\t\t\t_isCellDrawing(grid, col, row),\r\n\t\t\t\t\t\tgrid[_].selection,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tconst p = grid.onDrawCell(col, row, dcContext);\r\n\t\t\t\tif (isPromise(p)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\t_putCellDrawing(grid, col, row, dcContext);\r\n\r\n\t\t\t\t\tconst pCol = col;\r\n\t\t\t\t\tdcContext._delayMode(grid, () => {\r\n\t\t\t\t\t\t_removeCellDrawing(grid, pCol, row);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tp.then(() => {\r\n\t\t\t\t\t\tdcContext.terminate();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _drawRow(grid, ctx, initFrozenCol, initCol,\r\n\t\t\tdrawRight, row, absoluteTop, height, visibleRect, skipAbsoluteTop, drawLayers) {\r\n\t\tconst {colCount} = grid[_];\r\n\t\tconst drawOuter = (col, absoluteLeft) => {\r\n\t\t\t//\r\n\t\t\tif (col >= (colCount - 1) && grid[_].canvas.width > (absoluteLeft - visibleRect.left)) {\r\n\t\t\t\tconst outerLeft = absoluteLeft - visibleRect.left;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(outerLeft, absoluteTop - visibleRect.top, grid[_].canvas.width - outerLeft, height);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteLeft = 0;\r\n\t\tif (initFrozenCol) {\r\n\t\t\tlet absoluteLeft = initFrozenCol.left;\r\n\t\t\tconst count = grid[_].frozenColCount;\r\n\t\t\tfor (let {col} = initFrozenCol; col < count; col++) {\r\n\t\t\t\tconst width = _getColWidth(grid, col);\r\n\r\n\t\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\t\tskipAbsoluteTop, 0,\r\n\t\t\t\t\t\tdrawLayers);\r\n\t\t\t\t\t\r\n\t\t\t\tabsoluteLeft += width;\r\n\t\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteLeft = absoluteLeft;\r\n\t\t}\r\n\r\n\t\tlet absoluteLeft = initCol.left;\r\n\t\tfor (let {col} = initCol; col < colCount; col++) {\r\n\t\t\tconst width = _getColWidth(grid, col);\r\n\t\t\t_drawCell(grid, ctx, col, absoluteLeft, width, row, absoluteTop, height, visibleRect,\r\n\t\t\t\t\tskipAbsoluteTop, skipAbsoluteLeft,\r\n\t\t\t\t\tdrawLayers);\r\n\r\n\t\t\tabsoluteLeft += width;\r\n\t\t\tif (drawRight <= absoluteLeft) { //\r\n\t\t\t\tdrawOuter(col, absoluteLeft);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(colCount - 1, absoluteLeft);\r\n\r\n\t}\r\n\tfunction _invalidateRect(grid, drawRect) {\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tconst {rowCount} = grid[_];\r\n\t\tconst ctx = grid._getInitContext();\r\n\r\n\t\tconst initRow = _getTargetRowAt(grid, Math.max(visibleRect.top, drawRect.top)) || {\r\n\t\t\ttop: _getRowsHeight(grid, 0, rowCount - 1),\r\n\t\t\trow: rowCount\r\n\t\t};\r\n\t\tconst initCol = _getTargetColAt(grid, Math.max(visibleRect.left, drawRect.left)) || {\r\n\t\t\tleft: _getColsWidth(grid, 0, grid[_].colCount - 1),\r\n\t\t\tcol: grid[_].colCount\r\n\t\t};\r\n\t\tconst drawBottom = Math.min(visibleRect.bottom, drawRect.bottom);\r\n\t\tconst drawRight = Math.min(visibleRect.right, drawRect.right);\r\n\r\n\t\tconst initFrozenRow = _getTargetFrozenRowAt(grid, Math.max(visibleRect.top, drawRect.top));\r\n\t\tconst initFrozenCol = _getTargetFrozenColAt(grid, Math.max(visibleRect.left, drawRect.left));\r\n\r\n\t\tconst drawLayers = new DrawLayers();\r\n\r\n\t\tconst drawOuter = (row, absoluteTop) => {\r\n\t\t\t//\r\n\t\t\tif (row >= (rowCount - 1) && grid[_].canvas.height > (absoluteTop - visibleRect.top)) {\r\n\t\t\t\tconst outerTop = absoluteTop - visibleRect.top;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.fillStyle = grid.underlayBackgroundColor || '#F6F6F6';\r\n\t\t\t\tctx.rect(0, outerTop, grid[_].canvas.width, grid[_].canvas.height - outerTop);\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tlet skipAbsoluteTop = 0;\r\n\t\tif (initFrozenRow) {\r\n\t\t\tlet absoluteTop = initFrozenRow.top;\r\n\t\t\tconst count = grid[_].frozenRowCount;\r\n\t\t\tfor (let {row} = initFrozenRow; row < count; row++) {\r\n\t\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t_drawRow(grid,\r\n\t\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\t\trow, absoluteTop, height, visibleRect, 0,\r\n\t\t\t\t\t\tdrawLayers\r\n\t\t\t\t);\r\n\t\t\t\tabsoluteTop += height;\r\n\t\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tskipAbsoluteTop = absoluteTop;\r\n\t\t}\r\n\r\n\t\tlet absoluteTop = initRow.top;\r\n\t\tfor (let {row} = initRow; row < rowCount; row++) {\r\n\t\t\tconst height = _getRowHeight(grid, row);\r\n\t\t\t\t\r\n\t\t\t//\r\n\t\t\t_drawRow(grid,\r\n\t\t\t\t\tctx, initFrozenCol, initCol, drawRight,\r\n\t\t\t\t\trow, absoluteTop, height, visibleRect, skipAbsoluteTop,\r\n\t\t\t\t\tdrawLayers\r\n\t\t\t);\r\n\r\n\t\t\tabsoluteTop += height;\r\n\t\t\tif (drawBottom <= absoluteTop) { //\r\n\t\t\t\tdrawOuter(row, absoluteTop);\r\n\t\t\t\tdrawLayers.draw(ctx);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tdrawOuter(rowCount - 1, absoluteTop);\r\n\r\n\t\tdrawLayers.draw(ctx);\r\n\t}\r\n\r\n\tfunction _toPxWidth(grid, width) {\r\n\t\treturn Math.round(calc.toPx(width, grid[_].calcWidthContext));\r\n\t}\r\n\r\n\tfunction _getDefaultColPxWidth(grid) {\r\n\t\treturn _toPxWidth(grid, grid.defaultColWidth);\r\n\t}\r\n\r\n\tfunction _adjustColWidth(grid, col, orgWidth) {\r\n\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\tif (!limit) {\r\n\t\t\treturn orgWidth;\r\n\t\t}\r\n\t\t\r\n\t\tif (limit.min) {\r\n\t\t\tconst min = _toPxWidth(grid, limit.min);\r\n\t\t\tif (min > orgWidth) {\r\n\t\t\t\treturn min;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (limit.max) {\r\n\t\t\tconst max = _toPxWidth(grid, limit.max);\r\n\t\t\tif (max < orgWidth) {\r\n\t\t\t\treturn max;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn orgWidth;\r\n\t}\r\n\r\n\tfunction _getColWidth(grid, col) {\r\n\t\tconst width = grid[_].colWidthsMap.get(col);\r\n\t\tif (width) {\r\n\t\t\treturn _adjustColWidth(grid, col, _toPxWidth(grid, width));\r\n\t\t}\r\n\t\treturn _getDefaultColPxWidth(grid);\r\n\t}\r\n\tfunction _setColWidth(grid, col, width) {\r\n\t\tgrid[_].colWidthsMap.put(col, width);\r\n\t}\r\n\tfunction _getColsWidth(grid, startCol, endCol) {\r\n\t\tconst colCount = endCol - startCol + 1;\r\n\t\tlet w = _getDefaultColPxWidth(grid) * colCount;\r\n\t\tgrid[_].colWidthsMap.each(startCol, endCol, (width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\r\n\tfunction _getRowHeight(grid, row) {\r\n\t\tconst internal = grid.getRowHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst height = grid[_].rowHeightsMap.get(row);\r\n\t\tif (height) {\r\n\t\t\treturn height;\r\n\t\t}\r\n\t\treturn grid[_].defaultRowHeight;\r\n\t}\r\n\tfunction _setRowHeight(grid, row, height) {\r\n\t\tgrid[_].rowHeightsMap.put(row, height);\r\n\t}\r\n\tfunction _getRowsHeight(grid, startRow, endRow) {\r\n\t\tconst internal = grid.getRowsHeightInternal(startRow, endRow);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tconst rowCount = endRow - startRow + 1;\r\n\t\tlet h = grid[_].defaultRowHeight * rowCount;\r\n\t\tgrid[_].rowHeightsMap.each(startRow, endRow, (height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\r\n\tfunction _getScrollWidth(grid) {\r\n\t\tlet w = _getDefaultColPxWidth(grid) * grid[_].colCount;\r\n\t\tgrid[_].colWidthsMap.eachAll((width, col) => {\r\n\t\t\tw += _adjustColWidth(grid, col, _toPxWidth(grid, width)) - _getDefaultColPxWidth(grid);\r\n\t\t});\r\n\t\treturn w;\r\n\t}\r\n\tfunction _getScrollHeight(grid, row) {\r\n\t\tconst internal = grid.getScrollHeightInternal(row);\r\n\t\tif (isDef(internal)) {\r\n\t\t\treturn internal;\r\n\t\t}\r\n\t\tlet h = grid[_].defaultRowHeight * grid[_].rowCount;\r\n\t\tgrid[_].rowHeightsMap.eachAll((height) => {\r\n\t\t\th += height - grid[_].defaultRowHeight;\r\n\t\t});\r\n\t\treturn h;\r\n\t}\r\n\tfunction _onScroll(grid, e) {\r\n\t\tconst lastLeft = grid[_].scroll.left;\r\n\t\tconst lastTop = grid[_].scroll.top;\r\n\t\tconst moveX = grid[_].scrollable.scrollLeft - lastLeft;\r\n\t\tconst moveY = grid[_].scrollable.scrollTop - lastTop;\r\n\r\n\t\t//\r\n\t\tgrid[_].scroll = {\r\n\t\t\tleft: grid[_].scrollable.scrollLeft,\r\n\t\t\ttop: grid[_].scrollable.scrollTop,\r\n\t\t};\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\tif ((Math.abs(moveX) >= visibleRect.width) || (Math.abs(moveY) >= visibleRect.height)) {\r\n\t\t\t//\r\n\t\t\t_invalidateRect(grid, visibleRect);\r\n\t\t} else {\r\n\t\t\t//\r\n\t\t\tgrid[_].context.drawImage(grid[_].canvas, -moveX, -moveY);\r\n\r\n\t\t\t\t\r\n\t\t\tif (moveX !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveX < 0) {\r\n\t\t\t\t\tredrawRect.width = -moveX;\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\t\t\t\tredrawRect.width += frozenRect.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveX > 0) {\r\n\t\t\t\t\tredrawRect.left = redrawRect.right - moveX;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveX > 0) {\r\n\t\t\t\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenColsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (moveY !== 0) {\r\n\t\t\t\t//\r\n\t\t\t\tconst redrawRect = visibleRect.copy();\r\n\t\t\t\tif (moveY < 0) {\r\n\t\t\t\t\tredrawRect.height = -moveY;\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\t\t\t\tredrawRect.height += frozenRect.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (moveY > 0) {\r\n\t\t\t\t\tredrawRect.top = redrawRect.bottom - moveY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t_invalidateRect(grid, redrawRect);\r\n\r\n\t\t\t\tif (moveY > 0) {\r\n\t\t\t\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\t_invalidateRect(grid, _getFrozenRowsRect(grid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _onKeyDownMove(grid, e) {\r\n\t\tconst {shiftKey} = e;\r\n\t\tconst keyCode = getKeyCode(e);\r\n\t\tconst focusCell = shiftKey ? grid.selection._focus : grid.selection._sel;\r\n\t\tif (keyCode === KEY_LEFT) {\r\n\t\t\tconst col = grid.getMoveLeftColByKeyDownInternal(focusCell);\r\n\t\t\tif (col < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_UP) {\r\n\t\t\tconst row = grid.getMoveUpRowByKeyDownInternal(focusCell);\r\n\t\t\tif (row < 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_RIGHT) {\r\n\t\t\tconst col = grid.getMoveRightColByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.colCount <= col) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, col, focusCell.row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_DOWN) {\r\n\t\t\tconst row = grid.getMoveDownRowByKeyDownInternal(focusCell);\r\n\t\t\tif (grid.rowCount <= row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(grid, focusCell.col, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_HOME) {\r\n\t\t\tconst row = e.ctrlKey ? 0 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, 0, row, e.shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t} else if (keyCode === KEY_END) {\r\n\t\t\tconst row = e.ctrlKey ? grid.rowCount - 1 : focusCell.row;\r\n\t\t\t_moveFocusCell(grid, grid.colCount - 1, row, shiftKey);\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t}\r\n\tfunction _moveFocusCell(grid, col, row, shiftKey) {\r\n\t\tconst offset = grid.getOffsetInvalidateCells();\r\n\r\n\t\tfunction extendRange(range) {\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\trange.start.col -= offset;\r\n\t\t\t\trange.start.row -= offset;\r\n\t\t\t\trange.end.col += offset;\r\n\t\t\t\trange.end.row += offset;\r\n\t\t\t}\r\n\t\t\treturn range;\r\n\t\t}\r\n\r\n\t\tconst beforeRange = extendRange(grid.selection.range);\r\n\t\tconst beforeRect = grid.getCellsRect(\r\n\t\t\t\tbeforeRange.start.col, beforeRange.start.row,\r\n\t\t\t\tbeforeRange.end.col, beforeRange.end.row\r\n\t\t);\r\n\r\n\t\tgrid.selection._setFocusCell(col, row, shiftKey);\r\n\t\tgrid.makeVisibleCell(col, row);\r\n\t\tgrid.focusCell(col, row);\r\n\t\t\t\r\n\t\tconst afterRange = extendRange(grid.selection.range);\r\n\t\tconst afterRect = grid.getCellsRect(\r\n\t\t\t\tafterRange.start.col, afterRange.start.row,\r\n\t\t\t\tafterRange.end.col, afterRange.end.row\r\n\t\t);\r\n\r\n\t\tif (afterRect.intersection(beforeRect)) {\r\n\t\t\tconst invalidateRect = Rect.max(afterRect, beforeRect);\r\n\t\t\t_invalidateRect(grid, invalidateRect);\r\n\t\t} else {\r\n\t\t\t_invalidateRect(grid, beforeRect);\r\n\t\t\t_invalidateRect(grid, afterRect);\r\n\t\t}\r\n\t}\r\n\tfunction _getMouseAbstractPoint(grid, e) {\r\n\t\tif (isTouchEvent(e)) {\r\n\t\t\te = e.changedTouches[0];\r\n\t\t}\r\n\t\tconst clientX = e.clientX || (e.pageX + window.scrollX);\r\n\t\tconst clientY = e.clientY || (e.pageY + window.scrollY);\r\n\t\tconst rect = grid[_].canvas.getBoundingClientRect();\r\n\t\tif (rect.right <= clientX) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (rect.bottom <= clientY) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst x = clientX - rect.left + grid[_].scroll.left;\r\n\t\tconst y = clientY - rect.top + grid[_].scroll.top;\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tfunction _bindEvents(grid) {\r\n\t\tconst getCellEventArgsSet = (e) => {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t\tconst cell = grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tabstractPos,\r\n\t\t\t\t\tcell\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconst eventArgs = {\r\n\t\t\t\tcol: cell.col,\r\n\t\t\t\trow: cell.row,\r\n\t\t\t\tevent: e,\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\tabstractPos,\r\n\t\t\t\tcell,\r\n\t\t\t\teventArgs\r\n\t\t\t};\r\n\t\t};\r\n\t\tconst canResizeColumn = (col) => {\r\n\t\t\tconst limit = grid[_].colWidthsLimit[col];\r\n\t\t\tif (!limit || !limit.min || !limit.max) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn limit.max !== limit.min;\r\n\t\t};\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousedown', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst results = grid.fireListeners(EVENT_TYPE.MOUSEDOWN_CELL, eventArgs);\r\n\t\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t} else {\r\n\t\t\t\t//\r\n\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet doubleTapBefore = null;\r\n\t\tlet longTouchId = null;\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchstart', (e) => {\r\n\t\t\r\n\t\t\tif (!doubleTapBefore) {\r\n\t\t\t\tdoubleTapBefore = getCellEventArgsSet(e).eventArgs;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tdoubleTapBefore = null;\r\n\t\t\t\t}, 350);\r\n\t\t\t} else {\r\n\t\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\t\tif (eventArgs &&\r\n\t\t\t\t\teventArgs.col === doubleTapBefore.col &&\r\n\t\t\t\t\teventArgs.row === doubleTapBefore.row) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.DBLTAP_CELL, eventArgs);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdoubleTapBefore = null;\r\n\r\n\t\t\t\tif (e.defaultPrevented) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlongTouchId = setTimeout(() => {\r\n\t\t\t\t//\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t\tconst abstractPos = _getMouseAbstractPoint(grid, e);\r\n\t\t\t\tif (!abstractPos) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y, 15);\r\n\t\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].columnResizer.start(resizeCol, e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//\r\n\t\t\t\t\tgrid[_].cellSelector.start(e);\r\n\t\t\t\t}\r\n\t\t\t}, 500);\r\n\t\t});\r\n\r\n\t\tfunction cancel(e) {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchcancel', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchmove', cancel);\r\n\t\tgrid[_].handler.on(grid[_].element, 'touchend', (e) => {\r\n\t\t\tif (longTouchId) {\r\n\t\t\t\tclearTimeout(longTouchId);\r\n\t\t\t\tgrid[_].cellSelector.select(e);\r\n\t\t\t\tlongTouchId = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet isMouseover = false;\r\n\t\tlet mouseEnterCell = null;\r\n\t\tlet mouseOverCell = null;\r\n\t\tfunction onMouseenterCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEENTER_CELL, cell);\r\n\t\t\tmouseEnterCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseleaveCell() {\r\n\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\tmouseEnterCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSELEAVE_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction onMouseoverCell(cell) {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOVER_CELL, cell);\r\n\t\t\tmouseOverCell = cell;\r\n\t\t}\r\n\t\tfunction onMouseoutCell() {\r\n\t\t\tconst beforeMouseCell = mouseOverCell;\r\n\t\t\tmouseOverCell = null;\r\n\t\t\tif (beforeMouseCell) {\r\n\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEOUT_CELL, {\r\n\t\t\t\t\tcol: beforeMouseCell.col,\r\n\t\t\t\t\trow: beforeMouseCell.row,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst scrollElement = grid[_].scrollable.getElement();\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseover', (e) => {\r\n\t\t\tisMouseover = true;\r\n\t\t});\r\n\t\tgrid[_].handler.on(scrollElement, 'mouseout', (e) => {\r\n\t\t\tisMouseover = false;\r\n\t\t\tonMouseoutCell();\r\n\t\t});\r\n\r\n\t\tgrid[_].handler.on(grid[_].element, 'mouseleave', (e) => {\r\n\t\t\tonMouseleaveCell();\r\n\t\t});\r\n\t\t\t\r\n\t\tgrid[_].handler.on(grid[_].element, 'mousemove', (e) => {\r\n\t\t\tconst eventArgsSet = getCellEventArgsSet(e);\r\n\t\t\tconst {abstractPos, eventArgs} = eventArgsSet;\r\n\t\t\tif (eventArgs) {\r\n\t\t\t\tconst beforeMouseCell = mouseEnterCell;\r\n\t\t\t\tif (beforeMouseCell) {\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t\tif (beforeMouseCell.col !== eventArgs.col || beforeMouseCell.row !== eventArgs.row) {\r\n\t\t\t\t\t\tonMouseoutCell();\r\n\t\t\t\t\t\tonMouseleaveCell();\r\n\t\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (isMouseover && !mouseOverCell) {\r\n\t\t\t\t\t\tonMouseoverCell({\r\n\t\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst cell = {\r\n\t\t\t\t\t\tcol: eventArgs.col,\r\n\t\t\t\t\t\trow: eventArgs.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tonMouseenterCell(cell);\r\n\t\t\t\t\tif (isMouseover) {\r\n\t\t\t\t\t\tonMouseoverCell(cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.fireListeners(EVENT_TYPE.MOUSEMOVE_CELL, eventArgs);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tonMouseoutCell();\r\n\t\t\t\tonMouseleaveCell();\r\n\t\t\t}\r\n\t\t\tif (grid[_].columnResizer.moving(e) || grid[_].cellSelector.moving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {style} = grid[_].element;\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst resizeCol = _getResizeColAt(grid, abstractPos.x, abstractPos.y);\r\n\t\t\tif (resizeCol >= 0 && canResizeColumn(resizeCol)) {\r\n\t\t\t\tstyle.cursor = 'col-resize';\r\n\t\t\t} else {\r\n\t\t\t\tif (style.cursor === 'col-resize') {\r\n\t\t\t\t\tstyle.cursor = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'click', (e) => {\r\n\t\t\tif (grid[_].columnResizer.lastMoving(e) || grid[_].cellSelector.lastMoving(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.CLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.CLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].handler.on(grid[_].element, 'dblclick', (e) => {\r\n\t\t\tif (!grid.hasListeners(EVENT_TYPE.DBLCLICK_CELL)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst {eventArgs} = getCellEventArgsSet(e);\r\n\t\t\tif (!eventArgs) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.DBLCLICK_CELL, eventArgs);\r\n\t\t});\r\n\t\tgrid[_].focusControl.listen('keydown', (keyCode, e) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.KEYDOWN, keyCode, e);\r\n\t\t});\r\n\t\tgrid[_].selection.listen(EVENT_TYPE.SELECTED_CELL, (data) => {\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SELECTED_CELL, data, data.selected);\r\n\t\t});\r\n\r\n\t\tgrid[_].scrollable.onScroll((e) => {\r\n\t\t\t_onScroll(grid, e);\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.SCROLL, {event: e});\r\n\t\t});\r\n\t\tgrid[_].focusControl.onKeyDownMove((e) => {\r\n\t\t\t_onKeyDownMove(grid, e);\r\n\t\t});\r\n\t\tgrid.listen('copydata', (range) => {\r\n\t\t\tlet copyValue = '';\r\n\t\t\tfor (let {row} = range.start; row <= range.end.row; row++) {\r\n\t\t\t\tfor (let {col} = range.start; col <= range.end.col; col++) {\r\n\t\t\t\t\tconst copyCellValue = grid.getCopyCellValue(col, row);\r\n\t\t\t\t\tif (window.Promise && copyCellValue instanceof window.Promise) {\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst strCellValue = '' + copyCellValue;\r\n\t\t\t\t\t\tif (strCellValue.match(/^\\[object .*\\]$/)) {\r\n\t\t\t\t\t\t\t//object \r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcopyValue += strCellValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif (col < range.end.col) {\r\n\t\t\t\t\t\tcopyValue += '\\t';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcopyValue += '\\n';\r\n\t\t\t}\r\n\t\t\treturn copyValue;\r\n\t\t});\r\n\t\tgrid[_].focusControl.onCopy((e) => array.find(grid.fireListeners('copydata', grid[_].selection.range), isDef));\r\n\t\tgrid[_].focusControl.onInput((value) => {\r\n\t\t\tconst {col, row} = grid[_].selection.select;\r\n\t\t\tgrid.fireListeners(EVENT_TYPE.INPUT_CELL, {col, row, value});\r\n\t\t});\r\n\t\tgrid.bindEventsInternal();\r\n\t}\r\n\r\n\tfunction _getResizeColAt(grid, abstractX, abstractY, offset = 5) {\r\n\t\tif (grid[_].frozenRowCount <= 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\tif (!frozenRect.inPoint(abstractX, abstractY)) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tconst cell = grid.getCellAt(abstractX, abstractY);\r\n\t\tconst cellRect = grid.getCellRect(cell.col, cell.row);\r\n\t\tif (abstractX < cellRect.left + offset) {\r\n\t\t\treturn cell.col - 1;\r\n\t\t}\r\n\t\tif (cellRect.right - offset < abstractX) {\r\n\t\t\treturn cell.col;\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tfunction _getVisibleRect(grid) {\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left,\r\n\t\t\t\tgrid[_].scroll.top,\r\n\t\t\t\tgrid[_].canvas.width,\r\n\t\t\t\tgrid[_].canvas.height\r\n\t\t);\r\n\t}\r\n\tfunction _getScrollableVisibleRect(grid) {\r\n\t\tlet frozenColsWidth = 0;\r\n\t\tif (grid[_].frozenColCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenColsRect(grid);\r\n\t\t\tfrozenColsWidth = frozenRect.width;\r\n\t\t}\r\n\t\tlet frozenRowsHeight = 0;\r\n\t\tif (grid[_].frozenRowCount > 0) {\r\n\t\t\t//\r\n\t\t\tconst frozenRect = _getFrozenRowsRect(grid);\r\n\t\t\tfrozenRowsHeight = frozenRect.height;\r\n\t\t}\r\n\t\treturn new Rect(\r\n\t\t\t\tgrid[_].scroll.left + frozenColsWidth,\r\n\t\t\t\tgrid[_].scroll.top + frozenRowsHeight,\r\n\t\t\t\tgrid[_].canvas.width - frozenColsWidth,\r\n\t\t\t\tgrid[_].canvas.height - frozenRowsHeight\r\n\t\t);\r\n\t}\r\n\r\n\tfunction _toRelativeRect(grid, absoluteRect) {\r\n\t\tconst rect = absoluteRect.copy();\r\n\t\tconst visibleRect = _getVisibleRect(grid);\r\n\t\trect.offsetLeft(-visibleRect.left);\r\n\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\treturn rect;\r\n\t}\r\n\t//end private methods\r\n\t//\r\n\t//\r\n\t//\r\n\t//\r\n\r\n\t/**\r\n\t * managing mouse down moving\r\n\t * @private\r\n\t */\r\n\tclass BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._events = {};\r\n\t\t\tthis._started = false;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\tmoving(e) {\r\n\t\t\treturn !!this._started;\r\n\t\t}\r\n\t\tlastMoving(e) {\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this.moving(e)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst last = this._mouseEndPoint;\r\n\t\t\tif (!last) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst pt = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\treturn pt.x === last.x && pt.y === last.y;\r\n\t\t}\r\n\t\t_bindMoveAndUp(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tthis._events.mousemove = this._handler.on(document.body, 'mousemove', (e) => this._mouseMove(e));\r\n\t\t\t\tthis._events.mouseup = this._handler.on(document.body, 'mouseup', (e) => this._mouseUp(e));\r\n\t\t\t} else {\r\n\t\t\t\tthis._events.touchmove = this._handler.on(document.body, 'touchmove', (e) => this._mouseMove(e), {passive: false});\r\n\t\t\t\tthis._events.touchend = this._handler.on(document.body, 'touchend', (e) => this._mouseUp(e));\r\n\t\t\t\tthis._events.touchcancel = this._handler.on(document.body, 'touchcancel', (e) => this._mouseUp(e));\r\n\t\t\t}\r\n\t\t\tthis._started = true;\r\n\t\t\tthis._moved = false;\r\n\t\t}\r\n\t\t_mouseMove(e) {\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\tif (getMouseButtons(e) !== 1) {\r\n\t\t\t\t\tthis._mouseUp(e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._moved = this._moveInternal(e) || this._moved/*calculation on after*/;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\t_mouseUp(e) {\r\n\t\t\tthis._handler.off(this._events.mousemove);\r\n\t\t\tthis._handler.off(this._events.touchmove);\r\n\t\t\tthis._handler.off(this._events.mouseup);\r\n\t\t\tthis._handler.off(this._events.touchend);\r\n\t\t\t// this._handler.off(this._events.mouseleave);\r\n\t\t\tthis._handler.off(this._events.touchcancel);\r\n\r\n\t\t\tthis._started = false;\r\n\r\n\t\t\tthis._upInternal(e);\r\n\r\n\t\t\t// mouseupclick\r\n\t\t\tif (this._moved) { //\r\n\t\t\t\tthis._mouseEndPoint = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis._mouseEndPoint = null;\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\t//protected\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * managing cell selection operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass CellSelector extends BaseMouseDownMover {\r\n\t\tstart(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._cell = cell;\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\tselect(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, e.shiftKey);\r\n\t\t\tthis._cell = cell;\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst cell = this._getTargetCell(e);\r\n\t\t\tif (!cell || (this._cell.col === cell.col && this._cell.row === cell.row)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t_moveFocusCell(this._grid, cell.col, cell.row, true);\r\n\r\n\t\t\t//make visible\r\n\t\t\tconst makeVisibleCol = (() => {\r\n\t\t\t\tif (cell.col < this._cell.col && 0 < cell.col) {\r\n\t\t\t\t\t// move left\r\n\t\t\t\t\treturn cell.col - 1;\r\n\t\t\t\t} else if (this._cell.col < cell.col && cell.col + 1 < this._grid.colCount) {\r\n\t\t\t\t\t// move right\r\n\t\t\t\t\treturn cell.col + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.col;\r\n\t\t\t})();\r\n\t\t\tconst makeVisibleRow = (() => {\r\n\t\t\t\tif (cell.row < this._cell.row && 0 < cell.row) {\r\n\t\t\t\t\t// move up\r\n\t\t\t\t\treturn cell.row - 1;\r\n\t\t\t\t} else if (this._cell.row < cell.row && cell.row + 1 < this._grid.rowCount) {\r\n\t\t\t\t\t// move down\r\n\t\t\t\t\treturn cell.row + 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn cell.row;\r\n\t\t\t})();\r\n\t\t\tif (makeVisibleCol !== cell.col || makeVisibleRow !== cell.row) {\r\n\t\t\t\tthis._grid.makeVisibleCell(makeVisibleCol, makeVisibleRow);\r\n\t\t\t}\r\n\t\t\tthis._cell = cell;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_getTargetCell(e) {\r\n\t\t\tconst abstractPos = _getMouseAbstractPoint(this._grid, e);\r\n\t\t\tif (!abstractPos) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst cell = this._grid.getCellAt(abstractPos.x, abstractPos.y);\r\n\t\t\tif (cell.col < 0 || cell.row < 0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn cell;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * managing row width changing operation with mouse\r\n\t * @private\r\n\t */\r\n\tclass ColumnResizer extends BaseMouseDownMover {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper(grid);\r\n\t\t\tthis._targetCol = -1;\r\n\t\t}\r\n\t\tstart(col, e) {\r\n\t\t\tlet pageX;\r\n\t\t\tif (!isTouchEvent(e)) {\r\n\t\t\t\t({pageX} = e);\r\n\t\t\t} else {\r\n\t\t\t\t({pageX} = e.changedTouches[0]);\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = pageX;\r\n\t\t\tthis._preX = 0;\r\n\r\n\t\t\tthis._bindMoveAndUp(e);\r\n\r\n\t\t\tthis._targetCol = col;\r\n\t\t\tthis._invalidateAbsoluteLeft = _getColsWidth(this._grid, 0, col - 1);\r\n\r\n\t\t\tcancelEvent(e);\r\n\t\t\t_vibrate(e);\r\n\t\t}\r\n\t\t_moveInternal(e) {\r\n\t\t\tconst pageX = isTouchEvent(e) ? e.changedTouches[0].pageX : e.pageX;\r\n\r\n\t\t\tconst x = pageX - this._x;\r\n\t\t\tconst moveX = x - this._preX;\r\n\t\t\tthis._preX = x;\r\n\t\t\tconst pre = this._grid.getColWidth(this._targetCol);\r\n\t\t\tlet afterSize = _adjustColWidth(this._grid, this._targetCol, pre + moveX);\r\n\t\t\tif (afterSize < 10 && moveX < 0) {\r\n\t\t\t\tafterSize = 10;\r\n\t\t\t}\r\n\t\t\t_setColWidth(this._grid, this._targetCol, afterSize);\r\n\r\n\t\t\tconst rect = _getVisibleRect(this._grid);\r\n\t\t\trect.left = this._invalidateAbsoluteLeft;\r\n\t\t\t_invalidateRect(this._grid, rect);\r\n\r\n\t\t\tthis._grid.fireListeners(EVENT_TYPE.RESIZE_COLUMN, {col: this._targetCol});\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t_upInternal(e) {\r\n\t\t\tthis._grid.updateScroll();\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setSafeInputValue(input, value) {\r\n\t\tconst {type} = input;\r\n\t\tinput.type = '';\r\n\t\tinput.value = value;\r\n\t\tif (type) {\r\n\t\t\tinput.type = type;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Manage focus\r\n\t * @private\r\n\t */\r\n\tclass FocusControl extends EventTarget {\r\n\t\tconstructor(grid, parentElement, scrollable) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._scrollable = scrollable;\r\n\t\t\tthis._handler = new EventHandler();\r\n\t\t\tthis._input = document.createElement('input');\r\n\t\t\tthis._input.classList.add('grid-focus-control');\r\n\t\t\tthis._input.readOnly = true;\r\n\t\t\tparentElement.appendChild(this._input);\r\n\r\n\t\t\tthis._handler.on(this._input, 'compositionstart', (e) => {\r\n\t\t\t\tthis._input.classList.add('composition');\r\n\t\t\t\tthis._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t\tthis._isComposition = true;\r\n\t\t\t\tgrid.focus();\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'compositionend', (e) => {\r\n\t\t\t\tthis._isComposition = false;\r\n\t\t\t\tthis._input.classList.remove('composition');\r\n\t\t\t\tthis._input.style.font = '';\r\n\t\t\t\tif (!this._input.readOnly) {\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keypress', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this._input.readOnly && e.key && e.key.length === 1) {\r\n\t\t\t\t\tif (e.key === 'c' && (e.ctrlKey || e.metaKey)) {\r\n\t\t\t\t\t\t//copy! for Firefox\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.fireListeners('input', e.key);\r\n\t\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tthis.fireListeners('keydown', keyCode, e);\r\n\r\n\t\t\t\tif (!this._input.readOnly && this._input.value) {\r\n\t\t\t\t\t// for Safari\r\n\t\t\t\t\tthis.fireListeners('input', this._input.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t});\r\n\t\t\tconst inputClear = (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t};\r\n\r\n\t\t\tthis._handler.on(this._input, 'input', inputClear);\r\n\t\t\tthis._handler.on(this._input, 'keyup', inputClear);\r\n\t\t\tthis._handler.on(document, 'keydown', (e) => {\r\n\t\t\t\tif (!browser.IE) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (e.target !== this._input) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_ALPHA_C && e.ctrlKey) {\r\n\t\t\t\t\tsetSafeInputValue(this._input, 'dummy');\r\n\t\t\t\t\tthis._input.select();\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._handler.on(document, 'copy', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!isDescendantElement(parentElement, e.target)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetSafeInputValue(this._input, '');\r\n\t\t\t\tconst data = array.find(this.fireListeners('copy'), isDef);\r\n\t\t\t\tif (isDef(data)) {\r\n\t\t\t\t\tcancelEvent(e);\r\n\t\t\t\t\tif (browser.IE) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', data); // IE\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', data); // Chrome, Firefox\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonKeyDownMove(fn) {\r\n\t\t\tthis._handler.on(this._input, 'keydown', (e) => {\r\n\t\t\t\tif (this._isComposition) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst keyCode = getKeyCode(e);\r\n\t\t\t\tif (keyCode === KEY_LEFT ||\r\n\t\t\t\t\tkeyCode === KEY_UP ||\r\n\t\t\t\t\tkeyCode === KEY_RIGHT ||\r\n\t\t\t\t\tkeyCode === KEY_DOWN ||\r\n\t\t\t\t\tkeyCode === KEY_HOME ||\r\n\t\t\t\t\tkeyCode === KEY_END\r\n\t\t\t\t) {\r\n\t\t\t\t\tfn(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tonInput(fn) {\r\n\t\t\treturn this.listen('input', fn);\r\n\t\t}\r\n\t\tonCopy(fn) {\r\n\t\t\treturn this.listen('copy', fn);\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\t// this._input.value = '';\r\n\t\t\tthis._input.focus();\r\n\t\t}\r\n\t\tsetFocusRect(rect) {\r\n\t\t\tconst top = this._scrollable.calcTop(rect.top);\r\n\t\t\tthis._input.style.top = (top - style.getScrollBarSize()).toFixed() + 'px';//position:relative IE position:relative\r\n\t\t\tthis._input.style.left = rect.left.toFixed() + 'px';\r\n\t\t\tthis._input.style.width = rect.width.toFixed() + 'px';\r\n\t\t\tthis._input.style.height = rect.height.toFixed() + 'px';\r\n\t\t}\r\n\t\tset editMode(editMode) {\r\n\t\t\tthis._input.readOnly = !editMode;\r\n\t\t}\r\n\t\tresetInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tconst composition = el.classList.contains('composition');\r\n\t\t\t\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tconst removeNames = [];\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tif (!this._inputStatus.hasOwnProperty(att.nodeName)) {\r\n\t\t\t\t\tremoveNames.push(att.name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tremoveNames.forEach((removeName) => {\r\n\t\t\t\tel.removeAttribute(removeName);\r\n\t\t\t});\r\n\t\t\tfor (const name in this._inputStatus) {\r\n\t\t\t\tel.setAttribute(name, this._inputStatus[name]);\r\n\t\t\t}\r\n\t\t\tif (composition) {\r\n\t\t\t\tel.classList.add('composition');\r\n\t\t\t\tel.style.font = this._grid.font || '16px sans-serif';\r\n\t\t\t} else {\r\n\t\t\t\tel.classList.remove('composition');\r\n\t\t\t}\r\n\t\t}\r\n\t\tstoreInputStatus() {\r\n\t\t\tconst el = this._input;\r\n\t\t\tthis._inputStatus = {};\r\n\t\t\tconst atts = el.attributes;\r\n\t\t\tfor (let i = 0, n = atts.length; i < n; i++) {\r\n\t\t\t\tconst att = atts[i];\r\n\t\t\t\tthis._inputStatus[att.name] = att.value;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDefaultInputStatus() {\r\n\t\t\t// \r\n\t\t\t// this._input.style.font = this._grid.font || '16px sans-serif';\r\n\t\t}\r\n\t\tget editMode() {\r\n\t\t\treturn !this._input.readOnly;\r\n\t\t}\r\n\t\tget input() {\r\n\t\t\treturn this._input;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Selected area management\r\n\t */\r\n\tclass Selection extends EventTarget {\r\n\t\tconstructor(grid) {\r\n\t\t\tsuper();\r\n\t\t\tthis._grid = grid;\r\n\r\n\t\t\tthis._sel = {col: 0, row: 0};\r\n\t\t\tthis._focus = {col: 0, row: 0};\r\n\t\t\t\r\n\t\t\tthis._start = {col: 0, row: 0};\r\n\t\t\tthis._end = {col: 0, row: 0};\r\n\t\t}\r\n\t\tget range() {\r\n\t\t\tconst startCol = Math.min(this._start.col, this._end.col);\r\n\t\t\tconst startRow = Math.min(this._start.row, this._end.row);\r\n\t\t\tconst endCol = Math.max(this._start.col, this._end.col);\r\n\t\t\tconst endRow = Math.max(this._start.row, this._end.row);\r\n\t\t\treturn {\r\n\t\t\t\tstart: {\r\n\t\t\t\t\tcol: startCol,\r\n\t\t\t\t\trow: startRow,\r\n\t\t\t\t},\r\n\t\t\t\tend: {\r\n\t\t\t\t\tcol: endCol,\r\n\t\t\t\t\trow: endRow,\r\n\t\t\t\t},\r\n\t\t\t\tinCell(col, row) {\r\n\t\t\t\t\treturn startCol <= col && col <= endCol &&\r\n\t\t\t\t\t\tstartRow <= row && row <= endRow;\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t\tget select() {\r\n\t\t\treturn {\r\n\t\t\t\tcol: this._sel.col,\r\n\t\t\t\trow: this._sel.row\r\n\t\t\t};\r\n\t\t}\r\n\t\tset select(cell = {}) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcol = 0,\r\n\t\t\t\t\trow = 0\r\n\t\t\t\t} = cell;\r\n\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\tthis._setFocusCell(col, row, true);\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setSelectCell(col, row) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tthis._sel = {col, row};\r\n\t\t\t\tthis._start = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_setFocusCell(col, row, keepSelect) {\r\n\t\t\tthis._wrapFireSelectedEvent(() => {\r\n\t\t\t\tif (!keepSelect) {\r\n\t\t\t\t\tthis._setSelectCell(col, row);\r\n\t\t\t\t}\r\n\t\t\t\tthis._focus = {col, row};\r\n\t\t\t\tthis._end = {col, row};\r\n\t\t\t});\r\n\t\t}\r\n\t\t_wrapFireSelectedEvent(callback) {\r\n\t\t\tif (this._isWraped) {\r\n\t\t\t\tcallback();\r\n\t\t\t} else {\r\n\t\t\t\tthis._isWraped = true;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst before = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: false,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t\tconst after = {\r\n\t\t\t\t\t\tcol: this._sel.col,\r\n\t\t\t\t\t\trow: this._sel.row,\r\n\t\t\t\t\t\tselected: true,\r\n\t\t\t\t\t\tbefore: {\r\n\t\t\t\t\t\t\tcol: before.col,\r\n\t\t\t\t\t\t\trow: before.row,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbefore.after = {\r\n\t\t\t\t\t\tcol: after.col,\r\n\t\t\t\t\t\trow: after.row,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, before);\r\n\t\t\t\t\tthis.fireListeners(EVENT_TYPE.SELECTED_CELL, after);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis._isWraped = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * This class manages the drawing process for each layer\r\n\t */\r\n\tclass DrawLayers {\r\n\t\tconstructor() {\r\n\t\t\tthis._layers = {};\r\n\t\t}\r\n\t\taddDraw(level, fn) {\r\n\t\t\tconst l = this._layers[level] || (this._layers[level] = new DrawLayer(level));\r\n\t\t\tl.addDraw(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tconst list = [];\r\n\t\t\tfor (const k in this._layers) {\r\n\t\t\t\tlist.push(this._layers[k]);\r\n\t\t\t}\r\n\t\t\tlist.sort((a, b) => a.level - b.level);\r\n\t\t\tlist.forEach((l) => l.draw(ctx));\r\n\t\t}\r\n\t}\r\n\tclass DrawLayer {\r\n\t\tconstructor(level) {\r\n\t\t\tthis._level = level;\r\n\t\t\tthis._list = [];\r\n\t\t}\r\n\t\tget level() {\r\n\t\t\treturn this._level;\r\n\t\t}\r\n\t\taddDraw(fn) {\r\n\t\t\tthis._list.push(fn);\r\n\t\t}\r\n\t\tdraw(ctx) {\r\n\t\t\tthis._list.forEach((fn) => {\r\n\t\t\t\tctx.save();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfn(ctx);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * Context of cell drawing\r\n\t */\r\n\tclass DrawCellContext {\r\n\t\t/**\r\n\t\t * @private\r\n\t\t */\r\n\t\tconstructor(col, row, ctx, rect, drawRect, drawing, selection, drawLayers) {\r\n\t\t\tthis._col = col;\r\n\t\t\tthis._row = row;\r\n\t\t\tthis._mode = 0;\r\n\t\t\tthis._ctx = ctx;\r\n\t\t\tthis._rect = rect;\r\n\t\t\tthis._drawRect = drawRect;\r\n\t\t\tthis._drawing = drawing;\r\n\t\t\tthis._selection = selection;\r\n\t\t\tthis._drawLayers = drawLayers;\r\n\t\t}\r\n\t\tget drawing() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawing;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tget row() {\r\n\t\t\treturn this._row;\r\n\t\t}\r\n\t\tget col() {\r\n\t\t\treturn this._col;\r\n\t\t}\r\n\t\t/**\r\n\t\t * select status.\r\n\t\t * @return {object} select status\r\n\t\t */\r\n\t\tgetSelectState() {\r\n\t\t\tconst sel = this._selection.select;\r\n\t\t\treturn {\r\n\t\t\t\tselected: sel.col === this._col && sel.row === this._row,\r\n\t\t\t\tselection: this._selection.range.inCell(this._col, this._row),\r\n\t\t\t};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Canvas context.\r\n\t\t * @return {CanvasRenderingContext2D} Canvas context.\r\n\t\t */\r\n\t\tgetContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._ctx;\r\n\t\t\t} else {\r\n\t\t\t\treturn this._grid._getInitContext();\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of cell.\r\n\t\t * @return {Rect} rect Rectangle of cell.\r\n\t\t */\r\n\t\tgetRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._rect;\r\n\t\t\t} else {\r\n\t\t\t\tif (this._rect) {\r\n\t\t\t\t\treturn this._rect;\r\n\t\t\t\t}\r\n\t\t\t\treturn this._grid.getCellRelativeRect(this._col, this._row);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetRect(rect) {\r\n\t\t\tthis._rect = rect;\r\n\t\t}\r\n\t\t/**\r\n\t\t * Rectangle of Drawing range.\r\n\t\t * @return {Rect} Rectangle of Drawing range.\r\n\t\t */\r\n\t\tgetDrawRect() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this._drawRect;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\treturn this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * get Context of current state\r\n\t\t * @return {DrawCellContext} current DrawCellContext.\r\n\t\t */\r\n\t\ttoCurrentContext() {\r\n\t\t\tif (this._mode === 0) {\r\n\t\t\t\treturn this;\r\n\t\t\t} else {\r\n\t\t\t\tconst absoluteRect = this._grid.getCellRect(this._col, this._row);\r\n\t\t\t\tconst rect = _toRelativeRect(this._grid, absoluteRect);\r\n\t\t\t\tconst drawRect = this._toRelativeDrawRect(absoluteRect);\r\n\t\t\t\tconst context = new DrawCellContext(\r\n\t\t\t\t\t\tthis._col, this._row, this.getContext(), rect, drawRect, this.drawing, this._selection,\r\n\t\t\t\t\t\tthis._drawLayers\r\n\t\t\t\t);\r\n\t\t\t\t// toCurrentContext  toCurrentContext\r\n\t\t\t\tcontext.toCurrentContext = this.toCurrentContext.bind(this);\r\n\t\t\t\treturn context;\r\n\t\t\t}\r\n\t\t}\r\n\t\taddLayerDraw(level, fn) {\r\n\t\t\tthis._drawLayers.addDraw(level, fn);\r\n\t\t}\r\n\t\t_toRelativeDrawRect(absoluteRect) {\r\n\t\t\tconst visibleRect = _getVisibleRect(this._grid);\r\n\t\t\tlet rect = absoluteRect.copy();\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst isFrozenCell = this._grid.isFrozenCell(this._col, this._row);\r\n\t\t\tif (this._grid.frozenColCount >= 0 && (!isFrozenCell || !isFrozenCell.col)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._grid.frozenColCount - 1, this._row);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\tMath.max(rect.left, fRect.right),\r\n\t\t\t\t\t\trect.top,\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (this._grid.frozenRowCount >= 0 && (!isFrozenCell || !isFrozenCell.row)) {\r\n\t\t\t\tconst fRect = this._grid.getCellRect(this._col, this._grid.frozenRowCount - 1);\r\n\t\t\t\trect = Rect.bounds(\r\n\t\t\t\t\t\trect.left,\r\n\t\t\t\t\t\tMath.max(rect.top, fRect.bottom),\r\n\t\t\t\t\t\trect.right,\r\n\t\t\t\t\t\trect.bottom\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\tif (!rect.intersection(visibleRect)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\trect.offsetLeft(-visibleRect.left);\r\n\t\t\trect.offsetTop(-visibleRect.top);\r\n\r\n\t\t\treturn rect;\r\n\t\t}\r\n\t\t_delayMode(grid, onTerminate) {\r\n\t\t\tthis._mode = 1;\r\n\t\t\tthis._ctx = null;\r\n\t\t\tthis._rect = null;\r\n\t\t\tthis._drawRect = null;\r\n\t\t\tthis._grid = grid;\r\n\t\t\tthis._onTerminate = onTerminate;\r\n\t\t}\r\n\t\t/**\r\n\t\t * terminate\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tterminate() {\r\n\t\t\tif (this._mode !== 0) {\r\n\t\t\t\tthis._onTerminate();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * DrawGrid\r\n\t * @classdesc cheetahGrid.core.DrawGrid\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.core\r\n\t */\r\n\tclass DrawGrid extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\t/**\r\n\t\t * constructor\r\n\t\t *\r\n\t\t * <pre>\r\n\t\t * Constructor options\r\n\t\t * -----\r\n\t\t * rowCount: grid row count.default 10\r\n\t\t * colCount: grid col count.default 10\r\n\t\t * frozenColCount: default 0\r\n\t\t * frozenRowCount: default 0\r\n\t\t * defaultRowHeight: default grid row height. default 40\r\n\t\t * defaultColWidth: default grid col width. default 80\r\n\t\t * parentElement: canvas parentElement\r\n\t\t * font: default font\r\n\t\t * underlayBackgroundColor: underlay background color\r\n\t\t * -----\r\n\t\t * </pre>\r\n\t\t *\r\n\t\t * @constructor\r\n\t\t * @param  {Object} options Constructor options\r\n\t\t */\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\trowCount = 10,\r\n\t\t\t\t\tcolCount = 10,\r\n\t\t\t\t\tfrozenColCount = 0,\r\n\t\t\t\t\tfrozenRowCount = 0,\r\n\t\t\t\t\tdefaultRowHeight = 40,\r\n\t\t\t\t\tdefaultColWidth = 80,\r\n\t\t\t\t\tfont,\r\n\t\t\t\t\tunderlayBackgroundColor,\r\n\t\t\t\t\tparentElement,\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis[_] = {};\r\n\t\t\tstyle.initDocument();\r\n\t\t\tthis[_].element = createRootElement();\r\n\t\t\tthis[_].scrollable = new Scrollable();\r\n\t\t\tthis[_].handler = new EventHandler();\r\n\t\t\tthis[_].selection = new Selection(this);\r\n\t\t\tthis[_].focusControl = new FocusControl(this, this[_].scrollable.getElement(), this[_].scrollable);\r\n\r\n\t\t\tthis[_].canvas = hiDPI.transform(document.createElement('canvas'));\r\n\t\t\tthis[_].context = this[_].canvas.getContext('2d', {alpha: false});\r\n\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\r\n\t\t\tthis[_].font = font;\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\r\n\t\t\t/////\r\n\t\t\tthis[_].rowHeightsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsMap = new NumberMap();\r\n\t\t\tthis[_].colWidthsLimit = {};\r\n\t\t\tthis[_].calcWidthContext = {\r\n\t\t\t\t_: this[_],\r\n\t\t\t\tget full() {\r\n\t\t\t\t\treturn this._.canvas.width;\r\n\t\t\t\t},\r\n\t\t\t\tget em() {\r\n\t\t\t\t\treturn this._.context.measureText('').width;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis[_].columnResizer = new ColumnResizer(this);\r\n\t\t\tthis[_].cellSelector = new CellSelector(this);\r\n\r\n\t\t\tthis[_].drawCells = {};\r\n\r\n\t\t\tthis[_].element.appendChild(this[_].canvas);\r\n\t\t\tthis[_].element.appendChild(this[_].scrollable.getElement());\r\n\t\t\tthis.updateScroll();\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.appendChild(this[_].element);\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t} else {\r\n\t\t\t\tthis.updateSize();\r\n\t\t\t}\r\n\t\t\t_bindEvents(this);\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this[_].element;\r\n\t\t}\r\n\t\tget canvas() {\r\n\t\t\treturn this[_].canvas;\r\n\t\t}\r\n\t\tfocus() {\r\n\t\t\tconst {col, row} = this[_].selection.select;\r\n\t\t\tthis.focusCell(col, row);\r\n\t\t}\r\n\t\tget selection() {\r\n\t\t\treturn this[_].selection;\r\n\t\t}\r\n\t\tget rowCount() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset rowCount(rowCount) {\r\n\t\t\tthis[_].rowCount = rowCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget colCount() {\r\n\t\t\treturn this[_].colCount;\r\n\t\t}\r\n\t\tset colCount(colCount) {\r\n\t\t\tthis[_].colCount = colCount;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget frozenColCount() {\r\n\t\t\treturn this[_].frozenColCount;\r\n\t\t}\r\n\t\tset frozenColCount(frozenColCount) {\r\n\t\t\tthis[_].frozenColCount = frozenColCount;\r\n\t\t}\r\n\t\tget frozenRowCount() {\r\n\t\t\treturn this[_].frozenRowCount;\r\n\t\t}\r\n\t\tset frozenRowCount(frozenRowCount) {\r\n\t\t\tthis[_].frozenRowCount = frozenRowCount;\r\n\t\t}\r\n\t\tget defaultRowHeight() {\r\n\t\t\treturn this[_].rowCount;\r\n\t\t}\r\n\t\tset defaultRowHeight(defaultRowHeight) {\r\n\t\t\tthis[_].defaultRowHeight = defaultRowHeight;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget defaultColWidth() {\r\n\t\t\treturn this[_].defaultColWidth;\r\n\t\t}\r\n\t\tset defaultColWidth(defaultColWidth) {\r\n\t\t\tthis[_].defaultColWidth = defaultColWidth;\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tget font() {\r\n\t\t\treturn this[_].font;\r\n\t\t}\r\n\t\tset font(font) {\r\n\t\t\tthis[_].font = font;\r\n\t\t}\r\n\t\tget underlayBackgroundColor() {\r\n\t\t\treturn this[_].underlayBackgroundColor;\r\n\t\t}\r\n\t\tset underlayBackgroundColor(underlayBackgroundColor) {\r\n\t\t\tthis[_].underlayBackgroundColor = underlayBackgroundColor;\r\n\t\t}\r\n\t\tconfigure(name, value) {\r\n\t\t\tconst cfg = this[_].config || (this[_].config = {});\r\n\t\t\tif (isDef(value)) {\r\n\t\t\t\tcfg[name] = value;\r\n\t\t\t}\r\n\t\t\treturn cfg[name];\r\n\t\t}\r\n\t\tupdateSize() {\r\n\t\t\t//\r\n\t\t\tthis[_].canvas.style.width = '';\r\n\t\t\tthis[_].canvas.style.height = '';\r\n\t\t\tconst width = Math.floor(this[_].canvas.offsetWidth ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetWidth - style.getScrollBarSize());\r\n\t\t\tconst height = Math.floor(this[_].canvas.offsetHeight ||\r\n\t\t\t\t\t/*for legacy*/this[_].canvas.parentElement.offsetHeight - style.getScrollBarSize());\r\n\r\n\t\t\tthis[_].canvas.width = width;\r\n\t\t\tthis[_].canvas.height = height;\r\n\r\n\t\t\t//style\r\n\t\t\tthis[_].canvas.style.width = `${width}px`;\r\n\t\t\tthis[_].canvas.style.height = `${height}px`;\r\n\r\n\t\t\tconst sel = this[_].selection.select;\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(sel.col, sel.row));\r\n\t\t}\r\n\t\tupdateScroll() {\r\n\t\t\tthis[_].scrollable.setScrollSize(_getScrollWidth(this), _getScrollHeight(this));\r\n\t\t\tthis[_].scroll = {\r\n\t\t\t\tleft: this[_].scrollable.scrollLeft,\r\n\t\t\t\ttop: this[_].scrollable.scrollTop,\r\n\t\t\t};\r\n\t\t}\r\n\t\tgetRowHeight(row) {\r\n\t\t\treturn _getRowHeight(this, row);\r\n\t\t}\r\n\t\tsetRowHeight(row, height) {\r\n\t\t\t_setRowHeight(this, row, height);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetColWidth(col) {\r\n\t\t\treturn _getColWidth(this, col);\r\n\t\t}\r\n\t\tsetColWidth(col, width) {\r\n\t\t\t_setColWidth(this, col, width);\r\n\t\t\tthis.updateScroll();\r\n\t\t}\r\n\t\tgetMaxColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.max || undefined;\r\n\t\t}\r\n\t\tsetMaxColWidth(col, maxwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.max = maxwidth;\r\n\t\t}\r\n\t\tgetMinColWidth(col) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col];\r\n\t\t\treturn obj && obj.min || undefined;\r\n\t\t}\r\n\t\tsetMinColWidth(col, minwidth) {\r\n\t\t\tconst obj = this[_].colWidthsLimit[col] || (this[_].colWidthsLimit[col] = {});\r\n\t\t\tobj.min = minwidth;\r\n\t\t}\r\n\t\tgetCellRect(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, col - 1);\r\n\t\t\tconst width = _getColWidth(this, col);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col) {\r\n\t\t\t\tabsoluteLeft += this[_].scroll.left;\r\n\t\t\t}\r\n\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, row - 1);\r\n\t\t\tconst height = _getRowHeight(this, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.row) {\r\n\t\t\t\tabsoluteTop += this[_].scroll.top;\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tgetCellRelativeRect(col, row) {\r\n\t\t\treturn _toRelativeRect(this, this.getCellRect(col, row));\r\n\t\t}\r\n\t\tgetCellsRect(startCol, startRow, endCol, endRow) {\r\n\t\t\tconst isFrozenStartCell = this.isFrozenCell(startCol, startRow);\r\n\t\t\tconst isFrozenEndCell = this.isFrozenCell(endCol, endRow);\r\n\r\n\t\t\tlet absoluteLeft = _getColsWidth(this, 0, startCol - 1);\r\n\t\t\tlet width = _getColsWidth(this, startCol, endCol);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.col) {\r\n\t\t\t\tconst scrollLeft = this[_].scroll.left;\r\n\t\t\t\tabsoluteLeft += scrollLeft;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.col) {\r\n\t\t\t\t\twidth -= scrollLeft;\r\n\t\t\t\t\twidth = Math.max(width, _getColsWidth(this, startCol, this.frozenColCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet absoluteTop = _getRowsHeight(this, 0, startRow - 1);\r\n\t\t\tlet height = _getRowsHeight(this, startRow, endRow);\r\n\t\t\tif (isFrozenStartCell && isFrozenStartCell.row) {\r\n\t\t\t\tconst scrollTop = this[_].scroll.top;\r\n\t\t\t\tabsoluteTop += scrollTop;\r\n\t\t\t\tif (!isFrozenEndCell || !isFrozenEndCell.row) {\r\n\t\t\t\t\theight -= scrollTop;\r\n\t\t\t\t\theight = Math.max(height, _getColsWidth(this, startRow, this.frozenRowCount - 1));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn new Rect(\r\n\t\t\t\t\tabsoluteLeft,\r\n\t\t\t\t\tabsoluteTop,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t);\r\n\t\t}\r\n\t\tisFrozenCell(col, row) {\r\n\t\t\tconst isFrozenRow = this[_].frozenRowCount > 0 && row < this[_].frozenRowCount;\r\n\t\t\tconst isFrozenCol = this[_].frozenColCount > 0 && col < this[_].frozenColCount;\r\n\t\t\tif (isFrozenRow || isFrozenCol) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\trow: isFrozenRow,\r\n\t\t\t\t\tcol: isFrozenCol,\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetRowAt(absoluteY) {\r\n\t\t\tconst frozen = _getTargetFrozenRowAt(this, absoluteY);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.row;\r\n\t\t\t}\r\n\t\t\tconst row = _getTargetRowAt(this, absoluteY);\r\n\t\t\treturn row ? row.row : -1;\r\n\r\n\t\t}\r\n\t\tgetColAt(absoluteX) {\r\n\t\t\tconst frozen = _getTargetFrozenColAt(this, absoluteX);\r\n\t\t\tif (frozen) {\r\n\t\t\t\treturn frozen.col;\r\n\t\t\t}\r\n\t\t\tconst col = _getTargetColAt(this, absoluteX);\r\n\t\t\treturn col ? col.col : -1;\r\n\t\t}\r\n\t\tgetCellAt(absoluteX, absoluteY) {\r\n\t\t\treturn {\r\n\t\t\t\trow: this.getRowAt(absoluteY),\r\n\t\t\t\tcol: this.getColAt(absoluteX),\r\n\t\t\t};\r\n\t\t}\r\n\t\tmakeVisibleCell(col, row) {\r\n\t\t\tconst isFrozenCell = this.isFrozenCell(col, row);\r\n\t\t\tif (isFrozenCell && isFrozenCell.col && isFrozenCell.row) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst rect = this.getCellRect(col, row);\r\n\t\t\tconst visibleRect = _getScrollableVisibleRect(this);\r\n\t\t\tif (visibleRect.contains(rect)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.col) {\r\n\t\t\t\tif (rect.left < visibleRect.left) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.left - rect.left;\r\n\t\t\t\t} else if (visibleRect.right < rect.right) {\r\n\t\t\t\t\tthis[_].scrollable.scrollLeft -= visibleRect.right - rect.right;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!isFrozenCell || !isFrozenCell.row) {\r\n\t\t\t\tif (rect.top < visibleRect.top) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.top - rect.top;\r\n\t\t\t\t} else if (visibleRect.bottom < rect.bottom) {\r\n\t\t\t\t\tthis[_].scrollable.scrollTop -= visibleRect.bottom - rect.bottom;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfocusCell(col, row) {\r\n\t\t\tconst oldEditMode = this[_].focusControl.editMode;\r\n\t\t\tif (oldEditMode) {\r\n\t\t\t\tthis[_].focusControl.resetInputStatus();\r\n\t\t\t}\r\n\r\n\t\t\tthis[_].focusControl.setFocusRect(this.getCellRect(col, row));\r\n\t\t\t\r\n\t\t\tconst {col: selCol, row: selRow} = this[_].selection.select;\r\n\t\t\tconst results = this.fireListeners(\r\n\t\t\t\t\tEVENT_TYPE.EDITABLEINPUT_CELL,\r\n\t\t\t\t\t{col: selCol, row: selRow}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tconst editMode = (array.findIndex(results, (v) => !!v) >= 0);\r\n\t\t\tthis[_].focusControl.editMode = editMode;\r\n\t\t\t\r\n\t\t\tif (editMode) {\r\n\t\t\t\tthis[_].focusControl.storeInputStatus();\r\n\t\t\t\tthis[_].focusControl.setDefaultInputStatus();\r\n\t\t\t\tthis.fireListeners(\r\n\t\t\t\t\t\tEVENT_TYPE.MODIFY_STATUS_EDITABLEINPUT_CELL,\r\n\t\t\t\t\t\t{col: selCol, row: selRow, input: this[_].focusControl.input}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Failure occurs in IE if focus is not last\r\n\t\t\tthis[_].focusControl.focus();\r\n\t\t}\r\n\t\tinvalidateCell(col, row) {\r\n\t\t\tthis.invalidateGridRect(col, row);\r\n\t\t}\r\n\t\tinvalidateGridRect(startCol, startRow, endCol = startCol, endRow = startRow) {\r\n\t\t\tconst offset = this.getOffsetInvalidateCells();\r\n\t\t\tif (offset > 0) {\r\n\t\t\t\tstartCol -= offset;\r\n\t\t\t\tstartRow -= offset;\r\n\t\t\t\tendCol += offset;\r\n\t\t\t\tendRow += offset;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\tconst cellsRect = this.getCellsRect(startCol, startRow, endCol, endRow);\r\n\t\t\tconst invalidateTarget = visibleRect.intersection(cellsRect);\r\n\t\t\tif (invalidateTarget) {\r\n\r\n\t\t\t\tif (this[_].frozenColCount > 0 && endCol >= this[_].frozenColCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenColsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.left = Math.min(frozenRect.right - 1, frozenRect.right);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this[_].frozenRowCount > 0 && endRow >= this[_].frozenRowCount) {\r\n\t\t\t\t\tconst frozenRect = _getFrozenRowsRect(this);\r\n\t\t\t\t\tif (frozenRect.intersection(invalidateTarget)) {\r\n\t\t\t\t\t\tinvalidateTarget.top = Math.min(frozenRect.bottom - 1, invalidateTarget.top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_invalidateRect(this, invalidateTarget);\r\n\t\t\t}\r\n\t\t}\r\n\t\tinvalidate() {\r\n\t\t\tconst visibleRect = _getVisibleRect(this);\r\n\t\t\t_invalidateRect(this, visibleRect);\r\n\t\t}\r\n\t\t/**\r\n\t\t * get cell value at copy action\r\n\t\t * <p>\r\n\t\t * Please implement\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tgetCopyCellValue(col, row) {\r\n\t\t\t//Please implement get cell value!!\r\n\t\t}\r\n\t\t/**\r\n\t\t * Draw a cell\r\n\t\t * <p>\r\n\t\t * Please implement cell drawing.\r\n\t\t * </p>\r\n\t\t *\r\n\t\t * @protected\r\n\t\t * @param  {number} col Column index of cell.\r\n\t\t * @param  {number} row Row index of cell.\r\n\t\t * @param  {DrawCellContext} context context of cell drawing.\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tonDrawCell(col, row, context) {\r\n\t\t\t//Please implement cell drawing!!\r\n\t\t}\r\n\t\taddDisposable(disposable) {\r\n\t\t\tif (!disposable || !disposable.dispose || typeof disposable.dispose !== 'function') {\r\n\t\t\t\tthrow new Error('not disposable!');\r\n\t\t\t}\r\n\t\t\tconst disposables = this[_].disposables = this[_].disposables || [];\r\n\t\t\tdisposables.push(disposable);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis[_].handler.dispose();\r\n\t\t\tthis[_].scrollable.dispose();\r\n\t\t\tthis[_].focusControl.dispose();\r\n\t\t\tthis[_].columnResizer.dispose();\r\n\t\t\tthis[_].cellSelector.dispose();\r\n\t\t\tif (this[_].disposables) {\r\n\t\t\t\tthis[_].disposables.forEach((disposable) => disposable.dispose());\r\n\t\t\t\tthis[_].disposables = null;\r\n\t\t\t}\r\n\r\n\t\t\tconst {parentElement} = this[_].element;\r\n\t\t\tif (parentElement) {\r\n\t\t\t\tparentElement.removeChild(this[_].element);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgetAttachCellArea(col, row) {\r\n\t\t\treturn {\r\n\t\t\t\telement: this.getElement(),\r\n\t\t\t\trect: _toRelativeRect(this, this.getCellRect(col, row)),\r\n\t\t\t};\r\n\t\t}\r\n\t\tbindEventsInternal() {\r\n\t\t\t//nop\r\n\t\t}\r\n\t\tgetTargetRowAtInternal(absoluteY) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowsHeightInternal(startRow, endRow) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetRowHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetScrollHeightInternal(row) {\r\n\t\t\t// \r\n\t\t}\r\n\t\tgetMoveLeftColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col - 1;\r\n\t\t}\r\n\t\tgetMoveRightColByKeyDownInternal({col, row}) {\r\n\t\t\treturn col + 1;\r\n\t\t}\r\n\t\tgetMoveUpRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row - 1;\r\n\t\t}\r\n\t\tgetMoveDownRowByKeyDownInternal({col, row}) {\r\n\t\t\treturn row + 1;\r\n\t\t}\r\n\t\tgetOffsetInvalidateCells() {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t_getInitContext() {\r\n\t\t\tconst ctx = this[_].context;\r\n\t\t\t//\r\n\t\t\tctx.fillStyle = 'white';\r\n\t\t\tctx.strokeStyle = 'black';\r\n\t\t\tctx.textAlign = 'left';\r\n\t\t\tctx.textBaseline = 'top';\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.font = this.font || '16px sans-serif';\r\n\t\t\treturn ctx;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = DrawGrid;\r\n}","'use strict';\r\n{\r\n\tconst {isDef, obj: {each}} = require('../internal/utils');\r\n\t//private symbol\r\n\tconst {_} = require('../internal/symbolManager').get();\r\n\r\n\tlet nextId = 1;\r\n\t/**\r\n\t * event target.\r\n\t */\r\n\tclass EventTarget {\r\n\t\tconstructor() {\r\n\t\t\tthis[_] = {};\r\n\t\t\tthis[_].listeners = {};\r\n\t\t\tthis[_].listenerData = {};\r\n\t\t}\r\n\t\t/**\r\n\t\t * Adds an event listener.\r\n\t\t * @param  {string} type The event type id.\r\n\t\t * @param  {function} listener Callback method.\r\n\t\t * @return {number} unique id for the listener.\r\n\t\t */\r\n\t\tlisten(type, listener) {\r\n\t\t\tconst list = this[_].listeners[type] || (this[_].listeners[type] = []);\r\n\t\t\tlist.push(listener);\r\n\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis[_].listenerData[id] = {\r\n\t\t\t\ttype,\r\n\t\t\t\tlistener,\r\n\t\t\t\tremove: () => {\r\n\t\t\t\t\tdelete this[_].listenerData[id];\r\n\t\t\t\t\tconst index = list.indexOf(listener);\r\n\t\t\t\t\tlist.splice(index, 1);\r\n\t\t\t\t\tif (!this[_].listeners[type].length) {\r\n\t\t\t\t\t\tdelete this[_].listeners[type];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\treturn id;\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Removes an event listener which was added with listen() by the id returned by listen().\r\n\t\t * @param  {number} id the id returned by listen().\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tunlisten(id) {\r\n\t\t\tthis[_].listenerData[id].remove();\r\n\t\t}\r\n\t\taddEventListener(type, listener) {\r\n\t\t\tthis.listen(type, listener);\r\n\t\t}\r\n\t\tremoveEventListener(type, listener) {\r\n\t\t\teach(this[_].listenerData, (obj, id) => {\r\n\t\t\t\tif (obj.type === type && obj.listener === listener) {\r\n\t\t\t\t\tthis.unlisten(id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListeners(type) {\r\n\t\t\treturn !!this[_].listeners[type];\r\n\t\t}\r\n\t\t/**\r\n\t\t * Fires all registered listeners\r\n\t\t * @param  {string}    type The type of the listeners to fire.\r\n\t\t * @param  {...*} args fire arguments\r\n\t\t * @return {*} the result of the last listener\r\n\t\t */\r\n\t\tfireListeners(type, ...args) {\r\n\t\t\tconst list = this[_].listeners[type];\r\n\t\t\tif (!list) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t\treturn list.\r\n\t\t\t\tmap((listener) => listener.call(this, ...args)).\r\n\t\t\t\tfilter(isDef);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tdelete this[_];\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventTarget;\r\n}","'use strict';\r\n{\r\n\tconst DataSource = require('./data/DataSource');\r\n\tconst CachedDataSource = require('./data/CachedDataSource');\r\n\t\r\n\r\n\t/**\r\n\t * data modules\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.data\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tDataSource,\r\n\t\tCachedDataSource\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst DataSource = require('./DataSource');\r\n\r\n\tfunction _setFieldCache({_fCache}, index, field, value) {\r\n\t\tconst recCache = _fCache[index] || (_fCache[index] = {});\r\n\t\trecCache[field] = value;\r\n\t}\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.CachedDataSource\r\n\t * @extends cheetahGrid.data.DataSource\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass CachedDataSource extends DataSource {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn DataSource.EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new CachedDataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor(opt = {}) {\r\n\t\t\tsuper(opt);\r\n\t\t\tthis._rCache = {};\r\n\t\t\tthis._fCache = {};\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\tif (this._rCache && this._rCache[index]) {\r\n\t\t\t\treturn this._rCache[index];\r\n\t\t\t}\r\n\t\t\treturn super.getOriginal(index);\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tconst cache = getChainSafe(this._fCache, index, field);\r\n\t\t\tif (cache) {\r\n\t\t\t\treturn cache;\r\n\t\t\t}\r\n\t\t\treturn super.getOriginalField(index, field);\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tconst fCache = this._fCache;\r\n\t\t\tif (fCache && fCache[index]) {\r\n\t\t\t\tdelete fCache[index]; // clear row cache\r\n\t\t\t}\r\n\t\t\treturn super.setOriginalField(index, field, value);\r\n\t\t}\r\n\t\tclearCache() {\r\n\t\t\tif (this._rCache) {\r\n\t\t\t\tthis._rCache = {};\r\n\t\t\t}\r\n\t\t\tif (this._fCache) {\r\n\t\t\t\tthis._fCache = {};\r\n\t\t\t}\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t_setFieldCache(this, index, field, val);\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\tthis._rCache[index] = val;\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = CachedDataSource;\r\n}","'use strict';\r\n{\r\n\tconst {array, isDef, isPromise, getOrApply, applyChainSafe, emptyFn} = require('../internal/utils');\r\n\tconst sort = require('../internal/sort');\r\n\tconst EventTarget = require('../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tUPDATE_LENGTH: 'update_length',\r\n\t\tUPDATED_LENGTH: 'updated_length',\r\n\t\tUPDATED_ORDER: 'updated_order',\r\n\t};\r\n\r\n\tfunction getValue(value, setPromiseBack) {\r\n\t\tvalue = getOrApply(value);\r\n\t\tif (isPromise(value)) {\r\n\t\t\tvalue = value.then((r) => {\r\n\t\t\t\tif (!isPromise(r)) {\r\n\t\t\t\t\tsetPromiseBack(r);\r\n\t\t\t\t}\r\n\t\t\t\treturn getValue(r, setPromiseBack);\r\n\t\t\t});\r\n\t\t\t//\r\n\t\t\tsetPromiseBack(value);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tfunction getField(record, field, setPromiseBack) {\r\n\t\tif (!isDef(record)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (isPromise(record)) {\r\n\t\t\treturn record.then((r) => getField(r, field, setPromiseBack));\r\n\t\t}\r\n\t\tif (field in record) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\tif (typeof field === 'function') {\r\n\t\t\treturn getValue(field(record), setPromiseBack);\r\n\t\t}\r\n\r\n\t\tconst ss = (field + '').split('.');\r\n\t\tif (ss.length <= 1) {\r\n\t\t\treturn getValue(record[field], setPromiseBack);\r\n\t\t}\r\n\t\treturn getValue(applyChainSafe(record, (val, name) => getField(val, name, emptyFn), ...ss), setPromiseBack);\r\n\t}\r\n\tfunction setField(record, field, value) {\r\n\t\tif (field in record) {\r\n\t\t\trecord[field] = value;\r\n\t\t} else if (typeof field === 'function') {\r\n\t\t\treturn field(record, value);\r\n\t\t} else if (typeof field === 'string') {\r\n\t\t\tconst ss = (field + '').split('.');\r\n\t\t\tlet obj = record;\r\n\t\t\tconst {length} = ss;\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst f = ss[i];\r\n\t\t\t\tif (i === length - 1) {\r\n\t\t\t\t\tobj[f] = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj = obj[f] || (obj[f] = {});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\trecord[field] = value;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\tfunction _getIndex(dataSource, index) {\r\n\t\tif (!dataSource._sortedIndexMap) {\r\n\t\t\treturn index;\r\n\t\t}\r\n\t\tconst mapIndex = dataSource._sortedIndexMap[index];\r\n\t\treturn isDef(mapIndex) ? mapIndex : index;\r\n\t}\r\n\r\n\t/**\r\n\t * grid data source\r\n\t *\r\n\t * @classdesc cheetahGrid.data.DataSource\r\n\t * @extends EventTarget\r\n\t * @memberof cheetahGrid.data\r\n\t */\r\n\tclass DataSource extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic ofArray(array) {\r\n\t\t\treturn new DataSource({\r\n\t\t\t\tget: (index) => array[index],\r\n\t\t\t\tlength: array.length\r\n\t\t\t});\r\n\t\t}\r\n\t\tconstructor({get, length = 0} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._get = get;\r\n\t\t\tthis._length = length;\r\n\t\t\tthis._sortedIndexMap = false;\r\n\t\t}\r\n\t\tget(index) {\r\n\t\t\treturn this.getOriginal(_getIndex(this, index));\r\n\t\t}\r\n\t\tgetField(index, field) {\r\n\t\t\treturn this.getOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\thasField(index, field) {\r\n\t\t\treturn this.hasOriginalField(_getIndex(this, index), field);\r\n\t\t}\r\n\t\tsetField(index, field, value) {\r\n\t\t\treturn this.setOriginalField(_getIndex(this, index), field, value);\r\n\t\t}\r\n\t\tsort(field, order) {\r\n\t\t\tconst sortedIndexMap = new Array(this._length);\r\n\r\n\t\t\tconst orderFn = order !== 'desc'\r\n\t\t\t\t? (v1, v2) => v1 === v2 ? 0 : v1 > v2 ? 1 : -1\r\n\t\t\t\t: (v1, v2) => v1 === v2 ? 0 : v1 < v2 ? 1 : -1;\r\n\r\n\t\t\treturn sort.sortPromise(\r\n\t\t\t\t\t(index) => isDef(sortedIndexMap[index])\r\n\t\t\t\t\t\t? sortedIndexMap[index]\r\n\t\t\t\t\t\t: (sortedIndexMap[index] = index),\r\n\t\t\t\t\t(index, rel) => {\r\n\t\t\t\t\t\tsortedIndexMap[index] = rel;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis._length,\r\n\t\t\t\t\torderFn,\r\n\t\t\t\t\t(index) => this.getOriginalField(index, field)\r\n\t\t\t).then(() => {\r\n\t\t\t\tthis._sortedIndexMap = sortedIndexMap;\r\n\t\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_ORDER);\r\n\t\t\t});\r\n\t\t}\r\n\t\tget length() {\r\n\t\t\treturn this._length;\r\n\t\t}\r\n\t\tset length(length) {\r\n\t\t\tconst results = this.fireListeners(EVENT_TYPE.UPDATE_LENGTH, length);\r\n\t\t\tif (array.findIndex(results, (v) => !v) >= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._length = length;\r\n\t\t\tthis.fireListeners(EVENT_TYPE.UPDATED_LENGTH, this._length);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tsuper.dispose();\r\n\t\t}\r\n\t\tgetOriginal(index) {\r\n\t\t\treturn getValue(this._get(index), (val) => {\r\n\t\t\t\tthis.recordPromiseCallBackInternal(index, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\tgetOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn getField(record, field, (val) => {\r\n\t\t\t\tthis.fieldPromiseCallBackInternal(index, field, val);\r\n\t\t\t});\r\n\t\t}\r\n\t\thasOriginalField(index, field) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (typeof field === 'function') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn field in record;\r\n\t\t}\r\n\t\tsetOriginalField(index, field, value) {\r\n\t\t\tif (!isDef(field)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst record = this.getOriginal(index);\r\n\t\t\treturn setField(record, field, value);\r\n\t\t}\r\n\t\tfieldPromiseCallBackInternal(index, field, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t\trecordPromiseCallBackInternal(index, val) {\r\n\t\t\t//\r\n\t\t}\r\n\t}\r\n\tDataSource.EMPTY = new DataSource({\r\n\t\tlength: 0,\r\n\t});\r\n\r\n\tmodule.exports = DataSource;\r\n}","'use strict';\r\n\r\nconst {isDef} = require('../internal/utils');\r\nclass Inline {\r\n\tconstructor(content) {\r\n\t\tthis._content = isDef(content) ? content : '';\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn ctx.measureText(this._content).width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(fn) {\r\n\t\t\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight,\r\n\t\toffsetTop,\r\n\t\toffsetBottom,\r\n\t}) {\r\n\t\tcanvashelper.fillTextRect(ctx, this._content,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t}\r\n}\r\nmodule.exports = Inline;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\n\r\nclass InlineDrawer extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tdraw,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._draw = draw;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t\toffsetTop,\r\n\t\t\t\toffsetBottom,\r\n\t\t\t}) {\r\n\t\tthis._draw({\r\n\t\t\tctx,\r\n\t\t\tcanvashelper,\r\n\t\t\trect,\r\n\t\t\toffset,\r\n\t\t\toffsetLeft,\r\n\t\t\toffsetRight,\r\n\t\t\toffsetTop,\r\n\t\t\toffsetBottom,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineDrawer;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst fonts = require('../internal/fonts');\r\n\r\nclass InlineIcon extends Inline {\r\n\tconstructor(icon) {\r\n\t\tsuper();\r\n\t\tthis._icon = icon || {};\r\n\t}\r\n\twidth({ctx}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.width) {\r\n\t\t\treturn icon.width;\r\n\t\t}\r\n\t\tif (icon.font && fonts.check(icon.font, icon.content)) {\r\n\t\t\tctx.save();\r\n\t\t\ttry {\r\n\t\t\t\tctx.font = icon.font || ctx.font;\r\n\t\t\t\treturn ctx.measureText(icon.content).width;\r\n\t\t\t} finally {\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfont() {\r\n\t\treturn this._icon.font;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._icon.color;\r\n\t}\r\n\tcanDraw() {\r\n\t\tconst icon = this._icon;\r\n\t\treturn icon.font ? fonts.check(icon.font, icon.content) : true;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.font && !fonts.check(icon.font, icon.content)) {\r\n\t\t\tfonts.load(icon.font, icon.content, callback);\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t\toffsetTop,\r\n\t\t\t\toffsetBottom,\r\n\t\t\t}) {\r\n\t\tconst icon = this._icon;\r\n\t\tif (icon.content) {\r\n\t\t\tcanvashelper.fillTextRect(ctx, icon.content,\r\n\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineIcon;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {getCacheOrLoad} = require('../internal/imgs');\r\nconst {isPromise} = require('../internal/utils');\r\n\r\nclass InlineImage extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsrc,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\tthis._src = src;\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._imageLeft = imageLeft;\r\n\t\tthis._imageTop = imageTop;\r\n\t\tthis._imageWidth = imageWidth;\r\n\t\tthis._imageHeight = imageHeight;\r\n\r\n\t\tthis._onloaded = [];\r\n\r\n\r\n\t\tthis._loaded = false;\r\n\t\tif (isPromise(src)) {\r\n\t\t\tsrc.then((s) => {\r\n\t\t\t\tthis._src = s;\r\n\t\t\t\tthis._loadImage(s);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loadImage(src);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t_loadImage(src) {\r\n\t\tconst img = this._inlineImg = getCacheOrLoad('InlineImage', 50, src);\r\n\t\tif (isPromise(img)) {\r\n\t\t\timg.then((i) => {\r\n\t\t\t\tthis._loaded = true;\r\n\t\t\t\tthis._inlineImg = i;\r\n\r\n\t\t\t\tthis._onloaded.forEach((fn) => fn());\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._loaded = true;\r\n\t\t}\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width || (this._loaded ? this._inlineImg.width : 0);\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn null;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn this._loaded;\r\n\t}\r\n\tonReady(callback) {\r\n\t\tif (isPromise(this._src) || isPromise(this._inlineImg)) {\r\n\t\t\tthis._onloaded.push(() => callback());\r\n\t\t}\r\n\t}\r\n\tdraw(\r\n\t\t\t{\r\n\t\t\t\tctx,\r\n\t\t\t\tcanvashelper,\r\n\t\t\t\trect,\r\n\t\t\t\toffset,\r\n\t\t\t\toffsetLeft,\r\n\t\t\t\toffsetRight,\r\n\t\t\t\toffsetTop,\r\n\t\t\t\toffsetBottom,\r\n\t\t\t}) {\r\n\t\tconst img = this._inlineImg;\r\n\t\tcanvashelper.drawInlineImageRect(ctx, img,\r\n\t\t\t\tthis._imageLeft || 0, this._imageTop || 0,\r\n\t\t\t\tthis._imageWidth || img.width, this._imageHeight || img.height,\r\n\t\t\t\tthis._width || img.width, this._height || img.height,\r\n\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t{\r\n\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineImage;","'use strict';\r\n\r\nconst Inline = require('./Inline');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nclass InlinePath2D extends Inline {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tpath,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tcolor,\r\n\t\t\t}) {\r\n\t\tsuper();\r\n\t\t// IEPath2Dpolyfill\r\n\t\tthis._path = new path2DManager.Path2D(path);\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis._color = color;\r\n\t}\r\n\twidth({ctx}) {\r\n\t\treturn this._width;\r\n\t}\r\n\tfont() {\r\n\t\treturn null;\r\n\t}\r\n\tcolor() {\r\n\t\treturn this._color;\r\n\t}\r\n\tcanDraw() {\r\n\t\treturn true;\r\n\t}\r\n\tonReady(callback) {\r\n\t}\r\n\tdraw({\r\n\t\tctx,\r\n\t\tcanvashelper,\r\n\t\trect,\r\n\t\toffset,\r\n\t\toffsetLeft,\r\n\t\toffsetRight,\r\n\t\toffsetTop,\r\n\t\toffsetBottom,\r\n\t}) {\r\n\t\toffset++;\r\n\t\tconst padding = {\r\n\t\t\tleft: offsetLeft,\r\n\t\t\tright: offsetRight,\r\n\t\t\ttop: offsetTop,\r\n\t\t\tbottom: offsetBottom,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, this._width, this._height, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\tctx.translate(pos.x, pos.y);\r\n\t\t\tctx.fill(this._path);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nmodule.exports = InlinePath2D;","'use strict';\r\n\r\nconst InlineImage = require('./InlineImage');\r\nconst {then} = require('../internal/utils');\r\n\r\nfunction buildSvgDataUrl(svg) {\r\n\tconst data = (typeof svg === 'string') ? svg : new XMLSerializer().serializeToString(svg);\r\n\tconst url = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(data); //svgbase64\r\n\treturn url;\r\n}\r\nfunction getSvgElement(svg) {\r\n\tif (typeof svg === 'string') {\r\n\t\tconst parser = new DOMParser();\r\n\t\treturn parser.parseFromString(svg, 'image/svg+xml');\r\n\t} else {\r\n\t\treturn svg;\r\n\t}\r\n}\r\n\r\nclass InlineSvg extends InlineImage {\r\n\tconstructor(\r\n\t\t\t{\r\n\t\t\t\tsvg,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\timageLeft,\r\n\t\t\t\timageTop,\r\n\t\t\t\timageWidth,\r\n\t\t\t\timageHeight,\r\n\t\t\t}) {\r\n\t\tconst svgElem = then(svg, getSvgElement);\r\n\t\tconst elmWidth = svgElem.getAttribute ? svgElem.getAttribute('width') : null;\r\n\t\tconst elmHeight = svgElem.getAttribute ? svgElem.getAttribute('height') : null;\r\n\t\tsuper({\r\n\t\t\tsrc: then(svg, buildSvgDataUrl),\r\n\t\t\twidth: width || elmWidth,\r\n\t\t\theight: height || elmHeight,\r\n\t\t\timageWidth: elmWidth,\r\n\t\t\timageHeight: elmHeight,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nmodule.exports = InlineSvg;","'use strict';\r\n\r\n\r\nconst Inline = require('./Inline');\r\nconst InlineIcon = require('./InlineIcon');\r\nconst InlineImage = require('./InlineImage');\r\nconst InlineSvg = require('./InlineSvg');\r\nconst InlineDrawer = require('./InlineDrawer');\r\nconst InlinePath2D = require('./InlinePath2D');\r\nconst {isDef} = require('../internal/utils');\r\nconst {calcStartPosition} = require('../internal/canvases');\r\nconst icons = require('../icons');\r\nconst path2DManager = require('../internal/path2DManager');\r\n\r\nfunction drawRegisteredIcon(ctx, icon,\r\n\t\tdrawWidth, drawHeight,\r\n\t\tleft, top, width, height,\r\n\t\t{\r\n\t\t\toffset = 2,\r\n\t\t\tpadding,\r\n\t\t} = {}) {\r\n\tconst rect = {\r\n\t\tleft,\r\n\t\ttop,\r\n\t\twidth,\r\n\t\theight,\r\n\t\tright: left + width,\r\n\t\tbottom: top + height,\r\n\t};\r\n\tctx.save();\r\n\ttry {\r\n\t\tctx.beginPath();\r\n\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t//clip\r\n\t\tctx.clip();\r\n\r\n\t\t//\r\n\t\tconst pos = calcStartPosition(ctx, rect, drawWidth, drawHeight, {\r\n\t\t\toffset,\r\n\t\t\tpadding\r\n\t\t});\r\n\t\tpath2DManager.fill(icon, ctx, pos.x, pos.y, drawWidth, drawHeight);\r\n\t} finally {\r\n\t\tctx.restore();\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\ticonOf(icon) {\r\n\t\tif (icon instanceof Inline) {\r\n\t\t\treturn icon;\r\n\t\t}\r\n\t\tif (!icon) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (icon.font && icon.content) {\r\n\t\t\treturn new InlineIcon(icon);\r\n\t\t}\r\n\t\tif (icon.src) {\r\n\t\t\treturn new InlineImage({\r\n\t\t\t\tsrc: icon.src,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.svg) {\r\n\t\t\treturn new InlineSvg({\r\n\t\t\t\tsvg: icon.svg,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (icon.path) {\r\n\t\t\treturn new InlinePath2D({\r\n\t\t\t\tpath: icon.path,\r\n\t\t\t\twidth: icon.width,\r\n\t\t\t\theight: icon.width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst regedIcons = icons.get();\r\n\t\tif (icon.name && regedIcons[icon.name]) {\r\n\t\t\tconst regedIcon = regedIcons[icon.name];\r\n\t\t\tconst width = icon.width || Math.max(regedIcon.width, regedIcon.height);\r\n\t\t\treturn new InlineDrawer({\r\n\t\t\t\tdraw({\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tcanvashelper,\r\n\t\t\t\t\trect,\r\n\t\t\t\t\toffset,\r\n\t\t\t\t\toffsetLeft,\r\n\t\t\t\t\toffsetRight,\r\n\t\t\t\t\toffsetTop,\r\n\t\t\t\t\toffsetBottom,\r\n\t\t\t\t}) {\r\n\t\t\t\t\tdrawRegisteredIcon(ctx, regedIcon,\r\n\t\t\t\t\t\t\twidth, width,\r\n\t\t\t\t\t\t\trect.left, rect.top, rect.width, rect.height,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\toffset: offset + 1,\r\n\t\t\t\t\t\t\t\tpadding: {\r\n\t\t\t\t\t\t\t\t\tleft: offsetLeft,\r\n\t\t\t\t\t\t\t\t\tright: offsetRight,\r\n\t\t\t\t\t\t\t\t\ttop: offsetTop,\r\n\t\t\t\t\t\t\t\t\tbottom: offsetBottom,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\twidth,\r\n\t\t\t\theight: width,\r\n\t\t\t\tcolor: icon.color,\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn new InlineIcon(icon);\r\n\t},\r\n\tof(content) {\r\n\t\tif (!isDef(content)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (content instanceof Inline) {\r\n\t\t\treturn content;\r\n\t\t}\r\n\t\treturn new Inline(content);\r\n\t},\r\n\tbuildInlines(icons, inline) {\r\n\t\tconst result = [];\r\n\t\tif (icons) {\r\n\t\t\tresult.push(...(icons.map((icon) => this.iconOf(icon)).filter((e) => !!e)));\r\n\t\t}\r\n\t\tif (Array.isArray(inline) && inline.filter((il) => il instanceof Inline).length) {\r\n\t\t\tresult.push(...(inline.map((il) => this.of(il)).filter((e) => !!e)));\r\n\t\t} else {\r\n\t\t\tconst il = this.of(inline);\r\n\t\t\tif (il) {\r\n\t\t\t\tresult.push(il);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst BaseStyle = require('./style/BaseStyle');\r\n\tconst Style = require('./style/Style');\r\n\r\n\tconst style = {\r\n\t\tget BaseStyle() {\r\n\t\t\treturn BaseStyle;\r\n\t\t},\r\n\t\tget Style() {\r\n\t\t\treturn Style;\r\n\t\t},\r\n\t\tof(columnStyle, StyleClass) {\r\n\t\t\tif (columnStyle) {\r\n\t\t\t\tif (columnStyle instanceof Style) {\r\n\t\t\t\t\treturn columnStyle;\r\n\t\t\t\t} else if (typeof columnStyle === 'function') {\r\n\t\t\t\t\treturn style.of(columnStyle(), StyleClass);\r\n\t\t\t\t}\r\n\t\t\t\treturn new StyleClass(columnStyle);\r\n\t\t\t} else {\r\n\t\t\t\treturn StyleClass.DEFAULT;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst EventTarget = require('../../core/EventTarget');\r\n\r\n\tconst EVENT_TYPE = {\r\n\t\tCHANGE_STYLE: 'change_style',\r\n\t};\r\n\r\n\tlet defaultStyle;\r\n\tclass BaseStyle extends EventTarget {\r\n\t\tstatic get EVENT_TYPE() {\r\n\t\t\treturn EVENT_TYPE;\r\n\t\t}\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new BaseStyle());\r\n\t\t}\r\n\t\tconstructor(\r\n\t\t\t\t{\r\n\t\t\t\t\ttextAlign = 'left',\r\n\t\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\t\tbgColor\r\n\t\t\t\t} = {}) {\r\n\t\t\tsuper();\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t}\r\n\t\tget textAlign() {\r\n\t\t\treturn this._textAlign;\r\n\t\t}\r\n\t\tset textAlign(textAlign) {\r\n\t\t\tthis._textAlign = textAlign;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget textBaseline() {\r\n\t\t\treturn this._textBaseline;\r\n\t\t}\r\n\t\tset textBaseline(textBaseline) {\r\n\t\t\tthis._textBaseline = textBaseline;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tget bgColor() {\r\n\t\t\treturn this._bgColor;\r\n\t\t}\r\n\t\tset bgColor(bgColor) {\r\n\t\t\tthis._bgColor = bgColor;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tdoChangeStyle() {\r\n\t\t\tthis.fireListeners(EVENT_TYPE.CHANGE_STYLE);\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new BaseStyle(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseStyle;\r\n}","'use strict';\r\n{\r\n\tconst BaseStyle = require('./BaseStyle');\r\n\tlet defaultStyle;\r\n\tclass Style extends BaseStyle {\r\n\t\tstatic get DEFAULT() {\r\n\t\t\treturn defaultStyle ? defaultStyle : (defaultStyle = new Style());\r\n\t\t}\r\n\t\tconstructor(style = {}) {\r\n\t\t\tsuper(style);\r\n\t\t\tthis._color = style.color;\r\n\t\t}\r\n\t\tget color() {\r\n\t\t\treturn this._color;\r\n\t\t}\r\n\t\tset color(color) {\r\n\t\t\tthis._color = color;\r\n\t\t\tthis.doChangeStyle();\r\n\t\t}\r\n\t\tclone() {\r\n\t\t\treturn new Style(this);\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Style;\r\n}","'use strict';\r\n{\r\n\tconst Header = require('./type/Header');\r\n\tconst SortHeader = require('./type/SortHeader');\r\n\r\n\tconst type = {\r\n\t\tcreate(headerCell) {\r\n\t\t\tif (headerCell.sort) {\r\n\t\t\t\treturn new SortHeader(headerCell);\r\n\t\t\t}\r\n\t\t\treturn new Header(headerCell);\r\n\t\t}\r\n\t};\r\n\tmodule.exports = type;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\r\n\tclass BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tthis._headerCell = headerCell;\r\n\t\t\tthis.onDrawCell = this.onDrawCell.bind(this);//\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tonDrawCell(cellValue, info, context, grid) {\r\n\t\t\tconst {style, drawCellBase} = info;\r\n\t\t\tdelete info.getRecord;\r\n\t\t\tdelete info.style;\r\n\t\t\tconst helper = grid.getGridCanvasHelper();\r\n\t\t\tdrawCellBase();\r\n\t\t\t//\r\n\t\t\tthis.drawInternal(\r\n\t\t\t\t\tcellValue,\r\n\t\t\t\t\tcontext,\r\n\t\t\t\t\tstyleContents.of(style, this.StyleClass),\r\n\t\t\t\t\thelper,\r\n\t\t\t\t\tgrid,\r\n\t\t\t\t\tinfo\r\n\t\t\t);\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, info) {\r\n\t\t\t\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = BaseHeader;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\r\n\tclass Header extends BaseHeader {\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\tbgColor,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t});\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Header;\r\n}","'use strict';\r\n{\r\n\tconst styleContents = require('../style');\r\n\tconst {Style} = styleContents;\r\n\tconst BaseHeader = require('./BaseHeader');\r\n\tconst {isDef} = require('../../internal/utils');\r\n\tconst {EVENT_TYPE: {\r\n\t\tCLICK_CELL,\r\n\t\tMOUSEOVER_CELL,\r\n\t\tMOUSEOUT_CELL,\r\n\t\tMOUSEMOVE_CELL,\r\n\t}} = require('../../core/DrawGrid');\r\n\r\n\tclass SortHeader extends BaseHeader {\r\n\t\tconstructor(headerCell) {\r\n\t\t\tsuper(headerCell);\r\n\t\t\tthis._sort = headerCell.sort;\r\n\t\t\tthis._range = headerCell.range;\r\n\t\t}\r\n\t\tget StyleClass() {\r\n\t\t\treturn Style;\r\n\t\t}\r\n\t\tdrawInternal(value, context, style, helper, grid, {drawCellBase}) {\r\n\t\t\tconst {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline = 'middle',\r\n\t\t\t\tcolor,\r\n\t\t\t\tbgColor,\r\n\t\t\t\tfont,\r\n\t\t\t} = style;\r\n\t\t\t\r\n\t\t\tif (bgColor) {\r\n\t\t\t\tdrawCellBase({\r\n\t\t\t\t\tbgColor,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst state = grid.sortState;\r\n\t\t\tlet order = undefined;\r\n\t\t\tif (this._range.isCellInRange(state.col, this._range.startRow)) {\r\n\t\t\t\torder = state.order;\r\n\t\t\t}\r\n\r\n\t\t\tconst ctx = context.getContext();\r\n\t\t\tconst arrowSize = ctx.measureText('').width * 1.2;\r\n\r\n\t\t\thelper.text(value, context, {\r\n\t\t\t\ttextAlign,\r\n\t\t\t\ttextBaseline,\r\n\t\t\t\tcolor,\r\n\t\t\t\tfont,\r\n\t\t\t\ticons: [{\r\n\t\t\t\t\tname: isDef(order) ? (order === 'asc' ? 'arrow_downward' : 'arrow_upward') : null,\r\n\t\t\t\t\twidth: arrowSize,\r\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.38)',\r\n\t\t\t\t}],\r\n\t\t\t});\r\n\t\t}\r\n\t\t_executeSort(newState, grid) {\r\n\t\t\tif (typeof this._sort === 'function') {\r\n\t\t\t\tthis._sort(newState.order, newState.col, grid);\r\n\t\t\t} else {\r\n\t\t\t\tgrid.dataSource.sort(grid.getField(newState.col), newState.order);\r\n\t\t\t}\r\n\t\t}\r\n\t\tbindGridEvent(grid) {\r\n\t\t\treturn [\r\n\t\t\t\tgrid.listen(CLICK_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst state = grid.sortState;\r\n\t\t\t\t\tlet newState;\r\n\t\t\t\t\tif (this._range.isCellInRange(state.col, e.row)) {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: state.order === 'asc' ? 'desc' : 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnewState = {\r\n\t\t\t\t\t\t\tcol: this._range.startCol,\r\n\t\t\t\t\t\t\torder: 'asc'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.sortState = newState;\r\n\t\t\t\t\tthis._executeSort(newState, grid);\r\n\t\t\t\t\tgrid.invalidateGridRect(0, 0, grid.colCount - 1, grid.rowCount - 1);\r\n\t\t\t\t}),\r\n\t\t\t\t// mouse move\r\n\t\t\t\tgrid.listen(MOUSEOVER_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t}),\r\n\t\t\t\t//MOUSEENTER'col-resize'move\r\n\t\t\t\tgrid.listen(MOUSEMOVE_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!grid.getElement().style.cursor) {\r\n\t\t\t\t\t\tgrid.getElement().style.cursor = 'pointer';\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tgrid.listen(MOUSEOUT_CELL, (e) => {\r\n\t\t\t\t\tif (!this._range.isCellInRange(e.col, e.row)) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgrid.getElement().style.cursor = '';\r\n\t\t\t\t}),\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\tmodule.exports = SortHeader;\r\n}","/*eslint-disable camelcase*/\r\n'use strict';\r\n\r\nconst {extend} = require('./internal/utils');\r\nconst plugins = require('./plugins/icons');\r\nconst builtins = {\r\n\tget arrow_upward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_upward_48px.svg');\r\n\t},\r\n\tget arrow_downward() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/navigation/svg/production/ic_arrow_downward_48px.svg');\r\n\t},\r\n\tget edit() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/image/svg/production/ic_edit_48px.svg');\r\n\t},\r\n\tget add() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/content/svg/production/ic_add_48px.svg');\r\n\t},\r\n\tget star() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_24px.svg');\r\n\t},\r\n\tget star_border() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_border_24px.svg');\r\n\t},\r\n\tget star_half() {\r\n\t\treturn require('../../webpack-loader/svg-to-icon-js-loader!material-design-icons/toggle/svg/production/ic_star_half_24px.svg');\r\n\t},\r\n};\r\n\r\nmodule.exports = {\r\n\tget() {\r\n\t\treturn extend(builtins, plugins);\r\n\t}\r\n};","'use strict';\r\n{\r\n\tconst {obj: {each}} = require('./utils');\r\n\tlet nextId = 1;\r\n\r\n\tclass EventHandler {\r\n\t\tconstructor() {\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\ton(target, type, listener, ...options) {\r\n\t\t\tif (target.addEventListener) {\r\n\t\t\t\ttarget.addEventListener(type, listener, ...options);\r\n\t\t\t}\r\n\t\t\tconst obj = {\r\n\t\t\t\ttarget, type, listener, options\r\n\t\t\t};\r\n\t\t\tconst id = nextId++;\r\n\t\t\tthis._listeners[id] = obj;\r\n\t\t\treturn id;\r\n\t\t}\r\n\t\ttryWithOffEvents(target, type, call) {\r\n\t\t\tconst list = [];\r\n\t\t\ttry {\r\n\t\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlist.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcall();\r\n\t\t\t} finally {\r\n\t\t\t\tlist.forEach((obj) => {\r\n\t\t\t\t\tif (obj.target.addEventListener) {\r\n\t\t\t\t\t\tobj.target.addEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\toff(id) {\r\n\t\t\tif (!id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst obj = this._listeners[id];\r\n\t\t\tif (!obj) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete this._listeners[id];\r\n\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfire(target, type, ...args) {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tobj.listener.call(obj.target, ...args);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\thasListener(target, type) {\r\n\t\t\tlet result = false;\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target === target && obj.type === type) {\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tclear() {\r\n\t\t\teach(this._listeners, (obj) => {\r\n\t\t\t\tif (obj.target.removeEventListener) {\r\n\t\t\t\t\tobj.target.removeEventListener(obj.type, obj.listener, ...obj.options);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._listeners = {};\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis.clear();\r\n\t\t\tthis._listeners = null;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = EventHandler;\r\n}","'use strict';\r\n\r\nclass LRUCache {\r\n\tconstructor(cacheSize) {\r\n\t\tthis._list = [];\r\n\t\tthis._map = {};\r\n\t\tthis._cacheSize = cacheSize || 50;\r\n\t}\r\n\tget(key) {\r\n\t\tconst val = this._map[key];\r\n\t\tif (val) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t\tthis._list.push(key);\r\n\t\t}\r\n\t\treturn val;\r\n\t}\r\n\tput(key, value) {\r\n\t\tif (this._map[key]) {\r\n\t\t\tconst idx = this._list.indexOf(key);\r\n\t\t\tthis._list.splice(idx, 1);\r\n\t\t}\r\n\t\tthis._map[key] = value;\r\n\t\tthis._list.push(key);\r\n\t\tif (this._list.length > this._cacheSize) {\r\n\t\t\tconst remKey = this._list.shift();\r\n\t\t\tdelete this._map[remKey];\r\n\t\t}\r\n\t}\r\n}\r\nmodule.exports = LRUCache;","'use strict';\r\n{\r\n\tconst indexFirst = (ary, elm) => {\r\n\t\tlet low = 0;\r\n\t\tlet high = ary.length - 1;\r\n\t\twhile (low <= high) {\r\n\t\t\tconst i = Math.floor((low + high) / 2);\r\n\t\t\tif (ary[i] === elm) {\r\n\t\t\t\treturn i;\r\n\t\t\t} else if (ary[i] > elm) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t} else {\r\n\t\t\t\tlow = i + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn high < 0 ? 0 : high;\r\n\t};\r\n\r\n\r\n\tclass NumberMap {\r\n\t\tconstructor() {\r\n\t\t\tthis._keys = [];\r\n\t\t\tthis._vals = {};\r\n\t\t\tthis._sorted = false;\r\n\t\t}\r\n\t\tput(key, value) {\r\n\t\t\tif (!(key in this._vals)) {\r\n\t\t\t\tthis._keys.push(key);\r\n\t\t\t\tthis._sorted = false;\r\n\t\t\t}\r\n\t\t\tthis._vals[key] = value;\r\n\t\t}\r\n\t\tget(key) {\r\n\t\t\treturn this._vals[key];\r\n\t\t}\r\n\t\teachAll(fn) {\r\n\t\t\tthis._keys.forEach((key) => {\r\n\t\t\t\tfn(this.get(key), key);\r\n\t\t\t});\r\n\t\t}\r\n\t\teach(keyFrom, keyTo, fn) {\r\n\t\t\tconst {_keys: keys} = this;\r\n\t\t\tconst {length} = keys;\r\n\t\t\tif (!this._sorted) {\r\n\t\t\t\tkeys.sort((a, b) => {\r\n\t\t\t\t\tif (a < b) { return -1; }\r\n\t\t\t\t\tif (a > b) { return 1; }\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t\tthis._sorted = true;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = indexFirst(keys, keyFrom); i < length; i++) {\r\n\t\t\t\tconst key = keys[i];\r\n\t\t\t\tif (keyFrom <= key && key <= keyTo) {\r\n\t\t\t\t\tfn(this.get(key), key);\r\n\t\t\t\t} else if (keyTo < key) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmodule.exports = NumberMap;\r\n}","'use strict';\r\n{\r\n\tclass Rect {\r\n\t\tconstructor(left, top, width, height) {\r\n\t\t\tthis._left = left;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t}\r\n\t\tstatic bounds(left, top, right, bottom) {\r\n\t\t\treturn new Rect(left, top, right - left, bottom - top);\r\n\t\t}\r\n\t\tstatic max(rect1, rect2) {\r\n\t\t\treturn Rect.bounds(\r\n\t\t\t\t\tMath.min(rect1.left, rect2.left),\r\n\t\t\t\t\tMath.min(rect1.top, rect2.top),\r\n\t\t\t\t\tMath.max(rect1.right, rect2.right),\r\n\t\t\t\t\tMath.max(rect1.bottom, rect2.bottom)\r\n\t\t\t);\r\n\t\t}\r\n\t\tget left() {\r\n\t\t\treturn this._left;\r\n\t\t}\r\n\t\tset left(left) {\r\n\t\t\tconst {right} = this;\r\n\t\t\tthis._left = left;\r\n\t\t\tthis.right = right;\r\n\t\t}\r\n\t\tget top() {\r\n\t\t\treturn this._top;\r\n\t\t}\r\n\t\tset top(top) {\r\n\t\t\tconst {bottom} = this;\r\n\t\t\tthis._top = top;\r\n\t\t\tthis.bottom = bottom;\r\n\t\t}\r\n\t\tget width() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset width(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\tget height() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset height(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tget right() {\r\n\t\t\treturn this._right !== undefined ? this._right : (this._right = this.left + this.width);\r\n\t\t}\r\n\t\tset right(right) {\r\n\t\t\tthis._right = right;\r\n\t\t\tthis.width = right - this.left;\r\n\t\t}\r\n\t\tget bottom() {\r\n\t\t\treturn this._bottom !== undefined ? this._bottom : (this._bottom = this.top + this.height);\r\n\t\t}\r\n\t\tset bottom(bottom) {\r\n\t\t\tthis._bottom = bottom;\r\n\t\t\tthis.height = bottom - this.top;\r\n\t\t}\r\n\t\toffsetLeft(offset) {\r\n\t\t\tthis._left += offset;\r\n\t\t\tthis._right = undefined;\r\n\t\t}\r\n\t\toffsetTop(offset) {\r\n\t\t\tthis._top += offset;\r\n\t\t\tthis._bottom = undefined;\r\n\t\t}\r\n\t\tcopy() {\r\n\t\t\treturn new Rect(this.left, this.top, this.width, this.height);\r\n\t\t}\r\n\t\tintersection(rect) {\r\n\t\t\tconst x0 = Math.max(this.left, rect.left);\r\n\t\t\tconst x1 = Math.min(this.left + this.width, rect.left + rect.width);\r\n\t\t\tif (x0 <= x1) {\r\n\t\t\t\tconst y0 = Math.max(this.top, rect.top);\r\n\t\t\t\tconst y1 = Math.min(this.top + this.height, rect.top + rect.height);\r\n\t\t\t\tif (y0 <= y1) {\r\n\t\t\t\t\treturn Rect.bounds(x0, y0, x1, y1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tcontains(another) {\r\n\t\t\treturn this.left <= another.left &&\r\n\t\t\t\t\tthis.left + this.width >= another.left + another.width &&\r\n\t\t\t\t\tthis.top <= another.top &&\r\n\t\t\t\t\tthis.top + this.height >= another.top + another.height;\r\n\t\t}\r\n\t\tinPoint(x, y) {\r\n\t\t\treturn this.left <= x &&\r\n\t\t\t\t\tthis.left + this.width >= x &&\r\n\t\t\t\t\tthis.top <= y &&\r\n\t\t\t\t\tthis.top + this.height >= y;\r\n\t\t}\r\n\t}\r\n\tmodule.exports = Rect;\r\n}","'use strict';\r\n{\r\n\tconst EventHandler = require('./EventHandler');\r\n\tconst style = require('./style');\r\n\tconst {browser} = require('./utils');\r\n\t\r\n\tconst MAX_SCROLL = browser.heightLimit - 1000;\r\n\r\n\tfunction _update(scrollable) {\r\n\t\tlet domHeight;\r\n\t\tif (scrollable._height > MAX_SCROLL) {\r\n\t\t\tconst sbSize = style.getScrollBarSize();\r\n\t\t\tconst offsetHeight = scrollable._scrollable.offsetHeight;\r\n\t\t\tconst vScrollRange = MAX_SCROLL - offsetHeight + sbSize;\r\n\t\t\tconst rScrollRange = scrollable._height - offsetHeight + sbSize;\r\n\t\t\tscrollable._p = vScrollRange / rScrollRange;\r\n\t\t\tdomHeight = MAX_SCROLL;\r\n\t\t} else {\r\n\t\t\tscrollable._p = 1;\r\n\t\t\tdomHeight = scrollable._height;\r\n\t\t}\r\n\r\n\t\tscrollable._endPointElement.style.top = domHeight.toFixed() + 'px';\r\n\t\tscrollable._endPointElement.style.left = scrollable._width.toFixed() + 'px';\r\n\t\t\r\n\t}\r\n\r\n\tclass Scrollable {\r\n\t\tconstructor() {\r\n\t\t\tthis._handler = new EventHandler();\r\n\r\n\t\t\tthis._scrollable = document.createElement('div');\r\n\t\t\tthis._scrollable.classList.add('grid-scrollable');\r\n\t\t\tthis._height = 0;\r\n\t\t\tthis._width = 0;\r\n\r\n\t\t\tthis._endPointElement = document.createElement('div');\r\n\t\t\tthis._endPointElement.classList.add('grid-scroll-end-point');\r\n\t\t\t_update(this);\r\n\t\t\tthis._scrollable.appendChild(this._endPointElement);\r\n\r\n\t\t\t// const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? 'DOMMouseScroll' : 'mousewheel'; //FF doesn't recognize mousewheel as of FF3.x\r\n\t\t\t// this._handler.on(this._scrollable, mousewheelevt, (evt) => {\r\n\t\t\t// const delta = evt.detail ? evt.detail * (-120) : evt.wheelDelta;\r\n\t\t\t// const point = Math.min(Math.abs(delta) / 12, this.scrollHeight / 5);\r\n\t\t\t// this.scrollTop += delta < 0 ? point : -point;\r\n\t\t\t// });\r\n\t\t}\r\n\t\tcalcTop(top) {\r\n\t\t\tconst relativeTop = top - this.scrollTop;\r\n\t\t\treturn this._scrollable.scrollTop + relativeTop;\r\n\t\t}\r\n\t\tgetElement() {\r\n\t\t\treturn this._scrollable;\r\n\t\t}\r\n\t\tsetScrollSize(width, height) {\r\n\t\t\tthis._width = width;\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollWidth() {\r\n\t\t\treturn this._width;\r\n\t\t}\r\n\t\tset scrollWidth(width) {\r\n\t\t\tthis._width = width;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollHeight() {\r\n\t\t\treturn this._height;\r\n\t\t}\r\n\t\tset scrollHeight(height) {\r\n\t\t\tthis._height = height;\r\n\t\t\t_update(this);\r\n\t\t}\r\n\t\tget scrollLeft() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollLeft);\r\n\t\t}\r\n\t\tset scrollLeft(scrollLeft) {\r\n\t\t\tthis._scrollable.scrollLeft = scrollLeft;\r\n\t\t}\r\n\t\tget scrollTop() {\r\n\t\t\treturn Math.ceil(this._scrollable.scrollTop / this._p);\r\n\t\t}\r\n\t\tset scrollTop(scrollTop) {\r\n\t\t\tthis._scrollable.scrollTop = scrollTop * this._p;\r\n\t\t}\r\n\t\tonScroll(fn) {\r\n\t\t\tthis._handler.on(this._scrollable, 'scroll', fn);\r\n\t\t}\r\n\t\tdispose() {\r\n\t\t\tthis._handler.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tmodule.exports = Scrollable;\r\n}","'use strict';\r\n{\r\n\tfunction cubicBezier(x2, y2, x3, y3) {\r\n\t\tlet step;\r\n\t\tconst err = 0.0001;\r\n\r\n\t\tx2 *= 3;\r\n\t\ty2 *= 3;\r\n\t\tx3 *= 3;\r\n\t\ty3 *= 3;\r\n\t\t\t\r\n\t\treturn function(t) {\r\n\t\t\tlet p,\r\n\t\t\t\ta,\r\n\t\t\t\tb,\r\n\t\t\t\tc,\r\n\t\t\t\td,\r\n\t\t\t\tx,\r\n\t\t\t\ts;\r\n\t\t\tif (t < 0 || 1 < t) {\r\n\t\t\t\tthrow new Error(t);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tp = step || t;\r\n\r\n\t\t\tdo {\r\n\t\t\t\ta = 1 - p;\r\n\t\t\t\tb = a * a;\r\n\t\t\t\tc = p * p;\r\n\t\t\t\td = c * p;\r\n\t\t\t\t\t\r\n\t\t\t\tx = x2 * b * p + x3 * a * c + d;\r\n\t\t\t\ts = t - x;\r\n\t\t\t\tp += s * 0.5;\r\n\t\t\t} while (err < Math.abs(s));\r\n\r\n\t\t\tstep = p;\r\n\t\t\treturn\ty2 * b * p + y3 * a * c + d;\r\n\t\t};\r\n\t}\r\n\tconst EASINGS = {\r\n\t\tlinear(p) {\r\n\t\t\treturn p;\r\n\t\t},\r\n\t\teaseIn: cubicBezier(0.420, 0.000, 1.000, 1.000),\r\n\t\teaseOut: cubicBezier(0.000, 0.000, 0.580, 1.000),\r\n\t\teaseInOut: cubicBezier(0.420, 0.000, 0.580, 1.000),\r\n\t};\r\n\r\n\tconst raf = window.requestAnimationFrame || setTimeout;\r\n\t\r\n\tfunction now() {\r\n\t\treturn Date.now();\r\n\t}\r\n\t/**\r\n\t * <pre>\r\n\t * Animates.\r\n\t * </pre>\r\n\t * @function\r\n\t * @param {number} duration animation time.\r\n\t * @param {function} step\r\n\t * @param {function|string} easing\r\n\t * @returns {object} Deferred object.\r\n\t */\r\n\tmodule.exports = (duration, step, easing) => {\r\n\t\tconst startedAt = now();\r\n\r\n\t\tif (!easing) {\r\n\t\t\teasing = EASINGS.easeInOut;\r\n\t\t} else if (typeof easing === 'string') {\r\n\t\t\teasing = EASINGS[easing];\r\n\t\t}\r\n\r\n\t\tlet canceledFlg = false;\r\n\t\tconst createAnim = (resolve, reject) => {\r\n\t\t\tconst anim = () => {\r\n\t\t\t\tconst point = now() - startedAt;\r\n\t\t\t\tif (canceledFlg) {\r\n\t\t\t\t\t//cancel\r\n\t\t\t\t\tif (reject) { reject(); }\r\n\t\t\t\t} else if (point >= duration) {\r\n\t\t\t\t\t//end\r\n\t\t\t\t\tstep(1);\r\n\t\t\t\t\tif (resolve) { resolve(); }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstep(easing(point / duration));\r\n\r\n\t\t\t\t\traf(anim, 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn anim;\r\n\t\t};\r\n\t\tconst cancel = () => {\r\n\t\t\tcanceledFlg = true;\r\n\t\t};\r\n\t\tif (window.Promise) {\r\n\t\t\tconst result = new window.Promise((resolve, reject) => {\r\n\t\t\t\tconst anim = createAnim(resolve, reject);\r\n\t\t\t\tstep(0);\r\n\t\t\t\tanim();\r\n\t\t\t});\r\n\t\t\tresult.cancel = cancel;\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tconst anim = createAnim(() => {}, () => {});\r\n\t\t\tstep(0);\r\n\t\t\tanim();\r\n\t\t\treturn {\r\n\t\t\t\tcancel,\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n\r\nfunction parse(calcStr) {\r\n\tfunction replacer(match, num, unit) {\r\n\t\tswitch (unit) {\r\n\t\tcase '%':\r\n\t\t\treturn `(${num} * this.full / 100)`;\r\n\t\tcase 'em':\r\n\t\t\treturn `(${num} * this.em)`;\r\n\t\tcase 'px':\r\n\t\t\treturn `(${num})`;\r\n\t\tdefault:\r\n\t\t\tthrow new Error('calc error');\r\n\t\t}\r\n\t}\r\n\tconst script = calcStr.replace(/^calc\\((.*)\\)$/, '$1').\r\n\t\treplace(/(\\d+)([A-Za-z%]+)/g, replacer).\r\n\t\treplace(/(\\d*\\.\\d+)([A-Za-z%]+)/g, replacer);\r\n\treturn {\r\n\t\teval(context) {\r\n\t\t\treturn (() => {\r\n\t\t\t\tfunction calc(v) { // eslint-disable-line no-unused-vars\r\n\t\t\t\t\treturn v;\r\n\t\t\t\t}\r\n\t\t\t\treturn eval(script);// eslint-disable-line no-eval\r\n\t\t\t}).call(context);\r\n\t\t}\r\n\t};\r\n}\r\nfunction toPx(value, context) {\r\n\tif (/^calc\\(.*\\)$/.test(value)) {\r\n\t\treturn parse(value).eval(context);\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*%$/.test(value)) {\r\n\t\treturn context.full * value.substr(0, value.length - 1) / 100;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*px$/.test(value)) {\r\n\t\treturn value.substr(0, value.length - 2) - 0;\r\n\t}\r\n\tif (/^[+-]?\\d+\\.?\\d*em$/.test(value)) {\r\n\t\treturn context.em * (value.substr(0, value.length - 2) - 0);\r\n\t}\r\n\treturn value - 0;\r\n}\r\n\r\nmodule.exports = {\r\n\tparse,\r\n\ttoPx(value, context) {\r\n\t\tif (typeof value === 'string') {\r\n\t\t\treturn toPx(value.trim(), context);\r\n\t\t}\r\n\t\treturn value - 0;\r\n\t}\r\n};","'use strict';\r\n{\r\n\r\n\tfunction calcBasePosition(ctx, rect,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t\ttop: paddingTop = 0,\r\n\t\t\t\t\tbottom: paddingBottom = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\t// const textAlign = ctx.textAlign || 'left';\r\n\t\t// const textBaseline = ctx.textBaseline || 'middle';\r\n\t\t// ctx.textAlign = textAlign;\r\n\t\t// ctx.textBaseline = textBaseline;\r\n\r\n\t\t// let x = rect.left + offset + paddingLeft;\r\n\t\t// if (textAlign === 'right' || textAlign === 'end') {\r\n\t\t// \tx = rect.right - offset - paddingRight;\r\n\t\t// } else if (textAlign === 'center') {\r\n\t\t// \tx = rect.left + ((rect.width + paddingLeft - paddingRight) / 2);\r\n\t\t// }\r\n\t\t// let y = rect.top + offset;\r\n\t\t// if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t// \ty = rect.bottom - offset;\r\n\t\t// } else if (textBaseline === 'middle') {\r\n\t\t// \ty = rect.top + (rect.height / 2);\r\n\t\t// }\r\n\t\t// return {x, y};\r\n\t\treturn calcStartPosition(ctx, rect, 0, 0, {\r\n\t\t\toffset,\r\n\t\t\tpadding: {\r\n\t\t\t\tleft: paddingLeft,\r\n\t\t\t\tright: paddingRight,\r\n\t\t\t\ttop: paddingTop,\r\n\t\t\t\tbottom: paddingBottom,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction calcStartPosition(ctx, rect, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tpadding: {\r\n\t\t\t\t\tleft: paddingLeft = 0,\r\n\t\t\t\t\tright: paddingRight = 0,\r\n\t\t\t\t\ttop: paddingTop = 0,\r\n\t\t\t\t\tbottom: paddingBottom = 0,\r\n\t\t\t\t} = {},\r\n\t\t\t} = {}) {\r\n\t\tconst textAlign = ctx.textAlign || 'left';\r\n\t\tconst textBaseline = ctx.textBaseline || 'middle';\r\n\t\tctx.textAlign = textAlign;\r\n\t\tctx.textBaseline = textBaseline;\r\n\r\n\t\tlet x = rect.left + offset + paddingLeft;\r\n\t\tif (textAlign === 'right' || textAlign === 'end') {\r\n\t\t\tx = rect.right - width - offset - paddingRight;\r\n\t\t} else if (textAlign === 'center') {\r\n\t\t\tx = rect.left + ((rect.width - width + paddingLeft - paddingRight) / 2);\r\n\t\t}\r\n\t\tlet y = rect.top + offset + paddingTop;\r\n\t\tif (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\r\n\t\t\ty = rect.bottom - height - offset - paddingBottom;\r\n\t\t} else if (textBaseline === 'middle') {\r\n\t\t\ty = rect.top + ((rect.height - height + paddingTop - paddingBottom) / 2);\r\n\t\t}\r\n\t\treturn {x, y};\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcalcBasePosition,\r\n\t\tcalcStartPosition,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst rgbMap = {};\r\n\tfunction styleColorToRGB(color) {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.color = color;\r\n\t\tstyle.position = 'fixed';\r\n\t\tstyle.height = '1px';\r\n\t\tstyle.width = '1px';\r\n\t\tstyle.opacity = 0;\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {color: styleColor} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn colorToRGB0(styleColor);\r\n\t}\r\n\r\n\tfunction hexToNum(hex) {\r\n\t\treturn parseInt(hex, 16);\r\n\t}\r\n\tfunction createRGB(r, g, b, a = 1) {\r\n\t\treturn {r, g, b, a};\r\n\t}\r\n\tfunction tripleHexToRGB({1: r, 2: g, 3: b}) {\r\n\t\treturn createRGB(hexToNum(r + r), hexToNum(g + g), hexToNum(b + b));\r\n\t}\r\n\tfunction sextupleHexToRGB({1: r1, 2: r2, 3: g1, 4: g2, 5: b1, 6: b2}) {\r\n\t\treturn createRGB(hexToNum(r1 + r2), hexToNum(g1 + g2), hexToNum(b1 + b2));\r\n\t}\r\n\t\r\n\tfunction testRGB({r, g, b, a}) {\r\n\t\treturn 0 <= r && r <= 255 &&\r\n\t\t0 <= g && g <= 255 &&\r\n\t\t0 <= b && b <= 255 &&\r\n\t\t0 <= a && a <= 1;\r\n\t}\r\n\tfunction rateToByte(r) {\r\n\t\treturn Math.ceil(r * 255 / 100);\r\n\t}\r\n\tfunction colorToRGB0(color) {\r\n\t\tif (color.match(/^#[0-9a-f]{3}$/i)) {\r\n\t\t\treturn tripleHexToRGB(color);\r\n\t\t}\r\n\t\tif (color.match(/^#[0-9a-f]{6}$/i)) {\r\n\t\t\treturn sextupleHexToRGB(color);\r\n\t\t}\r\n\t\tlet ret = color.match(/^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(ret[1] - 0, ret[2] - 0, ret[3] - 0, ret[4] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgb\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]));\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\tret = color.match(/^rgba\\(\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d{1,3}(\\.\\d)?)%\\s*,\\s*(\\d(\\.\\d)?)\\s*\\)$/i);\r\n\t\tif (ret) {\r\n\t\t\tconst rgb = createRGB(rateToByte(ret[1]), rateToByte(ret[3]), rateToByte(ret[5]), ret[7] - 0);\r\n\t\t\tif (testRGB(rgb)) {\r\n\t\t\t\treturn rgb;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\tfunction colorToRGB(color) {\r\n\t\tif (typeof color !== 'string') {\r\n\t\t\treturn createRGB(0, 0, 0, 0);\r\n\t\t}\r\n\t\tcolor = color.toLowerCase().trim();\r\n\t\tif (rgbMap[color]) {\r\n\t\t\treturn rgbMap[color];\r\n\t\t}\r\n\t\treturn colorToRGB0(color) || (rgbMap[color] = styleColorToRGB(color));\r\n\t}\r\n\r\n\tmodule.exports = {\r\n\t\tcolorToRGB\r\n\t};\r\n}","'use strict';\r\n\r\nmodule.exports = {\r\n\t'Array_isArray': window.Array.isArray\r\n};","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nfunction createElement(tagName, {classList, text, html} = {}) {\r\n\tconst element = document.createElement(tagName);\r\n\tif (classList) {\r\n\t\tif (Array.isArray(classList)) {\r\n\t\t\telement.classList.add(...classList);\r\n\t\t} else {\r\n\t\t\telement.classList.add(classList);\r\n\t\t}\r\n\t}\r\n\tif (text) {\r\n\t\telement.textContent = text;\r\n\t} else if (html) {\r\n\t\telement.innerHTML = html;\r\n\t}\r\n\treturn element;\r\n}\r\n\r\nfunction empty(dom) {\r\n\tlet c;\r\n\twhile ((c = dom.firstChild)) {\r\n\t\tdom.removeChild(c);\r\n\t}\r\n}\r\nfunction isNode(arg) {\r\n\treturn !!(arg.nodeType && arg.nodeName);\r\n}\r\nfunction toNode(arg) {\r\n\tif (isNode(arg)) {\r\n\t\treturn arg;\r\n\t}\r\n\tconst dom = createElement('div', {html: arg});\r\n\treturn Array.prototype.slice.call(dom.childNodes);\r\n}\r\nfunction toNodeList(arg) {\r\n\tif ((window.jQuery && arg instanceof window.jQuery)) {\r\n\t\treturn Array.prototype.map.call(arg, (a) => a);\r\n\t}\r\n\tif (Array.isArray(arg)) {\r\n\t\treturn arg.map(toNode);\r\n\t}\r\n\treturn [toNode(arg)];\r\n}\r\n\r\nfunction appendHtml(dom, inner) {\r\n\ttoNodeList(inner).forEach((node) => {\r\n\t\tdom.appendChild(node);\r\n\t});\r\n}\r\n\r\nfunction disableFocus(el) {\r\n\tel.dataset.disableBeforeTabIndex = el.tabIndex;\r\n\tel.tabIndex = -1;\r\n\tArray.prototype.slice.call(el.children, 0).forEach(disableFocus);\r\n}\r\nfunction enableFocus(el) {\r\n\tif ('disableBeforeTabIndex' in el.dataset) {\r\n\t\tel.tabIndex = el.dataset.disableBeforeTabIndex;\r\n\t}\r\n\tArray.prototype.slice.call(el.children, 0).forEach(enableFocus);\r\n}\r\n\r\nfunction isFocusable(el) {\r\n\treturn isDef(el.tabIndex) && el.tabIndex > -1;\r\n}\r\nfunction findPrevSiblingFocusable(el) {\r\n\tlet n = el.previousSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.previousSibling;\r\n\t}\r\n\treturn n;\r\n}\r\nfunction findNextSiblingFocusable(el) {\r\n\tlet n = el.nextSibling;\r\n\twhile (n && !isFocusable(n)) {\r\n\t\tn = n.nextSibling;\r\n\t}\r\n\treturn n;\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateElement,\r\n\tempty,\r\n\tisNode,\r\n\ttoNode,\r\n\ttoNodeList,\r\n\tappendHtml,\r\n\tdisableFocus,\r\n\tenableFocus,\r\n\tisFocusable,\r\n\tfindPrevSiblingFocusable,\r\n\tfindNextSiblingFocusable,\r\n};","'use strict';\r\n{\r\n\tconst loads = {};\r\n\tconst legacy = !document.fonts;\r\n\tconst load = legacy ? function(font, testStr, callback) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\trequire('./legacy/fontwatch/FontWatchRunner').load(font, testStr, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t}, () => {\r\n\t\t\tloads[font + ' @ ' + testStr] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t} : function(font, testStr, callback) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\tcallback();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdocument.fonts.ready.then(() => {\r\n\t\t\tloads.all = true;\r\n\t\t});\r\n\t\tdocument.fonts.load(font).then(() => {\r\n\t\t\tloads[font] = true;\r\n\t\t\tcallback();\r\n\t\t});\r\n\t};\r\n\tconst check = legacy ? function(font, testStr) {\r\n\t\t//for legacy(IE)\r\n\t\tif (loads[font + ' @ ' + testStr]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tload(font, testStr, () => {});\r\n\t\treturn false;\r\n\t} : function(font, testStr) {\r\n\t\tif (loads.all || loads[font]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!document.fonts.check(font)) {\r\n\t\t\tload(font, testStr, () => {});\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t\r\n\tmodule.exports = {\r\n\t\tcheck,\r\n\t\tload\r\n\t};\r\n}","'use strict';\r\n\r\nconst EventHandler = require('./EventHandler');\r\nconst handler = new EventHandler();\r\n\r\nlet ratio;\r\nfunction setRatio() {\r\n\tratio = Math.ceil(window.devicePixelRatio || 1);\r\n\tif (ratio > 1 && (ratio % 2) !== 0) {\r\n\t\tratio += 1;\r\n\t}\r\n}\r\nsetRatio();\r\nhandler.on(window, 'resize', setRatio);\r\n\r\nmodule.exports = {\r\n\ttransform(canvas) {\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\r\n\t\tconst getAttribute = canvas.getAttribute;\r\n\t\tcanvas.getAttribute = function(name, ...args) {\r\n\t\t\tlet result = getAttribute.call(this, name, ...args);\r\n\t\t\tif (name === 'width' || name === 'height') {\r\n\t\t\t\tresult /= ratio;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t\tconst setAttribute = canvas.setAttribute;\r\n\t\tcanvas.setAttribute = function(name, val, ...args) {\r\n\t\t\tconst wh = name === 'width' || name === 'height';\r\n\t\t\tif (wh) {\r\n\t\t\t\tval *= ratio;\r\n\t\t\t}\r\n\t\t\tconst result = setAttribute.call(this, name, val, ...args);\r\n\t\t\tif (wh) {\r\n\t\t\t\tctx.scale(ratio, ratio);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tObject.defineProperty(canvas, 'width', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('width');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('width', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tObject.defineProperty(canvas, 'height', {\r\n\t\t\tget() {\r\n\t\t\t\treturn canvas.getAttribute('height');\r\n\t\t\t},\r\n\t\t\tset: (val) => {\r\n\t\t\t\tcanvas.setAttribute('height', Math.floor(val));\r\n\t\t\t},\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tconst drawImage = ctx.drawImage;\r\n\t\tctx.drawImage = function(img, ...args) {\r\n\t\t\tif (img !== canvas || ratio === 1) {\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t}\r\n\t\t\tthis.save();\r\n\t\t\ttry {\r\n\t\t\t\tthis.scale(1 / ratio, 1 / ratio);\r\n\t\t\t\tif (args.length > 4) {\r\n\t\t\t\t\targs[4] = args[4] * ratio;\r\n\t\t\t\t\targs[5] = args[5] * ratio;\r\n\t\t\t\t} else {\r\n\t\t\t\t\targs[0] = args[0] * ratio;\r\n\t\t\t\t\targs[1] = args[1] * ratio;\r\n\t\t\t\t}\r\n\t\t\t\treturn drawImage.call(this, img, ...args);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.restore();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn canvas;\r\n\t}\r\n};","'use strict';\r\n\r\nconst {isDef} = require('./utils');\r\n\r\nconst ICON_PROP_KEYS = [\r\n\t'content',\r\n\t'font',\r\n\t'color',\r\n\t'className',\r\n\t'isLiga',\r\n\t'width',\r\n\t'src',\r\n\t'svg',\r\n\t'name',\r\n\t'path'\r\n];\r\n\r\nfunction quote(name) {\r\n\tconst quoted = [];\r\n\tconst split = name.split(/,\\s*/);\r\n\tfor (let i = 0; i < split.length; i++) {\r\n\t\tconst part = split[i].replace(/['\"]/g, '');\r\n\t\tif (part.indexOf(' ') === -1 && !(/^\\d/.test(part))) {\r\n\t\t\tquoted.push(part);\r\n\t\t} else {\r\n\t\t\tquoted.push('\\'' + part + '\\'');\r\n\t\t}\r\n\t}\r\n\treturn quoted.join(',');\r\n}\r\n\r\nconst doms = {};\r\nconst props = {};\r\n\r\nfunction getIconProps(tagName, className) {\r\n\tconst tagProps = props[tagName] || (props[tagName] = {});\r\n\tif (tagProps[className]) {\r\n\t\treturn tagProps[className];\r\n\t}\r\n\tconst dom = doms[tagName] || (doms[tagName] = document.createElement(tagName));\r\n\tdom.className = className;\r\n\tdocument.body.appendChild(dom);\r\n\ttry {\r\n\t\tconst beforeStyle = document.defaultView.getComputedStyle(dom, '::before');\r\n\t\tlet content = beforeStyle.getPropertyValue('content');\r\n\t\tif (content.length >= 3 && (content[0] === '\"' || content[0] === '\\'')) {\r\n\t\t\tif (content[0] === content[content.length - 1]) {\r\n\t\t\t\tcontent = content.substr(1, content.length - 2);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet font = beforeStyle.getPropertyValue('font');\r\n\t\tif (!font) {\r\n\t\t\tfont = beforeStyle.getPropertyValue('font-style') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-variant') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-weight') + ' ' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('font-size') + '/' +\r\n\t\t\t\tbeforeStyle.getPropertyValue('line-height') + ' ' +\r\n\t\t\t\tquote(beforeStyle.getPropertyValue('font-family'));\r\n\t\t}\r\n\t\tconst color = beforeStyle.getPropertyValue('color');\r\n\t\tconst width = dom.clientWidth;\r\n\t\tconst isLiga = (beforeStyle.getPropertyValue('font-feature-settings') || '').indexOf('liga') > -1;\r\n\t\t\r\n\t\treturn (tagProps[className] = {\r\n\t\t\tcontent,\r\n\t\t\tfont,\r\n\t\t\tcolor,\r\n\t\t\twidth,\r\n\t\t\tisLiga,\r\n\t\t});\r\n\t} finally {\r\n\t\tdocument.body.removeChild(dom);\r\n\t}\r\n}\r\n\r\nfunction toPropArray(prop, count) {\r\n\tconst result = [];\r\n\tif (Array.isArray(prop)) {\r\n\t\tresult.push(...prop);\r\n\t\tfor (let i = prop.length; i < count; i++) {\r\n\t\t\tresult.push(null);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\tresult.push(prop);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction toSimpleArray(iconProps) {\r\n\tif (!iconProps) {\r\n\t\treturn iconProps;\r\n\t} else if (Array.isArray(iconProps)) {\r\n\t\treturn iconProps;\r\n\t}\r\n\r\n\tconst workData = {};\r\n\r\n\tlet count = 0;\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tif (iconProps[k]) {\r\n\t\t\tif (Array.isArray(iconProps[k])) {\r\n\t\t\t\tcount = Math.max(count, iconProps[k].length);\r\n\t\t\t} else {\r\n\t\t\t\tcount = Math.max(count, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tICON_PROP_KEYS.forEach((k) => {\r\n\t\tworkData[k] = toPropArray(iconProps[k], count);\r\n\t});\r\n\r\n\tconst result = [];\r\n\tfor (let i = 0; i < count; i++) {\r\n\t\tconst data = {};\r\n\t\tICON_PROP_KEYS.forEach((k) => {\r\n\t\t\tdata[k] = workData[k][i];\r\n\t\t});\r\n\t\tresult.push(data);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction normarize(iconProps) {\r\n\tconst data = {};\r\n\tfor (const k in iconProps) {\r\n\t\tif (k === 'className') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tdata[k] = iconProps[k];\r\n\t}\r\n\tif (iconProps.className) {\r\n\t\tconst prop = getIconProps(iconProps.tagName || 'i', iconProps.className);\r\n\t\tfor (const k in prop) {\r\n\t\t\tif (!isDef(iconProps[k])) {\r\n\t\t\t\tdata[k] = prop[k];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn data;\r\n}\r\n\r\nmodule.exports = {\r\n\ttoNormarizeArray(iconProps) {\r\n\t\tconst icons = toSimpleArray(iconProps);\r\n\t\tif (!icons) {\r\n\t\t\treturn icons;\r\n\t\t}\r\n\t\treturn icons.map((icon) => normarize(icon));\r\n\t},\r\n\tget iconPropKeys() {\r\n\t\treturn ICON_PROP_KEYS;\r\n\t},\r\n\tgetIconProps,\r\n};\r\n\r\n\r\n","'use strict';\r\n\r\nconst {then} = require('./utils');\r\nconst LRUCache = require('./LRUCache');\r\n\r\nconst allCache = {};\r\n\r\nfunction isDataUrl(url) {\r\n\treturn url.search(/^(data:)/) !== -1;\r\n}\r\n\r\nfunction loadImage(src) {\r\n\tif (!window.Promise) {\r\n\t\tconsole.error('Promise is not loaded. load Promise before this process.');\r\n\t\treturn {\r\n\t\t\tthen() {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tconst img = new Image();\r\n\tconst result = new window.Promise((resolve) => {\r\n\t\timg.onload = () => {\r\n\t\t\tresolve(img);\r\n\t\t};\r\n\t});\r\n\timg.onerror = (e) => {\r\n\t\tconst url = src.length > 200 ? `${src.substr(0, 200)}...` : src;\r\n\t\tconsole.warn(`cannot load: ${url}`);\r\n\t\tthrow new Error(`IMAGE LOAD ERROR: ${url}`);\r\n\t};\r\n\timg.src = isDataUrl(src) ? src : `${src}?${Date.now()}`;\r\n\treturn result;\r\n}\r\n\r\nfunction getCacheOrLoad0(cache, src) {\r\n\treturn then(src, (src) => {\r\n\t\tconst c = cache.get(src);\r\n\t\tif (c) {\r\n\t\t\treturn c;\r\n\t\t}\r\n\t\tconst result = loadImage(src).then((img) => {\r\n\t\t\tcache.put(src, img);\r\n\t\t\treturn img;\r\n\t\t});\r\n\t\tcache.put(src, result);\r\n\t\treturn result;\r\n\t});\r\n}\r\n\r\nfunction getCacheOrLoad(cacheName, cacheSize, src) {\r\n\tconst cache = allCache[cacheName] || (allCache[cacheName] = new LRUCache(cacheSize));\r\n\treturn getCacheOrLoad0(cache, src);\r\n}\r\n\r\nmodule.exports = {\r\n\tloadImage,\r\n\tgetCacheOrLoad,\r\n};\r\n","'use strict';\r\n\r\nconst PathCommandsParser = require('./PathCommandsParser');\r\nconst parser = new PathCommandsParser();\r\n\r\nclass Path2D {\r\n\tconstructor(arg) {\r\n\t\tthis._ops = [];\r\n\t\t[\r\n\t\t\t'closePath',\r\n\t\t\t'moveTo',\r\n\t\t\t'lineTo',\r\n\t\t\t'bezierCurveTo',\r\n\t\t\t'quadraticCurveTo',\r\n\t\t\t'arc',\r\n\t\t\t'rect'\r\n\t\t].forEach((name) => {\r\n\t\t\tthis[name] = (...args) => {\r\n\t\t\t\tthis._ops.push({op: name, args});\r\n\t\t\t};\r\n\t\t});\r\n\t\tif (arg === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (typeof arg === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tthis._ops = parser.parse(arg);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t} else if (arg.hasOwnProperty('_ops')) {\r\n\t\t\tthis._ops = [...this._ops];\r\n\t\t} else {\r\n\t\t\tthrow new Error(`Error: ${typeof arg} is not a valid argument to Path`);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst CanvasRenderingContext2D = window.CanvasRenderingContext2D;\r\n\r\nconst originalFill = CanvasRenderingContext2D.prototype.fill;\r\n\r\nCanvasRenderingContext2D.prototype.fill = function(...args) {\r\n\tif (args[0] instanceof Path2D) {\r\n\t\tconst path = args[0];\r\n\t\tthis.beginPath();\r\n\t\tpath._ops.forEach((op) => {\r\n\t\t\tthis[op.op](...op.args);\r\n\t\t});\r\n\t\toriginalFill.apply(this, Array.prototype.slice.call(args, 1));\r\n\t} else {\r\n\t\toriginalFill.apply(this, args);\r\n\t}\r\n};\r\n\r\nmodule.exports = Path2D;\r\n","'use strict';\r\n\r\nfunction mag(v) {\r\n\treturn Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\r\n}\r\n    \r\nfunction dot(u, v) {\r\n\treturn (u[0] * v[0] + u[1] * v[1]);\r\n}\r\n    \r\nfunction ratio(u, v) {\r\n\treturn dot(u, v) / (mag(u) * mag(v));\r\n}\r\n\r\nfunction clamp(value, min, max) {\r\n\treturn Math.min(Math.max(value, min), max);\r\n}\r\n    \r\nfunction angle(u, v) {\r\n\tlet sign = 1.0;\r\n\tif ((u[0] * v[1] - u[1] * v[0]) < 0) {\r\n\t\tsign = -1.0;\r\n\t}\r\n\treturn sign * Math.acos(clamp(ratio(u, v)), -1, 1);\r\n}\r\n    \r\nfunction rotClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] + sint * v[1], -1 * sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction rotCounterClockwise(v, angle) {\r\n\tconst cost = Math.cos(angle);\r\n\tconst sint = Math.sin(angle);\r\n\treturn [cost * v[0] - sint * v[1], sint * v[0] + cost * v[1]];\r\n}\r\n    \r\nfunction midPoint(u, v) {\r\n\treturn [(u[0] - v[0]) / 2.0, (u[1] - v[1]) / 2.0];\r\n}\r\n    \r\nfunction meanVec(u, v) {\r\n\treturn [(u[0] + v[0]) / 2.0, (u[1] + v[1]) / 2.0];\r\n}\r\n    \r\nfunction pointMul(u, v) {\r\n\treturn [u[0] * v[0], u[1] * v[1]];\r\n}\r\n    \r\nfunction scale(c, v) {\r\n\treturn [c * v[0], c * v[1]];\r\n}\r\n    \r\nfunction sum(u, v) {\r\n\treturn [u[0] + v[0], u[1] + v[1]];\r\n}\r\n// Convert an SVG elliptical arc to a series of canvas commands.\r\n//\r\n// x1, y1, x2, y2: start and stop coordinates of the ellipse.\r\n// rx, ry: radii of the ellipse.\r\n// phi: rotation of the ellipse.\r\n// fA: large arc flag.\r\n// fS: sweep flag.\r\nfunction ellipseFromEllipticalArc(ctx, x1, y1, rx, ry, phi, fA, fS, x2, y2) {\r\n\t// Convert from endpoint to center parametrization, as detailed in:\r\n\t//   http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n\tif (rx === 0 || ry === 0) {\r\n\t\tctx.lineTo(x2, x1);\r\n\t\treturn;\r\n\t}\r\n\tphi = phi * (Math.PI / 180.0);\r\n\trx = Math.abs(rx);\r\n\try = Math.abs(ry);\r\n\tconst xPrime = rotClockwise(midPoint(x1, x2), phi); // F.6.5.1\r\n\tconst xPrime2 = pointMul(xPrime, xPrime);\r\n\tlet rx2 = Math.pow(rx, 2);\r\n\tlet ry2 = Math.pow(ry, 2);\r\n    \r\n\tconst lambda = Math.sqrt(xPrime2[0] / rx2 + xPrime2[1] / ry2);\r\n\tif (lambda > 1) {\r\n\t\trx *= lambda;\r\n\t\try *= lambda;\r\n\t\trx2 = Math.pow(rx, 2);\r\n\t\try2 = Math.pow(ry, 2);\r\n\t}\r\n\tlet factor = Math.sqrt(Math.abs(rx2 * ry2 - rx2 * xPrime2[1] - ry2 * xPrime2[0]) /\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(rx2 * xPrime2[1] + ry2 * xPrime2[0]));\r\n\tif (fA === fS) {\r\n\t\tfactor *= -1.0;\r\n\t}\r\n\tconst cPrime = scale(factor, [rx * xPrime[1] / ry, -ry * xPrime[0] / rx]); // F.6.5.2\r\n\tconst c = sum(rotCounterClockwise(cPrime, phi), meanVec(x1, x2)); // F.6.5.3\r\n\tconst x1UnitVector = [(xPrime[0] - cPrime[0]) / rx, (xPrime[1] - cPrime[1]) / ry];\r\n\tconst x2UnitVector = [(-1.0 * xPrime[0] - cPrime[0]) / rx, (-1.0 * xPrime[1] - cPrime[1]) / ry];\r\n\tconst theta = angle([1, 0], x1UnitVector); // F.6.5.5\r\n\tconst deltaTheta = angle(x1UnitVector, x2UnitVector); // F.6.5.6\r\n\tconst start = theta;\r\n\tconst end = theta + deltaTheta;\r\n\tctx.save();\r\n\tctx.translate(c[0], c[1]);\r\n\tctx.rotate(phi);\r\n\tctx.scale(rx, ry);\r\n\tctx.arc(0, 0, 1, start, end, 1 - fS);\r\n\tctx.restore();\r\n}\r\n\r\nclass PathCommands {\r\n\tconstructor(ctx) {\r\n\t\tlet lMx;\r\n\t\tlet lMy;\r\n\t\tlet lx = 0;\r\n\t\tlet ly = 0;\r\n\t\tlet reflected;\r\n\t\tlet lastCommand = '';\r\n\t\tfunction makeReflected() {\r\n\t\t\tif ('CcSsQqTt'.indexOf(lastCommand) < 0) {\r\n\t\t\t\treturn {x: lx, y: ly};\r\n\t\t\t}\r\n\t\t\treturn reflected;\r\n\t\t}\r\n\r\n\t\tthis.M = (px, py) => {\r\n\t\t\tctx.moveTo(px, py);\r\n\t\t\tlMx = px;\r\n\t\t\tlMy = py;\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'M';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.m = (px, py) => this.M(px + lx, py + ly);\r\n\t\tthis.L = (px, py) => {\r\n\t\t\tctx.lineTo(px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'L';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.l = (px, py) => this.L(px + lx, py + ly);\r\n\t\tthis.H = (px) => this.L(px, ly);\r\n\t\tthis.h = (px) => this.H(px + lx);\r\n\t\tthis.V = (py) => this.L(lx, py);\r\n\t\tthis.v = (py) => this.V(py + ly);\r\n\t\tthis.Z = () => {\r\n\t\t\tctx.closePath();\r\n\t\t\tlx = lMx;\r\n\t\t\tly = lMy;\r\n\t\t\tlastCommand = 'Z';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.z = () => this.Z();\r\n\t\t//C x1 y1, x2 y2, x y (or c dx1 dy1, dx2 dy2, dx dy)\r\n\t\tthis.C = (cp1x, cp1y, cp2x, cp2y, px, py) => {\r\n\t\t\tctx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cp2x,\r\n\t\t\t\ty: 2 * py - cp2y,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'C';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.c = (cp1x, cp1y, cp2x, cp2y, px, py) => this.C(\r\n\t\t\t\tcp1x + lx, cp1y + ly,\r\n\t\t\t\tcp2x + lx, cp2y + ly,\r\n\t\t\t\tpx + lx, py + ly\r\n\t\t);\r\n\t\t//S x2 y2, x y (or s dx2 dy2, dx dy)\r\n\t\tthis.S = (cpx, cpy, px, py) => {\r\n\t\t\tconst {x: cp1x, y: cp1y} = makeReflected(lastCommand);\r\n\t\t\treturn this.C(cp1x, cp1y, cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.s = (cpx, cpy, px, py) => this.S(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//Q x1 y1, x y (or q dx1 dy1, dx dy)\r\n\t\tthis.Q = (cpx, cpy, px, py) => {\r\n\t\t\tctx.quadraticCurveTo(cpx, cpy, px, py);\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\treflected = {\r\n\t\t\t\tx: 2 * px - cpx,\r\n\t\t\t\ty: 2 * py - cpy,\r\n\t\t\t};\r\n\t\t\tlastCommand = 'Q';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\tthis.q = (cpx, cpy, px, py) => this.Q(cpx + lx, cpy + ly, px + lx, py + ly);\r\n\t\t//T x y (or t dx dy)\r\n\t\tthis.T = (px, py) => {\r\n\t\t\tconst {x: cpx, y: cpy} = makeReflected();\r\n\t\t\treturn this.Q(cpx, cpy, px, py);\r\n\t\t};\r\n\t\tthis.t = (px, py) => this.T(px + lx, py + ly);\r\n\t\t//A rx ry x-axis-rotation large-arc-flag sweep-flag x y\r\n\t\tthis.A = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => {\r\n\t\t\tconst x1 = lx;\r\n\t\t\tconst y1 = ly;\r\n\r\n\t\t\tellipseFromEllipticalArc(ctx, x1, y1, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py);\r\n\r\n\t\t\tlx = px;\r\n\t\t\tly = py;\r\n\t\t\tlastCommand = 'A';\r\n\t\t\treturn this;\r\n\t\t};\r\n\t\t//a rx ry x-axis-rotation large-arc-flag sweep-flag dx dy\r\n\t\tthis.a = (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, px, py) => this.A(\r\n\t\t\t\trx, ry, xAxisRotation, largeArcFlag, sweepFlag, px + lx, py + ly);\r\n\t\t\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommands;","'use strict';\r\n\r\nconst PathCommands = require('./PathCommands');\r\n\r\nfunction pathTokens(d) {\r\n\tlet idx = 0;\r\n\treturn {\r\n\t\tnext() {\r\n\t\t\tlet s = '';\r\n\t\t\twhile (d.length > idx) {\r\n\t\t\t\tconst c = d[idx];\r\n\t\t\t\tidx++;\r\n\t\t\t\tif (' ,\\n\\r\\t'.indexOf(c) > -1) {\r\n\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst type = '.+-1234567890'.indexOf(c) > -1 ? 'num' : 'str';\r\n\t\t\t\t\tif (type === 'str') {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ('-+'.indexOf(c) > -1) {\r\n\t\t\t\t\t\tif (s) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (c === '.') {\r\n\t\t\t\t\t\tif (s.indexOf('.') > -1) {\r\n\t\t\t\t\t\t\tidx--;\r\n\t\t\t\t\t\t\treturn s;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ts += c;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn s || null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction command(builder, cmd, argsProvider) {\r\n\tif (cmd.toUpperCase() === 'M' || cmd.toUpperCase() === 'L' || cmd.toUpperCase() === 'T') {\r\n\t\tbuilder.command(cmd, argsProvider.next(), argsProvider.next());\r\n\t\treturn cmd === 'M' ? 'L'\r\n\t\t\t: cmd === 'm' ? 'l'\r\n\t\t\t: cmd;\r\n\t} else if (cmd.toUpperCase() === 'H' || cmd.toUpperCase() === 'V') {\r\n\t\tbuilder.command(cmd, argsProvider.next());\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'Z') {\r\n\t\tbuilder.command(cmd);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'C') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'S' || cmd.toUpperCase() === 'Q') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else if (cmd.toUpperCase() === 'A') {\r\n\t\tbuilder.command(cmd,\r\n\t\t\t\targsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next(), argsProvider.next(),\r\n\t\t\t\targsProvider.next(), argsProvider.next()\r\n\t\t);\r\n\t\treturn cmd;\r\n\t} else {\r\n\t\t// https://developer.mozilla.org/ja/docs/Web/SVG/Tutorial/Paths\r\n\t\tconsole.warn('unsupported:' + cmd);\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nconst canvasOperations = window.CanvasRenderingContext2D ? Object.keys(window.CanvasRenderingContext2D.prototype) : [\r\n\t'save',\r\n\t'restore',\r\n\t'beginPath',\r\n\t'closePath',\r\n\t'moveTo',\r\n\t'lineTo',\r\n\t'bezierCurveTo',\r\n\t'quadraticCurveTo',\r\n\t'arc',\r\n\t'arcTo',\r\n\t'ellipse',\r\n\t'rect',\r\n\t'translate',\r\n\t'rotate',\r\n\t'scale',\r\n];\r\n\r\nclass PathCommandsParser {\r\n\tconstructor() {\r\n\t\tthis._commands = new PathCommands(this);\r\n\t\tcanvasOperations.forEach((op) => {\r\n\t\t\tthis[op] = (...args) => {\r\n\t\t\t\tthis._ops.push({\r\n\t\t\t\t\top,\r\n\t\t\t\t\targs,\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\tcommand(name, ...args) {\r\n\t\targs = args || [];\r\n\t\tfor (let i = 0; i < args.length; i++) {\r\n\t\t\targs[i] = args[i] - 0;\r\n\t\t}\r\n\t\tthis._commands[name](...(args));\r\n\t}\r\n\tparse(d) {\r\n\t\tconst ops = this._ops = [];\r\n\t\tconst tokens = pathTokens(d);\r\n\t\ttry {\r\n\t\t\tlet cmd;\r\n\t\t\tlet subsequentCommand;\r\n\t\t\twhile ((cmd = tokens.next())) {\r\n\t\t\t\tif (!isNaN(cmd - 0)) {\r\n\t\t\t\t\tlet fst = true;\r\n\t\t\t\t\tconst argsProvider = {\r\n\t\t\t\t\t\tnext() {\r\n\t\t\t\t\t\t\tif (fst) {\r\n\t\t\t\t\t\t\t\tfst = false;\r\n\t\t\t\t\t\t\t\treturn cmd;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn tokens.next();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tsubsequentCommand = command(this, subsequentCommand, argsProvider);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsubsequentCommand = command(this, cmd, tokens);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log('Error: ' + d);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t\treturn ops;\r\n\t}\r\n}\r\n\r\nmodule.exports = PathCommandsParser;","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\nfunction computeStyle(font) {\r\n\treturn [{\r\n\t\tdisplay: 'block',\r\n\t\tposition: 'absolute',\r\n\t\ttop: '-9999px',\r\n\t\tleft: '-9999px',\r\n\t\twidth: 'auto',\r\n\t\theight: 'auto',\r\n\t\tmargin: '0',\r\n\t\tpadding: '0',\r\n\t\t'white-space': 'nowrap',\r\n\t\tfont,\r\n\t}, {\r\n\t\t'font-variant': 'normal',\r\n\t\t'font-size': '300px',\r\n\t\t'font-style': 'normal',\r\n\t\t'font-weight': '400',\r\n\t\t'line-height': 'normal',\r\n\t}];\r\n}\r\n\r\nclass FontRuler {\r\n\tconstructor(font, testStr) {\r\n\t\tconst e = document.createElement('span');\r\n\t\te.setAttribute('aria-hidden', 'true');\r\n\t\te.textContent = testStr || 'BESbswy';\r\n\r\n\t\tcomputeStyle(font).forEach((style) => {\r\n\t\t\tfor (const key in style) {\r\n\t\t\t\te.style[key] = style[key];\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.body.appendChild(e);\r\n\t\tthis.el_ = e;\r\n\t}\r\n\tgetWidth() {\r\n\t\treturn this.el_.offsetWidth;\r\n\t}\r\n\tremove() {\r\n\t\tdocument.body.removeChild(this.el_);\r\n\t}\r\n}\r\n\r\nmodule.exports = FontRuler;\r\n\r\n\r\n","'use strict';\r\n\r\n//see https://github.com/typekit/webfontloader\r\n\r\n//http://defghi1977.html.xdomain.jp/tech/canvasMemo/canvasMemo.htm\r\nconst FontRuler = require('./FontRuler');\r\n\r\n\r\nconst LastResortFonts = {\r\n\tSERIF: 'serif',\r\n\tSANS_SERIF: 'sans-serif'\r\n};\r\n\r\n\r\nconst watchRunners = {};\r\n\r\nclass FontWatchRunner {\r\n\tstatic load(font, testStr, activeCallback, inactiveCallback) {\r\n\t\tconst c = watchRunners[font] || (watchRunners[font] = {});\r\n\t\ttestStr = testStr + '';\r\n\t\tlet runner;\r\n\t\tif (c[testStr]) {\r\n\t\t\trunner = c[testStr];\r\n\t\t} else {\r\n\t\t\trunner = (c[testStr] = new FontWatchRunner(font, testStr));\r\n\t\t}\r\n\t\trunner.then(activeCallback, inactiveCallback);\r\n\t}\r\n\tconstructor(font, testStr) {\r\n\t\tthis.activeCallbacks = [];\r\n\t\tthis.inactiveCallbacks = [];\r\n\t\tthis.status = null;\r\n\t\tthis.lastResortWidths_ = {};\r\n\r\n\t\tthis.fontRulerA_ = new FontRuler(font + ',' + LastResortFonts.SERIF, testStr);\r\n\t\tthis.fontRulerB_ = new FontRuler(font + ',' + LastResortFonts.SANS_SERIF, testStr);\r\n\t\tconst lastResortRulerA = new FontRuler('4px ' + LastResortFonts.SERIF, testStr);\r\n\t\tconst lastResortRulerB = new FontRuler('4px ' + LastResortFonts.SANS_SERIF, testStr);\r\n\r\n\t\t//start\r\n\t\tthis.lastResortWidths_[LastResortFonts.SERIF] = lastResortRulerA.getWidth();\r\n\t\tthis.lastResortWidths_[LastResortFonts.SANS_SERIF] = lastResortRulerB.getWidth();\r\n\r\n\t\tlastResortRulerA.remove();\r\n\t\tlastResortRulerB.remove();\r\n\r\n\t\tthis.started_ = Date.now();\r\n\r\n\t\tthis.check_();\r\n\t}\r\n\tthen(activeCallback, inactiveCallback) {\r\n\t\tif (this.status) {\r\n\t\t\tif (this.status !== 'ng') {\r\n\t\t\t\tactiveCallback();\r\n\t\t\t} else {\r\n\t\t\t\tinactiveCallback();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.activeCallbacks.push(activeCallback);\r\n\t\t\tthis.inactiveCallbacks.push(inactiveCallback);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\tcheck_() {\r\n\t\tconst widthA = this.fontRulerA_.getWidth();\r\n\t\tconst widthB = this.fontRulerB_.getWidth();\r\n\r\n\t\tif (this.isFallbackFont_(widthA, widthB) || this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\tif (Date.now() - this.started_ >= 3000) { // timeout\r\n\t\t\t\tif (this.isLastResortFont_(widthA, widthB)) {\r\n\t\t\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\t\t\tthis.status = 'ok';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.finish_(this.inactiveCallbacks);\r\n\t\t\t\t\tthis.status = 'ng';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.check_();\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.finish_(this.activeCallbacks);\r\n\t\t\tthis.status = 'ok';\r\n\t\t}\r\n\t}\r\n\tisFallbackFont_(a, b) {\r\n\t\treturn this.widthMatches_(a, LastResortFonts.SERIF) && this.widthMatches_(b, LastResortFonts.SANS_SERIF);\r\n\t}\r\n\twidthsMatchLastResortWidths_(a, b) {\r\n\t\tfor (const font in LastResortFonts) {\r\n\t\t\tif (LastResortFonts.hasOwnProperty(font)) {\r\n\t\t\t\tif (this.widthMatches_(a, LastResortFonts[font]) &&\r\n\t\t\t\t\t\tthis.widthMatches_(b, LastResortFonts[font])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\twidthMatches_(width, lastResortFont) {\r\n\t\treturn width === this.lastResortWidths_[lastResortFont];\r\n\t}\r\n\tisLastResortFont_(a, b) {\r\n\t\treturn hasWebKitFallbackBug() && this.widthsMatchLastResortWidths_(a, b);\r\n\t}\r\n\tfinish_(callbacks) {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.fontRulerA_.remove();\r\n\t\t\tthis.fontRulerB_.remove();\r\n\t\t\tcallbacks.forEach((cb) => cb());\r\n\t\t}, 0);\r\n\t}\r\n}\r\n\r\nlet HAS_WEBKIT_FALLBACK_BUG = null;\r\nfunction hasWebKitFallbackBug() {\r\n\tif (HAS_WEBKIT_FALLBACK_BUG === null) {\r\n\t\tconst match = /AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);\r\n\r\n\t\tHAS_WEBKIT_FALLBACK_BUG = !!match &&\r\n\t\t\t(parseInt(match[1], 10) < 536 ||\r\n\t\t\t(parseInt(match[1], 10) === 536 &&\r\n\t\t\tparseInt(match[2], 10) <= 11));\r\n\t}\r\n\treturn HAS_WEBKIT_FALLBACK_BUG;\r\n}\r\n\r\nmodule.exports = FontWatchRunner;\r\n","'use strict';\r\n\r\nfunction normalize(options) {\r\n\tif (!options) {\r\n\t\treturn [];\r\n\t}\r\n\tif (Array.isArray(options)) {\r\n\t\treturn options;\r\n\t}\r\n\tif (typeof options === 'string') {\r\n\t\treturn normalize(JSON.parse(options));\r\n\t}\r\n\tconst result = [];\r\n\tfor (const k in options) {\r\n\t\tresult.push({\r\n\t\t\tvalue: k,\r\n\t\t\tcaption: options[k]\r\n\t\t});\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nmodule.exports = {\r\n\tnormalize,\r\n};\r\n","'use strict';\r\n\r\nfunction getPath2D() {\r\n\t//return require('./legacy/canvas/Path2D');\r\n\treturn window.Path2D || require('./legacy/canvas/Path2D');\r\n}\r\n\r\nmodule.exports = {\r\n\tfill(module, ctx, x, y, w, h) {\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tconst {width, height} = module;\r\n\t\t\tconst {ud: upsideDown, x: offsetX = 0, y: offsetY = 0} = module;\r\n\t\t\tw = w || width;\r\n\t\t\th = h || height;\r\n\t\t\tconst xrate = w / width;\r\n\t\t\tconst yrate = h / (upsideDown ? -height : height);\r\n\t\t\tx = x || 0;\r\n\t\t\ty = upsideDown ? ((y || 0) + (-height * yrate)) : (y || 0);\r\n\r\n\t\t\tctx.translate(x, y);\r\n\t\t\tctx.scale(xrate, yrate);\r\n\t\t\tif (offsetX !== 0 || offsetY !== 0) {\r\n\t\t\t\tctx.translate(offsetX, offsetY);\r\n\t\t\t}\r\n\t\t\tconst Path2D = getPath2D();\r\n\t\t\tmodule.path2d = module.path2d || (new Path2D(module.d));\r\n\t\t\tctx.fill(module.path2d);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t},\r\n\tget Path2D() {\r\n\t\treturn getPath2D();\r\n\t},\r\n};\r\n","'use strict';\r\n{\r\n\tconst {isPromise} = require('./utils');\r\n\r\n\tfunction wait(val) {\r\n\t\treturn val.then((v) => {\r\n\t\t\tif (isPromise(v)) {\r\n\t\t\t\treturn wait(v);\r\n\t\t\t} else {\r\n\t\t\t\treturn v;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction createArray(get, length) {\r\n\t\tconst array = new Array(length);\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tarray[i] = get(i);\r\n\t\t}\r\n\t\treturn array;\r\n\t}\r\n\tfunction createArrayPromise(get, getField, length) {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst plist = [];\r\n\t\t\tconst array = new Array(length);\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst data = get(i);\r\n\t\t\t\tconst record = {\r\n\t\t\t\t\tv: data,\r\n\t\t\t\t\tf: data\r\n\t\t\t\t};\r\n\t\t\t\tarray[i] = record;\r\n\t\t\t\tif (isPromise(data)) {\r\n\t\t\t\t\tplist.push(wait(data).then((v) => {\r\n\t\t\t\t\t\trecord.v = v;\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(\r\n\t\t\t\t\t() => setArrayField(array, getField)\r\n\t\t\t).then(resolve);\r\n\t\t});\r\n\t}\r\n\tfunction setArrayField(array, getField) {\r\n\t\tif (!getField) {\r\n\t\t\treturn Promise.resolve(array);\r\n\t\t}\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst length = array.length;\r\n\t\t\tconst plist = [];\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tconst record = array[i];\r\n\t\t\t\trecord.f = getField(record.v);\r\n\t\t\t\tif (isPromise(record.f)) {\r\n\t\t\t\t\tplist.push(wait(record.f).then((v) => {\r\n\t\t\t\t\t\trecord.f = v;\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tPromise.all(plist).then(() => resolve(array));\r\n\t\t});\r\n\t}\r\n\tconst sort = {\r\n\t\tsort(get, set, length, compare, getField) {\r\n\t\t\tconst old = createArray(get, length);\r\n\t\t\tif (getField) {\r\n\t\t\t\told.sort((r1, r2) => compare(getField(r1), getField(r2)));\r\n\t\t\t} else {\r\n\t\t\t\told.sort(compare);\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\tset(i, old[i]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortArray(array, compare) {\r\n\t\t\tArray.prototype.sort.call(array, compare);\r\n\t\t},\r\n\t\tsortPromise(get, set, length, compare, getField) {\r\n\t\t\tif (window.Promise) {\r\n\t\t\t\treturn createArrayPromise(get, getField, length).then((array) => {\r\n\t\t\t\t\tarray.sort((r1, r2) => compare(r1.f, r2.f));\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tset(i, array[i].v);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsort.sort(get, set, length, compare, getField);\r\n\t\t\t\tconst dummyPromise = {\r\n\t\t\t\t\tthen(fn) {\r\n\t\t\t\t\t\tfn();\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcatch() {\r\n\t\t\t\t\t\treturn dummyPromise;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn dummyPromise;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tmodule.exports = sort;\r\n}","\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?minimize!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","'use strict';\r\n{\r\n\tfunction getScrollBarWidth() {\r\n\t\tconst dummy = document.createElement('div');\r\n\t\tconst {style} = dummy;\r\n\t\tstyle.position = 'absolute';\r\n\t\tstyle.height = '9999px';\r\n\t\tstyle.width = 'calc(100vw - 100%)';\r\n\t\tstyle.opacity = 0;\r\n\t\tdummy.textContent = 'x';\r\n\t\tdocument.body.appendChild(dummy);\r\n\t\tconst {width} = document.defaultView.getComputedStyle(dummy, '');\r\n\t\tdocument.body.removeChild(dummy);\r\n\t\treturn parseInt(width, 10);\r\n\t}\r\n\r\n\tlet SCROLLBAR_SIZE;\r\n\tconst initDocument = () => {\r\n\t\trequire('./style.css');\r\n\t\tSCROLLBAR_SIZE = getScrollBarWidth() || 10;\r\n\t\tconst style = document.createElement('style');\r\n\t\tstyle.setAttribute('type', 'text/css');\r\n\t\tstyle.setAttribute('data-name', 'cheetah-grid');\r\n\t\tstyle.innerHTML =\r\n\t\t`\r\n.cheetah-grid .grid-scroll-end-point {\r\n\twidth: ${SCROLLBAR_SIZE}px;\r\n\theight: ${SCROLLBAR_SIZE}px;\r\n}\r\n.cheetah-grid > canvas {\r\n\twidth: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\twidth: calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: -webkit-calc(100% - ${SCROLLBAR_SIZE}px);\r\n\theight: calc(100% - ${SCROLLBAR_SIZE}px);\r\n}\r\n\t\t`;\r\n\r\n\t\tdocument.head.appendChild(style);\r\n\t};\r\n\r\n\tconst style = {\r\n\t\tinitDocument() {\r\n\t\t\tstyle.initDocument = () => {};\r\n\t\t\tinitDocument();\r\n\t\t},\r\n\t\tgetScrollBarSize() {\r\n\t\t\treturn SCROLLBAR_SIZE;\r\n\t\t}\r\n\t};\r\n\r\n\tmodule.exports = style;\r\n}","'use strict';\r\n{\r\n\tconst Symbol = window.Symbol ? window.Symbol : (() => {\r\n\t\tlet nextId = 1;\r\n\t\treturn (name) => {\r\n\t\t\tconst id = nextId++;\r\n\t\t\tif (name) {\r\n\t\t\t\treturn ` $$$ ${name} - ${id} $$$ `;\r\n\t\t\t} else {\r\n\t\t\t\treturn ` $$$ ${id} $$$ `;\r\n\t\t\t}\r\n\t\t};\r\n\t})();\r\n\tconst mem = {};\r\n\r\n\tmodule.exports = {\r\n\t\tget(name) {\r\n\t\t\tif (name) {\r\n\t\t\t\treturn mem[name] ? mem[name] : (mem[name] = Symbol(name));\r\n\t\t\t} else {\r\n\t\t\t\treturn Symbol();\r\n\t\t\t}\r\n\t\t},\r\n\t\tget PROTECTED_SYMBOL() {\r\n\t\t\treturn this.get('protected');\r\n\t\t},\r\n\t\tget CHECK_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('chkcol.stateID');\r\n\t\t},\r\n\t\tget BUTTON_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('btncol.stateID');\r\n\t\t},\r\n\t\tget COLUMN_FADEIN_STATE_ID() {\r\n\t\t\treturn this.get('col.fadein_stateID');\r\n\t\t},\r\n\t\tget BRANCH_GRAPH_COLUMN_STATE_ID() {\r\n\t\t\treturn this.get('branch_graph_col.stateID');\r\n\t\t},\r\n\t\tget SMALL_DIALOG_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('small_dialog_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_INPUT_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_input_editor.stateID');\r\n\t\t},\r\n\t\tget INLINE_MENU_EDITOR_STATE_ID() {\r\n\t\t\treturn this.get('inline_menu_editor.stateID');\r\n\t\t}\r\n\t};\r\n\r\n}","'use strict';\r\n{\r\n\tlet arrayFind;\r\n\tlet arrayFindIndex;\r\n\tconst array = {\r\n\t\tget find() {\r\n\t\t\tif (arrayFind) {\r\n\t\t\t\treturn arrayFind;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.find) {\r\n\t\t\t\tarrayFind = (arr, predicate) => Array.prototype.find.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFind = (arr, predicate) => {\r\n\t\t\t\t\tconst index = array.findIndex(arr, predicate);\r\n\t\t\t\t\treturn index >= 0 ? arr[index] : undefined;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFind;\r\n\t\t},\r\n\t\tget findIndex() {\r\n\t\t\tif (arrayFindIndex) {\r\n\t\t\t\treturn arrayFindIndex;\r\n\t\t\t}\r\n\t\t\tif (Array.prototype.findIndex) {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => Array.prototype.findIndex.call(arr, predicate);\r\n\t\t\t} else {\r\n\t\t\t\tarrayFindIndex = (arr, predicate) => {\r\n\t\t\t\t\tconst length = arr.length;\r\n\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\tconst value = arr[i];\r\n\t\t\t\t\t\tif (predicate(value, i, arr)) {\r\n\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn arrayFindIndex;\r\n\t\t},\r\n\t};\r\n\t\r\n\tfunction isDef(data) {\r\n\t\treturn data !== null && typeof data !== 'undefined';\r\n\t}\r\n\tconst ua = window.navigator.userAgent.toLowerCase();\r\n\tconst IE = (ua.match(/(msie)/) || ua.match(/trident/));\r\n\tconst Chrome = (ua.indexOf('chrome') > -1) && (ua.indexOf('edge') === -1);\r\n\tconst Firefox = (ua.indexOf('firefox') > -1);\r\n\r\n\tfunction setReadonly(obj, name, value) {\r\n\t\tObject.defineProperty(obj, name, {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction each(obj, fn) {\r\n\t\tfor (const key in obj) {\r\n\t\t\tfn(obj[key], key, obj);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isObject(obj) {\r\n\t\treturn obj === Object(obj);\r\n\t}\r\n\r\n\tfunction extend(...args) {\r\n\t\tconst result = {};\r\n\t\targs.forEach((source) => {\r\n\t\t\tfor (const key in source) {\r\n\t\t\t\tObject.defineProperty(result, key, {\r\n\t\t\t\t\tget() {\r\n\t\t\t\t\t\treturn source[key];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tset(val) {\r\n\t\t\t\t\t\tsource[key] = val;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\tfunction isDescendantElement(root, target) {\r\n\t\twhile (target.parentElement) {\r\n\t\t\tconst p = target.parentElement;\r\n\t\t\tif (root === p) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\ttarget = p;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tfunction applyChainSafe(obj, fn, ...names) {\r\n\t\tlet value = obj;\r\n\t\tfor (let i = 0; i < names.length && isDef(value); i++) {\r\n\t\t\tvalue = fn(value, names[i]);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\tfunction getChainSafe(obj, ...names) {\r\n\t\treturn applyChainSafe(obj, (val, name) => val[name], ...names);\r\n\t}\r\n\tfunction getOrApply(value, ...args) {\r\n\t\tif (typeof value === 'function') {\r\n\t\t\treturn value(...args);\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\tfunction endsWith(str, searchString, position) {\r\n\t\tconst subjectString = str.toString();\r\n\t\tif (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\r\n\t\t\tposition = subjectString.length;\r\n\t\t}\r\n\t\tposition -= searchString.length;\r\n\t\tconst lastIndex = subjectString.lastIndexOf(searchString, position);\r\n\t\treturn lastIndex !== -1 && lastIndex === position;\r\n\t}\r\n\tconst isPromise = (data) => data && typeof data.then === 'function';\r\n\tconst then = (result, callback) => isPromise(result) ? result.then((r) => callback(r)) : callback(result);\r\n\tfunction getMouseButtons(e) {\r\n\t\tif (isDef(e.buttons)) {\r\n\t\t\treturn e.buttons;\r\n\t\t}\r\n\t\t/*for legacy*/\r\n\t\tif (isDef(e.which)) {\r\n\t\t\tif (e.which === 3) { //right?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\tif (e.which === 2) { //middle?\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t\treturn e.which;//left or no\r\n\t\t}\r\n\t\t\r\n\t\tif (e.button === 0 || e.button === 1) {\r\n\t\t\treturn 1;//candidate left\r\n\t\t}\r\n\t\tif (e.button === 2) {\r\n\t\t\treturn 2;// right\r\n\t\t}\r\n\t\treturn 0;//no or middle?\r\n\t}\r\n\tfunction getKeyCode(e) {\r\n\t\treturn e.keyCode || e.which;\r\n\t}\r\n\tfunction isTouchEvent(e) {\r\n\t\treturn !!e.changedTouches;\r\n\t}\r\n\tfunction getIgnoreCase(obj, name) {\r\n\t\tif (obj[name]) {\r\n\t\t\treturn obj[name];\r\n\t\t}\r\n\t\tconst l = name.toLowerCase();\r\n\t\tif (obj[l]) {\r\n\t\t\treturn obj[l];\r\n\t\t}\r\n\t\tconst u = name.toLowerCase();\r\n\t\tif (obj[u]) {\r\n\t\t\treturn obj[u];\r\n\t\t}\r\n\t\tfor (const k in obj) {\r\n\t\t\tif (k.toLowerCase() === l) {\r\n\t\t\t\treturn obj[k];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\tfunction cancel(e) {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\r\n\tfunction toBoxArray(obj) {\r\n\t\tif (!Array.isArray(obj)) {\r\n\t\t\treturn [obj/*top*/, obj/*right*/, obj/*bottom*/, obj/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 3) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[2]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 2) {\r\n\t\t\treturn [obj[0]/*top*/, obj[1]/*right*/, obj[0]/*bottom*/, obj[1]/*left*/];\r\n\t\t}\r\n\t\tif (obj.length === 1) {\r\n\t\t\treturn [obj[0]/*top*/, obj[0]/*right*/, obj[0]/*bottom*/, obj[0]/*left*/];\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t// Chrome 33554431\r\n\t// FireFox 17895588\r\n\t// IE 10737433\r\n\tmodule.exports = {\r\n\t\tisDef,\r\n\t\tbrowser: {\r\n\t\t\tIE,\r\n\t\t\tChrome,\r\n\t\t\tFirefox,\r\n\t\t\theightLimit: Chrome ? 33554431\r\n\t\t\t: Firefox ? 17895588\r\n\t\t\t: 10737433 // default IE limit\r\n\t\t},\r\n\t\textend,\r\n\t\tisDescendantElement,\r\n\t\tgetChainSafe,\r\n\t\tapplyChainSafe,\r\n\t\tgetOrApply,\r\n\t\tgetIgnoreCase,\r\n\t\tisPromise,\r\n\t\tthen,\r\n\t\tarray,\r\n\t\tobj: {\r\n\t\t\tsetReadonly,\r\n\t\t\teach,\r\n\t\t\tisObject,\r\n\t\t},\r\n\t\tstr: {\r\n\t\t\tendsWith\r\n\t\t},\r\n\t\tevent: {\r\n\t\t\tgetMouseButtons,\r\n\t\t\tgetKeyCode,\r\n\t\t\tisTouchEvent,\r\n\t\t\tcancel,\r\n\t\t},\r\n\t\tstyle: {\r\n\t\t\ttoBoxArray,\r\n\t\t},\r\n\t\temptyFn() {},\r\n\t};\r\n}","'use strict';\r\n\r\nconst {extend} = require('../internal/utils');\r\nconst DrawGrid = require('../core/DrawGrid');\r\nconst EVENT_TYPE = extend(DrawGrid.EVENT_TYPE, {\r\n\tCHANGED_VALUE: 'changed_value',\r\n});\r\nmodule.exports = EVENT_TYPE;","'use strict';\r\n\r\n{\r\n\tconst core = require('./core');\r\n\tconst tools = require('./tools');\r\n\tconst columns = require('./columns');\r\n\tconst themes = require('./themes');\r\n\tconst data = require('./data');\r\n\t\r\n\tconst ListGrid = require('./ListGrid');\r\n\tconst GridCanvasHelper = require('./GridCanvasHelper');\r\n\t\r\n\tconst icons = require('./icons');\r\n\tconst register = require('./register');\r\n\t\r\n\t/**\r\n\t * Cheetah Grid\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcore,\r\n\t\ttools,\r\n\r\n\t\t// impl Grids\r\n\t\tListGrid,\r\n\r\n\t\t// objects\r\n\t\tcolumns,\r\n\t\tthemes,\r\n\t\tdata,\r\n\r\n\t\t// helper\r\n\t\tGridCanvasHelper,\r\n\t\tget icons() {\r\n\t\t\treturn icons.get();\r\n\t\t},\r\n\r\n\t\t//plugin registers\r\n\t\tregister,\r\n\r\n\t\tget _internal() {\r\n\t\t\tconsole.warn('use internal!!');\r\n\t\t\treturn {\r\n\t\t\t\tcolor: require('./internal/color'),\r\n\t\t\t\tsort: require('./internal/sort'),\r\n\t\t\t\tcalc: require('./internal/calc'),\r\n\t\t\t\tsymbolManager: require('./internal/symbolManager'),\r\n\t\t\t\tpath2DManager: require('./internal/path2DManager'),\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n\r\nmodule.exports = {};","'use strict';\r\n\r\nconst themePlugins = require('./plugins/themes');\r\nconst iconPlugins = require('./plugins/icons');\r\n\r\nfunction register(obj, name, value) {\r\n\tif (value) {\r\n\t\tconst old = obj[name];\r\n\t\tobj[name] = value;\r\n\t\treturn old;\r\n\t} else {\r\n\t\treturn obj[name];\r\n\t}\r\n}\r\nfunction registers(obj, values) {\r\n\tfor (const k in values) {\r\n\t\tobj[k] = values[k];\r\n\t}\r\n}\r\nmodule.exports = {\r\n\ttheme(name, theme) {\r\n\t\treturn register(themePlugins, name, theme);\r\n\t},\r\n\ticon(name, icon) {\r\n\t\treturn register(iconPlugins, name, icon);\r\n\t},\r\n\ticons(icons) {\r\n\t\tregisters(iconPlugins, icons);\r\n\t},\r\n};","'use strict';\r\n{\r\n\tconst {extend, getIgnoreCase} = require('./internal/utils');\r\n\tconst theme = require('./themes/theme');\r\n\tconst plugins = require('./plugins/themes');\r\n\tconst BASIC = theme.create(require('./themes/BASIC'));\r\n\tconst MATERIAL_DESIGN = theme.create(require('./themes/MATERIAL_DESIGN'));\r\n\r\n\tconst builtin = {\r\n\t\tBASIC,\r\n\t\tMATERIAL_DESIGN,\r\n\t};\r\n\tlet defTheme = theme.create({});\r\n\t/**\r\n\t * themes\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tconst themes = {\r\n\t\tget default() {\r\n\t\t\treturn defTheme;\r\n\t\t},\r\n\t\tset default(defaultTheme) {\r\n\t\t\tdefTheme = defaultTheme;\r\n\t\t},\r\n\t\ttheme,\r\n\t\tof(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (typeof value === 'string') {\r\n\t\t\t\tconst t = getIgnoreCase(themes.choices, value);\r\n\t\t\t\tif (t) {\r\n\t\t\t\t\treturn t;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t},\r\n\t\t/**\r\n\t\t * @namespace cheetahGrid.themes.choices\r\n\t\t */\r\n\t\tget choices() {\r\n\t\t\treturn extend(builtin, plugins);\r\n\t\t},\r\n\t};\r\n\tmodule.exports = themes;\r\n}","/*eslint no-bitwise:0*/\r\n'use strict';\r\nfunction DEFAULT_BG_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (!((row - frozenRowCount) & 1)) {\r\n\t\treturn '#FFF';\r\n\t} else {\r\n\t\treturn '#F6F6F6';\r\n\t}\r\n}\r\nconst cacheLinearGradient = {};\r\nfunction getLinearGradient(context, left, top, right, bottom, colorStops) {\r\n\tlet stop;\r\n\tconst stopsKey = [];\r\n\tfor (stop in colorStops) {\r\n\t\tstopsKey.push(`${stop}@${colorStops[stop]}`);\r\n\t}\r\n\tconst key = `${left}/${top}/${right}/${bottom}/${stopsKey.join(',')}`;\r\n\tconst ret = cacheLinearGradient[key];\r\n\tif (ret) {\r\n\t\treturn ret;\r\n\t}\r\n\tconst grad = context.createLinearGradient(left, top, left, bottom);\r\n\tfor (stop in colorStops) {\r\n\t\tgrad.addColorStop(stop, colorStops[stop]);\r\n\t}\r\n\treturn (cacheLinearGradient[key] = grad);\r\n}\r\nfunction FROZEN_ROWS_BG_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid,\r\n\t\tgrid: {frozenRowCount},\r\n\t\tcontext\r\n\t} = args;\r\n\tconst {left, top} = grid.getCellRelativeRect(col, 0);\r\n\tconst {bottom} = grid.getCellRelativeRect(col, frozenRowCount - 1);\r\n\r\n\treturn getLinearGradient(context, left, top, left, bottom, {0: '#FFF', 1: '#D3D3D3'});\r\n}\r\n/**\r\n * basic theme\r\n * @name BASIC\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: '#000',\r\n\tdefaultBgColor: DEFAULT_BG_COLOR,\r\n\tfrozenRowsBgColor: FROZEN_ROWS_BG_COLOR,\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: '#000',\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#F6F6F6',\r\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n\r\nfunction FROZEN_ROWS_BORDER_COLOR(args) {\r\n\tconst {\r\n\t\trow,\r\n\t\tgrid: {frozenRowCount}\r\n\t} = args;\r\n\tif (frozenRowCount - 1 === row) {\r\n\t\treturn ['#f2f2f2', '#f2f2f2', '#ccc7c7', '#f2f2f2'];\r\n\t} else {\r\n\t\treturn ['#f2f2f2'];\r\n\t}\r\n}\r\nfunction BORDER_COLOR(args) {\r\n\tconst {\r\n\t\tcol,\r\n\t\tgrid: {colCount}\r\n\t} = args;\r\n\tif (colCount - 1 === col) {\r\n\t\treturn ['#ccc7c7', '#f2f2f2', '#ccc7c7', null];\r\n\t} else {\r\n\t\treturn ['#ccc7c7', null];\r\n\t}\r\n}\r\n/**\r\n * material design theme\r\n * @name MATERIAL_DESIGN\r\n * @type {Object}\r\n * @memberof cheetahGrid.themes.choices\r\n */\r\nmodule.exports = {\r\n\tcolor: 'rgba(0, 0, 0, 0.87)',\r\n\tdefaultBgColor: '#FFF',\r\n\tfrozenRowsBgColor: '#FFF',\r\n\tfrozenRowsColor: 'rgba(0, 0, 0, 0.54)',\r\n\thiliteBorderColor: '#5E9ED6',\r\n\tselectionBgColor: '#CCE0FF',\r\n\tborderColor: BORDER_COLOR,\r\n\tfrozenRowsBorderColor: FROZEN_ROWS_BORDER_COLOR,\r\n\tcheckbox: {\r\n\t\tuncheckBgColor: '#FFF',\r\n\t\tcheckBgColor: 'rgb(76, 73, 72)',\r\n\t\tborderColor: 'rgba(0, 0, 0, 0.26)',\r\n\t},\r\n\tbutton: {\r\n\t\tcolor: '#FFF',\r\n\t\tbgColor: '#2196F3',\r\n\t},\r\n\tunderlayBackgroundColor: '#FFF',\r\n};","/*eslint no-bitwise:0*/\r\n'use strict';\r\n{\r\n\tconst {getChainSafe} = require('../internal/utils');\r\n\tconst defaultTheme = require('./MATERIAL_DESIGN');\r\n\r\n\tfunction getProp(obj, superObj, names, defNames) {\r\n\t\treturn getChainSafe(obj, ...names) ||\r\n\t\t(defNames && getChainSafe(obj, ...defNames)) ||\r\n\t\tgetChainSafe(superObj, ...names);\r\n\t}\r\n\tfunction createTheme(obj = {}, superTheme = defaultTheme) {\r\n\t\treturn {\r\n\t\t\tget font() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['font']);\r\n\t\t\t},\r\n\t\t\tget underlayBackgroundColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['underlayBackgroundColor']);\r\n\t\t\t},\r\n\t\t\t// color\r\n\t\t\tget color() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['color']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsColor'], ['color']);\r\n\t\t\t},\r\n\t\t\t// background\r\n\t\t\tget defaultBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\tget selectionBgColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['selectionBgColor'], ['defaultBgColor']);\r\n\t\t\t},\r\n\t\t\t// border\r\n\t\t\tget borderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget frozenRowsBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['frozenRowsBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget hiliteBorderColor() {\r\n\t\t\t\treturn getProp(obj, superTheme, ['hiliteBorderColor'], ['borderColor']);\r\n\t\t\t},\r\n\t\t\tget checkbox() {\r\n\t\t\t\treturn this._checkbox || (this._checkbox = {\r\n\t\t\t\t\tget uncheckBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'uncheckBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget checkBgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'checkBgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget borderColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['checkbox', 'borderColor'], ['borderColor']);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tget button() {\r\n\t\t\t\treturn this._button || (this._button = {\r\n\t\t\t\t\tget color() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'color'], ['color']);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget bgColor() {\r\n\t\t\t\t\t\treturn getProp(obj, superTheme, ['button', 'bgColor'], ['defaultBgColor']);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\textends(obj) {\r\n\t\t\t\treturn createTheme(obj, this);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * theme object\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.themes.theme\r\n\t * @memberof cheetahGrid.themes\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcreate(obj) {\r\n\t\t\treturn createTheme(obj);\r\n\t\t}\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst canvashelper = require('./tools/canvashelper');\r\n\r\n\t/**\r\n\t * tools\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools\r\n\t * @memberof cheetahGrid\r\n\t */\r\n\tmodule.exports = {\r\n\t\tcanvashelper,\r\n\t};\r\n}","'use strict';\r\n{\r\n\tconst {calcBasePosition, calcStartPosition} = require('../internal/canvases');\r\n\tconst {ceil, PI} = Math;\r\n\r\n\tfunction strokeColorsRect(ctx, borderColors, left, top, width, height) {\r\n\t\tfunction strokeRectLines(positions) {\r\n\t\t\tfor (let i = 0; i < borderColors.length; i++) {\r\n\t\t\t\tconst color = borderColors[i];\r\n\t\t\t\tconst preColor = borderColors[i - 1];\r\n\t\t\t\tif (color) {\r\n\t\t\t\t\tif (preColor !== color) {\r\n\t\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst pos1 = positions[i];\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\tctx.moveTo(pos1.x, pos1.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst pos2 = positions[i + 1];\r\n\t\t\t\t\tctx.lineTo(pos2.x, pos2.y);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (preColor) {\r\n\t\t\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst preColor = borderColors[borderColors.length - 1];\r\n\t\t\tif (preColor) {\r\n\t\t\t\tctx.strokeStyle = preColor;\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (borderColors[0] === borderColors[1] &&\r\n\t\t\tborderColors[0] === borderColors[2] &&\r\n\t\t\tborderColors[0] === borderColors[3]) {\r\n\t\t\tif (borderColors[0]) {\r\n\t\t\t\tctx.strokeStyle = borderColors[0];\r\n\t\t\t\tctx.strokeRect(left, top, width, height);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstrokeRectLines([\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t\t{x: left + width, y: top},\r\n\t\t\t\t{x: left + width, y: top + height},\r\n\t\t\t\t{x: left, y: top + height},\r\n\t\t\t\t{x: left, y: top},\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\tfunction roundRect(ctx, left, top, width, height, radius) {\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(left + radius, top + radius, radius, -PI, -0.5 * PI, false);\r\n\t\tctx.arc(left + width - radius, top + radius, radius, -0.5 * PI, 0, false);\r\n\t\tctx.arc(left + width - radius, top + height - radius, radius, 0, 0.5 * PI, false);\r\n\t\tctx.arc(left + radius, top + height - radius, radius, 0.5 * PI, PI, false);\r\n\t\tctx.closePath();\r\n\t}\r\n\tfunction fillRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.fill();\r\n\t}\r\n\tfunction strokeRoundRect(ctx, left, top, width, height, radius) {\r\n\t\troundRect(ctx, left, top, width, height, radius);\r\n\t\tctx.stroke();\r\n\t}\r\n\tfunction fillTextRect(ctx, text, left, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcBasePosition(ctx, rect, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.fillText(text, pos.x, pos.y);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawInlineImageRect(ctx, image,\r\n\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\tdestWidth, destHeight,\r\n\t\t\tleft, top, width, height,\r\n\t\t\t{\r\n\t\t\t\toffset = 2,\r\n\t\t\t\tpadding,\r\n\t\t\t} = {}) {\r\n\t\tconst rect = {\r\n\t\t\tleft,\r\n\t\t\ttop,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tright: left + width,\r\n\t\t\tbottom: top + height,\r\n\t\t};\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.rect(rect.left, rect.top, rect.width, rect.height);\r\n\t\t\t//clip\r\n\t\t\tctx.clip();\r\n\r\n\t\t\t//\r\n\t\t\tconst pos = calcStartPosition(ctx, rect, destWidth, destHeight, {\r\n\t\t\t\toffset,\r\n\t\t\t\tpadding\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tctx.drawImage(image,\r\n\t\t\t\t\tsrcLeft, srcTop, srcWidth, srcHeight,\r\n\t\t\t\t\tpos.x, pos.y, destWidth, destHeight\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an object containing the width of the checkbox.\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @return {Object} Object containing the width of the checkbox\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction measureCheckbox(ctx) {\r\n\t\treturn {\r\n\t\t\twidth: ctx.measureText('').width\r\n\t\t};\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * draw Checkbox\r\n\t * @param  {CanvasRenderingContext2D} ctx canvas context\r\n\t * @param  {number} x The x coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {number} y The y coordinate where to start drawing the checkbox (relative to the canvas)\r\n\t * @param  {boolean|number} check checkbox check status\r\n\t * @param  {object} option option\r\n\t * @return {void}\r\n\t * @memberof cheetahGrid.tools.canvashelper\r\n\t */\r\n\tfunction drawCheckbox(ctx, x, y, check,\r\n\t\t\t{\r\n\t\t\t\tuncheckBgColor = '#FFF',\r\n\t\t\t\tcheckBgColor = 'rgb(76, 73, 72)',\r\n\t\t\t\tborderColor = '#000',\r\n\t\t\t\tboxSize = measureCheckbox(ctx).width,\r\n\t\t\t} = {}) {\r\n\t\tconst checkPoint = typeof check === 'number' ? (check > 1 ? 1 : check) : 1;\r\n\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = check ? checkBgColor : uncheckBgColor;\r\n\t\t\t\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 1,\r\n\t\t\t\t\tceil(y) - 1,\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tceil(boxSize + 1),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tctx.lineWidth = 1;\r\n\t\t\tctx.strokeStyle = borderColor;\r\n\t\t\tstrokeRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(x) - 0.5,\r\n\t\t\t\t\tceil(y) - 0.5,\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tceil(boxSize),\r\n\t\t\t\t\tboxSize / 5\r\n\t\t\t);\r\n\t\t\tif (check) {\r\n\t\t\t\tctx.lineWidth = ceil(boxSize / 10);\r\n\t\t\t\tctx.strokeStyle = uncheckBgColor;\r\n\t\t\t\tlet leftWidth = boxSize / 4;\r\n\t\t\t\tlet rightWidth = boxSize / 2 * 0.9;\r\n\t\t\t\tconst leftLeftPos = x + boxSize * 0.2;\r\n\t\t\t\tconst leftTopPos = y + boxSize / 2;\r\n\r\n\t\t\t\tif (checkPoint < 0.5) {\r\n\t\t\t\t\tleftWidth = leftWidth * (checkPoint * 2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(leftLeftPos, leftTopPos);\r\n\t\t\t\tctx.lineTo(leftLeftPos + leftWidth, leftTopPos + leftWidth);\r\n\t\t\t\tif (checkPoint > 0.5) {\r\n\t\t\t\t\tif (checkPoint < 1) {\r\n\t\t\t\t\t\trightWidth = rightWidth * ((checkPoint - 0.5) * 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tctx.lineTo(leftLeftPos + leftWidth + rightWidth, leftTopPos + leftWidth - rightWidth);\r\n\t\t\t\t}\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\tfunction drawButton(ctx, left, top, width, height, option = {}) {\r\n\t\tconst {\r\n\t\t\tbackgroundColor = '#FFF',\r\n\t\t\tbgColor = backgroundColor,\r\n\t\t\tradius = 4,\r\n\t\t\tshadow = {},\r\n\t\t} = option;\r\n\t\tctx.save();\r\n\t\ttry {\r\n\t\t\tctx.fillStyle = bgColor;\r\n\r\n\t\t\tif (shadow) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcolor = 'rgba(0, 0, 0, 0.24)',\r\n\t\t\t\t\tblur = 1,\r\n\t\t\t\t\toffsetX = 0,\r\n\t\t\t\t\toffsetY = 2,\r\n\t\t\t\t\toffset: {\r\n\t\t\t\t\t\tx: ox = offsetX,\r\n\t\t\t\t\t\ty: oy = offsetY\r\n\t\t\t\t\t} = {},\r\n\t\t\t\t} = shadow;\r\n\t\t\t\tctx.shadowColor = color;\r\n\t\t\t\tctx.shadowBlur = blur; //\r\n\t\t\t\tctx.shadowOffsetX = ox;\r\n\t\t\t\tctx.shadowOffsetY = oy;\r\n\t\t\t}\r\n\r\n\t\t\tfillRoundRect(\r\n\t\t\t\t\tctx,\r\n\t\t\t\t\tceil(left),\r\n\t\t\t\t\tceil(top),\r\n\t\t\t\t\tceil(width),\r\n\t\t\t\t\tceil(height),\r\n\t\t\t\t\tradius\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * canvashelper\r\n\t * @type {Object}\r\n\t * @namespace cheetahGrid.tools.canvashelper\r\n\t * @memberof cheetahGrid.tools\r\n\t */\r\n\tconst canvashelper = {\r\n\t\troundRect,\r\n\t\tfillRoundRect,\r\n\t\tstrokeRoundRect,\r\n\t\tdrawCheckbox,\r\n\t\tmeasureCheckbox,\r\n\t\tfillTextRect,\r\n\t\tdrawButton,\r\n\t\tdrawInlineImageRect,\r\n\t\tstrokeColorsRect,\r\n\t};\r\n\r\n\r\n\tmodule.exports = canvashelper;\r\n}"],"sourceRoot":""}